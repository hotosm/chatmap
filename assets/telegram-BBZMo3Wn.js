import{C as t}from"./index-EljJHplB.js";const e=t=>t.substring(t.lastIndexOf("/")+1,t.length),o=t=>t.location,i=t=>new Date(t),n=t=>{const o=[];return t.forEach((t=>{const n=(t=>{let o="",n={time:i(t.date),username:t.from};return Array.isArray(t.text)?t.text.forEach((t=>{"link"===t.type&&(o=t.text)})):""!==t.text&&(o=t.text),n.message=o,t.location_information&&(n.location=[t.location_information.latitude,t.location_information.longitude]),t.photo&&(n.file=e(t.photo)),t.file&&"video/mp4"===t.mime_type&&(n.file=e(t.file)),t.file&&["audio/ogg","audio/opus","audio/mp3","audio/m4a","audio/wav"].indexOf(t.mime_type)>-1&&(n.file=e(t.file)),n})(t);n&&o.push(n)})),o};function a({text:e,options:i}){if(!e)return;const a=JSON.parse(e),r=n(a.messages);return{geoJSON:new t(r,o,i).pairContentAndLocations()}}export{a as default};
