import{g as u,a as g,b as p}from"./chatmap--UvUJPGO.js";function i(t){return t.substring(t.lastIndexOf("/")+1,t.length)}const l=t=>{let s="",e={time:m(t.date),username:t.from};return Array.isArray(t.text)?t.text.forEach(o=>{o.type==="link"&&(s=o.text)}):t.text!==""&&(s=t.text),e.message=s,t.location_information&&(e.location=[t.location_information.latitude,t.location_information.longitude]),t.photo&&(e.file=i(t.photo)),t.file&&t.mime_type==="video/mp4"&&(e.file=i(t.file)),e},m=t=>new Date(t),b=t=>{let s=0;const e={};return t.forEach(o=>{const r=l(o);r&&(e[s]=r,s++)}),e};function x({text:t,msgPosition:s}){if(!t)return;const e=JSON.parse(t),o={type:"FeatureCollection",features:[]},r=b(e.messages);return Object.values(r).forEach((n,c)=>{if(n.location){let f={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[n.location[1],n.location[0]]}},a;switch(s){case"before":a=p(r,c);break;case"after":a=g(r,c);break;default:a=u(r,c);break}f.properties={...a},o.features.push(f)}}),o}export{x as default};
//# sourceMappingURL=telegram-naMZCWTL.js.map
