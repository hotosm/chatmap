var f1=(n,h)=>()=>(h||n((h={exports:{}}).exports,h),h.exports);var IC=f1((MC,km)=>{(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))y(b);new MutationObserver(b=>{for(const C of b)if(C.type==="childList")for(const S of C.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&y(S)}).observe(document,{childList:!0,subtree:!0});function f(b){const C={};return b.integrity&&(C.integrity=b.integrity),b.referrerPolicy&&(C.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?C.credentials="include":b.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function y(b){if(b.ep)return;b.ep=!0;const C=f(b);fetch(b.href,C)}})();var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function af(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function p1(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var h=n.default;if(typeof h=="function"){var f=function y(){return this instanceof y?Reflect.construct(h,arguments,this.constructor):h.apply(this,arguments)};f.prototype=h.prototype}else f={};return Object.defineProperty(f,"__esModule",{value:!0}),Object.keys(n).forEach(function(y){var b=Object.getOwnPropertyDescriptor(n,y);Object.defineProperty(f,y,b.get?b:{enumerable:!0,get:function(){return n[y]}})}),f}var Sg={exports:{}},Hf={},kg={exports:{}},mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function m1(){if(v_)return mn;v_=1;var n=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),U=Symbol.iterator;function j(ae){return ae===null||typeof ae!="object"?null:(ae=U&&ae[U]||ae["@@iterator"],typeof ae=="function"?ae:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,J={};function oe(ae,_e,Ct){this.props=ae,this.context=_e,this.refs=J,this.updater=Ct||G}oe.prototype.isReactComponent={},oe.prototype.setState=function(ae,_e){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,_e,"setState")},oe.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function re(){}re.prototype=oe.prototype;function pe(ae,_e,Ct){this.props=ae,this.context=_e,this.refs=J,this.updater=Ct||G}var ge=pe.prototype=new re;ge.constructor=pe,se(ge,oe.prototype),ge.isPureReactComponent=!0;var Oe=Array.isArray,ve=Object.prototype.hasOwnProperty,Ge={current:null},je={key:!0,ref:!0,__self:!0,__source:!0};function St(ae,_e,Ct){var bt,wt={},lr=null,pr=null;if(_e!=null)for(bt in _e.ref!==void 0&&(pr=_e.ref),_e.key!==void 0&&(lr=""+_e.key),_e)ve.call(_e,bt)&&!je.hasOwnProperty(bt)&&(wt[bt]=_e[bt]);var Gt=arguments.length-2;if(Gt===1)wt.children=Ct;else if(1<Gt){for(var Kt=Array(Gt),Mr=0;Mr<Gt;Mr++)Kt[Mr]=arguments[Mr+2];wt.children=Kt}if(ae&&ae.defaultProps)for(bt in Gt=ae.defaultProps,Gt)wt[bt]===void 0&&(wt[bt]=Gt[bt]);return{$$typeof:n,type:ae,key:lr,ref:pr,props:wt,_owner:Ge.current}}function at(ae,_e){return{$$typeof:n,type:ae.type,key:_e,ref:ae.ref,props:ae.props,_owner:ae._owner}}function Mt(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===n}function xt(ae){var _e={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(Ct){return _e[Ct]})}var xe=/\/+/g;function Je(ae,_e){return typeof ae=="object"&&ae!==null&&ae.key!=null?xt(""+ae.key):_e.toString(36)}function W(ae,_e,Ct,bt,wt){var lr=typeof ae;(lr==="undefined"||lr==="boolean")&&(ae=null);var pr=!1;if(ae===null)pr=!0;else switch(lr){case"string":case"number":pr=!0;break;case"object":switch(ae.$$typeof){case n:case h:pr=!0}}if(pr)return pr=ae,wt=wt(pr),ae=bt===""?"."+Je(pr,0):bt,Oe(wt)?(Ct="",ae!=null&&(Ct=ae.replace(xe,"$&/")+"/"),W(wt,_e,Ct,"",function(Mr){return Mr})):wt!=null&&(Mt(wt)&&(wt=at(wt,Ct+(!wt.key||pr&&pr.key===wt.key?"":(""+wt.key).replace(xe,"$&/")+"/")+ae)),_e.push(wt)),1;if(pr=0,bt=bt===""?".":bt+":",Oe(ae))for(var Gt=0;Gt<ae.length;Gt++){lr=ae[Gt];var Kt=bt+Je(lr,Gt);pr+=W(lr,_e,Ct,Kt,wt)}else if(Kt=j(ae),typeof Kt=="function")for(ae=Kt.call(ae),Gt=0;!(lr=ae.next()).done;)lr=lr.value,Kt=bt+Je(lr,Gt++),pr+=W(lr,_e,Ct,Kt,wt);else if(lr==="object")throw _e=String(ae),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return pr}function Ve(ae,_e,Ct){if(ae==null)return ae;var bt=[],wt=0;return W(ae,bt,"","",function(lr){return _e.call(Ct,lr,wt++)}),bt}function zt(ae){if(ae._status===-1){var _e=ae._result;_e=_e(),_e.then(function(Ct){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=Ct)},function(Ct){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=Ct)}),ae._status===-1&&(ae._status=0,ae._result=_e)}if(ae._status===1)return ae._result.default;throw ae._result}var Me={current:null},et={transition:null},Ze={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:et,ReactCurrentOwner:Ge};function ht(){throw Error("act(...) is not supported in production builds of React.")}return mn.Children={map:Ve,forEach:function(ae,_e,Ct){Ve(ae,function(){_e.apply(this,arguments)},Ct)},count:function(ae){var _e=0;return Ve(ae,function(){_e++}),_e},toArray:function(ae){return Ve(ae,function(_e){return _e})||[]},only:function(ae){if(!Mt(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},mn.Component=oe,mn.Fragment=f,mn.Profiler=b,mn.PureComponent=pe,mn.StrictMode=y,mn.Suspense=R,mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ze,mn.act=ht,mn.cloneElement=function(ae,_e,Ct){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var bt=se({},ae.props),wt=ae.key,lr=ae.ref,pr=ae._owner;if(_e!=null){if(_e.ref!==void 0&&(lr=_e.ref,pr=Ge.current),_e.key!==void 0&&(wt=""+_e.key),ae.type&&ae.type.defaultProps)var Gt=ae.type.defaultProps;for(Kt in _e)ve.call(_e,Kt)&&!je.hasOwnProperty(Kt)&&(bt[Kt]=_e[Kt]===void 0&&Gt!==void 0?Gt[Kt]:_e[Kt])}var Kt=arguments.length-2;if(Kt===1)bt.children=Ct;else if(1<Kt){Gt=Array(Kt);for(var Mr=0;Mr<Kt;Mr++)Gt[Mr]=arguments[Mr+2];bt.children=Gt}return{$$typeof:n,type:ae.type,key:wt,ref:lr,props:bt,_owner:pr}},mn.createContext=function(ae){return ae={$$typeof:S,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:C,_context:ae},ae.Consumer=ae},mn.createElement=St,mn.createFactory=function(ae){var _e=St.bind(null,ae);return _e.type=ae,_e},mn.createRef=function(){return{current:null}},mn.forwardRef=function(ae){return{$$typeof:c,render:ae}},mn.isValidElement=Mt,mn.lazy=function(ae){return{$$typeof:Z,_payload:{_status:-1,_result:ae},_init:zt}},mn.memo=function(ae,_e){return{$$typeof:N,type:ae,compare:_e===void 0?null:_e}},mn.startTransition=function(ae){var _e=et.transition;et.transition={};try{ae()}finally{et.transition=_e}},mn.unstable_act=ht,mn.useCallback=function(ae,_e){return Me.current.useCallback(ae,_e)},mn.useContext=function(ae){return Me.current.useContext(ae)},mn.useDebugValue=function(){},mn.useDeferredValue=function(ae){return Me.current.useDeferredValue(ae)},mn.useEffect=function(ae,_e){return Me.current.useEffect(ae,_e)},mn.useId=function(){return Me.current.useId()},mn.useImperativeHandle=function(ae,_e,Ct){return Me.current.useImperativeHandle(ae,_e,Ct)},mn.useInsertionEffect=function(ae,_e){return Me.current.useInsertionEffect(ae,_e)},mn.useLayoutEffect=function(ae,_e){return Me.current.useLayoutEffect(ae,_e)},mn.useMemo=function(ae,_e){return Me.current.useMemo(ae,_e)},mn.useReducer=function(ae,_e,Ct){return Me.current.useReducer(ae,_e,Ct)},mn.useRef=function(ae){return Me.current.useRef(ae)},mn.useState=function(ae){return Me.current.useState(ae)},mn.useSyncExternalStore=function(ae,_e,Ct){return Me.current.useSyncExternalStore(ae,_e,Ct)},mn.useTransition=function(){return Me.current.useTransition()},mn.version="18.3.1",mn}var x_;function ed(){return x_||(x_=1,kg.exports=m1()),kg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function g1(){if(w_)return Hf;w_=1;var n=ed(),h=Symbol.for("react.element"),f=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function S(c,R,N){var Z,U={},j=null,G=null;N!==void 0&&(j=""+N),R.key!==void 0&&(j=""+R.key),R.ref!==void 0&&(G=R.ref);for(Z in R)y.call(R,Z)&&!C.hasOwnProperty(Z)&&(U[Z]=R[Z]);if(c&&c.defaultProps)for(Z in R=c.defaultProps,R)U[Z]===void 0&&(U[Z]=R[Z]);return{$$typeof:h,type:c,key:j,ref:G,props:U,_owner:b.current}}return Hf.Fragment=f,Hf.jsx=S,Hf.jsxs=S,Hf}var b_;function y1(){return b_||(b_=1,Sg.exports=g1()),Sg.exports}var yt=y1(),Xr=ed();const Jh=af(Xr);var em={},Tg={exports:{}},so={},Eg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function _1(){return S_||(S_=1,function(n){function h(et,Ze){var ht=et.length;et.push(Ze);e:for(;0<ht;){var ae=ht-1>>>1,_e=et[ae];if(0<b(_e,Ze))et[ae]=Ze,et[ht]=_e,ht=ae;else break e}}function f(et){return et.length===0?null:et[0]}function y(et){if(et.length===0)return null;var Ze=et[0],ht=et.pop();if(ht!==Ze){et[0]=ht;e:for(var ae=0,_e=et.length,Ct=_e>>>1;ae<Ct;){var bt=2*(ae+1)-1,wt=et[bt],lr=bt+1,pr=et[lr];if(0>b(wt,ht))lr<_e&&0>b(pr,wt)?(et[ae]=pr,et[lr]=ht,ae=lr):(et[ae]=wt,et[bt]=ht,ae=bt);else if(lr<_e&&0>b(pr,ht))et[ae]=pr,et[lr]=ht,ae=lr;else break e}}return Ze}function b(et,Ze){var ht=et.sortIndex-Ze.sortIndex;return ht!==0?ht:et.id-Ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var C=performance;n.unstable_now=function(){return C.now()}}else{var S=Date,c=S.now();n.unstable_now=function(){return S.now()-c}}var R=[],N=[],Z=1,U=null,j=3,G=!1,se=!1,J=!1,oe=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ge(et){for(var Ze=f(N);Ze!==null;){if(Ze.callback===null)y(N);else if(Ze.startTime<=et)y(N),Ze.sortIndex=Ze.expirationTime,h(R,Ze);else break;Ze=f(N)}}function Oe(et){if(J=!1,ge(et),!se)if(f(R)!==null)se=!0,zt(ve);else{var Ze=f(N);Ze!==null&&Me(Oe,Ze.startTime-et)}}function ve(et,Ze){se=!1,J&&(J=!1,re(St),St=-1),G=!0;var ht=j;try{for(ge(Ze),U=f(R);U!==null&&(!(U.expirationTime>Ze)||et&&!xt());){var ae=U.callback;if(typeof ae=="function"){U.callback=null,j=U.priorityLevel;var _e=ae(U.expirationTime<=Ze);Ze=n.unstable_now(),typeof _e=="function"?U.callback=_e:U===f(R)&&y(R),ge(Ze)}else y(R);U=f(R)}if(U!==null)var Ct=!0;else{var bt=f(N);bt!==null&&Me(Oe,bt.startTime-Ze),Ct=!1}return Ct}finally{U=null,j=ht,G=!1}}var Ge=!1,je=null,St=-1,at=5,Mt=-1;function xt(){return!(n.unstable_now()-Mt<at)}function xe(){if(je!==null){var et=n.unstable_now();Mt=et;var Ze=!0;try{Ze=je(!0,et)}finally{Ze?Je():(Ge=!1,je=null)}}else Ge=!1}var Je;if(typeof pe=="function")Je=function(){pe(xe)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Ve=W.port2;W.port1.onmessage=xe,Je=function(){Ve.postMessage(null)}}else Je=function(){oe(xe,0)};function zt(et){je=et,Ge||(Ge=!0,Je())}function Me(et,Ze){St=oe(function(){et(n.unstable_now())},Ze)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(et){et.callback=null},n.unstable_continueExecution=function(){se||G||(se=!0,zt(ve))},n.unstable_forceFrameRate=function(et){0>et||125<et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<et?Math.floor(1e3/et):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_getFirstCallbackNode=function(){return f(R)},n.unstable_next=function(et){switch(j){case 1:case 2:case 3:var Ze=3;break;default:Ze=j}var ht=j;j=Ze;try{return et()}finally{j=ht}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(et,Ze){switch(et){case 1:case 2:case 3:case 4:case 5:break;default:et=3}var ht=j;j=et;try{return Ze()}finally{j=ht}},n.unstable_scheduleCallback=function(et,Ze,ht){var ae=n.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?ae+ht:ae):ht=ae,et){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ht+_e,et={id:Z++,callback:Ze,priorityLevel:et,startTime:ht,expirationTime:_e,sortIndex:-1},ht>ae?(et.sortIndex=ht,h(N,et),f(R)===null&&et===f(N)&&(J?(re(St),St=-1):J=!0,Me(Oe,ht-ae))):(et.sortIndex=_e,h(R,et),se||G||(se=!0,zt(ve))),et},n.unstable_shouldYield=xt,n.unstable_wrapCallback=function(et){var Ze=j;return function(){var ht=j;j=Ze;try{return et.apply(this,arguments)}finally{j=ht}}}}(Cg)),Cg}var k_;function v1(){return k_||(k_=1,Eg.exports=_1()),Eg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function x1(){if(T_)return so;T_=1;var n=ed(),h=v1();function f(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,g=1;g<arguments.length;g++)o+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y=new Set,b={};function C(s,o){S(s,o),S(s+"Capture",o)}function S(s,o){for(b[s]=o,s=0;s<o.length;s++)y.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R=Object.prototype.hasOwnProperty,N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z={},U={};function j(s){return R.call(U,s)?!0:R.call(Z,s)?!1:N.test(s)?U[s]=!0:(Z[s]=!0,!1)}function G(s,o,g,k){if(g!==null&&g.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return k?!1:g!==null?!g.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function se(s,o,g,k){if(o===null||typeof o>"u"||G(s,o,g,k))return!0;if(k)return!1;if(g!==null)switch(g.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function J(s,o,g,k,M,O,ie){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=k,this.attributeNamespace=M,this.mustUseProperty=g,this.propertyName=s,this.type=o,this.sanitizeURL=O,this.removeEmptyString=ie}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){oe[s]=new J(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];oe[o]=new J(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){oe[s]=new J(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){oe[s]=new J(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){oe[s]=new J(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){oe[s]=new J(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){oe[s]=new J(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){oe[s]=new J(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){oe[s]=new J(s,5,!1,s.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function pe(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(re,pe);oe[o]=new J(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(re,pe);oe[o]=new J(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(re,pe);oe[o]=new J(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){oe[s]=new J(s,1,!1,s.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){oe[s]=new J(s,1,!1,s.toLowerCase(),null,!0,!0)});function ge(s,o,g,k){var M=oe.hasOwnProperty(o)?oe[o]:null;(M!==null?M.type!==0:k||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(se(o,g,M,k)&&(g=null),k||M===null?j(o)&&(g===null?s.removeAttribute(o):s.setAttribute(o,""+g)):M.mustUseProperty?s[M.propertyName]=g===null?M.type===3?!1:"":g:(o=M.attributeName,k=M.attributeNamespace,g===null?s.removeAttribute(o):(M=M.type,g=M===3||M===4&&g===!0?"":""+g,k?s.setAttributeNS(k,o,g):s.setAttribute(o,g))))}var Oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),Ge=Symbol.for("react.portal"),je=Symbol.for("react.fragment"),St=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),Mt=Symbol.for("react.provider"),xt=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Je=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),zt=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),et=Symbol.iterator;function Ze(s){return s===null||typeof s!="object"?null:(s=et&&s[et]||s["@@iterator"],typeof s=="function"?s:null)}var ht=Object.assign,ae;function _e(s){if(ae===void 0)try{throw Error()}catch(g){var o=g.stack.trim().match(/\n( *(at )?)/);ae=o&&o[1]||""}return`
`+ae+s}var Ct=!1;function bt(s,o){if(!s||Ct)return"";Ct=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(mt){var k=mt}Reflect.construct(s,[],o)}else{try{o.call()}catch(mt){k=mt}s.call(o.prototype)}else{try{throw Error()}catch(mt){k=mt}s()}}catch(mt){if(mt&&k&&typeof mt.stack=="string"){for(var M=mt.stack.split(`
`),O=k.stack.split(`
`),ie=M.length-1,ze=O.length-1;1<=ie&&0<=ze&&M[ie]!==O[ze];)ze--;for(;1<=ie&&0<=ze;ie--,ze--)if(M[ie]!==O[ze]){if(ie!==1||ze!==1)do if(ie--,ze--,0>ze||M[ie]!==O[ze]){var He=`
`+M[ie].replace(" at new "," at ");return s.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",s.displayName)),He}while(1<=ie&&0<=ze);break}}}finally{Ct=!1,Error.prepareStackTrace=g}return(s=s?s.displayName||s.name:"")?_e(s):""}function wt(s){switch(s.tag){case 5:return _e(s.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return s=bt(s.type,!1),s;case 11:return s=bt(s.type.render,!1),s;case 1:return s=bt(s.type,!0),s;default:return""}}function lr(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case je:return"Fragment";case Ge:return"Portal";case at:return"Profiler";case St:return"StrictMode";case Je:return"Suspense";case W:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case xt:return(s.displayName||"Context")+".Consumer";case Mt:return(s._context.displayName||"Context")+".Provider";case xe:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ve:return o=s.displayName||null,o!==null?o:lr(s.type)||"Memo";case zt:o=s._payload,s=s._init;try{return lr(s(o))}catch{}}return null}function pr(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lr(o);case 8:return o===St?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Gt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Kt(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mr(s){var o=Kt(s)?"checked":"value",g=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),k=""+s[o];if(!s.hasOwnProperty(o)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var M=g.get,O=g.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return M.call(this)},set:function(ie){k=""+ie,O.call(this,ie)}}),Object.defineProperty(s,o,{enumerable:g.enumerable}),{getValue:function(){return k},setValue:function(ie){k=""+ie},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Vr(s){s._valueTracker||(s._valueTracker=Mr(s))}function tn(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var g=o.getValue(),k="";return s&&(k=Kt(s)?s.checked?"true":"false":s.value),s=k,s!==g?(o.setValue(s),!0):!1}function Kr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Y(s,o){var g=o.checked;return ht({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??s._wrapperState.initialChecked})}function ft(s,o){var g=o.defaultValue==null?"":o.defaultValue,k=o.checked!=null?o.checked:o.defaultChecked;g=Gt(o.value!=null?o.value:g),s._wrapperState={initialChecked:k,initialValue:g,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ye(s,o){o=o.checked,o!=null&&ge(s,"checked",o,!1)}function Ae(s,o){ye(s,o);var g=Gt(o.value),k=o.type;if(g!=null)k==="number"?(g===0&&s.value===""||s.value!=g)&&(s.value=""+g):s.value!==""+g&&(s.value=""+g);else if(k==="submit"||k==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Ne(s,o.type,g):o.hasOwnProperty("defaultValue")&&Ne(s,o.type,Gt(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function we(s,o,g){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var k=o.type;if(!(k!=="submit"&&k!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,g||o===s.value||(s.value=o),s.defaultValue=o}g=s.name,g!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,g!==""&&(s.name=g)}function Ne(s,o,g){(o!=="number"||Kr(s.ownerDocument)!==s)&&(g==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+g&&(s.defaultValue=""+g))}var _t=Array.isArray;function At(s,o,g,k){if(s=s.options,o){o={};for(var M=0;M<g.length;M++)o["$"+g[M]]=!0;for(g=0;g<s.length;g++)M=o.hasOwnProperty("$"+s[g].value),s[g].selected!==M&&(s[g].selected=M),M&&k&&(s[g].defaultSelected=!0)}else{for(g=""+Gt(g),o=null,M=0;M<s.length;M++){if(s[M].value===g){s[M].selected=!0,k&&(s[M].defaultSelected=!0);return}o!==null||s[M].disabled||(o=s[M])}o!==null&&(o.selected=!0)}}function nt(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(f(91));return ht({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Dt(s,o){var g=o.value;if(g==null){if(g=o.children,o=o.defaultValue,g!=null){if(o!=null)throw Error(f(92));if(_t(g)){if(1<g.length)throw Error(f(93));g=g[0]}o=g}o==null&&(o=""),g=o}s._wrapperState={initialValue:Gt(g)}}function nr(s,o){var g=Gt(o.value),k=Gt(o.defaultValue);g!=null&&(g=""+g,g!==s.value&&(s.value=g),o.defaultValue==null&&s.defaultValue!==g&&(s.defaultValue=g)),k!=null&&(s.defaultValue=""+k)}function Lt(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function xr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sn(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?xr(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var vt,Cn=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,g,k,M){MSApp.execUnsafeLocalFunction(function(){return s(o,g,k,M)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(vt=vt||document.createElement("div"),vt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=vt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Sn(s,o){if(o){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=o;return}}s.textContent=o}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wi=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(s){wi.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),In[o]=In[s]})});function Pt(s,o,g){return o==null||typeof o=="boolean"||o===""?"":g||typeof o!="number"||o===0||In.hasOwnProperty(s)&&In[s]?(""+o).trim():o+"px"}function Lr(s,o){s=s.style;for(var g in o)if(o.hasOwnProperty(g)){var k=g.indexOf("--")===0,M=Pt(g,o[g],k);g==="float"&&(g="cssFloat"),k?s.setProperty(g,M):s[g]=M}}var kr=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kn(s,o){if(o){if(kr[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(f(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(f(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(f(61))}if(o.style!=null&&typeof o.style!="object")throw Error(f(62))}}function bi(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ar=null;function Nn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ri=null,si=null,Hr=null;function Ce(s){if(s=Vu(s)){if(typeof Ri!="function")throw Error(f(280));var o=s.stateNode;o&&(o=Hu(o),Ri(s.stateNode,s.type,o))}}function ee(s){si?Hr?Hr.push(s):Hr=[s]:si=s}function Q(){if(si){var s=si,o=Hr;if(Hr=si=null,Ce(s),o)for(s=0;s<o.length;s++)Ce(o[s])}}function ue(s,o){return s(o)}function Se(){}var Fe=!1;function $e(s,o,g){if(Fe)return s(o,g);Fe=!0;try{return ue(s,o,g)}finally{Fe=!1,(si!==null||Hr!==null)&&(Se(),Q())}}function Xe(s,o){var g=s.stateNode;if(g===null)return null;var k=Hu(g);if(k===null)return null;g=k[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(s=s.type,k=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!k;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(f(231,o,typeof g));return g}var Le=!1;if(c)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){Le=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{Le=!1}function It(s,o,g,k,M,O,ie,ze,He){var mt=Array.prototype.slice.call(arguments,3);try{o.apply(g,mt)}catch(Ft){this.onError(Ft)}}var ut=!1,Nt=null,hr=!1,mr=null,rn={onError:function(s){ut=!0,Nt=s}};function Rr(s,o,g,k,M,O,ie,ze,He){ut=!1,Nt=null,It.apply(rn,arguments)}function en(s,o,g,k,M,O,ie,ze,He){if(Rr.apply(this,arguments),ut){if(ut){var mt=Nt;ut=!1,Nt=null}else throw Error(f(198));hr||(hr=!0,mr=mt)}}function Wr(s){var o=s,g=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(g=o.return),s=o.return;while(s)}return o.tag===3?g:null}function Pn(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function An(s){if(Wr(s)!==s)throw Error(f(188))}function Zr(s){var o=s.alternate;if(!o){if(o=Wr(s),o===null)throw Error(f(188));return o!==s?null:s}for(var g=s,k=o;;){var M=g.return;if(M===null)break;var O=M.alternate;if(O===null){if(k=M.return,k!==null){g=k;continue}break}if(M.child===O.child){for(O=M.child;O;){if(O===g)return An(M),s;if(O===k)return An(M),o;O=O.sibling}throw Error(f(188))}if(g.return!==k.return)g=M,k=O;else{for(var ie=!1,ze=M.child;ze;){if(ze===g){ie=!0,g=M,k=O;break}if(ze===k){ie=!0,k=M,g=O;break}ze=ze.sibling}if(!ie){for(ze=O.child;ze;){if(ze===g){ie=!0,g=O,k=M;break}if(ze===k){ie=!0,k=O,g=M;break}ze=ze.sibling}if(!ie)throw Error(f(189))}}if(g.alternate!==k)throw Error(f(190))}if(g.tag!==3)throw Error(f(188));return g.stateNode.current===g?s:o}function on(s){return s=Zr(s),s!==null?pn(s):null}function pn(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=pn(s);if(o!==null)return o;s=s.sibling}return null}var Wn=h.unstable_scheduleCallback,ai=h.unstable_cancelCallback,Si=h.unstable_shouldYield,Sa=h.unstable_requestPaint,Dr=h.unstable_now,Li=h.unstable_getCurrentPriorityLevel,Za=h.unstable_ImmediatePriority,ki=h.unstable_UserBlockingPriority,ci=h.unstable_NormalPriority,Nl=h.unstable_LowPriority,hi=h.unstable_IdlePriority,Jn=null,Ti=null;function fs(s){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(Jn,s,void 0,(s.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:jn,ka=Math.log,Zi=Math.LN2;function jn(s){return s>>>=0,s===0?32:31-(ka(s)/Zi|0)|0}var Ss=64,Oi=4194304;function ea(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ei(s,o){var g=s.pendingLanes;if(g===0)return 0;var k=0,M=s.suspendedLanes,O=s.pingedLanes,ie=g&268435455;if(ie!==0){var ze=ie&~M;ze!==0?k=ea(ze):(O&=ie,O!==0&&(k=ea(O)))}else ie=g&~M,ie!==0?k=ea(ie):O!==0&&(k=ea(O));if(k===0)return 0;if(o!==0&&o!==k&&(o&M)===0&&(M=k&-k,O=o&-o,M>=O||M===16&&(O&4194240)!==0))return o;if((k&4)!==0&&(k|=g&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=k;0<o;)g=31-ln(o),M=1<<g,k|=s[g],o&=~M;return k}function z(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K(s,o){for(var g=s.suspendedLanes,k=s.pingedLanes,M=s.expirationTimes,O=s.pendingLanes;0<O;){var ie=31-ln(O),ze=1<<ie,He=M[ie];He===-1?((ze&g)===0||(ze&k)!==0)&&(M[ie]=z(ze,o)):He<=o&&(s.expiredLanes|=ze),O&=~ze}}function he(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ke(){var s=Ss;return Ss<<=1,(Ss&4194240)===0&&(Ss=64),s}function Ke(s){for(var o=[],g=0;31>g;g++)o.push(s);return o}function st(s,o,g){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-ln(o),s[o]=g}function kt(s,o){var g=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var k=s.eventTimes;for(s=s.expirationTimes;0<g;){var M=31-ln(g),O=1<<M;o[M]=0,k[M]=-1,s[M]=-1,g&=~O}}function Ht(s,o){var g=s.entangledLanes|=o;for(s=s.entanglements;g;){var k=31-ln(g),M=1<<k;M&o|s[k]&o&&(s[k]|=o),g&=~M}}var Qt=0;function Or(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Gr,vn,Fi,ps,rs,ta=!1,ks=[],Ci=null,Ii=null,Gn=null,Un=new Map,Us=new Map,Vs=[],jl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iu(s,o){switch(s){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Un.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(o.pointerId)}}function ra(s,o,g,k,M,O){return s===null||s.nativeEvent!==O?(s={blockedOn:o,domEventName:g,eventSystemFlags:k,nativeEvent:O,targetContainers:[M]},o!==null&&(o=Vu(o),o!==null&&vn(o)),s):(s.eventSystemFlags|=k,o=s.targetContainers,M!==null&&o.indexOf(M)===-1&&o.push(M),s)}function qc(s,o,g,k,M){switch(o){case"focusin":return Ci=ra(Ci,s,o,g,k,M),!0;case"dragenter":return Ii=ra(Ii,s,o,g,k,M),!0;case"mouseover":return Gn=ra(Gn,s,o,g,k,M),!0;case"pointerover":var O=M.pointerId;return Un.set(O,ra(Un.get(O)||null,s,o,g,k,M)),!0;case"gotpointercapture":return O=M.pointerId,Us.set(O,ra(Us.get(O)||null,s,o,g,k,M)),!0}return!1}function Hs(s){var o=To(s.target);if(o!==null){var g=Wr(o);if(g!==null){if(o=g.tag,o===13){if(o=Pn(g),o!==null){s.blockedOn=o,rs(s.priority,function(){Fi(g)});return}}else if(o===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function lo(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var g=uo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(g===null){g=s.nativeEvent;var k=new g.constructor(g.type,g);Ar=k,g.target.dispatchEvent(k),Ar=null}else return o=Vu(g),o!==null&&vn(o),s.blockedOn=g,!1;o.shift()}return!0}function hl(s,o,g){lo(s)&&g.delete(o)}function Dn(){ta=!1,Ci!==null&&lo(Ci)&&(Ci=null),Ii!==null&&lo(Ii)&&(Ii=null),Gn!==null&&lo(Gn)&&(Gn=null),Un.forEach(hl),Us.forEach(hl)}function na(s,o){s.blockedOn===o&&(s.blockedOn=null,ta||(ta=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Dn)))}function Ts(s){function o(M){return na(M,s)}if(0<ks.length){na(ks[0],s);for(var g=1;g<ks.length;g++){var k=ks[g];k.blockedOn===s&&(k.blockedOn=null)}}for(Ci!==null&&na(Ci,s),Ii!==null&&na(Ii,s),Gn!==null&&na(Gn,s),Un.forEach(o),Us.forEach(o),g=0;g<Vs.length;g++)k=Vs[g],k.blockedOn===s&&(k.blockedOn=null);for(;0<Vs.length&&(g=Vs[0],g.blockedOn===null);)Hs(g),g.blockedOn===null&&Vs.shift()}var Es=Oe.ReactCurrentBatchConfig,ns=!0;function No(s,o,g,k){var M=Qt,O=Es.transition;Es.transition=null;try{Qt=1,ms(s,o,g,k)}finally{Qt=M,Es.transition=O}}function Ta(s,o,g,k){var M=Qt,O=Es.transition;Es.transition=null;try{Qt=4,ms(s,o,g,k)}finally{Qt=M,Es.transition=O}}function ms(s,o,g,k){if(ns){var M=uo(s,o,g,k);if(M===null)Uu(s,o,k,jo,g),Iu(s,k);else if(qc(M,s,o,g,k))k.stopPropagation();else if(Iu(s,k),o&4&&-1<jl.indexOf(s)){for(;M!==null;){var O=Vu(M);if(O!==null&&Gr(O),O=uo(s,o,g,k),O===null&&Uu(s,o,k,jo,g),O===M)break;M=O}M!==null&&k.stopPropagation()}else Uu(s,o,k,null,g)}}var jo=null;function uo(s,o,g,k){if(jo=null,s=Nn(k),s=To(s),s!==null)if(o=Wr(s),o===null)s=null;else if(g=o.tag,g===13){if(s=Pn(o),s!==null)return s;s=null}else if(g===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return jo=s,null}function Ea(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Li()){case Za:return 1;case ki:return 4;case ci:case Nl:return 16;case hi:return 536870912;default:return 16}default:return 16}}var Hi=null,un=null,co=null;function mc(){if(co)return co;var s,o=un,g=o.length,k,M="value"in Hi?Hi.value:Hi.textContent,O=M.length;for(s=0;s<g&&o[s]===M[s];s++);var ie=g-s;for(k=1;k<=ie&&o[g-k]===M[O-k];k++);return co=M.slice(s,1<k?1-k:void 0)}function Cs(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function dl(){return!0}function Uo(){return!1}function qi(s){function o(g,k,M,O,ie){this._reactName=g,this._targetInst=M,this.type=k,this.nativeEvent=O,this.target=ie,this.currentTarget=null;for(var ze in s)s.hasOwnProperty(ze)&&(g=s[ze],this[ze]=g?g(O):O[ze]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?dl:Uo,this.isPropagationStopped=Uo,this}return ht(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),o}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=qi(ho),Vo=ht({},ho,{view:0,detail:0}),Ul=qi(Vo),fo,qa,is,Ho=ht({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$o,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==is&&(is&&s.type==="mousemove"?(fo=s.screenX-is.screenX,qa=s.screenY-is.screenY):qa=fo=0,is=s),fo)},movementY:function(s){return"movementY"in s?s.movementY:qa}}),Pu=qi(Ho),Mu=ht({},Ho,{dataTransfer:0}),po=qi(Mu),gs=ht({},Vo,{relatedTarget:0}),mo=qi(gs),Au=ht({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),Yc=qi(Au),Du=ht({},ho,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fl=qi(Du),zu=ht({},ho,{data:0}),pl=qi(zu),ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ia={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vl(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=ia[s])?!!o[s]:!1}function $o(){return Vl}var gl=ht({},Vo,{key:function(s){if(s.key){var o=ml[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Cs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?go[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$o,charCode:function(s){return s.type==="keypress"?Cs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Cs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),yl=qi(gl),L=ht({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=qi(L),ce=ht({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$o}),Te=qi(ce),tt=ht({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),ot=qi(tt),ct=ht({},Ho,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ut=qi(ct),sr=[9,13,27,32],dr=c&&"CompositionEvent"in window,Fr=null;c&&"documentMode"in document&&(Fr=document.documentMode);var xn=c&&"TextEvent"in window&&!Fr,Pi=c&&(!dr||Fr&&8<Fr&&11>=Fr),ss=" ",Mi=!1;function sa(s,o){switch(s){case"keyup":return sr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function as(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var aa=!1;function Xc(s,o){switch(s){case"compositionend":return as(o);case"keypress":return o.which!==32?null:(Mi=!0,ss);case"textInput":return s=o.data,s===ss&&Mi?null:s;default:return null}}function Kc(s,o){if(aa)return s==="compositionend"||!dr&&sa(s,o)?(s=mc(),co=un=Hi=null,aa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Pi&&o.locale!=="ko"?null:o.data;default:return null}}var _l={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!_l[s.type]:o==="textarea"}function $l(s,o,g,k){ee(k),o=Xl(o,"onChange"),0<o.length&&(g=new Ca("onChange","change",null,g,k),s.push({event:g,listeners:o}))}var Ya=null,yo=null;function gc(s){wc(s,0)}function _o(s){var o=Aa(s);if(tn(o))return s}function Wl(s,o){if(s==="change")return o}var Jc=!1;if(c){var Ru;if(c){var hn="oninput"in document;if(!hn){var Lu=document.createElement("div");Lu.setAttribute("oninput","return;"),hn=typeof Lu.oninput=="function"}Ru=hn}else Ru=!1;Jc=Ru&&(!document.documentMode||9<document.documentMode)}function nd(){Ya&&(Ya.detachEvent("onpropertychange",Qc),yo=Ya=null)}function Qc(s){if(s.propertyName==="value"&&_o(yo)){var o=[];$l(o,yo,s,Nn(s)),$e(gc,o)}}function Gl(s,o,g){s==="focusin"?(nd(),Ya=o,yo=g,Ya.attachEvent("onpropertychange",Qc)):s==="focusout"&&nd()}function id(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return _o(yo)}function yc(s,o){if(s==="click")return _o(o)}function sd(s,o){if(s==="input"||s==="change")return _o(o)}function ad(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Is=typeof Object.is=="function"?Object.is:ad;function Wo(s,o){if(Is(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var g=Object.keys(s),k=Object.keys(o);if(g.length!==k.length)return!1;for(k=0;k<g.length;k++){var M=g[k];if(!R.call(o,M)||!Is(s[M],o[M]))return!1}return!0}function vl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function xl(s,o){var g=vl(s);s=0;for(var k;g;){if(g.nodeType===3){if(k=s+g.textContent.length,s<=o&&k>=o)return{node:g,offset:o-s};s=k}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=vl(g)}}function wl(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?wl(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function _c(){for(var s=window,o=Kr();o instanceof s.HTMLIFrameElement;){try{var g=typeof o.contentWindow.location.href=="string"}catch{g=!1}if(g)s=o.contentWindow;else break;o=Kr(s.document)}return o}function Go(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Ou(s){var o=_c(),g=s.focusedElem,k=s.selectionRange;if(o!==g&&g&&g.ownerDocument&&wl(g.ownerDocument.documentElement,g)){if(k!==null&&Go(g)){if(o=k.start,s=k.end,s===void 0&&(s=o),"selectionStart"in g)g.selectionStart=o,g.selectionEnd=Math.min(s,g.value.length);else if(s=(o=g.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var M=g.textContent.length,O=Math.min(k.start,M);k=k.end===void 0?O:Math.min(k.end,M),!s.extend&&O>k&&(M=k,k=O,O=M),M=xl(g,O);var ie=xl(g,k);M&&ie&&(s.rangeCount!==1||s.anchorNode!==M.node||s.anchorOffset!==M.offset||s.focusNode!==ie.node||s.focusOffset!==ie.offset)&&(o=o.createRange(),o.setStart(M.node,M.offset),s.removeAllRanges(),O>k?(s.addRange(o),s.extend(ie.node,ie.offset)):(o.setEnd(ie.node,ie.offset),s.addRange(o)))}}for(o=[],s=g;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<o.length;g++)s=o[g],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var vc=c&&"documentMode"in document&&11>=document.documentMode,vo=null,Fu=null,Bu=null,xc=!1;function Nu(s,o,g){var k=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;xc||vo==null||vo!==Kr(k)||(k=vo,"selectionStart"in k&&Go(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Bu&&Wo(Bu,k)||(Bu=k,k=Xl(Fu,"onSelect"),0<k.length&&(o=new Ca("onSelect","select",null,o,g),s.push({event:o,listeners:k}),o.target=vo)))}function Zl(s,o){var g={};return g[s.toLowerCase()]=o.toLowerCase(),g["Webkit"+s]="webkit"+o,g["Moz"+s]="moz"+o,g}var Xa={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},bl={},Yi={};c&&(Yi=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Ka(s){if(bl[s])return bl[s];if(!Xa[s])return s;var o=Xa[s],g;for(g in o)if(o.hasOwnProperty(g)&&g in Yi)return bl[s]=o[g];return s}var eh=Ka("animationend"),th=Ka("animationiteration"),oi=Ka("animationstart"),oa=Ka("transitionend"),Ps=new Map,ql="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(s,o){Ps.set(s,o),C(o,[s])}for(var Yl=0;Yl<ql.length;Yl++){var Zo=ql[Yl],xo=Zo.toLowerCase(),rh=Zo[0].toUpperCase()+Zo.slice(1);Ja(xo,"on"+rh)}Ja(eh,"onAnimationEnd"),Ja(th,"onAnimationIteration"),Ja(oi,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(oa,"onTransitionEnd"),S("onMouseEnter",["mouseout","mouseover"]),S("onMouseLeave",["mouseout","mouseover"]),S("onPointerEnter",["pointerout","pointerover"]),S("onPointerLeave",["pointerout","pointerover"]),C("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),C("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),C("onBeforeInput",["compositionend","keypress","textInput","paste"]),C("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),C("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),C("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nh=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function ju(s,o,g){var k=s.type||"unknown-event";s.currentTarget=g,en(k,o,void 0,s),s.currentTarget=null}function wc(s,o){o=(o&4)!==0;for(var g=0;g<s.length;g++){var k=s[g],M=k.event;k=k.listeners;e:{var O=void 0;if(o)for(var ie=k.length-1;0<=ie;ie--){var ze=k[ie],He=ze.instance,mt=ze.currentTarget;if(ze=ze.listener,He!==O&&M.isPropagationStopped())break e;ju(M,ze,mt),O=He}else for(ie=0;ie<k.length;ie++){if(ze=k[ie],He=ze.instance,mt=ze.currentTarget,ze=ze.listener,He!==O&&M.isPropagationStopped())break e;ju(M,ze,mt),O=He}}}if(hr)throw s=mr,hr=!1,mr=null,s}function Vn(s,o){var g=o[nn];g===void 0&&(g=o[nn]=new Set);var k=s+"__bubble";g.has(k)||(bc(o,s,2,!1),g.add(k))}function wo(s,o,g){var k=0;o&&(k|=4),bc(g,s,k,o)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function bo(s){if(!s[Sl]){s[Sl]=!0,y.forEach(function(g){g!=="selectionchange"&&(nh.has(g)||wo(g,!1,s),wo(g,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Sl]||(o[Sl]=!0,wo("selectionchange",!1,o))}}function bc(s,o,g,k){switch(Ea(o)){case 1:var M=No;break;case 4:M=Ta;break;default:M=ms}g=M.bind(null,o,g,s),M=void 0,!Le||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(M=!0),k?M!==void 0?s.addEventListener(o,g,{capture:!0,passive:M}):s.addEventListener(o,g,!0):M!==void 0?s.addEventListener(o,g,{passive:M}):s.addEventListener(o,g,!1)}function Uu(s,o,g,k,M){var O=k;if((o&1)===0&&(o&2)===0&&k!==null)e:for(;;){if(k===null)return;var ie=k.tag;if(ie===3||ie===4){var ze=k.stateNode.containerInfo;if(ze===M||ze.nodeType===8&&ze.parentNode===M)break;if(ie===4)for(ie=k.return;ie!==null;){var He=ie.tag;if((He===3||He===4)&&(He=ie.stateNode.containerInfo,He===M||He.nodeType===8&&He.parentNode===M))return;ie=ie.return}for(;ze!==null;){if(ie=To(ze),ie===null)return;if(He=ie.tag,He===5||He===6){k=O=ie;continue e}ze=ze.parentNode}}k=k.return}$e(function(){var mt=O,Ft=Nn(g),jt=[];e:{var Ot=Ps.get(s);if(Ot!==void 0){var tr=Ca,yr=s;switch(s){case"keypress":if(Cs(g)===0)break e;case"keydown":case"keyup":tr=yl;break;case"focusin":yr="focus",tr=mo;break;case"focusout":yr="blur",tr=mo;break;case"beforeblur":case"afterblur":tr=mo;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tr=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tr=po;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tr=Te;break;case eh:case th:case oi:tr=Yc;break;case oa:tr=ot;break;case"scroll":tr=Ul;break;case"wheel":tr=Ut;break;case"copy":case"cut":case"paste":tr=fl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tr=X}var Tr=(o&4)!==0,Ai=!Tr&&s==="scroll",lt=Tr?Ot!==null?Ot+"Capture":null:Ot;Tr=[];for(var qe=mt,dt;qe!==null;){dt=qe;var qt=dt.stateNode;if(dt.tag===5&&qt!==null&&(dt=qt,lt!==null&&(qt=Xe(qe,lt),qt!=null&&Tr.push(kl(qe,qt,dt)))),Ai)break;qe=qe.return}0<Tr.length&&(Ot=new tr(Ot,yr,null,g,Ft),jt.push({event:Ot,listeners:Tr}))}}if((o&7)===0){e:{if(Ot=s==="mouseover"||s==="pointerover",tr=s==="mouseout"||s==="pointerout",Ot&&g!==Ar&&(yr=g.relatedTarget||g.fromElement)&&(To(yr)||yr[Ma]))break e;if((tr||Ot)&&(Ot=Ft.window===Ft?Ft:(Ot=Ft.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,tr?(yr=g.relatedTarget||g.toElement,tr=mt,yr=yr?To(yr):null,yr!==null&&(Ai=Wr(yr),yr!==Ai||yr.tag!==5&&yr.tag!==6)&&(yr=null)):(tr=null,yr=mt),tr!==yr)){if(Tr=Pu,qt="onMouseLeave",lt="onMouseEnter",qe="mouse",(s==="pointerout"||s==="pointerover")&&(Tr=X,qt="onPointerLeave",lt="onPointerEnter",qe="pointer"),Ai=tr==null?Ot:Aa(tr),dt=yr==null?Ot:Aa(yr),Ot=new Tr(qt,qe+"leave",tr,g,Ft),Ot.target=Ai,Ot.relatedTarget=dt,qt=null,To(Ft)===mt&&(Tr=new Tr(lt,qe+"enter",yr,g,Ft),Tr.target=dt,Tr.relatedTarget=Ai,qt=Tr),Ai=qt,tr&&yr)t:{for(Tr=tr,lt=yr,qe=0,dt=Tr;dt;dt=So(dt))qe++;for(dt=0,qt=lt;qt;qt=So(qt))dt++;for(;0<qe-dt;)Tr=So(Tr),qe--;for(;0<dt-qe;)lt=So(lt),dt--;for(;qe--;){if(Tr===lt||lt!==null&&Tr===lt.alternate)break t;Tr=So(Tr),lt=So(lt)}Tr=null}else Tr=null;tr!==null&&Kl(jt,Ot,tr,Tr,!1),yr!==null&&Ai!==null&&Kl(jt,Ai,yr,Tr,!0)}}e:{if(Ot=mt?Aa(mt):window,tr=Ot.nodeName&&Ot.nodeName.toLowerCase(),tr==="select"||tr==="input"&&Ot.type==="file")var Cr=Wl;else if(Hl(Ot))if(Jc)Cr=sd;else{Cr=id;var jr=Gl}else(tr=Ot.nodeName)&&tr.toLowerCase()==="input"&&(Ot.type==="checkbox"||Ot.type==="radio")&&(Cr=yc);if(Cr&&(Cr=Cr(s,mt))){$l(jt,Cr,g,Ft);break e}jr&&jr(s,Ot,mt),s==="focusout"&&(jr=Ot._wrapperState)&&jr.controlled&&Ot.type==="number"&&Ne(Ot,"number",Ot.value)}switch(jr=mt?Aa(mt):window,s){case"focusin":(Hl(jr)||jr.contentEditable==="true")&&(vo=jr,Fu=mt,Bu=null);break;case"focusout":Bu=Fu=vo=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,Nu(jt,g,Ft);break;case"selectionchange":if(vc)break;case"keydown":case"keyup":Nu(jt,g,Ft)}var Ir;if(dr)e:{switch(s){case"compositionstart":var Yr="onCompositionStart";break e;case"compositionend":Yr="onCompositionEnd";break e;case"compositionupdate":Yr="onCompositionUpdate";break e}Yr=void 0}else aa?sa(s,g)&&(Yr="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(Yr="onCompositionStart");Yr&&(Pi&&g.locale!=="ko"&&(aa||Yr!=="onCompositionStart"?Yr==="onCompositionEnd"&&aa&&(Ir=mc()):(Hi=Ft,un="value"in Hi?Hi.value:Hi.textContent,aa=!0)),jr=Xl(mt,Yr),0<jr.length&&(Yr=new pl(Yr,s,null,g,Ft),jt.push({event:Yr,listeners:jr}),Ir?Yr.data=Ir:(Ir=as(g),Ir!==null&&(Yr.data=Ir)))),(Ir=xn?Xc(s,g):Kc(s,g))&&(mt=Xl(mt,"onBeforeInput"),0<mt.length&&(Ft=new pl("onBeforeInput","beforeinput",null,g,Ft),jt.push({event:Ft,listeners:mt}),Ft.data=Ir))}wc(jt,o)})}function kl(s,o,g){return{instance:s,listener:o,currentTarget:g}}function Xl(s,o){for(var g=o+"Capture",k=[];s!==null;){var M=s,O=M.stateNode;M.tag===5&&O!==null&&(M=O,O=Xe(s,g),O!=null&&k.unshift(kl(s,O,M)),O=Xe(s,o),O!=null&&k.push(kl(s,O,M))),s=s.return}return k}function So(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Kl(s,o,g,k,M){for(var O=o._reactName,ie=[];g!==null&&g!==k;){var ze=g,He=ze.alternate,mt=ze.stateNode;if(He!==null&&He===k)break;ze.tag===5&&mt!==null&&(ze=mt,M?(He=Xe(g,O),He!=null&&ie.unshift(kl(g,He,ze))):M||(He=Xe(g,O),He!=null&&ie.push(kl(g,He,ze)))),g=g.return}ie.length!==0&&s.push({event:o,listeners:ie})}var od=/\r\n?/g,la=/\u0000|\uFFFD/g;function Ia(s){return(typeof s=="string"?s:""+s).replace(od,`
`).replace(la,"")}function Jl(s,o,g){if(o=Ia(o),Ia(s)!==o&&g)throw Error(f(425))}function Ms(){}var ko=null,ih=null;function sh(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,ld=typeof clearTimeout=="function"?clearTimeout:void 0,kc=typeof Promise=="function"?Promise:void 0,Ql=typeof queueMicrotask=="function"?queueMicrotask:typeof kc<"u"?function(s){return kc.resolve(null).then(s).catch(ua)}:Sc;function ua(s){setTimeout(function(){throw s})}function ar(s,o){var g=o,k=0;do{var M=g.nextSibling;if(s.removeChild(g),M&&M.nodeType===8)if(g=M.data,g==="/$"){if(k===0){s.removeChild(M),Ts(o);return}k--}else g!=="$"&&g!=="$?"&&g!=="$!"||k++;g=M}while(g);Ts(o)}function Pa(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Tc(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"){if(o===0)return s;o--}else g==="/$"&&o++}s=s.previousSibling}return null}var Tl=Math.random().toString(36).slice(2),ys="__reactFiber$"+Tl,Qa="__reactProps$"+Tl,Ma="__reactContainer$"+Tl,nn="__reactEvents$"+Tl,ah="__reactListeners$"+Tl,hf="__reactHandles$"+Tl;function To(s){var o=s[ys];if(o)return o;for(var g=s.parentNode;g;){if(o=g[Ma]||g[ys]){if(g=o.alternate,o.child!==null||g!==null&&g.child!==null)for(s=Tc(s);s!==null;){if(g=s[ys])return g;s=Tc(s)}return o}s=g,g=s.parentNode}return null}function Vu(s){return s=s[ys]||s[Ma],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Aa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(f(33))}function Hu(s){return s[Qa]||null}var $u=[],El=-1;function Yo(s){return{current:s}}function Hn(s){0>El||(s.current=$u[El],$u[El]=null,El--)}function Zn(s,o){El++,$u[El]=s.current,s.current=o}var Xo={},zn=Yo(Xo),an=Yo(!1),ca=Xo;function Eo(s,o){var g=s.type.contextTypes;if(!g)return Xo;var k=s.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===o)return k.__reactInternalMemoizedMaskedChildContext;var M={},O;for(O in g)M[O]=o[O];return k&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=M),M}function Xi(s){return s=s.childContextTypes,s!=null}function Wu(){Hn(an),Hn(zn)}function eu(s,o,g){if(zn.current!==Xo)throw Error(f(168));Zn(zn,o),Zn(an,g)}function tu(s,o,g){var k=s.stateNode;if(o=o.childContextTypes,typeof k.getChildContext!="function")return g;k=k.getChildContext();for(var M in k)if(!(M in o))throw Error(f(108,pr(s)||"Unknown",M));return ht({},g,k)}function $s(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Xo,ca=zn.current,Zn(zn,s),Zn(an,an.current),!0}function ru(s,o,g){var k=s.stateNode;if(!k)throw Error(f(169));g?(s=tu(s,o,ca),k.__reactInternalMemoizedMergedChildContext=s,Hn(an),Hn(zn),Zn(zn,s)):Hn(an),Zn(an,g)}var or=null,Er=!1,nu=!1;function Gu(s){or===null?or=[s]:or.push(s)}function oh(s){Er=!0,Gu(s)}function v(){if(!nu&&or!==null){nu=!0;var s=0,o=Qt;try{var g=or;for(Qt=1;s<g.length;s++){var k=g[s];do k=k(!0);while(k!==null)}or=null,Er=!1}catch(M){throw or!==null&&(or=or.slice(s+1)),Wn(Za,v),M}finally{Qt=o,nu=!1}}return null}var e=[],a=0,d=null,p=0,_=[],E=0,P=null,A=1,F="";function H(s,o){e[a++]=p,e[a++]=d,d=s,p=o}function $(s,o,g){_[E++]=A,_[E++]=F,_[E++]=P,P=s;var k=A;s=F;var M=32-ln(k)-1;k&=~(1<<M),g+=1;var O=32-ln(o)+M;if(30<O){var ie=M-M%5;O=(k&(1<<ie)-1).toString(32),k>>=ie,M-=ie,A=1<<32-ln(o)+M|g<<M|k,F=O+s}else A=1<<O|g<<M|k,F=s}function ne(s){s.return!==null&&(H(s,1),$(s,1,0))}function de(s){for(;s===d;)d=e[--a],e[a]=null,p=e[--a],e[a]=null;for(;s===P;)P=_[--E],_[E]=null,F=_[--E],_[E]=null,A=_[--E],_[E]=null}var me=null,be=null,Ie=!1,De=null;function Be(s,o){var g=ya(5,null,null,0);g.elementType="DELETED",g.stateNode=o,g.return=s,o=s.deletions,o===null?(s.deletions=[g],s.flags|=16):o.push(g)}function Ee(s,o){switch(s.tag){case 5:var g=s.type;return o=o.nodeType!==1||g.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,me=s,be=Pa(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,me=s,be=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(g=P!==null?{id:A,overflow:F}:null,s.memoizedState={dehydrated:o,treeContext:g,retryLane:1073741824},g=ya(18,null,null,0),g.stateNode=o,g.return=s,s.child=g,me=s,be=null,!0):!1;default:return!1}}function We(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ye(s){if(Ie){var o=be;if(o){var g=o;if(!Ee(s,o)){if(We(s))throw Error(f(418));o=Pa(g.nextSibling);var k=me;o&&Ee(s,o)?Be(k,g):(s.flags=s.flags&-4097|2,Ie=!1,me=s)}}else{if(We(s))throw Error(f(418));s.flags=s.flags&-4097|2,Ie=!1,me=s}}}function it(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;me=s}function Et(s){if(s!==me)return!1;if(!Ie)return it(s),Ie=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!sh(s.type,s.memoizedProps)),o&&(o=be)){if(We(s))throw Bt(),Error(f(418));for(;o;)Be(s,o),o=Pa(o.nextSibling)}if(it(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(f(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"){if(o===0){be=Pa(s.nextSibling);break e}o--}else g!=="$"&&g!=="$!"&&g!=="$?"||o++}s=s.nextSibling}be=null}}else be=me?Pa(s.stateNode.nextSibling):null;return!0}function Bt(){for(var s=be;s;)s=Pa(s.nextSibling)}function $t(){be=me=null,Ie=!1}function er(s){De===null?De=[s]:De.push(s)}var Wt=Oe.ReactCurrentBatchConfig;function Vt(s,o,g){if(s=g.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(f(309));var k=g.stateNode}if(!k)throw Error(f(147,s));var M=k,O=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===O?o.ref:(o=function(ie){var ze=M.refs;ie===null?delete ze[O]:ze[O]=ie},o._stringRef=O,o)}if(typeof s!="string")throw Error(f(284));if(!g._owner)throw Error(f(290,s))}return s}function cr(s,o){throw s=Object.prototype.toString.call(o),Error(f(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Nr(s){var o=s._init;return o(s._payload)}function Zt(s){function o(lt,qe){if(s){var dt=lt.deletions;dt===null?(lt.deletions=[qe],lt.flags|=16):dt.push(qe)}}function g(lt,qe){if(!s)return null;for(;qe!==null;)o(lt,qe),qe=qe.sibling;return null}function k(lt,qe){for(lt=new Map;qe!==null;)qe.key!==null?lt.set(qe.key,qe):lt.set(qe.index,qe),qe=qe.sibling;return lt}function M(lt,qe){return lt=mu(lt,qe),lt.index=0,lt.sibling=null,lt}function O(lt,qe,dt){return lt.index=dt,s?(dt=lt.alternate,dt!==null?(dt=dt.index,dt<qe?(lt.flags|=2,qe):dt):(lt.flags|=2,qe)):(lt.flags|=1048576,qe)}function ie(lt){return s&&lt.alternate===null&&(lt.flags|=2),lt}function ze(lt,qe,dt,qt){return qe===null||qe.tag!==6?(qe=no(dt,lt.mode,qt),qe.return=lt,qe):(qe=M(qe,dt),qe.return=lt,qe)}function He(lt,qe,dt,qt){var Cr=dt.type;return Cr===je?Ft(lt,qe,dt.props.children,qt,dt.key):qe!==null&&(qe.elementType===Cr||typeof Cr=="object"&&Cr!==null&&Cr.$$typeof===zt&&Nr(Cr)===qe.type)?(qt=M(qe,dt.props),qt.ref=Vt(lt,qe,dt),qt.return=lt,qt):(qt=Lh(dt.type,dt.key,dt.props,null,lt.mode,qt),qt.ref=Vt(lt,qe,dt),qt.return=lt,qt)}function mt(lt,qe,dt,qt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==dt.containerInfo||qe.stateNode.implementation!==dt.implementation?(qe=tl(dt,lt.mode,qt),qe.return=lt,qe):(qe=M(qe,dt.children||[]),qe.return=lt,qe)}function Ft(lt,qe,dt,qt,Cr){return qe===null||qe.tag!==7?(qe=gu(dt,lt.mode,qt,Cr),qe.return=lt,qe):(qe=M(qe,dt),qe.return=lt,qe)}function jt(lt,qe,dt){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=no(""+qe,lt.mode,dt),qe.return=lt,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case ve:return dt=Lh(qe.type,qe.key,qe.props,null,lt.mode,dt),dt.ref=Vt(lt,null,qe),dt.return=lt,dt;case Ge:return qe=tl(qe,lt.mode,dt),qe.return=lt,qe;case zt:var qt=qe._init;return jt(lt,qt(qe._payload),dt)}if(_t(qe)||Ze(qe))return qe=gu(qe,lt.mode,dt,null),qe.return=lt,qe;cr(lt,qe)}return null}function Ot(lt,qe,dt,qt){var Cr=qe!==null?qe.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return Cr!==null?null:ze(lt,qe,""+dt,qt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case ve:return dt.key===Cr?He(lt,qe,dt,qt):null;case Ge:return dt.key===Cr?mt(lt,qe,dt,qt):null;case zt:return Cr=dt._init,Ot(lt,qe,Cr(dt._payload),qt)}if(_t(dt)||Ze(dt))return Cr!==null?null:Ft(lt,qe,dt,qt,null);cr(lt,dt)}return null}function tr(lt,qe,dt,qt,Cr){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return lt=lt.get(dt)||null,ze(qe,lt,""+qt,Cr);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case ve:return lt=lt.get(qt.key===null?dt:qt.key)||null,He(qe,lt,qt,Cr);case Ge:return lt=lt.get(qt.key===null?dt:qt.key)||null,mt(qe,lt,qt,Cr);case zt:var jr=qt._init;return tr(lt,qe,dt,jr(qt._payload),Cr)}if(_t(qt)||Ze(qt))return lt=lt.get(dt)||null,Ft(qe,lt,qt,Cr,null);cr(qe,qt)}return null}function yr(lt,qe,dt,qt){for(var Cr=null,jr=null,Ir=qe,Yr=qe=0,es=null;Ir!==null&&Yr<dt.length;Yr++){Ir.index>Yr?(es=Ir,Ir=null):es=Ir.sibling;var wn=Ot(lt,Ir,dt[Yr],qt);if(wn===null){Ir===null&&(Ir=es);break}s&&Ir&&wn.alternate===null&&o(lt,Ir),qe=O(wn,qe,Yr),jr===null?Cr=wn:jr.sibling=wn,jr=wn,Ir=es}if(Yr===dt.length)return g(lt,Ir),Ie&&H(lt,Yr),Cr;if(Ir===null){for(;Yr<dt.length;Yr++)Ir=jt(lt,dt[Yr],qt),Ir!==null&&(qe=O(Ir,qe,Yr),jr===null?Cr=Ir:jr.sibling=Ir,jr=Ir);return Ie&&H(lt,Yr),Cr}for(Ir=k(lt,Ir);Yr<dt.length;Yr++)es=tr(Ir,lt,Yr,dt[Yr],qt),es!==null&&(s&&es.alternate!==null&&Ir.delete(es.key===null?Yr:es.key),qe=O(es,qe,Yr),jr===null?Cr=es:jr.sibling=es,jr=es);return s&&Ir.forEach(function(Ml){return o(lt,Ml)}),Ie&&H(lt,Yr),Cr}function Tr(lt,qe,dt,qt){var Cr=Ze(dt);if(typeof Cr!="function")throw Error(f(150));if(dt=Cr.call(dt),dt==null)throw Error(f(151));for(var jr=Cr=null,Ir=qe,Yr=qe=0,es=null,wn=dt.next();Ir!==null&&!wn.done;Yr++,wn=dt.next()){Ir.index>Yr?(es=Ir,Ir=null):es=Ir.sibling;var Ml=Ot(lt,Ir,wn.value,qt);if(Ml===null){Ir===null&&(Ir=es);break}s&&Ir&&Ml.alternate===null&&o(lt,Ir),qe=O(Ml,qe,Yr),jr===null?Cr=Ml:jr.sibling=Ml,jr=Ml,Ir=es}if(wn.done)return g(lt,Ir),Ie&&H(lt,Yr),Cr;if(Ir===null){for(;!wn.done;Yr++,wn=dt.next())wn=jt(lt,wn.value,qt),wn!==null&&(qe=O(wn,qe,Yr),jr===null?Cr=wn:jr.sibling=wn,jr=wn);return Ie&&H(lt,Yr),Cr}for(Ir=k(lt,Ir);!wn.done;Yr++,wn=dt.next())wn=tr(Ir,lt,Yr,wn.value,qt),wn!==null&&(s&&wn.alternate!==null&&Ir.delete(wn.key===null?Yr:wn.key),qe=O(wn,qe,Yr),jr===null?Cr=wn:jr.sibling=wn,jr=wn);return s&&Ir.forEach(function(hg){return o(lt,hg)}),Ie&&H(lt,Yr),Cr}function Ai(lt,qe,dt,qt){if(typeof dt=="object"&&dt!==null&&dt.type===je&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case ve:e:{for(var Cr=dt.key,jr=qe;jr!==null;){if(jr.key===Cr){if(Cr=dt.type,Cr===je){if(jr.tag===7){g(lt,jr.sibling),qe=M(jr,dt.props.children),qe.return=lt,lt=qe;break e}}else if(jr.elementType===Cr||typeof Cr=="object"&&Cr!==null&&Cr.$$typeof===zt&&Nr(Cr)===jr.type){g(lt,jr.sibling),qe=M(jr,dt.props),qe.ref=Vt(lt,jr,dt),qe.return=lt,lt=qe;break e}g(lt,jr);break}else o(lt,jr);jr=jr.sibling}dt.type===je?(qe=gu(dt.props.children,lt.mode,qt,dt.key),qe.return=lt,lt=qe):(qt=Lh(dt.type,dt.key,dt.props,null,lt.mode,qt),qt.ref=Vt(lt,qe,dt),qt.return=lt,lt=qt)}return ie(lt);case Ge:e:{for(jr=dt.key;qe!==null;){if(qe.key===jr)if(qe.tag===4&&qe.stateNode.containerInfo===dt.containerInfo&&qe.stateNode.implementation===dt.implementation){g(lt,qe.sibling),qe=M(qe,dt.children||[]),qe.return=lt,lt=qe;break e}else{g(lt,qe);break}else o(lt,qe);qe=qe.sibling}qe=tl(dt,lt.mode,qt),qe.return=lt,lt=qe}return ie(lt);case zt:return jr=dt._init,Ai(lt,qe,jr(dt._payload),qt)}if(_t(dt))return yr(lt,qe,dt,qt);if(Ze(dt))return Tr(lt,qe,dt,qt);cr(lt,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,qe!==null&&qe.tag===6?(g(lt,qe.sibling),qe=M(qe,dt),qe.return=lt,lt=qe):(g(lt,qe),qe=no(dt,lt.mode,qt),qe.return=lt,lt=qe),ie(lt)):g(lt,qe)}return Ai}var Xt=Zt(!0),Br=Zt(!1),Mn=Yo(null),qr=null,Jr=null,Rn=null;function $i(){Rn=Jr=qr=null}function Ws(s){var o=Mn.current;Hn(Mn),s._currentValue=o}function Ln(s,o,g){for(;s!==null;){var k=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,k!==null&&(k.childLanes|=o)):k!==null&&(k.childLanes&o)!==o&&(k.childLanes|=o),s===g)break;s=s.return}}function Bi(s,o){qr=s,Rn=Jr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(Ys=!0),s.firstContext=null)}function qn(s){var o=s._currentValue;if(Rn!==s)if(s={context:s,memoizedValue:o,next:null},Jr===null){if(qr===null)throw Error(f(308));Jr=s,qr.dependencies={lanes:0,firstContext:s}}else Jr=Jr.next=s;return o}var di=null;function Ki(s){di===null?di=[s]:di.push(s)}function Da(s,o,g,k){var M=o.interleaved;return M===null?(g.next=g,Ki(o)):(g.next=M.next,M.next=g),o.interleaved=g,As(s,k)}function As(s,o){s.lanes|=o;var g=s.alternate;for(g!==null&&(g.lanes|=o),g=s,s=s.return;s!==null;)s.childLanes|=o,g=s.alternate,g!==null&&(g.childLanes|=o),g=s,s=s.return;return g.tag===3?g.stateNode:null}var za=!1;function Ko(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gs(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ha(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function eo(s,o,g){var k=s.updateQueue;if(k===null)return null;if(k=k.shared,(gn&2)!==0){var M=k.pending;return M===null?o.next=o:(o.next=M.next,M.next=o),k.pending=o,As(s,g)}return M=k.interleaved,M===null?(o.next=o,Ki(k)):(o.next=M.next,M.next=o),k.interleaved=o,As(s,g)}function _s(s,o,g){if(o=o.updateQueue,o!==null&&(o=o.shared,(g&4194240)!==0)){var k=o.lanes;k&=s.pendingLanes,g|=k,o.lanes=g,Ht(s,g)}}function Zs(s,o){var g=s.updateQueue,k=s.alternate;if(k!==null&&(k=k.updateQueue,g===k)){var M=null,O=null;if(g=g.firstBaseUpdate,g!==null){do{var ie={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};O===null?M=O=ie:O=O.next=ie,g=g.next}while(g!==null);O===null?M=O=o:O=O.next=o}else M=O=o;g={baseState:k.baseState,firstBaseUpdate:M,lastBaseUpdate:O,shared:k.shared,effects:k.effects},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=o:s.next=o,g.lastBaseUpdate=o}function Ra(s,o,g,k){var M=s.updateQueue;za=!1;var O=M.firstBaseUpdate,ie=M.lastBaseUpdate,ze=M.shared.pending;if(ze!==null){M.shared.pending=null;var He=ze,mt=He.next;He.next=null,ie===null?O=mt:ie.next=mt,ie=He;var Ft=s.alternate;Ft!==null&&(Ft=Ft.updateQueue,ze=Ft.lastBaseUpdate,ze!==ie&&(ze===null?Ft.firstBaseUpdate=mt:ze.next=mt,Ft.lastBaseUpdate=He))}if(O!==null){var jt=M.baseState;ie=0,Ft=mt=He=null,ze=O;do{var Ot=ze.lane,tr=ze.eventTime;if((k&Ot)===Ot){Ft!==null&&(Ft=Ft.next={eventTime:tr,lane:0,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null});e:{var yr=s,Tr=ze;switch(Ot=o,tr=g,Tr.tag){case 1:if(yr=Tr.payload,typeof yr=="function"){jt=yr.call(tr,jt,Ot);break e}jt=yr;break e;case 3:yr.flags=yr.flags&-65537|128;case 0:if(yr=Tr.payload,Ot=typeof yr=="function"?yr.call(tr,jt,Ot):yr,Ot==null)break e;jt=ht({},jt,Ot);break e;case 2:za=!0}}ze.callback!==null&&ze.lane!==0&&(s.flags|=64,Ot=M.effects,Ot===null?M.effects=[ze]:Ot.push(ze))}else tr={eventTime:tr,lane:Ot,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null},Ft===null?(mt=Ft=tr,He=jt):Ft=Ft.next=tr,ie|=Ot;if(ze=ze.next,ze===null){if(ze=M.shared.pending,ze===null)break;Ot=ze,ze=Ot.next,Ot.next=null,M.lastBaseUpdate=Ot,M.shared.pending=null}}while(!0);if(Ft===null&&(He=jt),M.baseState=He,M.firstBaseUpdate=mt,M.lastBaseUpdate=Ft,o=M.shared.interleaved,o!==null){M=o;do ie|=M.lane,M=M.next;while(M!==o)}else O===null&&(M.shared.lanes=0);Ju|=ie,s.lanes=ie,s.memoizedState=jt}}function da(s,o,g){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var k=s[o],M=k.callback;if(M!==null){if(k.callback=null,k=g,typeof M!="function")throw Error(f(191,M));M.call(k)}}}var pi={},Qn=Yo(pi),Ji=Yo(pi),Qr=Yo(pi);function qs(s){if(s===pi)throw Error(f(174));return s}function Jo(s,o){switch(Zn(Qr,o),Zn(Ji,s),Zn(Qn,pi),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:sn(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=sn(o,s)}Hn(Qn),Zn(Qn,o)}function La(){Hn(Qn),Hn(Ji),Hn(Qr)}function lh(s){qs(Qr.current);var o=qs(Qn.current),g=sn(o,s.type);o!==g&&(Zn(Ji,s),Zn(Qn,g))}function uh(s){Ji.current===s&&(Hn(Qn),Hn(Ji))}var ti=Yo(0);function Oa(s){for(var o=s;o!==null;){if(o.tag===13){var g=o.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ec=[];function iu(){for(var s=0;s<Ec.length;s++)Ec[s]._workInProgressVersionPrimary=null;Ec.length=0}var Qo=Oe.ReactCurrentDispatcher,su=Oe.ReactCurrentBatchConfig,to=0,On=null,li=null,Ni=null,ch=!1,Cc=!1,hh=0,df=0;function Wi(){throw Error(f(321))}function au(s,o){if(o===null)return!1;for(var g=0;g<o.length&&g<s.length;g++)if(!Is(s[g],o[g]))return!1;return!0}function Co(s,o,g,k,M,O){if(to=O,On=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Qo.current=s===null||s.memoizedState===null?md:Qm,s=g(k,M),Cc){O=0;do{if(Cc=!1,hh=0,25<=O)throw Error(f(301));O+=1,Ni=li=null,o.updateQueue=null,Qo.current=pp,s=g(k,M)}while(Cc)}if(Qo.current=pd,o=li!==null&&li.next!==null,to=0,Ni=li=On=null,ch=!1,o)throw Error(f(300));return s}function Fa(){var s=hh!==0;return hh=0,s}function vs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ni===null?On.memoizedState=Ni=s:Ni=Ni.next=s,Ni}function Ba(){if(li===null){var s=On.alternate;s=s!==null?s.memoizedState:null}else s=li.next;var o=Ni===null?On.memoizedState:Ni.next;if(o!==null)Ni=o,li=s;else{if(s===null)throw Error(f(310));li=s,s={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},Ni===null?On.memoizedState=Ni=s:Ni=Ni.next=s}return Ni}function Io(s,o){return typeof o=="function"?o(s):o}function ff(s){var o=Ba(),g=o.queue;if(g===null)throw Error(f(311));g.lastRenderedReducer=s;var k=li,M=k.baseQueue,O=g.pending;if(O!==null){if(M!==null){var ie=M.next;M.next=O.next,O.next=ie}k.baseQueue=M=O,g.pending=null}if(M!==null){O=M.next,k=k.baseState;var ze=ie=null,He=null,mt=O;do{var Ft=mt.lane;if((to&Ft)===Ft)He!==null&&(He=He.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),k=mt.hasEagerState?mt.eagerState:s(k,mt.action);else{var jt={lane:Ft,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};He===null?(ze=He=jt,ie=k):He=He.next=jt,On.lanes|=Ft,Ju|=Ft}mt=mt.next}while(mt!==null&&mt!==O);He===null?ie=k:He.next=ze,Is(k,o.memoizedState)||(Ys=!0),o.memoizedState=k,o.baseState=ie,o.baseQueue=He,g.lastRenderedState=k}if(s=g.interleaved,s!==null){M=s;do O=M.lane,On.lanes|=O,Ju|=O,M=M.next;while(M!==s)}else M===null&&(g.lanes=0);return[o.memoizedState,g.dispatch]}function ud(s){var o=Ba(),g=o.queue;if(g===null)throw Error(f(311));g.lastRenderedReducer=s;var k=g.dispatch,M=g.pending,O=o.memoizedState;if(M!==null){g.pending=null;var ie=M=M.next;do O=s(O,ie.action),ie=ie.next;while(ie!==M);Is(O,o.memoizedState)||(Ys=!0),o.memoizedState=O,o.baseQueue===null&&(o.baseState=O),g.lastRenderedState=O}return[O,k]}function mi(){}function cd(s,o){var g=On,k=Ba(),M=o(),O=!Is(k.memoizedState,M);if(O&&(k.memoizedState=M,Ys=!0),k=k.queue,ph(lu.bind(null,g,k,s),[s]),k.getSnapshot!==o||O||Ni!==null&&Ni.memoizedState.tag&1){if(g.flags|=2048,fh(9,ou.bind(null,g,k,M,o),void 0,null),Qi===null)throw Error(f(349));(to&30)!==0||pf(g,o,M)}return M}function pf(s,o,g){s.flags|=16384,s={getSnapshot:o,value:g},o=On.updateQueue,o===null?(o={lastEffect:null,stores:null},On.updateQueue=o,o.stores=[s]):(g=o.stores,g===null?o.stores=[s]:g.push(s))}function ou(s,o,g,k){o.value=g,o.getSnapshot=k,dh(o)&&hd(s)}function lu(s,o,g){return g(function(){dh(o)&&hd(s)})}function dh(s){var o=s.getSnapshot;s=s.value;try{var g=o();return!Is(s,g)}catch{return!0}}function hd(s){var o=As(s,1);o!==null&&Mo(o,s,1,-1)}function mf(s){var o=vs();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:s},o.queue=s,s=s.dispatch=Pc.bind(null,On,s),[o.memoizedState,s]}function fh(s,o,g,k){return s={tag:s,create:o,destroy:g,deps:k,next:null},o=On.updateQueue,o===null?(o={lastEffect:null,stores:null},On.updateQueue=o,o.lastEffect=s.next=s):(g=o.lastEffect,g===null?o.lastEffect=s.next=s:(k=g.next,g.next=s,s.next=k,o.lastEffect=s)),s}function gf(){return Ba().memoizedState}function dd(s,o,g,k){var M=vs();On.flags|=s,M.memoizedState=fh(1|o,g,void 0,k===void 0?null:k)}function Ic(s,o,g,k){var M=Ba();k=k===void 0?null:k;var O=void 0;if(li!==null){var ie=li.memoizedState;if(O=ie.destroy,k!==null&&au(k,ie.deps)){M.memoizedState=fh(o,g,O,k);return}}On.flags|=s,M.memoizedState=fh(1|o,g,O,k)}function cp(s,o){return dd(8390656,8,s,o)}function ph(s,o){return Ic(2048,8,s,o)}function yf(s,o){return Ic(4,2,s,o)}function _f(s,o){return Ic(4,4,s,o)}function Zu(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function hp(s,o,g){return g=g!=null?g.concat([s]):null,Ic(4,4,Zu.bind(null,o,s),g)}function qu(){}function mh(s,o){var g=Ba();o=o===void 0?null:o;var k=g.memoizedState;return k!==null&&o!==null&&au(o,k[1])?k[0]:(g.memoizedState=[s,o],s)}function gh(s,o){var g=Ba();o=o===void 0?null:o;var k=g.memoizedState;return k!==null&&o!==null&&au(o,k[1])?k[0]:(s=s(),g.memoizedState=[s,o],s)}function vf(s,o,g){return(to&21)===0?(s.baseState&&(s.baseState=!1,Ys=!0),s.memoizedState=g):(Is(g,o)||(g=ke(),On.lanes|=g,Ju|=g,s.baseState=!0),o)}function dp(s,o){var g=Qt;Qt=g!==0&&4>g?g:4,s(!0);var k=su.transition;su.transition={};try{s(!1),o()}finally{Qt=g,su.transition=k}}function fp(){return Ba().memoizedState}function Ds(s,o,g){var k=pu(s);if(g={lane:k,action:g,hasEagerState:!1,eagerState:null,next:null},fd(s))xf(o,g);else if(g=Da(s,o,g,k),g!==null){var M=Xs();Mo(g,s,k,M),Mc(g,o,k)}}function Pc(s,o,g){var k=pu(s),M={lane:k,action:g,hasEagerState:!1,eagerState:null,next:null};if(fd(s))xf(o,M);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=o.lastRenderedReducer,O!==null))try{var ie=o.lastRenderedState,ze=O(ie,g);if(M.hasEagerState=!0,M.eagerState=ze,Is(ze,ie)){var He=o.interleaved;He===null?(M.next=M,Ki(o)):(M.next=He.next,He.next=M),o.interleaved=M;return}}catch{}finally{}g=Da(s,o,M,k),g!==null&&(M=Xs(),Mo(g,s,k,M),Mc(g,o,k))}}function fd(s){var o=s.alternate;return s===On||o!==null&&o===On}function xf(s,o){Cc=ch=!0;var g=s.pending;g===null?o.next=o:(o.next=g.next,g.next=o),s.pending=o}function Mc(s,o,g){if((g&4194240)!==0){var k=o.lanes;k&=s.pendingLanes,g|=k,o.lanes=g,Ht(s,g)}}var pd={readContext:qn,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},md={readContext:qn,useCallback:function(s,o){return vs().memoizedState=[s,o===void 0?null:o],s},useContext:qn,useEffect:cp,useImperativeHandle:function(s,o,g){return g=g!=null?g.concat([s]):null,dd(4194308,4,Zu.bind(null,o,s),g)},useLayoutEffect:function(s,o){return dd(4194308,4,s,o)},useInsertionEffect:function(s,o){return dd(4,2,s,o)},useMemo:function(s,o){var g=vs();return o=o===void 0?null:o,s=s(),g.memoizedState=[s,o],s},useReducer:function(s,o,g){var k=vs();return o=g!==void 0?g(o):o,k.memoizedState=k.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},k.queue=s,s=s.dispatch=Ds.bind(null,On,s),[k.memoizedState,s]},useRef:function(s){var o=vs();return s={current:s},o.memoizedState=s},useState:mf,useDebugValue:qu,useDeferredValue:function(s){return vs().memoizedState=s},useTransition:function(){var s=mf(!1),o=s[0];return s=dp.bind(null,s[1]),vs().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,g){var k=On,M=vs();if(Ie){if(g===void 0)throw Error(f(407));g=g()}else{if(g=o(),Qi===null)throw Error(f(349));(to&30)!==0||pf(k,o,g)}M.memoizedState=g;var O={value:g,getSnapshot:o};return M.queue=O,cp(lu.bind(null,k,O,s),[s]),k.flags|=2048,fh(9,ou.bind(null,k,O,g,o),void 0,null),g},useId:function(){var s=vs(),o=Qi.identifierPrefix;if(Ie){var g=F,k=A;g=(k&~(1<<32-ln(k)-1)).toString(32)+g,o=":"+o+"R"+g,g=hh++,0<g&&(o+="H"+g.toString(32)),o+=":"}else g=df++,o=":"+o+"r"+g.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Qm={readContext:qn,useCallback:mh,useContext:qn,useEffect:ph,useImperativeHandle:hp,useInsertionEffect:yf,useLayoutEffect:_f,useMemo:gh,useReducer:ff,useRef:gf,useState:function(){return ff(Io)},useDebugValue:qu,useDeferredValue:function(s){var o=Ba();return vf(o,li.memoizedState,s)},useTransition:function(){var s=ff(Io)[0],o=Ba().memoizedState;return[s,o]},useMutableSource:mi,useSyncExternalStore:cd,useId:fp,unstable_isNewReconciler:!1},pp={readContext:qn,useCallback:mh,useContext:qn,useEffect:ph,useImperativeHandle:hp,useInsertionEffect:yf,useLayoutEffect:_f,useMemo:gh,useReducer:ud,useRef:gf,useState:function(){return ud(Io)},useDebugValue:qu,useDeferredValue:function(s){var o=Ba();return li===null?o.memoizedState=s:vf(o,li.memoizedState,s)},useTransition:function(){var s=ud(Io)[0],o=Ba().memoizedState;return[s,o]},useMutableSource:mi,useSyncExternalStore:cd,useId:fp,unstable_isNewReconciler:!1};function ro(s,o){if(s&&s.defaultProps){o=ht({},o),s=s.defaultProps;for(var g in s)o[g]===void 0&&(o[g]=s[g]);return o}return o}function gd(s,o,g,k){o=s.memoizedState,g=g(k,o),g=g==null?o:ht({},o,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var yd={isMounted:function(s){return(s=s._reactInternals)?Wr(s)===s:!1},enqueueSetState:function(s,o,g){s=s._reactInternals;var k=Xs(),M=pu(s),O=ha(k,M);O.payload=o,g!=null&&(O.callback=g),o=eo(s,O,M),o!==null&&(Mo(o,s,M,k),_s(o,s,M))},enqueueReplaceState:function(s,o,g){s=s._reactInternals;var k=Xs(),M=pu(s),O=ha(k,M);O.tag=1,O.payload=o,g!=null&&(O.callback=g),o=eo(s,O,M),o!==null&&(Mo(o,s,M,k),_s(o,s,M))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var g=Xs(),k=pu(s),M=ha(g,k);M.tag=2,o!=null&&(M.callback=o),o=eo(s,M,k),o!==null&&(Mo(o,s,k,g),_s(o,s,k))}};function _d(s,o,g,k,M,O,ie){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(k,O,ie):o.prototype&&o.prototype.isPureReactComponent?!Wo(g,k)||!Wo(M,O):!0}function wf(s,o,g){var k=!1,M=Xo,O=o.contextType;return typeof O=="object"&&O!==null?O=qn(O):(M=Xi(o)?ca:zn.current,k=o.contextTypes,O=(k=k!=null)?Eo(s,M):Xo),o=new o(g,O),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=yd,s.stateNode=o,o._reactInternals=s,k&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=M,s.__reactInternalMemoizedMaskedChildContext=O),o}function vd(s,o,g,k){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(g,k),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(g,k),o.state!==s&&yd.enqueueReplaceState(o,o.state,null)}function Yu(s,o,g,k){var M=s.stateNode;M.props=g,M.state=s.memoizedState,M.refs={},Ko(s);var O=o.contextType;typeof O=="object"&&O!==null?M.context=qn(O):(O=Xi(o)?ca:zn.current,M.context=Eo(s,O)),M.state=s.memoizedState,O=o.getDerivedStateFromProps,typeof O=="function"&&(gd(s,o,O,g),M.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(o=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),o!==M.state&&yd.enqueueReplaceState(M,M.state,null),Ra(s,g,M,k),M.state=s.memoizedState),typeof M.componentDidMount=="function"&&(s.flags|=4194308)}function os(s,o){try{var g="",k=o;do g+=wt(k),k=k.return;while(k);var M=g}catch(O){M=`
Error generating stack: `+O.message+`
`+O.stack}return{value:s,source:o,stack:M,digest:null}}function xd(s,o,g){return{value:s,source:null,stack:g??null,digest:o??null}}function yh(s,o){try{console.error(o.value)}catch(g){setTimeout(function(){throw g})}}var eg=typeof WeakMap=="function"?WeakMap:Map;function bf(s,o,g){g=ha(-1,g),g.tag=3,g.payload={element:null};var k=o.value;return g.callback=function(){Ch||(Ch=!0,Ad=k),yh(s,o)},g}function mp(s,o,g){g=ha(-1,g),g.tag=3;var k=s.type.getDerivedStateFromError;if(typeof k=="function"){var M=o.value;g.payload=function(){return k(M)},g.callback=function(){yh(s,o)}}var O=s.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(g.callback=function(){yh(s,o),typeof k!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var ie=o.stack;this.componentDidCatch(o.value,{componentStack:ie!==null?ie:""})}),g}function gp(s,o,g){var k=s.pingCache;if(k===null){k=s.pingCache=new eg;var M=new Set;k.set(o,M)}else M=k.get(o),M===void 0&&(M=new Set,k.set(o,M));M.has(g)||(M.add(g),s=ag.bind(null,s,o,g),o.then(s,s))}function yp(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function _p(s,o,g,k,M){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(o=ha(-1,1),o.tag=2,eo(g,o,1))),g.lanes|=1),s):(s.flags|=65536,s.lanes=M,s)}var vp=Oe.ReactCurrentOwner,Ys=!1;function ji(s,o,g,k){o.child=s===null?Br(o,null,g,k):Xt(o,s.child,g,k)}function Ac(s,o,g,k,M){g=g.render;var O=o.ref;return Bi(o,M),k=Co(s,o,g,k,O,M),g=Fa(),s!==null&&!Ys?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~M,Na(s,o,M)):(Ie&&g&&ne(o),o.flags|=1,ji(s,o,k,M),o.child)}function xp(s,o,g,k,M){if(s===null){var O=g.type;return typeof O=="function"&&!Rh(O)&&O.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(o.tag=15,o.type=O,wp(s,o,O,k,M)):(s=Lh(g.type,null,k,o,o.mode,M),s.ref=o.ref,s.return=o,o.child=s)}if(O=s.child,(s.lanes&M)===0){var ie=O.memoizedProps;if(g=g.compare,g=g!==null?g:Wo,g(ie,k)&&s.ref===o.ref)return Na(s,o,M)}return o.flags|=1,s=mu(O,k),s.ref=o.ref,s.return=o,o.child=s}function wp(s,o,g,k,M){if(s!==null){var O=s.memoizedProps;if(Wo(O,k)&&s.ref===o.ref)if(Ys=!1,o.pendingProps=k=O,(s.lanes&M)!==0)(s.flags&131072)!==0&&(Ys=!0);else return o.lanes=s.lanes,Na(s,o,M)}return Sf(s,o,g,k,M)}function bp(s,o,g){var k=o.pendingProps,M=k.children,O=s!==null?s.memoizedState:null;if(k.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zn(Rc,Ls),Ls|=g;else{if((g&1073741824)===0)return s=O!==null?O.baseLanes|g:g,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Zn(Rc,Ls),Ls|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=O!==null?O.baseLanes:g,Zn(Rc,Ls),Ls|=k}else O!==null?(k=O.baseLanes|g,o.memoizedState=null):k=g,Zn(Rc,Ls),Ls|=k;return ji(s,o,M,g),o.child}function Sp(s,o){var g=o.ref;(s===null&&g!==null||s!==null&&s.ref!==g)&&(o.flags|=512,o.flags|=2097152)}function Sf(s,o,g,k,M){var O=Xi(g)?ca:zn.current;return O=Eo(o,O),Bi(o,M),g=Co(s,o,g,k,O,M),k=Fa(),s!==null&&!Ys?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~M,Na(s,o,M)):(Ie&&k&&ne(o),o.flags|=1,ji(s,o,g,M),o.child)}function kp(s,o,g,k,M){if(Xi(g)){var O=!0;$s(o)}else O=!1;if(Bi(o,M),o.stateNode===null)xh(s,o),wf(o,g,k),Yu(o,g,k,M),k=!0;else if(s===null){var ie=o.stateNode,ze=o.memoizedProps;ie.props=ze;var He=ie.context,mt=g.contextType;typeof mt=="object"&&mt!==null?mt=qn(mt):(mt=Xi(g)?ca:zn.current,mt=Eo(o,mt));var Ft=g.getDerivedStateFromProps,jt=typeof Ft=="function"||typeof ie.getSnapshotBeforeUpdate=="function";jt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ze!==k||He!==mt)&&vd(o,ie,k,mt),za=!1;var Ot=o.memoizedState;ie.state=Ot,Ra(o,k,ie,M),He=o.memoizedState,ze!==k||Ot!==He||an.current||za?(typeof Ft=="function"&&(gd(o,g,Ft,k),He=o.memoizedState),(ze=za||_d(o,g,ze,k,Ot,He,mt))?(jt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(o.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=k,o.memoizedState=He),ie.props=k,ie.state=He,ie.context=mt,k=ze):(typeof ie.componentDidMount=="function"&&(o.flags|=4194308),k=!1)}else{ie=o.stateNode,Gs(s,o),ze=o.memoizedProps,mt=o.type===o.elementType?ze:ro(o.type,ze),ie.props=mt,jt=o.pendingProps,Ot=ie.context,He=g.contextType,typeof He=="object"&&He!==null?He=qn(He):(He=Xi(g)?ca:zn.current,He=Eo(o,He));var tr=g.getDerivedStateFromProps;(Ft=typeof tr=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ze!==jt||Ot!==He)&&vd(o,ie,k,He),za=!1,Ot=o.memoizedState,ie.state=Ot,Ra(o,k,ie,M);var yr=o.memoizedState;ze!==jt||Ot!==yr||an.current||za?(typeof tr=="function"&&(gd(o,g,tr,k),yr=o.memoizedState),(mt=za||_d(o,g,mt,k,Ot,yr,He)||!1)?(Ft||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(k,yr,He),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(k,yr,He)),typeof ie.componentDidUpdate=="function"&&(o.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof ie.componentDidUpdate!="function"||ze===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ze===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=1024),o.memoizedProps=k,o.memoizedState=yr),ie.props=k,ie.state=yr,ie.context=He,k=mt):(typeof ie.componentDidUpdate!="function"||ze===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ze===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=1024),k=!1)}return kf(s,o,g,k,O,M)}function kf(s,o,g,k,M,O){Sp(s,o);var ie=(o.flags&128)!==0;if(!k&&!ie)return M&&ru(o,g,!1),Na(s,o,O);k=o.stateNode,vp.current=o;var ze=ie&&typeof g.getDerivedStateFromError!="function"?null:k.render();return o.flags|=1,s!==null&&ie?(o.child=Xt(o,s.child,null,O),o.child=Xt(o,null,ze,O)):ji(s,o,ze,O),o.memoizedState=k.state,M&&ru(o,g,!0),o.child}function wd(s){var o=s.stateNode;o.pendingContext?eu(s,o.pendingContext,o.pendingContext!==o.context):o.context&&eu(s,o.context,!1),Jo(s,o.containerInfo)}function Tp(s,o,g,k,M){return $t(),er(M),o.flags|=256,ji(s,o,g,k),o.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function Tf(s){return{baseLanes:s,cachePool:null,transitions:null}}function fi(s,o,g){var k=o.pendingProps,M=ti.current,O=!1,ie=(o.flags&128)!==0,ze;if((ze=ie)||(ze=s!==null&&s.memoizedState===null?!1:(M&2)!==0),ze?(O=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(M|=1),Zn(ti,M&1),s===null)return Ye(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(ie=k.children,s=k.fallback,O?(k=o.mode,O=o.child,ie={mode:"hidden",children:ie},(k&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=ie):O=yu(ie,k,0,null),s=gu(s,k,g,null),O.return=o,s.return=o,O.sibling=s,o.child=O,o.child.memoizedState=Tf(g),o.memoizedState=uu,s):Dc(o,ie));if(M=s.memoizedState,M!==null&&(ze=M.dehydrated,ze!==null))return bd(s,o,ie,k,ze,M,g);if(O){O=k.fallback,ie=o.mode,M=s.child,ze=M.sibling;var He={mode:"hidden",children:k.children};return(ie&1)===0&&o.child!==M?(k=o.child,k.childLanes=0,k.pendingProps=He,o.deletions=null):(k=mu(M,He),k.subtreeFlags=M.subtreeFlags&14680064),ze!==null?O=mu(ze,O):(O=gu(O,ie,g,null),O.flags|=2),O.return=o,k.return=o,k.sibling=O,o.child=k,k=O,O=o.child,ie=s.child.memoizedState,ie=ie===null?Tf(g):{baseLanes:ie.baseLanes|g,cachePool:null,transitions:ie.transitions},O.memoizedState=ie,O.childLanes=s.childLanes&~g,o.memoizedState=uu,k}return O=s.child,s=O.sibling,k=mu(O,{mode:"visible",children:k.children}),(o.mode&1)===0&&(k.lanes=g),k.return=o,k.sibling=null,s!==null&&(g=o.deletions,g===null?(o.deletions=[s],o.flags|=16):g.push(s)),o.child=k,o.memoizedState=null,k}function Dc(s,o){return o=yu({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function _h(s,o,g,k){return k!==null&&er(k),Xt(o,s.child,null,g),s=Dc(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function bd(s,o,g,k,M,O,ie){if(g)return o.flags&256?(o.flags&=-257,k=xd(Error(f(422))),_h(s,o,ie,k)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(O=k.fallback,M=o.mode,k=yu({mode:"visible",children:k.children},M,0,null),O=gu(O,M,ie,null),O.flags|=2,k.return=o,O.return=o,k.sibling=O,o.child=k,(o.mode&1)!==0&&Xt(o,s.child,null,ie),o.child.memoizedState=Tf(ie),o.memoizedState=uu,O);if((o.mode&1)===0)return _h(s,o,ie,null);if(M.data==="$!"){if(k=M.nextSibling&&M.nextSibling.dataset,k)var ze=k.dgst;return k=ze,O=Error(f(419)),k=xd(O,k,void 0),_h(s,o,ie,k)}if(ze=(ie&s.childLanes)!==0,Ys||ze){if(k=Qi,k!==null){switch(ie&-ie){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(k.suspendedLanes|ie))!==0?0:M,M!==0&&M!==O.retryLane&&(O.retryLane=M,As(s,M),Mo(k,s,M,-1))}return zf(),k=xd(Error(f(421))),_h(s,o,ie,k)}return M.data==="$?"?(o.flags|=128,o.child=s.child,o=Up.bind(null,s),M._reactRetry=o,null):(s=O.treeContext,be=Pa(M.nextSibling),me=o,Ie=!0,De=null,s!==null&&(_[E++]=A,_[E++]=F,_[E++]=P,A=s.id,F=s.overflow,P=o),o=Dc(o,k.children),o.flags|=4096,o)}function vh(s,o,g){s.lanes|=o;var k=s.alternate;k!==null&&(k.lanes|=o),Ln(s.return,o,g)}function Xu(s,o,g,k,M){var O=s.memoizedState;O===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:k,tail:g,tailMode:M}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=k,O.tail=g,O.tailMode=M)}function Ef(s,o,g){var k=o.pendingProps,M=k.revealOrder,O=k.tail;if(ji(s,o,k.children,g),k=ti.current,(k&2)!==0)k=k&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vh(s,g,o);else if(s.tag===19)vh(s,g,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}k&=1}if(Zn(ti,k),(o.mode&1)===0)o.memoizedState=null;else switch(M){case"forwards":for(g=o.child,M=null;g!==null;)s=g.alternate,s!==null&&Oa(s)===null&&(M=g),g=g.sibling;g=M,g===null?(M=o.child,o.child=null):(M=g.sibling,g.sibling=null),Xu(o,!1,M,g,O);break;case"backwards":for(g=null,M=o.child,o.child=null;M!==null;){if(s=M.alternate,s!==null&&Oa(s)===null){o.child=M;break}s=M.sibling,M.sibling=g,g=M,M=s}Xu(o,!0,g,null,O);break;case"together":Xu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function xh(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Na(s,o,g){if(s!==null&&(o.dependencies=s.dependencies),Ju|=o.lanes,(g&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(f(153));if(o.child!==null){for(s=o.child,g=mu(s,s.pendingProps),o.child=g,g.return=o;s.sibling!==null;)s=s.sibling,g=g.sibling=mu(s,s.pendingProps),g.return=o;g.sibling=null}return o.child}function Cf(s,o,g){switch(o.tag){case 3:wd(o),$t();break;case 5:lh(o);break;case 1:Xi(o.type)&&$s(o);break;case 4:Jo(o,o.stateNode.containerInfo);break;case 10:var k=o.type._context,M=o.memoizedProps.value;Zn(Mn,k._currentValue),k._currentValue=M;break;case 13:if(k=o.memoizedState,k!==null)return k.dehydrated!==null?(Zn(ti,ti.current&1),o.flags|=128,null):(g&o.child.childLanes)!==0?fi(s,o,g):(Zn(ti,ti.current&1),s=Na(s,o,g),s!==null?s.sibling:null);Zn(ti,ti.current&1);break;case 19:if(k=(g&o.childLanes)!==0,(s.flags&128)!==0){if(k)return Ef(s,o,g);o.flags|=128}if(M=o.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Zn(ti,ti.current),k)break;return null;case 22:case 23:return o.lanes=0,bp(s,o,g)}return Na(s,o,g)}var Sd,wh,kd,If;Sd=function(s,o){for(var g=o.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break;for(;g.sibling===null;){if(g.return===null||g.return===o)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},wh=function(){},kd=function(s,o,g,k){var M=s.memoizedProps;if(M!==k){s=o.stateNode,qs(Qn.current);var O=null;switch(g){case"input":M=Y(s,M),k=Y(s,k),O=[];break;case"select":M=ht({},M,{value:void 0}),k=ht({},k,{value:void 0}),O=[];break;case"textarea":M=nt(s,M),k=nt(s,k),O=[];break;default:typeof M.onClick!="function"&&typeof k.onClick=="function"&&(s.onclick=Ms)}kn(g,k);var ie;g=null;for(mt in M)if(!k.hasOwnProperty(mt)&&M.hasOwnProperty(mt)&&M[mt]!=null)if(mt==="style"){var ze=M[mt];for(ie in ze)ze.hasOwnProperty(ie)&&(g||(g={}),g[ie]="")}else mt!=="dangerouslySetInnerHTML"&&mt!=="children"&&mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&mt!=="autoFocus"&&(b.hasOwnProperty(mt)?O||(O=[]):(O=O||[]).push(mt,null));for(mt in k){var He=k[mt];if(ze=M!=null?M[mt]:void 0,k.hasOwnProperty(mt)&&He!==ze&&(He!=null||ze!=null))if(mt==="style")if(ze){for(ie in ze)!ze.hasOwnProperty(ie)||He&&He.hasOwnProperty(ie)||(g||(g={}),g[ie]="");for(ie in He)He.hasOwnProperty(ie)&&ze[ie]!==He[ie]&&(g||(g={}),g[ie]=He[ie])}else g||(O||(O=[]),O.push(mt,g)),g=He;else mt==="dangerouslySetInnerHTML"?(He=He?He.__html:void 0,ze=ze?ze.__html:void 0,He!=null&&ze!==He&&(O=O||[]).push(mt,He)):mt==="children"?typeof He!="string"&&typeof He!="number"||(O=O||[]).push(mt,""+He):mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&(b.hasOwnProperty(mt)?(He!=null&&mt==="onScroll"&&Vn("scroll",s),O||ze===He||(O=[])):(O=O||[]).push(mt,He))}g&&(O=O||[]).push("style",g);var mt=O;(o.updateQueue=mt)&&(o.flags|=4)}},If=function(s,o,g,k){g!==k&&(o.flags|=4)};function zc(s,o){if(!Ie)switch(s.tailMode){case"hidden":o=s.tail;for(var g=null;o!==null;)o.alternate!==null&&(g=o),o=o.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var k=null;g!==null;)g.alternate!==null&&(k=g),g=g.sibling;k===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:k.sibling=null}}function zs(s){var o=s.alternate!==null&&s.alternate.child===s.child,g=0,k=0;if(o)for(var M=s.child;M!==null;)g|=M.lanes|M.childLanes,k|=M.subtreeFlags&14680064,k|=M.flags&14680064,M.return=s,M=M.sibling;else for(M=s.child;M!==null;)g|=M.lanes|M.childLanes,k|=M.subtreeFlags,k|=M.flags,M.return=s,M=M.sibling;return s.subtreeFlags|=k,s.childLanes=g,o}function tg(s,o,g){var k=o.pendingProps;switch(de(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(o),null;case 1:return Xi(o.type)&&Wu(),zs(o),null;case 3:return k=o.stateNode,La(),Hn(an),Hn(zn),iu(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(s===null||s.child===null)&&(Et(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,De!==null&&(Df(De),De=null))),wh(s,o),zs(o),null;case 5:uh(o);var M=qs(Qr.current);if(g=o.type,s!==null&&o.stateNode!=null)kd(s,o,g,k,M),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!k){if(o.stateNode===null)throw Error(f(166));return zs(o),null}if(s=qs(Qn.current),Et(o)){k=o.stateNode,g=o.type;var O=o.memoizedProps;switch(k[ys]=o,k[Qa]=O,s=(o.mode&1)!==0,g){case"dialog":Vn("cancel",k),Vn("close",k);break;case"iframe":case"object":case"embed":Vn("load",k);break;case"video":case"audio":for(M=0;M<qo.length;M++)Vn(qo[M],k);break;case"source":Vn("error",k);break;case"img":case"image":case"link":Vn("error",k),Vn("load",k);break;case"details":Vn("toggle",k);break;case"input":ft(k,O),Vn("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!O.multiple},Vn("invalid",k);break;case"textarea":Dt(k,O),Vn("invalid",k)}kn(g,O),M=null;for(var ie in O)if(O.hasOwnProperty(ie)){var ze=O[ie];ie==="children"?typeof ze=="string"?k.textContent!==ze&&(O.suppressHydrationWarning!==!0&&Jl(k.textContent,ze,s),M=["children",ze]):typeof ze=="number"&&k.textContent!==""+ze&&(O.suppressHydrationWarning!==!0&&Jl(k.textContent,ze,s),M=["children",""+ze]):b.hasOwnProperty(ie)&&ze!=null&&ie==="onScroll"&&Vn("scroll",k)}switch(g){case"input":Vr(k),we(k,O,!0);break;case"textarea":Vr(k),Lt(k);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(k.onclick=Ms)}k=M,o.updateQueue=k,k!==null&&(o.flags|=4)}else{ie=M.nodeType===9?M:M.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=xr(g)),s==="http://www.w3.org/1999/xhtml"?g==="script"?(s=ie.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof k.is=="string"?s=ie.createElement(g,{is:k.is}):(s=ie.createElement(g),g==="select"&&(ie=s,k.multiple?ie.multiple=!0:k.size&&(ie.size=k.size))):s=ie.createElementNS(s,g),s[ys]=o,s[Qa]=k,Sd(s,o,!1,!1),o.stateNode=s;e:{switch(ie=bi(g,k),g){case"dialog":Vn("cancel",s),Vn("close",s),M=k;break;case"iframe":case"object":case"embed":Vn("load",s),M=k;break;case"video":case"audio":for(M=0;M<qo.length;M++)Vn(qo[M],s);M=k;break;case"source":Vn("error",s),M=k;break;case"img":case"image":case"link":Vn("error",s),Vn("load",s),M=k;break;case"details":Vn("toggle",s),M=k;break;case"input":ft(s,k),M=Y(s,k),Vn("invalid",s);break;case"option":M=k;break;case"select":s._wrapperState={wasMultiple:!!k.multiple},M=ht({},k,{value:void 0}),Vn("invalid",s);break;case"textarea":Dt(s,k),M=nt(s,k),Vn("invalid",s);break;default:M=k}kn(g,M),ze=M;for(O in ze)if(ze.hasOwnProperty(O)){var He=ze[O];O==="style"?Lr(s,He):O==="dangerouslySetInnerHTML"?(He=He?He.__html:void 0,He!=null&&Cn(s,He)):O==="children"?typeof He=="string"?(g!=="textarea"||He!=="")&&Sn(s,He):typeof He=="number"&&Sn(s,""+He):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(b.hasOwnProperty(O)?He!=null&&O==="onScroll"&&Vn("scroll",s):He!=null&&ge(s,O,He,ie))}switch(g){case"input":Vr(s),we(s,k,!1);break;case"textarea":Vr(s),Lt(s);break;case"option":k.value!=null&&s.setAttribute("value",""+Gt(k.value));break;case"select":s.multiple=!!k.multiple,O=k.value,O!=null?At(s,!!k.multiple,O,!1):k.defaultValue!=null&&At(s,!!k.multiple,k.defaultValue,!0);break;default:typeof M.onClick=="function"&&(s.onclick=Ms)}switch(g){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return zs(o),null;case 6:if(s&&o.stateNode!=null)If(s,o,s.memoizedProps,k);else{if(typeof k!="string"&&o.stateNode===null)throw Error(f(166));if(g=qs(Qr.current),qs(Qn.current),Et(o)){if(k=o.stateNode,g=o.memoizedProps,k[ys]=o,(O=k.nodeValue!==g)&&(s=me,s!==null))switch(s.tag){case 3:Jl(k.nodeValue,g,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Jl(k.nodeValue,g,(s.mode&1)!==0)}O&&(o.flags|=4)}else k=(g.nodeType===9?g:g.ownerDocument).createTextNode(k),k[ys]=o,o.stateNode=k}return zs(o),null;case 13:if(Hn(ti),k=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ie&&be!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Bt(),$t(),o.flags|=98560,O=!1;else if(O=Et(o),k!==null&&k.dehydrated!==null){if(s===null){if(!O)throw Error(f(318));if(O=o.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(f(317));O[ys]=o}else $t(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zs(o),O=!1}else De!==null&&(Df(De),De=null),O=!0;if(!O)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=g,o):(k=k!==null,k!==(s!==null&&s.memoizedState!==null)&&k&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(ti.current&1)!==0?Gi===0&&(Gi=3):zf())),o.updateQueue!==null&&(o.flags|=4),zs(o),null);case 4:return La(),wh(s,o),s===null&&bo(o.stateNode.containerInfo),zs(o),null;case 10:return Ws(o.type._context),zs(o),null;case 17:return Xi(o.type)&&Wu(),zs(o),null;case 19:if(Hn(ti),O=o.memoizedState,O===null)return zs(o),null;if(k=(o.flags&128)!==0,ie=O.rendering,ie===null)if(k)zc(O,!1);else{if(Gi!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(ie=Oa(s),ie!==null){for(o.flags|=128,zc(O,!1),k=ie.updateQueue,k!==null&&(o.updateQueue=k,o.flags|=4),o.subtreeFlags=0,k=g,g=o.child;g!==null;)O=g,s=k,O.flags&=14680066,ie=O.alternate,ie===null?(O.childLanes=0,O.lanes=s,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=ie.childLanes,O.lanes=ie.lanes,O.child=ie.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=ie.memoizedProps,O.memoizedState=ie.memoizedState,O.updateQueue=ie.updateQueue,O.type=ie.type,s=ie.dependencies,O.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),g=g.sibling;return Zn(ti,ti.current&1|2),o.child}s=s.sibling}O.tail!==null&&Dr()>ri&&(o.flags|=128,k=!0,zc(O,!1),o.lanes=4194304)}else{if(!k)if(s=Oa(ie),s!==null){if(o.flags|=128,k=!0,g=s.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),zc(O,!0),O.tail===null&&O.tailMode==="hidden"&&!ie.alternate&&!Ie)return zs(o),null}else 2*Dr()-O.renderingStartTime>ri&&g!==1073741824&&(o.flags|=128,k=!0,zc(O,!1),o.lanes=4194304);O.isBackwards?(ie.sibling=o.child,o.child=ie):(g=O.last,g!==null?g.sibling=ie:o.child=ie,O.last=ie)}return O.tail!==null?(o=O.tail,O.rendering=o,O.tail=o.sibling,O.renderingStartTime=Dr(),o.sibling=null,g=ti.current,Zn(ti,k?g&1|2:g&1),o):(zs(o),null);case 22:case 23:return Mh(),k=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==k&&(o.flags|=8192),k&&(o.mode&1)!==0?(Ls&1073741824)!==0&&(zs(o),o.subtreeFlags&6&&(o.flags|=8192)):zs(o),null;case 24:return null;case 25:return null}throw Error(f(156,o.tag))}function rg(s,o){switch(de(o),o.tag){case 1:return Xi(o.type)&&Wu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return La(),Hn(an),Hn(zn),iu(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return uh(o),null;case 13:if(Hn(ti),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(f(340));$t()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Hn(ti),null;case 4:return La(),null;case 10:return Ws(o.type._context),null;case 22:case 23:return Mh(),null;case 24:return null;default:return null}}var Td=!1,Rs=!1,cu=typeof WeakSet=="function"?WeakSet:Set,wr=null;function Ku(s,o){var g=s.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(k){ui(s,o,k)}else g.current=null}function hu(s,o,g){try{g()}catch(k){ui(s,o,k)}}var Ep=!1;function ng(s,o){if(ko=ns,s=_c(),Go(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var k=g.getSelection&&g.getSelection();if(k&&k.rangeCount!==0){g=k.anchorNode;var M=k.anchorOffset,O=k.focusNode;k=k.focusOffset;try{g.nodeType,O.nodeType}catch{g=null;break e}var ie=0,ze=-1,He=-1,mt=0,Ft=0,jt=s,Ot=null;t:for(;;){for(var tr;jt!==g||M!==0&&jt.nodeType!==3||(ze=ie+M),jt!==O||k!==0&&jt.nodeType!==3||(He=ie+k),jt.nodeType===3&&(ie+=jt.nodeValue.length),(tr=jt.firstChild)!==null;)Ot=jt,jt=tr;for(;;){if(jt===s)break t;if(Ot===g&&++mt===M&&(ze=ie),Ot===O&&++Ft===k&&(He=ie),(tr=jt.nextSibling)!==null)break;jt=Ot,Ot=jt.parentNode}jt=tr}g=ze===-1||He===-1?null:{start:ze,end:He}}else g=null}g=g||{start:0,end:0}}else g=null;for(ih={focusedElem:s,selectionRange:g},ns=!1,wr=o;wr!==null;)if(o=wr,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,wr=s;else for(;wr!==null;){o=wr;try{var yr=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(yr!==null){var Tr=yr.memoizedProps,Ai=yr.memoizedState,lt=o.stateNode,qe=lt.getSnapshotBeforeUpdate(o.elementType===o.type?Tr:ro(o.type,Tr),Ai);lt.__reactInternalSnapshotBeforeUpdate=qe}break;case 3:var dt=o.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(f(163))}}catch(qt){ui(o,o.return,qt)}if(s=o.sibling,s!==null){s.return=o.return,wr=s;break}wr=o.return}return yr=Ep,Ep=!1,yr}function bh(s,o,g){var k=o.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var M=k=k.next;do{if((M.tag&s)===s){var O=M.destroy;M.destroy=void 0,O!==void 0&&hu(o,g,O)}M=M.next}while(M!==k)}}function Sh(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var g=o=o.next;do{if((g.tag&s)===s){var k=g.create;g.destroy=k()}g=g.next}while(g!==o)}}function Ed(s){var o=s.ref;if(o!==null){var g=s.stateNode;switch(s.tag){case 5:s=g;break;default:s=g}typeof o=="function"?o(s):o.current=s}}function Cp(s){var o=s.alternate;o!==null&&(s.alternate=null,Cp(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[ys],delete o[Qa],delete o[nn],delete o[ah],delete o[hf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ip(s){return s.tag===5||s.tag===3||s.tag===4}function Pp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ip(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Pf(s,o,g){var k=s.tag;if(k===5||k===6)s=s.stateNode,o?g.nodeType===8?g.parentNode.insertBefore(s,o):g.insertBefore(s,o):(g.nodeType===8?(o=g.parentNode,o.insertBefore(s,g)):(o=g,o.appendChild(s)),g=g._reactRootContainer,g!=null||o.onclick!==null||(o.onclick=Ms));else if(k!==4&&(s=s.child,s!==null))for(Pf(s,o,g),s=s.sibling;s!==null;)Pf(s,o,g),s=s.sibling}function kh(s,o,g){var k=s.tag;if(k===5||k===6)s=s.stateNode,o?g.insertBefore(s,o):g.appendChild(s);else if(k!==4&&(s=s.child,s!==null))for(kh(s,o,g),s=s.sibling;s!==null;)kh(s,o,g),s=s.sibling}var Ui=null,ja=!1;function du(s,o,g){for(g=g.child;g!==null;)Mp(s,o,g),g=g.sibling}function Mp(s,o,g){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(Jn,g)}catch{}switch(g.tag){case 5:Rs||Ku(g,o);case 6:var k=Ui,M=ja;Ui=null,du(s,o,g),Ui=k,ja=M,Ui!==null&&(ja?(s=Ui,g=g.stateNode,s.nodeType===8?s.parentNode.removeChild(g):s.removeChild(g)):Ui.removeChild(g.stateNode));break;case 18:Ui!==null&&(ja?(s=Ui,g=g.stateNode,s.nodeType===8?ar(s.parentNode,g):s.nodeType===1&&ar(s,g),Ts(s)):ar(Ui,g.stateNode));break;case 4:k=Ui,M=ja,Ui=g.stateNode.containerInfo,ja=!0,du(s,o,g),Ui=k,ja=M;break;case 0:case 11:case 14:case 15:if(!Rs&&(k=g.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){M=k=k.next;do{var O=M,ie=O.destroy;O=O.tag,ie!==void 0&&((O&2)!==0||(O&4)!==0)&&hu(g,o,ie),M=M.next}while(M!==k)}du(s,o,g);break;case 1:if(!Rs&&(Ku(g,o),k=g.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=g.memoizedProps,k.state=g.memoizedState,k.componentWillUnmount()}catch(ze){ui(g,o,ze)}du(s,o,g);break;case 21:du(s,o,g);break;case 22:g.mode&1?(Rs=(k=Rs)||g.memoizedState!==null,du(s,o,g),Rs=k):du(s,o,g);break;default:du(s,o,g)}}function Mf(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var g=s.stateNode;g===null&&(g=s.stateNode=new cu),o.forEach(function(k){var M=Vp.bind(null,s,k);g.has(k)||(g.add(k),k.then(M,M))})}}function Po(s,o){var g=o.deletions;if(g!==null)for(var k=0;k<g.length;k++){var M=g[k];try{var O=s,ie=o,ze=ie;e:for(;ze!==null;){switch(ze.tag){case 5:Ui=ze.stateNode,ja=!1;break e;case 3:Ui=ze.stateNode.containerInfo,ja=!0;break e;case 4:Ui=ze.stateNode.containerInfo,ja=!0;break e}ze=ze.return}if(Ui===null)throw Error(f(160));Mp(O,ie,M),Ui=null,ja=!1;var He=M.alternate;He!==null&&(He.return=null),M.return=null}catch(mt){ui(M,o,mt)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Ap(o,s),o=o.sibling}function Ap(s,o){var g=s.alternate,k=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Po(o,s),fa(s),k&4){try{bh(3,s,s.return),Sh(3,s)}catch(Tr){ui(s,s.return,Tr)}try{bh(5,s,s.return)}catch(Tr){ui(s,s.return,Tr)}}break;case 1:Po(o,s),fa(s),k&512&&g!==null&&Ku(g,g.return);break;case 5:if(Po(o,s),fa(s),k&512&&g!==null&&Ku(g,g.return),s.flags&32){var M=s.stateNode;try{Sn(M,"")}catch(Tr){ui(s,s.return,Tr)}}if(k&4&&(M=s.stateNode,M!=null)){var O=s.memoizedProps,ie=g!==null?g.memoizedProps:O,ze=s.type,He=s.updateQueue;if(s.updateQueue=null,He!==null)try{ze==="input"&&O.type==="radio"&&O.name!=null&&ye(M,O),bi(ze,ie);var mt=bi(ze,O);for(ie=0;ie<He.length;ie+=2){var Ft=He[ie],jt=He[ie+1];Ft==="style"?Lr(M,jt):Ft==="dangerouslySetInnerHTML"?Cn(M,jt):Ft==="children"?Sn(M,jt):ge(M,Ft,jt,mt)}switch(ze){case"input":Ae(M,O);break;case"textarea":nr(M,O);break;case"select":var Ot=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!O.multiple;var tr=O.value;tr!=null?At(M,!!O.multiple,tr,!1):Ot!==!!O.multiple&&(O.defaultValue!=null?At(M,!!O.multiple,O.defaultValue,!0):At(M,!!O.multiple,O.multiple?[]:"",!1))}M[Qa]=O}catch(Tr){ui(s,s.return,Tr)}}break;case 6:if(Po(o,s),fa(s),k&4){if(s.stateNode===null)throw Error(f(162));M=s.stateNode,O=s.memoizedProps;try{M.nodeValue=O}catch(Tr){ui(s,s.return,Tr)}}break;case 3:if(Po(o,s),fa(s),k&4&&g!==null&&g.memoizedState.isDehydrated)try{Ts(o.containerInfo)}catch(Tr){ui(s,s.return,Tr)}break;case 4:Po(o,s),fa(s);break;case 13:Po(o,s),fa(s),M=s.child,M.flags&8192&&(O=M.memoizedState!==null,M.stateNode.isHidden=O,!O||M.alternate!==null&&M.alternate.memoizedState!==null||(Qu=Dr())),k&4&&Mf(s);break;case 22:if(Ft=g!==null&&g.memoizedState!==null,s.mode&1?(Rs=(mt=Rs)||Ft,Po(o,s),Rs=mt):Po(o,s),fa(s),k&8192){if(mt=s.memoizedState!==null,(s.stateNode.isHidden=mt)&&!Ft&&(s.mode&1)!==0)for(wr=s,Ft=s.child;Ft!==null;){for(jt=wr=Ft;wr!==null;){switch(Ot=wr,tr=Ot.child,Ot.tag){case 0:case 11:case 14:case 15:bh(4,Ot,Ot.return);break;case 1:Ku(Ot,Ot.return);var yr=Ot.stateNode;if(typeof yr.componentWillUnmount=="function"){k=Ot,g=Ot.return;try{o=k,yr.props=o.memoizedProps,yr.state=o.memoizedState,yr.componentWillUnmount()}catch(Tr){ui(k,g,Tr)}}break;case 5:Ku(Ot,Ot.return);break;case 22:if(Ot.memoizedState!==null){Lp(jt);continue}}tr!==null?(tr.return=Ot,wr=tr):Lp(jt)}Ft=Ft.sibling}e:for(Ft=null,jt=s;;){if(jt.tag===5){if(Ft===null){Ft=jt;try{M=jt.stateNode,mt?(O=M.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(ze=jt.stateNode,He=jt.memoizedProps.style,ie=He!=null&&He.hasOwnProperty("display")?He.display:null,ze.style.display=Pt("display",ie))}catch(Tr){ui(s,s.return,Tr)}}}else if(jt.tag===6){if(Ft===null)try{jt.stateNode.nodeValue=mt?"":jt.memoizedProps}catch(Tr){ui(s,s.return,Tr)}}else if((jt.tag!==22&&jt.tag!==23||jt.memoizedState===null||jt===s)&&jt.child!==null){jt.child.return=jt,jt=jt.child;continue}if(jt===s)break e;for(;jt.sibling===null;){if(jt.return===null||jt.return===s)break e;Ft===jt&&(Ft=null),jt=jt.return}Ft===jt&&(Ft=null),jt.sibling.return=jt.return,jt=jt.sibling}}break;case 19:Po(o,s),fa(s),k&4&&Mf(s);break;case 21:break;default:Po(o,s),fa(s)}}function fa(s){var o=s.flags;if(o&2){try{e:{for(var g=s.return;g!==null;){if(Ip(g)){var k=g;break e}g=g.return}throw Error(f(160))}switch(k.tag){case 5:var M=k.stateNode;k.flags&32&&(Sn(M,""),k.flags&=-33);var O=Pp(s);kh(s,O,M);break;case 3:case 4:var ie=k.stateNode.containerInfo,ze=Pp(s);Pf(s,ze,ie);break;default:throw Error(f(161))}}catch(He){ui(s,s.return,He)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Dp(s,o,g){wr=s,zp(s)}function zp(s,o,g){for(var k=(s.mode&1)!==0;wr!==null;){var M=wr,O=M.child;if(M.tag===22&&k){var ie=M.memoizedState!==null||Td;if(!ie){var ze=M.alternate,He=ze!==null&&ze.memoizedState!==null||Rs;ze=Td;var mt=Rs;if(Td=ie,(Rs=He)&&!mt)for(wr=M;wr!==null;)ie=wr,He=ie.child,ie.tag===22&&ie.memoizedState!==null?Op(M):He!==null?(He.return=ie,wr=He):Op(M);for(;O!==null;)wr=O,zp(O),O=O.sibling;wr=M,Td=ze,Rs=mt}Rp(s)}else(M.subtreeFlags&8772)!==0&&O!==null?(O.return=M,wr=O):Rp(s)}}function Rp(s){for(;wr!==null;){var o=wr;if((o.flags&8772)!==0){var g=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Rs||Sh(5,o);break;case 1:var k=o.stateNode;if(o.flags&4&&!Rs)if(g===null)k.componentDidMount();else{var M=o.elementType===o.type?g.memoizedProps:ro(o.type,g.memoizedProps);k.componentDidUpdate(M,g.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var O=o.updateQueue;O!==null&&da(o,O,k);break;case 3:var ie=o.updateQueue;if(ie!==null){if(g=null,o.child!==null)switch(o.child.tag){case 5:g=o.child.stateNode;break;case 1:g=o.child.stateNode}da(o,ie,g)}break;case 5:var ze=o.stateNode;if(g===null&&o.flags&4){g=ze;var He=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":He.autoFocus&&g.focus();break;case"img":He.src&&(g.src=He.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var mt=o.alternate;if(mt!==null){var Ft=mt.memoizedState;if(Ft!==null){var jt=Ft.dehydrated;jt!==null&&Ts(jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(f(163))}Rs||o.flags&512&&Ed(o)}catch(Ot){ui(o,o.return,Ot)}}if(o===s){wr=null;break}if(g=o.sibling,g!==null){g.return=o.return,wr=g;break}wr=o.return}}function Lp(s){for(;wr!==null;){var o=wr;if(o===s){wr=null;break}var g=o.sibling;if(g!==null){g.return=o.return,wr=g;break}wr=o.return}}function Op(s){for(;wr!==null;){var o=wr;try{switch(o.tag){case 0:case 11:case 15:var g=o.return;try{Sh(4,o)}catch(He){ui(o,g,He)}break;case 1:var k=o.stateNode;if(typeof k.componentDidMount=="function"){var M=o.return;try{k.componentDidMount()}catch(He){ui(o,M,He)}}var O=o.return;try{Ed(o)}catch(He){ui(o,O,He)}break;case 5:var ie=o.return;try{Ed(o)}catch(He){ui(o,ie,He)}}}catch(He){ui(o,o.return,He)}if(o===s){wr=null;break}var ze=o.sibling;if(ze!==null){ze.return=o.return,wr=ze;break}wr=o.return}}var ig=Math.ceil,Cd=Oe.ReactCurrentDispatcher,Id=Oe.ReactCurrentOwner,pa=Oe.ReactCurrentBatchConfig,gn=0,Qi=null,Vi=null,xs=0,Ls=0,Rc=Yo(0),Gi=0,Th=null,Ju=0,Pd=0,Md=0,Eh=null,ma=null,Qu=0,ri=1/0,el=null,Ch=!1,Ad=null,dn=null,Lc=!1,Cl=null,Ih=0,Ua=0,fu=null,Ph=-1,Dd=0;function Xs(){return(gn&6)!==0?Dr():Ph!==-1?Ph:Ph=Dr()}function pu(s){return(s.mode&1)===0?1:(gn&2)!==0&&xs!==0?xs&-xs:Wt.transition!==null?(Dd===0&&(Dd=ke()),Dd):(s=Qt,s!==0||(s=window.event,s=s===void 0?16:Ea(s.type)),s)}function Mo(s,o,g,k){if(50<Ua)throw Ua=0,fu=null,Error(f(185));st(s,g,k),((gn&2)===0||s!==Qi)&&(s===Qi&&((gn&2)===0&&(Pd|=g),Gi===4&&Ao(s,xs)),ga(s,k),g===1&&gn===0&&(o.mode&1)===0&&(ri=Dr()+500,Er&&v()))}function ga(s,o){var g=s.callbackNode;K(s,o);var k=Ei(s,s===Qi?xs:0);if(k===0)g!==null&&ai(g),s.callbackNode=null,s.callbackPriority=0;else if(o=k&-k,s.callbackPriority!==o){if(g!=null&&ai(g),o===1)s.tag===0?oh(ec.bind(null,s)):Gu(ec.bind(null,s)),Ql(function(){(gn&6)===0&&v()}),g=null;else{switch(Or(k)){case 1:g=Za;break;case 4:g=ki;break;case 16:g=ci;break;case 536870912:g=hi;break;default:g=ci}g=Of(g,Fp.bind(null,s))}s.callbackPriority=o,s.callbackNode=g}}function Fp(s,o){if(Ph=-1,Dd=0,(gn&6)!==0)throw Error(f(327));var g=s.callbackNode;if(zo()&&s.callbackNode!==g)return null;var k=Ei(s,s===Qi?xs:0);if(k===0)return null;if((k&30)!==0||(k&s.expiredLanes)!==0||o)o=Ah(s,k);else{o=k;var M=gn;gn|=2;var O=Np();(Qi!==s||xs!==o)&&(el=null,ri=Dr()+500,tc(s,o));do try{Rf();break}catch(ze){Bp(s,ze)}while(!0);$i(),Cd.current=O,gn=M,Vi!==null?o=0:(Qi=null,xs=0,o=Gi)}if(o!==0){if(o===2&&(M=he(s),M!==0&&(k=M,o=Af(s,M))),o===1)throw g=Th,tc(s,0),Ao(s,k),ga(s,Dr()),g;if(o===6)Ao(s,k);else{if(M=s.current.alternate,(k&30)===0&&!sg(M)&&(o=Ah(s,k),o===2&&(O=he(s),O!==0&&(k=O,o=Af(s,O))),o===1))throw g=Th,tc(s,0),Ao(s,k),ga(s,Dr()),g;switch(s.finishedWork=M,s.finishedLanes=k,o){case 0:case 1:throw Error(f(345));case 2:Do(s,ma,el);break;case 3:if(Ao(s,k),(k&130023424)===k&&(o=Qu+500-Dr(),10<o)){if(Ei(s,0)!==0)break;if(M=s.suspendedLanes,(M&k)!==k){Xs(),s.pingedLanes|=s.suspendedLanes&M;break}s.timeoutHandle=Sc(Do.bind(null,s,ma,el),o);break}Do(s,ma,el);break;case 4:if(Ao(s,k),(k&4194240)===k)break;for(o=s.eventTimes,M=-1;0<k;){var ie=31-ln(k);O=1<<ie,ie=o[ie],ie>M&&(M=ie),k&=~O}if(k=M,k=Dr()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*ig(k/1960))-k,10<k){s.timeoutHandle=Sc(Do.bind(null,s,ma,el),k);break}Do(s,ma,el);break;case 5:Do(s,ma,el);break;default:throw Error(f(329))}}}return ga(s,Dr()),s.callbackNode===g?Fp.bind(null,s):null}function Af(s,o){var g=Eh;return s.current.memoizedState.isDehydrated&&(tc(s,o).flags|=256),s=Ah(s,o),s!==2&&(o=ma,ma=g,o!==null&&Df(o)),s}function Df(s){ma===null?ma=s:ma.push.apply(ma,s)}function sg(s){for(var o=s;;){if(o.flags&16384){var g=o.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var k=0;k<g.length;k++){var M=g[k],O=M.getSnapshot;M=M.value;try{if(!Is(O(),M))return!1}catch{return!1}}}if(g=o.child,o.subtreeFlags&16384&&g!==null)g.return=o,o=g;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ao(s,o){for(o&=~Md,o&=~Pd,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var g=31-ln(o),k=1<<g;s[g]=-1,o&=~k}}function ec(s){if((gn&6)!==0)throw Error(f(327));zo();var o=Ei(s,0);if((o&1)===0)return ga(s,Dr()),null;var g=Ah(s,o);if(s.tag!==0&&g===2){var k=he(s);k!==0&&(o=k,g=Af(s,k))}if(g===1)throw g=Th,tc(s,0),Ao(s,o),ga(s,Dr()),g;if(g===6)throw Error(f(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Do(s,ma,el),ga(s,Dr()),null}function zd(s,o){var g=gn;gn|=1;try{return s(o)}finally{gn=g,gn===0&&(ri=Dr()+500,Er&&v())}}function Il(s){Cl!==null&&Cl.tag===0&&(gn&6)===0&&zo();var o=gn;gn|=1;var g=pa.transition,k=Qt;try{if(pa.transition=null,Qt=1,s)return s()}finally{Qt=k,pa.transition=g,gn=o,(gn&6)===0&&v()}}function Mh(){Ls=Rc.current,Hn(Rc)}function tc(s,o){s.finishedWork=null,s.finishedLanes=0;var g=s.timeoutHandle;if(g!==-1&&(s.timeoutHandle=-1,ld(g)),Vi!==null)for(g=Vi.return;g!==null;){var k=g;switch(de(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&Wu();break;case 3:La(),Hn(an),Hn(zn),iu();break;case 5:uh(k);break;case 4:La();break;case 13:Hn(ti);break;case 19:Hn(ti);break;case 10:Ws(k.type._context);break;case 22:case 23:Mh()}g=g.return}if(Qi=s,Vi=s=mu(s.current,null),xs=Ls=o,Gi=0,Th=null,Md=Pd=Ju=0,ma=Eh=null,di!==null){for(o=0;o<di.length;o++)if(g=di[o],k=g.interleaved,k!==null){g.interleaved=null;var M=k.next,O=g.pending;if(O!==null){var ie=O.next;O.next=M,k.next=ie}g.pending=k}di=null}return s}function Bp(s,o){do{var g=Vi;try{if($i(),Qo.current=pd,ch){for(var k=On.memoizedState;k!==null;){var M=k.queue;M!==null&&(M.pending=null),k=k.next}ch=!1}if(to=0,Ni=li=On=null,Cc=!1,hh=0,Id.current=null,g===null||g.return===null){Gi=1,Th=o,Vi=null;break}e:{var O=s,ie=g.return,ze=g,He=o;if(o=xs,ze.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var mt=He,Ft=ze,jt=Ft.tag;if((Ft.mode&1)===0&&(jt===0||jt===11||jt===15)){var Ot=Ft.alternate;Ot?(Ft.updateQueue=Ot.updateQueue,Ft.memoizedState=Ot.memoizedState,Ft.lanes=Ot.lanes):(Ft.updateQueue=null,Ft.memoizedState=null)}var tr=yp(ie);if(tr!==null){tr.flags&=-257,_p(tr,ie,ze,O,o),tr.mode&1&&gp(O,mt,o),o=tr,He=mt;var yr=o.updateQueue;if(yr===null){var Tr=new Set;Tr.add(He),o.updateQueue=Tr}else yr.add(He);break e}else{if((o&1)===0){gp(O,mt,o),zf();break e}He=Error(f(426))}}else if(Ie&&ze.mode&1){var Ai=yp(ie);if(Ai!==null){(Ai.flags&65536)===0&&(Ai.flags|=256),_p(Ai,ie,ze,O,o),er(os(He,ze));break e}}O=He=os(He,ze),Gi!==4&&(Gi=2),Eh===null?Eh=[O]:Eh.push(O),O=ie;do{switch(O.tag){case 3:O.flags|=65536,o&=-o,O.lanes|=o;var lt=bf(O,He,o);Zs(O,lt);break e;case 1:ze=He;var qe=O.type,dt=O.stateNode;if((O.flags&128)===0&&(typeof qe.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(dn===null||!dn.has(dt)))){O.flags|=65536,o&=-o,O.lanes|=o;var qt=mp(O,ze,o);Zs(O,qt);break e}}O=O.return}while(O!==null)}Pl(g)}catch(Cr){o=Cr,Vi===g&&g!==null&&(Vi=g=g.return);continue}break}while(!0)}function Np(){var s=Cd.current;return Cd.current=pd,s===null?pd:s}function zf(){(Gi===0||Gi===3||Gi===2)&&(Gi=4),Qi===null||(Ju&268435455)===0&&(Pd&268435455)===0||Ao(Qi,xs)}function Ah(s,o){var g=gn;gn|=2;var k=Np();(Qi!==s||xs!==o)&&(el=null,tc(s,o));do try{Ks();break}catch(M){Bp(s,M)}while(!0);if($i(),gn=g,Cd.current=k,Vi!==null)throw Error(f(261));return Qi=null,xs=0,Gi}function Ks(){for(;Vi!==null;)Lf(Vi)}function Rf(){for(;Vi!==null&&!Si();)Lf(Vi)}function Lf(s){var o=Hp(s.alternate,s,Ls);s.memoizedProps=s.pendingProps,o===null?Pl(s):Vi=o,Id.current=null}function Pl(s){var o=s;do{var g=o.alternate;if(s=o.return,(o.flags&32768)===0){if(g=tg(g,o,Ls),g!==null){Vi=g;return}}else{if(g=rg(g,o),g!==null){g.flags&=32767,Vi=g;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Gi=6,Vi=null;return}}if(o=o.sibling,o!==null){Vi=o;return}Vi=o=s}while(o!==null);Gi===0&&(Gi=5)}function Do(s,o,g){var k=Qt,M=pa.transition;try{pa.transition=null,Qt=1,Dh(s,o,g,k)}finally{pa.transition=M,Qt=k}return null}function Dh(s,o,g,k){do zo();while(Cl!==null);if((gn&6)!==0)throw Error(f(327));g=s.finishedWork;var M=s.finishedLanes;if(g===null)return null;if(s.finishedWork=null,s.finishedLanes=0,g===s.current)throw Error(f(177));s.callbackNode=null,s.callbackPriority=0;var O=g.lanes|g.childLanes;if(kt(s,O),s===Qi&&(Vi=Qi=null,xs=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Lc||(Lc=!0,Of(ci,function(){return zo(),null})),O=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||O){O=pa.transition,pa.transition=null;var ie=Qt;Qt=1;var ze=gn;gn|=4,Id.current=null,ng(s,g),Ap(g,s),Ou(ih),ns=!!ko,ih=ko=null,s.current=g,Dp(g),Sa(),gn=ze,Qt=ie,pa.transition=O}else s.current=g;if(Lc&&(Lc=!1,Cl=s,Ih=M),O=s.pendingLanes,O===0&&(dn=null),fs(g.stateNode),ga(s,Dr()),o!==null)for(k=s.onRecoverableError,g=0;g<o.length;g++)M=o[g],k(M.value,{componentStack:M.stack,digest:M.digest});if(Ch)throw Ch=!1,s=Ad,Ad=null,s;return(Ih&1)!==0&&s.tag!==0&&zo(),O=s.pendingLanes,(O&1)!==0?s===fu?Ua++:(Ua=0,fu=s):Ua=0,v(),null}function zo(){if(Cl!==null){var s=Or(Ih),o=pa.transition,g=Qt;try{if(pa.transition=null,Qt=16>s?16:s,Cl===null)var k=!1;else{if(s=Cl,Cl=null,Ih=0,(gn&6)!==0)throw Error(f(331));var M=gn;for(gn|=4,wr=s.current;wr!==null;){var O=wr,ie=O.child;if((wr.flags&16)!==0){var ze=O.deletions;if(ze!==null){for(var He=0;He<ze.length;He++){var mt=ze[He];for(wr=mt;wr!==null;){var Ft=wr;switch(Ft.tag){case 0:case 11:case 15:bh(8,Ft,O)}var jt=Ft.child;if(jt!==null)jt.return=Ft,wr=jt;else for(;wr!==null;){Ft=wr;var Ot=Ft.sibling,tr=Ft.return;if(Cp(Ft),Ft===mt){wr=null;break}if(Ot!==null){Ot.return=tr,wr=Ot;break}wr=tr}}}var yr=O.alternate;if(yr!==null){var Tr=yr.child;if(Tr!==null){yr.child=null;do{var Ai=Tr.sibling;Tr.sibling=null,Tr=Ai}while(Tr!==null)}}wr=O}}if((O.subtreeFlags&2064)!==0&&ie!==null)ie.return=O,wr=ie;else e:for(;wr!==null;){if(O=wr,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:bh(9,O,O.return)}var lt=O.sibling;if(lt!==null){lt.return=O.return,wr=lt;break e}wr=O.return}}var qe=s.current;for(wr=qe;wr!==null;){ie=wr;var dt=ie.child;if((ie.subtreeFlags&2064)!==0&&dt!==null)dt.return=ie,wr=dt;else e:for(ie=qe;wr!==null;){if(ze=wr,(ze.flags&2048)!==0)try{switch(ze.tag){case 0:case 11:case 15:Sh(9,ze)}}catch(Cr){ui(ze,ze.return,Cr)}if(ze===ie){wr=null;break e}var qt=ze.sibling;if(qt!==null){qt.return=ze.return,wr=qt;break e}wr=ze.return}}if(gn=M,v(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(Jn,s)}catch{}k=!0}return k}finally{Qt=g,pa.transition=o}}return!1}function zh(s,o,g){o=os(g,o),o=bf(s,o,1),s=eo(s,o,1),o=Xs(),s!==null&&(st(s,1,o),ga(s,o))}function ui(s,o,g){if(s.tag===3)zh(s,s,g);else for(;o!==null;){if(o.tag===3){zh(o,s,g);break}else if(o.tag===1){var k=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(dn===null||!dn.has(k))){s=os(g,s),s=mp(o,s,1),o=eo(o,s,1),s=Xs(),o!==null&&(st(o,1,s),ga(o,s));break}}o=o.return}}function ag(s,o,g){var k=s.pingCache;k!==null&&k.delete(o),o=Xs(),s.pingedLanes|=s.suspendedLanes&g,Qi===s&&(xs&g)===g&&(Gi===4||Gi===3&&(xs&130023424)===xs&&500>Dr()-Qu?tc(s,0):Md|=g),ga(s,o)}function jp(s,o){o===0&&((s.mode&1)===0?o=1:(o=Oi,Oi<<=1,(Oi&130023424)===0&&(Oi=4194304)));var g=Xs();s=As(s,o),s!==null&&(st(s,o,g),ga(s,g))}function Up(s){var o=s.memoizedState,g=0;o!==null&&(g=o.retryLane),jp(s,g)}function Vp(s,o){var g=0;switch(s.tag){case 13:var k=s.stateNode,M=s.memoizedState;M!==null&&(g=M.retryLane);break;case 19:k=s.stateNode;break;default:throw Error(f(314))}k!==null&&k.delete(o),jp(s,g)}var Hp;Hp=function(s,o,g){if(s!==null)if(s.memoizedProps!==o.pendingProps||an.current)Ys=!0;else{if((s.lanes&g)===0&&(o.flags&128)===0)return Ys=!1,Cf(s,o,g);Ys=(s.flags&131072)!==0}else Ys=!1,Ie&&(o.flags&1048576)!==0&&$(o,p,o.index);switch(o.lanes=0,o.tag){case 2:var k=o.type;xh(s,o),s=o.pendingProps;var M=Eo(o,zn.current);Bi(o,g),M=Co(null,o,k,s,M,g);var O=Fa();return o.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Xi(k)?(O=!0,$s(o)):O=!1,o.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Ko(o),M.updater=yd,o.stateNode=M,M._reactInternals=o,Yu(o,k,s,g),o=kf(null,o,k,!0,O,g)):(o.tag=0,Ie&&O&&ne(o),ji(null,o,M,g),o=o.child),o;case 16:k=o.elementType;e:{switch(xh(s,o),s=o.pendingProps,M=k._init,k=M(k._payload),o.type=k,M=o.tag=og(k),s=ro(k,s),M){case 0:o=Sf(null,o,k,s,g);break e;case 1:o=kp(null,o,k,s,g);break e;case 11:o=Ac(null,o,k,s,g);break e;case 14:o=xp(null,o,k,ro(k.type,s),g);break e}throw Error(f(306,k,""))}return o;case 0:return k=o.type,M=o.pendingProps,M=o.elementType===k?M:ro(k,M),Sf(s,o,k,M,g);case 1:return k=o.type,M=o.pendingProps,M=o.elementType===k?M:ro(k,M),kp(s,o,k,M,g);case 3:e:{if(wd(o),s===null)throw Error(f(387));k=o.pendingProps,O=o.memoizedState,M=O.element,Gs(s,o),Ra(o,k,null,g);var ie=o.memoizedState;if(k=ie.element,O.isDehydrated)if(O={element:k,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},o.updateQueue.baseState=O,o.memoizedState=O,o.flags&256){M=os(Error(f(423)),o),o=Tp(s,o,k,g,M);break e}else if(k!==M){M=os(Error(f(424)),o),o=Tp(s,o,k,g,M);break e}else for(be=Pa(o.stateNode.containerInfo.firstChild),me=o,Ie=!0,De=null,g=Br(o,null,k,g),o.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if($t(),k===M){o=Na(s,o,g);break e}ji(s,o,k,g)}o=o.child}return o;case 5:return lh(o),s===null&&Ye(o),k=o.type,M=o.pendingProps,O=s!==null?s.memoizedProps:null,ie=M.children,sh(k,M)?ie=null:O!==null&&sh(k,O)&&(o.flags|=32),Sp(s,o),ji(s,o,ie,g),o.child;case 6:return s===null&&Ye(o),null;case 13:return fi(s,o,g);case 4:return Jo(o,o.stateNode.containerInfo),k=o.pendingProps,s===null?o.child=Xt(o,null,k,g):ji(s,o,k,g),o.child;case 11:return k=o.type,M=o.pendingProps,M=o.elementType===k?M:ro(k,M),Ac(s,o,k,M,g);case 7:return ji(s,o,o.pendingProps,g),o.child;case 8:return ji(s,o,o.pendingProps.children,g),o.child;case 12:return ji(s,o,o.pendingProps.children,g),o.child;case 10:e:{if(k=o.type._context,M=o.pendingProps,O=o.memoizedProps,ie=M.value,Zn(Mn,k._currentValue),k._currentValue=ie,O!==null)if(Is(O.value,ie)){if(O.children===M.children&&!an.current){o=Na(s,o,g);break e}}else for(O=o.child,O!==null&&(O.return=o);O!==null;){var ze=O.dependencies;if(ze!==null){ie=O.child;for(var He=ze.firstContext;He!==null;){if(He.context===k){if(O.tag===1){He=ha(-1,g&-g),He.tag=2;var mt=O.updateQueue;if(mt!==null){mt=mt.shared;var Ft=mt.pending;Ft===null?He.next=He:(He.next=Ft.next,Ft.next=He),mt.pending=He}}O.lanes|=g,He=O.alternate,He!==null&&(He.lanes|=g),Ln(O.return,g,o),ze.lanes|=g;break}He=He.next}}else if(O.tag===10)ie=O.type===o.type?null:O.child;else if(O.tag===18){if(ie=O.return,ie===null)throw Error(f(341));ie.lanes|=g,ze=ie.alternate,ze!==null&&(ze.lanes|=g),Ln(ie,g,o),ie=O.sibling}else ie=O.child;if(ie!==null)ie.return=O;else for(ie=O;ie!==null;){if(ie===o){ie=null;break}if(O=ie.sibling,O!==null){O.return=ie.return,ie=O;break}ie=ie.return}O=ie}ji(s,o,M.children,g),o=o.child}return o;case 9:return M=o.type,k=o.pendingProps.children,Bi(o,g),M=qn(M),k=k(M),o.flags|=1,ji(s,o,k,g),o.child;case 14:return k=o.type,M=ro(k,o.pendingProps),M=ro(k.type,M),xp(s,o,k,M,g);case 15:return wp(s,o,o.type,o.pendingProps,g);case 17:return k=o.type,M=o.pendingProps,M=o.elementType===k?M:ro(k,M),xh(s,o),o.tag=1,Xi(k)?(s=!0,$s(o)):s=!1,Bi(o,g),wf(o,k,M),Yu(o,k,M,g),kf(null,o,k,!0,s,g);case 19:return Ef(s,o,g);case 22:return bp(s,o,g)}throw Error(f(156,o.tag))};function Of(s,o){return Wn(s,o)}function $p(s,o,g,k){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(s,o,g,k){return new $p(s,o,g,k)}function Rh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function og(s){if(typeof s=="function")return Rh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===xe)return 11;if(s===Ve)return 14}return 2}function mu(s,o){var g=s.alternate;return g===null?(g=ya(s.tag,o,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=o,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&14680064,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,o=s.dependencies,g.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g}function Lh(s,o,g,k,M,O){var ie=2;if(k=s,typeof s=="function")Rh(s)&&(ie=1);else if(typeof s=="string")ie=5;else e:switch(s){case je:return gu(g.children,M,O,o);case St:ie=8,M|=8;break;case at:return s=ya(12,g,o,M|2),s.elementType=at,s.lanes=O,s;case Je:return s=ya(13,g,o,M),s.elementType=Je,s.lanes=O,s;case W:return s=ya(19,g,o,M),s.elementType=W,s.lanes=O,s;case Me:return yu(g,M,O,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Mt:ie=10;break e;case xt:ie=9;break e;case xe:ie=11;break e;case Ve:ie=14;break e;case zt:ie=16,k=null;break e}throw Error(f(130,s==null?s:typeof s,""))}return o=ya(ie,g,o,M),o.elementType=s,o.type=k,o.lanes=O,o}function gu(s,o,g,k){return s=ya(7,s,k,o),s.lanes=g,s}function yu(s,o,g,k){return s=ya(22,s,k,o),s.elementType=Me,s.lanes=g,s.stateNode={isHidden:!1},s}function no(s,o,g){return s=ya(6,s,null,o),s.lanes=g,s}function tl(s,o,g){return o=ya(4,s.children!==null?s.children:[],s.key,o),o.lanes=g,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Wp(s,o,g,k,M){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ke(0),this.expirationTimes=Ke(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.identifierPrefix=k,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function Oh(s,o,g,k,M,O,ie,ze,He){return s=new Wp(s,o,g,ze,He),o===1?(o=1,O===!0&&(o|=8)):o=0,O=ya(3,null,null,o),s.current=O,O.stateNode=s,O.memoizedState={element:k,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ko(O),s}function lg(s,o,g){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ge,key:k==null?null:""+k,children:s,containerInfo:o,implementation:g}}function Gp(s){if(!s)return Xo;s=s._reactInternals;e:{if(Wr(s)!==s||s.tag!==1)throw Error(f(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Xi(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(f(171))}if(s.tag===1){var g=s.type;if(Xi(g))return tu(s,g,o)}return o}function Fh(s,o,g,k,M,O,ie,ze,He){return s=Oh(g,k,!0,s,M,O,ie,ze,He),s.context=Gp(null),g=s.current,k=Xs(),M=pu(g),O=ha(k,M),O.callback=o??null,eo(g,O,M),s.current.lanes=M,st(s,M,k),ga(s,k),s}function Oc(s,o,g,k){var M=o.current,O=Xs(),ie=pu(M);return g=Gp(g),o.context===null?o.context=g:o.pendingContext=g,o=ha(O,ie),o.payload={element:s},k=k===void 0?null:k,k!==null&&(o.callback=k),s=eo(M,o,ie),s!==null&&(Mo(s,M,ie,O),_s(s,M,ie)),ie}function Rd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Ld(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<o?g:o}}function Bh(s,o){Ld(s,o),(s=s.alternate)&&Ld(s,o)}function Fc(){return null}var Ff=typeof reportError=="function"?reportError:function(s){console.error(s)};function Od(s){this._internalRoot=s}Bc.prototype.render=Od.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(f(409));Oc(s,o,null,null)},Bc.prototype.unmount=Od.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Il(function(){Oc(null,s,null,null)}),o[Ma]=null}};function Bc(s){this._internalRoot=s}Bc.prototype.unstable_scheduleHydration=function(s){if(s){var o=ps();s={blockedOn:null,target:s,priority:o};for(var g=0;g<Vs.length&&o!==0&&o<Vs[g].priority;g++);Vs.splice(g,0,s),g===0&&Hs(s)}};function Fd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function rc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Bf(){}function ug(s,o,g,k,M){if(M){if(typeof k=="function"){var O=k;k=function(){var mt=Rd(ie);O.call(mt)}}var ie=Fh(o,k,s,0,null,!1,!1,"",Bf);return s._reactRootContainer=ie,s[Ma]=ie.current,bo(s.nodeType===8?s.parentNode:s),Il(),ie}for(;M=s.lastChild;)s.removeChild(M);if(typeof k=="function"){var ze=k;k=function(){var mt=Rd(He);ze.call(mt)}}var He=Oh(s,0,!1,null,null,!1,!1,"",Bf);return s._reactRootContainer=He,s[Ma]=He.current,bo(s.nodeType===8?s.parentNode:s),Il(function(){Oc(o,He,g,k)}),He}function Bd(s,o,g,k,M){var O=g._reactRootContainer;if(O){var ie=O;if(typeof M=="function"){var ze=M;M=function(){var He=Rd(ie);ze.call(He)}}Oc(o,ie,s,M)}else ie=ug(g,o,s,M,k);return Rd(ie)}Gr=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var g=ea(o.pendingLanes);g!==0&&(Ht(o,g|1),ga(o,Dr()),(gn&6)===0&&(ri=Dr()+500,v()))}break;case 13:Il(function(){var k=As(s,1);if(k!==null){var M=Xs();Mo(k,s,1,M)}}),Bh(s,1)}},vn=function(s){if(s.tag===13){var o=As(s,134217728);if(o!==null){var g=Xs();Mo(o,s,134217728,g)}Bh(s,134217728)}},Fi=function(s){if(s.tag===13){var o=pu(s),g=As(s,o);if(g!==null){var k=Xs();Mo(g,s,o,k)}Bh(s,o)}},ps=function(){return Qt},rs=function(s,o){var g=Qt;try{return Qt=s,o()}finally{Qt=g}},Ri=function(s,o,g){switch(o){case"input":if(Ae(s,g),o=g.name,g.type==="radio"&&o!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<g.length;o++){var k=g[o];if(k!==s&&k.form===s.form){var M=Hu(k);if(!M)throw Error(f(90));tn(k),Ae(k,M)}}}break;case"textarea":nr(s,g);break;case"select":o=g.value,o!=null&&At(s,!!g.multiple,o,!1)}},ue=zd,Se=Il;var Zp={usingClientEntryPoint:!1,Events:[Vu,Aa,Hu,ee,Q,zd]},Nh={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cg={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=on(s),s===null?null:s.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||Fc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{Jn=Nd.inject(cg),Ti=Nd}catch{}}return so.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zp,so.createPortal=function(s,o){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fd(o))throw Error(f(200));return lg(s,o,null,g)},so.createRoot=function(s,o){if(!Fd(s))throw Error(f(299));var g=!1,k="",M=Ff;return o!=null&&(o.unstable_strictMode===!0&&(g=!0),o.identifierPrefix!==void 0&&(k=o.identifierPrefix),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=Oh(s,1,!1,null,null,g,!1,k,M),s[Ma]=o.current,bo(s.nodeType===8?s.parentNode:s),new Od(o)},so.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(f(188)):(s=Object.keys(s).join(","),Error(f(268,s)));return s=on(o),s=s===null?null:s.stateNode,s},so.flushSync=function(s){return Il(s)},so.hydrate=function(s,o,g){if(!rc(o))throw Error(f(200));return Bd(null,s,o,!0,g)},so.hydrateRoot=function(s,o,g){if(!Fd(s))throw Error(f(405));var k=g!=null&&g.hydratedSources||null,M=!1,O="",ie=Ff;if(g!=null&&(g.unstable_strictMode===!0&&(M=!0),g.identifierPrefix!==void 0&&(O=g.identifierPrefix),g.onRecoverableError!==void 0&&(ie=g.onRecoverableError)),o=Fh(o,null,s,1,g??null,M,!1,O,ie),s[Ma]=o.current,bo(s),k)for(s=0;s<k.length;s++)g=k[s],M=g._getVersion,M=M(g._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[g,M]:o.mutableSourceEagerHydrationData.push(g,M);return new Bc(o)},so.render=function(s,o,g){if(!rc(o))throw Error(f(200));return Bd(null,s,o,!1,g)},so.unmountComponentAtNode=function(s){if(!rc(s))throw Error(f(40));return s._reactRootContainer?(Il(function(){Bd(null,null,s,!1,function(){s._reactRootContainer=null,s[Ma]=null})}),!0):!1},so.unstable_batchedUpdates=zd,so.unstable_renderSubtreeIntoContainer=function(s,o,g,k){if(!rc(g))throw Error(f(200));if(s==null||s._reactInternals===void 0)throw Error(f(38));return Bd(s,o,g,!1,k)},so.version="18.3.1-next-f1338f8080-20240426",so}var E_;function $v(){if(E_)return Tg.exports;E_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(h){console.error(h)}}return n(),Tg.exports=x1(),Tg.exports}var C_;function w1(){if(C_)return em;C_=1;var n=$v();return em.createRoot=n.createRoot,em.hydrateRoot=n.hydrateRoot,em}var b1=w1();const S1=af(b1);var fm={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var k1=fm.exports,I_;function T1(){return I_||(I_=1,function(n,h){(function(f,y){n.exports=y()})(k1,function(){var f={},y={};function b(S,c,R){if(y[S]=R,S==="index"){var N="var sharedModule = {}; ("+y.shared+")(sharedModule); ("+y.worker+")(sharedModule);",Z={};return y.shared(Z),y.index(f,Z),typeof window<"u"&&f.setWorkerUrl(window.URL.createObjectURL(new Blob([N],{type:"text/javascript"}))),f}}b("shared",["exports"],function(S){function c(r,t,i,u){return new(i||(i=Promise))(function(m,x){function w(D){try{I(u.next(D))}catch(B){x(B)}}function T(D){try{I(u.throw(D))}catch(B){x(B)}}function I(D){var B;D.done?m(D.value):(B=D.value,B instanceof i?B:new i(function(V){V(B)})).then(w,T)}I((u=u.apply(r,t||[])).next())})}function R(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}typeof SuppressedError=="function"&&SuppressedError;var N=Z;function Z(r,t){this.x=r,this.y=t}Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,i=r.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),i=Math.sin(r),u=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=u,this},_rotateAround:function(r,t){var i=Math.cos(r),u=Math.sin(r),m=t.y+u*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-u*(this.y-t.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Z.convert=function(r){return r instanceof Z?r:Array.isArray(r)?new Z(r[0],r[1]):r};var U=R(N),j=G;function G(r,t,i,u){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=i,this.p2y=u}G.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var i=r,u=0;u<8;u++){var m=this.sampleCurveX(i)-r;if(Math.abs(m)<t)return i;var x=this.sampleCurveDerivativeX(i);if(Math.abs(x)<1e-6)break;i-=m/x}var w=0,T=1;for(i=r,u=0;u<20&&(m=this.sampleCurveX(i),!(Math.abs(m-r)<t));u++)r>m?w=i:T=i,i=.5*(T-w)+w;return i},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var se=R(j);let J,oe;function re(){return J==null&&(J=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),J}function pe(){if(oe==null&&(oe=!1,re())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let u=0;u<5*5;u++){const m=4*u;t.fillStyle=`rgb(${m},${m+1},${m+2})`,t.fillRect(u%5,Math.floor(u/5),1,1)}const i=t.getImageData(0,0,5,5).data;for(let u=0;u<5*5*4;u++)if(u%4!=3&&i[u]!==u){oe=!0;break}}}return oe||!1}function ge(r,t,i,u){const m=new se(r,t,i,u);return x=>m.solve(x)}const Oe=ge(.25,.1,.25,1);function ve(r,t,i){return Math.min(i,Math.max(t,r))}function Ge(r,t,i){const u=i-t,m=((r-t)%u+u)%u+t;return m===t?i:m}function je(r,...t){for(const i of t)for(const u in i)r[u]=i[u];return r}let St=1;function at(r,t,i){const u={};for(const m in r)u[m]=t.call(this,r[m],m,r);return u}function Mt(r,t,i){const u={};for(const m in r)t.call(this,r[m],m,r)&&(u[m]=r[m]);return u}function xt(r){return Array.isArray(r)?r.map(xt):typeof r=="object"&&r?at(r,xt):r}const xe={};function Je(r){xe[r]||(typeof console<"u"&&console.warn(r),xe[r]=!0)}function W(r,t,i){return(i.y-r.y)*(t.x-r.x)>(t.y-r.y)*(i.x-r.x)}function Ve(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let zt=null;function Me(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}const et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ze(r,t,i,u,m){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(r,{timestamp:0});try{const w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const T=w.startsWith("BGR"),I=new Uint8ClampedArray(u*m*4);if(yield x.copyTo(I,function(D,B,V,q,te){const le=4*Math.max(-B,0),fe=(Math.max(0,V)-V)*q*4+le,Pe=4*q,Re=Math.max(0,B),rt=Math.max(0,V);return{rect:{x:Re,y:rt,width:Math.min(D.width,B+q)-Re,height:Math.min(D.height,V+te)-rt},layout:[{offset:fe,stride:Pe}]}}(r,t,i,u,m)),T)for(let D=0;D<I.length;D+=4){const B=I[D];I[D]=I[D+2],I[D+2]=B}return I}finally{x.close()}})}let ht,ae;const _e="AbortError";function Ct(){return new Error(_e)}const bt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function wt(r){return bt.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}const lr="global-dispatcher";class pr extends Error{constructor(t,i,u,m){super(`AJAXError: ${i} (${t}): ${u}`),this.status=t,this.statusText=i,this.url=u,this.body=m}}const Gt=()=>Ve(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Kt=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){const u=wt(r.url);if(u)return u(r,t);if(Ve(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:lr},t)}if(!(/^file:/.test(i=r.url)||/^file:/.test(Gt())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(u,m){return c(this,void 0,void 0,function*(){const x=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:Gt(),signal:m.signal});u.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");const w=yield fetch(x);if(!w.ok){const D=yield w.blob();throw new pr(w.status,w.statusText,u.url,D)}let T;T=u.type==="arrayBuffer"||u.type==="image"?w.arrayBuffer():u.type==="json"?w.json():w.text();const I=yield T;if(m.signal.aborted)throw Ct();return{data:I,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(r,t);if(Ve(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:lr},t)}var i;return function(u,m){return new Promise((x,w)=>{var T;const I=new XMLHttpRequest;I.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(I.responseType="arraybuffer");for(const D in u.headers)I.setRequestHeader(D,u.headers[D]);u.type==="json"&&(I.responseType="text",!((T=u.headers)===null||T===void 0)&&T.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=u.credentials==="include",I.onerror=()=>{w(new Error(I.statusText))},I.onload=()=>{if(!m.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let D=I.response;if(u.type==="json")try{D=JSON.parse(I.response)}catch(B){return void w(B)}x({data:D,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const D=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});w(new pr(I.status,I.statusText,u.url,D))}},m.signal.addEventListener("abort",()=>{I.abort(),w(Ct())}),I.send(u.body)})}(r,t)};function Mr(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;const t=new URL(r),i=window.location;return t.protocol===i.protocol&&t.host===i.host}function Vr(r,t,i){i[r]&&i[r].indexOf(t)!==-1||(i[r]=i[r]||[],i[r].push(t))}function tn(r,t,i){if(i&&i[r]){const u=i[r].indexOf(t);u!==-1&&i[r].splice(u,1)}}class Kr{constructor(t,i={}){je(this,i),this.type=t}}class Y extends Kr{constructor(t,i={}){super("error",je({error:t},i))}}class ft{on(t,i){return this._listeners=this._listeners||{},Vr(t,i,this._listeners),this}off(t,i){return tn(t,i,this._listeners),tn(t,i,this._oneTimeListeners),this}once(t,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},Vr(t,i,this._oneTimeListeners),this):new Promise(u=>this.once(t,u))}fire(t,i){typeof t=="string"&&(t=new Kr(t,i||{}));const u=t.type;if(this.listens(u)){t.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const T of m)T.call(this,t);const x=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const T of x)tn(u,T,this._oneTimeListeners),T.call(this,t);const w=this._eventedParent;w&&(je(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(t))}else t instanceof Y&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,i){return this._eventedParent=t,this._eventedParentData=i,this}}var ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ae=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function we(r,t){const i={};for(const u in r)u!=="ref"&&(i[u]=r[u]);return Ae.forEach(u=>{u in t&&(i[u]=t[u])}),i}function Ne(r,t){if(Array.isArray(r)){if(!Array.isArray(t)||r.length!==t.length)return!1;for(let i=0;i<r.length;i++)if(!Ne(r[i],t[i]))return!1;return!0}if(typeof r=="object"&&r!==null&&t!==null){if(typeof t!="object"||Object.keys(r).length!==Object.keys(t).length)return!1;for(const i in r)if(!Ne(r[i],t[i]))return!1;return!0}return r===t}function _t(r,t){r.push(t)}function At(r,t,i){_t(i,{command:"addSource",args:[r,t[r]]})}function nt(r,t,i){_t(t,{command:"removeSource",args:[r]}),i[r]=!0}function Dt(r,t,i,u){nt(r,i,u),At(r,t,i)}function nr(r,t,i){let u;for(u in r[i])if(Object.prototype.hasOwnProperty.call(r[i],u)&&u!=="data"&&!Ne(r[i][u],t[i][u]))return!1;for(u in t[i])if(Object.prototype.hasOwnProperty.call(t[i],u)&&u!=="data"&&!Ne(r[i][u],t[i][u]))return!1;return!0}function Lt(r,t,i,u,m,x){r=r||{},t=t||{};for(const w in r)Object.prototype.hasOwnProperty.call(r,w)&&(Ne(r[w],t[w])||i.push({command:x,args:[u,w,t[w],m]}));for(const w in t)Object.prototype.hasOwnProperty.call(t,w)&&!Object.prototype.hasOwnProperty.call(r,w)&&(Ne(r[w],t[w])||i.push({command:x,args:[u,w,t[w],m]}))}function xr(r){return r.id}function sn(r,t){return r[t.id]=t,r}class vt{constructor(t,i,u,m){this.message=(t?`${t}: `:"")+u,m&&(this.identifier=m),i!=null&&i.__line__&&(this.line=i.__line__)}}function Cn(r,...t){for(const i of t)for(const u in i)r[u]=i[u];return r}class Sn extends Error{constructor(t,i){super(i),this.message=i,this.key=t}}class In{constructor(t,i=[]){this.parent=t,this.bindings={};for(const[u,m]of i)this.bindings[u]=m}concat(t){return new In(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const wi={kind:"null"},Pt={kind:"number"},Lr={kind:"string"},kr={kind:"boolean"},kn={kind:"color"},bi={kind:"object"},Ar={kind:"value"},Nn={kind:"collator"},Ri={kind:"formatted"},si={kind:"padding"},Hr={kind:"resolvedImage"},Ce={kind:"variableAnchorOffsetCollection"};function ee(r,t){return{kind:"array",itemType:r,N:t}}function Q(r){if(r.kind==="array"){const t=Q(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}const ue=[wi,Pt,Lr,kr,kn,Ri,bi,ee(Ar),si,Hr,Ce];function Se(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Se(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(const i of ue)if(!Se(i,t))return null}}return`Expected ${Q(r)} but found ${Q(t)} instead.`}function Fe(r,t){return t.some(i=>i.kind===r.kind)}function $e(r,t){return t.some(i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r)}function Xe(r,t){return r.kind==="array"&&t.kind==="array"?r.itemType.kind===t.itemType.kind&&typeof r.N=="number":r.kind===t.kind}const Le=.96422,pt=.82521,It=4/29,ut=6/29,Nt=3*ut*ut,hr=ut*ut*ut,mr=Math.PI/180,rn=180/Math.PI;function Rr(r){return(r%=360)<0&&(r+=360),r}function en([r,t,i,u]){let m,x;const w=Pn((.2225045*(r=Wr(r))+.7168786*(t=Wr(t))+.0606169*(i=Wr(i)))/1);r===t&&t===i?m=x=w:(m=Pn((.4360747*r+.3850649*t+.1430804*i)/Le),x=Pn((.0139322*r+.0971045*t+.7141733*i)/pt));const T=116*w-16;return[T<0?0:T,500*(m-w),200*(w-x),u]}function Wr(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Pn(r){return r>hr?Math.pow(r,1/3):r/Nt+It}function An([r,t,i,u]){let m=(r+16)/116,x=isNaN(t)?m:m+t/500,w=isNaN(i)?m:m-i/200;return m=1*on(m),x=Le*on(x),w=pt*on(w),[Zr(3.1338561*x-1.6168667*m-.4906146*w),Zr(-.9787684*x+1.9161415*m+.033454*w),Zr(.0719453*x-.2289914*m+1.4052427*w),u]}function Zr(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function on(r){return r>ut?r*r*r:Nt*(r-It)}function pn(r){return parseInt(r.padEnd(2,r),16)/255}function Wn(r,t){return ai(t?r/100:r,0,1)}function ai(r,t,i){return Math.min(Math.max(t,r),i)}function Si(r){return!r.some(Number.isNaN)}const Sa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Dr{constructor(t,i,u,m=1,x=!0){this.r=t,this.g=i,this.b=u,this.a=m,x||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[t,i,u,m]))}static parse(t){if(t instanceof Dr)return t;if(typeof t!="string")return;const i=function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Sa[u];if(m){const[w,T,I]=m;return[w/255,T/255,I/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const w=u.length<6?1:2;let T=1;return[pn(u.slice(T,T+=w)),pn(u.slice(T,T+=w)),pn(u.slice(T,T+=w)),pn(u.slice(T,T+w)||"ff")]}if(u.startsWith("rgb")){const w=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,I,D,B,V,q,te,le,fe,Pe,Re,rt]=w,Ue=[B||" ",te||" ",Pe].join("");if(Ue==="  "||Ue==="  /"||Ue===",,"||Ue===",,,"){const Qe=[D,q,fe].join(""),gt=Qe==="%%%"?100:Qe===""?255:0;if(gt){const Rt=[ai(+I/gt,0,1),ai(+V/gt,0,1),ai(+le/gt,0,1),Re?Wn(+Re,rt):1];if(Si(Rt))return Rt}}return}}const x=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,I,D,B,V,q,te,le]=x,fe=[I||" ",B||" ",q].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const Pe=[+T,ai(+D,0,100),ai(+V,0,100),te?Wn(+te,le):1];if(Si(Pe))return function([Re,rt,Ue,Qe]){function gt(Rt){const ir=(Rt+Re/30)%12,zr=rt*Math.min(Ue,1-Ue);return Ue-zr*Math.max(-1,Math.min(ir-3,9-ir,1))}return Re=Rr(Re),rt/=100,Ue/=100,[gt(0),gt(8),gt(4),Qe]}(Pe)}}}(t);return i?new Dr(...i,!1):void 0}get rgb(){const{r:t,g:i,b:u,a:m}=this,x=m||1/0;return this.overwriteGetter("rgb",[t/x,i/x,u/x,m])}get hcl(){return this.overwriteGetter("hcl",function(t){const[i,u,m,x]=en(t),w=Math.sqrt(u*u+m*m);return[Math.round(1e4*w)?Rr(Math.atan2(m,u)*rn):NaN,w,i,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",en(this.rgb))}overwriteGetter(t,i){return Object.defineProperty(this,t,{value:i}),i}toString(){const[t,i,u,m]=this.rgb;return`rgba(${[t,i,u].map(x=>Math.round(255*x)).join(",")},${m})`}}Dr.black=new Dr(0,0,0,1),Dr.white=new Dr(1,1,1,1),Dr.transparent=new Dr(0,0,0,0),Dr.red=new Dr(1,0,0,1);class Li{constructor(t,i,u){this.sensitivity=t?i?"variant":"case":i?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,i){return this.collator.compare(t,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Za{constructor(t,i,u,m,x){this.text=t,this.image=i,this.scale=u,this.fontStack=m,this.textColor=x}}class ki{constructor(t){this.sections=t}static fromString(t){return new ki([new Za(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ki?t:ki.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class ci{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ci)return t;if(typeof t=="number")return new ci([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const i of t)if(typeof i!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new ci(t)}}toString(){return JSON.stringify(this.values)}}const Nl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof hi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let i=0;i<t.length;i+=2){const u=t[i],m=t[i+1];if(typeof u!="string"||!Nl.has(u)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new hi(t)}}toString(){return JSON.stringify(this.values)}}class Jn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Jn({name:t,available:!1}):null}}function Ti(r,t,i,u){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[r,t,i,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[r,t,i,u]:[r,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fs(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Dr||r instanceof Li||r instanceof ki||r instanceof ci||r instanceof hi||r instanceof Jn)return!0;if(Array.isArray(r)){for(const t of r)if(!fs(t))return!1;return!0}if(typeof r=="object"){for(const t in r)if(!fs(r[t]))return!1;return!0}return!1}function ln(r){if(r===null)return wi;if(typeof r=="string")return Lr;if(typeof r=="boolean")return kr;if(typeof r=="number")return Pt;if(r instanceof Dr)return kn;if(r instanceof Li)return Nn;if(r instanceof ki)return Ri;if(r instanceof ci)return si;if(r instanceof hi)return Ce;if(r instanceof Jn)return Hr;if(Array.isArray(r)){const t=r.length;let i;for(const u of r){const m=ln(u);if(i){if(i===m)continue;i=Ar;break}i=m}return ee(i||Ar,t)}return bi}function ka(r){const t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof Dr||r instanceof ki||r instanceof ci||r instanceof hi||r instanceof Jn?r.toString():JSON.stringify(r)}class Zi{constructor(t,i){this.type=t,this.value=i}static parse(t,i){if(t.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!fs(t[1]))return i.error("invalid value");const u=t[1];let m=ln(u);const x=i.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new Zi(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class jn{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Ss={string:Lr,number:Pt,boolean:kr,object:bi};class Oi{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");let u,m=1;const x=t[0];if(x==="array"){let T,I;if(t.length>2){const D=t[1];if(typeof D!="string"||!(D in Ss)||D==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);T=Ss[D],m++}else T=Ar;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return i.error('The length argument to "array" must be a positive integer literal',2);I=t[2],m++}u=ee(T,I)}else{if(!Ss[x])throw new Error(`Types doesn't contain name = ${x}`);u=Ss[x]}const w=[];for(;m<t.length;m++){const T=i.parse(t[m],m,Ar);if(!T)return null;w.push(T)}return new Oi(u,w)}evaluate(t){for(let i=0;i<this.args.length;i++){const u=this.args[i].evaluate(t);if(!Se(this.type,ln(u)))return u;if(i===this.args.length-1)throw new jn(`Expected value to be of type ${Q(this.type)}, but found ${Q(ln(u))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const ea={"to-boolean":kr,"to-color":kn,"to-number":Pt,"to-string":Lr};class Ei{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");const u=t[0];if(!ea[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return i.error("Expected one argument.");const m=ea[u],x=[];for(let w=1;w<t.length;w++){const T=i.parse(t[w],w,Ar);if(!T)return null;x.push(T)}return new Ei(m,x)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let i,u;for(const m of this.args){if(i=m.evaluate(t),u=null,i instanceof Dr)return i;if(typeof i=="string"){const x=t.parseColor(i);if(x)return x}else if(Array.isArray(i)&&(u=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:Ti(i[0],i[1],i[2],i[3]),!u))return new Dr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new jn(u||`Could not parse color from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"padding":{let i;for(const u of this.args){i=u.evaluate(t);const m=ci.parse(i);if(m)return m}throw new jn(`Could not parse padding from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"variableAnchorOffsetCollection":{let i;for(const u of this.args){i=u.evaluate(t);const m=hi.parse(i);if(m)return m}throw new jn(`Could not parse variableAnchorOffsetCollection from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"number":{let i=null;for(const u of this.args){if(i=u.evaluate(t),i===null)return 0;const m=Number(i);if(!isNaN(m))return m}throw new jn(`Could not convert ${JSON.stringify(i)} to number.`)}case"formatted":return ki.fromString(ka(this.args[0].evaluate(t)));case"resolvedImage":return Jn.fromString(ka(this.args[0].evaluate(t)));default:return ka(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const z=["Unknown","Point","LineString","Polygon"];class K{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?z[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let i=this._parseColorCache[t];return i||(i=this._parseColorCache[t]=Dr.parse(t)),i}}class he{constructor(t,i,u=[],m,x=new In,w=[]){this.registry=t,this.path=u,this.key=u.map(T=>`[${T}]`).join(""),this.scope=x,this.errors=w,this.expectedType=m,this._isConstant=i}parse(t,i,u,m,x={}){return i?this.concat(i,u,m)._parse(t,x):this._parse(t,x)}_parse(t,i){function u(m,x,w){return w==="assert"?new Oi(x,[m]):w==="coerce"?new Ei(x,[m]):m}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=t[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[m];if(x){let w=x.parse(t,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,I=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||I.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(T.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(T,I))return null}else w=u(w,T,i.typeAnnotation||"coerce");else w=u(w,T,i.typeAnnotation||"coerce");else w=u(w,T,i.typeAnnotation||"coerce");else w=u(w,T,i.typeAnnotation||"assert")}if(!(w instanceof Zi)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const T=new K;try{w=new Zi(w.type,w.evaluate(T))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,i,u){const m=typeof t=="number"?this.path.concat(t):this.path,x=u?this.scope.concat(u):this.scope;return new he(this.registry,this._isConstant,m,i||null,x,this.errors)}error(t,...i){const u=`${this.key}${i.map(m=>`[${m}]`).join("")}`;this.errors.push(new Sn(u,t))}checkSubtype(t,i){const u=Se(t,i);return u&&this.error(u),u}}class ke{constructor(t,i){this.type=i.type,this.bindings=[].concat(t),this.result=i}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const i of this.bindings)t(i[1]);t(this.result)}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let x=1;x<t.length-1;x+=2){const w=t[x];if(typeof w!="string")return i.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return i.error("Variable names must contain only alphanumeric characters or '_'.",x);const T=i.parse(t[x+1],x+1);if(!T)return null;u.push([w,T])}const m=i.parse(t[t.length-1],t.length-1,i.expectedType,u);return m?new ke(u,m):null}outputDefined(){return this.result.outputDefined()}}class Ke{constructor(t,i){this.type=i.type,this.name=t,this.boundExpression=i}static parse(t,i){if(t.length!==2||typeof t[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const u=t[1];return i.scope.has(u)?new Ke(u,i.scope.get(u)):i.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class st{constructor(t,i,u){this.type=t,this.index=i,this.input=u}static parse(t,i){if(t.length!==3)return i.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=i.parse(t[1],1,Pt),m=i.parse(t[2],2,ee(i.expectedType||Ar));return u&&m?new st(m.type.itemType,u,m):null}evaluate(t){const i=this.index.evaluate(t),u=this.input.evaluate(t);if(i<0)throw new jn(`Array index out of bounds: ${i} < 0.`);if(i>=u.length)throw new jn(`Array index out of bounds: ${i} > ${u.length-1}.`);if(i!==Math.floor(i))throw new jn(`Array index must be an integer, but found ${i} instead.`);return u[i]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class kt{constructor(t,i){this.type=kr,this.needle=t,this.haystack=i}static parse(t,i){if(t.length!==3)return i.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=i.parse(t[1],1,Ar),m=i.parse(t[2],2,Ar);return u&&m?Fe(u.type,[kr,Lr,Pt,wi,Ar])?new kt(u,m):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Q(u.type)} instead`):null}evaluate(t){const i=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!$e(i,["boolean","string","number","null"]))throw new jn(`Expected first argument to be of type boolean, string, number or null, but found ${Q(ln(i))} instead.`);if(!$e(u,["string","array"]))throw new jn(`Expected second argument to be of type array or string, but found ${Q(ln(u))} instead.`);return u.indexOf(i)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ht{constructor(t,i,u){this.type=Pt,this.needle=t,this.haystack=i,this.fromIndex=u}static parse(t,i){if(t.length<=2||t.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=i.parse(t[1],1,Ar),m=i.parse(t[2],2,Ar);if(!u||!m)return null;if(!Fe(u.type,[kr,Lr,Pt,wi,Ar]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Q(u.type)} instead`);if(t.length===4){const x=i.parse(t[3],3,Pt);return x?new Ht(u,m,x):null}return new Ht(u,m)}evaluate(t){const i=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!$e(i,["boolean","string","number","null"]))throw new jn(`Expected first argument to be of type boolean, string, number or null, but found ${Q(ln(i))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(t)),$e(u,["string"])){const x=u.indexOf(i,m);return x===-1?-1:[...u.slice(0,x)].length}if($e(u,["array"]))return u.indexOf(i,m);throw new jn(`Expected second argument to be of type array or string, but found ${Q(ln(u))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Qt{constructor(t,i,u,m,x,w){this.inputType=t,this.type=i,this.input=u,this.cases=m,this.outputs=x,this.otherwise=w}static parse(t,i){if(t.length<5)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return i.error("Expected an even number of arguments.");let u,m;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);const x={},w=[];for(let D=2;D<t.length-1;D+=2){let B=t[D];const V=t[D+1];Array.isArray(B)||(B=[B]);const q=i.concat(D);if(B.length===0)return q.error("Expected at least one branch label.");for(const le of B){if(typeof le!="number"&&typeof le!="string")return q.error("Branch labels must be numbers or strings.");if(typeof le=="number"&&Math.abs(le)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof le=="number"&&Math.floor(le)!==le)return q.error("Numeric branch labels must be integer values.");if(u){if(q.checkSubtype(u,ln(le)))return null}else u=ln(le);if(x[String(le)]!==void 0)return q.error("Branch labels must be unique.");x[String(le)]=w.length}const te=i.parse(V,D,m);if(!te)return null;m=m||te.type,w.push(te)}const T=i.parse(t[1],1,Ar);if(!T)return null;const I=i.parse(t[t.length-1],t.length-1,m);return I?T.type.kind!=="value"&&i.concat(1).checkSubtype(u,T.type)?null:new Qt(u,m,T,x,w,I):null}evaluate(t){const i=this.input.evaluate(t);return(ln(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Or{constructor(t,i,u){this.type=t,this.branches=i,this.otherwise=u}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return i.error("Expected an odd number of arguments.");let u;i.expectedType&&i.expectedType.kind!=="value"&&(u=i.expectedType);const m=[];for(let w=1;w<t.length-1;w+=2){const T=i.parse(t[w],w,kr);if(!T)return null;const I=i.parse(t[w+1],w+1,u);if(!I)return null;m.push([T,I]),u=u||I.type}const x=i.parse(t[t.length-1],t.length-1,u);if(!x)return null;if(!u)throw new Error("Can't infer output type");return new Or(u,m,x)}evaluate(t){for(const[i,u]of this.branches)if(i.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[i,u]of this.branches)t(i),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,i])=>i.outputDefined())&&this.otherwise.outputDefined()}}class Gr{constructor(t,i,u,m){this.type=t,this.input=i,this.beginIndex=u,this.endIndex=m}static parse(t,i){if(t.length<=2||t.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=i.parse(t[1],1,Ar),m=i.parse(t[2],2,Pt);if(!u||!m)return null;if(!Fe(u.type,[ee(Ar),Lr,Ar]))return i.error(`Expected first argument to be of type array or string, but found ${Q(u.type)} instead`);if(t.length===4){const x=i.parse(t[3],3,Pt);return x?new Gr(u.type,u,m,x):null}return new Gr(u.type,u,m)}evaluate(t){const i=this.input.evaluate(t),u=this.beginIndex.evaluate(t);let m;if(this.endIndex&&(m=this.endIndex.evaluate(t)),$e(i,["string"]))return[...i].slice(u,m).join("");if($e(i,["array"]))return i.slice(u,m);throw new jn(`Expected first argument to be of type array or string, but found ${Q(ln(i))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function vn(r,t){const i=r.length-1;let u,m,x=0,w=i,T=0;for(;x<=w;)if(T=Math.floor((x+w)/2),u=r[T],m=r[T+1],u<=t){if(T===i||t<m)return T;x=T+1}else{if(!(u>t))throw new jn("Input is not a number.");w=T-1}return 0}class Fi{constructor(t,i,u){this.type=t,this.input=i,this.labels=[],this.outputs=[];for(const[m,x]of u)this.labels.push(m),this.outputs.push(x)}static parse(t,i){if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");const u=i.parse(t[1],1,Pt);if(!u)return null;const m=[];let x=null;i.expectedType&&i.expectedType.kind!=="value"&&(x=i.expectedType);for(let w=1;w<t.length;w+=2){const T=w===1?-1/0:t[w],I=t[w+1],D=w,B=w+1;if(typeof T!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(m.length&&m[m.length-1][0]>=T)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=i.parse(I,B,x);if(!V)return null;x=x||V.type,m.push([T,V])}return new Fi(x,u,m)}evaluate(t){const i=this.labels,u=this.outputs;if(i.length===1)return u[0].evaluate(t);const m=this.input.evaluate(t);if(m<=i[0])return u[0].evaluate(t);const x=i.length;return m>=i[x-1]?u[x-1].evaluate(t):u[vn(i,m)].evaluate(t)}eachChild(t){t(this.input);for(const i of this.outputs)t(i)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function ps(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rs=ta;function ta(r,t,i,u){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=i,this.p2y=u}ta.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var i=r,u=0;u<8;u++){var m=this.sampleCurveX(i)-r;if(Math.abs(m)<t)return i;var x=this.sampleCurveDerivativeX(i);if(Math.abs(x)<1e-6)break;i-=m/x}var w=0,T=1;for(i=r,u=0;u<20&&(m=this.sampleCurveX(i),!(Math.abs(m-r)<t));u++)r>m?w=i:T=i,i=.5*(T-w)+w;return i},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var ks=ps(rs);function Ci(r,t,i){return r+i*(t-r)}function Ii(r,t,i){return r.map((u,m)=>Ci(u,t[m],i))}const Gn={number:Ci,color:function(r,t,i,u="rgb"){switch(u){case"rgb":{const[m,x,w,T]=Ii(r.rgb,t.rgb,i);return new Dr(m,x,w,T,!1)}case"hcl":{const[m,x,w,T]=r.hcl,[I,D,B,V]=t.hcl;let q,te;if(isNaN(m)||isNaN(I))isNaN(m)?isNaN(I)?q=NaN:(q=I,w!==1&&w!==0||(te=D)):(q=m,B!==1&&B!==0||(te=x));else{let rt=I-m;I>m&&rt>180?rt-=360:I<m&&m-I>180&&(rt+=360),q=m+i*rt}const[le,fe,Pe,Re]=function([rt,Ue,Qe,gt]){return rt=isNaN(rt)?0:rt*mr,An([Qe,Math.cos(rt)*Ue,Math.sin(rt)*Ue,gt])}([q,te??Ci(x,D,i),Ci(w,B,i),Ci(T,V,i)]);return new Dr(le,fe,Pe,Re,!1)}case"lab":{const[m,x,w,T]=An(Ii(r.lab,t.lab,i));return new Dr(m,x,w,T,!1)}}},array:Ii,padding:function(r,t,i){return new ci(Ii(r.values,t.values,i))},variableAnchorOffsetCollection:function(r,t,i){const u=r.values,m=t.values;if(u.length!==m.length)throw new jn(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${t.toString()}`);const x=[];for(let w=0;w<u.length;w+=2){if(u[w]!==m[w])throw new jn(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${u[w]}, to[${w}]: ${m[w]}`);x.push(u[w]);const[T,I]=u[w+1],[D,B]=m[w+1];x.push([Ci(T,D,i),Ci(I,B,i)])}return new hi(x)}};class Un{constructor(t,i,u,m,x){this.type=t,this.operator=i,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[w,T]of x)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(t,i,u,m){let x=0;if(t.name==="exponential")x=Us(i,t.base,u,m);else if(t.name==="linear")x=Us(i,1,u,m);else if(t.name==="cubic-bezier"){const w=t.controlPoints;x=new ks(w[0],w[1],w[2],w[3]).solve(Us(i,1,u,m))}return x}static parse(t,i){let[u,m,x,...w]=t;if(!Array.isArray(m)||m.length===0)return i.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const D=m[1];if(typeof D!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:D}}else{if(m[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const D=m.slice(1);if(D.length!==4||D.some(B=>typeof B!="number"||B<0||B>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:D}}}if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(x=i.parse(x,2,Pt),!x)return null;const T=[];let I=null;u==="interpolate-hcl"||u==="interpolate-lab"?I=kn:i.expectedType&&i.expectedType.kind!=="value"&&(I=i.expectedType);for(let D=0;D<w.length;D+=2){const B=w[D],V=w[D+1],q=D+3,te=D+4;if(typeof B!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(T.length&&T[T.length-1][0]>=B)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const le=i.parse(V,te,I);if(!le)return null;I=I||le.type,T.push([B,le])}return Xe(I,Pt)||Xe(I,kn)||Xe(I,si)||Xe(I,Ce)||Xe(I,ee(Pt))?new Un(I,u,m,x,T):i.error(`Type ${Q(I)} is not interpolatable.`)}evaluate(t){const i=this.labels,u=this.outputs;if(i.length===1)return u[0].evaluate(t);const m=this.input.evaluate(t);if(m<=i[0])return u[0].evaluate(t);const x=i.length;if(m>=i[x-1])return u[x-1].evaluate(t);const w=vn(i,m),T=Un.interpolationFactor(this.interpolation,m,i[w],i[w+1]),I=u[w].evaluate(t),D=u[w+1].evaluate(t);switch(this.operator){case"interpolate":return Gn[this.type.kind](I,D,T);case"interpolate-hcl":return Gn.color(I,D,T,"hcl");case"interpolate-lab":return Gn.color(I,D,T,"lab")}}eachChild(t){t(this.input);for(const i of this.outputs)t(i)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Us(r,t,i,u){const m=u-i,x=r-i;return m===0?0:t===1?x/m:(Math.pow(t,x)-1)/(Math.pow(t,m)-1)}class Vs{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expectected at least one argument.");let u=null;const m=i.expectedType;m&&m.kind!=="value"&&(u=m);const x=[];for(const T of t.slice(1)){const I=i.parse(T,1+x.length,u,void 0,{typeAnnotation:"omit"});if(!I)return null;u=u||I.type,x.push(I)}if(!u)throw new Error("No output type");const w=m&&x.some(T=>Se(m,T.type));return new Vs(w?Ar:u,x)}evaluate(t){let i,u=null,m=0;for(const x of this.args)if(m++,u=x.evaluate(t),u&&u instanceof Jn&&!u.available&&(i||(i=u.name),u=null,m===this.args.length&&(u=i)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function jl(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Iu(r,t,i,u){return u.compare(t,i)===0}function ra(r,t,i){const u=r!=="=="&&r!=="!=";return class Wv{constructor(x,w,T){this.type=kr,this.lhs=x,this.rhs=w,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const T=x[0];let I=w.parse(x[1],1,Ar);if(!I)return null;if(!jl(T,I.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${Q(I.type)}'.`);let D=w.parse(x[2],2,Ar);if(!D)return null;if(!jl(T,D.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${Q(D.type)}'.`);if(I.type.kind!==D.type.kind&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error(`Cannot compare types '${Q(I.type)}' and '${Q(D.type)}'.`);u&&(I.type.kind==="value"&&D.type.kind!=="value"?I=new Oi(D.type,[I]):I.type.kind!=="value"&&D.type.kind==="value"&&(D=new Oi(I.type,[D])));let B=null;if(x.length===4){if(I.type.kind!=="string"&&D.type.kind!=="string"&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(B=w.parse(x[3],3,Nn),!B)return null}return new Wv(I,D,B)}evaluate(x){const w=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(u&&this.hasUntypedArgument){const I=ln(w),D=ln(T);if(I.kind!==D.kind||I.kind!=="string"&&I.kind!=="number")throw new jn(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const I=ln(w),D=ln(T);if(I.kind!=="string"||D.kind!=="string")return t(x,w,T)}return this.collator?i(x,w,T,this.collator.evaluate(x)):t(x,w,T)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const qc=ra("==",function(r,t,i){return t===i},Iu),Hs=ra("!=",function(r,t,i){return t!==i},function(r,t,i,u){return!Iu(0,t,i,u)}),lo=ra("<",function(r,t,i){return t<i},function(r,t,i,u){return u.compare(t,i)<0}),hl=ra(">",function(r,t,i){return t>i},function(r,t,i,u){return u.compare(t,i)>0}),Dn=ra("<=",function(r,t,i){return t<=i},function(r,t,i,u){return u.compare(t,i)<=0}),na=ra(">=",function(r,t,i){return t>=i},function(r,t,i,u){return u.compare(t,i)>=0});class Ts{constructor(t,i,u){this.type=Nn,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=i}static parse(t,i){if(t.length!==2)return i.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return i.error("Collator options argument must be an object.");const m=i.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,kr);if(!m)return null;const x=i.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,kr);if(!x)return null;let w=null;return u.locale&&(w=i.parse(u.locale,1,Lr),!w)?null:new Ts(m,x,w)}evaluate(t){return new Li(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Es{constructor(t,i,u,m,x){this.type=Lr,this.number=t,this.locale=i,this.currency=u,this.minFractionDigits=m,this.maxFractionDigits=x}static parse(t,i){if(t.length!==3)return i.error("Expected two arguments.");const u=i.parse(t[1],1,Pt);if(!u)return null;const m=t[2];if(typeof m!="object"||Array.isArray(m))return i.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=i.parse(m.locale,1,Lr),!x))return null;let w=null;if(m.currency&&(w=i.parse(m.currency,1,Lr),!w))return null;let T=null;if(m["min-fraction-digits"]&&(T=i.parse(m["min-fraction-digits"],1,Pt),!T))return null;let I=null;return m["max-fraction-digits"]&&(I=i.parse(m["max-fraction-digits"],1,Pt),!I)?null:new Es(u,x,w,T,I)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ns{constructor(t){this.type=Ri,this.sections=t}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return i.error("First argument must be an image or text section.");const m=[];let x=!1;for(let w=1;w<=t.length-1;++w){const T=t[w];if(x&&typeof T=="object"&&!Array.isArray(T)){x=!1;let I=null;if(T["font-scale"]&&(I=i.parse(T["font-scale"],1,Pt),!I))return null;let D=null;if(T["text-font"]&&(D=i.parse(T["text-font"],1,ee(Lr)),!D))return null;let B=null;if(T["text-color"]&&(B=i.parse(T["text-color"],1,kn),!B))return null;const V=m[m.length-1];V.scale=I,V.font=D,V.textColor=B}else{const I=i.parse(t[w],1,Ar);if(!I)return null;const D=I.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new ns(m)}evaluate(t){return new ki(this.sections.map(i=>{const u=i.content.evaluate(t);return ln(u)===Hr?new Za("",u,null,null,null):new Za(ka(u),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null)}))}eachChild(t){for(const i of this.sections)t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}outputDefined(){return!1}}class No{constructor(t){this.type=Hr,this.input=t}static parse(t,i){if(t.length!==2)return i.error("Expected two arguments.");const u=i.parse(t[1],1,Lr);return u?new No(u):i.error("No image name provided.")}evaluate(t){const i=this.input.evaluate(t),u=Jn.fromString(i);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(i)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class Ta{constructor(t){this.type=Pt,this.input=t}static parse(t,i){if(t.length!==2)return i.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=i.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${Q(u.type)} instead.`):new Ta(u):null}evaluate(t){const i=this.input.evaluate(t);if(typeof i=="string")return[...i].length;if(Array.isArray(i))return i.length;throw new jn(`Expected value to be of type string or array, but found ${Q(ln(i))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ms=8192;function jo(r,t){const i=(180+r[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,t.z);return[Math.round(i*m*ms),Math.round(u*m*ms)]}function uo(r,t){const i=Math.pow(2,t.z);return[(m=(r[0]/ms+t.x)/i,360*m-180),(u=(r[1]/ms+t.y)/i,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,m}function Ea(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function Hi(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function un(r,t,i){const u=r[0]-t[0],m=r[1]-t[1],x=r[0]-i[0],w=r[1]-i[1];return u*w-x*m==0&&u*x<=0&&m*w<=0}function co(r,t,i,u){return(m=[u[0]-i[0],u[1]-i[1]])[0]*(x=[t[0]-r[0],t[1]-r[1]])[1]-m[1]*x[0]!=0&&!(!ho(r,t,i,u)||!ho(i,u,r,t));var m,x}function mc(r,t,i){for(const u of i)for(let m=0;m<u.length-1;++m)if(co(r,t,u[m],u[m+1]))return!0;return!1}function Cs(r,t,i=!1){let u=!1;for(const T of t)for(let I=0;I<T.length-1;I++){if(un(r,T[I],T[I+1]))return i;(x=T[I])[1]>(m=r)[1]!=(w=T[I+1])[1]>m[1]&&m[0]<(w[0]-x[0])*(m[1]-x[1])/(w[1]-x[1])+x[0]&&(u=!u)}var m,x,w;return u}function dl(r,t){for(const i of t)if(Cs(r,i))return!0;return!1}function Uo(r,t){for(const i of r)if(!Cs(i,t))return!1;for(let i=0;i<r.length-1;++i)if(mc(r[i],r[i+1],t))return!1;return!0}function qi(r,t){for(const i of t)if(Uo(r,i))return!0;return!1}function ho(r,t,i,u){const m=u[0]-i[0],x=u[1]-i[1],w=(r[0]-i[0])*x-m*(r[1]-i[1]),T=(t[0]-i[0])*x-m*(t[1]-i[1]);return w>0&&T<0||w<0&&T>0}function Ca(r,t,i){const u=[];for(let m=0;m<r.length;m++){const x=[];for(let w=0;w<r[m].length;w++){const T=jo(r[m][w],i);Ea(t,T),x.push(T)}u.push(x)}return u}function Vo(r,t,i){const u=[];for(let m=0;m<r.length;m++){const x=Ca(r[m],t,i);u.push(x)}return u}function Ul(r,t,i,u){if(r[0]<i[0]||r[0]>i[2]){const m=.5*u;let x=r[0]-i[0]>m?-u:i[0]-r[0]>m?u:0;x===0&&(x=r[0]-i[2]>m?-u:i[2]-r[0]>m?u:0),r[0]+=x}Ea(t,r)}function fo(r,t,i,u){const m=Math.pow(2,u.z)*ms,x=[u.x*ms,u.y*ms],w=[];for(const T of r)for(const I of T){const D=[I.x+x[0],I.y+x[1]];Ul(D,t,i,m),w.push(D)}return w}function qa(r,t,i,u){const m=Math.pow(2,u.z)*ms,x=[u.x*ms,u.y*ms],w=[];for(const I of r){const D=[];for(const B of I){const V=[B.x+x[0],B.y+x[1]];Ea(t,V),D.push(V)}w.push(D)}if(t[2]-t[0]<=m/2){(T=t)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const I of w)for(const D of I)Ul(D,t,i,m)}var T;return w}class is{constructor(t,i){this.type=kr,this.geojson=t,this.geometries=i}static parse(t,i){if(t.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fs(t[1])){const u=t[1];if(u.type==="FeatureCollection"){const m=[];for(const x of u.features){const{type:w,coordinates:T}=x.geometry;w==="Polygon"&&m.push(T),w==="MultiPolygon"&&m.push(...T)}if(m.length)return new is(u,{type:"MultiPolygon",coordinates:m})}else if(u.type==="Feature"){const m=u.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new is(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new is(u,u)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(i,u){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=i.canonicalID();if(u.type==="Polygon"){const T=Ca(u.coordinates,x,w),I=fo(i.geometry(),m,x,w);if(!Hi(m,x))return!1;for(const D of I)if(!Cs(D,T))return!1}if(u.type==="MultiPolygon"){const T=Vo(u.coordinates,x,w),I=fo(i.geometry(),m,x,w);if(!Hi(m,x))return!1;for(const D of I)if(!dl(D,T))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(i,u){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=i.canonicalID();if(u.type==="Polygon"){const T=Ca(u.coordinates,x,w),I=qa(i.geometry(),m,x,w);if(!Hi(m,x))return!1;for(const D of I)if(!Uo(D,T))return!1}if(u.type==="MultiPolygon"){const T=Vo(u.coordinates,x,w),I=qa(i.geometry(),m,x,w);if(!Hi(m,x))return!1;for(const D of I)if(!qi(D,T))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ho=class{constructor(r=[],t=(i,u)=>i<u?-1:i>u?1:0){if(this.data=r,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:t,compare:i}=this,u=t[r];for(;r>0;){const m=r-1>>1,x=t[m];if(i(u,x)>=0)break;t[r]=x,r=m}t[r]=u}_down(r){const{data:t,compare:i}=this,u=this.length>>1,m=t[r];for(;r<u;){let x=1+(r<<1);const w=x+1;if(w<this.length&&i(t[w],t[x])<0&&(x=w),i(t[x],m)>=0)break;t[r]=t[x],r=x}t[r]=m}};function Pu(r,t,i,u,m){Mu(r,t,i,u||r.length-1,m||gs)}function Mu(r,t,i,u,m){for(;u>i;){if(u-i>600){var x=u-i+1,w=t-i+1,T=Math.log(x),I=.5*Math.exp(2*T/3),D=.5*Math.sqrt(T*I*(x-I)/x)*(w-x/2<0?-1:1);Mu(r,t,Math.max(i,Math.floor(t-w*I/x+D)),Math.min(u,Math.floor(t+(x-w)*I/x+D)),m)}var B=r[t],V=i,q=u;for(po(r,i,t),m(r[u],B)>0&&po(r,i,u);V<q;){for(po(r,V,q),V++,q--;m(r[V],B)<0;)V++;for(;m(r[q],B)>0;)q--}m(r[i],B)===0?po(r,i,q):po(r,++q,u),q<=t&&(i=q+1),t<=q&&(u=q-1)}}function po(r,t,i){var u=r[t];r[t]=r[i],r[i]=u}function gs(r,t){return r<t?-1:r>t?1:0}function mo(r,t){if(r.length<=1)return[r];const i=[];let u,m;for(const x of r){const w=Yc(x);w!==0&&(x.area=Math.abs(w),m===void 0&&(m=w<0),m===w<0?(u&&i.push(u),u=[x]):u.push(x))}if(u&&i.push(u),t>1)for(let x=0;x<i.length;x++)i[x].length<=t||(Pu(i[x],t,1,i[x].length-1,Au),i[x]=i[x].slice(0,t));return i}function Au(r,t){return t.area-r.area}function Yc(r){let t=0;for(let i,u,m=0,x=r.length,w=x-1;m<x;w=m++)i=r[m],u=r[w],t+=(u.x-i.x)*(i.y+u.y);return t}const Du=1/298.257223563,fl=Du*(2-Du),zu=Math.PI/180;class pl{constructor(t){const i=6378.137*zu*1e3,u=Math.cos(t*zu),m=1/(1-fl*(1-u*u)),x=Math.sqrt(m);this.kx=i*x*u,this.ky=i*x*m*(1-fl)}distance(t,i){const u=this.wrap(t[0]-i[0])*this.kx,m=(t[1]-i[1])*this.ky;return Math.sqrt(u*u+m*m)}pointOnLine(t,i){let u,m,x,w,T=1/0;for(let I=0;I<t.length-1;I++){let D=t[I][0],B=t[I][1],V=this.wrap(t[I+1][0]-D)*this.kx,q=(t[I+1][1]-B)*this.ky,te=0;V===0&&q===0||(te=(this.wrap(i[0]-D)*this.kx*V+(i[1]-B)*this.ky*q)/(V*V+q*q),te>1?(D=t[I+1][0],B=t[I+1][1]):te>0&&(D+=V/this.kx*te,B+=q/this.ky*te)),V=this.wrap(i[0]-D)*this.kx,q=(i[1]-B)*this.ky;const le=V*V+q*q;le<T&&(T=le,u=D,m=B,x=I,w=te)}return{point:[u,m],index:x,t:Math.max(0,Math.min(1,w))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function ml(r,t){return t[0]-r[0]}function go(r){return r[1]-r[0]+1}function ia(r,t){return r[1]>=r[0]&&r[1]<t}function Vl(r,t){if(r[0]>r[1])return[null,null];const i=go(r);if(t){if(i===2)return[r,null];const m=Math.floor(i/2);return[[r[0],r[0]+m],[r[0]+m,r[1]]]}if(i===1)return[r,null];const u=Math.floor(i/2)-1;return[[r[0],r[0]+u],[r[0]+u+1,r[1]]]}function $o(r,t){if(!ia(t,r.length))return[1/0,1/0,-1/0,-1/0];const i=[1/0,1/0,-1/0,-1/0];for(let u=t[0];u<=t[1];++u)Ea(i,r[u]);return i}function gl(r){const t=[1/0,1/0,-1/0,-1/0];for(const i of r)for(const u of i)Ea(t,u);return t}function yl(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function L(r,t,i){if(!yl(r)||!yl(t))return NaN;let u=0,m=0;return r[2]<t[0]&&(u=t[0]-r[2]),r[0]>t[2]&&(u=r[0]-t[2]),r[1]>t[3]&&(m=r[1]-t[3]),r[3]<t[1]&&(m=t[1]-r[3]),i.distance([0,0],[u,m])}function X(r,t,i){const u=i.pointOnLine(t,r);return i.distance(r,u.point)}function ce(r,t,i,u,m){const x=Math.min(X(r,[i,u],m),X(t,[i,u],m)),w=Math.min(X(i,[r,t],m),X(u,[r,t],m));return Math.min(x,w)}function Te(r,t,i,u,m){if(!ia(t,r.length)||!ia(u,i.length))return 1/0;let x=1/0;for(let w=t[0];w<t[1];++w){const T=r[w],I=r[w+1];for(let D=u[0];D<u[1];++D){const B=i[D],V=i[D+1];if(co(T,I,B,V))return 0;x=Math.min(x,ce(T,I,B,V,m))}}return x}function tt(r,t,i,u,m){if(!ia(t,r.length)||!ia(u,i.length))return NaN;let x=1/0;for(let w=t[0];w<=t[1];++w)for(let T=u[0];T<=u[1];++T)if(x=Math.min(x,m.distance(r[w],i[T])),x===0)return x;return x}function ot(r,t,i){if(Cs(r,t,!0))return 0;let u=1/0;for(const m of t){const x=m[0],w=m[m.length-1];if(x!==w&&(u=Math.min(u,X(r,[w,x],i)),u===0))return u;const T=i.pointOnLine(m,r);if(u=Math.min(u,i.distance(r,T.point)),u===0)return u}return u}function ct(r,t,i,u){if(!ia(t,r.length))return NaN;for(let x=t[0];x<=t[1];++x)if(Cs(r[x],i,!0))return 0;let m=1/0;for(let x=t[0];x<t[1];++x){const w=r[x],T=r[x+1];for(const I of i)for(let D=0,B=I.length,V=B-1;D<B;V=D++){const q=I[V],te=I[D];if(co(w,T,q,te))return 0;m=Math.min(m,ce(w,T,q,te,u))}}return m}function Ut(r,t){for(const i of r)for(const u of i)if(Cs(u,t,!0))return!0;return!1}function sr(r,t,i,u=1/0){const m=gl(r),x=gl(t);if(u!==1/0&&L(m,x,i)>=u)return u;if(Hi(m,x)){if(Ut(r,t))return 0}else if(Ut(t,r))return 0;let w=1/0;for(const T of r)for(let I=0,D=T.length,B=D-1;I<D;B=I++){const V=T[B],q=T[I];for(const te of t)for(let le=0,fe=te.length,Pe=fe-1;le<fe;Pe=le++){const Re=te[Pe],rt=te[le];if(co(V,q,Re,rt))return 0;w=Math.min(w,ce(V,q,Re,rt,i))}}return w}function dr(r,t,i,u,m,x){if(!x)return;const w=L($o(u,x),m,i);w<t&&r.push([w,x,[0,0]])}function Fr(r,t,i,u,m,x,w){if(!x||!w)return;const T=L($o(u,x),$o(m,w),i);T<t&&r.push([T,x,w])}function xn(r,t,i,u,m=1/0){let x=Math.min(u.distance(r[0],i[0][0]),m);if(x===0)return x;const w=new Ho([[0,[0,r.length-1],[0,0]]],ml),T=gl(i);for(;w.length>0;){const I=w.pop();if(I[0]>=x)continue;const D=I[1],B=t?50:100;if(go(D)<=B){if(!ia(D,r.length))return NaN;if(t){const V=ct(r,D,i,u);if(isNaN(V)||V===0)return V;x=Math.min(x,V)}else for(let V=D[0];V<=D[1];++V){const q=ot(r[V],i,u);if(x=Math.min(x,q),x===0)return 0}}else{const V=Vl(D,t);dr(w,x,u,r,T,V[0]),dr(w,x,u,r,T,V[1])}}return x}function Pi(r,t,i,u,m,x=1/0){let w=Math.min(x,m.distance(r[0],i[0]));if(w===0)return w;const T=new Ho([[0,[0,r.length-1],[0,i.length-1]]],ml);for(;T.length>0;){const I=T.pop();if(I[0]>=w)continue;const D=I[1],B=I[2],V=t?50:100,q=u?50:100;if(go(D)<=V&&go(B)<=q){if(!ia(D,r.length)&&ia(B,i.length))return NaN;let te;if(t&&u)te=Te(r,D,i,B,m),w=Math.min(w,te);else if(t&&!u){const le=r.slice(D[0],D[1]+1);for(let fe=B[0];fe<=B[1];++fe)if(te=X(i[fe],le,m),w=Math.min(w,te),w===0)return w}else if(!t&&u){const le=i.slice(B[0],B[1]+1);for(let fe=D[0];fe<=D[1];++fe)if(te=X(r[fe],le,m),w=Math.min(w,te),w===0)return w}else te=tt(r,D,i,B,m),w=Math.min(w,te)}else{const te=Vl(D,t),le=Vl(B,u);Fr(T,w,m,r,i,te[0],le[0]),Fr(T,w,m,r,i,te[0],le[1]),Fr(T,w,m,r,i,te[1],le[0]),Fr(T,w,m,r,i,te[1],le[1])}}return w}function ss(r){return r.type==="MultiPolygon"?r.coordinates.map(t=>({type:"Polygon",coordinates:t})):r.type==="MultiLineString"?r.coordinates.map(t=>({type:"LineString",coordinates:t})):r.type==="MultiPoint"?r.coordinates.map(t=>({type:"Point",coordinates:t})):[r]}class Mi{constructor(t,i){this.type=Pt,this.geojson=t,this.geometries=i}static parse(t,i){if(t.length!==2)return i.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fs(t[1])){const u=t[1];if(u.type==="FeatureCollection")return new Mi(u,u.features.map(m=>ss(m.geometry)).flat());if(u.type==="Feature")return new Mi(u,ss(u.geometry));if("type"in u&&"coordinates"in u)return new Mi(u,ss(u))}return i.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(i,u){const m=i.geometry(),x=m.flat().map(I=>uo([I.x,I.y],i.canonical));if(m.length===0)return NaN;const w=new pl(x[0][1]);let T=1/0;for(const I of u){switch(I.type){case"Point":T=Math.min(T,Pi(x,!1,[I.coordinates],!1,w,T));break;case"LineString":T=Math.min(T,Pi(x,!1,I.coordinates,!0,w,T));break;case"Polygon":T=Math.min(T,xn(x,!1,I.coordinates,w,T))}if(T===0)return T}return T}(t,this.geometries);if(t.geometryType()==="LineString")return function(i,u){const m=i.geometry(),x=m.flat().map(I=>uo([I.x,I.y],i.canonical));if(m.length===0)return NaN;const w=new pl(x[0][1]);let T=1/0;for(const I of u){switch(I.type){case"Point":T=Math.min(T,Pi(x,!0,[I.coordinates],!1,w,T));break;case"LineString":T=Math.min(T,Pi(x,!0,I.coordinates,!0,w,T));break;case"Polygon":T=Math.min(T,xn(x,!0,I.coordinates,w,T))}if(T===0)return T}return T}(t,this.geometries);if(t.geometryType()==="Polygon")return function(i,u){const m=i.geometry();if(m.length===0||m[0].length===0)return NaN;const x=mo(m,0).map(I=>I.map(D=>D.map(B=>uo([B.x,B.y],i.canonical)))),w=new pl(x[0][0][0][1]);let T=1/0;for(const I of u)for(const D of x){switch(I.type){case"Point":T=Math.min(T,xn([I.coordinates],!1,D,w,T));break;case"LineString":T=Math.min(T,xn(I.coordinates,!0,D,w,T));break;case"Polygon":T=Math.min(T,sr(D,I.coordinates,w,T))}if(T===0)return T}return T}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const sa={"==":qc,"!=":Hs,">":hl,"<":lo,">=":na,"<=":Dn,array:Oi,at:st,boolean:Oi,case:Or,coalesce:Vs,collator:Ts,format:ns,image:No,in:kt,"index-of":Ht,interpolate:Un,"interpolate-hcl":Un,"interpolate-lab":Un,length:Ta,let:ke,literal:Zi,match:Qt,number:Oi,"number-format":Es,object:Oi,slice:Gr,step:Fi,string:Oi,"to-boolean":Ei,"to-color":Ei,"to-number":Ei,"to-string":Ei,var:Ke,within:is,distance:Mi};class as{constructor(t,i,u,m){this.name=t,this.type=i,this._evaluate=u,this.args=m}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,i){const u=t[0],m=as.definitions[u];if(!m)return i.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=w.filter(([D])=>!Array.isArray(D)||D.length===t.length-1);let I=null;for(const[D,B]of T){I=new he(i.registry,Hl,i.path,null,i.scope);const V=[];let q=!1;for(let te=1;te<t.length;te++){const le=t[te],fe=Array.isArray(D)?D[te-1]:D.type,Pe=I.parse(le,1+V.length,fe);if(!Pe){q=!0;break}V.push(Pe)}if(!q)if(Array.isArray(D)&&D.length!==V.length)I.error(`Expected ${D.length} arguments, but found ${V.length} instead.`);else{for(let te=0;te<V.length;te++){const le=Array.isArray(D)?D[te]:D.type,fe=V[te];I.concat(te+1).checkSubtype(le,fe.type)}if(I.errors.length===0)return new as(u,x,B,V)}}if(T.length===1)i.errors.push(...I.errors);else{const D=(T.length?T:w).map(([V])=>{return q=V,Array.isArray(q)?`(${q.map(Q).join(", ")})`:`(${Q(q.type)}...)`;var q}).join(" | "),B=[];for(let V=1;V<t.length;V++){const q=i.parse(t[V],1+B.length);if(!q)return null;B.push(Q(q.type))}i.error(`Expected arguments of type ${D}, but found (${B.join(", ")}) instead.`)}return null}static register(t,i){as.definitions=i;for(const u in i)t[u]=as}}function aa(r,[t,i,u,m]){t=t.evaluate(r),i=i.evaluate(r),u=u.evaluate(r);const x=m?m.evaluate(r):1,w=Ti(t,i,u,x);if(w)throw new jn(w);return new Dr(t/255,i/255,u/255,x,!1)}function Xc(r,t){return r in t}function Kc(r,t){const i=t[r];return i===void 0?null:i}function _l(r){return{type:r}}function Hl(r){if(r instanceof Ke)return Hl(r.boundExpression);if(r instanceof as&&r.name==="error"||r instanceof Ts||r instanceof is||r instanceof Mi)return!1;const t=r instanceof Ei||r instanceof Oi;let i=!0;return r.eachChild(u=>{i=t?i&&Hl(u):i&&u instanceof Zi}),!!i&&$l(r)&&yo(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function $l(r){if(r instanceof as&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof is||r instanceof Mi)return!1;let t=!0;return r.eachChild(i=>{t&&!$l(i)&&(t=!1)}),t}function Ya(r){if(r instanceof as&&r.name==="feature-state")return!1;let t=!0;return r.eachChild(i=>{t&&!Ya(i)&&(t=!1)}),t}function yo(r,t){if(r instanceof as&&t.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild(u=>{i&&!yo(u,t)&&(i=!1)}),i}function gc(r){return{result:"success",value:r}}function _o(r){return{result:"error",value:r}}function Wl(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Jc(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Ru(r){return!!r.expression&&r.expression.interpolated}function hn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Lu(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function nd(r){return r}function Qc(r,t){const i=t.type==="color",u=r.stops&&typeof r.stops[0][0]=="object",m=u||!(u||r.property!==void 0),x=r.type||(Ru(t)?"exponential":"interval");if(i||t.type==="padding"){const B=i?Dr.parse:ci.parse;(r=Cn({},r)).stops&&(r.stops=r.stops.map(V=>[V[0],B(V[1])])),r.default=B(r.default?r.default:t.default)}if(r.colorSpace&&(w=r.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var w;let T,I,D;if(x==="exponential")T=sd;else if(x==="interval")T=yc;else if(x==="categorical"){T=id,I=Object.create(null);for(const B of r.stops)I[B[0]]=B[1];D=typeof r.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);T=ad}if(u){const B={},V=[];for(let le=0;le<r.stops.length;le++){const fe=r.stops[le],Pe=fe[0].zoom;B[Pe]===void 0&&(B[Pe]={zoom:Pe,type:r.type,property:r.property,default:r.default,stops:[]},V.push(Pe)),B[Pe].stops.push([fe[0].value,fe[1]])}const q=[];for(const le of V)q.push([B[le].zoom,Qc(B[le],t)]);const te={name:"linear"};return{kind:"composite",interpolationType:te,interpolationFactor:Un.interpolationFactor.bind(void 0,te),zoomStops:q.map(le=>le[0]),evaluate:({zoom:le},fe)=>sd({stops:q,base:r.base},t,le).evaluate(le,fe)}}if(m){const B=x==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:Un.interpolationFactor.bind(void 0,B),zoomStops:r.stops.map(V=>V[0]),evaluate:({zoom:V})=>T(r,t,V,I,D)}}return{kind:"source",evaluate(B,V){const q=V&&V.properties?V.properties[r.property]:void 0;return q===void 0?Gl(r.default,t.default):T(r,t,q,I,D)}}}function Gl(r,t,i){return r!==void 0?r:t!==void 0?t:i!==void 0?i:void 0}function id(r,t,i,u,m){return Gl(typeof i===m?u[i]:void 0,r.default,t.default)}function yc(r,t,i){if(hn(i)!=="number")return Gl(r.default,t.default);const u=r.stops.length;if(u===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[u-1][0])return r.stops[u-1][1];const m=vn(r.stops.map(x=>x[0]),i);return r.stops[m][1]}function sd(r,t,i){const u=r.base!==void 0?r.base:1;if(hn(i)!=="number")return Gl(r.default,t.default);const m=r.stops.length;if(m===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[m-1][0])return r.stops[m-1][1];const x=vn(r.stops.map(B=>B[0]),i),w=function(B,V,q,te){const le=te-q,fe=B-q;return le===0?0:V===1?fe/le:(Math.pow(V,fe)-1)/(Math.pow(V,le)-1)}(i,u,r.stops[x][0],r.stops[x+1][0]),T=r.stops[x][1],I=r.stops[x+1][1],D=Gn[t.type]||nd;return typeof T.evaluate=="function"?{evaluate(...B){const V=T.evaluate.apply(void 0,B),q=I.evaluate.apply(void 0,B);if(V!==void 0&&q!==void 0)return D(V,q,w,r.colorSpace)}}:D(T,I,w,r.colorSpace)}function ad(r,t,i){switch(t.type){case"color":i=Dr.parse(i);break;case"formatted":i=ki.fromString(i.toString());break;case"resolvedImage":i=Jn.fromString(i.toString());break;case"padding":i=ci.parse(i);break;default:hn(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0)}return Gl(i,r.default,t.default)}as.register(sa,{error:[{kind:"error"},[Lr],(r,[t])=>{throw new jn(t.evaluate(r))}],typeof:[Lr,[Ar],(r,[t])=>Q(ln(t.evaluate(r)))],"to-rgba":[ee(Pt,4),[kn],(r,[t])=>{const[i,u,m,x]=t.evaluate(r).rgb;return[255*i,255*u,255*m,x]}],rgb:[kn,[Pt,Pt,Pt],aa],rgba:[kn,[Pt,Pt,Pt,Pt],aa],has:{type:kr,overloads:[[[Lr],(r,[t])=>Xc(t.evaluate(r),r.properties())],[[Lr,bi],(r,[t,i])=>Xc(t.evaluate(r),i.evaluate(r))]]},get:{type:Ar,overloads:[[[Lr],(r,[t])=>Kc(t.evaluate(r),r.properties())],[[Lr,bi],(r,[t,i])=>Kc(t.evaluate(r),i.evaluate(r))]]},"feature-state":[Ar,[Lr],(r,[t])=>Kc(t.evaluate(r),r.featureState||{})],properties:[bi,[],r=>r.properties()],"geometry-type":[Lr,[],r=>r.geometryType()],id:[Ar,[],r=>r.id()],zoom:[Pt,[],r=>r.globals.zoom],"heatmap-density":[Pt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Pt,[],r=>r.globals.lineProgress||0],accumulated:[Ar,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Pt,_l(Pt),(r,t)=>{let i=0;for(const u of t)i+=u.evaluate(r);return i}],"*":[Pt,_l(Pt),(r,t)=>{let i=1;for(const u of t)i*=u.evaluate(r);return i}],"-":{type:Pt,overloads:[[[Pt,Pt],(r,[t,i])=>t.evaluate(r)-i.evaluate(r)],[[Pt],(r,[t])=>-t.evaluate(r)]]},"/":[Pt,[Pt,Pt],(r,[t,i])=>t.evaluate(r)/i.evaluate(r)],"%":[Pt,[Pt,Pt],(r,[t,i])=>t.evaluate(r)%i.evaluate(r)],ln2:[Pt,[],()=>Math.LN2],pi:[Pt,[],()=>Math.PI],e:[Pt,[],()=>Math.E],"^":[Pt,[Pt,Pt],(r,[t,i])=>Math.pow(t.evaluate(r),i.evaluate(r))],sqrt:[Pt,[Pt],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[Pt,[Pt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[Pt,[Pt],(r,[t])=>Math.log(t.evaluate(r))],log2:[Pt,[Pt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[Pt,[Pt],(r,[t])=>Math.sin(t.evaluate(r))],cos:[Pt,[Pt],(r,[t])=>Math.cos(t.evaluate(r))],tan:[Pt,[Pt],(r,[t])=>Math.tan(t.evaluate(r))],asin:[Pt,[Pt],(r,[t])=>Math.asin(t.evaluate(r))],acos:[Pt,[Pt],(r,[t])=>Math.acos(t.evaluate(r))],atan:[Pt,[Pt],(r,[t])=>Math.atan(t.evaluate(r))],min:[Pt,_l(Pt),(r,t)=>Math.min(...t.map(i=>i.evaluate(r)))],max:[Pt,_l(Pt),(r,t)=>Math.max(...t.map(i=>i.evaluate(r)))],abs:[Pt,[Pt],(r,[t])=>Math.abs(t.evaluate(r))],round:[Pt,[Pt],(r,[t])=>{const i=t.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[Pt,[Pt],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[Pt,[Pt],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[kr,[Lr,Ar],(r,[t,i])=>r.properties()[t.value]===i.value],"filter-id-==":[kr,[Ar],(r,[t])=>r.id()===t.value],"filter-type-==":[kr,[Lr],(r,[t])=>r.geometryType()===t.value],"filter-<":[kr,[Lr,Ar],(r,[t,i])=>{const u=r.properties()[t.value],m=i.value;return typeof u==typeof m&&u<m}],"filter-id-<":[kr,[Ar],(r,[t])=>{const i=r.id(),u=t.value;return typeof i==typeof u&&i<u}],"filter->":[kr,[Lr,Ar],(r,[t,i])=>{const u=r.properties()[t.value],m=i.value;return typeof u==typeof m&&u>m}],"filter-id->":[kr,[Ar],(r,[t])=>{const i=r.id(),u=t.value;return typeof i==typeof u&&i>u}],"filter-<=":[kr,[Lr,Ar],(r,[t,i])=>{const u=r.properties()[t.value],m=i.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[kr,[Ar],(r,[t])=>{const i=r.id(),u=t.value;return typeof i==typeof u&&i<=u}],"filter->=":[kr,[Lr,Ar],(r,[t,i])=>{const u=r.properties()[t.value],m=i.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[kr,[Ar],(r,[t])=>{const i=r.id(),u=t.value;return typeof i==typeof u&&i>=u}],"filter-has":[kr,[Ar],(r,[t])=>t.value in r.properties()],"filter-has-id":[kr,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[kr,[ee(Lr)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[kr,[ee(Ar)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[kr,[Lr,ee(Ar)],(r,[t,i])=>i.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[kr,[Lr,ee(Ar)],(r,[t,i])=>function(u,m,x,w){for(;x<=w;){const T=x+w>>1;if(m[T]===u)return!0;m[T]>u?w=T-1:x=T+1}return!1}(r.properties()[t.value],i.value,0,i.value.length-1)],all:{type:kr,overloads:[[[kr,kr],(r,[t,i])=>t.evaluate(r)&&i.evaluate(r)],[_l(kr),(r,t)=>{for(const i of t)if(!i.evaluate(r))return!1;return!0}]]},any:{type:kr,overloads:[[[kr,kr],(r,[t,i])=>t.evaluate(r)||i.evaluate(r)],[_l(kr),(r,t)=>{for(const i of t)if(i.evaluate(r))return!0;return!1}]]},"!":[kr,[kr],(r,[t])=>!t.evaluate(r)],"is-supported-script":[kr,[Lr],(r,[t])=>{const i=r.globals&&r.globals.isSupportedScript;return!i||i(t.evaluate(r))}],upcase:[Lr,[Lr],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Lr,[Lr],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Lr,_l(Ar),(r,t)=>t.map(i=>ka(i.evaluate(r))).join("")],"resolved-locale":[Lr,[Nn],(r,[t])=>t.evaluate(r).resolvedLocale()]});class Is{constructor(t,i){var u;this.expression=t,this._warningHistory={},this._evaluator=new K,this._defaultValue=i?(u=i).type==="color"&&Lu(u.default)?new Dr(0,0,0,0):u.type==="color"?Dr.parse(u.default)||null:u.type==="padding"?ci.parse(u.default)||null:u.type==="variableAnchorOffsetCollection"?hi.parse(u.default)||null:u.default===void 0?null:u.default:null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(t,i,u,m,x,w){return this._evaluator.globals=t,this._evaluator.feature=i,this._evaluator.featureState=u,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(t,i,u,m,x,w){this._evaluator.globals=t,this._evaluator.feature=i||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new jn(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Wo(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in sa}function vl(r,t){const i=new he(sa,Hl,[],t?function(m){const x={color:kn,string:Lr,number:Pt,enum:Lr,boolean:kr,formatted:Ri,padding:si,resolvedImage:Hr,variableAnchorOffsetCollection:Ce};return m.type==="array"?ee(x[m.value]||Ar,m.length):x[m.type]}(t):void 0),u=i.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?gc(new Is(u,t)):_o(i.errors)}class xl{constructor(t,i){this.kind=t,this._styleExpression=i,this.isStateDependent=t!=="constant"&&!Ya(i.expression)}evaluateWithoutErrorHandling(t,i,u,m,x,w){return this._styleExpression.evaluateWithoutErrorHandling(t,i,u,m,x,w)}evaluate(t,i,u,m,x,w){return this._styleExpression.evaluate(t,i,u,m,x,w)}}class wl{constructor(t,i,u,m){this.kind=t,this.zoomStops=u,this._styleExpression=i,this.isStateDependent=t!=="camera"&&!Ya(i.expression),this.interpolationType=m}evaluateWithoutErrorHandling(t,i,u,m,x,w){return this._styleExpression.evaluateWithoutErrorHandling(t,i,u,m,x,w)}evaluate(t,i,u,m,x,w){return this._styleExpression.evaluate(t,i,u,m,x,w)}interpolationFactor(t,i,u){return this.interpolationType?Un.interpolationFactor(this.interpolationType,t,i,u):0}}function _c(r,t){const i=vl(r,t);if(i.result==="error")return i;const u=i.value.expression,m=$l(u);if(!m&&!Wl(t))return _o([new Sn("","data expressions not supported")]);const x=yo(u,["zoom"]);if(!x&&!Jc(t))return _o([new Sn("","zoom expressions not supported")]);const w=Ou(u);return w||x?w instanceof Sn?_o([w]):w instanceof Un&&!Ru(t)?_o([new Sn("",'"interpolate" expressions cannot be used with this property')]):gc(w?new wl(m?"camera":"composite",i.value,w.labels,w instanceof Un?w.interpolation:void 0):new xl(m?"constant":"source",i.value)):_o([new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Go{constructor(t,i){this._parameters=t,this._specification=i,Cn(this,Qc(this._parameters,this._specification))}static deserialize(t){return new Go(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ou(r){let t=null;if(r instanceof ke)t=Ou(r.result);else if(r instanceof Vs){for(const i of r.args)if(t=Ou(i),t)break}else(r instanceof Fi||r instanceof Un)&&r.input instanceof as&&r.input.name==="zoom"&&(t=r);return t instanceof Sn||r.eachChild(i=>{const u=Ou(i);u instanceof Sn?t=u:!t&&u?t=new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new Sn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function vc(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!vc(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const vo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fu(r){if(r==null)return{filter:()=>!0,needGeometry:!1};vc(r)||(r=Nu(r));const t=vl(r,vo);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return{filter:(i,u,m)=>t.value.evaluate(i,u,{},m),needGeometry:xc(r)}}function Bu(r,t){return r<t?-1:r>t?1:0}function xc(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let t=1;t<r.length;t++)if(xc(r[t]))return!0;return!1}function Nu(r){if(!r)return!0;const t=r[0];return r.length<=1?t!=="any":t==="=="?Zl(r[1],r[2],"=="):t==="!="?Yi(Zl(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Zl(r[1],r[2],t):t==="any"?(i=r.slice(1),["any"].concat(i.map(Nu))):t==="all"?["all"].concat(r.slice(1).map(Nu)):t==="none"?["all"].concat(r.slice(1).map(Nu).map(Yi)):t==="in"?Xa(r[1],r.slice(2)):t==="!in"?Yi(Xa(r[1],r.slice(2))):t==="has"?bl(r[1]):t!=="!has"||Yi(bl(r[1]));var i}function Zl(r,t,i){switch(r){case"$type":return[`filter-type-${i}`,t];case"$id":return[`filter-id-${i}`,t];default:return[`filter-${i}`,r,t]}}function Xa(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(i=>typeof i!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Bu)]]:["filter-in-small",r,["literal",t]]}}function bl(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Yi(r){return["!",r]}function Ka(r){const t=typeof r;if(t==="number"||t==="boolean"||t==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let m="[";for(const x of r)m+=`${Ka(x)},`;return`${m}]`}const i=Object.keys(r).sort();let u="{";for(let m=0;m<i.length;m++)u+=`${JSON.stringify(i[m])}:${Ka(r[i[m]])},`;return`${u}}`}function eh(r){let t="";for(const i of Ae)t+=`/${Ka(r[i])}`;return t}function th(r){const t=r.value;return t?[new vt(r.key,t,"constants have been deprecated as of v8")]:[]}function oi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function oa(r){if(Array.isArray(r))return r.map(oa);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const i in r)t[i]=oa(r[i]);return t}return oi(r)}function Ps(r){const t=r.key,i=r.value,u=r.valueSpec||{},m=r.objectElementValidators||{},x=r.style,w=r.styleSpec,T=r.validateSpec;let I=[];const D=hn(i);if(D!=="object")return[new vt(t,i,`object expected, ${D} found`)];for(const B in i){const V=B.split(".")[0],q=u[V]||u["*"];let te;if(m[V])te=m[V];else if(u[V])te=T;else if(m["*"])te=m["*"];else{if(!u["*"]){I.push(new vt(t,i[B],`unknown property "${B}"`));continue}te=T}I=I.concat(te({key:(t&&`${t}.`)+B,value:i[B],valueSpec:q,style:x,styleSpec:w,object:i,objectKey:B,validateSpec:T},i))}for(const B in u)m[B]||u[B].required&&u[B].default===void 0&&i[B]===void 0&&I.push(new vt(t,i,`missing required property "${B}"`));return I}function ql(r){const t=r.value,i=r.valueSpec,u=r.style,m=r.styleSpec,x=r.key,w=r.arrayElementValidator||r.validateSpec;if(hn(t)!=="array")return[new vt(x,t,`array expected, ${hn(t)} found`)];if(i.length&&t.length!==i.length)return[new vt(x,t,`array length ${i.length} expected, length ${t.length} found`)];if(i["min-length"]&&t.length<i["min-length"])return[new vt(x,t,`array length at least ${i["min-length"]} expected, length ${t.length} found`)];let T={type:i.value,values:i.values};m.$version<7&&(T.function=i.function),hn(i.value)==="object"&&(T=i.value);let I=[];for(let D=0;D<t.length;D++)I=I.concat(w({array:t,arrayIndex:D,value:t[D],valueSpec:T,validateSpec:r.validateSpec,style:u,styleSpec:m,key:`${x}[${D}]`}));return I}function Ja(r){const t=r.key,i=r.value,u=r.valueSpec;let m=hn(i);return m==="number"&&i!=i&&(m="NaN"),m!=="number"?[new vt(t,i,`number expected, ${m} found`)]:"minimum"in u&&i<u.minimum?[new vt(t,i,`${i} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&i>u.maximum?[new vt(t,i,`${i} is greater than the maximum value ${u.maximum}`)]:[]}function Yl(r){const t=r.valueSpec,i=oi(r.value.type);let u,m,x,w={};const T=i!=="categorical"&&r.value.property===void 0,I=!T,D=hn(r.value.stops)==="array"&&hn(r.value.stops[0])==="array"&&hn(r.value.stops[0][0])==="object",B=Ps({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(te){if(i==="identity")return[new vt(te.key,te.value,'identity function may not have a "stops" property')];let le=[];const fe=te.value;return le=le.concat(ql({key:te.key,value:fe,valueSpec:te.valueSpec,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:V})),hn(fe)==="array"&&fe.length===0&&le.push(new vt(te.key,fe,"array must have at least one stop")),le},default:function(te){return te.validateSpec({key:te.key,value:te.value,valueSpec:t,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec})}}});return i==="identity"&&T&&B.push(new vt(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||B.push(new vt(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!Ru(r.valueSpec)&&B.push(new vt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(I&&!Wl(r.valueSpec)?B.push(new vt(r.key,r.value,"property functions not supported")):T&&!Jc(r.valueSpec)&&B.push(new vt(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!D||r.value.property!==void 0||B.push(new vt(r.key,r.value,'"property" property is required')),B;function V(te){let le=[];const fe=te.value,Pe=te.key;if(hn(fe)!=="array")return[new vt(Pe,fe,`array expected, ${hn(fe)} found`)];if(fe.length!==2)return[new vt(Pe,fe,`array length 2 expected, length ${fe.length} found`)];if(D){if(hn(fe[0])!=="object")return[new vt(Pe,fe,`object expected, ${hn(fe[0])} found`)];if(fe[0].zoom===void 0)return[new vt(Pe,fe,"object stop key must have zoom")];if(fe[0].value===void 0)return[new vt(Pe,fe,"object stop key must have value")];if(x&&x>oi(fe[0].zoom))return[new vt(Pe,fe[0].zoom,"stop zoom values must appear in ascending order")];oi(fe[0].zoom)!==x&&(x=oi(fe[0].zoom),m=void 0,w={}),le=le.concat(Ps({key:`${Pe}[0]`,value:fe[0],valueSpec:{zoom:{}},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:Ja,value:q}}))}else le=le.concat(q({key:`${Pe}[0]`,value:fe[0],validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec},fe));return Wo(oa(fe[1]))?le.concat([new vt(`${Pe}[1]`,fe[1],"expressions are not allowed in function stops.")]):le.concat(te.validateSpec({key:`${Pe}[1]`,value:fe[1],valueSpec:t,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec}))}function q(te,le){const fe=hn(te.value),Pe=oi(te.value),Re=te.value!==null?te.value:le;if(u){if(fe!==u)return[new vt(te.key,Re,`${fe} stop domain type must match previous stop domain type ${u}`)]}else u=fe;if(fe!=="number"&&fe!=="string"&&fe!=="boolean")return[new vt(te.key,Re,"stop domain value must be a number, string, or boolean")];if(fe!=="number"&&i!=="categorical"){let rt=`number expected, ${fe} found`;return Wl(t)&&i===void 0&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(te.key,Re,rt)]}return i!=="categorical"||fe!=="number"||isFinite(Pe)&&Math.floor(Pe)===Pe?i!=="categorical"&&fe==="number"&&m!==void 0&&Pe<m?[new vt(te.key,Re,"stop domain values must appear in ascending order")]:(m=Pe,i==="categorical"&&Pe in w?[new vt(te.key,Re,"stop domain values must be unique")]:(w[Pe]=!0,[])):[new vt(te.key,Re,`integer expected, found ${Pe}`)]}}function Zo(r){const t=(r.expressionContext==="property"?_c:vl)(oa(r.value),r.valueSpec);if(t.result==="error")return t.value.map(u=>new vt(`${r.key}${u.key}`,r.value,u.message));const i=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new vt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ya(i))return[new vt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ya(i))return[new vt(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!yo(i,["zoom","feature-state"]))return[new vt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!$l(i))return[new vt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xo(r){const t=r.key,i=r.value,u=r.valueSpec,m=[];return Array.isArray(u.values)?u.values.indexOf(oi(i))===-1&&m.push(new vt(t,i,`expected one of [${u.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(u.values).indexOf(oi(i))===-1&&m.push(new vt(t,i,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(i)} found`)),m}function rh(r){return vc(oa(r.value))?Zo(Cn({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qo(r)}function qo(r){const t=r.value,i=r.key;if(hn(t)!=="array")return[new vt(i,t,`array expected, ${hn(t)} found`)];const u=r.styleSpec;let m,x=[];if(t.length<1)return[new vt(i,t,"filter array must have at least 1 element")];switch(x=x.concat(xo({key:`${i}[0]`,value:t[0],valueSpec:u.filter_operator,style:r.style,styleSpec:r.styleSpec})),oi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&oi(t[1])==="$type"&&x.push(new vt(i,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&x.push(new vt(i,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(m=hn(t[1]),m!=="string"&&x.push(new vt(`${i}[1]`,t[1],`string expected, ${m} found`)));for(let w=2;w<t.length;w++)m=hn(t[w]),oi(t[1])==="$type"?x=x.concat(xo({key:`${i}[${w}]`,value:t[w],valueSpec:u.geometry_type,style:r.style,styleSpec:r.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&x.push(new vt(`${i}[${w}]`,t[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<t.length;w++)x=x.concat(qo({key:`${i}[${w}]`,value:t[w],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":m=hn(t[1]),t.length!==2?x.push(new vt(i,t,`filter array for "${t[0]}" operator must have 2 elements`)):m!=="string"&&x.push(new vt(`${i}[1]`,t[1],`string expected, ${m} found`))}return x}function nh(r,t){const i=r.key,u=r.validateSpec,m=r.style,x=r.styleSpec,w=r.value,T=r.objectKey,I=x[`${t}_${r.layerType}`];if(!I)return[];const D=T.match(/^(.*)-transition$/);if(t==="paint"&&D&&I[D[1]]&&I[D[1]].transition)return u({key:i,value:w,valueSpec:x.transition,style:m,styleSpec:x});const B=r.valueSpec||I[T];if(!B)return[new vt(i,w,`unknown property "${T}"`)];let V;if(hn(w)==="string"&&Wl(B)&&!B.tokens&&(V=/^{([^}]+)}$/.exec(w)))return[new vt(i,w,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const q=[];return r.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&q.push(new vt(i,w,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Lu(oa(w))&&oi(w.type)==="identity"&&q.push(new vt(i,w,'"text-font" does not support identity functions'))),q.concat(u({key:r.key,value:w,valueSpec:B,style:m,styleSpec:x,expressionContext:"property",propertyType:t,propertyKey:T}))}function ju(r){return nh(r,"paint")}function wc(r){return nh(r,"layout")}function Vn(r){let t=[];const i=r.value,u=r.key,m=r.style,x=r.styleSpec;i.type||i.ref||t.push(new vt(u,i,'either "type" or "ref" is required'));let w=oi(i.type);const T=oi(i.ref);if(i.id){const I=oi(i.id);for(let D=0;D<r.arrayIndex;D++){const B=m.layers[D];oi(B.id)===I&&t.push(new vt(u,i.id,`duplicate layer id "${i.id}", previously used at line ${B.id.__line__}`))}}if("ref"in i){let I;["type","source","source-layer","filter","layout"].forEach(D=>{D in i&&t.push(new vt(u,i[D],`"${D}" is prohibited for ref layers`))}),m.layers.forEach(D=>{oi(D.id)===T&&(I=D)}),I?I.ref?t.push(new vt(u,i.ref,"ref cannot reference another ref layer")):w=oi(I.type):t.push(new vt(u,i.ref,`ref layer "${T}" not found`))}else if(w!=="background")if(i.source){const I=m.sources&&m.sources[i.source],D=I&&oi(I.type);I?D==="vector"&&w==="raster"?t.push(new vt(u,i.source,`layer "${i.id}" requires a raster source`)):D!=="raster-dem"&&w==="hillshade"?t.push(new vt(u,i.source,`layer "${i.id}" requires a raster-dem source`)):D==="raster"&&w!=="raster"?t.push(new vt(u,i.source,`layer "${i.id}" requires a vector source`)):D!=="vector"||i["source-layer"]?D==="raster-dem"&&w!=="hillshade"?t.push(new vt(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!i.paint||!i.paint["line-gradient"]||D==="geojson"&&I.lineMetrics||t.push(new vt(u,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new vt(u,i,`layer "${i.id}" must specify a "source-layer"`)):t.push(new vt(u,i.source,`source "${i.source}" not found`))}else t.push(new vt(u,i,'missing required property "source"'));return t=t.concat(Ps({key:u,value:i,valueSpec:x.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${u}.type`,value:i.type,valueSpec:x.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:i,objectKey:"type"}),filter:rh,layout:I=>Ps({layer:i,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":D=>wc(Cn({layerType:w},D))}}),paint:I=>Ps({layer:i,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":D=>ju(Cn({layerType:w},D))}})}})),t}function wo(r){const t=r.value,i=r.key,u=hn(t);return u!=="string"?[new vt(i,t,`string expected, ${u} found`)]:[]}const Sl={promoteId:function({key:r,value:t}){if(hn(t)==="string")return wo({key:r,value:t});{const i=[];for(const u in t)i.push(...wo({key:`${r}.${u}`,value:t[u]}));return i}}};function bo(r){const t=r.value,i=r.key,u=r.styleSpec,m=r.style,x=r.validateSpec;if(!t.type)return[new vt(i,t,'"type" is required')];const w=oi(t.type);let T;switch(w){case"vector":case"raster":return T=Ps({key:i,value:t,valueSpec:u[`source_${w.replace("-","_")}`],style:r.style,styleSpec:u,objectElementValidators:Sl,validateSpec:x}),T;case"raster-dem":return T=function(I){var D;const B=(D=I.sourceName)!==null&&D!==void 0?D:"",V=I.value,q=I.styleSpec,te=q.source_raster_dem,le=I.style;let fe=[];const Pe=hn(V);if(V===void 0)return fe;if(Pe!=="object")return fe.push(new vt("source_raster_dem",V,`object expected, ${Pe} found`)),fe;const Re=oi(V.encoding)==="custom",rt=["redFactor","greenFactor","blueFactor","baseShift"],Ue=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Qe in V)!Re&&rt.includes(Qe)?fe.push(new vt(Qe,V[Qe],`In "${B}": "${Qe}" is only valid when "encoding" is set to "custom". ${Ue} encoding found`)):te[Qe]?fe=fe.concat(I.validateSpec({key:Qe,value:V[Qe],valueSpec:te[Qe],validateSpec:I.validateSpec,style:le,styleSpec:q})):fe.push(new vt(Qe,V[Qe],`unknown property "${Qe}"`));return fe}({sourceName:i,value:t,style:r.style,styleSpec:u,validateSpec:x}),T;case"geojson":if(T=Ps({key:i,value:t,valueSpec:u.source_geojson,style:m,styleSpec:u,validateSpec:x,objectElementValidators:Sl}),t.cluster)for(const I in t.clusterProperties){const[D,B]=t.clusterProperties[I],V=typeof D=="string"?[D,["accumulated"],["get",I]]:D;T.push(...Zo({key:`${i}.${I}.map`,value:B,expressionContext:"cluster-map"})),T.push(...Zo({key:`${i}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return T;case"video":return Ps({key:i,value:t,valueSpec:u.source_video,style:m,validateSpec:x,styleSpec:u});case"image":return Ps({key:i,value:t,valueSpec:u.source_image,style:m,validateSpec:x,styleSpec:u});case"canvas":return[new vt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xo({key:`${i}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function bc(r){const t=r.value,i=r.styleSpec,u=i.light,m=r.style;let x=[];const w=hn(t);if(t===void 0)return x;if(w!=="object")return x=x.concat([new vt("light",t,`object expected, ${w} found`)]),x;for(const T in t){const I=T.match(/^(.*)-transition$/);x=x.concat(I&&u[I[1]]&&u[I[1]].transition?r.validateSpec({key:T,value:t[T],valueSpec:i.transition,validateSpec:r.validateSpec,style:m,styleSpec:i}):u[T]?r.validateSpec({key:T,value:t[T],valueSpec:u[T],validateSpec:r.validateSpec,style:m,styleSpec:i}):[new vt(T,t[T],`unknown property "${T}"`)])}return x}function Uu(r){const t=r.value,i=r.styleSpec,u=i.sky,m=r.style,x=hn(t);if(t===void 0)return[];if(x!=="object")return[new vt("sky",t,`object expected, ${x} found`)];let w=[];for(const T in t)w=w.concat(u[T]?r.validateSpec({key:T,value:t[T],valueSpec:u[T],style:m,styleSpec:i}):[new vt(T,t[T],`unknown property "${T}"`)]);return w}function kl(r){const t=r.value,i=r.styleSpec,u=i.terrain,m=r.style;let x=[];const w=hn(t);if(t===void 0)return x;if(w!=="object")return x=x.concat([new vt("terrain",t,`object expected, ${w} found`)]),x;for(const T in t)x=x.concat(u[T]?r.validateSpec({key:T,value:t[T],valueSpec:u[T],validateSpec:r.validateSpec,style:m,styleSpec:i}):[new vt(T,t[T],`unknown property "${T}"`)]);return x}function Xl(r){let t=[];const i=r.value,u=r.key;if(Array.isArray(i)){const m=[],x=[];for(const w in i)i[w].id&&m.includes(i[w].id)&&t.push(new vt(u,i,`all the sprites' ids must be unique, but ${i[w].id} is duplicated`)),m.push(i[w].id),i[w].url&&x.includes(i[w].url)&&t.push(new vt(u,i,`all the sprites' URLs must be unique, but ${i[w].url} is duplicated`)),x.push(i[w].url),t=t.concat(Ps({key:`${u}[${w}]`,value:i[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return t}return wo({key:u,value:i})}const So={"*":()=>[],array:ql,boolean:function(r){const t=r.value,i=r.key,u=hn(t);return u!=="boolean"?[new vt(i,t,`boolean expected, ${u} found`)]:[]},number:Ja,color:function(r){const t=r.key,i=r.value,u=hn(i);return u!=="string"?[new vt(t,i,`color expected, ${u} found`)]:Dr.parse(String(i))?[]:[new vt(t,i,`color expected, "${i}" found`)]},constants:th,enum:xo,filter:rh,function:Yl,layer:Vn,object:Ps,source:bo,light:bc,sky:Uu,terrain:kl,projection:function(r){const t=r.value,i=r.styleSpec,u=i.projection,m=r.style,x=hn(t);if(t===void 0)return[];if(x!=="object")return[new vt("projection",t,`object expected, ${x} found`)];let w=[];for(const T in t)w=w.concat(u[T]?r.validateSpec({key:T,value:t[T],valueSpec:u[T],style:m,styleSpec:i}):[new vt(T,t[T],`unknown property "${T}"`)]);return w},string:wo,formatted:function(r){return wo(r).length===0?[]:Zo(r)},resolvedImage:function(r){return wo(r).length===0?[]:Zo(r)},padding:function(r){const t=r.key,i=r.value;if(hn(i)==="array"){if(i.length<1||i.length>4)return[new vt(t,i,`padding requires 1 to 4 values; ${i.length} values found`)];const u={type:"number"};let m=[];for(let x=0;x<i.length;x++)m=m.concat(r.validateSpec({key:`${t}[${x}]`,value:i[x],validateSpec:r.validateSpec,valueSpec:u}));return m}return Ja({key:t,value:i,valueSpec:{}})},variableAnchorOffsetCollection:function(r){const t=r.key,i=r.value,u=hn(i),m=r.styleSpec;if(u!=="array"||i.length<1||i.length%2!=0)return[new vt(t,i,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<i.length;w+=2)x=x.concat(xo({key:`${t}[${w}]`,value:i[w],valueSpec:m.layout_symbol["text-anchor"]})),x=x.concat(ql({key:`${t}[${w+1}]`,value:i[w+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:m}));return x},sprite:Xl};function Kl(r){const t=r.value,i=r.valueSpec,u=r.styleSpec;return r.validateSpec=Kl,i.expression&&Lu(oi(t))?Yl(r):i.expression&&Wo(oa(t))?Zo(r):i.type&&So[i.type]?So[i.type](r):Ps(Cn({},r,{valueSpec:i.type?u[i.type]:i}))}function od(r){const t=r.value,i=r.key,u=wo(r);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new vt(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new vt(i,t,'"glyphs" url must include a "{range}" token'))),u}function la(r,t=ye){let i=[];return i=i.concat(Kl({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,validateSpec:Kl,objectElementValidators:{glyphs:od,"*":()=>[]}})),r.constants&&(i=i.concat(th({key:"constants",value:r.constants}))),Jl(i)}function Ia(r){return function(t){return r({...t,validateSpec:Kl})}}function Jl(r){return[].concat(r).sort((t,i)=>t.line-i.line)}function Ms(r){return function(...t){return Jl(r.apply(this,t))}}la.source=Ms(Ia(bo)),la.sprite=Ms(Ia(Xl)),la.glyphs=Ms(Ia(od)),la.light=Ms(Ia(bc)),la.sky=Ms(Ia(Uu)),la.terrain=Ms(Ia(kl)),la.layer=Ms(Ia(Vn)),la.filter=Ms(Ia(rh)),la.paintProperty=Ms(Ia(ju)),la.layoutProperty=Ms(Ia(wc));const ko=la,ih=ko.light,sh=ko.sky,Sc=ko.paintProperty,ld=ko.layoutProperty;function kc(r,t){let i=!1;if(t&&t.length)for(const u of t)r.fire(new Y(new Error(u.message))),i=!0;return i}class Ql{constructor(t,i,u){const m=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const w=new Int32Array(this.arrayBuffer);t=w[0],this.d=(i=w[1])+2*(u=w[2]);for(let I=0;I<this.d*this.d;I++){const D=w[3+I],B=w[3+I+1];m.push(D===B?null:w.subarray(D,B))}const T=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],T),this.bboxes=w.subarray(T),this.insert=this._insertReadonly}else{this.d=i+2*u;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=t,this.padding=u,this.scale=i/t,this.uid=0;const x=u/i*t;this.min=-x,this.max=t+x}insert(t,i,u,m,x){this._forEachCell(i,u,m,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,i,u,m,x,w){this.cells[x].push(w)}query(t,i,u,m,x){const w=this.min,T=this.max;if(t<=w&&i<=w&&T<=u&&T<=m&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(t,i,u,m,this._queryCell,I,{},x),I}}_queryCell(t,i,u,m,x,w,T,I){const D=this.cells[x];if(D!==null){const B=this.keys,V=this.bboxes;for(let q=0;q<D.length;q++){const te=D[q];if(T[te]===void 0){const le=4*te;(I?I(V[le+0],V[le+1],V[le+2],V[le+3]):t<=V[le+2]&&i<=V[le+3]&&u>=V[le+0]&&m>=V[le+1])?(T[te]=!0,w.push(B[te])):T[te]=!1}}}}_forEachCell(t,i,u,m,x,w,T,I){const D=this._convertToCellCoord(t),B=this._convertToCellCoord(i),V=this._convertToCellCoord(u),q=this._convertToCellCoord(m);for(let te=D;te<=V;te++)for(let le=B;le<=q;le++){const fe=this.d*le+te;if((!I||I(this._convertFromCellCoord(te),this._convertFromCellCoord(le),this._convertFromCellCoord(te+1),this._convertFromCellCoord(le+1)))&&x.call(this,t,i,u,m,fe,w,T,I))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,i=3+this.cells.length+1+1;let u=0;for(let w=0;w<this.cells.length;w++)u+=this.cells[w].length;const m=new Int32Array(i+u+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let x=i;for(let w=0;w<t.length;w++){const T=t[w];m[3+w]=x,m.set(T,x),x+=T.length}return m[3+t.length]=x,m.set(this.keys,x),x+=this.keys.length,m[3+t.length+1]=x,m.set(this.bboxes,x),x+=this.bboxes.length,m.buffer}static serialize(t,i){const u=t.toArrayBuffer();return i&&i.push(u),{buffer:u}}static deserialize(t){return new Ql(t.buffer)}}const ua={};function ar(r,t,i={}){if(ua[r])throw new Error(`${r} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),ua[r]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}ar("Object",Object),ar("TransferableGridIndex",Ql),ar("Color",Dr),ar("Error",Error),ar("AJAXError",pr),ar("ResolvedImage",Jn),ar("StylePropertyFunction",Go),ar("StyleExpression",Is,{omit:["_evaluator"]}),ar("ZoomDependentExpression",wl),ar("ZoomConstantExpression",xl),ar("CompoundExpression",as,{omit:["_evaluate"]});for(const r in sa)sa[r]._classRegistryKey||ar(`Expression_${r}`,sa[r]);function Pa(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Tc(r){return r.$name||r.constructor._classRegistryKey}function Tl(r){return!function(t){if(t===null||typeof t!="object")return!1;const i=Tc(t);return!(!i||i==="Object")}(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||Pa(r)||Me(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function ys(r,t){if(Tl(r))return(Pa(r)||Me(r))&&t&&t.push(r),ArrayBuffer.isView(r)&&t&&t.push(r.buffer),r instanceof ImageData&&t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const x=[];for(const w of r)x.push(ys(w,t));return x}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);const i=Tc(r);if(!i)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!ua[i])throw new Error(`${i} is not registered.`);const{klass:u}=ua[i],m=u.serialize?u.serialize(r,t):{};if(u.serialize){if(t&&m===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in r){if(!r.hasOwnProperty(x)||ua[i].omit.indexOf(x)>=0)continue;const w=r[x];m[x]=ua[i].shallow.indexOf(x)>=0?w:ys(w,t)}r instanceof Error&&(m.message=r.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(m.$name=i),m}function Qa(r){if(Tl(r))return r;if(Array.isArray(r))return r.map(Qa);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);const t=Tc(r)||"Object";if(!ua[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:i}=ua[t];if(!i)throw new Error(`can't deserialize unregistered class ${t}`);if(i.deserialize)return i.deserialize(r);const u=Object.create(i.prototype);for(const m of Object.keys(r)){if(m==="$name")continue;const x=r[m];u[m]=ua[t].shallow.indexOf(m)>=0?x:Qa(x)}return u}class Ma{constructor(){this.first=!0}update(t,i){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=i),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const nn={"Latin-1 Supplement":r=>r>=128&&r<=255,"Hangul Jamo":r=>r>=4352&&r<=4607,Khmer:r=>r>=6016&&r<=6143,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Katakana:r=>r>=12448&&r<=12543,Kanbun:r=>r>=12688&&r<=12703,"CJK Strokes":r=>r>=12736&&r<=12783,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"Private Use Area":r=>r>=57344&&r<=63743,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function ah(r){for(const t of r)if($u(t.charCodeAt(0)))return!0;return!1}function hf(r){for(const t of r)if(!Aa(t.charCodeAt(0)))return!1;return!0}function To(r){const t=r.map(i=>{try{return new RegExp(`\\p{sc=${i}}`,"u").source}catch{return null}}).filter(i=>i);return new RegExp(t.join("|"),"u")}const Vu=To(["Arab","Dupl","Mong","Ougr","Syrc"]);function Aa(r){return!Vu.test(String.fromCodePoint(r))}const Hu=To(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $u(r){return!(r!==746&&r!==747&&(r<4352||!(nn["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||nn["CJK Compatibility"](r)||nn["CJK Strokes"](r)||!(!nn["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||nn["Enclosed CJK Letters and Months"](r)||nn["Ideographic Description Characters"](r)||nn.Kanbun(r)||nn.Katakana(r)&&r!==12540||!(!nn["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!nn["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||nn["Vertical Forms"](r)||nn["Yijing Hexagram Symbols"](r)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(r))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(r))||Hu.test(String.fromCodePoint(r)))))}function El(r){return!($u(r)||function(t){return!!(nn["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||nn["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||nn["Letterlike Symbols"](t)||nn["Number Forms"](t)||nn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||nn["Control Pictures"](t)&&t!==9251||nn["Optical Character Recognition"](t)||nn["Enclosed Alphanumerics"](t)||nn["Geometric Shapes"](t)||nn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||nn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||nn["CJK Symbols and Punctuation"](t)||nn.Katakana(t)||nn["Private Use Area"](t)||nn["CJK Compatibility Forms"](t)||nn["Small Form Variants"](t)||nn["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(r))}const Yo=To(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Hn(r){return Yo.test(String.fromCodePoint(r))}function Zn(r,t){return!(!t&&Hn(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||nn.Khmer(r))}function Xo(r){for(const t of r)if(Hn(t.charCodeAt(0)))return!0;return!1}const zn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class an{constructor(t,i){this.zoom=t,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ma,this.transition={})}isSupportedScript(t){return function(i,u){for(const m of i)if(!Zn(m.charCodeAt(0),u))return!1;return!0}(t,zn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,i=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*i}}}class ca{constructor(t,i){this.property=t,this.value=i,this.expression=function(u,m){if(Lu(u))return new Go(u,m);if(Wo(u)){const x=_c(u,m);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=u;return m.type==="color"&&typeof u=="string"?x=Dr.parse(u):m.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(u)&&(x=hi.parse(u)):x=ci.parse(u),{kind:"constant",evaluate:()=>x}}}(i===void 0?t.specification.default:i,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,i,u){return this.property.possiblyEvaluate(this,t,i,u)}}class Eo{constructor(t){this.property=t,this.value=new ca(t,void 0)}transitioned(t,i){return new Wu(this.property,this.value,i,je({},t.transition,this.transition),t.now)}untransitioned(){return new Wu(this.property,this.value,null,{},0)}}class Xi{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return xt(this._values[t].value.value)}setValue(t,i){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Eo(this._values[t].property)),this._values[t].value=new ca(this._values[t].property,i===null?void 0:xt(i))}getTransition(t){return xt(this._values[t].transition)}setTransition(t,i){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Eo(this._values[t].property)),this._values[t].transition=xt(i)||void 0}serialize(){const t={};for(const i of Object.keys(this._values)){const u=this.getValue(i);u!==void 0&&(t[i]=u);const m=this.getTransition(i);m!==void 0&&(t[`${i}-transition`]=m)}return t}transitioned(t,i){const u=new eu(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(t,i._values[m]);return u}untransitioned(){const t=new eu(this._properties);for(const i of Object.keys(this._values))t._values[i]=this._values[i].untransitioned();return t}}class Wu{constructor(t,i,u,m,x){this.property=t,this.value=i,this.begin=x+m.delay||0,this.end=this.begin+m.duration||0,t.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(t,i,u){const m=t.now||0,x=this.value.possiblyEvaluate(t,i,u),w=this.prior;if(w){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return w.possiblyEvaluate(t,i,u);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(t,i,u),x,function(I){if(I<=0)return 0;if(I>=1)return 1;const D=I*I,B=D*I;return 4*(I<.5?B:3*(I-D)+B-.75)}(T))}}return x}}class eu{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,i,u){const m=new ru(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(t,i,u);return m}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class tu{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return xt(this._values[t].value)}setValue(t,i){this._values[t]=new ca(this._values[t].property,i===null?void 0:xt(i))}serialize(){const t={};for(const i of Object.keys(this._values)){const u=this.getValue(i);u!==void 0&&(t[i]=u)}return t}possiblyEvaluate(t,i,u){const m=new ru(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(t,i,u);return m}}class $s{constructor(t,i,u){this.property=t,this.value=i,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,i,u,m){return this.property.evaluate(this.value,this.parameters,t,i,u,m)}}class ru{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class or{constructor(t){this.specification=t}possiblyEvaluate(t,i){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(i)}interpolate(t,i,u){const m=Gn[this.specification.type];return m?m(t,i,u):t}}class Er{constructor(t,i){this.specification=t,this.overrides=i}possiblyEvaluate(t,i,u,m){return new $s(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(i,null,{},u,m)}:t.expression,i)}interpolate(t,i,u){if(t.value.kind!=="constant"||i.value.kind!=="constant")return t;if(t.value.value===void 0||i.value.value===void 0)return new $s(this,{kind:"constant",value:void 0},t.parameters);const m=Gn[this.specification.type];if(m){const x=m(t.value.value,i.value.value,u);return new $s(this,{kind:"constant",value:x},t.parameters)}return t}evaluate(t,i,u,m,x,w){return t.kind==="constant"?t.value:t.evaluate(i,u,m,x,w)}}class nu extends Er{possiblyEvaluate(t,i,u,m){if(t.value===void 0)return new $s(this,{kind:"constant",value:void 0},i);if(t.expression.kind==="constant"){const x=t.expression.evaluate(i,null,{},u,m),w=t.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(w,w,w,i);return new $s(this,{kind:"constant",value:T},i)}if(t.expression.kind==="camera"){const x=this._calculate(t.expression.evaluate({zoom:i.zoom-1}),t.expression.evaluate({zoom:i.zoom}),t.expression.evaluate({zoom:i.zoom+1}),i);return new $s(this,{kind:"constant",value:x},i)}return new $s(this,t.expression,i)}evaluate(t,i,u,m,x,w){if(t.kind==="source"){const T=t.evaluate(i,u,m,x,w);return this._calculate(T,T,T,i)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(i.zoom)-1},u,m),t.evaluate({zoom:Math.floor(i.zoom)},u,m),t.evaluate({zoom:Math.floor(i.zoom)+1},u,m),i):t.value}_calculate(t,i,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:t,to:i}:{from:u,to:i}}interpolate(t){return t}}class Gu{constructor(t){this.specification=t}possiblyEvaluate(t,i,u,m){if(t.value!==void 0){if(t.expression.kind==="constant"){const x=t.expression.evaluate(i,null,{},u,m);return this._calculate(x,x,x,i)}return this._calculate(t.expression.evaluate(new an(Math.floor(i.zoom-1),i)),t.expression.evaluate(new an(Math.floor(i.zoom),i)),t.expression.evaluate(new an(Math.floor(i.zoom+1),i)),i)}}_calculate(t,i,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:t,to:i}:{from:u,to:i}}interpolate(t){return t}}class oh{constructor(t){this.specification=t}possiblyEvaluate(t,i,u,m){return!!t.expression.evaluate(i,null,{},u,m)}interpolate(){return!1}}class v{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const i in t){const u=t[i];u.specification.overridable&&this.overridableProperties.push(i);const m=this.defaultPropertyValues[i]=new ca(u,void 0),x=this.defaultTransitionablePropertyValues[i]=new Eo(u);this.defaultTransitioningPropertyValues[i]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=m.possiblyEvaluate({})}}}ar("DataDrivenProperty",Er),ar("DataConstantProperty",or),ar("CrossFadedDataDrivenProperty",nu),ar("CrossFadedProperty",Gu),ar("ColorRampProperty",oh);const e="-transition";class a extends ft{constructor(t,i){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),i.layout&&(this._unevaluatedLayout=new tu(i.layout)),i.paint)){this._transitionablePaint=new Xi(i.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ru(i.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,i,u={}){i!=null&&this._validate(ld,`layers.${this.id}.layout.${t}`,t,i,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,i):this.visibility=i)}getPaintProperty(t){return t.endsWith(e)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,i,u={}){if(i!=null&&this._validate(Sc,`layers.${this.id}.paint.${t}`,t,i,u))return!1;if(t.endsWith(e))return this._transitionablePaint.setTransition(t.slice(0,-11),i||void 0),!1;{const m=this._transitionablePaint._values[t],x=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(t,i),this._handleSpecialPaintPropertyUpdate(t);const I=this._transitionablePaint._values[t].value;return I.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(t,T,I)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,i,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,i){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,i)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Mt(t,(i,u)=>!(i===void 0||u==="layout"&&!Object.keys(i).length||u==="paint"&&!Object.keys(i).length))}_validate(t,i,u,m,x={}){return(!x||x.validate!==!1)&&kc(this,t.call(ko,{key:i,layerType:this.type,objectKey:u,value:m,styleSpec:ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const i=this.paint.get(t);if(i instanceof $s&&Wl(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}}const d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class p{constructor(t,i){this._structArray=t,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,i){return t._trim(),i&&(t.isTransferred=!0,i.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const i=Object.create(this.prototype);return i.arrayBuffer=t.arrayBuffer,i.length=t.length,i.capacity=t.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function E(r,t=1){let i=0,u=0;return{members:r.map(m=>{const x=d[m.type].BYTES_PER_ELEMENT,w=i=P(i,Math.max(t,x)),T=m.components||1;return u=Math.max(u,x),i+=x*T,{name:m.name,type:m.type,components:T,offset:w}}),size:P(i,Math.max(u,t)),alignment:t}}function P(r,t){return Math.ceil(r/t)*t}class A extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i){const u=this.length;return this.resize(u+1),this.emplace(u,t,i)}emplace(t,i,u){const m=2*t;return this.int16[m+0]=i,this.int16[m+1]=u,t}}A.prototype.bytesPerElement=4,ar("StructArrayLayout2i4",A);class F extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,i,u)}emplace(t,i,u,m){const x=3*t;return this.int16[x+0]=i,this.int16[x+1]=u,this.int16[x+2]=m,t}}F.prototype.bytesPerElement=6,ar("StructArrayLayout3i6",F);class H extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,i,u,m)}emplace(t,i,u,m,x){const w=4*t;return this.int16[w+0]=i,this.int16[w+1]=u,this.int16[w+2]=m,this.int16[w+3]=x,t}}H.prototype.bytesPerElement=8,ar("StructArrayLayout4i8",H);class $ extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,t,i,u,m,x,w)}emplace(t,i,u,m,x,w,T){const I=6*t;return this.int16[I+0]=i,this.int16[I+1]=u,this.int16[I+2]=m,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=T,t}}$.prototype.bytesPerElement=12,ar("StructArrayLayout2i4i12",$);class ne extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,t,i,u,m,x,w)}emplace(t,i,u,m,x,w,T){const I=4*t,D=8*t;return this.int16[I+0]=i,this.int16[I+1]=u,this.uint8[D+4]=m,this.uint8[D+5]=x,this.uint8[D+6]=w,this.uint8[D+7]=T,t}}ne.prototype.bytesPerElement=8,ar("StructArrayLayout2i4ub8",ne);class de extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i){const u=this.length;return this.resize(u+1),this.emplace(u,t,i)}emplace(t,i,u){const m=2*t;return this.float32[m+0]=i,this.float32[m+1]=u,t}}de.prototype.bytesPerElement=8,ar("StructArrayLayout2f8",de);class me extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w,T,I,D,B){const V=this.length;return this.resize(V+1),this.emplace(V,t,i,u,m,x,w,T,I,D,B)}emplace(t,i,u,m,x,w,T,I,D,B,V){const q=10*t;return this.uint16[q+0]=i,this.uint16[q+1]=u,this.uint16[q+2]=m,this.uint16[q+3]=x,this.uint16[q+4]=w,this.uint16[q+5]=T,this.uint16[q+6]=I,this.uint16[q+7]=D,this.uint16[q+8]=B,this.uint16[q+9]=V,t}}me.prototype.bytesPerElement=20,ar("StructArrayLayout10ui20",me);class be extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w,T,I,D,B,V,q){const te=this.length;return this.resize(te+1),this.emplace(te,t,i,u,m,x,w,T,I,D,B,V,q)}emplace(t,i,u,m,x,w,T,I,D,B,V,q,te){const le=12*t;return this.int16[le+0]=i,this.int16[le+1]=u,this.int16[le+2]=m,this.int16[le+3]=x,this.uint16[le+4]=w,this.uint16[le+5]=T,this.uint16[le+6]=I,this.uint16[le+7]=D,this.int16[le+8]=B,this.int16[le+9]=V,this.int16[le+10]=q,this.int16[le+11]=te,t}}be.prototype.bytesPerElement=24,ar("StructArrayLayout4i4ui4i24",be);class Ie extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,i,u)}emplace(t,i,u,m){const x=3*t;return this.float32[x+0]=i,this.float32[x+1]=u,this.float32[x+2]=m,t}}Ie.prototype.bytesPerElement=12,ar("StructArrayLayout3f12",Ie);class De extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.uint32[1*t+0]=i,t}}De.prototype.bytesPerElement=4,ar("StructArrayLayout1ul4",De);class Be extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w,T,I,D){const B=this.length;return this.resize(B+1),this.emplace(B,t,i,u,m,x,w,T,I,D)}emplace(t,i,u,m,x,w,T,I,D,B){const V=10*t,q=5*t;return this.int16[V+0]=i,this.int16[V+1]=u,this.int16[V+2]=m,this.int16[V+3]=x,this.int16[V+4]=w,this.int16[V+5]=T,this.uint32[q+3]=I,this.uint16[V+8]=D,this.uint16[V+9]=B,t}}Be.prototype.bytesPerElement=20,ar("StructArrayLayout6i1ul2ui20",Be);class Ee extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,t,i,u,m,x,w)}emplace(t,i,u,m,x,w,T){const I=6*t;return this.int16[I+0]=i,this.int16[I+1]=u,this.int16[I+2]=m,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=T,t}}Ee.prototype.bytesPerElement=12,ar("StructArrayLayout2i2i2i12",Ee);class We extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x){const w=this.length;return this.resize(w+1),this.emplace(w,t,i,u,m,x)}emplace(t,i,u,m,x,w){const T=4*t,I=8*t;return this.float32[T+0]=i,this.float32[T+1]=u,this.float32[T+2]=m,this.int16[I+6]=x,this.int16[I+7]=w,t}}We.prototype.bytesPerElement=16,ar("StructArrayLayout2f1f2i16",We);class Ye extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,t,i,u,m,x,w)}emplace(t,i,u,m,x,w,T){const I=16*t,D=4*t,B=8*t;return this.uint8[I+0]=i,this.uint8[I+1]=u,this.float32[D+1]=m,this.float32[D+2]=x,this.int16[B+6]=w,this.int16[B+7]=T,t}}Ye.prototype.bytesPerElement=16,ar("StructArrayLayout2ub2f2i16",Ye);class it extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,i,u)}emplace(t,i,u,m){const x=3*t;return this.uint16[x+0]=i,this.uint16[x+1]=u,this.uint16[x+2]=m,t}}it.prototype.bytesPerElement=6,ar("StructArrayLayout3ui6",it);class Et extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w,T,I,D,B,V,q,te,le,fe,Pe,Re){const rt=this.length;return this.resize(rt+1),this.emplace(rt,t,i,u,m,x,w,T,I,D,B,V,q,te,le,fe,Pe,Re)}emplace(t,i,u,m,x,w,T,I,D,B,V,q,te,le,fe,Pe,Re,rt){const Ue=24*t,Qe=12*t,gt=48*t;return this.int16[Ue+0]=i,this.int16[Ue+1]=u,this.uint16[Ue+2]=m,this.uint16[Ue+3]=x,this.uint32[Qe+2]=w,this.uint32[Qe+3]=T,this.uint32[Qe+4]=I,this.uint16[Ue+10]=D,this.uint16[Ue+11]=B,this.uint16[Ue+12]=V,this.float32[Qe+7]=q,this.float32[Qe+8]=te,this.uint8[gt+36]=le,this.uint8[gt+37]=fe,this.uint8[gt+38]=Pe,this.uint32[Qe+10]=Re,this.int16[Ue+22]=rt,t}}Et.prototype.bytesPerElement=48,ar("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Et);class Bt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,u,m,x,w,T,I,D,B,V,q,te,le,fe,Pe,Re,rt,Ue,Qe,gt,Rt,ir,zr,rr,Jt,vr,fr){const ur=this.length;return this.resize(ur+1),this.emplace(ur,t,i,u,m,x,w,T,I,D,B,V,q,te,le,fe,Pe,Re,rt,Ue,Qe,gt,Rt,ir,zr,rr,Jt,vr,fr)}emplace(t,i,u,m,x,w,T,I,D,B,V,q,te,le,fe,Pe,Re,rt,Ue,Qe,gt,Rt,ir,zr,rr,Jt,vr,fr,ur){const Tt=32*t,br=16*t;return this.int16[Tt+0]=i,this.int16[Tt+1]=u,this.int16[Tt+2]=m,this.int16[Tt+3]=x,this.int16[Tt+4]=w,this.int16[Tt+5]=T,this.int16[Tt+6]=I,this.int16[Tt+7]=D,this.uint16[Tt+8]=B,this.uint16[Tt+9]=V,this.uint16[Tt+10]=q,this.uint16[Tt+11]=te,this.uint16[Tt+12]=le,this.uint16[Tt+13]=fe,this.uint16[Tt+14]=Pe,this.uint16[Tt+15]=Re,this.uint16[Tt+16]=rt,this.uint16[Tt+17]=Ue,this.uint16[Tt+18]=Qe,this.uint16[Tt+19]=gt,this.uint16[Tt+20]=Rt,this.uint16[Tt+21]=ir,this.uint16[Tt+22]=zr,this.uint32[br+12]=rr,this.float32[br+13]=Jt,this.float32[br+14]=vr,this.uint16[Tt+30]=fr,this.uint16[Tt+31]=ur,t}}Bt.prototype.bytesPerElement=64,ar("StructArrayLayout8i15ui1ul2f2ui64",Bt);class $t extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.float32[1*t+0]=i,t}}$t.prototype.bytesPerElement=4,ar("StructArrayLayout1f4",$t);class er extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,i,u)}emplace(t,i,u,m){const x=3*t;return this.uint16[6*t+0]=i,this.float32[x+1]=u,this.float32[x+2]=m,t}}er.prototype.bytesPerElement=12,ar("StructArrayLayout1ui2f12",er);class Wt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,i,u)}emplace(t,i,u,m){const x=4*t;return this.uint32[2*t+0]=i,this.uint16[x+2]=u,this.uint16[x+3]=m,t}}Wt.prototype.bytesPerElement=8,ar("StructArrayLayout1ul2ui8",Wt);class Vt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i){const u=this.length;return this.resize(u+1),this.emplace(u,t,i)}emplace(t,i,u){const m=2*t;return this.uint16[m+0]=i,this.uint16[m+1]=u,t}}Vt.prototype.bytesPerElement=4,ar("StructArrayLayout2ui4",Vt);class cr extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.uint16[1*t+0]=i,t}}cr.prototype.bytesPerElement=2,ar("StructArrayLayout1ui2",cr);class Nr extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,u,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,i,u,m)}emplace(t,i,u,m,x){const w=4*t;return this.float32[w+0]=i,this.float32[w+1]=u,this.float32[w+2]=m,this.float32[w+3]=x,t}}Nr.prototype.bytesPerElement=16,ar("StructArrayLayout4f16",Nr);class Zt extends p{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new U(this.anchorPointX,this.anchorPointY)}}Zt.prototype.size=20;class Xt extends Be{get(t){return new Zt(this,t)}}ar("CollisionBoxArray",Xt);class Br extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Br.prototype.size=48;class Mn extends Et{get(t){return new Br(this,t)}}ar("PlacedSymbolArray",Mn);class qr extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}qr.prototype.size=64;class Jr extends Bt{get(t){return new qr(this,t)}}ar("SymbolInstanceArray",Jr);class Rn extends $t{getoffsetX(t){return this.float32[1*t+0]}}ar("GlyphOffsetArray",Rn);class $i extends F{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ar("SymbolLineVertexArray",$i);class Ws extends p{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ws.prototype.size=12;class Ln extends er{get(t){return new Ws(this,t)}}ar("TextAnchorOffsetArray",Ln);class Bi extends p{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Bi.prototype.size=8;class qn extends Wt{get(t){return new Bi(this,t)}}ar("FeatureIndexArray",qn);class di extends A{}class Ki extends A{}class Da extends A{}class As extends ${}class za extends ne{}class Ko extends de{}class Gs extends me{}class ha extends be{}class eo extends Ie{}class _s extends De{}class Zs extends Ee{}class Ra extends Ye{}class da extends it{}class pi extends Vt{}const Qn=E([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ji}=Qn;class Qr{constructor(t=[]){this.segments=t}prepareSegment(t,i,u,m){let x=this.segments[this.segments.length-1];return t>Qr.MAX_VERTEX_ARRAY_LENGTH&&Je(`Max vertices per segment is ${Qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!x||x.vertexLength+t>Qr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m)&&(x={vertexOffset:i.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},m!==void 0&&(x.sortKey=m),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const t of this.segments)for(const i in t.vaos)t.vaos[i].destroy()}static simpleSegment(t,i,u,m){return new Qr([{vertexOffset:t,primitiveOffset:i,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}function qs(r,t){return 256*(r=ve(Math.floor(r),0,255))+ve(Math.floor(t),0,255)}Qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ar("SegmentVector",Qr);const Jo=E([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var La={exports:{}},lh={exports:{}};lh.exports=function(r,t){var i,u,m,x,w,T,I,D;for(u=r.length-(i=3&r.length),m=t,w=3432918353,T=461845907,D=0;D<u;)I=255&r.charCodeAt(D)|(255&r.charCodeAt(++D))<<8|(255&r.charCodeAt(++D))<<16|(255&r.charCodeAt(++D))<<24,++D,m=27492+(65535&(x=5*(65535&(m=(m^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*T+(((I>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(I=0,i){case 3:I^=(255&r.charCodeAt(D+2))<<16;case 2:I^=(255&r.charCodeAt(D+1))<<8;case 1:m^=I=(65535&(I=(I=(65535&(I^=255&r.charCodeAt(D)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*T+(((I>>>16)*T&65535)<<16)&4294967295}return m^=r.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var uh=lh.exports,ti={exports:{}};ti.exports=function(r,t){for(var i,u=r.length,m=t^u,x=0;u>=4;)i=1540483477*(65535&(i=255&r.charCodeAt(x)|(255&r.charCodeAt(++x))<<8|(255&r.charCodeAt(++x))<<16|(255&r.charCodeAt(++x))<<24))+((1540483477*(i>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),u-=4,++x;switch(u){case 3:m^=(255&r.charCodeAt(x+2))<<16;case 2:m^=(255&r.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&r.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Oa=uh,Ec=ti.exports;La.exports=Oa,La.exports.murmur3=Oa,La.exports.murmur2=Ec;var iu=R(La.exports);class Qo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,i,u,m){this.ids.push(su(t)),this.positions.push(i,u,m)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const i=su(t);let u=0,m=this.ids.length-1;for(;u<m;){const w=u+m>>1;this.ids[w]>=i?m=w:u=w+1}const x=[];for(;this.ids[u]===i;)x.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return x}static serialize(t,i){const u=new Float64Array(t.ids),m=new Uint32Array(t.positions);return to(u,m,0,u.length-1),i&&i.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(t){const i=new Qo;return i.ids=t.ids,i.positions=t.positions,i.indexed=!0,i}}function su(r){const t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:iu(String(r))}function to(r,t,i,u){for(;i<u;){const m=r[i+u>>1];let x=i-1,w=u+1;for(;;){do x++;while(r[x]<m);do w--;while(r[w]>m);if(x>=w)break;On(r,x,w),On(t,3*x,3*w),On(t,3*x+1,3*w+1),On(t,3*x+2,3*w+2)}w-i<u-w?(to(r,t,i,w),i=w+1):(to(r,t,w+1,u),u=w)}}function On(r,t,i){const u=r[t];r[t]=r[i],r[i]=u}ar("FeaturePositionMap",Qo);class li{constructor(t,i){this.gl=t.gl,this.location=i}}class Ni extends li{constructor(t,i){super(t,i),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ch extends li{constructor(t,i){super(t,i),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Cc extends li{constructor(t,i){super(t,i),this.current=Dr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const hh=new Float32Array(16);function df(r){return[qs(255*r.r,255*r.g),qs(255*r.b,255*r.a)]}class Wi{constructor(t,i,u){this.value=t,this.uniformNames=i.map(m=>`u_${m}`),this.type=u}setUniform(t,i,u){t.set(u.constantOr(this.value))}getBinding(t,i,u){return this.type==="color"?new Cc(t,i):new Ni(t,i)}}class au{constructor(t,i){this.uniformNames=i.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=t.tlbr}setUniform(t,i,u,m){const x=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&t.set(x)}getBinding(t,i,u){return u.substr(0,9)==="u_pattern"?new ch(t,i):new Ni(t,i)}}class Co{constructor(t,i,u,m){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=i.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(t,i,u,m,x){const w=this.paintVertexArray.length,T=this.expression.evaluate(new an(0),i,{},m,[],x);this.paintVertexArray.resize(t),this._setPaintValue(w,t,T)}updatePaintArray(t,i,u,m){const x=this.expression.evaluate({zoom:0},u,m);this._setPaintValue(t,i,x)}_setPaintValue(t,i,u){if(this.type==="color"){const m=df(u);for(let x=t;x<i;x++)this.paintVertexArray.emplace(x,m[0],m[1])}else{for(let m=t;m<i;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fa{constructor(t,i,u,m,x,w){this.expression=t,this.uniformNames=i.map(T=>`u_${T}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=i.map(T=>({name:`a_${T}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(t,i,u,m,x){const w=this.expression.evaluate(new an(this.zoom),i,{},m,[],x),T=this.expression.evaluate(new an(this.zoom+1),i,{},m,[],x),I=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(I,t,w,T)}updatePaintArray(t,i,u,m){const x=this.expression.evaluate({zoom:this.zoom},u,m),w=this.expression.evaluate({zoom:this.zoom+1},u,m);this._setPaintValue(t,i,x,w)}_setPaintValue(t,i,u,m){if(this.type==="color"){const x=df(u),w=df(m);for(let T=t;T<i;T++)this.paintVertexArray.emplace(T,x[0],x[1],w[0],w[1])}else{for(let x=t;x<i;x++)this.paintVertexArray.emplace(x,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,i){const u=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,m=ve(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(m)}getBinding(t,i,u){return new Ni(t,i)}}class vs{constructor(t,i,u,m,x,w){this.expression=t,this.type=i,this.useIntegerZoom=u,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(t,i,u){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(m,t,i.patterns&&i.patterns[this.layerId],u)}updatePaintArray(t,i,u,m,x){this._setPaintValues(t,i,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(t,i,u,m){if(!m||!u)return;const{min:x,mid:w,max:T}=u,I=m[x],D=m[w],B=m[T];if(I&&D&&B)for(let V=t;V<i;V++)this.zoomInPaintVertexArray.emplace(V,D.tl[0],D.tl[1],D.br[0],D.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],D.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,D.tl[0],D.tl[1],D.br[0],D.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],D.pixelRatio,B.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Jo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Jo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ba{constructor(t,i,u){this.binders={},this._buffers=[];const m=[];for(const x in t.paint._values){if(!u(x))continue;const w=t.paint.get(x);if(!(w instanceof $s&&Wl(w.property.specification)))continue;const T=ff(x,t.type),I=w.value,D=w.property.specification.type,B=w.property.useIntegerZoom,V=w.property.specification["property-type"],q=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=q?new au(I.value,T):new Wi(I.value,T,D),m.push(`/u_${x}`);else if(I.kind==="source"||q){const te=ud(x,D,"source");this.binders[x]=q?new vs(I,D,B,i,te,t.id):new Co(I,T,D,te),m.push(`/a_${x}`)}else{const te=ud(x,D,"composite");this.binders[x]=new Fa(I,T,D,B,i,te),m.push(`/z_${x}`)}}this.cacheKey=m.sort().join("")}getMaxValue(t){const i=this.binders[t];return i instanceof Co||i instanceof Fa?i.maxValue:0}populatePaintArrays(t,i,u,m,x){for(const w in this.binders){const T=this.binders[w];(T instanceof Co||T instanceof Fa||T instanceof vs)&&T.populatePaintArray(t,i,u,m,x)}}setConstantPatternPositions(t,i){for(const u in this.binders){const m=this.binders[u];m instanceof au&&m.setConstantPatternPositions(t,i)}}updatePaintArrays(t,i,u,m,x){let w=!1;for(const T in t){const I=i.getPositions(T);for(const D of I){const B=u.feature(D.index);for(const V in this.binders){const q=this.binders[V];if((q instanceof Co||q instanceof Fa||q instanceof vs)&&q.expression.isStateDependent===!0){const te=m.paint.get(V);q.expression=te.value,q.updatePaintArray(D.start,D.end,B,t[T],x),w=!0}}}}return w}defines(){const t=[];for(const i in this.binders){const u=this.binders[i];(u instanceof Wi||u instanceof au)&&t.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return t}getBinderAttributes(){const t=[];for(const i in this.binders){const u=this.binders[i];if(u instanceof Co||u instanceof Fa)for(let m=0;m<u.paintVertexAttributes.length;m++)t.push(u.paintVertexAttributes[m].name);else if(u instanceof vs)for(let m=0;m<Jo.members.length;m++)t.push(Jo.members[m].name)}return t}getBinderUniforms(){const t=[];for(const i in this.binders){const u=this.binders[i];if(u instanceof Wi||u instanceof au||u instanceof Fa)for(const m of u.uniformNames)t.push(m)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,i){const u=[];for(const m in this.binders){const x=this.binders[m];if(x instanceof Wi||x instanceof au||x instanceof Fa){for(const w of x.uniformNames)if(i[w]){const T=x.getBinding(t,i[w],w);u.push({name:w,property:m,binding:T})}}}return u}setUniforms(t,i,u,m){for(const{name:x,property:w,binding:T}of i)this.binders[w].setUniform(T,m,u.get(w),x)}updatePaintBuffers(t){this._buffers=[];for(const i in this.binders){const u=this.binders[i];if(t&&u instanceof vs){const m=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(u instanceof Co||u instanceof Fa)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const i in this.binders){const u=this.binders[i];(u instanceof Co||u instanceof Fa||u instanceof vs)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const i=this.binders[t];(i instanceof Co||i instanceof Fa||i instanceof vs)&&i.destroy()}}}class Io{constructor(t,i,u=()=>!0){this.programConfigurations={};for(const m of t)this.programConfigurations[m.id]=new Ba(m,i,u);this.needsUpload=!1,this._featureMap=new Qo,this._bufferOffset=0}populatePaintArrays(t,i,u,m,x,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(t,i,m,x,w);i.id!==void 0&&this._featureMap.add(i.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,i,u,m){for(const x of u)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(t,this._featureMap,i,x,m)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const i in this.programConfigurations)this.programConfigurations[i].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function ff(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function ud(r,t,i){const u={color:{source:de,composite:Nr},number:{source:$t,composite:de}},m=function(x){return{"line-pattern":{source:Gs,composite:Gs},"fill-pattern":{source:Gs,composite:Gs},"fill-extrusion-pattern":{source:Gs,composite:Gs}}[x]}(r);return m&&m[i]||u[t][i]}ar("ConstantBinder",Wi),ar("CrossFadedConstantBinder",au),ar("SourceExpressionBinder",Co),ar("CrossFadedCompositeBinder",vs),ar("CompositeExpressionBinder",Fa),ar("ProgramConfiguration",Ba,{omit:["_buffers"]}),ar("ProgramConfigurationSet",Io);const mi=8192,cd=Math.pow(2,14)-1,pf=-cd-1;function ou(r){const t=mi/r.extent,i=r.loadGeometry();for(let u=0;u<i.length;u++){const m=i[u];for(let x=0;x<m.length;x++){const w=m[x],T=Math.round(w.x*t),I=Math.round(w.y*t);w.x=ve(T,pf,cd),w.y=ve(I,pf,cd),(T<w.x||T>w.x+1||I<w.y||I>w.y+1)&&Je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function lu(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?ou(r):[]}}function dh(r,t,i,u,m){r.emplaceBack(2*t+(u+1)/2,2*i+(m+1)/2)}class hd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ki,this.indexArray=new da,this.segments=new Qr,this.programConfigurations=new Io(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(t,i,u){const m=this.layers[0],x=[];let w=null,T=!1;m.type==="circle"&&(w=m.layout.get("circle-sort-key"),T=!w.isConstant());for(const{feature:I,id:D,index:B,sourceLayerIndex:V}of t){const q=this.layers[0]._featureFilter.needGeometry,te=lu(I,q);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),te,u))continue;const le=T?w.evaluate(te,{},u):void 0,fe={id:D,properties:I.properties,type:I.type,sourceLayerIndex:V,index:B,geometry:q?te.geometry:ou(I),patterns:{},sortKey:le};x.push(fe)}T&&x.sort((I,D)=>I.sortKey-D.sortKey);for(const I of x){const{geometry:D,index:B,sourceLayerIndex:V}=I,q=t[B].feature;this.addFeature(I,D,B,u),i.featureIndex.insert(q,D,B,V,this.index)}}update(t,i,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ji),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,i,u,m){for(const x of i)for(const w of x){const T=w.x,I=w.y;if(T<0||T>=mi||I<0||I>=mi)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),B=D.vertexLength;dh(this.layoutVertexArray,T,I,-1,-1),dh(this.layoutVertexArray,T,I,1,-1),dh(this.layoutVertexArray,T,I,1,1),dh(this.layoutVertexArray,T,I,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},m)}}function mf(r,t){for(let i=0;i<r.length;i++)if(Zu(t,r[i]))return!0;for(let i=0;i<t.length;i++)if(Zu(r,t[i]))return!0;return!!Ic(r,t)}function fh(r,t,i){return!!Zu(r,t)||!!ph(t,r,i)}function gf(r,t){if(r.length===1)return _f(t,r[0]);for(let i=0;i<t.length;i++){const u=t[i];for(let m=0;m<u.length;m++)if(Zu(r,u[m]))return!0}for(let i=0;i<r.length;i++)if(_f(t,r[i]))return!0;for(let i=0;i<t.length;i++)if(Ic(r,t[i]))return!0;return!1}function dd(r,t,i){if(r.length>1){if(Ic(r,t))return!0;for(let u=0;u<t.length;u++)if(ph(t[u],r,i))return!0}for(let u=0;u<r.length;u++)if(ph(r[u],t,i))return!0;return!1}function Ic(r,t){if(r.length===0||t.length===0)return!1;for(let i=0;i<r.length-1;i++){const u=r[i],m=r[i+1];for(let x=0;x<t.length-1;x++)if(cp(u,m,t[x],t[x+1]))return!0}return!1}function cp(r,t,i,u){return W(r,i,u)!==W(t,i,u)&&W(r,t,i)!==W(r,t,u)}function ph(r,t,i){const u=i*i;if(t.length===1)return r.distSqr(t[0])<u;for(let m=1;m<t.length;m++)if(yf(r,t[m-1],t[m])<u)return!0;return!1}function yf(r,t,i){const u=t.distSqr(i);if(u===0)return r.distSqr(t);const m=((r.x-t.x)*(i.x-t.x)+(r.y-t.y)*(i.y-t.y))/u;return r.distSqr(m<0?t:m>1?i:i.sub(t)._mult(m)._add(t))}function _f(r,t){let i,u,m,x=!1;for(let w=0;w<r.length;w++){i=r[w];for(let T=0,I=i.length-1;T<i.length;I=T++)u=i[T],m=i[I],u.y>t.y!=m.y>t.y&&t.x<(m.x-u.x)*(t.y-u.y)/(m.y-u.y)+u.x&&(x=!x)}return x}function Zu(r,t){let i=!1;for(let u=0,m=r.length-1;u<r.length;m=u++){const x=r[u],w=r[m];x.y>t.y!=w.y>t.y&&t.x<(w.x-x.x)*(t.y-x.y)/(w.y-x.y)+x.x&&(i=!i)}return i}function hp(r,t,i){const u=i[0],m=i[2];if(r.x<u.x&&t.x<u.x||r.x>m.x&&t.x>m.x||r.y<u.y&&t.y<u.y||r.y>m.y&&t.y>m.y)return!1;const x=W(r,t,i[0]);return x!==W(r,t,i[1])||x!==W(r,t,i[2])||x!==W(r,t,i[3])}function qu(r,t,i){const u=t.paint.get(r).value;return u.kind==="constant"?u.value:i.programConfigurations.get(t.id).getMaxValue(r)}function mh(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function gh(r,t,i,u,m){if(!t[0]&&!t[1])return r;const x=U.convert(t)._mult(m);i==="viewport"&&x._rotate(-u);const w=[];for(let T=0;T<r.length;T++)w.push(r[T].sub(x));return w}let vf,dp;ar("CircleBucket",hd,{omit:["layers"]});var fp={get paint(){return dp=dp||new v({"circle-radius":new Er(ye.paint_circle["circle-radius"]),"circle-color":new Er(ye.paint_circle["circle-color"]),"circle-blur":new Er(ye.paint_circle["circle-blur"]),"circle-opacity":new Er(ye.paint_circle["circle-opacity"]),"circle-translate":new or(ye.paint_circle["circle-translate"]),"circle-translate-anchor":new or(ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new or(ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new or(ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Er(ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Er(ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Er(ye.paint_circle["circle-stroke-opacity"])})},get layout(){return vf=vf||new v({"circle-sort-key":new Er(ye.layout_circle["circle-sort-key"])})}},Ds=1e-6,Pc=typeof Float32Array<"u"?Float32Array:Array;function fd(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function xf(r,t,i){var u=t[0],m=t[1],x=t[2],w=t[3],T=t[4],I=t[5],D=t[6],B=t[7],V=t[8],q=t[9],te=t[10],le=t[11],fe=t[12],Pe=t[13],Re=t[14],rt=t[15],Ue=i[0],Qe=i[1],gt=i[2],Rt=i[3];return r[0]=Ue*u+Qe*T+gt*V+Rt*fe,r[1]=Ue*m+Qe*I+gt*q+Rt*Pe,r[2]=Ue*x+Qe*D+gt*te+Rt*Re,r[3]=Ue*w+Qe*B+gt*le+Rt*rt,r[4]=(Ue=i[4])*u+(Qe=i[5])*T+(gt=i[6])*V+(Rt=i[7])*fe,r[5]=Ue*m+Qe*I+gt*q+Rt*Pe,r[6]=Ue*x+Qe*D+gt*te+Rt*Re,r[7]=Ue*w+Qe*B+gt*le+Rt*rt,r[8]=(Ue=i[8])*u+(Qe=i[9])*T+(gt=i[10])*V+(Rt=i[11])*fe,r[9]=Ue*m+Qe*I+gt*q+Rt*Pe,r[10]=Ue*x+Qe*D+gt*te+Rt*Re,r[11]=Ue*w+Qe*B+gt*le+Rt*rt,r[12]=(Ue=i[12])*u+(Qe=i[13])*T+(gt=i[14])*V+(Rt=i[15])*fe,r[13]=Ue*m+Qe*I+gt*q+Rt*Pe,r[14]=Ue*x+Qe*D+gt*te+Rt*Re,r[15]=Ue*w+Qe*B+gt*le+Rt*rt,r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var Mc,pd=xf;function md(r,t,i){var u=t[0],m=t[1],x=t[2],w=t[3];return r[0]=i[0]*u+i[4]*m+i[8]*x+i[12]*w,r[1]=i[1]*u+i[5]*m+i[9]*x+i[13]*w,r[2]=i[2]*u+i[6]*m+i[10]*x+i[14]*w,r[3]=i[3]*u+i[7]*m+i[11]*x+i[15]*w,r}Mc=new Pc(4),Pc!=Float32Array&&(Mc[0]=0,Mc[1]=0,Mc[2]=0,Mc[3]=0);class Qm extends a{constructor(t){super(t,fp)}createBucket(t){return new hd(t)}queryRadius(t){const i=t;return qu("circle-radius",this,i)+qu("circle-stroke-width",this,i)+mh(this.paint.get("circle-translate"))}queryIntersectsFeature(t,i,u,m,x,w,T,I){const D=gh(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),B=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u),V=this.paint.get("circle-pitch-alignment")==="map",q=V?D:function(le,fe){return le.map(Pe=>pp(Pe,fe))}(D,I),te=V?B*T:B;for(const le of m)for(const fe of le){const Pe=V?fe:pp(fe,I);let Re=te;const rt=md([],[fe.x,fe.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=rt[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=w.cameraToCenterDistance/rt[3]),fh(q,Pe,Re))return!0}return!1}}function pp(r,t){const i=md([],[r.x,r.y,0,1],t);return new U(i[0]/i[3],i[1]/i[3])}class ro extends hd{}let gd;ar("HeatmapBucket",ro,{omit:["layers"]});var yd={get paint(){return gd=gd||new v({"heatmap-radius":new Er(ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Er(ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new or(ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oh(ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new or(ye.paint_heatmap["heatmap-opacity"])})}};function _d(r,{width:t,height:i},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==t*i*u)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${t*i*u}`)}else m=new Uint8Array(t*i*u);return r.width=t,r.height=i,r.data=m,r}function wf(r,{width:t,height:i},u){if(t===r.width&&i===r.height)return;const m=_d({},{width:t,height:i},u);vd(r,m,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,i)},u),r.width=t,r.height=i,r.data=m.data}function vd(r,t,i,u,m,x){if(m.width===0||m.height===0)return t;if(m.width>r.width||m.height>r.height||i.x>r.width-m.width||i.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>t.width||m.height>t.height||u.x>t.width-m.width||u.y>t.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=r.data,T=t.data;if(w===T)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<m.height;I++){const D=((i.y+I)*r.width+i.x)*x,B=((u.y+I)*t.width+u.x)*x;for(let V=0;V<m.width*x;V++)T[B+V]=w[D+V]}return t}class Yu{constructor(t,i){_d(this,t,1,i)}resize(t){wf(this,t,1)}clone(){return new Yu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,i,u,m,x){vd(t,i,u,m,x,1)}}class os{constructor(t,i){_d(this,t,4,i)}resize(t){wf(this,t,4)}replace(t,i){i?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new os({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,i,u,m,x){vd(t,i,u,m,x,4)}}function xd(r){const t={},i=r.resolution||256,u=r.clips?r.clips.length:1,m=r.image||new os({width:i,height:u});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);const x=(w,T,I)=>{t[r.evaluationKey]=I;const D=r.expression.evaluate(t);m.data[w+T+0]=Math.floor(255*D.r/D.a),m.data[w+T+1]=Math.floor(255*D.g/D.a),m.data[w+T+2]=Math.floor(255*D.b/D.a),m.data[w+T+3]=Math.floor(255*D.a)};if(r.clips)for(let w=0,T=0;w<u;++w,T+=4*i)for(let I=0,D=0;I<i;I++,D+=4){const B=I/(i-1),{start:V,end:q}=r.clips[w];x(T,D,V*(1-B)+q*B)}else for(let w=0,T=0;w<i;w++,T+=4)x(0,T,w/(i-1));return m}ar("AlphaImage",Yu),ar("RGBAImage",os);const yh="big-fb";class eg extends a{createBucket(t){return new ro(t)}constructor(t){super(t,yd),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=xd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(yh)&&this.heatmapFbos.delete(yh)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let bf;var mp={get paint(){return bf=bf||new v({"hillshade-illumination-direction":new or(ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new or(ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new or(ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new or(ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new or(ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new or(ye.paint_hillshade["hillshade-accent-color"])})}};class gp extends a{constructor(t){super(t,mp)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const yp=E([{name:"a_pos",components:2,type:"Int16"}],4),{members:_p}=yp;function vp(r,t,i=2){const u=t&&t.length,m=u?t[0]*i:r.length;let x=Ys(r,0,m,i,!0);const w=[];if(!x||x.next===x.prev)return w;let T,I,D;if(u&&(x=function(B,V,q,te){const le=[];for(let fe=0,Pe=V.length;fe<Pe;fe++){const Re=Ys(B,V[fe]*te,fe<Pe-1?V[fe+1]*te:B.length,te,!1);Re===Re.next&&(Re.steiner=!0),le.push(Tp(Re))}le.sort(Sf);for(let fe=0;fe<le.length;fe++)q=kp(le[fe],q);return q}(r,t,x,i)),r.length>80*i){T=1/0,I=1/0;let B=-1/0,V=-1/0;for(let q=i;q<m;q+=i){const te=r[q],le=r[q+1];te<T&&(T=te),le<I&&(I=le),te>B&&(B=te),le>V&&(V=le)}D=Math.max(B-T,V-I),D=D!==0?32767/D:0}return Ac(x,w,i,T,I,D,0),w}function Ys(r,t,i,u,m){let x;if(m===function(w,T,I,D){let B=0;for(let V=T,q=I-D;V<I;V+=D)B+=(w[q]-w[V])*(w[V+1]+w[q+1]),q=V;return B}(r,t,i,u)>0)for(let w=t;w<i;w+=u)x=xh(w/u|0,r[w],r[w+1],x);else for(let w=i-u;w>=t;w-=u)x=xh(w/u|0,r[w],r[w+1],x);return x&&Dc(x,x.next)&&(Na(x),x=x.next),x}function ji(r,t){if(!r)return r;t||(t=r);let i,u=r;do if(i=!1,u.steiner||!Dc(u,u.next)&&fi(u.prev,u,u.next)!==0)u=u.next;else{if(Na(u),u=t=u.prev,u===u.next)break;i=!0}while(i||u!==t);return t}function Ac(r,t,i,u,m,x,w){if(!r)return;!w&&x&&function(I,D,B,V){let q=I;do q.z===0&&(q.z=wd(q.x,q.y,D,B,V)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==I);q.prevZ.nextZ=null,q.prevZ=null,function(te){let le,fe=1;do{let Pe,Re=te;te=null;let rt=null;for(le=0;Re;){le++;let Ue=Re,Qe=0;for(let Rt=0;Rt<fe&&(Qe++,Ue=Ue.nextZ,Ue);Rt++);let gt=fe;for(;Qe>0||gt>0&&Ue;)Qe!==0&&(gt===0||!Ue||Re.z<=Ue.z)?(Pe=Re,Re=Re.nextZ,Qe--):(Pe=Ue,Ue=Ue.nextZ,gt--),rt?rt.nextZ=Pe:te=Pe,Pe.prevZ=rt,rt=Pe;Re=Ue}rt.nextZ=null,fe*=2}while(le>1)}(q)}(r,u,m,x);let T=r;for(;r.prev!==r.next;){const I=r.prev,D=r.next;if(x?wp(r,u,m,x):xp(r))t.push(I.i,r.i,D.i),Na(r),r=D.next,T=D.next;else if((r=D)===T){w?w===1?Ac(r=bp(ji(r),t),t,i,u,m,x,2):w===2&&Sp(r,t,i,u,m,x):Ac(ji(r),t,i,u,m,x,1);break}}}function xp(r){const t=r.prev,i=r,u=r.next;if(fi(t,i,u)>=0)return!1;const m=t.x,x=i.x,w=u.x,T=t.y,I=i.y,D=u.y,B=m<x?m<w?m:w:x<w?x:w,V=T<I?T<D?T:D:I<D?I:D,q=m>x?m>w?m:w:x>w?x:w,te=T>I?T>D?T:D:I>D?I:D;let le=u.next;for(;le!==t;){if(le.x>=B&&le.x<=q&&le.y>=V&&le.y<=te&&uu(m,T,x,I,w,D,le.x,le.y)&&fi(le.prev,le,le.next)>=0)return!1;le=le.next}return!0}function wp(r,t,i,u){const m=r.prev,x=r,w=r.next;if(fi(m,x,w)>=0)return!1;const T=m.x,I=x.x,D=w.x,B=m.y,V=x.y,q=w.y,te=T<I?T<D?T:D:I<D?I:D,le=B<V?B<q?B:q:V<q?V:q,fe=T>I?T>D?T:D:I>D?I:D,Pe=B>V?B>q?B:q:V>q?V:q,Re=wd(te,le,t,i,u),rt=wd(fe,Pe,t,i,u);let Ue=r.prevZ,Qe=r.nextZ;for(;Ue&&Ue.z>=Re&&Qe&&Qe.z<=rt;){if(Ue.x>=te&&Ue.x<=fe&&Ue.y>=le&&Ue.y<=Pe&&Ue!==m&&Ue!==w&&uu(T,B,I,V,D,q,Ue.x,Ue.y)&&fi(Ue.prev,Ue,Ue.next)>=0||(Ue=Ue.prevZ,Qe.x>=te&&Qe.x<=fe&&Qe.y>=le&&Qe.y<=Pe&&Qe!==m&&Qe!==w&&uu(T,B,I,V,D,q,Qe.x,Qe.y)&&fi(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;Ue&&Ue.z>=Re;){if(Ue.x>=te&&Ue.x<=fe&&Ue.y>=le&&Ue.y<=Pe&&Ue!==m&&Ue!==w&&uu(T,B,I,V,D,q,Ue.x,Ue.y)&&fi(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.prevZ}for(;Qe&&Qe.z<=rt;){if(Qe.x>=te&&Qe.x<=fe&&Qe.y>=le&&Qe.y<=Pe&&Qe!==m&&Qe!==w&&uu(T,B,I,V,D,q,Qe.x,Qe.y)&&fi(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function bp(r,t){let i=r;do{const u=i.prev,m=i.next.next;!Dc(u,m)&&_h(u,i,i.next,m)&&Xu(u,m)&&Xu(m,u)&&(t.push(u.i,i.i,m.i),Na(i),Na(i.next),i=r=m),i=i.next}while(i!==r);return ji(i)}function Sp(r,t,i,u,m,x){let w=r;do{let T=w.next.next;for(;T!==w.prev;){if(w.i!==T.i&&Tf(w,T)){let I=Ef(w,T);return w=ji(w,w.next),I=ji(I,I.next),Ac(w,t,i,u,m,x,0),void Ac(I,t,i,u,m,x,0)}T=T.next}w=w.next}while(w!==r)}function Sf(r,t){return r.x-t.x}function kp(r,t){const i=function(m,x){let w=x;const T=m.x,I=m.y;let D,B=-1/0;do{if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){const fe=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(fe<=T&&fe>B&&(B=fe,D=w.x<w.next.x?w:w.next,fe===T))return D}w=w.next}while(w!==x);if(!D)return null;const V=D,q=D.x,te=D.y;let le=1/0;w=D;do{if(T>=w.x&&w.x>=q&&T!==w.x&&uu(I<te?T:B,I,q,te,I<te?B:T,I,w.x,w.y)){const fe=Math.abs(I-w.y)/(T-w.x);Xu(w,m)&&(fe<le||fe===le&&(w.x>D.x||w.x===D.x&&kf(D,w)))&&(D=w,le=fe)}w=w.next}while(w!==V);return D}(r,t);if(!i)return t;const u=Ef(i,r);return ji(u,u.next),ji(i,i.next)}function kf(r,t){return fi(r.prev,r,t.prev)<0&&fi(t.next,r,r.next)<0}function wd(r,t,i,u,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*m|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Tp(r){let t=r,i=r;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==r);return i}function uu(r,t,i,u,m,x,w,T){return(m-w)*(t-T)>=(r-w)*(x-T)&&(r-w)*(u-T)>=(i-w)*(t-T)&&(i-w)*(x-T)>=(m-w)*(u-T)}function Tf(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(i,u){let m=i;do{if(m.i!==i.i&&m.next.i!==i.i&&m.i!==u.i&&m.next.i!==u.i&&_h(m,m.next,i,u))return!0;m=m.next}while(m!==i);return!1}(r,t)&&(Xu(r,t)&&Xu(t,r)&&function(i,u){let m=i,x=!1;const w=(i.x+u.x)/2,T=(i.y+u.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&w<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==i);return x}(r,t)&&(fi(r.prev,r,t.prev)||fi(r,t.prev,t))||Dc(r,t)&&fi(r.prev,r,r.next)>0&&fi(t.prev,t,t.next)>0)}function fi(r,t,i){return(t.y-r.y)*(i.x-t.x)-(t.x-r.x)*(i.y-t.y)}function Dc(r,t){return r.x===t.x&&r.y===t.y}function _h(r,t,i,u){const m=vh(fi(r,t,i)),x=vh(fi(r,t,u)),w=vh(fi(i,u,r)),T=vh(fi(i,u,t));return m!==x&&w!==T||!(m!==0||!bd(r,i,t))||!(x!==0||!bd(r,u,t))||!(w!==0||!bd(i,r,u))||!(T!==0||!bd(i,t,u))}function bd(r,t,i){return t.x<=Math.max(r.x,i.x)&&t.x>=Math.min(r.x,i.x)&&t.y<=Math.max(r.y,i.y)&&t.y>=Math.min(r.y,i.y)}function vh(r){return r>0?1:r<0?-1:0}function Xu(r,t){return fi(r.prev,r,r.next)<0?fi(r,t,r.next)>=0&&fi(r,r.prev,t)>=0:fi(r,t,r.prev)<0||fi(r,r.next,t)<0}function Ef(r,t){const i=Cf(r.i,r.x,r.y),u=Cf(t.i,t.x,t.y),m=r.next,x=t.prev;return r.next=t,t.prev=r,i.next=m,m.prev=i,u.next=i,i.prev=u,x.next=u,u.prev=x,u}function xh(r,t,i,u){const m=Cf(r,t,i);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function Na(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Cf(r,t,i){return{i:r,x:t,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Sd(r,t,i){const u=i.patternDependencies;let m=!1;for(const x of t){const w=x.paint.get(`${r}-pattern`);w.isConstant()||(m=!0);const T=w.constantOr(null);T&&(m=!0,u[T.to]=!0,u[T.from]=!0)}return m}function wh(r,t,i,u,m){const x=m.patternDependencies;for(const w of t){const T=w.paint.get(`${r}-pattern`).value;if(T.kind!=="constant"){let I=T.evaluate({zoom:u-1},i,{},m.availableImages),D=T.evaluate({zoom:u},i,{},m.availableImages),B=T.evaluate({zoom:u+1},i,{},m.availableImages);I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,B=B&&B.name?B.name:B,x[I]=!0,x[D]=!0,x[B]=!0,i.patterns[w.id]={min:I,mid:D,max:B}}}return i}class kd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new da,this.indexArray2=new pi,this.programConfigurations=new Io(t.layers,t.zoom),this.segments=new Qr,this.segments2=new Qr,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(t,i,u){this.hasPattern=Sd("fill",this.layers,i);const m=this.layers[0].layout.get("fill-sort-key"),x=!m.isConstant(),w=[];for(const{feature:T,id:I,index:D,sourceLayerIndex:B}of t){const V=this.layers[0]._featureFilter.needGeometry,q=lu(T,V);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),q,u))continue;const te=x?m.evaluate(q,{},u,i.availableImages):void 0,le={id:I,properties:T.properties,type:T.type,sourceLayerIndex:B,index:D,geometry:V?q.geometry:ou(T),patterns:{},sortKey:te};w.push(le)}x&&w.sort((T,I)=>T.sortKey-I.sortKey);for(const T of w){const{geometry:I,index:D,sourceLayerIndex:B}=T;if(this.hasPattern){const V=wh("fill",this.layers,T,this.zoom,i);this.patternFeatures.push(V)}else this.addFeature(T,I,D,u,{});i.featureIndex.insert(t[D].feature,I,D,B,this.index)}}update(t,i,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,u)}addFeatures(t,i,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,i,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_p),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,i,u,m,x){for(const w of mo(i,500)){let T=0;for(const te of w)T+=te.length;const I=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),D=I.vertexLength,B=[],V=[];for(const te of w){if(te.length===0)continue;te!==w[0]&&V.push(B.length/2);const le=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),fe=le.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(fe+te.length-1,fe),B.push(te[0].x),B.push(te[0].y);for(let Pe=1;Pe<te.length;Pe++)this.layoutVertexArray.emplaceBack(te[Pe].x,te[Pe].y),this.indexArray2.emplaceBack(fe+Pe-1,fe+Pe),B.push(te[Pe].x),B.push(te[Pe].y);le.vertexLength+=te.length,le.primitiveLength+=te.length}const q=vp(B,V);for(let te=0;te<q.length;te+=3)this.indexArray.emplaceBack(D+q[te],D+q[te+1],D+q[te+2]);I.vertexLength+=T,I.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,x,m)}}let If,zc;ar("FillBucket",kd,{omit:["layers","patternFeatures"]});var zs={get paint(){return zc=zc||new v({"fill-antialias":new or(ye.paint_fill["fill-antialias"]),"fill-opacity":new Er(ye.paint_fill["fill-opacity"]),"fill-color":new Er(ye.paint_fill["fill-color"]),"fill-outline-color":new Er(ye.paint_fill["fill-outline-color"]),"fill-translate":new or(ye.paint_fill["fill-translate"]),"fill-translate-anchor":new or(ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new nu(ye.paint_fill["fill-pattern"])})},get layout(){return If=If||new v({"fill-sort-key":new Er(ye.layout_fill["fill-sort-key"])})}};class tg extends a{constructor(t){super(t,zs)}recalculate(t,i){super.recalculate(t,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new kd(t)}queryRadius(){return mh(this.paint.get("fill-translate"))}queryIntersectsFeature(t,i,u,m,x,w,T){return gf(gh(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),m)}isTileClipped(){return!0}}const rg=E([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Td=E([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Rs}=rg;var cu={},wr=N,Ku=hu;function hu(r,t,i,u,m){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=u,this._values=m,r.readFields(Ep,this,t)}function Ep(r,t,i){r==1?t.id=i.readVarint():r==2?function(u,m){for(var x=u.readVarint()+u.pos;u.pos<x;){var w=m._keys[u.readVarint()],T=m._values[u.readVarint()];m.properties[w]=T}}(i,t):r==3?t.type=i.readVarint():r==4&&(t._geometry=i.pos)}function ng(r){for(var t,i,u=0,m=0,x=r.length,w=x-1;m<x;w=m++)u+=((i=r[w]).x-(t=r[m]).x)*(t.y+i.y);return u}hu.types=["Unknown","Point","LineString","Polygon"],hu.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,i=r.readVarint()+r.pos,u=1,m=0,x=0,w=0,T=[];r.pos<i;){if(m<=0){var I=r.readVarint();u=7&I,m=I>>3}if(m--,u===1||u===2)x+=r.readSVarint(),w+=r.readSVarint(),u===1&&(t&&T.push(t),t=[]),t.push(new wr(x,w));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&T.push(t),T},hu.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,i=1,u=0,m=0,x=0,w=1/0,T=-1/0,I=1/0,D=-1/0;r.pos<t;){if(u<=0){var B=r.readVarint();i=7&B,u=B>>3}if(u--,i===1||i===2)(m+=r.readSVarint())<w&&(w=m),m>T&&(T=m),(x+=r.readSVarint())<I&&(I=x),x>D&&(D=x);else if(i!==7)throw new Error("unknown command "+i)}return[w,I,T,D]},hu.prototype.toGeoJSON=function(r,t,i){var u,m,x=this.extent*Math.pow(2,i),w=this.extent*r,T=this.extent*t,I=this.loadGeometry(),D=hu.types[this.type];function B(te){for(var le=0;le<te.length;le++){var fe=te[le];te[le]=[360*(fe.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(fe.y+T)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(u=0;u<I.length;u++)V[u]=I[u][0];B(I=V);break;case 2:for(u=0;u<I.length;u++)B(I[u]);break;case 3:for(I=function(te){var le=te.length;if(le<=1)return[te];for(var fe,Pe,Re=[],rt=0;rt<le;rt++){var Ue=ng(te[rt]);Ue!==0&&(Pe===void 0&&(Pe=Ue<0),Pe===Ue<0?(fe&&Re.push(fe),fe=[te[rt]]):fe.push(te[rt]))}return fe&&Re.push(fe),Re}(I),u=0;u<I.length;u++)for(m=0;m<I[u].length;m++)B(I[u][m])}I.length===1?I=I[0]:D="Multi"+D;var q={type:"Feature",geometry:{type:D,coordinates:I},properties:this.properties};return"id"in this&&(q.id=this.id),q};var bh=Ku,Sh=Ed;function Ed(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Cp,this,t),this.length=this._features.length}function Cp(r,t,i){r===15?t.version=i.readVarint():r===1?t.name=i.readString():r===5?t.extent=i.readVarint():r===2?t._features.push(i.pos):r===3?t._keys.push(i.readString()):r===4&&t._values.push(function(u){for(var m=null,x=u.readVarint()+u.pos;u.pos<x;){var w=u.readVarint()>>3;m=w===1?u.readString():w===2?u.readFloat():w===3?u.readDouble():w===4?u.readVarint64():w===5?u.readVarint():w===6?u.readSVarint():w===7?u.readBoolean():null}return m}(i))}Ed.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new bh(this._pbf,t,this.extent,this._keys,this._values)};var Ip=Sh;function Pp(r,t,i){if(r===3){var u=new Ip(i,i.readVarint()+i.pos);u.length&&(t[u.name]=u)}}cu.VectorTile=function(r,t){this.layers=r.readFields(Pp,{},t)},cu.VectorTileFeature=Ku,cu.VectorTileLayer=Sh;const Pf=cu.VectorTileFeature.types,kh=Math.pow(2,13);function Ui(r,t,i,u,m,x,w,T){r.emplaceBack(t,i,2*Math.floor(u*kh)+w,m*kh*2,x*kh*2,Math.round(T))}class ja{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new As,this.centroidVertexArray=new di,this.indexArray=new da,this.programConfigurations=new Io(t.layers,t.zoom),this.segments=new Qr,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(t,i,u){this.features=[],this.hasPattern=Sd("fill-extrusion",this.layers,i);for(const{feature:m,id:x,index:w,sourceLayerIndex:T}of t){const I=this.layers[0]._featureFilter.needGeometry,D=lu(m,I);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),D,u))continue;const B={id:x,sourceLayerIndex:T,index:w,geometry:I?D.geometry:ou(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(wh("fill-extrusion",this.layers,B,this.zoom,i)):this.addFeature(B,B.geometry,w,u,{}),i.featureIndex.insert(m,B.geometry,w,T,this.index,!0)}}addFeatures(t,i,u){for(const m of this.features){const{geometry:x}=m;this.addFeature(m,x,m.index,i,u)}}update(t,i,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rs),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Td.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,i,u,m,x){for(const w of mo(i,500)){const T={x:0,y:0,vertexCount:0};let I=0;for(const le of w)I+=le.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const le of w){if(le.length===0||Mp(le))continue;let fe=0;for(let Pe=0;Pe<le.length;Pe++){const Re=le[Pe];if(Pe>=1){const rt=le[Pe-1];if(!du(Re,rt)){D.vertexLength+4>Qr.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ue=Re.sub(rt)._perp()._unit(),Qe=rt.dist(Re);fe+Qe>32768&&(fe=0),Ui(this.layoutVertexArray,Re.x,Re.y,Ue.x,Ue.y,0,0,fe),Ui(this.layoutVertexArray,Re.x,Re.y,Ue.x,Ue.y,0,1,fe),T.x+=2*Re.x,T.y+=2*Re.y,T.vertexCount+=2,fe+=Qe,Ui(this.layoutVertexArray,rt.x,rt.y,Ue.x,Ue.y,0,0,fe),Ui(this.layoutVertexArray,rt.x,rt.y,Ue.x,Ue.y,0,1,fe),T.x+=2*rt.x,T.y+=2*rt.y,T.vertexCount+=2;const gt=D.vertexLength;this.indexArray.emplaceBack(gt,gt+2,gt+1),this.indexArray.emplaceBack(gt+1,gt+2,gt+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+I>Qr.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),Pf[t.type]!=="Polygon")continue;const B=[],V=[],q=D.vertexLength;for(const le of w)if(le.length!==0){le!==w[0]&&V.push(B.length/2);for(let fe=0;fe<le.length;fe++){const Pe=le[fe];Ui(this.layoutVertexArray,Pe.x,Pe.y,0,0,1,1,0),T.x+=Pe.x,T.y+=Pe.y,T.vertexCount+=1,B.push(Pe.x),B.push(Pe.y)}}const te=vp(B,V);for(let le=0;le<te.length;le+=3)this.indexArray.emplaceBack(q+te[le],q+te[le+2],q+te[le+1]);D.primitiveLength+=te.length/3,D.vertexLength+=I;for(let le=0;le<T.vertexCount;le++){const fe=Math.floor(T.x/T.vertexCount),Pe=Math.floor(T.y/T.vertexCount);this.centroidVertexArray.emplaceBack(fe,Pe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,x,m)}}function du(r,t){return r.x===t.x&&(r.x<0||r.x>mi)||r.y===t.y&&(r.y<0||r.y>mi)}function Mp(r){return r.every(t=>t.x<0)||r.every(t=>t.x>mi)||r.every(t=>t.y<0)||r.every(t=>t.y>mi)}let Mf;ar("FillExtrusionBucket",ja,{omit:["layers","features"]});var Po={get paint(){return Mf=Mf||new v({"fill-extrusion-opacity":new or(ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Er(ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new or(ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new or(ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nu(ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Er(ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Er(ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new or(ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ap extends a{constructor(t){super(t,Po)}createBucket(t){return new ja(t)}queryRadius(){return mh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,i,u,m,x,w,T,I){const D=gh(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),B=this.paint.get("fill-extrusion-height").evaluate(i,u),V=this.paint.get("fill-extrusion-base").evaluate(i,u),q=function(le,fe,Pe,Re){const rt=[];for(const Ue of le){const Qe=[Ue.x,Ue.y,0,1];md(Qe,Qe,fe),rt.push(new U(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return rt}(D,I),te=function(le,fe,Pe,Re){const rt=[],Ue=[],Qe=Re[8]*fe,gt=Re[9]*fe,Rt=Re[10]*fe,ir=Re[11]*fe,zr=Re[8]*Pe,rr=Re[9]*Pe,Jt=Re[10]*Pe,vr=Re[11]*Pe;for(const fr of le){const ur=[],Tt=[];for(const br of fr){const _r=br.x,$r=br.y,Yn=Re[0]*_r+Re[4]*$r+Re[12],$n=Re[1]*_r+Re[5]*$r+Re[13],ls=Re[2]*_r+Re[6]*$r+Re[14],rl=Re[3]*_r+Re[7]*$r+Re[15],Fs=ls+Rt,us=rl+ir,_a=Yn+zr,va=$n+rr,xa=ls+Jt,Di=rl+vr,cs=new U((Yn+Qe)/us,($n+gt)/us);cs.z=Fs/us,ur.push(cs);const Js=new U(_a/Di,va/Di);Js.z=xa/Di,Tt.push(Js)}rt.push(ur),Ue.push(Tt)}return[rt,Ue]}(m,V,B,I);return function(le,fe,Pe){let Re=1/0;gf(Pe,fe)&&(Re=Dp(Pe,fe[0]));for(let rt=0;rt<fe.length;rt++){const Ue=fe[rt],Qe=le[rt];for(let gt=0;gt<Ue.length-1;gt++){const Rt=Ue[gt],ir=[Rt,Ue[gt+1],Qe[gt+1],Qe[gt],Rt];mf(Pe,ir)&&(Re=Math.min(Re,Dp(Pe,ir)))}}return Re!==1/0&&Re}(te[0],te[1],q)}}function fa(r,t){return r.x*t.x+r.y*t.y}function Dp(r,t){if(r.length===1){let i=0;const u=t[i++];let m;for(;!m||u.equals(m);)if(m=t[i++],!m)return 1/0;for(;i<t.length;i++){const x=t[i],w=r[0],T=m.sub(u),I=x.sub(u),D=w.sub(u),B=fa(T,T),V=fa(T,I),q=fa(I,I),te=fa(D,T),le=fa(D,I),fe=B*q-V*V,Pe=(q*te-V*le)/fe,Re=(B*le-V*te)/fe,rt=u.z*(1-Pe-Re)+m.z*Pe+x.z*Re;if(isFinite(rt))return rt}return 1/0}{let i=1/0;for(const u of t)i=Math.min(i,u.z);return i}}const zp=E([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Rp}=zp,Lp=E([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Op}=Lp,ig=cu.VectorTileFeature.types,Cd=Math.cos(Math.PI/180*37.5),Id=Math.pow(2,14)/.5;class pa{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(i=>{this.gradients[i.id]={}}),this.layoutVertexArray=new za,this.layoutVertexArray2=new Ko,this.indexArray=new da,this.programConfigurations=new Io(t.layers,t.zoom),this.segments=new Qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(t,i,u){this.hasPattern=Sd("line",this.layers,i);const m=this.layers[0].layout.get("line-sort-key"),x=!m.isConstant(),w=[];for(const{feature:T,id:I,index:D,sourceLayerIndex:B}of t){const V=this.layers[0]._featureFilter.needGeometry,q=lu(T,V);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),q,u))continue;const te=x?m.evaluate(q,{},u):void 0,le={id:I,properties:T.properties,type:T.type,sourceLayerIndex:B,index:D,geometry:V?q.geometry:ou(T),patterns:{},sortKey:te};w.push(le)}x&&w.sort((T,I)=>T.sortKey-I.sortKey);for(const T of w){const{geometry:I,index:D,sourceLayerIndex:B}=T;if(this.hasPattern){const V=wh("line",this.layers,T,this.zoom,i);this.patternFeatures.push(V)}else this.addFeature(T,I,D,u,{});i.featureIndex.insert(t[D].feature,I,D,B,this.index)}}update(t,i,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,u)}addFeatures(t,i,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,i,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Op)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rp),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,i,u,m,x){const w=this.layers[0].layout,T=w.get("line-join").evaluate(t,{}),I=w.get("line-cap"),D=w.get("line-miter-limit"),B=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const V of i)this.addLine(V,t,T,I,D,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,x,m)}addLine(t,i,u,m,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<t.length-1;Re++)this.totalDistance+=t[Re].dist(t[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=ig[i.type]==="Polygon";let I=t.length;for(;I>=2&&t[I-1].equals(t[I-2]);)I--;let D=0;for(;D<I-1&&t[D].equals(t[D+1]);)D++;if(I<(T?3:2))return;u==="bevel"&&(x=1.05);const B=this.overscaling<=16?15*mi/(512*this.overscaling):0,V=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let q,te,le,fe,Pe;this.e1=this.e2=-1,T&&(q=t[I-2],Pe=t[D].sub(q)._unit()._perp());for(let Re=D;Re<I;Re++){if(le=Re===I-1?T?t[D+1]:void 0:t[Re+1],le&&t[Re].equals(le))continue;Pe&&(fe=Pe),q&&(te=q),q=t[Re],Pe=le?le.sub(q)._unit()._perp():fe,fe=fe||Pe;let rt=fe.add(Pe);rt.x===0&&rt.y===0||rt._unit();const Ue=fe.x*Pe.x+fe.y*Pe.y,Qe=rt.x*Pe.x+rt.y*Pe.y,gt=Qe!==0?1/Qe:1/0,Rt=2*Math.sqrt(2-2*Qe),ir=Qe<Cd&&te&&le,zr=fe.x*Pe.y-fe.y*Pe.x>0;if(ir&&Re>D){const vr=q.dist(te);if(vr>2*B){const fr=q.sub(q.sub(te)._mult(B/vr)._round());this.updateDistance(te,fr),this.addCurrentVertex(fr,fe,0,0,V),te=fr}}const rr=te&&le;let Jt=rr?u:T?"butt":m;if(rr&&Jt==="round"&&(gt<w?Jt="miter":gt<=2&&(Jt="fakeround")),Jt==="miter"&&gt>x&&(Jt="bevel"),Jt==="bevel"&&(gt>2&&(Jt="flipbevel"),gt<x&&(Jt="miter")),te&&this.updateDistance(te,q),Jt==="miter")rt._mult(gt),this.addCurrentVertex(q,rt,0,0,V);else if(Jt==="flipbevel"){if(gt>100)rt=Pe.mult(-1);else{const vr=gt*fe.add(Pe).mag()/fe.sub(Pe).mag();rt._perp()._mult(vr*(zr?-1:1))}this.addCurrentVertex(q,rt,0,0,V),this.addCurrentVertex(q,rt.mult(-1),0,0,V)}else if(Jt==="bevel"||Jt==="fakeround"){const vr=-Math.sqrt(gt*gt-1),fr=zr?vr:0,ur=zr?0:vr;if(te&&this.addCurrentVertex(q,fe,fr,ur,V),Jt==="fakeround"){const Tt=Math.round(180*Rt/Math.PI/20);for(let br=1;br<Tt;br++){let _r=br/Tt;if(_r!==.5){const Yn=_r-.5;_r+=_r*Yn*(_r-1)*((1.0904+Ue*(Ue*(3.55645-1.43519*Ue)-3.2452))*Yn*Yn+(.848013+Ue*(.215638*Ue-1.06021)))}const $r=Pe.sub(fe)._mult(_r)._add(fe)._unit()._mult(zr?-1:1);this.addHalfVertex(q,$r.x,$r.y,!1,zr,0,V)}}le&&this.addCurrentVertex(q,Pe,-fr,-ur,V)}else if(Jt==="butt")this.addCurrentVertex(q,rt,0,0,V);else if(Jt==="square"){const vr=te?1:-1;this.addCurrentVertex(q,rt,vr,vr,V)}else Jt==="round"&&(te&&(this.addCurrentVertex(q,fe,0,0,V),this.addCurrentVertex(q,fe,1,1,V,!0)),le&&(this.addCurrentVertex(q,Pe,-1,-1,V,!0),this.addCurrentVertex(q,Pe,0,0,V)));if(ir&&Re<I-1){const vr=q.dist(le);if(vr>2*B){const fr=q.add(le.sub(q)._mult(B/vr)._round());this.updateDistance(q,fr),this.addCurrentVertex(fr,Pe,0,0,V),q=fr}}}}addCurrentVertex(t,i,u,m,x,w=!1){const T=i.y*m-i.x,I=-i.y-i.x*m;this.addHalfVertex(t,i.x+i.y*u,i.y-i.x*u,w,!1,u,x),this.addHalfVertex(t,T,I,w,!0,-m,x),this.distance>Id/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,i,u,m,x,w))}addHalfVertex({x:t,y:i},u,m,x,w,T,I){const D=.5*(this.lineClips?this.scaledDistance*(Id-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(x?1:0),(i<<1)+(w?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),I.primitiveLength++),w?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,i){this.distance+=t.dist(i),this.updateScaledDistance()}}let gn,Qi;ar("LineBucket",pa,{omit:["layers","patternFeatures"]});var Vi={get paint(){return Qi=Qi||new v({"line-opacity":new Er(ye.paint_line["line-opacity"]),"line-color":new Er(ye.paint_line["line-color"]),"line-translate":new or(ye.paint_line["line-translate"]),"line-translate-anchor":new or(ye.paint_line["line-translate-anchor"]),"line-width":new Er(ye.paint_line["line-width"]),"line-gap-width":new Er(ye.paint_line["line-gap-width"]),"line-offset":new Er(ye.paint_line["line-offset"]),"line-blur":new Er(ye.paint_line["line-blur"]),"line-dasharray":new Gu(ye.paint_line["line-dasharray"]),"line-pattern":new nu(ye.paint_line["line-pattern"]),"line-gradient":new oh(ye.paint_line["line-gradient"])})},get layout(){return gn=gn||new v({"line-cap":new or(ye.layout_line["line-cap"]),"line-join":new Er(ye.layout_line["line-join"]),"line-miter-limit":new or(ye.layout_line["line-miter-limit"]),"line-round-limit":new or(ye.layout_line["line-round-limit"]),"line-sort-key":new Er(ye.layout_line["line-sort-key"])})}};class xs extends Er{possiblyEvaluate(t,i){return i=new an(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(t,i)}evaluate(t,i,u,m){return i=je({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(t,i,u,m)}}let Ls;class Rc extends a{constructor(t){super(t,Vi),this.gradientVersion=0,Ls||(Ls=new xs(Vi.paint.properties["line-width"].specification),Ls.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const i=this.gradientExpression();this.stepInterpolant=!!function(u){return u._styleExpression!==void 0}(i)&&i._styleExpression.expression instanceof Fi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,i){super.recalculate(t,i),this.paint._values["line-floorwidth"]=Ls.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new pa(t)}queryRadius(t){const i=t,u=Gi(qu("line-width",this,i),qu("line-gap-width",this,i)),m=qu("line-offset",this,i);return u/2+Math.abs(m)+mh(this.paint.get("line-translate"))}queryIntersectsFeature(t,i,u,m,x,w,T){const I=gh(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),D=T/2*Gi(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),B=this.paint.get("line-offset").evaluate(i,u);return B&&(m=function(V,q){const te=[];for(let le=0;le<V.length;le++){const fe=V[le],Pe=[];for(let Re=0;Re<fe.length;Re++){const rt=fe[Re-1],Ue=fe[Re],Qe=fe[Re+1],gt=Re===0?new U(0,0):Ue.sub(rt)._unit()._perp(),Rt=Re===fe.length-1?new U(0,0):Qe.sub(Ue)._unit()._perp(),ir=gt._add(Rt)._unit(),zr=ir.x*Rt.x+ir.y*Rt.y;zr!==0&&ir._mult(1/zr),Pe.push(ir._mult(q)._add(Ue))}te.push(Pe)}return te}(m,B*T)),function(V,q,te){for(let le=0;le<q.length;le++){const fe=q[le];if(V.length>=3){for(let Pe=0;Pe<fe.length;Pe++)if(Zu(V,fe[Pe]))return!0}if(dd(V,fe,te))return!0}return!1}(I,m,D)}isTileClipped(){return!0}}function Gi(r,t){return t>0?t+2*r:r}const Th=E([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ju=E([{name:"a_projected_pos",components:3,type:"Float32"}],4);E([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Pd=E([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);E([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Md=E([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Eh=E([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ma(r,t,i){return r.sections.forEach(u=>{u.text=function(m,x,w){const T=x.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),zn.applyArabicShaping&&(m=zn.applyArabicShaping(m)),m}(u.text,t,i)}),r}E([{name:"triangle",components:3,type:"Uint16"}]),E([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),E([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),E([{type:"Float32",name:"offsetX"}]),E([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),E([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Qu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ri=24,el=dn,Ch=function(r,t,i,u,m){var x,w,T=8*m-u-1,I=(1<<T)-1,D=I>>1,B=-7,V=m-1,q=-1,te=r[t+V];for(V+=q,x=te&(1<<-B)-1,te>>=-B,B+=T;B>0;x=256*x+r[t+V],V+=q,B-=8);for(w=x&(1<<-B)-1,x>>=-B,B+=u;B>0;w=256*w+r[t+V],V+=q,B-=8);if(x===0)x=1-D;else{if(x===I)return w?NaN:1/0*(te?-1:1);w+=Math.pow(2,u),x-=D}return(te?-1:1)*w*Math.pow(2,x-u)},Ad=function(r,t,i,u,m,x){var w,T,I,D=8*x-m-1,B=(1<<D)-1,V=B>>1,q=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=0,le=1,fe=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(T=isNaN(t)?1:0,w=B):(w=Math.floor(Math.log(t)/Math.LN2),t*(I=Math.pow(2,-w))<1&&(w--,I*=2),(t+=w+V>=1?q/I:q*Math.pow(2,1-V))*I>=2&&(w++,I/=2),w+V>=B?(T=0,w=B):w+V>=1?(T=(t*I-1)*Math.pow(2,m),w+=V):(T=t*Math.pow(2,V-1)*Math.pow(2,m),w=0));m>=8;r[i+te]=255&T,te+=le,T/=256,m-=8);for(w=w<<m|T,D+=m;D>0;r[i+te]=255&w,te+=le,w/=256,D-=8);r[i+te-le]|=128*fe};function dn(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}dn.Varint=0,dn.Fixed64=1,dn.Bytes=2,dn.Fixed32=5;var Lc=4294967296,Cl=1/Lc,Ih=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Ua(r){return r.type===dn.Bytes?r.readVarint()+r.pos:r.pos+1}function fu(r,t,i){return i?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function Ph(r,t,i){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(u);for(var m=i.pos-1;m>=r;m--)i.buf[m+u]=i.buf[m]}function Dd(r,t){for(var i=0;i<r.length;i++)t.writeVarint(r[i])}function Xs(r,t){for(var i=0;i<r.length;i++)t.writeSVarint(r[i])}function pu(r,t){for(var i=0;i<r.length;i++)t.writeFloat(r[i])}function Mo(r,t){for(var i=0;i<r.length;i++)t.writeDouble(r[i])}function ga(r,t){for(var i=0;i<r.length;i++)t.writeBoolean(r[i])}function Fp(r,t){for(var i=0;i<r.length;i++)t.writeFixed32(r[i])}function Af(r,t){for(var i=0;i<r.length;i++)t.writeSFixed32(r[i])}function Df(r,t){for(var i=0;i<r.length;i++)t.writeFixed64(r[i])}function sg(r,t){for(var i=0;i<r.length;i++)t.writeSFixed64(r[i])}function Ao(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function ec(r,t,i){r[i]=t,r[i+1]=t>>>8,r[i+2]=t>>>16,r[i+3]=t>>>24}function zd(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}dn.prototype={destroy:function(){this.buf=null},readFields:function(r,t,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),m=u>>3,x=this.pos;this.type=7&u,r(m,t,this),this.pos===x&&this.skip(u)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=Ao(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=zd(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Ao(this.buf,this.pos)+Ao(this.buf,this.pos+4)*Lc;return this.pos+=8,r},readSFixed64:function(){var r=Ao(this.buf,this.pos)+zd(this.buf,this.pos+4)*Lc;return this.pos+=8,r},readFloat:function(){var r=Ch(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Ch(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,i,u=this.buf;return t=127&(i=u[this.pos++]),i<128?t:(t|=(127&(i=u[this.pos++]))<<7,i<128?t:(t|=(127&(i=u[this.pos++]))<<14,i<128?t:(t|=(127&(i=u[this.pos++]))<<21,i<128?t:function(m,x,w){var T,I,D=w.buf;if(T=(112&(I=D[w.pos++]))>>4,I<128||(T|=(127&(I=D[w.pos++]))<<3,I<128)||(T|=(127&(I=D[w.pos++]))<<10,I<128)||(T|=(127&(I=D[w.pos++]))<<17,I<128)||(T|=(127&(I=D[w.pos++]))<<24,I<128)||(T|=(1&(I=D[w.pos++]))<<31,I<128))return fu(m,T,x);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=u[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&Ih?function(i,u,m){return Ih.decode(i.subarray(u,m))}(this.buf,t,r):function(i,u,m){for(var x="",w=u;w<m;){var T,I,D,B=i[w],V=null,q=B>239?4:B>223?3:B>191?2:1;if(w+q>m)break;q===1?B<128&&(V=B):q===2?(192&(T=i[w+1]))==128&&(V=(31&B)<<6|63&T)<=127&&(V=null):q===3?(I=i[w+2],(192&(T=i[w+1]))==128&&(192&I)==128&&((V=(15&B)<<12|(63&T)<<6|63&I)<=2047||V>=55296&&V<=57343)&&(V=null)):q===4&&(I=i[w+2],D=i[w+3],(192&(T=i[w+1]))==128&&(192&I)==128&&(192&D)==128&&((V=(15&B)<<18|(63&T)<<12|(63&I)<<6|63&D)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,q=1):V>65535&&(V-=65536,x+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),x+=String.fromCharCode(V),w+=q}return x}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==dn.Bytes)return r.push(this.readVarint(t));var i=Ua(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==dn.Bytes)return r.push(this.readSVarint());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==dn.Bytes)return r.push(this.readBoolean());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==dn.Bytes)return r.push(this.readFloat());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==dn.Bytes)return r.push(this.readDouble());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==dn.Bytes)return r.push(this.readFixed32());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==dn.Bytes)return r.push(this.readSFixed32());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==dn.Bytes)return r.push(this.readFixed64());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==dn.Bytes)return r.push(this.readSFixed64());var t=Ua(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===dn.Varint)for(;this.buf[this.pos++]>127;);else if(t===dn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===dn.Fixed32)this.pos+=4;else{if(t!==dn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),ec(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),ec(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),ec(this.buf,-1&r,this.pos),ec(this.buf,Math.floor(r*Cl),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),ec(this.buf,-1&r,this.pos),ec(this.buf,Math.floor(r*Cl),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,i){var u,m;if(t>=0?(u=t%4294967296|0,m=t/4294967296|0):(m=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,m=m+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(x,w,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)}(u,0,i),function(x,w){var T=(7&x)<<4;w.buf[w.pos++]|=T|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(m,i)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(u,m,x){for(var w,T,I=0;I<m.length;I++){if((w=m.charCodeAt(I))>55295&&w<57344){if(!T){w>56319||I+1===m.length?(u[x++]=239,u[x++]=191,u[x++]=189):T=w;continue}if(w<56320){u[x++]=239,u[x++]=191,u[x++]=189,T=w;continue}w=T-55296<<10|w-56320|65536,T=null}else T&&(u[x++]=239,u[x++]=191,u[x++]=189,T=null);w<128?u[x++]=w:(w<2048?u[x++]=w>>6|192:(w<65536?u[x++]=w>>12|224:(u[x++]=w>>18|240,u[x++]=w>>12&63|128),u[x++]=w>>6&63|128),u[x++]=63&w|128)}return x}(this.buf,r,this.pos);var i=this.pos-t;i>=128&&Ph(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),Ad(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Ad(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,t){this.pos++;var i=this.pos;r(t,this);var u=this.pos-i;u>=128&&Ph(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(r,t,i){this.writeTag(r,dn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,Dd,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,Xs,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,ga,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,pu,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,Mo,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,Fp,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,Af,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,Df,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,sg,t)},writeBytesField:function(r,t){this.writeTag(r,dn.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,dn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,dn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,dn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,dn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,dn.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,dn.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,dn.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,dn.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,dn.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,!!t)}};var Il=R(el);const Mh=3;function tc(r,t,i){r===1&&i.readMessage(Bp,t)}function Bp(r,t,i){if(r===3){const{id:u,bitmap:m,width:x,height:w,left:T,top:I,advance:D}=i.readMessage(Np,{});t.push({id:u,bitmap:new Yu({width:x+2*Mh,height:w+2*Mh},m),metrics:{width:x,height:w,left:T,top:I,advance:D}})}}function Np(r,t,i){r===1?t.id=i.readVarint():r===2?t.bitmap=i.readBytes():r===3?t.width=i.readVarint():r===4?t.height=i.readVarint():r===5?t.left=i.readSVarint():r===6?t.top=i.readSVarint():r===7&&(t.advance=i.readVarint())}const zf=Mh;function Ah(r){let t=0,i=0;for(const w of r)t+=w.w*w.h,i=Math.max(i,w.w);r.sort((w,T)=>T.h-w.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}];let m=0,x=0;for(const w of r)for(let T=u.length-1;T>=0;T--){const I=u[T];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,x=Math.max(x,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===I.w&&w.h===I.h){const D=u.pop();T<u.length&&(u[T]=D)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(u.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:m,h:x,fill:t/(m*x)||0}}const Ks=1;class Rf{constructor(t,{pixelRatio:i,version:u,stretchX:m,stretchY:x,content:w,textFitWidth:T,textFitHeight:I}){this.paddedRect=t,this.pixelRatio=i,this.stretchX=m,this.stretchY=x,this.content=w,this.version=u,this.textFitWidth=T,this.textFitHeight=I}get tl(){return[this.paddedRect.x+Ks,this.paddedRect.y+Ks]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ks,this.paddedRect.y+this.paddedRect.h-Ks]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ks)/this.pixelRatio,(this.paddedRect.h-2*Ks)/this.pixelRatio]}}class Lf{constructor(t,i){const u={},m={};this.haveRenderCallbacks=[];const x=[];this.addImages(t,u,x),this.addImages(i,m,x);const{w,h:T}=Ah(x),I=new os({width:w||1,height:T||1});for(const D in t){const B=t[D],V=u[D].paddedRect;os.copy(B.data,I,{x:0,y:0},{x:V.x+Ks,y:V.y+Ks},B.data)}for(const D in i){const B=i[D],V=m[D].paddedRect,q=V.x+Ks,te=V.y+Ks,le=B.data.width,fe=B.data.height;os.copy(B.data,I,{x:0,y:0},{x:q,y:te},B.data),os.copy(B.data,I,{x:0,y:fe-1},{x:q,y:te-1},{width:le,height:1}),os.copy(B.data,I,{x:0,y:0},{x:q,y:te+fe},{width:le,height:1}),os.copy(B.data,I,{x:le-1,y:0},{x:q-1,y:te},{width:1,height:fe}),os.copy(B.data,I,{x:0,y:0},{x:q+le,y:te},{width:1,height:fe})}this.image=I,this.iconPositions=u,this.patternPositions=m}addImages(t,i,u){for(const m in t){const x=t[m],w={x:0,y:0,w:x.data.width+2*Ks,h:x.data.height+2*Ks};u.push(w),i[m]=new Rf(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(t,i){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),i),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),i)}patchUpdatedImage(t,i,u){if(!t||!i||t.version===i.version)return;t.version=i.version;const[m,x]=t.tl;u.update(i.data,void 0,{x:m,y:x})}}var Pl;ar("ImagePosition",Rf),ar("ImageAtlas",Lf),S.ah=void 0,(Pl=S.ah||(S.ah={}))[Pl.none=0]="none",Pl[Pl.horizontal=1]="horizontal",Pl[Pl.vertical=2]="vertical",Pl[Pl.horizontalOnly=3]="horizontalOnly";const Do=-17;class Dh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,i){const u=new Dh;return u.scale=t||1,u.fontStack=i,u}static forImage(t){const i=new Dh;return i.imageName=t,i}}class zo{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,i){const u=new zo;for(let m=0;m<t.sections.length;m++){const x=t.sections[m];x.image?u.addImageSection(x):u.addTextSection(x,i)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let i="";for(let u=0;u<t.length;u++){const m=t.charCodeAt(u+1)||null,x=t.charCodeAt(u-1)||null;i+=m&&El(m)&&!Qu[t[u+1]]||x&&El(x)&&!Qu[t[u-1]]||!Qu[t[u]]?t[u]:Qu[t[u]]}return i}(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&ui[this.text.charCodeAt(u)];u++)t++;let i=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&ui[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)}substring(t,i){const u=new zo;return u.text=this.text.substring(t,i),u.sectionIndex=this.sectionIndex.slice(t,i),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,i)=>Math.max(t,this.sections[i].scale),0)}addTextSection(t,i){this.text+=t.text,this.sections.push(Dh.forText(t.scale,t.fontStack||i));const u=this.sections.length-1;for(let m=0;m<t.text.length;++m)this.sectionIndex.push(u)}addImageSection(t){const i=t.image?t.image.name:"";if(i.length===0)return void Je("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Dh.forImage(i)),this.sectionIndex.push(this.sections.length-1)):Je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function zh(r,t,i,u,m,x,w,T,I,D,B,V,q,te,le){const fe=zo.fromFeature(r,m);let Pe;V===S.ah.vertical&&fe.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:rt}=zn;if(Re&&fe.sections.length===1){Pe=[];const gt=Re(fe.toString(),ya(fe,D,x,t,u,te));for(const Rt of gt){const ir=new zo;ir.text=Rt,ir.sections=fe.sections;for(let zr=0;zr<Rt.length;zr++)ir.sectionIndex.push(0);Pe.push(ir)}}else if(rt){Pe=[];const gt=rt(fe.text,fe.sectionIndex,ya(fe,D,x,t,u,te));for(const Rt of gt){const ir=new zo;ir.text=Rt[0],ir.sectionIndex=Rt[1],ir.sections=fe.sections,Pe.push(ir)}}else Pe=function(gt,Rt){const ir=[],zr=gt.text;let rr=0;for(const Jt of Rt)ir.push(gt.substring(rr,Jt)),rr=Jt;return rr<zr.length&&ir.push(gt.substring(rr,zr.length)),ir}(fe,ya(fe,D,x,t,u,te));const Ue=[],Qe={positionedLines:Ue,text:fe.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(gt,Rt,ir,zr,rr,Jt,vr,fr,ur,Tt,br,_r){let $r=0,Yn=Do,$n=0,ls=0;const rl=fr==="right"?1:fr==="left"?0:.5;let Fs=0;for(const Di of rr){Di.trim();const cs=Di.getMaxScale(),Js=(cs-1)*ri,Bs={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Fs]=Bs;const wa=Bs.positionedGlyphs;let Ns=0;if(!Di.length()){Yn+=Jt,++Fs;continue}for(let Va=0;Va<Di.length();Va++){const yn=Di.getSection(Va),ei=Di.getSectionIndex(Va),ni=Di.getCharCode(Va);let io=0,gi=null,Ud=null,_u=null,vu=ri;const nl=!(ur===S.ah.horizontal||!br&&!$u(ni)||br&&(ui[ni]||(us=ni,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(us)))));if(yn.imageName){const Lo=zr[yn.imageName];if(!Lo)continue;_u=yn.imageName,gt.iconsInText=gt.iconsInText||!0,Ud=Lo.paddedRect;const ws=Lo.displaySize;yn.scale=yn.scale*ri/_r,gi={width:ws[0],height:ws[1],left:Ks,top:-3,advance:nl?ws[1]:ws[0]},io=Js+(ri-ws[1]*yn.scale),vu=gi.advance;const nc=nl?ws[0]*yn.scale-ri*cs:ws[1]*yn.scale-ri*cs;nc>0&&nc>Ns&&(Ns=nc)}else{const Lo=ir[yn.fontStack],ws=Lo&&Lo[ni];if(ws&&ws.rect)Ud=ws.rect,gi=ws.metrics;else{const nc=Rt[yn.fontStack],Vf=nc&&nc[ni];if(!Vf)continue;gi=Vf.metrics}io=(cs-yn.scale)*ri}nl?(gt.verticalizable=!0,wa.push({glyph:ni,imageName:_u,x:$r,y:Yn+io,vertical:nl,scale:yn.scale,fontStack:yn.fontStack,sectionIndex:ei,metrics:gi,rect:Ud}),$r+=vu*yn.scale+Tt):(wa.push({glyph:ni,imageName:_u,x:$r,y:Yn+io,vertical:nl,scale:yn.scale,fontStack:yn.fontStack,sectionIndex:ei,metrics:gi,rect:Ud}),$r+=gi.advance*yn.scale+Tt)}wa.length!==0&&($n=Math.max($r-Tt,$n),og(wa,0,wa.length-1,rl,Ns)),$r=0;const Ro=Jt*cs+Ns;Bs.lineOffset=Math.max(Ns,Js),Yn+=Ro,ls=Math.max(Ro,ls),++Fs}var us;const _a=Yn-Do,{horizontalAlign:va,verticalAlign:xa}=Rh(vr);(function(Di,cs,Js,Bs,wa,Ns,Ro,Va,yn){const ei=(cs-Js)*wa;let ni=0;ni=Ns!==Ro?-Va*Bs-Do:(-Bs*yn+.5)*Ro;for(const io of Di)for(const gi of io.positionedGlyphs)gi.x+=ei,gi.y+=ni})(gt.positionedLines,rl,va,xa,$n,ls,Jt,_a,rr.length),gt.top+=-xa*_a,gt.bottom=gt.top+_a,gt.left+=-va*$n,gt.right=gt.left+$n}(Qe,t,i,u,Pe,w,T,I,V,D,q,le),!function(gt){for(const Rt of gt)if(Rt.positionedGlyphs.length!==0)return!1;return!0}(Ue)&&Qe}const ui={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ag={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},jp={40:!0};function Up(r,t,i,u,m,x){if(t.imageName){const w=u[t.imageName];return w?w.displaySize[0]*t.scale*ri/x+m:0}{const w=i[t.fontStack],T=w&&w[r];return T?T.metrics.advance*t.scale+m:0}}function Vp(r,t,i,u){const m=Math.pow(r-t,2);return u?r<t?m/2:2*m:m+Math.abs(i)*i}function Hp(r,t,i){let u=0;return r===10&&(u-=1e4),i&&(u+=150),r!==40&&r!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function Of(r,t,i,u,m,x){let w=null,T=Vp(t,i,m,x);for(const I of u){const D=Vp(t-I.x,i,m,x)+I.badness;D<=T&&(w=I,T=D)}return{index:r,x:t,priorBreak:w,badness:T}}function $p(r){return r?$p(r.priorBreak).concat(r.index):[]}function ya(r,t,i,u,m,x){if(!r)return[];const w=[],T=function(V,q,te,le,fe,Pe){let Re=0;for(let rt=0;rt<V.length();rt++){const Ue=V.getSection(rt);Re+=Up(V.getCharCode(rt),Ue,le,fe,q,Pe)}return Re/Math.max(1,Math.ceil(Re/te))}(r,t,i,u,m,x),I=r.text.indexOf("​")>=0;let D=0;for(let V=0;V<r.length();V++){const q=r.getSection(V),te=r.getCharCode(V);if(ui[te]||(D+=Up(te,q,u,m,t,x)),V<r.length()-1){const le=!((B=te)<11904)&&(!!nn["CJK Compatibility Forms"](B)||!!nn["CJK Compatibility"](B)||!!nn["CJK Strokes"](B)||!!nn["CJK Symbols and Punctuation"](B)||!!nn["Enclosed CJK Letters and Months"](B)||!!nn["Halfwidth and Fullwidth Forms"](B)||!!nn["Ideographic Description Characters"](B)||!!nn["Vertical Forms"](B)||Hu.test(String.fromCodePoint(B)));(ag[te]||le||q.imageName||V!==r.length()-2&&jp[r.getCharCode(V+1)])&&w.push(Of(V+1,D,T,w,Hp(te,r.getCharCode(V+1),le&&I),!1))}}var B;return $p(Of(r.length(),D,T,w,0,!0))}function Rh(r){let t=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function og(r,t,i,u,m){if(!u&&!m)return;const x=r[i],w=(r[i].x+x.metrics.advance*x.scale)*u;for(let T=t;T<=i;T++)r[T].x-=w,r[T].y+=m}function mu(r,t,i){const{horizontalAlign:u,verticalAlign:m}=Rh(i),x=t[0]-r.displaySize[0]*u,w=t[1]-r.displaySize[1]*m;return{image:r,top:w,bottom:w+r.displaySize[1],left:x,right:x+r.displaySize[0]}}function Lh(r){var t,i;let u=r.left,m=r.top,x=r.right-u,w=r.bottom-m;const T=(t=r.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",I=(i=r.image.textFitHeight)!==null&&i!==void 0?i:"stretchOrShrink",D=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(I==="proportional"){if(T==="stretchOnly"&&x/w<D||T==="proportional"){const B=Math.ceil(w*D);u*=B/x,x=B}}else if(T==="proportional"&&I==="stretchOnly"&&D!==0&&x/w>D){const B=Math.ceil(x/D);m*=B/w,w=B}return{x1:u,y1:m,x2:u+x,y2:m+w}}function gu(r,t,i,u,m,x){const w=r.image;let T;if(w.content){const Pe=w.content,Re=w.pixelRatio||1;T=[Pe[0]/Re,Pe[1]/Re,w.displaySize[0]-Pe[2]/Re,w.displaySize[1]-Pe[3]/Re]}const I=t.left*x,D=t.right*x;let B,V,q,te;i==="width"||i==="both"?(te=m[0]+I-u[3],V=m[0]+D+u[1]):(te=m[0]+(I+D-w.displaySize[0])/2,V=te+w.displaySize[0]);const le=t.top*x,fe=t.bottom*x;return i==="height"||i==="both"?(B=m[1]+le-u[0],q=m[1]+fe+u[2]):(B=m[1]+(le+fe-w.displaySize[1])/2,q=B+w.displaySize[1]),{image:w,top:B,right:V,bottom:q,left:te,collisionPadding:T}}const yu=255,no=128,tl=yu*no;function Wp(r,t){const{expression:i}=t;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new an(r+1))};if(i.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:m}=i;let x=0;for(;x<u.length&&u[x]<=r;)x++;x=Math.max(0,x-1);let w=x;for(;w<u.length&&u[w]<r+1;)w++;w=Math.min(u.length-1,w);const T=u[x],I=u[w];return i.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:I,minSize:i.evaluate(new an(T)),maxSize:i.evaluate(new an(I)),interpolationType:m}}}function Oh(r,t,i){let u="never";const m=r.get(t);return m?u=m:r.get(i)&&(u="always"),u}const lg=cu.VectorTileFeature.types,Gp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fh(r,t,i,u,m,x,w,T,I,D,B,V,q){const te=T?Math.min(tl,Math.round(T[0])):0,le=T?Math.min(tl,Math.round(T[1])):0;r.emplaceBack(t,i,Math.round(32*u),Math.round(32*m),x,w,(te<<1)+(I?1:0),le,16*D,16*B,256*V,256*q)}function Oc(r,t,i){r.emplaceBack(t.x,t.y,i),r.emplaceBack(t.x,t.y,i),r.emplaceBack(t.x,t.y,i),r.emplaceBack(t.x,t.y,i)}function Rd(r){for(const t of r.sections)if(Xo(t.text))return!0;return!1}class Ld{constructor(t){this.layoutVertexArray=new ha,this.indexArray=new da,this.programConfigurations=t,this.segments=new Qr,this.dynamicLayoutVertexArray=new eo,this.opacityVertexArray=new _s,this.hasVisibleVertices=!1,this.placedSymbolArray=new Mn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,i,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Th.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ju.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Gp,!0),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ar("SymbolBuffers",Ld);class Bh{constructor(t,i,u){this.layoutVertexArray=new t,this.layoutAttributes=i,this.indexArray=new u,this.segments=new Qr,this.collisionVertexArray=new Ra}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Pd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ar("CollisionBuffers",Bh);class Fc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(w=>w.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fd([]),this.placementViewportMatrix=fd([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Wp(this.zoom,i["text-size"]),this.iconSizeData=Wp(this.zoom,i["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),x=u.get("symbol-z-order");this.canOverlap=Oh(u,"text-overlap","text-allow-overlap")!=="never"||Oh(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(w=>S.ah[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=t.sourceID}createArrays(){this.text=new Ld(new Io(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Ld(new Io(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Rn,this.lineVertexArray=new $i,this.symbolInstances=new Jr,this.textAnchorOffsets=new Ln}calculateGlyphDependencies(t,i,u,m,x){for(let w=0;w<t.length;w++)if(i[t.charCodeAt(w)]=!0,(u||m)&&x){const T=Qu[t.charAt(w)];T&&(i[T.charCodeAt(0)]=!0)}}populate(t,i,u){const m=this.layers[0],x=m.layout,w=x.get("text-font"),T=x.get("text-field"),I=x.get("icon-image"),D=(T.value.kind!=="constant"||T.value.value instanceof ki&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),B=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!D&&!B)return;const q=i.iconDependencies,te=i.glyphDependencies,le=i.availableImages,fe=new an(this.zoom);for(const{feature:Pe,id:Re,index:rt,sourceLayerIndex:Ue}of t){const Qe=m._featureFilter.needGeometry,gt=lu(Pe,Qe);if(!m._featureFilter.filter(fe,gt,u))continue;let Rt,ir;if(Qe||(gt.geometry=ou(Pe)),D){const rr=m.getValueAndResolveTokens("text-field",gt,u,le),Jt=ki.factory(rr),vr=this.hasRTLText=this.hasRTLText||Rd(Jt);(!vr||zn.getRTLTextPluginStatus()==="unavailable"||vr&&zn.isParsed())&&(Rt=ma(Jt,m,gt))}if(B){const rr=m.getValueAndResolveTokens("icon-image",gt,u,le);ir=rr instanceof Jn?rr:Jn.fromString(rr)}if(!Rt&&!ir)continue;const zr=this.sortFeaturesByKey?V.evaluate(gt,{},u):void 0;if(this.features.push({id:Re,text:Rt,icon:ir,index:rt,sourceLayerIndex:Ue,geometry:gt.geometry,properties:Pe.properties,type:lg[Pe.type],sortKey:zr}),ir&&(q[ir.name]=!0),Rt){const rr=w.evaluate(gt,{},u).join(","),Jt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(S.ah.vertical)>=0;for(const vr of Rt.sections)if(vr.image)q[vr.image.name]=!0;else{const fr=ah(Rt.toString()),ur=vr.fontStack||rr,Tt=te[ur]=te[ur]||{};this.calculateGlyphDependencies(vr.text,Tt,Jt,this.allowVerticalPlacement,fr)}}}x.get("symbol-placement")==="line"&&(this.features=function(Pe){const Re={},rt={},Ue=[];let Qe=0;function gt(rr){Ue.push(Pe[rr]),Qe++}function Rt(rr,Jt,vr){const fr=rt[rr];return delete rt[rr],rt[Jt]=fr,Ue[fr].geometry[0].pop(),Ue[fr].geometry[0]=Ue[fr].geometry[0].concat(vr[0]),fr}function ir(rr,Jt,vr){const fr=Re[Jt];return delete Re[Jt],Re[rr]=fr,Ue[fr].geometry[0].shift(),Ue[fr].geometry[0]=vr[0].concat(Ue[fr].geometry[0]),fr}function zr(rr,Jt,vr){const fr=vr?Jt[0][Jt[0].length-1]:Jt[0][0];return`${rr}:${fr.x}:${fr.y}`}for(let rr=0;rr<Pe.length;rr++){const Jt=Pe[rr],vr=Jt.geometry,fr=Jt.text?Jt.text.toString():null;if(!fr){gt(rr);continue}const ur=zr(fr,vr),Tt=zr(fr,vr,!0);if(ur in rt&&Tt in Re&&rt[ur]!==Re[Tt]){const br=ir(ur,Tt,vr),_r=Rt(ur,Tt,Ue[br].geometry);delete Re[ur],delete rt[Tt],rt[zr(fr,Ue[_r].geometry,!0)]=_r,Ue[br].geometry=null}else ur in rt?Rt(ur,Tt,vr):Tt in Re?ir(ur,Tt,vr):(gt(rr),Re[ur]=Qe-1,rt[Tt]=Qe-1)}return Ue.filter(rr=>rr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Pe,Re)=>Pe.sortKey-Re.sortKey)}update(t,i,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,i,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,i,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,i){const u=this.lineVertexArray.length;if(t.segment!==void 0){let m=t.dist(i[t.segment+1]),x=t.dist(i[t.segment]);const w={};for(let T=t.segment+1;T<i.length;T++)w[T]={x:i[T].x,y:i[T].y,tileUnitDistanceFromAnchor:m},T<i.length-1&&(m+=i[T+1].dist(i[T]));for(let T=t.segment||0;T>=0;T--)w[T]={x:i[T].x,y:i[T].y,tileUnitDistanceFromAnchor:x},T>0&&(x+=i[T-1].dist(i[T]));for(let T=0;T<i.length;T++){const I=w[T];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,i,u,m,x,w,T,I,D,B,V,q){const te=t.indexArray,le=t.layoutVertexArray,fe=t.segments.prepareSegment(4*i.length,le,te,this.canOverlap?w.sortKey:void 0),Pe=this.glyphOffsetArray.length,Re=fe.vertexLength,rt=this.allowVerticalPlacement&&T===S.ah.vertical?Math.PI/2:0,Ue=w.text&&w.text.sections;for(let Qe=0;Qe<i.length;Qe++){const{tl:gt,tr:Rt,bl:ir,br:zr,tex:rr,pixelOffsetTL:Jt,pixelOffsetBR:vr,minFontScaleX:fr,minFontScaleY:ur,glyphOffset:Tt,isSDF:br,sectionIndex:_r}=i[Qe],$r=fe.vertexLength,Yn=Tt[1];Fh(le,I.x,I.y,gt.x,Yn+gt.y,rr.x,rr.y,u,br,Jt.x,Jt.y,fr,ur),Fh(le,I.x,I.y,Rt.x,Yn+Rt.y,rr.x+rr.w,rr.y,u,br,vr.x,Jt.y,fr,ur),Fh(le,I.x,I.y,ir.x,Yn+ir.y,rr.x,rr.y+rr.h,u,br,Jt.x,vr.y,fr,ur),Fh(le,I.x,I.y,zr.x,Yn+zr.y,rr.x+rr.w,rr.y+rr.h,u,br,vr.x,vr.y,fr,ur),Oc(t.dynamicLayoutVertexArray,I,rt),te.emplaceBack($r,$r+1,$r+2),te.emplaceBack($r+1,$r+2,$r+3),fe.vertexLength+=4,fe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Tt[0]),Qe!==i.length-1&&_r===i[Qe+1].sectionIndex||t.programConfigurations.populatePaintArrays(le.length,w,w.index,{},q,Ue&&Ue[_r])}t.placedSymbolArray.emplaceBack(I.x,I.y,Pe,this.glyphOffsetArray.length-Pe,Re,D,B,I.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],T,0,!1,0,V)}_addCollisionDebugVertex(t,i,u,m,x,w){return i.emplaceBack(0,0),t.emplaceBack(u.x,u.y,m,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(t,i,u,m,x,w,T){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),D=I.vertexLength,B=x.layoutVertexArray,V=x.collisionVertexArray,q=T.anchorX,te=T.anchorY;this._addCollisionDebugVertex(B,V,w,q,te,new U(t,i)),this._addCollisionDebugVertex(B,V,w,q,te,new U(u,i)),this._addCollisionDebugVertex(B,V,w,q,te,new U(u,m)),this._addCollisionDebugVertex(B,V,w,q,te,new U(t,m)),I.vertexLength+=4;const le=x.indexArray;le.emplaceBack(D,D+1),le.emplaceBack(D+1,D+2),le.emplaceBack(D+2,D+3),le.emplaceBack(D+3,D),I.primitiveLength+=4}addDebugCollisionBoxes(t,i,u,m){for(let x=t;x<i;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bh(Zs,Md.members,pi),this.iconCollisionBox=new Bh(Zs,Md.members,pi);for(let t=0;t<this.symbolInstances.length;t++){const i=this.symbolInstances.get(t);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}}_deserializeCollisionBoxesForSymbol(t,i,u,m,x,w,T,I,D){const B={};for(let V=i;V<u;V++){const q=t.get(V);B.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.textFeatureIndex=q.featureIndex;break}for(let V=m;V<x;V++){const q=t.get(V);B.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.verticalTextFeatureIndex=q.featureIndex;break}for(let V=w;V<T;V++){const q=t.get(V);B.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.iconFeatureIndex=q.featureIndex;break}for(let V=I;V<D;V++){const q=t.get(V);B.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.verticalIconFeatureIndex=q.featureIndex;break}return B}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){const u=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,i){const u=t.placedSymbolArray.get(i),m=u.vertexStartIndex+4*u.numGlyphs;for(let x=u.vertexStartIndex;x<m;x+=4)t.indexArray.emplaceBack(x,x+1,x+2),t.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const i=Math.sin(t),u=Math.cos(t),m=[],x=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const I=this.symbolInstances.get(T);m.push(0|Math.round(i*I.anchorX+u*I.anchorY)),x.push(I.featureIndex)}return w.sort((T,I)=>m[T]-m[I]||x[I]-x[T]),w}addToSortKeyRanges(t,i){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===i?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const i of this.symbolInstanceIndexes){const u=this.symbolInstances.get(i);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((m,x,w)=>{m>=0&&w.indexOf(m)===x&&this.addIndicesForPlacedSymbol(this.text,m)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ff,Od;ar("SymbolBucket",Fc,{omit:["layers","collisionBoxArray","features","compareText"]}),Fc.MAX_GLYPHS=65535,Fc.addDynamicAttributes=Oc;var Bc={get paint(){return Od=Od||new v({"icon-opacity":new Er(ye.paint_symbol["icon-opacity"]),"icon-color":new Er(ye.paint_symbol["icon-color"]),"icon-halo-color":new Er(ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Er(ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Er(ye.paint_symbol["icon-halo-blur"]),"icon-translate":new or(ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new or(ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Er(ye.paint_symbol["text-opacity"]),"text-color":new Er(ye.paint_symbol["text-color"],{runtimeType:kn,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new Er(ye.paint_symbol["text-halo-color"]),"text-halo-width":new Er(ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Er(ye.paint_symbol["text-halo-blur"]),"text-translate":new or(ye.paint_symbol["text-translate"]),"text-translate-anchor":new or(ye.paint_symbol["text-translate-anchor"])})},get layout(){return Ff=Ff||new v({"symbol-placement":new or(ye.layout_symbol["symbol-placement"]),"symbol-spacing":new or(ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new or(ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Er(ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new or(ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new or(ye.layout_symbol["icon-allow-overlap"]),"icon-overlap":new or(ye.layout_symbol["icon-overlap"]),"icon-ignore-placement":new or(ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new or(ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new or(ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Er(ye.layout_symbol["icon-size"]),"icon-text-fit":new or(ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new or(ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Er(ye.layout_symbol["icon-image"]),"icon-rotate":new Er(ye.layout_symbol["icon-rotate"]),"icon-padding":new Er(ye.layout_symbol["icon-padding"]),"icon-keep-upright":new or(ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Er(ye.layout_symbol["icon-offset"]),"icon-anchor":new Er(ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new or(ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new or(ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new or(ye.layout_symbol["text-rotation-alignment"]),"text-field":new Er(ye.layout_symbol["text-field"]),"text-font":new Er(ye.layout_symbol["text-font"]),"text-size":new Er(ye.layout_symbol["text-size"]),"text-max-width":new Er(ye.layout_symbol["text-max-width"]),"text-line-height":new or(ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Er(ye.layout_symbol["text-letter-spacing"]),"text-justify":new Er(ye.layout_symbol["text-justify"]),"text-radial-offset":new Er(ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new or(ye.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Er(ye.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Er(ye.layout_symbol["text-anchor"]),"text-max-angle":new or(ye.layout_symbol["text-max-angle"]),"text-writing-mode":new or(ye.layout_symbol["text-writing-mode"]),"text-rotate":new Er(ye.layout_symbol["text-rotate"]),"text-padding":new or(ye.layout_symbol["text-padding"]),"text-keep-upright":new or(ye.layout_symbol["text-keep-upright"]),"text-transform":new Er(ye.layout_symbol["text-transform"]),"text-offset":new Er(ye.layout_symbol["text-offset"]),"text-allow-overlap":new or(ye.layout_symbol["text-allow-overlap"]),"text-overlap":new or(ye.layout_symbol["text-overlap"]),"text-ignore-placement":new or(ye.layout_symbol["text-ignore-placement"]),"text-optional":new or(ye.layout_symbol["text-optional"])})}};class Fd{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:wi,this.defaultValue=t}evaluate(t){if(t.formattedSection){const i=this.defaultValue.property.overrides;if(i&&i.hasOverride(t.formattedSection))return i.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ar("FormatSectionOverride",Fd,{omit:["defaultValue"]});class rc extends a{constructor(t){super(t,Bc)}recalculate(t,i){if(super.recalculate(t,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const x of u)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,i,u,m){const x=this.layout.get(t).evaluate(i,{},u,m),w=this._unevaluatedLayout._values[t];return w.isDataDriven()||Wo(w.value)||!x?x:function(T,I){return I.replace(/{([^{}]+)}/g,(D,B)=>T&&B in T?String(T[B]):"")}(i.properties,x)}createBucket(t){return new Fc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Bc.paint.overridableProperties){if(!rc.hasPaintOverride(this.layout,t))continue;const i=this.paint.get(t),u=new Fd(i),m=new Is(u,i.property.specification);let x=null;x=i.value.kind==="constant"||i.value.kind==="source"?new xl("source",m):new wl("composite",m,i.value.zoomStops),this.paint._values[t]=new $s(i.property,x,i.parameters)}}_handleOverridablePaintPropertyUpdate(t,i,u){return!(!this.layout||i.isDataDriven()||u.isDataDriven())&&rc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,i){const u=t.get("text-field"),m=Bc.paint.properties[i];let x=!1;const w=T=>{for(const I of T)if(m.overrides&&m.overrides.hasOverride(I))return void(x=!0)};if(u.value.kind==="constant"&&u.value.value instanceof ki)w(u.value.value.sections);else if(u.value.kind==="source"){const T=D=>{x||(D instanceof Zi&&ln(D.value)===Ri?w(D.value.sections):D instanceof ns?w(D.sections):D.eachChild(T))},I=u.value;I._styleExpression&&T(I._styleExpression.expression)}return x}}let Bf;var ug={get paint(){return Bf=Bf||new v({"background-color":new or(ye.paint_background["background-color"]),"background-pattern":new Gu(ye.paint_background["background-pattern"]),"background-opacity":new or(ye.paint_background["background-opacity"])})}};class Bd extends a{constructor(t){super(t,ug)}}let Zp;var Nh={get paint(){return Zp=Zp||new v({"raster-opacity":new or(ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new or(ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new or(ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new or(ye.paint_raster["raster-brightness-max"]),"raster-saturation":new or(ye.paint_raster["raster-saturation"]),"raster-contrast":new or(ye.paint_raster["raster-contrast"]),"raster-resampling":new or(ye.paint_raster["raster-resampling"]),"raster-fade-duration":new or(ye.paint_raster["raster-fade-duration"])})}};class cg extends a{constructor(t){super(t,Nh)}}class Nd extends a{constructor(t){super(t,{}),this.onAdd=i=>{this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},this.onRemove=i=>{this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class s{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const o=63710088e-1;class g{constructor(t,i){if(isNaN(t)||isNaN(i))throw new Error(`Invalid LngLat object: (${t}, ${i})`);if(this.lng=+t,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new g(Ge(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const i=Math.PI/180,u=this.lat*i,m=t.lat*i,x=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((t.lng-this.lng)*i);return o*Math.acos(Math.min(x,1))}static convert(t){if(t instanceof g)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new g(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new g(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const k=2*Math.PI*o;function M(r){return k*Math.cos(r*Math.PI/180)}function O(r){return(180+r)/360}function ie(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function ze(r,t){return r/M(t)}function He(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class mt{constructor(t,i,u=0){this.x=+t,this.y=+i,this.z=+u}static fromLngLat(t,i=0){const u=g.convert(t);return new mt(O(u.lng),ie(u.lat),ze(i,u.lat))}toLngLat(){return new g(360*this.x-180,He(this.y))}toAltitude(){return this.z*M(He(this.y))}meterInMercatorCoordinateUnits(){return 1/k*(t=He(this.y),1/Math.cos(t*Math.PI/180));var t}}function Ft(r,t,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[r*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class jt{constructor(t,i,u){if(!function(m,x,w){return!(m<0||m>25||w<0||w>=Math.pow(2,m)||x<0||x>=Math.pow(2,m))}(t,i,u))throw new Error(`x=${i}, y=${u}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=i,this.y=u,this.key=yr(0,t,t,i,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,i,u){const m=(w=this.y,T=this.z,I=Ft(256*(x=this.x),256*(w=Math.pow(2,T)-w-1),T),D=Ft(256*(x+1),256*(w+1),T),I[0]+","+I[1]+","+D[0]+","+D[1]);var x,w,T,I,D;const B=function(V,q,te){let le,fe="";for(let Pe=V;Pe>0;Pe--)le=1<<Pe-1,fe+=(q&le?1:0)+(te&le?2:0);return fe}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,i>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,m)}isChildOf(t){const i=this.z-t.z;return i>0&&t.x===this.x>>i&&t.y===this.y>>i}getTilePoint(t){const i=Math.pow(2,this.z);return new U((t.x*i-this.x)*mi,(t.y*i-this.y)*mi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ot{constructor(t,i){this.wrap=t,this.canonical=i,this.key=yr(t,i.z,i.z,i.x,i.y)}}class tr{constructor(t,i,u,m,x){if(t<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${u}`);this.overscaledZ=t,this.wrap=i,this.canonical=new jt(u,+m,+x),this.key=yr(i,t,u,m,x)}clone(){return new tr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const i=this.canonical.z-t;return t>this.canonical.z?new tr(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new tr(t,this.wrap,t,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(t,i){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-t;return t>this.canonical.z?yr(this.wrap*+i,t,this.canonical.z,this.canonical.x,this.canonical.y):yr(this.wrap*+i,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const i=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>i&&t.canonical.y===this.canonical.y>>i}children(t){if(this.overscaledZ>=t)return[new tr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const i=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new tr(i,this.wrap,i,u,m),new tr(i,this.wrap,i,u+1,m),new tr(i,this.wrap,i,u,m+1),new tr(i,this.wrap,i,u+1,m+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new tr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new tr(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ot(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new mt(t.x-this.wrap,t.y))}}function yr(r,t,i,u,m){(r*=2)<0&&(r=-1*r-1);const x=1<<i;return(x*x*r+x*m+u).toString(36)+i.toString(36)+t.toString(36)}ar("CanonicalTileID",jt),ar("OverscaledTileID",tr,{omit:["posMatrix"]});class Tr{constructor(t,i,u,m=1,x=1,w=1,T=0){if(this.uid=t,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void Je(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=i.height;const I=this.dim=i.height-2;switch(this.data=new Uint32Array(i.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=x,this.blueFactor=w,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<I;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(I,D)]=this.data[this._idx(I-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,I)]=this.data[this._idx(D,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<I;D++)for(let B=0;B<I;B++){const V=this.get(D,B);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(t,i){const u=new Uint8Array(this.data.buffer),m=4*this._idx(t,i);return this.unpack(u[m],u[m+1],u[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,i){if(t<-1||t>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(t+1)}unpack(t,i,u){return t*this.redFactor+i*this.greenFactor+u*this.blueFactor-this.baseShift}getPixels(){return new os({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,i,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let m=i*this.dim,x=i*this.dim+this.dim,w=u*this.dim,T=u*this.dim+this.dim;switch(i){case-1:m=x-1;break;case 1:x=m+1}switch(u){case-1:w=T-1;break;case 1:T=w+1}const I=-i*this.dim,D=-u*this.dim;for(let B=w;B<T;B++)for(let V=m;V<x;V++)this.data[this._idx(V,B)]=t.data[this._idx(V+I,B+D)]}}ar("DEMData",Tr);class Ai{constructor(t){this._stringToNumber={},this._numberToString=[];for(let i=0;i<t.length;i++){const u=t[i];this._stringToNumber[u]=i,this._numberToString[i]=u}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class lt{constructor(t,i,u,m,x){this.type="Feature",this._vectorTileFeature=t,t._z=i,t._x=u,t._y=m,this.properties=t.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(t[i]=this[i]);return t}}class qe{constructor(t,i){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ql(mi,16,0),this.grid3D=new Ql(mi,16,0),this.featureIndexArray=new qn,this.promoteId=i}insert(t,i,u,m,x,w){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,x);const I=w?this.grid3D:this.grid;for(let D=0;D<i.length;D++){const B=i[D],V=[1/0,1/0,-1/0,-1/0];for(let q=0;q<B.length;q++){const te=B[q];V[0]=Math.min(V[0],te.x),V[1]=Math.min(V[1],te.y),V[2]=Math.max(V[2],te.x),V[3]=Math.max(V[3],te.y)}V[0]<mi&&V[1]<mi&&V[2]>=0&&V[3]>=0&&I.insert(T,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cu.VectorTile(new Il(this.rawTileData)).layers,this.sourceLayerCoder=new Ai(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,i,u,m){this.loadVTLayers();const x=t.params||{},w=mi/t.tileSize/t.scale,T=Fu(x.filter),I=t.queryGeometry,D=t.queryPadding*w,B=qt(I),V=this.grid.query(B.minX-D,B.minY-D,B.maxX+D,B.maxY+D),q=qt(t.cameraQueryGeometry),te=this.grid3D.query(q.minX-D,q.minY-D,q.maxX+D,q.maxY+D,(Pe,Re,rt,Ue)=>function(Qe,gt,Rt,ir,zr){for(const Jt of Qe)if(gt<=Jt.x&&Rt<=Jt.y&&ir>=Jt.x&&zr>=Jt.y)return!0;const rr=[new U(gt,Rt),new U(gt,zr),new U(ir,zr),new U(ir,Rt)];if(Qe.length>2){for(const Jt of rr)if(Zu(Qe,Jt))return!0}for(let Jt=0;Jt<Qe.length-1;Jt++)if(hp(Qe[Jt],Qe[Jt+1],rr))return!0;return!1}(t.cameraQueryGeometry,Pe-D,Re-D,rt+D,Ue+D));for(const Pe of te)V.push(Pe);V.sort(Cr);const le={};let fe;for(let Pe=0;Pe<V.length;Pe++){const Re=V[Pe];if(Re===fe)continue;fe=Re;const rt=this.featureIndexArray.get(Re);let Ue=null;this.loadMatchingFeature(le,rt.bucketIndex,rt.sourceLayerIndex,rt.featureIndex,T,x.layers,x.availableImages,i,u,m,(Qe,gt,Rt)=>(Ue||(Ue=ou(Qe)),gt.queryIntersectsFeature(I,Qe,Rt,Ue,this.z,t.transform,w,t.pixelPosMatrix)))}return le}loadMatchingFeature(t,i,u,m,x,w,T,I,D,B,V){const q=this.bucketLayerIDs[i];if(w&&!function(Pe,Re){for(let rt=0;rt<Pe.length;rt++)if(Re.indexOf(Pe[rt])>=0)return!0;return!1}(w,q))return;const te=this.sourceLayerCoder.decode(u),le=this.vtLayers[te].feature(m);if(x.needGeometry){const Pe=lu(le,!0);if(!x.filter(new an(this.tileID.overscaledZ),Pe,this.tileID.canonical))return}else if(!x.filter(new an(this.tileID.overscaledZ),le))return;const fe=this.getId(le,te);for(let Pe=0;Pe<q.length;Pe++){const Re=q[Pe];if(w&&w.indexOf(Re)<0)continue;const rt=I[Re];if(!rt)continue;let Ue={};fe&&B&&(Ue=B.getState(rt.sourceLayer||"_geojsonTileLayer",fe));const Qe=je({},D[Re]);Qe.paint=dt(Qe.paint,rt.paint,le,Ue,T),Qe.layout=dt(Qe.layout,rt.layout,le,Ue,T);const gt=!V||V(le,rt,Ue);if(!gt)continue;const Rt=new lt(le,this.z,this.x,this.y,fe);Rt.layer=Qe;let ir=t[Re];ir===void 0&&(ir=t[Re]=[]),ir.push({featureIndex:m,feature:Rt,intersectionZ:gt})}}lookupSymbolFeatures(t,i,u,m,x,w,T,I){const D={};this.loadVTLayers();const B=Fu(x);for(const V of t)this.loadMatchingFeature(D,u,m,V,B,w,T,I,i);return D}hasLayer(t){for(const i of this.bucketLayerIDs)for(const u of i)if(t===u)return!0;return!1}getId(t,i){let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]],typeof u=="boolean"&&(u=Number(u))),u}}function dt(r,t,i,u,m){return at(r,(x,w)=>{const T=t instanceof ru?t.get(w):null;return T&&T.evaluate?T.evaluate(i,u,m):T})}function qt(r){let t=1/0,i=1/0,u=-1/0,m=-1/0;for(const x of r)t=Math.min(t,x.x),i=Math.min(i,x.y),u=Math.max(u,x.x),m=Math.max(m,x.y);return{minX:t,minY:i,maxX:u,maxY:m}}function Cr(r,t){return t-r}function jr(r,t,i,u,m){const x=[];for(let w=0;w<r.length;w++){const T=r[w];let I;for(let D=0;D<T.length-1;D++){let B=T[D],V=T[D+1];B.x<t&&V.x<t||(B.x<t?B=new U(t,B.y+(t-B.x)/(V.x-B.x)*(V.y-B.y))._round():V.x<t&&(V=new U(t,B.y+(t-B.x)/(V.x-B.x)*(V.y-B.y))._round()),B.y<i&&V.y<i||(B.y<i?B=new U(B.x+(i-B.y)/(V.y-B.y)*(V.x-B.x),i)._round():V.y<i&&(V=new U(B.x+(i-B.y)/(V.y-B.y)*(V.x-B.x),i)._round()),B.x>=u&&V.x>=u||(B.x>=u?B=new U(u,B.y+(u-B.x)/(V.x-B.x)*(V.y-B.y))._round():V.x>=u&&(V=new U(u,B.y+(u-B.x)/(V.x-B.x)*(V.y-B.y))._round()),B.y>=m&&V.y>=m||(B.y>=m?B=new U(B.x+(m-B.y)/(V.y-B.y)*(V.x-B.x),m)._round():V.y>=m&&(V=new U(B.x+(m-B.y)/(V.y-B.y)*(V.x-B.x),m)._round()),I&&B.equals(I[I.length-1])||(I=[B],x.push(I)),I.push(V)))))}}return x}ar("FeatureIndex",qe,{omit:["rawTileData","sourceLayerCoder"]});class Ir extends U{constructor(t,i,u,m){super(t,i),this.angle=u,m!==void 0&&(this.segment=m)}clone(){return new Ir(this.x,this.y,this.angle,this.segment)}}function Yr(r,t,i,u,m){if(t.segment===void 0||i===0)return!0;let x=t,w=t.segment+1,T=0;for(;T>-i/2;){if(w--,w<0)return!1;T-=r[w].dist(x),x=r[w]}T+=r[w].dist(r[w+1]),w++;const I=[];let D=0;for(;T<i/2;){const B=r[w],V=r[w+1];if(!V)return!1;let q=r[w-1].angleTo(B)-B.angleTo(V);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:T,angleDelta:q}),D+=q;T-I[0].distance>u;)D-=I.shift().angleDelta;if(D>m)return!1;w++,T+=B.dist(V)}return!0}function es(r){let t=0;for(let i=0;i<r.length-1;i++)t+=r[i].dist(r[i+1]);return t}function wn(r,t,i){return r?.6*t*i:0}function Ml(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function hg(r,t,i,u,m,x){const w=wn(i,m,x),T=Ml(i,u)*x;let I=0;const D=es(r)/2;for(let B=0;B<r.length-1;B++){const V=r[B],q=r[B+1],te=V.dist(q);if(I+te>D){const le=(D-I)/te,fe=Gn.number(V.x,q.x,le),Pe=Gn.number(V.y,q.y,le),Re=new Ir(fe,Pe,q.angleTo(V),B);return Re._round(),!w||Yr(r,Re,T,w,t)?Re:void 0}I+=te}}function Yx(r,t,i,u,m,x,w,T,I){const D=wn(u,x,w),B=Ml(u,m),V=B*w,q=r[0].x===0||r[0].x===I||r[0].y===0||r[0].y===I;return t-V<t/4&&(t=V+t/4),i_(r,q?t/2*T%t:(B/2+2*x)*w*T%t,t,D,i,V,q,!1,I)}function i_(r,t,i,u,m,x,w,T,I){const D=x/2,B=es(r);let V=0,q=t-i,te=[];for(let le=0;le<r.length-1;le++){const fe=r[le],Pe=r[le+1],Re=fe.dist(Pe),rt=Pe.angleTo(fe);for(;q+i<V+Re;){q+=i;const Ue=(q-V)/Re,Qe=Gn.number(fe.x,Pe.x,Ue),gt=Gn.number(fe.y,Pe.y,Ue);if(Qe>=0&&Qe<I&&gt>=0&&gt<I&&q-D>=0&&q+D<=B){const Rt=new Ir(Qe,gt,rt,le);Rt._round(),u&&!Yr(r,Rt,x,u,m)||te.push(Rt)}}V+=Re}return T||te.length||w||(te=i_(r,V/2,i,u,m,x,w,!0,I)),te}ar("Anchor",Ir);const Nf=Ks;function s_(r,t,i,u){const m=[],x=r.image,w=x.pixelRatio,T=x.paddedRect.w-2*Nf,I=x.paddedRect.h-2*Nf;let D={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom};const B=x.stretchX||[[0,T]],V=x.stretchY||[[0,I]],q=(Tt,br)=>Tt+br[1]-br[0],te=B.reduce(q,0),le=V.reduce(q,0),fe=T-te,Pe=I-le;let Re=0,rt=te,Ue=0,Qe=le,gt=0,Rt=fe,ir=0,zr=Pe;if(x.content&&u){const Tt=x.content,br=Tt[2]-Tt[0],_r=Tt[3]-Tt[1];(x.textFitWidth||x.textFitHeight)&&(D=Lh(r)),Re=qp(B,0,Tt[0]),Ue=qp(V,0,Tt[1]),rt=qp(B,Tt[0],Tt[2]),Qe=qp(V,Tt[1],Tt[3]),gt=Tt[0]-Re,ir=Tt[1]-Ue,Rt=br-rt,zr=_r-Qe}const rr=D.x1,Jt=D.y1,vr=D.x2-rr,fr=D.y2-Jt,ur=(Tt,br,_r,$r)=>{const Yn=Yp(Tt.stretch-Re,rt,vr,rr),$n=Xp(Tt.fixed-gt,Rt,Tt.stretch,te),ls=Yp(br.stretch-Ue,Qe,fr,Jt),rl=Xp(br.fixed-ir,zr,br.stretch,le),Fs=Yp(_r.stretch-Re,rt,vr,rr),us=Xp(_r.fixed-gt,Rt,_r.stretch,te),_a=Yp($r.stretch-Ue,Qe,fr,Jt),va=Xp($r.fixed-ir,zr,$r.stretch,le),xa=new U(Yn,ls),Di=new U(Fs,ls),cs=new U(Fs,_a),Js=new U(Yn,_a),Bs=new U($n/w,rl/w),wa=new U(us/w,va/w),Ns=t*Math.PI/180;if(Ns){const yn=Math.sin(Ns),ei=Math.cos(Ns),ni=[ei,-yn,yn,ei];xa._matMult(ni),Di._matMult(ni),Js._matMult(ni),cs._matMult(ni)}const Ro=Tt.stretch+Tt.fixed,Va=br.stretch+br.fixed;return{tl:xa,tr:Di,bl:Js,br:cs,tex:{x:x.paddedRect.x+Nf+Ro,y:x.paddedRect.y+Nf+Va,w:_r.stretch+_r.fixed-Ro,h:$r.stretch+$r.fixed-Va},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bs,pixelOffsetBR:wa,minFontScaleX:Rt/w/vr,minFontScaleY:zr/w/fr,isSDF:i}};if(u&&(x.stretchX||x.stretchY)){const Tt=a_(B,fe,te),br=a_(V,Pe,le);for(let _r=0;_r<Tt.length-1;_r++){const $r=Tt[_r],Yn=Tt[_r+1];for(let $n=0;$n<br.length-1;$n++)m.push(ur($r,br[$n],Yn,br[$n+1]))}}else m.push(ur({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:I+1}));return m}function qp(r,t,i){let u=0;for(const m of r)u+=Math.max(t,Math.min(i,m[1]))-Math.max(t,Math.min(i,m[0]));return u}function a_(r,t,i){const u=[{fixed:-1,stretch:0}];for(const[m,x]of r){const w=u[u.length-1];u.push({fixed:m-w.stretch,stretch:w.stretch}),u.push({fixed:m-w.stretch,stretch:w.stretch+(x-m)})}return u.push({fixed:t+Nf,stretch:i}),u}function Yp(r,t,i,u){return r/t*i+u}function Xp(r,t,i,u){return r-t*i/u}class Kp{constructor(t,i,u,m,x,w,T,I,D,B){var V;if(this.boxStartIndex=t.length,D){let q=w.top,te=w.bottom;const le=w.collisionPadding;le&&(q-=le[1],te+=le[3]);let fe=te-q;fe>0&&(fe=Math.max(10,fe),this.circleDiameter=fe)}else{const q=!((V=w.image)===null||V===void 0)&&V.content&&(w.image.textFitWidth||w.image.textFitHeight)?Lh(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};q.y1=q.y1*T-I[0],q.y2=q.y2*T+I[2],q.x1=q.x1*T-I[3],q.x2=q.x2*T+I[1];const te=w.collisionPadding;if(te&&(q.x1-=te[0]*T,q.y1-=te[1]*T,q.x2+=te[2]*T,q.y2+=te[3]*T),B){const le=new U(q.x1,q.y1),fe=new U(q.x2,q.y1),Pe=new U(q.x1,q.y2),Re=new U(q.x2,q.y2),rt=B*Math.PI/180;le._rotate(rt),fe._rotate(rt),Pe._rotate(rt),Re._rotate(rt),q.x1=Math.min(le.x,fe.x,Pe.x,Re.x),q.x2=Math.max(le.x,fe.x,Pe.x,Re.x),q.y1=Math.min(le.y,fe.y,Pe.y,Re.y),q.y2=Math.max(le.y,fe.y,Pe.y,Re.y)}t.emplaceBack(i.x,i.y,q.x1,q.y1,q.x2,q.y2,u,m,x)}this.boxEndIndex=t.length}}class Xx{constructor(t=[],i=(u,m)=>u<m?-1:u>m?1:0){if(this.data=t,this.length=this.data.length,this.compare=i,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:i,compare:u}=this,m=i[t];for(;t>0;){const x=t-1>>1,w=i[x];if(u(m,w)>=0)break;i[t]=w,t=x}i[t]=m}_down(t){const{data:i,compare:u}=this,m=this.length>>1,x=i[t];for(;t<m;){let w=1+(t<<1);const T=w+1;if(T<this.length&&u(i[T],i[w])<0&&(w=T),u(i[w],x)>=0)break;i[t]=i[w],t=w}i[t]=x}}function Kx(r,t=1,i=!1){let u=1/0,m=1/0,x=-1/0,w=-1/0;const T=r[0];for(let te=0;te<T.length;te++){const le=T[te];(!te||le.x<u)&&(u=le.x),(!te||le.y<m)&&(m=le.y),(!te||le.x>x)&&(x=le.x),(!te||le.y>w)&&(w=le.y)}const I=Math.min(x-u,w-m);let D=I/2;const B=new Xx([],Jx);if(I===0)return new U(u,m);for(let te=u;te<x;te+=I)for(let le=m;le<w;le+=I)B.push(new jd(te+D,le+D,D,r));let V=function(te){let le=0,fe=0,Pe=0;const Re=te[0];for(let rt=0,Ue=Re.length,Qe=Ue-1;rt<Ue;Qe=rt++){const gt=Re[rt],Rt=Re[Qe],ir=gt.x*Rt.y-Rt.x*gt.y;fe+=(gt.x+Rt.x)*ir,Pe+=(gt.y+Rt.y)*ir,le+=3*ir}return new jd(fe/le,Pe/le,0,te)}(r),q=B.length;for(;B.length;){const te=B.pop();(te.d>V.d||!V.d)&&(V=te,i&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,q)),te.max-V.d<=t||(D=te.h/2,B.push(new jd(te.p.x-D,te.p.y-D,D,r)),B.push(new jd(te.p.x+D,te.p.y-D,D,r)),B.push(new jd(te.p.x-D,te.p.y+D,D,r)),B.push(new jd(te.p.x+D,te.p.y+D,D,r)),q+=4)}return i&&(console.log(`num probes: ${q}`),console.log(`best distance: ${V.d}`)),V.p}function Jx(r,t){return t.max-r.max}function jd(r,t,i,u){this.p=new U(r,t),this.h=i,this.d=function(m,x){let w=!1,T=1/0;for(let I=0;I<x.length;I++){const D=x[I];for(let B=0,V=D.length,q=V-1;B<V;q=B++){const te=D[B],le=D[q];te.y>m.y!=le.y>m.y&&m.x<(le.x-te.x)*(m.y-te.y)/(le.y-te.y)+te.x&&(w=!w),T=Math.min(T,yf(m,te,le))}}return(w?1:-1)*Math.sqrt(T)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}var Os;S.aq=void 0,(Os=S.aq||(S.aq={}))[Os.center=1]="center",Os[Os.left=2]="left",Os[Os.right=3]="right",Os[Os.top=4]="top",Os[Os.bottom=5]="bottom",Os[Os["top-left"]=6]="top-left",Os[Os["top-right"]=7]="top-right",Os[Os["bottom-left"]=8]="bottom-left",Os[Os["bottom-right"]=9]="bottom-right";const Nc=7,dg=Number.POSITIVE_INFINITY;function o_(r,t){return t[1]!==dg?function(i,u,m){let x=0,w=0;switch(u=Math.abs(u),m=Math.abs(m),i){case"top-right":case"top-left":case"top":w=m-Nc;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+Nc}switch(i){case"top-right":case"bottom-right":case"right":x=-u;break;case"top-left":case"bottom-left":case"left":x=u}return[x,w]}(r,t[0],t[1]):function(i,u){let m=0,x=0;u<0&&(u=0);const w=u/Math.SQRT2;switch(i){case"top-right":case"top-left":x=w-Nc;break;case"bottom-right":case"bottom-left":x=-w+Nc;break;case"bottom":x=-u+Nc;break;case"top":x=u-Nc}switch(i){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=u;break;case"right":m=-u}return[m,x]}(r,t[0])}function l_(r,t,i){var u;const m=r.layout,x=(u=m.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(t,{},i);if(x){const T=x.values,I=[];for(let D=0;D<T.length;D+=2){const B=I[D]=T[D],V=T[D+1].map(q=>q*ri);B.startsWith("top")?V[1]-=Nc:B.startsWith("bottom")&&(V[1]+=Nc),I[D+1]=V}return new hi(I)}const w=m.get("text-variable-anchor");if(w){let T;T=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(t,{},i)*ri,dg]:m.get("text-offset").evaluate(t,{},i).map(D=>D*ri);const I=[];for(const D of w)I.push(D,o_(D,T));return new hi(I)}return null}function fg(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Qx(r,t,i,u,m,x,w,T,I,D,B){let V=x.textMaxSize.evaluate(t,{});V===void 0&&(V=w);const q=r.layers[0].layout,te=q.get("icon-offset").evaluate(t,{},B),le=c_(i.horizontal),fe=w/24,Pe=r.tilePixelRatio*fe,Re=r.tilePixelRatio*V/24,rt=r.tilePixelRatio*T,Ue=r.tilePixelRatio*q.get("symbol-spacing"),Qe=q.get("text-padding")*r.tilePixelRatio,gt=function(Tt,br,_r,$r=1){const Yn=Tt.get("icon-padding").evaluate(br,{},_r),$n=Yn&&Yn.values;return[$n[0]*$r,$n[1]*$r,$n[2]*$r,$n[3]*$r]}(q,t,B,r.tilePixelRatio),Rt=q.get("text-max-angle")/180*Math.PI,ir=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",zr=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",rr=q.get("symbol-placement"),Jt=Ue/2,vr=q.get("icon-text-fit");let fr;u&&vr!=="none"&&(r.allowVerticalPlacement&&i.vertical&&(fr=gu(u,i.vertical,vr,q.get("icon-text-fit-padding"),te,fe)),le&&(u=gu(u,le,vr,q.get("icon-text-fit-padding"),te,fe)));const ur=(Tt,br)=>{br.x<0||br.x>=mi||br.y<0||br.y>=mi||function(_r,$r,Yn,$n,ls,rl,Fs,us,_a,va,xa,Di,cs,Js,Bs,wa,Ns,Ro,Va,yn,ei,ni,io,gi,Ud){const _u=_r.addToLineVertexArray($r,Yn);let vu,nl,Lo,ws,nc=0,Vf=0,p_=0,m_=0,wg=-1,bg=-1;const ic={};let g_=iu("");if(_r.allowVerticalPlacement&&$n.vertical){const Qs=us.layout.get("text-rotate").evaluate(ei,{},gi)+90;Lo=new Kp(_a,$r,va,xa,Di,$n.vertical,cs,Js,Bs,Qs),Fs&&(ws=new Kp(_a,$r,va,xa,Di,Fs,Ns,Ro,Bs,Qs))}if(ls){const Qs=us.layout.get("icon-rotate").evaluate(ei,{}),Oo=us.layout.get("icon-text-fit")!=="none",jh=s_(ls,Qs,io,Oo),Dl=Fs?s_(Fs,Qs,io,Oo):void 0;nl=new Kp(_a,$r,va,xa,Di,ls,Ns,Ro,!1,Qs),nc=4*jh.length;const Uh=_r.iconSizeData;let xu=null;Uh.kind==="source"?(xu=[no*us.layout.get("icon-size").evaluate(ei,{})],xu[0]>tl&&Je(`${_r.layerIds[0]}: Value for "icon-size" is >= ${yu}. Reduce your "icon-size".`)):Uh.kind==="composite"&&(xu=[no*ni.compositeIconSizes[0].evaluate(ei,{},gi),no*ni.compositeIconSizes[1].evaluate(ei,{},gi)],(xu[0]>tl||xu[1]>tl)&&Je(`${_r.layerIds[0]}: Value for "icon-size" is >= ${yu}. Reduce your "icon-size".`)),_r.addSymbols(_r.icon,jh,xu,yn,Va,ei,S.ah.none,$r,_u.lineStartIndex,_u.lineLength,-1,gi),wg=_r.icon.placedSymbolArray.length-1,Dl&&(Vf=4*Dl.length,_r.addSymbols(_r.icon,Dl,xu,yn,Va,ei,S.ah.vertical,$r,_u.lineStartIndex,_u.lineLength,-1,gi),bg=_r.icon.placedSymbolArray.length-1)}const y_=Object.keys($n.horizontal);for(const Qs of y_){const Oo=$n.horizontal[Qs];if(!vu){g_=iu(Oo.text);const Dl=us.layout.get("text-rotate").evaluate(ei,{},gi);vu=new Kp(_a,$r,va,xa,Di,Oo,cs,Js,Bs,Dl)}const jh=Oo.positionedLines.length===1;if(p_+=u_(_r,$r,Oo,rl,us,Bs,ei,wa,_u,$n.vertical?S.ah.horizontal:S.ah.horizontalOnly,jh?y_:[Qs],ic,wg,ni,gi),jh)break}$n.vertical&&(m_+=u_(_r,$r,$n.vertical,rl,us,Bs,ei,wa,_u,S.ah.vertical,["vertical"],ic,bg,ni,gi));const r1=vu?vu.boxStartIndex:_r.collisionBoxArray.length,n1=vu?vu.boxEndIndex:_r.collisionBoxArray.length,i1=Lo?Lo.boxStartIndex:_r.collisionBoxArray.length,s1=Lo?Lo.boxEndIndex:_r.collisionBoxArray.length,a1=nl?nl.boxStartIndex:_r.collisionBoxArray.length,o1=nl?nl.boxEndIndex:_r.collisionBoxArray.length,l1=ws?ws.boxStartIndex:_r.collisionBoxArray.length,u1=ws?ws.boxEndIndex:_r.collisionBoxArray.length;let Al=-1;const Qp=(Qs,Oo)=>Qs&&Qs.circleDiameter?Math.max(Qs.circleDiameter,Oo):Oo;Al=Qp(vu,Al),Al=Qp(Lo,Al),Al=Qp(nl,Al),Al=Qp(ws,Al);const __=Al>-1?1:0;__&&(Al*=Ud/ri),_r.glyphOffsetArray.length>=Fc.MAX_GLYPHS&&Je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ei.sortKey!==void 0&&_r.addToSortKeyRanges(_r.symbolInstances.length,ei.sortKey);const c1=l_(us,ei,gi),[h1,d1]=function(Qs,Oo){const jh=Qs.length,Dl=Oo==null?void 0:Oo.values;if((Dl==null?void 0:Dl.length)>0)for(let Uh=0;Uh<Dl.length;Uh+=2){const xu=Dl[Uh+1];Qs.emplaceBack(S.aq[Dl[Uh]],xu[0],xu[1])}return[jh,Qs.length]}(_r.textAnchorOffsets,c1);_r.symbolInstances.emplaceBack($r.x,$r.y,ic.right>=0?ic.right:-1,ic.center>=0?ic.center:-1,ic.left>=0?ic.left:-1,ic.vertical||-1,wg,bg,g_,r1,n1,i1,s1,a1,o1,l1,u1,va,p_,m_,nc,Vf,__,0,cs,Al,h1,d1)}(r,br,Tt,i,u,m,fr,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,Pe,[Qe,Qe,Qe,Qe],ir,I,rt,gt,zr,te,t,x,D,B,w)};if(rr==="line")for(const Tt of jr(t.geometry,0,0,mi,mi)){const br=Yx(Tt,Ue,Rt,i.vertical||le,u,24,Re,r.overscaling,mi);for(const _r of br)le&&e1(r,le.text,Jt,_r)||ur(Tt,_r)}else if(rr==="line-center"){for(const Tt of t.geometry)if(Tt.length>1){const br=hg(Tt,Rt,i.vertical||le,u,24,Re);br&&ur(Tt,br)}}else if(t.type==="Polygon")for(const Tt of mo(t.geometry,0)){const br=Kx(Tt,16);ur(Tt[0],new Ir(br.x,br.y,0))}else if(t.type==="LineString")for(const Tt of t.geometry)ur(Tt,new Ir(Tt[0].x,Tt[0].y,0));else if(t.type==="Point")for(const Tt of t.geometry)for(const br of Tt)ur([br],new Ir(br.x,br.y,0))}function u_(r,t,i,u,m,x,w,T,I,D,B,V,q,te,le){const fe=function(rt,Ue,Qe,gt,Rt,ir,zr,rr){const Jt=gt.layout.get("text-rotate").evaluate(ir,{})*Math.PI/180,vr=[];for(const fr of Ue.positionedLines)for(const ur of fr.positionedGlyphs){if(!ur.rect)continue;const Tt=ur.rect||{};let br=zf+1,_r=!0,$r=1,Yn=0;const $n=(Rt||rr)&&ur.vertical,ls=ur.metrics.advance*ur.scale/2;if(rr&&Ue.verticalizable&&(Yn=fr.lineOffset/2-(ur.imageName?-(ri-ur.metrics.width*ur.scale)/2:(ur.scale-1)*ri)),ur.imageName){const yn=zr[ur.imageName];_r=yn.sdf,$r=yn.pixelRatio,br=Ks/$r}const rl=Rt?[ur.x+ls,ur.y]:[0,0];let Fs=Rt?[0,0]:[ur.x+ls+Qe[0],ur.y+Qe[1]-Yn],us=[0,0];$n&&(us=Fs,Fs=[0,0]);const _a=ur.metrics.isDoubleResolution?2:1,va=(ur.metrics.left-br)*ur.scale-ls+Fs[0],xa=(-ur.metrics.top-br)*ur.scale+Fs[1],Di=va+Tt.w/_a*ur.scale/$r,cs=xa+Tt.h/_a*ur.scale/$r,Js=new U(va,xa),Bs=new U(Di,xa),wa=new U(va,cs),Ns=new U(Di,cs);if($n){const yn=new U(-ls,ls-Do),ei=-Math.PI/2,ni=ri/2-ls,io=new U(5-Do-ni,-(ur.imageName?ni:0)),gi=new U(...us);Js._rotateAround(ei,yn)._add(io)._add(gi),Bs._rotateAround(ei,yn)._add(io)._add(gi),wa._rotateAround(ei,yn)._add(io)._add(gi),Ns._rotateAround(ei,yn)._add(io)._add(gi)}if(Jt){const yn=Math.sin(Jt),ei=Math.cos(Jt),ni=[ei,-yn,yn,ei];Js._matMult(ni),Bs._matMult(ni),wa._matMult(ni),Ns._matMult(ni)}const Ro=new U(0,0),Va=new U(0,0);vr.push({tl:Js,tr:Bs,bl:wa,br:Ns,tex:Tt,writingMode:Ue.writingMode,glyphOffset:rl,sectionIndex:ur.sectionIndex,isSDF:_r,pixelOffsetTL:Ro,pixelOffsetBR:Va,minFontScaleX:0,minFontScaleY:0})}return vr}(0,i,T,m,x,w,u,r.allowVerticalPlacement),Pe=r.textSizeData;let Re=null;Pe.kind==="source"?(Re=[no*m.layout.get("text-size").evaluate(w,{})],Re[0]>tl&&Je(`${r.layerIds[0]}: Value for "text-size" is >= ${yu}. Reduce your "text-size".`)):Pe.kind==="composite"&&(Re=[no*te.compositeTextSizes[0].evaluate(w,{},le),no*te.compositeTextSizes[1].evaluate(w,{},le)],(Re[0]>tl||Re[1]>tl)&&Je(`${r.layerIds[0]}: Value for "text-size" is >= ${yu}. Reduce your "text-size".`)),r.addSymbols(r.text,fe,Re,T,x,w,D,t,I.lineStartIndex,I.lineLength,q,le);for(const rt of B)V[rt]=r.text.placedSymbolArray.length-1;return 4*fe.length}function c_(r){for(const t in r)return r[t];return null}function e1(r,t,i,u){const m=r.compareText;if(t in m){const x=m[t];for(let w=x.length-1;w>=0;w--)if(u.dist(x[w])<i)return!0}else m[t]=[];return m[t].push(u),!1}const h_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pg{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,u]=new Uint8Array(t,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=u>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const x=h_[15&u];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(t,2,1),[T]=new Uint32Array(t,4,1);return new pg(T,w,x,t)}constructor(t,i=64,u=Float64Array,m){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=u,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const x=h_.indexOf(this.ArrayType),w=2*t*this.ArrayType.BYTES_PER_ELEMENT,T=t*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-T%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${u}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+T+I,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+I),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+T+I,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=t)}add(t,i){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=t,this.coords[this._pos++]=i,u}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return mg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,i,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:T}=this,I=[0,x.length-1,0],D=[];for(;I.length;){const B=I.pop()||0,V=I.pop()||0,q=I.pop()||0;if(V-q<=T){for(let Pe=q;Pe<=V;Pe++){const Re=w[2*Pe],rt=w[2*Pe+1];Re>=t&&Re<=u&&rt>=i&&rt<=m&&D.push(x[Pe])}continue}const te=q+V>>1,le=w[2*te],fe=w[2*te+1];le>=t&&le<=u&&fe>=i&&fe<=m&&D.push(x[te]),(B===0?t<=le:i<=fe)&&(I.push(q),I.push(te-1),I.push(1-B)),(B===0?u>=le:m>=fe)&&(I.push(te+1),I.push(V),I.push(1-B))}return D}within(t,i,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:x,nodeSize:w}=this,T=[0,m.length-1,0],I=[],D=u*u;for(;T.length;){const B=T.pop()||0,V=T.pop()||0,q=T.pop()||0;if(V-q<=w){for(let Pe=q;Pe<=V;Pe++)f_(x[2*Pe],x[2*Pe+1],t,i)<=D&&I.push(m[Pe]);continue}const te=q+V>>1,le=x[2*te],fe=x[2*te+1];f_(le,fe,t,i)<=D&&I.push(m[te]),(B===0?t-u<=le:i-u<=fe)&&(T.push(q),T.push(te-1),T.push(1-B)),(B===0?t+u>=le:i+u>=fe)&&(T.push(te+1),T.push(V),T.push(1-B))}return I}}function mg(r,t,i,u,m,x){if(m-u<=i)return;const w=u+m>>1;d_(r,t,w,u,m,x),mg(r,t,i,u,w-1,1-x),mg(r,t,i,w+1,m,1-x)}function d_(r,t,i,u,m,x){for(;m>u;){if(m-u>600){const D=m-u+1,B=i-u+1,V=Math.log(D),q=.5*Math.exp(2*V/3),te=.5*Math.sqrt(V*q*(D-q)/D)*(B-D/2<0?-1:1);d_(r,t,i,Math.max(u,Math.floor(i-B*q/D+te)),Math.min(m,Math.floor(i+(D-B)*q/D+te)),x)}const w=t[2*i+x];let T=u,I=m;for(jf(r,t,u,i),t[2*m+x]>w&&jf(r,t,u,m);T<I;){for(jf(r,t,T,I),T++,I--;t[2*T+x]<w;)T++;for(;t[2*I+x]>w;)I--}t[2*u+x]===w?jf(r,t,u,I):(I++,jf(r,t,I,m)),I<=i&&(u=I+1),i<=I&&(m=I-1)}}function jf(r,t,i,u){gg(r,i,u),gg(t,2*i,2*u),gg(t,2*i+1,2*u+1)}function gg(r,t,i){const u=r[t];r[t]=r[i],r[i]=u}function f_(r,t,i,u){const m=r-i,x=t-u;return m*m+x*x}var yg;S.bg=void 0,(yg=S.bg||(S.bg={})).create="create",yg.load="load",yg.fullLoad="fullLoad";let Jp=null,Uf=[];const _g=1e3/60,vg="loadTime",xg="fullLoadTime",t1={mark(r){performance.mark(r)},frame(r){const t=r;Jp!=null&&Uf.push(t-Jp),Jp=t},clearMetrics(){Jp=null,Uf=[],performance.clearMeasures(vg),performance.clearMeasures(xg);for(const r in S.bg)performance.clearMarks(S.bg[r])},getPerformanceMetrics(){performance.measure(vg,S.bg.create,S.bg.load),performance.measure(xg,S.bg.create,S.bg.fullLoad);const r=performance.getEntriesByName(vg)[0].duration,t=performance.getEntriesByName(xg)[0].duration,i=Uf.length,u=1/(Uf.reduce((x,w)=>x+w,0)/i/1e3),m=Uf.filter(x=>x>_g).reduce((x,w)=>x+(w-_g)/_g,0);return{loadTime:r,fullLoadTime:t,fps:u,percentDroppedFrames:m/(i+m)*100,totalFrames:i}}};S.$=class extends H{},S.A=Pc,S.B=sh,S.C=function(r){if(zt==null){const t=r.navigator?r.navigator.userAgent:null;zt=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return zt},S.D=or,S.E=ft,S.F=class{constructor(r,t){this.target=r,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new s(()=>this.process()),this.subscription=function(i,u,m,x){return i.addEventListener(u,m,!1),{unsubscribe:()=>{i.removeEventListener(u,m,!1)}}}(this.target,"message",i=>this.receive(i)),this.globalScope=Ve(self)?r:window}registerMessageHandler(r,t){this.messageHandlers[r]=t}sendAsync(r,t){return new Promise((i,u)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:i,reject:u},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const T={id:m,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},{once:!0});const x=[],w=Object.assign(Object.assign({},r),{id:m,sourceMapId:this.mapId,origin:location.origin,data:ys(r.data,x)});this.target.postMessage(w,{transfer:x})})}receive(r){const t=r.data,i=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[i];const u=this.abortControllers[i];return delete this.abortControllers[i],void(u&&u.abort())}if(Ve(self)||t.mustQueue)return this.tasks[i]=t,this.taskQueue.push(i),void this.invoker.trigger();this.processTask(i,t)}}process(){if(this.taskQueue.length===0)return;const r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){return c(this,void 0,void 0,function*(){if(t.type==="<response>"){const m=this.resolveRejects[r];return delete this.resolveRejects[r],m?void(t.error?m.reject(Qa(t.error)):m.resolve(Qa(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const i=Qa(t.data),u=new AbortController;this.abortControllers[r]=u;try{const m=yield this.messageHandlers[t.type](t.sourceMapId,i,u);this.completeTask(r,null,m)}catch(m){this.completeTask(r,m)}})}completeTask(r,t,i){const u=[];delete this.abortControllers[r];const m={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?ys(t):null,data:ys(i,u)};this.target.postMessage(m,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},S.G=lr,S.H=function(){var r=new Pc(16);return Pc!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},S.I=Rf,S.J=function(r,t,i){var u,m,x,w,T,I,D,B,V,q,te,le,fe=i[0],Pe=i[1],Re=i[2];return t===r?(r[12]=t[0]*fe+t[4]*Pe+t[8]*Re+t[12],r[13]=t[1]*fe+t[5]*Pe+t[9]*Re+t[13],r[14]=t[2]*fe+t[6]*Pe+t[10]*Re+t[14],r[15]=t[3]*fe+t[7]*Pe+t[11]*Re+t[15]):(m=t[1],x=t[2],w=t[3],T=t[4],I=t[5],D=t[6],B=t[7],V=t[8],q=t[9],te=t[10],le=t[11],r[0]=u=t[0],r[1]=m,r[2]=x,r[3]=w,r[4]=T,r[5]=I,r[6]=D,r[7]=B,r[8]=V,r[9]=q,r[10]=te,r[11]=le,r[12]=u*fe+T*Pe+V*Re+t[12],r[13]=m*fe+I*Pe+q*Re+t[13],r[14]=x*fe+D*Pe+te*Re+t[14],r[15]=w*fe+B*Pe+le*Re+t[15]),r},S.K=function(r,t,i){var u=i[0],m=i[1],x=i[2];return r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u,r[3]=t[3]*u,r[4]=t[4]*m,r[5]=t[5]*m,r[6]=t[6]*m,r[7]=t[7]*m,r[8]=t[8]*x,r[9]=t[9]*x,r[10]=t[10]*x,r[11]=t[11]*x,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},S.L=xf,S.M=function(r,t){const i={};for(let u=0;u<t.length;u++){const m=t[u];m in r&&(i[m]=r[m])}return i},S.N=g,S.O=O,S.P=U,S.Q=ie,S.R=os,S.S=tr,S.T=Xi,S.U=re,S.V=pe,S.W=Ze,S.X=mi,S.Y=E,S.Z=mt,S._=c,S.a=bt,S.a$=function(r,t){var i=r[0],u=r[1],m=r[2],x=r[3],w=r[4],T=r[5],I=r[6],D=r[7],B=r[8],V=r[9],q=r[10],te=r[11],le=r[12],fe=r[13],Pe=r[14],Re=r[15],rt=t[0],Ue=t[1],Qe=t[2],gt=t[3],Rt=t[4],ir=t[5],zr=t[6],rr=t[7],Jt=t[8],vr=t[9],fr=t[10],ur=t[11],Tt=t[12],br=t[13],_r=t[14],$r=t[15];return Math.abs(i-rt)<=Ds*Math.max(1,Math.abs(i),Math.abs(rt))&&Math.abs(u-Ue)<=Ds*Math.max(1,Math.abs(u),Math.abs(Ue))&&Math.abs(m-Qe)<=Ds*Math.max(1,Math.abs(m),Math.abs(Qe))&&Math.abs(x-gt)<=Ds*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(w-Rt)<=Ds*Math.max(1,Math.abs(w),Math.abs(Rt))&&Math.abs(T-ir)<=Ds*Math.max(1,Math.abs(T),Math.abs(ir))&&Math.abs(I-zr)<=Ds*Math.max(1,Math.abs(I),Math.abs(zr))&&Math.abs(D-rr)<=Ds*Math.max(1,Math.abs(D),Math.abs(rr))&&Math.abs(B-Jt)<=Ds*Math.max(1,Math.abs(B),Math.abs(Jt))&&Math.abs(V-vr)<=Ds*Math.max(1,Math.abs(V),Math.abs(vr))&&Math.abs(q-fr)<=Ds*Math.max(1,Math.abs(q),Math.abs(fr))&&Math.abs(te-ur)<=Ds*Math.max(1,Math.abs(te),Math.abs(ur))&&Math.abs(le-Tt)<=Ds*Math.max(1,Math.abs(le),Math.abs(Tt))&&Math.abs(fe-br)<=Ds*Math.max(1,Math.abs(fe),Math.abs(br))&&Math.abs(Pe-_r)<=Ds*Math.max(1,Math.abs(Pe),Math.abs(_r))&&Math.abs(Re-$r)<=Ds*Math.max(1,Math.abs(Re),Math.abs($r))},S.a0=Qr,S.a1=jt,S.a2=vt,S.a3=r=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(i=>{t.onloadstart=()=>{i(t)};for(const u of r){const m=window.document.createElement("source");Mr(u)||(t.crossOrigin="Anonymous"),m.src=u,t.appendChild(m)}})},S.a4=function(){return St++},S.a5=Xt,S.a6=Fc,S.a7=Fu,S.a8=lu,S.a9=lt,S.aA=function(r){if(r.type==="custom")return new Nd(r);switch(r.type){case"background":return new Bd(r);case"circle":return new Qm(r);case"fill":return new tg(r);case"fill-extrusion":return new Ap(r);case"heatmap":return new eg(r);case"hillshade":return new gp(r);case"line":return new Rc(r);case"raster":return new cg(r);case"symbol":return new rc(r)}},S.aB=xt,S.aC=function(r,t){if(!r)return[{command:"setStyle",args:[t]}];let i=[];try{if(!Ne(r.version,t.version))return[{command:"setStyle",args:[t]}];Ne(r.center,t.center)||i.push({command:"setCenter",args:[t.center]}),Ne(r.zoom,t.zoom)||i.push({command:"setZoom",args:[t.zoom]}),Ne(r.bearing,t.bearing)||i.push({command:"setBearing",args:[t.bearing]}),Ne(r.pitch,t.pitch)||i.push({command:"setPitch",args:[t.pitch]}),Ne(r.sprite,t.sprite)||i.push({command:"setSprite",args:[t.sprite]}),Ne(r.glyphs,t.glyphs)||i.push({command:"setGlyphs",args:[t.glyphs]}),Ne(r.transition,t.transition)||i.push({command:"setTransition",args:[t.transition]}),Ne(r.light,t.light)||i.push({command:"setLight",args:[t.light]}),Ne(r.terrain,t.terrain)||i.push({command:"setTerrain",args:[t.terrain]}),Ne(r.sky,t.sky)||i.push({command:"setSky",args:[t.sky]}),Ne(r.projection,t.projection)||i.push({command:"setProjection",args:[t.projection]});const u={},m=[];(function(w,T,I,D){let B;for(B in T=T||{},w=w||{})Object.prototype.hasOwnProperty.call(w,B)&&(Object.prototype.hasOwnProperty.call(T,B)||nt(B,I,D));for(B in T)Object.prototype.hasOwnProperty.call(T,B)&&(Object.prototype.hasOwnProperty.call(w,B)?Ne(w[B],T[B])||(w[B].type==="geojson"&&T[B].type==="geojson"&&nr(w,T,B)?_t(I,{command:"setGeoJSONSourceData",args:[B,T[B].data]}):Dt(B,T,I,D)):At(B,T,I))})(r.sources,t.sources,m,u);const x=[];r.layers&&r.layers.forEach(w=>{"source"in w&&u[w.source]?i.push({command:"removeLayer",args:[w.id]}):x.push(w)}),i=i.concat(m),function(w,T,I){T=T||[];const D=(w=w||[]).map(xr),B=T.map(xr),V=w.reduce(sn,{}),q=T.reduce(sn,{}),te=D.slice(),le=Object.create(null);let fe,Pe,Re,rt,Ue;for(let Qe=0,gt=0;Qe<D.length;Qe++)fe=D[Qe],Object.prototype.hasOwnProperty.call(q,fe)?gt++:(_t(I,{command:"removeLayer",args:[fe]}),te.splice(te.indexOf(fe,gt),1));for(let Qe=0,gt=0;Qe<B.length;Qe++)fe=B[B.length-1-Qe],te[te.length-1-Qe]!==fe&&(Object.prototype.hasOwnProperty.call(V,fe)?(_t(I,{command:"removeLayer",args:[fe]}),te.splice(te.lastIndexOf(fe,te.length-gt),1)):gt++,rt=te[te.length-Qe],_t(I,{command:"addLayer",args:[q[fe],rt]}),te.splice(te.length-Qe,0,fe),le[fe]=!0);for(let Qe=0;Qe<B.length;Qe++)if(fe=B[Qe],Pe=V[fe],Re=q[fe],!le[fe]&&!Ne(Pe,Re))if(Ne(Pe.source,Re.source)&&Ne(Pe["source-layer"],Re["source-layer"])&&Ne(Pe.type,Re.type)){for(Ue in Lt(Pe.layout,Re.layout,I,fe,null,"setLayoutProperty"),Lt(Pe.paint,Re.paint,I,fe,null,"setPaintProperty"),Ne(Pe.filter,Re.filter)||_t(I,{command:"setFilter",args:[fe,Re.filter]}),Ne(Pe.minzoom,Re.minzoom)&&Ne(Pe.maxzoom,Re.maxzoom)||_t(I,{command:"setLayerZoomRange",args:[fe,Re.minzoom,Re.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Lt(Pe[Ue],Re[Ue],I,fe,Ue.slice(6),"setPaintProperty"):Ne(Pe[Ue],Re[Ue])||_t(I,{command:"setLayerProperty",args:[fe,Ue,Re[Ue]]}));for(Ue in Re)Object.prototype.hasOwnProperty.call(Re,Ue)&&!Object.prototype.hasOwnProperty.call(Pe,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Lt(Pe[Ue],Re[Ue],I,fe,Ue.slice(6),"setPaintProperty"):Ne(Pe[Ue],Re[Ue])||_t(I,{command:"setLayerProperty",args:[fe,Ue,Re[Ue]]}))}else _t(I,{command:"removeLayer",args:[fe]}),rt=te[te.lastIndexOf(fe)+1],_t(I,{command:"addLayer",args:[Re,rt]})}(x,t.layers,i)}catch(u){console.warn("Unable to compute style diff:",u),i=[{command:"setStyle",args:[t]}]}return i},S.aD=function(r){const t=[],i=r.id;return i===void 0&&t.push({message:`layers.${i}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},S.aE=function r(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(let u=0;u<t.length;u++)if(!r(t[u],i[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(const u in t)if(!r(t[u],i[u]))return!1;return!0}return t===i},S.aF=at,S.aG=Mt,S.aH=class extends li{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},S.aI=Ni,S.aJ=class extends li{constructor(r,t){super(r,t),this.current=hh}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},S.aK=ch,S.aL=Cc,S.aM=Dr,S.aN=class extends li{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},S.aO=class extends li{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},S.aP=function(r,t,i,u,m,x,w){var T=1/(t-i),I=1/(u-m),D=1/(x-w);return r[0]=-2*T,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*I,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*D,r[11]=0,r[12]=(t+i)*T,r[13]=(m+u)*I,r[14]=(w+x)*D,r[15]=1,r},S.aQ=pd,S.aR=class extends We{},S.aS=Eh,S.aT=class extends it{},S.aU=yh,S.aV=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},S.aW=xd,S.aX=di,S.aY=da,S.aZ=class extends cr{},S.a_=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]},S.aa=function(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(i,u,m,x)=>{const w=m||x;return t[u]=!w||w.toLowerCase(),""}),t["max-age"]){const i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t},S.ab=function(r,t){const i=[];for(const u in r)u in t||i.push(u);return i},S.ac=ve,S.ad=function(r,t,i){var u=Math.sin(i),m=Math.cos(i),x=t[0],w=t[1],T=t[2],I=t[3],D=t[4],B=t[5],V=t[6],q=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=x*m+D*u,r[1]=w*m+B*u,r[2]=T*m+V*u,r[3]=I*m+q*u,r[4]=D*m-x*u,r[5]=B*m-w*u,r[6]=V*m-T*u,r[7]=q*m-I*u,r},S.ae=function(r){var t=new Pc(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},S.af=md,S.ag=function(r,t){let i=0,u=0;if(r.kind==="constant")u=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:m,minZoom:x,maxZoom:w}=r,T=m?ve(Un.interpolationFactor(m,t,x,w),0,1):0;r.kind==="camera"?u=Gn.number(r.minSize,r.maxSize,T):i=T}return{uSizeT:i,uSize:u}},S.ai=function(r,{uSize:t,uSizeT:i},{lowerSize:u,upperSize:m}){return r.kind==="source"?u/no:r.kind==="composite"?Gn.number(u/no,m/no,i):t},S.aj=Oc,S.ak=function(r,t,i,u){const m=t.y-r.y,x=t.x-r.x,w=u.y-i.y,T=u.x-i.x,I=w*x-T*m;if(I===0)return null;const D=(T*(r.y-i.y)-w*(r.x-i.x))/I;return new U(r.x+D*x,r.y+D*m)},S.al=jr,S.am=mf,S.an=fd,S.ao=function(r){let t=1/0,i=1/0,u=-1/0,m=-1/0;for(const x of r)t=Math.min(t,x.x),i=Math.min(i,x.y),u=Math.max(u,x.x),m=Math.max(m,x.y);return[t,i,u,m]},S.ap=ri,S.ar=Oh,S.as=function(r,t){var i=t[0],u=t[1],m=t[2],x=t[3],w=t[4],T=t[5],I=t[6],D=t[7],B=t[8],V=t[9],q=t[10],te=t[11],le=t[12],fe=t[13],Pe=t[14],Re=t[15],rt=i*T-u*w,Ue=i*I-m*w,Qe=i*D-x*w,gt=u*I-m*T,Rt=u*D-x*T,ir=m*D-x*I,zr=B*fe-V*le,rr=B*Pe-q*le,Jt=B*Re-te*le,vr=V*Pe-q*fe,fr=V*Re-te*fe,ur=q*Re-te*Pe,Tt=rt*ur-Ue*fr+Qe*vr+gt*Jt-Rt*rr+ir*zr;return Tt?(r[0]=(T*ur-I*fr+D*vr)*(Tt=1/Tt),r[1]=(m*fr-u*ur-x*vr)*Tt,r[2]=(fe*ir-Pe*Rt+Re*gt)*Tt,r[3]=(q*Rt-V*ir-te*gt)*Tt,r[4]=(I*Jt-w*ur-D*rr)*Tt,r[5]=(i*ur-m*Jt+x*rr)*Tt,r[6]=(Pe*Qe-le*ir-Re*Ue)*Tt,r[7]=(B*ir-q*Qe+te*Ue)*Tt,r[8]=(w*fr-T*Jt+D*zr)*Tt,r[9]=(u*Jt-i*fr-x*zr)*Tt,r[10]=(le*Rt-fe*Qe+Re*rt)*Tt,r[11]=(V*Qe-B*Rt-te*rt)*Tt,r[12]=(T*rr-w*vr-I*zr)*Tt,r[13]=(i*vr-u*rr+m*zr)*Tt,r[14]=(fe*Ue-le*gt-Pe*rt)*Tt,r[15]=(B*gt-V*Ue+q*rt)*Tt,r):null},S.at=fg,S.au=Rh,S.av=pg,S.aw=function(){const r={},t=ye.$version;for(const i in ye.$root){const u=ye.$root[i];if(u.required){let m=null;m=i==="version"?t:u.type==="array"?[]:{},m!=null&&(r[i]=m)}}return r},S.ax=Ma,S.ay=Gt,S.az=function(r){r=r.slice();const t=Object.create(null);for(let i=0;i<r.length;i++)t[r[i].id]=r[i];for(let i=0;i<r.length;i++)"ref"in r[i]&&(r[i]=we(r[i],t[r[i].ref]));return r},S.b=Me,S.b0=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},S.b1=function(r,t,i){return r[0]=t[0]*i[0],r[1]=t[1]*i[1],r[2]=t[2]*i[2],r[3]=t[3]*i[3],r},S.b2=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]},S.b3=Ge,S.b4=Ot,S.b5=ze,S.b6=function(r,t,i,u,m){var x,w=1/Math.tan(t/2);return r[0]=w/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=w,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+u)*(x=1/(u-m)),r[14]=2*m*u*x):(r[10]=-1,r[14]=-2*u),r},S.b7=function(r,t,i){var u=Math.sin(i),m=Math.cos(i),x=t[4],w=t[5],T=t[6],I=t[7],D=t[8],B=t[9],V=t[10],q=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=x*m+D*u,r[5]=w*m+B*u,r[6]=T*m+V*u,r[7]=I*m+q*u,r[8]=D*m-x*u,r[9]=B*m-w*u,r[10]=V*m-T*u,r[11]=q*m-I*u,r},S.b8=ge,S.b9=Oe,S.bA=el,S.bB=function(r){return r.message===_e},S.bC=vl,S.bD=zn,S.ba=function(r){return r*Math.PI/180},S.bb=function(r,t){const{x:i,y:u}=mt.fromLngLat(t);return!(r<0||r>25||u<0||u>=1||i<0||i>=1)},S.bc=function(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},S.bd=class extends F{},S.be=o,S.bf=t1,S.bh=pr,S.bi=function(r,t){bt.REGISTERED_PROTOCOLS[r]=t},S.bj=function(r){delete bt.REGISTERED_PROTOCOLS[r]},S.bk=function(r,t){const i={};for(let m=0;m<r.length;m++){const x=t&&t[r[m].id]||eh(r[m]);t&&(t[r[m].id]=x);let w=i[x];w||(w=i[x]=[]),w.push(r[m])}const u=[];for(const m in i)u.push(i[m]);return u},S.bl=ar,S.bm=Ai,S.bn=qe,S.bo=Lf,S.bp=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=mi/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;const t=r.bucket.layers[0],i=t.layout,u=t._unevaluatedLayout._values,m={layoutIconSize:u["icon-size"].possiblyEvaluate(new an(r.bucket.zoom+1),r.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new an(r.bucket.zoom+1),r.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new an(18))};if(r.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:B}=r.bucket.textSizeData;m.compositeTextSizes=[u["text-size"].possiblyEvaluate(new an(D),r.canonical),u["text-size"].possiblyEvaluate(new an(B),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:B}=r.bucket.iconSizeData;m.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new an(D),r.canonical),u["icon-size"].possiblyEvaluate(new an(B),r.canonical)]}const x=i.get("text-line-height")*ri,w=i.get("text-rotation-alignment")!=="viewport"&&i.get("symbol-placement")!=="point",T=i.get("text-keep-upright"),I=i.get("text-size");for(const D of r.bucket.features){const B=i.get("text-font").evaluate(D,{},r.canonical).join(","),V=I.evaluate(D,{},r.canonical),q=m.layoutTextSize.evaluate(D,{},r.canonical),te=m.layoutIconSize.evaluate(D,{},r.canonical),le={horizontal:{},vertical:void 0},fe=D.text;let Pe,Re=[0,0];if(fe){const Qe=fe.toString(),gt=i.get("text-letter-spacing").evaluate(D,{},r.canonical)*ri,Rt=hf(Qe)?gt:0,ir=i.get("text-anchor").evaluate(D,{},r.canonical),zr=l_(t,D,r.canonical);if(!zr){const fr=i.get("text-radial-offset").evaluate(D,{},r.canonical);Re=fr?o_(ir,[fr*ri,dg]):i.get("text-offset").evaluate(D,{},r.canonical).map(ur=>ur*ri)}let rr=w?"center":i.get("text-justify").evaluate(D,{},r.canonical);const Jt=i.get("symbol-placement")==="point"?i.get("text-max-width").evaluate(D,{},r.canonical)*ri:1/0,vr=()=>{r.bucket.allowVerticalPlacement&&ah(Qe)&&(le.vertical=zh(fe,r.glyphMap,r.glyphPositions,r.imagePositions,B,Jt,x,ir,"left",Rt,Re,S.ah.vertical,!0,q,V))};if(!w&&zr){const fr=new Set;if(rr==="auto")for(let Tt=0;Tt<zr.values.length;Tt+=2)fr.add(fg(zr.values[Tt]));else fr.add(rr);let ur=!1;for(const Tt of fr)if(!le.horizontal[Tt])if(ur)le.horizontal[Tt]=le.horizontal[0];else{const br=zh(fe,r.glyphMap,r.glyphPositions,r.imagePositions,B,Jt,x,"center",Tt,Rt,Re,S.ah.horizontal,!1,q,V);br&&(le.horizontal[Tt]=br,ur=br.positionedLines.length===1)}vr()}else{rr==="auto"&&(rr=fg(ir));const fr=zh(fe,r.glyphMap,r.glyphPositions,r.imagePositions,B,Jt,x,ir,rr,Rt,Re,S.ah.horizontal,!1,q,V);fr&&(le.horizontal[rr]=fr),vr(),ah(Qe)&&w&&T&&(le.vertical=zh(fe,r.glyphMap,r.glyphPositions,r.imagePositions,B,Jt,x,ir,rr,Rt,Re,S.ah.vertical,!1,q,V))}}let rt=!1;if(D.icon&&D.icon.name){const Qe=r.imageMap[D.icon.name];Qe&&(Pe=mu(r.imagePositions[D.icon.name],i.get("icon-offset").evaluate(D,{},r.canonical),i.get("icon-anchor").evaluate(D,{},r.canonical)),rt=!!Qe.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=rt:r.bucket.sdfIcons!==rt&&Je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qe.pixelRatio!==r.bucket.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}const Ue=c_(le.horizontal)||le.vertical;r.bucket.iconsInText=!!Ue&&Ue.iconsInText,(Ue||Pe)&&Qx(r.bucket,D,le,Pe,r.imageMap,m,q,te,Re,rt,r.canonical)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},S.bq=pa,S.br=kd,S.bs=ja,S.bt=cu,S.bu=Il,S.bv=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},S.bw=function(r,t,i,u,m){return c(this,void 0,void 0,function*(){if(pe())try{return yield Ze(r,t,i,u,m)}catch{}return function(x,w,T,I,D){const B=x.width,V=x.height;ht&&ae||(ht=new OffscreenCanvas(B,V),ae=ht.getContext("2d",{willReadFrequently:!0})),ht.width=B,ht.height=V,ae.drawImage(x,0,0,B,V);const q=ae.getImageData(w,T,I,D);return ae.clearRect(0,0,B,V),q.data}(r,t,i,u,m)})},S.bx=Tr,S.by=R,S.bz=N,S.c=Ct,S.d=r=>c(void 0,void 0,void 0,function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(t)}catch(i){throw new Error(`Could not load image because of ${i.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),S.e=je,S.f=r=>new Promise((t,i)=>{const u=new Image;u.onload=()=>{t(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=et})},u.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(r)],{type:"image/png"});u.src=r.byteLength?URL.createObjectURL(m):et}),S.g=wt,S.h=(r,t)=>Kt(je(r,{type:"json"}),t),S.i=Ve,S.j=Y,S.k=Kr,S.l=(r,t)=>Kt(je(r,{type:"arrayBuffer"}),t),S.m=Kt,S.n=function(r){return new Il(r).readFields(tc,[])},S.o=Yu,S.p=Ah,S.q=v,S.r=ih,S.s=Mr,S.t=kc,S.u=ko,S.v=ye,S.w=Je,S.x=function([r,t,i]){return t+=90,t*=Math.PI/180,i*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(i),y:r*Math.sin(t)*Math.sin(i),z:r*Math.cos(i)}},S.y=Gn,S.z=an}),b("worker",["./shared"],function(S){class c{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,Q){for(const Se of ee){this._layerConfigs[Se.id]=Se;const Fe=this._layers[Se.id]=S.aA(Se);Fe._featureFilter=S.a7(Fe.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of Q)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const ue=S.bk(Object.values(this._layerConfigs),this.keyCache);for(const Se of ue){const Fe=Se.map(ut=>this._layers[ut.id]),$e=Fe[0];if($e.visibility==="none")continue;const Xe=$e.source||"";let Le=this.familiesBySource[Xe];Le||(Le=this.familiesBySource[Xe]={});const pt=$e.sourceLayer||"_geojsonTileLayer";let It=Le[pt];It||(It=Le[pt]=[]),It.push(Fe)}}}class R{constructor(ee){const Q={},ue=[];for(const Xe in ee){const Le=ee[Xe],pt=Q[Xe]={};for(const It in Le){const ut=Le[+It];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const Nt={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};ue.push(Nt),pt[It]={rect:Nt,metrics:ut.metrics}}}const{w:Se,h:Fe}=S.p(ue),$e=new S.o({width:Se||1,height:Fe||1});for(const Xe in ee){const Le=ee[Xe];for(const pt in Le){const It=Le[+pt];if(!It||It.bitmap.width===0||It.bitmap.height===0)continue;const ut=Q[Xe][pt].rect;S.o.copy(It.bitmap,$e,{x:0,y:0},{x:ut.x+1,y:ut.y+1},It.bitmap)}}this.image=$e,this.positions=Q}}S.bl("GlyphAtlas",R);class N{constructor(ee){this.tileID=new S.S(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,Q,ue,Se){return S._(this,void 0,void 0,function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new S.a5;const Fe=new S.bm(Object.keys(ee.layers).sort()),$e=new S.bn(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const Xe={},Le={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ue},pt=Q.familiesBySource[this.source];for(const Zr in pt){const on=ee.layers[Zr];if(!on)continue;on.version===1&&S.w(`Vector tile source "${this.source}" layer "${Zr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pn=Fe.encode(Zr),Wn=[];for(let ai=0;ai<on.length;ai++){const Si=on.feature(ai),Sa=$e.getId(Si,Zr);Wn.push({feature:Si,id:Sa,index:ai,sourceLayerIndex:pn})}for(const ai of pt[Zr]){const Si=ai[0];Si.source!==this.source&&S.w(`layer.source = ${Si.source} does not equal this.source = ${this.source}`),Si.minzoom&&this.zoom<Math.floor(Si.minzoom)||Si.maxzoom&&this.zoom>=Si.maxzoom||Si.visibility!=="none"&&(Z(ai,this.zoom,ue),(Xe[Si.id]=Si.createBucket({index:$e.bucketLayerIDs.length,layers:ai,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pn,sourceID:this.source})).populate(Wn,Le,this.tileID.canonical),$e.bucketLayerIDs.push(ai.map(Sa=>Sa.id)))}}const It=S.aF(Le.glyphDependencies,Zr=>Object.keys(Zr).map(Number));this.inFlightDependencies.forEach(Zr=>Zr==null?void 0:Zr.abort()),this.inFlightDependencies=[];let ut=Promise.resolve({});if(Object.keys(It).length){const Zr=new AbortController;this.inFlightDependencies.push(Zr),ut=Se.sendAsync({type:"GG",data:{stacks:It,source:this.source,tileID:this.tileID,type:"glyphs"}},Zr)}const Nt=Object.keys(Le.iconDependencies);let hr=Promise.resolve({});if(Nt.length){const Zr=new AbortController;this.inFlightDependencies.push(Zr),hr=Se.sendAsync({type:"GI",data:{icons:Nt,source:this.source,tileID:this.tileID,type:"icons"}},Zr)}const mr=Object.keys(Le.patternDependencies);let rn=Promise.resolve({});if(mr.length){const Zr=new AbortController;this.inFlightDependencies.push(Zr),rn=Se.sendAsync({type:"GI",data:{icons:mr,source:this.source,tileID:this.tileID,type:"patterns"}},Zr)}const[Rr,en,Wr]=yield Promise.all([ut,hr,rn]),Pn=new R(Rr),An=new S.bo(en,Wr);for(const Zr in Xe){const on=Xe[Zr];on instanceof S.a6?(Z(on.layers,this.zoom,ue),S.bp({bucket:on,glyphMap:Rr,glyphPositions:Pn.positions,imageMap:en,imagePositions:An.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):on.hasPattern&&(on instanceof S.bq||on instanceof S.br||on instanceof S.bs)&&(Z(on.layers,this.zoom,ue),on.addFeatures(Le,this.tileID.canonical,An.patternPositions))}return this.status="done",{buckets:Object.values(Xe).filter(Zr=>!Zr.isEmpty()),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pn.image,imageAtlas:An,glyphMap:this.returnDependencies?Rr:null,iconMap:this.returnDependencies?en:null,glyphPositions:this.returnDependencies?Pn.positions:null}})}}function Z(Ce,ee,Q){const ue=new S.z(ee);for(const Se of Ce)Se.recalculate(ue,Q)}class U{constructor(ee,Q,ue){this.actor=ee,this.layerIndex=Q,this.availableImages=ue,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ee,Q){return S._(this,void 0,void 0,function*(){const ue=yield S.l(ee.request,Q);try{return{vectorTile:new S.bt.VectorTile(new S.bu(ue.data)),rawData:ue.data,cacheControl:ue.cacheControl,expires:ue.expires}}catch(Se){const Fe=new Uint8Array(ue.data);let $e=`Unable to parse the tile at ${ee.request.url}, `;throw $e+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error($e)}})}loadTile(ee){return S._(this,void 0,void 0,function*(){const Q=ee.uid,ue=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new S.bv(ee.request),Se=new N(ee);this.loading[Q]=Se;const Fe=new AbortController;Se.abort=Fe;try{const $e=yield this.loadVectorTile(ee,Fe);if(delete this.loading[Q],!$e)return null;const Xe=$e.rawData,Le={};$e.expires&&(Le.expires=$e.expires),$e.cacheControl&&(Le.cacheControl=$e.cacheControl);const pt={};if(ue){const ut=ue.finish();ut&&(pt.resourceTiming=JSON.parse(JSON.stringify(ut)))}Se.vectorTile=$e.vectorTile;const It=Se.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[Q]=Se,this.fetching[Q]={rawTileData:Xe,cacheControl:Le,resourceTiming:pt};try{const ut=yield It;return S.e({rawTileData:Xe.slice(0)},ut,Le,pt)}finally{delete this.fetching[Q]}}catch($e){throw delete this.loading[Q],Se.status="done",this.loaded[Q]=Se,$e}})}reloadTile(ee){return S._(this,void 0,void 0,function*(){const Q=ee.uid;if(!this.loaded||!this.loaded[Q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ue=this.loaded[Q];if(ue.showCollisionBoxes=ee.showCollisionBoxes,ue.status==="parsing"){const Se=yield ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor);let Fe;if(this.fetching[Q]){const{rawTileData:$e,cacheControl:Xe,resourceTiming:Le}=this.fetching[Q];delete this.fetching[Q],Fe=S.e({rawTileData:$e.slice(0)},Se,Xe,Le)}else Fe=Se;return Fe}if(ue.status==="done"&&ue.vectorTile)return ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ee){return S._(this,void 0,void 0,function*(){const Q=this.loading,ue=ee.uid;Q&&Q[ue]&&Q[ue].abort&&(Q[ue].abort.abort(),delete Q[ue])})}removeTile(ee){return S._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ee.uid]&&delete this.loaded[ee.uid]})}}class j{constructor(){this.loaded={}}loadTile(ee){return S._(this,void 0,void 0,function*(){const{uid:Q,encoding:ue,rawImageData:Se,redFactor:Fe,greenFactor:$e,blueFactor:Xe,baseShift:Le}=ee,pt=Se.width+2,It=Se.height+2,ut=S.b(Se)?new S.R({width:pt,height:It},yield S.bw(Se,-1,-1,pt,It)):Se,Nt=new S.bx(Q,ut,ue,Fe,$e,Xe,Le);return this.loaded=this.loaded||{},this.loaded[Q]=Nt,Nt})}removeTile(ee){const Q=this.loaded,ue=ee.uid;Q&&Q[ue]&&delete Q[ue]}}function G(Ce,ee){if(Ce.length!==0){se(Ce[0],ee);for(var Q=1;Q<Ce.length;Q++)se(Ce[Q],!ee)}}function se(Ce,ee){for(var Q=0,ue=0,Se=0,Fe=Ce.length,$e=Fe-1;Se<Fe;$e=Se++){var Xe=(Ce[Se][0]-Ce[$e][0])*(Ce[$e][1]+Ce[Se][1]),Le=Q+Xe;ue+=Math.abs(Q)>=Math.abs(Xe)?Q-Le+Xe:Xe-Le+Q,Q=Le}Q+ue>=0!=!!ee&&Ce.reverse()}var J=S.by(function Ce(ee,Q){var ue,Se=ee&&ee.type;if(Se==="FeatureCollection")for(ue=0;ue<ee.features.length;ue++)Ce(ee.features[ue],Q);else if(Se==="GeometryCollection")for(ue=0;ue<ee.geometries.length;ue++)Ce(ee.geometries[ue],Q);else if(Se==="Feature")Ce(ee.geometry,Q);else if(Se==="Polygon")G(ee.coordinates,Q);else if(Se==="MultiPolygon")for(ue=0;ue<ee.coordinates.length;ue++)G(ee.coordinates[ue],Q);return ee});const oe=S.bt.VectorTileFeature.prototype.toGeoJSON;var re={exports:{}},pe=S.bz,ge=S.bt.VectorTileFeature,Oe=ve;function ve(Ce,ee){this.options=ee||{},this.features=Ce,this.length=Ce.length}function Ge(Ce,ee){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=ee||4096}ve.prototype.feature=function(Ce){return new Ge(this.features[Ce],this.options.extent)},Ge.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var ee=0;ee<Ce.length;ee++){for(var Q=Ce[ee],ue=[],Se=0;Se<Q.length;Se++)ue.push(new pe(Q[Se][0],Q[Se][1]));this.geometry.push(ue)}return this.geometry},Ge.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,ee=1/0,Q=-1/0,ue=1/0,Se=-1/0,Fe=0;Fe<Ce.length;Fe++)for(var $e=Ce[Fe],Xe=0;Xe<$e.length;Xe++){var Le=$e[Xe];ee=Math.min(ee,Le.x),Q=Math.max(Q,Le.x),ue=Math.min(ue,Le.y),Se=Math.max(Se,Le.y)}return[ee,ue,Q,Se]},Ge.prototype.toGeoJSON=ge.prototype.toGeoJSON;var je=S.bA,St=Oe;function at(Ce){var ee=new je;return function(Q,ue){for(var Se in Q.layers)ue.writeMessage(3,Mt,Q.layers[Se])}(Ce,ee),ee.finish()}function Mt(Ce,ee){var Q;ee.writeVarintField(15,Ce.version||1),ee.writeStringField(1,Ce.name||""),ee.writeVarintField(5,Ce.extent||4096);var ue={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<Ce.length;Q++)ue.feature=Ce.feature(Q),ee.writeMessage(2,xt,ue);var Se=ue.keys;for(Q=0;Q<Se.length;Q++)ee.writeStringField(3,Se[Q]);var Fe=ue.values;for(Q=0;Q<Fe.length;Q++)ee.writeMessage(4,zt,Fe[Q])}function xt(Ce,ee){var Q=Ce.feature;Q.id!==void 0&&ee.writeVarintField(1,Q.id),ee.writeMessage(2,xe,Ce),ee.writeVarintField(3,Q.type),ee.writeMessage(4,Ve,Q)}function xe(Ce,ee){var Q=Ce.feature,ue=Ce.keys,Se=Ce.values,Fe=Ce.keycache,$e=Ce.valuecache;for(var Xe in Q.properties){var Le=Q.properties[Xe],pt=Fe[Xe];if(Le!==null){pt===void 0&&(ue.push(Xe),Fe[Xe]=pt=ue.length-1),ee.writeVarint(pt);var It=typeof Le;It!=="string"&&It!=="boolean"&&It!=="number"&&(Le=JSON.stringify(Le));var ut=It+":"+Le,Nt=$e[ut];Nt===void 0&&(Se.push(Le),$e[ut]=Nt=Se.length-1),ee.writeVarint(Nt)}}}function Je(Ce,ee){return(ee<<3)+(7&Ce)}function W(Ce){return Ce<<1^Ce>>31}function Ve(Ce,ee){for(var Q=Ce.loadGeometry(),ue=Ce.type,Se=0,Fe=0,$e=Q.length,Xe=0;Xe<$e;Xe++){var Le=Q[Xe],pt=1;ue===1&&(pt=Le.length),ee.writeVarint(Je(1,pt));for(var It=ue===3?Le.length-1:Le.length,ut=0;ut<It;ut++){ut===1&&ue!==1&&ee.writeVarint(Je(2,It-1));var Nt=Le[ut].x-Se,hr=Le[ut].y-Fe;ee.writeVarint(W(Nt)),ee.writeVarint(W(hr)),Se+=Nt,Fe+=hr}ue===3&&ee.writeVarint(Je(7,1))}}function zt(Ce,ee){var Q=typeof Ce;Q==="string"?ee.writeStringField(1,Ce):Q==="boolean"?ee.writeBooleanField(7,Ce):Q==="number"&&(Ce%1!=0?ee.writeDoubleField(3,Ce):Ce<0?ee.writeSVarintField(6,Ce):ee.writeVarintField(5,Ce))}re.exports=at,re.exports.fromVectorTileJs=at,re.exports.fromGeojsonVt=function(Ce,ee){ee=ee||{};var Q={};for(var ue in Ce)Q[ue]=new St(Ce[ue].features,ee),Q[ue].name=ue,Q[ue].version=ee.version,Q[ue].extent=ee.extent;return at({layers:Q})},re.exports.GeoJSONWrapper=St;var Me=S.by(re.exports);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},Ze=Math.fround||(ht=new Float32Array(1),Ce=>(ht[0]=+Ce,ht[0]));var ht;const ae=3,_e=5,Ct=6;class bt{constructor(ee){this.options=Object.assign(Object.create(et),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:Q,minZoom:ue,maxZoom:Se}=this.options;Q&&console.time("total time");const Fe=`prepare ${ee.length} points`;Q&&console.time(Fe),this.points=ee;const $e=[];for(let Le=0;Le<ee.length;Le++){const pt=ee[Le];if(!pt.geometry)continue;const[It,ut]=pt.geometry.coordinates,Nt=Ze(pr(It)),hr=Ze(Gt(ut));$e.push(Nt,hr,1/0,Le,-1,1),this.options.reduce&&$e.push(0)}let Xe=this.trees[Se+1]=this._createTree($e);Q&&console.timeEnd(Fe);for(let Le=Se;Le>=ue;Le--){const pt=+Date.now();Xe=this.trees[Le]=this._createTree(this._cluster(Xe,Le)),Q&&console.log("z%d: %d clusters in %dms",Le,Xe.numItems,+Date.now()-pt)}return Q&&console.timeEnd("total time"),this}getClusters(ee,Q){let ue=((ee[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,ee[1]));let Fe=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ue=-180,Fe=180;else if(ue>Fe){const ut=this.getClusters([ue,Se,180,$e],Q),Nt=this.getClusters([-180,Se,Fe,$e],Q);return ut.concat(Nt)}const Xe=this.trees[this._limitZoom(Q)],Le=Xe.range(pr(ue),Gt($e),pr(Fe),Gt(Se)),pt=Xe.data,It=[];for(const ut of Le){const Nt=this.stride*ut;It.push(pt[Nt+_e]>1?wt(pt,Nt,this.clusterProps):this.points[pt[Nt+ae]])}return It}getChildren(ee){const Q=this._getOriginId(ee),ue=this._getOriginZoom(ee),Se="No cluster with the specified id.",Fe=this.trees[ue];if(!Fe)throw new Error(Se);const $e=Fe.data;if(Q*this.stride>=$e.length)throw new Error(Se);const Xe=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),Le=Fe.within($e[Q*this.stride],$e[Q*this.stride+1],Xe),pt=[];for(const It of Le){const ut=It*this.stride;$e[ut+4]===ee&&pt.push($e[ut+_e]>1?wt($e,ut,this.clusterProps):this.points[$e[ut+ae]])}if(pt.length===0)throw new Error(Se);return pt}getLeaves(ee,Q,ue){const Se=[];return this._appendLeaves(Se,ee,Q=Q||10,ue=ue||0,0),Se}getTile(ee,Q,ue){const Se=this.trees[this._limitZoom(ee)],Fe=Math.pow(2,ee),{extent:$e,radius:Xe}=this.options,Le=Xe/$e,pt=(ue-Le)/Fe,It=(ue+1+Le)/Fe,ut={features:[]};return this._addTileFeatures(Se.range((Q-Le)/Fe,pt,(Q+1+Le)/Fe,It),Se.data,Q,ue,Fe,ut),Q===0&&this._addTileFeatures(Se.range(1-Le/Fe,pt,1,It),Se.data,Fe,ue,Fe,ut),Q===Fe-1&&this._addTileFeatures(Se.range(0,pt,Le/Fe,It),Se.data,-1,ue,Fe,ut),ut.features.length?ut:null}getClusterExpansionZoom(ee){let Q=this._getOriginZoom(ee)-1;for(;Q<=this.options.maxZoom;){const ue=this.getChildren(ee);if(Q++,ue.length!==1)break;ee=ue[0].properties.cluster_id}return Q}_appendLeaves(ee,Q,ue,Se,Fe){const $e=this.getChildren(Q);for(const Xe of $e){const Le=Xe.properties;if(Le&&Le.cluster?Fe+Le.point_count<=Se?Fe+=Le.point_count:Fe=this._appendLeaves(ee,Le.cluster_id,ue,Se,Fe):Fe<Se?Fe++:ee.push(Xe),ee.length===ue)break}return Fe}_createTree(ee){const Q=new S.av(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<ee.length;ue+=this.stride)Q.add(ee[ue],ee[ue+1]);return Q.finish(),Q.data=ee,Q}_addTileFeatures(ee,Q,ue,Se,Fe,$e){for(const Xe of ee){const Le=Xe*this.stride,pt=Q[Le+_e]>1;let It,ut,Nt;if(pt)It=lr(Q,Le,this.clusterProps),ut=Q[Le],Nt=Q[Le+1];else{const rn=this.points[Q[Le+ae]];It=rn.properties;const[Rr,en]=rn.geometry.coordinates;ut=pr(Rr),Nt=Gt(en)}const hr={type:1,geometry:[[Math.round(this.options.extent*(ut*Fe-ue)),Math.round(this.options.extent*(Nt*Fe-Se))]],tags:It};let mr;mr=pt||this.options.generateId?Q[Le+ae]:this.points[Q[Le+ae]].id,mr!==void 0&&(hr.id=mr),$e.features.push(hr)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,Q){const{radius:ue,extent:Se,reduce:Fe,minPoints:$e}=this.options,Xe=ue/(Se*Math.pow(2,Q)),Le=ee.data,pt=[],It=this.stride;for(let ut=0;ut<Le.length;ut+=It){if(Le[ut+2]<=Q)continue;Le[ut+2]=Q;const Nt=Le[ut],hr=Le[ut+1],mr=ee.within(Le[ut],Le[ut+1],Xe),rn=Le[ut+_e];let Rr=rn;for(const en of mr){const Wr=en*It;Le[Wr+2]>Q&&(Rr+=Le[Wr+_e])}if(Rr>rn&&Rr>=$e){let en,Wr=Nt*rn,Pn=hr*rn,An=-1;const Zr=((ut/It|0)<<5)+(Q+1)+this.points.length;for(const on of mr){const pn=on*It;if(Le[pn+2]<=Q)continue;Le[pn+2]=Q;const Wn=Le[pn+_e];Wr+=Le[pn]*Wn,Pn+=Le[pn+1]*Wn,Le[pn+4]=Zr,Fe&&(en||(en=this._map(Le,ut,!0),An=this.clusterProps.length,this.clusterProps.push(en)),Fe(en,this._map(Le,pn)))}Le[ut+4]=Zr,pt.push(Wr/Rr,Pn/Rr,1/0,Zr,-1,Rr),Fe&&pt.push(An)}else{for(let en=0;en<It;en++)pt.push(Le[ut+en]);if(Rr>1)for(const en of mr){const Wr=en*It;if(!(Le[Wr+2]<=Q)){Le[Wr+2]=Q;for(let Pn=0;Pn<It;Pn++)pt.push(Le[Wr+Pn])}}}}return pt}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,Q,ue){if(ee[Q+_e]>1){const $e=this.clusterProps[ee[Q+Ct]];return ue?Object.assign({},$e):$e}const Se=this.points[ee[Q+ae]].properties,Fe=this.options.map(Se);return ue&&Fe===Se?Object.assign({},Fe):Fe}}function wt(Ce,ee,Q){return{type:"Feature",id:Ce[ee+ae],properties:lr(Ce,ee,Q),geometry:{type:"Point",coordinates:[(ue=Ce[ee],360*(ue-.5)),Kt(Ce[ee+1])]}};var ue}function lr(Ce,ee,Q){const ue=Ce[ee+_e],Se=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,Fe=Ce[ee+Ct],$e=Fe===-1?{}:Object.assign({},Q[Fe]);return Object.assign($e,{cluster:!0,cluster_id:Ce[ee+ae],point_count:ue,point_count_abbreviated:Se})}function pr(Ce){return Ce/360+.5}function Gt(Ce){const ee=Math.sin(Ce*Math.PI/180),Q=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return Q<0?0:Q>1?1:Q}function Kt(Ce){const ee=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Mr(Ce,ee,Q,ue){let Se=ue;const Fe=ee+(Q-ee>>1);let $e,Xe=Q-ee;const Le=Ce[ee],pt=Ce[ee+1],It=Ce[Q],ut=Ce[Q+1];for(let Nt=ee+3;Nt<Q;Nt+=3){const hr=Vr(Ce[Nt],Ce[Nt+1],Le,pt,It,ut);if(hr>Se)$e=Nt,Se=hr;else if(hr===Se){const mr=Math.abs(Nt-Fe);mr<Xe&&($e=Nt,Xe=mr)}}Se>ue&&($e-ee>3&&Mr(Ce,ee,$e,ue),Ce[$e+2]=Se,Q-$e>3&&Mr(Ce,$e,Q,ue))}function Vr(Ce,ee,Q,ue,Se,Fe){let $e=Se-Q,Xe=Fe-ue;if($e!==0||Xe!==0){const Le=((Ce-Q)*$e+(ee-ue)*Xe)/($e*$e+Xe*Xe);Le>1?(Q=Se,ue=Fe):Le>0&&(Q+=$e*Le,ue+=Xe*Le)}return $e=Ce-Q,Xe=ee-ue,$e*$e+Xe*Xe}function tn(Ce,ee,Q,ue){const Se={id:Ce??null,type:ee,geometry:Q,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ee==="Point"||ee==="MultiPoint"||ee==="LineString")Kr(Se,Q);else if(ee==="Polygon")Kr(Se,Q[0]);else if(ee==="MultiLineString")for(const Fe of Q)Kr(Se,Fe);else if(ee==="MultiPolygon")for(const Fe of Q)Kr(Se,Fe[0]);return Se}function Kr(Ce,ee){for(let Q=0;Q<ee.length;Q+=3)Ce.minX=Math.min(Ce.minX,ee[Q]),Ce.minY=Math.min(Ce.minY,ee[Q+1]),Ce.maxX=Math.max(Ce.maxX,ee[Q]),Ce.maxY=Math.max(Ce.maxY,ee[Q+1])}function Y(Ce,ee,Q,ue){if(!ee.geometry)return;const Se=ee.geometry.coordinates;if(Se&&Se.length===0)return;const Fe=ee.geometry.type,$e=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2);let Xe=[],Le=ee.id;if(Q.promoteId?Le=ee.properties[Q.promoteId]:Q.generateId&&(Le=ue||0),Fe==="Point")ft(Se,Xe);else if(Fe==="MultiPoint")for(const pt of Se)ft(pt,Xe);else if(Fe==="LineString")ye(Se,Xe,$e,!1);else if(Fe==="MultiLineString"){if(Q.lineMetrics){for(const pt of Se)Xe=[],ye(pt,Xe,$e,!1),Ce.push(tn(Le,"LineString",Xe,ee.properties));return}Ae(Se,Xe,$e,!1)}else if(Fe==="Polygon")Ae(Se,Xe,$e,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(const pt of ee.geometry.geometries)Y(Ce,{id:Le,geometry:pt,properties:ee.properties},Q,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const pt of Se){const It=[];Ae(pt,It,$e,!0),Xe.push(It)}}Ce.push(tn(Le,Fe,Xe,ee.properties))}function ft(Ce,ee){ee.push(we(Ce[0]),Ne(Ce[1]),0)}function ye(Ce,ee,Q,ue){let Se,Fe,$e=0;for(let Le=0;Le<Ce.length;Le++){const pt=we(Ce[Le][0]),It=Ne(Ce[Le][1]);ee.push(pt,It,0),Le>0&&($e+=ue?(Se*It-pt*Fe)/2:Math.sqrt(Math.pow(pt-Se,2)+Math.pow(It-Fe,2))),Se=pt,Fe=It}const Xe=ee.length-3;ee[2]=1,Mr(ee,0,Xe,Q),ee[Xe+2]=1,ee.size=Math.abs($e),ee.start=0,ee.end=ee.size}function Ae(Ce,ee,Q,ue){for(let Se=0;Se<Ce.length;Se++){const Fe=[];ye(Ce[Se],Fe,Q,ue),ee.push(Fe)}}function we(Ce){return Ce/360+.5}function Ne(Ce){const ee=Math.sin(Ce*Math.PI/180),Q=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return Q<0?0:Q>1?1:Q}function _t(Ce,ee,Q,ue,Se,Fe,$e,Xe){if(ue/=ee,Fe>=(Q/=ee)&&$e<ue)return Ce;if($e<Q||Fe>=ue)return null;const Le=[];for(const pt of Ce){const It=pt.geometry;let ut=pt.type;const Nt=Se===0?pt.minX:pt.minY,hr=Se===0?pt.maxX:pt.maxY;if(Nt>=Q&&hr<ue){Le.push(pt);continue}if(hr<Q||Nt>=ue)continue;let mr=[];if(ut==="Point"||ut==="MultiPoint")At(It,mr,Q,ue,Se);else if(ut==="LineString")nt(It,mr,Q,ue,Se,!1,Xe.lineMetrics);else if(ut==="MultiLineString")nr(It,mr,Q,ue,Se,!1);else if(ut==="Polygon")nr(It,mr,Q,ue,Se,!0);else if(ut==="MultiPolygon")for(const rn of It){const Rr=[];nr(rn,Rr,Q,ue,Se,!0),Rr.length&&mr.push(Rr)}if(mr.length){if(Xe.lineMetrics&&ut==="LineString"){for(const rn of mr)Le.push(tn(pt.id,ut,rn,pt.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(mr.length===1?(ut="LineString",mr=mr[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=mr.length===3?"Point":"MultiPoint"),Le.push(tn(pt.id,ut,mr,pt.tags))}}return Le.length?Le:null}function At(Ce,ee,Q,ue,Se){for(let Fe=0;Fe<Ce.length;Fe+=3){const $e=Ce[Fe+Se];$e>=Q&&$e<=ue&&Lt(ee,Ce[Fe],Ce[Fe+1],Ce[Fe+2])}}function nt(Ce,ee,Q,ue,Se,Fe,$e){let Xe=Dt(Ce);const Le=Se===0?xr:sn;let pt,It,ut=Ce.start;for(let Rr=0;Rr<Ce.length-3;Rr+=3){const en=Ce[Rr],Wr=Ce[Rr+1],Pn=Ce[Rr+2],An=Ce[Rr+3],Zr=Ce[Rr+4],on=Se===0?en:Wr,pn=Se===0?An:Zr;let Wn=!1;$e&&(pt=Math.sqrt(Math.pow(en-An,2)+Math.pow(Wr-Zr,2))),on<Q?pn>Q&&(It=Le(Xe,en,Wr,An,Zr,Q),$e&&(Xe.start=ut+pt*It)):on>ue?pn<ue&&(It=Le(Xe,en,Wr,An,Zr,ue),$e&&(Xe.start=ut+pt*It)):Lt(Xe,en,Wr,Pn),pn<Q&&on>=Q&&(It=Le(Xe,en,Wr,An,Zr,Q),Wn=!0),pn>ue&&on<=ue&&(It=Le(Xe,en,Wr,An,Zr,ue),Wn=!0),!Fe&&Wn&&($e&&(Xe.end=ut+pt*It),ee.push(Xe),Xe=Dt(Ce)),$e&&(ut+=pt)}let Nt=Ce.length-3;const hr=Ce[Nt],mr=Ce[Nt+1],rn=Se===0?hr:mr;rn>=Q&&rn<=ue&&Lt(Xe,hr,mr,Ce[Nt+2]),Nt=Xe.length-3,Fe&&Nt>=3&&(Xe[Nt]!==Xe[0]||Xe[Nt+1]!==Xe[1])&&Lt(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&ee.push(Xe)}function Dt(Ce){const ee=[];return ee.size=Ce.size,ee.start=Ce.start,ee.end=Ce.end,ee}function nr(Ce,ee,Q,ue,Se,Fe){for(const $e of Ce)nt($e,ee,Q,ue,Se,Fe,!1)}function Lt(Ce,ee,Q,ue){Ce.push(ee,Q,ue)}function xr(Ce,ee,Q,ue,Se,Fe){const $e=(Fe-ee)/(ue-ee);return Lt(Ce,Fe,Q+(Se-Q)*$e,1),$e}function sn(Ce,ee,Q,ue,Se,Fe){const $e=(Fe-Q)/(Se-Q);return Lt(Ce,ee+(ue-ee)*$e,Fe,1),$e}function vt(Ce,ee){const Q=[];for(let ue=0;ue<Ce.length;ue++){const Se=Ce[ue],Fe=Se.type;let $e;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")$e=Cn(Se.geometry,ee);else if(Fe==="MultiLineString"||Fe==="Polygon"){$e=[];for(const Xe of Se.geometry)$e.push(Cn(Xe,ee))}else if(Fe==="MultiPolygon"){$e=[];for(const Xe of Se.geometry){const Le=[];for(const pt of Xe)Le.push(Cn(pt,ee));$e.push(Le)}}Q.push(tn(Se.id,Fe,$e,Se.tags))}return Q}function Cn(Ce,ee){const Q=[];Q.size=Ce.size,Ce.start!==void 0&&(Q.start=Ce.start,Q.end=Ce.end);for(let ue=0;ue<Ce.length;ue+=3)Q.push(Ce[ue]+ee,Ce[ue+1],Ce[ue+2]);return Q}function Sn(Ce,ee){if(Ce.transformed)return Ce;const Q=1<<Ce.z,ue=Ce.x,Se=Ce.y;for(const Fe of Ce.features){const $e=Fe.geometry,Xe=Fe.type;if(Fe.geometry=[],Xe===1)for(let Le=0;Le<$e.length;Le+=2)Fe.geometry.push(In($e[Le],$e[Le+1],ee,Q,ue,Se));else for(let Le=0;Le<$e.length;Le++){const pt=[];for(let It=0;It<$e[Le].length;It+=2)pt.push(In($e[Le][It],$e[Le][It+1],ee,Q,ue,Se));Fe.geometry.push(pt)}}return Ce.transformed=!0,Ce}function In(Ce,ee,Q,ue,Se,Fe){return[Math.round(Q*(Ce*ue-Se)),Math.round(Q*(ee*ue-Fe))]}function wi(Ce,ee,Q,ue,Se){const Fe=ee===Se.maxZoom?0:Se.tolerance/((1<<ee)*Se.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:Ce.length,source:null,x:Q,y:ue,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Xe of Ce)Pt($e,Xe,Fe,Se);return $e}function Pt(Ce,ee,Q,ue){const Se=ee.geometry,Fe=ee.type,$e=[];if(Ce.minX=Math.min(Ce.minX,ee.minX),Ce.minY=Math.min(Ce.minY,ee.minY),Ce.maxX=Math.max(Ce.maxX,ee.maxX),Ce.maxY=Math.max(Ce.maxY,ee.maxY),Fe==="Point"||Fe==="MultiPoint")for(let Xe=0;Xe<Se.length;Xe+=3)$e.push(Se[Xe],Se[Xe+1]),Ce.numPoints++,Ce.numSimplified++;else if(Fe==="LineString")Lr($e,Se,Ce,Q,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(let Xe=0;Xe<Se.length;Xe++)Lr($e,Se[Xe],Ce,Q,Fe==="Polygon",Xe===0);else if(Fe==="MultiPolygon")for(let Xe=0;Xe<Se.length;Xe++){const Le=Se[Xe];for(let pt=0;pt<Le.length;pt++)Lr($e,Le[pt],Ce,Q,!0,pt===0)}if($e.length){let Xe=ee.tags||null;if(Fe==="LineString"&&ue.lineMetrics){Xe={};for(const pt in ee.tags)Xe[pt]=ee.tags[pt];Xe.mapbox_clip_start=Se.start/Se.size,Xe.mapbox_clip_end=Se.end/Se.size}const Le={geometry:$e,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:Xe};ee.id!==null&&(Le.id=ee.id),Ce.features.push(Le)}}function Lr(Ce,ee,Q,ue,Se,Fe){const $e=ue*ue;if(ue>0&&ee.size<(Se?$e:ue))return void(Q.numPoints+=ee.length/3);const Xe=[];for(let Le=0;Le<ee.length;Le+=3)(ue===0||ee[Le+2]>$e)&&(Q.numSimplified++,Xe.push(ee[Le],ee[Le+1])),Q.numPoints++;Se&&function(Le,pt){let It=0;for(let ut=0,Nt=Le.length,hr=Nt-2;ut<Nt;hr=ut,ut+=2)It+=(Le[ut]-Le[hr])*(Le[ut+1]+Le[hr+1]);if(It>0===pt)for(let ut=0,Nt=Le.length;ut<Nt/2;ut+=2){const hr=Le[ut],mr=Le[ut+1];Le[ut]=Le[Nt-2-ut],Le[ut+1]=Le[Nt-1-ut],Le[Nt-2-ut]=hr,Le[Nt-1-ut]=mr}}(Xe,Fe),Ce.push(Xe)}const kr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class kn{constructor(ee,Q){const ue=(Q=this.options=function(Fe,$e){for(const Xe in $e)Fe[Xe]=$e[Xe];return Fe}(Object.create(kr),Q)).debug;if(ue&&console.time("preprocess data"),Q.maxZoom<0||Q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Q.promoteId&&Q.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=function(Fe,$e){const Xe=[];if(Fe.type==="FeatureCollection")for(let Le=0;Le<Fe.features.length;Le++)Y(Xe,Fe.features[Le],$e,Le);else Y(Xe,Fe.type==="Feature"?Fe:{geometry:Fe},$e);return Xe}(ee,Q);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Q.indexMaxZoom,Q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=function(Fe,$e){const Xe=$e.buffer/$e.extent;let Le=Fe;const pt=_t(Fe,1,-1-Xe,Xe,0,-1,2,$e),It=_t(Fe,1,1-Xe,2+Xe,0,-1,2,$e);return(pt||It)&&(Le=_t(Fe,1,-Xe,1+Xe,0,-1,2,$e)||[],pt&&(Le=vt(pt,1).concat(Le)),It&&(Le=Le.concat(vt(It,-1)))),Le}(Se,Q),Se.length&&this.splitTile(Se,0,0,0),ue&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,Q,ue,Se,Fe,$e,Xe){const Le=[ee,Q,ue,Se],pt=this.options,It=pt.debug;for(;Le.length;){Se=Le.pop(),ue=Le.pop(),Q=Le.pop(),ee=Le.pop();const ut=1<<Q,Nt=bi(Q,ue,Se);let hr=this.tiles[Nt];if(!hr&&(It>1&&console.time("creation"),hr=this.tiles[Nt]=wi(ee,Q,ue,Se,pt),this.tileCoords.push({z:Q,x:ue,y:Se}),It)){It>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Q,ue,Se,hr.numFeatures,hr.numPoints,hr.numSimplified),console.timeEnd("creation"));const Wn=`z${Q}`;this.stats[Wn]=(this.stats[Wn]||0)+1,this.total++}if(hr.source=ee,Fe==null){if(Q===pt.indexMaxZoom||hr.numPoints<=pt.indexMaxPoints)continue}else{if(Q===pt.maxZoom||Q===Fe)continue;if(Fe!=null){const Wn=Fe-Q;if(ue!==$e>>Wn||Se!==Xe>>Wn)continue}}if(hr.source=null,ee.length===0)continue;It>1&&console.time("clipping");const mr=.5*pt.buffer/pt.extent,rn=.5-mr,Rr=.5+mr,en=1+mr;let Wr=null,Pn=null,An=null,Zr=null,on=_t(ee,ut,ue-mr,ue+Rr,0,hr.minX,hr.maxX,pt),pn=_t(ee,ut,ue+rn,ue+en,0,hr.minX,hr.maxX,pt);ee=null,on&&(Wr=_t(on,ut,Se-mr,Se+Rr,1,hr.minY,hr.maxY,pt),Pn=_t(on,ut,Se+rn,Se+en,1,hr.minY,hr.maxY,pt),on=null),pn&&(An=_t(pn,ut,Se-mr,Se+Rr,1,hr.minY,hr.maxY,pt),Zr=_t(pn,ut,Se+rn,Se+en,1,hr.minY,hr.maxY,pt),pn=null),It>1&&console.timeEnd("clipping"),Le.push(Wr||[],Q+1,2*ue,2*Se),Le.push(Pn||[],Q+1,2*ue,2*Se+1),Le.push(An||[],Q+1,2*ue+1,2*Se),Le.push(Zr||[],Q+1,2*ue+1,2*Se+1)}}getTile(ee,Q,ue){ee=+ee,Q=+Q,ue=+ue;const Se=this.options,{extent:Fe,debug:$e}=Se;if(ee<0||ee>24)return null;const Xe=1<<ee,Le=bi(ee,Q=Q+Xe&Xe-1,ue);if(this.tiles[Le])return Sn(this.tiles[Le],Fe);$e>1&&console.log("drilling down to z%d-%d-%d",ee,Q,ue);let pt,It=ee,ut=Q,Nt=ue;for(;!pt&&It>0;)It--,ut>>=1,Nt>>=1,pt=this.tiles[bi(It,ut,Nt)];return pt&&pt.source?($e>1&&(console.log("found parent tile z%d-%d-%d",It,ut,Nt),console.time("drilling down")),this.splitTile(pt.source,It,ut,Nt,ee,Q,ue),$e>1&&console.timeEnd("drilling down"),this.tiles[Le]?Sn(this.tiles[Le],Fe):null):null}}function bi(Ce,ee,Q){return 32*((1<<Ce)*Q+ee)+Ce}function Ar(Ce,ee){return ee?Ce.properties[ee]:Ce.id}function Nn(Ce,ee){if(Ce==null)return!0;if(Ce.type==="Feature")return Ar(Ce,ee)!=null;if(Ce.type==="FeatureCollection"){const Q=new Set;for(const ue of Ce.features){const Se=Ar(ue,ee);if(Se==null||Q.has(Se))return!1;Q.add(Se)}return!0}return!1}function Ri(Ce,ee){const Q=new Map;if(Ce!=null)if(Ce.type==="Feature")Q.set(Ar(Ce,ee),Ce);else for(const ue of Ce.features)Q.set(Ar(ue,ee),ue);return Q}class si extends U{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ee,Q){return S._(this,void 0,void 0,function*(){const ue=ee.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!Se)return null;const Fe=new class{constructor(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=S.X,this.length=Xe.length,this._features=Xe}feature(Xe){return new class{constructor(Le){this._feature=Le,this.extent=S.X,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const pt of this._feature.geometry)Le.push([new S.P(pt[0],pt[1])]);return Le}{const Le=[];for(const pt of this._feature.geometry){const It=[];for(const ut of pt)It.push(new S.P(ut[0],ut[1]));Le.push(It)}return Le}}toGeoJSON(Le,pt,It){return oe.call(this,Le,pt,It)}}(this._features[Xe])}}(Se.features);let $e=Me(Fe);return $e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),{vectorTile:Fe,rawData:$e.buffer}})}loadData(ee){return S._(this,void 0,void 0,function*(){var Q;(Q=this._pendingRequest)===null||Q===void 0||Q.abort();const ue=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new S.bv(ee.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest),this._geoJSONIndex=ee.cluster?new bt(function({superclusterOptions:$e,clusterProperties:Xe}){if(!Xe||!$e)return $e;const Le={},pt={},It={accumulated:null,zoom:0},ut={properties:null},Nt=Object.keys(Xe);for(const hr of Nt){const[mr,rn]=Xe[hr],Rr=S.bC(rn),en=S.bC(typeof mr=="string"?[mr,["accumulated"],["get",hr]]:mr);Le[hr]=Rr.value,pt[hr]=en.value}return $e.map=hr=>{ut.properties=hr;const mr={};for(const rn of Nt)mr[rn]=Le[rn].evaluate(It,ut);return mr},$e.reduce=(hr,mr)=>{ut.properties=mr;for(const rn of Nt)It.accumulated=hr[rn],hr[rn]=pt[rn].evaluate(It,ut)},$e}(ee)).load((yield this._pendingData).features):(Se=yield this._pendingData,new kn(Se,ee.geojsonVtOptions)),this.loaded={};const Fe={};if(ue){const $e=ue.finish();$e&&(Fe.resourceTiming={},Fe.resourceTiming[ee.source]=JSON.parse(JSON.stringify($e)))}return Fe}catch(Fe){if(delete this._pendingRequest,S.bB(Fe))return{abandoned:!0};throw Fe}var Se})}getData(){return S._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ee){const Q=this.loaded;return Q&&Q[ee.uid]?super.reloadTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,Q){return S._(this,void 0,void 0,function*(){let ue=yield this.loadGeoJSON(ee,Q);if(delete this._pendingRequest,typeof ue!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(J(ue,!0),ee.filter){const Se=S.bC(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map($e=>`${$e.key}: ${$e.message}`).join(", "));ue={type:"FeatureCollection",features:ue.features.filter($e=>Se.value.evaluate({zoom:0},$e))}}return ue})}loadGeoJSON(ee,Q){return S._(this,void 0,void 0,function*(){const{promoteId:ue}=ee;if(ee.request){const Se=yield S.h(ee.request,Q);return this._dataUpdateable=Nn(Se.data,ue)?Ri(Se.data,ue):void 0,Se.data}if(typeof ee.data=="string")try{const Se=JSON.parse(ee.data);return this._dataUpdateable=Nn(Se,ue)?Ri(Se,ue):void 0,Se}catch{throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`)}if(!ee.dataDiff)throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ee.source}`);return function(Se,Fe,$e){var Xe,Le,pt,It;if(Fe.removeAll&&Se.clear(),Fe.remove)for(const ut of Fe.remove)Se.delete(ut);if(Fe.add)for(const ut of Fe.add){const Nt=Ar(ut,$e);Nt!=null&&Se.set(Nt,ut)}if(Fe.update)for(const ut of Fe.update){let Nt=Se.get(ut.id);if(Nt==null)continue;const hr=!ut.removeAllProperties&&(((Xe=ut.removeProperties)===null||Xe===void 0?void 0:Xe.length)>0||((Le=ut.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((ut.newGeometry||ut.removeAllProperties||hr)&&(Nt=Object.assign({},Nt),Se.set(ut.id,Nt),hr&&(Nt.properties=Object.assign({},Nt.properties))),ut.newGeometry&&(Nt.geometry=ut.newGeometry),ut.removeAllProperties)Nt.properties={};else if(((pt=ut.removeProperties)===null||pt===void 0?void 0:pt.length)>0)for(const mr of ut.removeProperties)Object.prototype.hasOwnProperty.call(Nt.properties,mr)&&delete Nt.properties[mr];if(((It=ut.addOrUpdateProperties)===null||It===void 0?void 0:It.length)>0)for(const{key:mr,value:rn}of ut.addOrUpdateProperties)Nt.properties[mr]=rn}}(this._dataUpdateable,ee.dataDiff,ue),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ee){return S._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}class Hr{constructor(ee){this.self=ee,this.actor=new S.F(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Q,ue)=>{if(this.externalWorkerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.externalWorkerSourceTypes[Q]=ue},this.self.addProtocol=S.bi,this.self.removeProtocol=S.bj,this.self.registerRTLTextPlugin=Q=>{if(S.bD.isParsed())throw new Error("RTL text plugin already registered.");S.bD.setMethods(Q)},this.actor.registerMessageHandler("LDT",(Q,ue)=>this._getDEMWorkerSource(Q,ue.source).loadTile(ue)),this.actor.registerMessageHandler("RDT",(Q,ue)=>S._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Q,ue.source).removeTile(ue)})),this.actor.registerMessageHandler("GCEZ",(Q,ue)=>S._(this,void 0,void 0,function*(){return this._getWorkerSource(Q,ue.type,ue.source).getClusterExpansionZoom(ue)})),this.actor.registerMessageHandler("GCC",(Q,ue)=>S._(this,void 0,void 0,function*(){return this._getWorkerSource(Q,ue.type,ue.source).getClusterChildren(ue)})),this.actor.registerMessageHandler("GCL",(Q,ue)=>S._(this,void 0,void 0,function*(){return this._getWorkerSource(Q,ue.type,ue.source).getClusterLeaves(ue)})),this.actor.registerMessageHandler("LD",(Q,ue)=>this._getWorkerSource(Q,ue.type,ue.source).loadData(ue)),this.actor.registerMessageHandler("GD",(Q,ue)=>this._getWorkerSource(Q,ue.type,ue.source).getData()),this.actor.registerMessageHandler("LT",(Q,ue)=>this._getWorkerSource(Q,ue.type,ue.source).loadTile(ue)),this.actor.registerMessageHandler("RT",(Q,ue)=>this._getWorkerSource(Q,ue.type,ue.source).reloadTile(ue)),this.actor.registerMessageHandler("AT",(Q,ue)=>this._getWorkerSource(Q,ue.type,ue.source).abortTile(ue)),this.actor.registerMessageHandler("RMT",(Q,ue)=>this._getWorkerSource(Q,ue.type,ue.source).removeTile(ue)),this.actor.registerMessageHandler("RS",(Q,ue)=>S._(this,void 0,void 0,function*(){if(!this.workerSources[Q]||!this.workerSources[Q][ue.type]||!this.workerSources[Q][ue.type][ue.source])return;const Se=this.workerSources[Q][ue.type][ue.source];delete this.workerSources[Q][ue.type][ue.source],Se.removeSource!==void 0&&Se.removeSource(ue)})),this.actor.registerMessageHandler("RM",Q=>S._(this,void 0,void 0,function*(){delete this.layerIndexes[Q],delete this.availableImages[Q],delete this.workerSources[Q],delete this.demWorkerSources[Q]})),this.actor.registerMessageHandler("SR",(Q,ue)=>S._(this,void 0,void 0,function*(){this.referrer=ue})),this.actor.registerMessageHandler("SRPS",(Q,ue)=>this._syncRTLPluginState(Q,ue)),this.actor.registerMessageHandler("IS",(Q,ue)=>S._(this,void 0,void 0,function*(){this.self.importScripts(ue)})),this.actor.registerMessageHandler("SI",(Q,ue)=>this._setImages(Q,ue)),this.actor.registerMessageHandler("UL",(Q,ue)=>S._(this,void 0,void 0,function*(){this._getLayerIndex(Q).update(ue.layers,ue.removedIds)})),this.actor.registerMessageHandler("SL",(Q,ue)=>S._(this,void 0,void 0,function*(){this._getLayerIndex(Q).replace(ue)}))}_setImages(ee,Q){return S._(this,void 0,void 0,function*(){this.availableImages[ee]=Q;for(const ue in this.workerSources[ee]){const Se=this.workerSources[ee][ue];for(const Fe in Se)Se[Fe].availableImages=Q}})}_syncRTLPluginState(ee,Q){return S._(this,void 0,void 0,function*(){if(S.bD.isParsed())return S.bD.getState();if(Q.pluginStatus!=="loading")return S.bD.setState(Q),Q;const ue=Q.pluginURL;if(this.self.importScripts(ue),S.bD.isParsed()){const Se={pluginStatus:"loaded",pluginURL:ue};return S.bD.setState(Se),Se}throw S.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ue}`)})}_getAvailableImages(ee){let Q=this.availableImages[ee];return Q||(Q=[]),Q}_getLayerIndex(ee){let Q=this.layerIndexes[ee];return Q||(Q=this.layerIndexes[ee]=new c),Q}_getWorkerSource(ee,Q,ue){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][Q]||(this.workerSources[ee][Q]={}),!this.workerSources[ee][Q][ue]){const Se={sendAsync:(Fe,$e)=>(Fe.targetMapId=ee,this.actor.sendAsync(Fe,$e))};switch(Q){case"vector":this.workerSources[ee][Q][ue]=new U(Se,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][Q][ue]=new si(Se,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][Q][ue]=new this.externalWorkerSourceTypes[Q](Se,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][Q][ue]}_getDEMWorkerSource(ee,Q){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][Q]||(this.demWorkerSources[ee][Q]=new j),this.demWorkerSources[ee][Q]}}return S.i(self)&&(self.worker=new Hr(self)),Hr}),b("index",["exports","./shared"],function(S,c){var R="4.7.1";let N,Z;const U={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((e,a)=>{const d=requestAnimationFrame(e);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),a(c.c())})}),getImageData(v,e=0){return this.getImageCanvasContext(v).getImageData(-e,-e,v.width+2*e,v.height+2*e)},getImageCanvasContext(v){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=v.width,e.height=v.height,a.drawImage(v,0,0,v.width,v.height),a},resolveURL:v=>(N||(N=document.createElement("a")),N.href=v,N.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Z==null&&(Z=matchMedia("(prefers-reduced-motion: reduce)")),Z.matches)}};class j{static testProp(e){if(!j.docStyle)return e[0];for(let a=0;a<e.length;a++)if(e[a]in j.docStyle)return e[a];return e[0]}static create(e,a,d){const p=window.document.createElement(e);return a!==void 0&&(p.className=a),d&&d.appendChild(p),p}static createNS(e,a){return window.document.createElementNS(e,a)}static disableDrag(){j.docStyle&&j.selectProp&&(j.userSelect=j.docStyle[j.selectProp],j.docStyle[j.selectProp]="none")}static enableDrag(){j.docStyle&&j.selectProp&&(j.docStyle[j.selectProp]=j.userSelect)}static setTransform(e,a){e.style[j.transformProp]=a}static addEventListener(e,a,d,p={}){e.addEventListener(a,d,"passive"in p?p:p.capture)}static removeEventListener(e,a,d,p={}){e.removeEventListener(a,d,"passive"in p?p:p.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",j.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",j.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",j.suppressClickInternal,!0)},0)}static getScale(e){const a=e.getBoundingClientRect();return{x:a.width/e.offsetWidth||1,y:a.height/e.offsetHeight||1,boundingClientRect:a}}static getPoint(e,a,d){const p=a.boundingClientRect;return new c.P((d.clientX-p.left)/a.x-e.clientLeft,(d.clientY-p.top)/a.y-e.clientTop)}static mousePos(e,a){const d=j.getScale(e);return j.getPoint(e,d,a)}static touchPos(e,a){const d=[],p=j.getScale(e);for(let _=0;_<a.length;_++)d.push(j.getPoint(e,p,a[_]));return d}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}j.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,j.selectProp=j.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),j.transformProp=j.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(v){!oe&&J&&(re?pe(v):se=v)}};let se,J,oe=!1,re=!1;function pe(v){const e=v.createTexture();v.bindTexture(v.TEXTURE_2D,e);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,J),v.isContextLost())return;G.supported=!0}catch{}v.deleteTexture(e),oe=!0}var ge;typeof document<"u"&&(J=document.createElement("img"),J.onload=()=>{se&&pe(se),se=null,re=!0},J.onerror=()=>{oe=!0,se=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let e,a,d,p;v.resetRequestQueue=()=>{e=[],a=0,d=0,p={}},v.addThrottleControl=A=>{const F=d++;return p[F]=A,F},v.removeThrottleControl=A=>{delete p[A],E()},v.getImage=(A,F,H=!0)=>new Promise(($,ne)=>{G.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),c.e(A,{type:"image"}),e.push({abortController:F,requestParameters:A,supportImageRefresh:H,state:"queued",onError:de=>{ne(de)},onSuccess:de=>{$(de)}}),E()});const _=A=>c._(this,void 0,void 0,function*(){A.state="running";const{requestParameters:F,supportImageRefresh:H,onError:$,onSuccess:ne,abortController:de}=A,me=H===!1&&!c.i(self)&&!c.g(F.url)&&(!F.headers||Object.keys(F.headers).reduce((De,Be)=>De&&Be==="accept",!0));a++;const be=me?P(F,de):c.m(F,de);try{const De=yield be;delete A.abortController,A.state="completed",De.data instanceof HTMLImageElement||c.b(De.data)?ne(De):De.data&&ne({data:yield(Ie=De.data,typeof createImageBitmap=="function"?c.d(Ie):c.f(Ie)),cacheControl:De.cacheControl,expires:De.expires})}catch(De){delete A.abortController,$(De)}finally{a--,E()}var Ie}),E=()=>{const A=(()=>{for(const F of Object.keys(p))if(p[F]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=a;F<A&&e.length>0;F++){const H=e.shift();H.abortController.signal.aborted?F--:_(H)}},P=(A,F)=>new Promise((H,$)=>{const ne=new Image,de=A.url,me=A.credentials;me&&me==="include"?ne.crossOrigin="use-credentials":(me&&me==="same-origin"||!c.s(de))&&(ne.crossOrigin="anonymous"),F.signal.addEventListener("abort",()=>{ne.src="",$(c.c())}),ne.fetchPriority="high",ne.onload=()=>{ne.onerror=ne.onload=null,H({data:ne})},ne.onerror=()=>{ne.onerror=ne.onload=null,F.signal.aborted||$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ne.src=de})}(ge||(ge={})),ge.resetRequestQueue();class Oe{constructor(e){this._transformRequestFn=e}transformRequest(e,a){return this._transformRequestFn&&this._transformRequestFn(e,a)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ve(v){var e=new c.A(3);return e[0]=v[0],e[1]=v[1],e[2]=v[2],e}var Ge,je=function(v,e,a){return v[0]=e[0]-a[0],v[1]=e[1]-a[1],v[2]=e[2]-a[2],v};Ge=new c.A(3),c.A!=Float32Array&&(Ge[0]=0,Ge[1]=0,Ge[2]=0);var St=function(v){var e=v[0],a=v[1];return e*e+a*a};function at(v){const e=[];if(typeof v=="string")e.push({id:"default",url:v});else if(v&&v.length>0){const a=[];for(const{id:d,url:p}of v){const _=`${d}${p}`;a.indexOf(_)===-1&&(a.push(_),e.push({id:d,url:p}))}}return e}function Mt(v,e,a){const d=v.split("?");return d[0]+=`${e}${a}`,d.join("?")}(function(){var v=new c.A(2);c.A!=Float32Array&&(v[0]=0,v[1]=0)})();class xt{constructor(e,a,d,p){this.context=e,this.format=d,this.texture=e.gl.createTexture(),this.update(a,p)}update(e,a,d){const{width:p,height:_}=e,E=!(this.size&&this.size[0]===p&&this.size[1]===_||d),{context:P}=this,{gl:A}=P;if(this.useMipmap=!!(a&&a.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!a||a.premultiply!==!1)),E)this.size=[p,_],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||c.b(e)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,e):A.texImage2D(A.TEXTURE_2D,0,this.format,p,_,0,this.format,A.UNSIGNED_BYTE,e.data);else{const{x:F,y:H}=d||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||c.b(e)?A.texSubImage2D(A.TEXTURE_2D,0,F,H,A.RGBA,A.UNSIGNED_BYTE,e):A.texSubImage2D(A.TEXTURE_2D,0,F,H,p,_,A.RGBA,A.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(e,a,d){const{context:p}=this,{gl:_}=p;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),e!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,e),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||e),this.filter=e),a!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function xe(v){const{userImage:e}=v;return!!(e&&e.render&&e.render())&&(v.data.replace(new Uint8Array(e.data.buffer)),!0)}class Je extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:a,promiseResolve:d}of this.requestors)d(this._getImagesForIds(a));this.requestors=[]}}getImage(e){const a=this.images[e];if(a&&!a.data&&a.spriteData){const d=a.spriteData;a.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),a.spriteData=null}return a}addImage(e,a){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,a)&&(this.images[e]=a)}_validate(e,a){let d=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new c.j(new Error(`Image "${e}" has invalid "stretchX" value`))),d=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new c.j(new Error(`Image "${e}" has invalid "stretchY" value`))),d=!1),this._validateContent(a.content,a)||(this.fire(new c.j(new Error(`Image "${e}" has invalid "content" value`))),d=!1),d}_validateStretch(e,a){if(!e)return!0;let d=0;for(const p of e){if(p[0]<d||p[1]<p[0]||a<p[1])return!1;d=p[1]}return!0}_validateContent(e,a){if(!e)return!0;if(e.length!==4)return!1;const d=a.spriteData,p=d&&d.width||a.data.width,_=d&&d.height||a.data.height;return!(e[0]<0||p<e[0]||e[1]<0||_<e[1]||e[2]<0||p<e[2]||e[3]<0||_<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,a,d=!0){const p=this.getImage(e);if(d&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[e]=a,this.updatedImages[e]=!0}removeImage(e){const a=this.images[e];delete this.images[e],delete this.patterns[e],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((a,d)=>{let p=!0;if(!this.isLoaded())for(const _ of e)this.images[_]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:a})})}_getImagesForIds(e){const a={};for(const d of e){let p=this.getImage(d);p||(this.fire(new c.k("styleimagemissing",{id:d})),p=this.getImage(d)),p?a[d]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:e,height:a}=this.atlasImage;return{width:e,height:a}}getPattern(e){const a=this.patterns[e],d=this.getImage(e);if(!d)return null;if(a&&a.position.version===d.version)return a.position;if(a)a.position.version=d.version;else{const p={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new c.I(p,d);this.patterns[e]={bin:p,position:_}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const a=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new xt(e,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const _ in this.patterns)e.push(this.patterns[_].bin);const{w:a,h:d}=c.p(e),p=this.atlasImage;p.resize({width:a||1,height:d||1});for(const _ in this.patterns){const{bin:E}=this.patterns[_],P=E.x+1,A=E.y+1,F=this.getImage(_).data,H=F.width,$=F.height;c.R.copy(F,p,{x:0,y:0},{x:P,y:A},{width:H,height:$}),c.R.copy(F,p,{x:0,y:$-1},{x:P,y:A-1},{width:H,height:1}),c.R.copy(F,p,{x:0,y:0},{x:P,y:A+$},{width:H,height:1}),c.R.copy(F,p,{x:H-1,y:0},{x:P-1,y:A},{width:1,height:$}),c.R.copy(F,p,{x:0,y:0},{x:P+H,y:A},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const a of e){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const d=this.getImage(a);d||c.w(`Image with ID: "${a}" was not found`),xe(d)&&this.updateImage(a,d)}}}const W=1e20;function Ve(v,e,a,d,p,_,E,P,A){for(let F=e;F<e+d;F++)zt(v,a*_+F,_,p,E,P,A);for(let F=a;F<a+p;F++)zt(v,F*_+e,1,d,E,P,A)}function zt(v,e,a,d,p,_,E){_[0]=0,E[0]=-1e20,E[1]=W,p[0]=v[e];for(let P=1,A=0,F=0;P<d;P++){p[P]=v[e+P*a];const H=P*P;do{const $=_[A];F=(p[P]-p[$]+H-$*$)/(P-$)/2}while(F<=E[A]&&--A>-1);A++,_[A]=P,E[A]=F,E[A+1]=W}for(let P=0,A=0;P<d;P++){for(;E[A+1]<P;)A++;const F=_[A],H=P-F;v[e+P*a]=p[F]+H*H}}class Me{constructor(e,a){this.requestManager=e,this.localIdeographFontFamily=a,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return c._(this,void 0,void 0,function*(){const a=[];for(const _ in e)for(const E of e[_])a.push(this._getAndCacheGlyphsPromise(_,E));const d=yield Promise.all(a),p={};for(const{stack:_,id:E,glyph:P}of d)p[_]||(p[_]={}),p[_][E]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return p})}_getAndCacheGlyphsPromise(e,a){return c._(this,void 0,void 0,function*(){let d=this.entries[e];d||(d=this.entries[e]={glyphs:{},requests:{},ranges:{}});let p=d.glyphs[a];if(p!==void 0)return{stack:e,id:a,glyph:p};if(p=this._tinySDF(d,e,a),p)return d.glyphs[a]=p,{stack:e,id:a,glyph:p};const _=Math.floor(a/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[_])return{stack:e,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[_]){const P=Me.loadGlyphRange(e,_,this.url,this.requestManager);d.requests[_]=P}const E=yield d.requests[_];for(const P in E)this._doesCharSupportLocalGlyph(+P)||(d.glyphs[+P]=E[+P]);return d.ranges[_]=!0,{stack:e,id:a,glyph:E[a]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,a,d){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let _=e.tinySDF;if(!_){let P="400";/bold/i.test(a)?P="900":/medium/i.test(a)?P="500":/light/i.test(a)&&(P="200"),_=e.tinySDF=new Me.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:P})}const E=_.draw(String.fromCharCode(d));return{id:d,bitmap:new c.o({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}Me.loadGlyphRange=function(v,e,a,d){return c._(this,void 0,void 0,function*(){const p=256*e,_=p+255,E=d.transformRequest(a.replace("{fontstack}",v).replace("{range}",`${p}-${_}`),"Glyphs"),P=yield c.l(E,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${e}, ${p}-${_}`);const A={};for(const F of c.n(P.data))A[F.id]=F;return A})},Me.TinySDF=class{constructor({fontSize:v=24,buffer:e=3,radius:a=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:_="normal",fontStyle:E="normal"}={}){this.buffer=e,this.cutoff=d,this.radius=a;const P=this.size=v+4*e,A=this._createCanvas(P),F=this.ctx=A.getContext("2d",{willReadFrequently:!0});F.font=`${E} ${_} ${v}px ${p}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(v){const e=document.createElement("canvas");return e.width=e.height=v,e}draw(v){const{width:e,actualBoundingBoxAscent:a,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:_}=this.ctx.measureText(v),E=Math.ceil(a),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-p))),A=Math.min(this.size-this.buffer,E+Math.ceil(d)),F=P+2*this.buffer,H=A+2*this.buffer,$=Math.max(F*H,0),ne=new Uint8ClampedArray($),de={data:ne,width:F,height:H,glyphWidth:P,glyphHeight:A,glyphTop:E,glyphLeft:0,glyphAdvance:e};if(P===0||A===0)return de;const{ctx:me,buffer:be,gridInner:Ie,gridOuter:De}=this;me.clearRect(be,be,P,A),me.fillText(v,be,be+E);const Be=me.getImageData(be,be,P,A);De.fill(W,0,$),Ie.fill(0,0,$);for(let Ee=0;Ee<A;Ee++)for(let We=0;We<P;We++){const Ye=Be.data[4*(Ee*P+We)+3]/255;if(Ye===0)continue;const it=(Ee+be)*F+We+be;if(Ye===1)De[it]=0,Ie[it]=W;else{const Et=.5-Ye;De[it]=Et>0?Et*Et:0,Ie[it]=Et<0?Et*Et:0}}Ve(De,0,0,F,H,F,this.f,this.v,this.z),Ve(Ie,be,be,P,A,F,this.f,this.v,this.z);for(let Ee=0;Ee<$;Ee++){const We=Math.sqrt(De[Ee])-Math.sqrt(Ie[Ee]);ne[Ee]=Math.round(255-255*(We/this.radius+this.cutoff))}return de}};class et{constructor(){this.specification=c.v.light.position}possiblyEvaluate(e,a){return c.x(e.expression.evaluate(a))}interpolate(e,a,d){return{x:c.y.number(e.x,a.x,d),y:c.y.number(e.y,a.y,d),z:c.y.number(e.z,a.z,d)}}}let Ze;class ht extends c.E{constructor(e){super(),Ze=Ze||new c.q({anchor:new c.D(c.v.light.anchor),position:new et,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Ze),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,a={}){if(!this._validate(c.r,e,a))for(const d in e){const p=e[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,d){return(!d||d.validate!==!1)&&c.t(this,e.call(c.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const ae=new c.q({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class _e extends c.E{constructor(e){super(),this._transitionable=new c.T(ae),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.z(0))}setSky(e,a={}){if(!this._validate(c.B,e,a)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in e){const p=e[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,d={}){return(d==null?void 0:d.validate)!==!1&&c.t(this,e.call(c.u,c.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Ct{constructor(e,a){this.width=e,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,a){const d=e.join(",")+String(a);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(e,a)),this.dashEntry[d]}getDashRanges(e,a,d){const p=[];let _=e.length%2==1?-e[e.length-1]*d:0,E=e[0]*d,P=!0;p.push({left:_,right:E,isDash:P,zeroLength:e[0]===0});let A=e[0];for(let F=1;F<e.length;F++){P=!P;const H=e[F];_=A*d,A+=H,E=A*d,p.push({left:_,right:E,isDash:P,zeroLength:H===0})}return p}addRoundDash(e,a,d){const p=a/2;for(let _=-d;_<=d;_++){const E=this.width*(this.nextRow+d+_);let P=0,A=e[P];for(let F=0;F<this.width;F++){F/A.right>1&&(A=e[++P]);const H=Math.abs(F-A.left),$=Math.abs(F-A.right),ne=Math.min(H,$);let de;const me=_/d*(p+1);if(A.isDash){const be=p-Math.abs(me);de=Math.sqrt(ne*ne+be*be)}else de=p-Math.sqrt(ne*ne+me*me);this.data[E+F]=Math.max(0,Math.min(255,de+128))}}}addRegularDash(e){for(let P=e.length-1;P>=0;--P){const A=e[P],F=e[P+1];A.zeroLength?e.splice(P,1):F&&F.isDash===A.isDash&&(F.left=A.left,e.splice(P,1))}const a=e[0],d=e[e.length-1];a.isDash===d.isDash&&(a.left=d.left-this.width,d.right=a.right+this.width);const p=this.width*this.nextRow;let _=0,E=e[_];for(let P=0;P<this.width;P++){P/E.right>1&&(E=e[++_]);const A=Math.abs(P-E.left),F=Math.abs(P-E.right),H=Math.min(A,F);this.data[p+P]=Math.max(0,Math.min(255,(E.isDash?H:-H)+128))}}addDash(e,a){const d=a?7:0,p=2*d+1;if(this.nextRow+p>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let P=0;P<e.length;P++)_+=e[P];if(_!==0){const P=this.width/_,A=this.getDashRanges(e,this.width,P);a?this.addRoundDash(A,P,d):this.addRegularDash(A)}const E={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=p,this.dirty=!0,E}bind(e){const a=e.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const bt="maplibre_preloaded_worker_pool";class wt{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<wt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bt]}numActive(){return Object.keys(this.active).length}}const lr=Math.floor(U.hardwareConcurrency/2);let pr,Gt;function Kt(){return pr||(pr=new wt),pr}wt.workerCount=c.C(globalThis)?Math.max(Math.min(lr,3),1):1;class Mr{constructor(e,a){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=a;const d=this.workerPool.acquire(a);for(let p=0;p<d.length;p++){const _=new c.F(d[p],a);_.name=`Worker ${p}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,a){const d=[];for(const p of this.actors)d.push(p.sendAsync({type:e,data:a}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,a){for(const d of this.actors)d.registerMessageHandler(e,a)}}function Vr(){return Gt||(Gt=new Mr(Kt(),c.G),Gt.registerMessageHandler("GR",(v,e,a)=>c.m(e,a))),Gt}function tn(v,e){const a=c.H();return c.J(a,a,[1,1,0]),c.K(a,a,[.5*v.width,.5*v.height,1]),c.L(a,a,v.calculatePosMatrix(e.toUnwrapped()))}function Kr(v,e,a,d,p,_){const E=function($,ne,de){if($)for(const me of $){const be=ne[me];if(be&&be.source===de&&be.type==="fill-extrusion")return!0}else for(const me in ne){const be=ne[me];if(be.source===de&&be.type==="fill-extrusion")return!0}return!1}(p&&p.layers,e,v.id),P=_.maxPitchScaleFactor(),A=v.tilesIn(d,P,E);A.sort(Y);const F=[];for(const $ of A)F.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(e,a,v._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,p,_,P,tn(v.transform,$.tileID))});const H=function($){const ne={},de={};for(const me of $){const be=me.queryResults,Ie=me.wrappedTileID,De=de[Ie]=de[Ie]||{};for(const Be in be){const Ee=be[Be],We=De[Be]=De[Be]||{},Ye=ne[Be]=ne[Be]||[];for(const it of Ee)We[it.featureIndex]||(We[it.featureIndex]=!0,Ye.push(it))}}return ne}(F);for(const $ in H)H[$].forEach(ne=>{const de=ne.feature,me=v.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=me});return H}function Y(v,e){const a=v.tileID,d=e.tileID;return a.overscaledZ-d.overscaledZ||a.canonical.y-d.canonical.y||a.wrap-d.wrap||a.canonical.x-d.canonical.x}function ft(v,e,a){return c._(this,void 0,void 0,function*(){let d=v;if(v.url?d=(yield c.h(e.transformRequest(v.url,"Source"),a)).data:yield U.frameAsync(a),!d)return null;const p=c.M(c.e(d,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(p.vectorLayerIds=d.vector_layers.map(_=>_.id)),p})}class ye{constructor(e,a){e&&(a?this.setSouthWest(e).setNorthEast(a):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof c.N?new c.N(e.lng,e.lat):c.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof c.N?new c.N(e.lng,e.lat):c.N.convert(e),this}extend(e){const a=this._sw,d=this._ne;let p,_;if(e instanceof c.N)p=e,_=e;else{if(!(e instanceof ye))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(ye.convert(e)):this.extend(c.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(c.N.convert(e)):this;if(p=e._sw,_=e._ne,!p||!_)return this}return a||d?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new c.N(p.lng,p.lat),this._ne=new c.N(_.lng,_.lat)),this}getCenter(){return new c.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.N(this.getWest(),this.getNorth())}getSouthEast(){return new c.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:a,lat:d}=c.N.convert(e);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(e){return e instanceof ye?e:e&&new ye(e)}static fromLngLat(e,a=0){const d=360*a/40075017,p=d/Math.cos(Math.PI/180*e.lat);return new ye(new c.N(e.lng-p,e.lat-d),new c.N(e.lng+p,e.lat+d))}adjustAntiMeridian(){const e=new c.N(this._sw.lng,this._sw.lat),a=new c.N(this._ne.lng,this._ne.lat);return new ye(e,e.lng>a.lng?new c.N(a.lng+360,a.lat):a)}}class Ae{constructor(e,a,d){this.bounds=ye.convert(this.validateBounds(e)),this.minzoom=a||0,this.maxzoom=d||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const a=Math.pow(2,e.z),d=Math.floor(c.O(this.bounds.getWest())*a),p=Math.floor(c.Q(this.bounds.getNorth())*a),_=Math.ceil(c.O(this.bounds.getEast())*a),E=Math.ceil(c.Q(this.bounds.getSouth())*a);return e.x>=d&&e.x<_&&e.y>=p&&e.y<E}}class we extends c.E{constructor(e,a,d,p){if(super(),this.id=e,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.M(a,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(c.e(this,e),e.bounds&&(this.tileBounds=new Ae(e.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new c.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(a,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((_,E)=>{e.reloadPromise={resolve:_,reject:E}})}else e.actor=this.dispatcher.getActor(),p="LT";e.abortController=new AbortController;try{const _=yield e.actor.sendAsync({type:p,data:d},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,_)}catch(_){if(delete e.abortController,e.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,a){if(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),e.reloadPromise){const d=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(d.resolve).catch(d.reject)}}abortTile(e){return c._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return c._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ne extends c.E{constructor(e,a,d,p){super(),this.id=e,this.dispatcher=d,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},a),c.e(this,c.M(a,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(c.e(this,e),e.bounds&&(this.tileBounds=new Ae(e.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new c.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return c.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const d=yield ge.getImage(this.map._requestManager.transformRequest(a,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const p=this.map.painter.context,_=p.gl,E=d.data;e.texture=this.map.painter.getTileTexture(E.width),e.texture?e.texture.update(E,{useMipmap:!0}):(e.texture=new xt(p,E,_.RGBA,{useMipmap:!0}),e.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}abortTile(e){return c._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return c._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class _t extends Ne{constructor(e,a,d,p){super(e,a,d,p),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(a,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const p=yield ge.getImage(d,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(p&&p.data){const _=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&e.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const E=c.b(_)&&c.U()?_:yield this.readImageNow(_),P={type:this.type,uid:e.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const A=yield e.actor.sendAsync({type:"LDT",data:P});e.dem=A,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(p){if(delete e.abortController,e.aborted)e.state="unloaded";else if(p)throw e.state="errored",p}})}readImageNow(e){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.V()){const a=e.width+2,d=e.height+2;try{return new c.R({width:a,height:d},yield c.W(e,-1,-1,a,d))}catch{}}return U.getImageData(e,1)})}_getNeighboringTiles(e){const a=e.canonical,d=Math.pow(2,a.z),p=(a.x-1+d)%d,_=a.x===0?e.wrap-1:e.wrap,E=(a.x+1+d)%d,P=a.x+1===d?e.wrap+1:e.wrap,A={};return A[new c.S(e.overscaledZ,_,a.z,p,a.y).key]={backfilled:!1},A[new c.S(e.overscaledZ,P,a.z,E,a.y).key]={backfilled:!1},a.y>0&&(A[new c.S(e.overscaledZ,_,a.z,p,a.y-1).key]={backfilled:!1},A[new c.S(e.overscaledZ,e.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},A[new c.S(e.overscaledZ,P,a.z,E,a.y-1).key]={backfilled:!1}),a.y+1<d&&(A[new c.S(e.overscaledZ,_,a.z,p,a.y+1).key]={backfilled:!1},A[new c.S(e.overscaledZ,e.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},A[new c.S(e.overscaledZ,P,a.z,E,a.y+1).key]={backfilled:!1}),A}unloadTile(e){return c._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class At extends c.E{constructor(e,a,d,p){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(p),this._data=a.data,this._options=c.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const _=c.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*_,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*_,extent:c.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:c.X,radius:(a.clusterRadius||50)*_,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return c._(this,void 0,void 0,function*(){const e=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,a,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:a,offset:d}})}_updateWorkerData(e){return c._(this,void 0,void 0,function*(){const a=c.e({type:this.type},this.workerOptions);e?a.dataDiff=e:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(U.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let p=null;d.resourceTiming&&d.resourceTiming[this.id]&&(p=d.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&c.e(_,{resourceTiming:p}),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.actor?"RT":"LT";e.actor=this.actor;const d={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:d},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(e){return c._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return c._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var nt=c.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Dt extends c.E{constructor(e,a,d,p){super(),this.id=e,this.dispatcher=d,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(e){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield ge.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,e&&(this.coordinates=e),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new c.j(a))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const a=e.map(c.Z.fromLngLat);this.tileID=function(p){let _=1/0,E=1/0,P=-1/0,A=-1/0;for(const ne of p)_=Math.min(_,ne.x),E=Math.min(E,ne.y),P=Math.max(P,ne.x),A=Math.max(A,ne.y);const F=Math.max(P-_,A-E),H=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),$=Math.pow(2,H);return new c.a1(H,Math.floor((_+P)/2*$),Math.floor((E+A)/2*$))}(a),this.minzoom=this.maxzoom=this.tileID.z;const d=a.map(p=>this.tileID.getTilePoint(p)._round());return this._boundsArray=new c.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,c.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,c.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,c.X,c.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,a=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new xt(e,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class nr extends Dt{constructor(e,a,d,p){super(e,a,d,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const a of e.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield c.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new c.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const a=this.video.seekable;e<a.start(0)||e>a.end(0)?this.fire(new c.j(new c.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,a=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new xt(e,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Lt extends Dt{constructor(e,a,d,p){super(e,a,d,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(E=>typeof E!="number"))||this.fire(new c.j(new c.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a2(`sources.${e}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new c.j(new c.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new xt(a,this.canvas,d.RGBA,{premultiply:!0});let p=!1;for(const _ in this.tiles){const E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,p=!0)}p&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const xr={},sn=v=>{switch(v){case"geojson":return At;case"image":return Dt;case"raster":return Ne;case"raster-dem":return _t;case"vector":return we;case"video":return nr;case"canvas":return Lt}return xr[v]},vt="RTLPluginLoaded";class Cn extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Vr()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return c._(this,arguments,void 0,function*(a,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=U.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(vt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Sn=null;function In(){return Sn||(Sn=new Cn),Sn}class wi{constructor(e,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=c.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const a=e+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(p,_){const E={};if(!_)return E;for(const P of p){const A=P.layerIds.map(F=>_.getLayer(F)).filter(Boolean);if(A.length!==0){P.layers=A,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(F=>A.filter(H=>H.id===F)[0]));for(const F of A)E[F.id]=P}}return E}(e.buckets,a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof c.a6){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof c.a6&&_.hasRTLText){this.hasRTLText=!0,In().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const _=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(_))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new c.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(e)}const a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xt(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xt(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,a,d,p,_,E,P,A,F,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:_,scale:E,tileSize:this.tileSize,pixelPosMatrix:H,transform:A,params:P,queryPadding:this.queryPadding*F},e,a,d):{}}querySourceFeatures(e,a){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),_=a&&a.sourceLayer?a.sourceLayer:"",E=p._geojsonTileLayer||p[_];if(!E)return;const P=c.a7(a&&a.filter),{z:A,x:F,y:H}=this.tileID.canonical,$={z:A,x:F,y:H};for(let ne=0;ne<E.length;ne++){const de=E.feature(ne);if(P.needGeometry){const Ie=c.a8(de,!0);if(!P.filter(new c.z(this.tileID.overscaledZ),Ie,this.tileID.canonical))continue}else if(!P.filter(new c.z(this.tileID.overscaledZ),de))continue;const me=d.getId(de,_),be=new c.a9(de,A,F,H,me);be.tile=$,e.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const a=this.expirationTime;if(e.cacheControl){const d=c.aa(e.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const _=this.expirationTime-a;_?this.expirationTime=d+Math.max(_,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const _=this.buckets[p],E=_.layers[0].sourceLayer||"_geojsonTileLayer",P=d[E],A=e[E];if(!P||!A||Object.keys(A).length===0)continue;_.update(A,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const F=a&&a.style&&a.style.getLayer(p);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=U.now()+e}setDependencies(e,a){const d={};for(const p of a)d[p]=!0;this.dependencies[e]=d}hasDependency(e,a){for(const d of e){const p=this.dependencies[d];if(p){for(const _ of a)if(p[_])return!0}}return!1}}class Pt{constructor(e,a){this.max=e,this.onRemove=a,this.reset()}reset(){for(const e in this.data)for(const a of this.data[e])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(e,a,d){const p=e.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const _={value:a,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(e,_)},d)),this.data[p].push(_),this.order.push(p),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const a=this.data[e].shift();return a.timeout&&clearTimeout(a.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),a.value}getByKey(e){const a=this.data[e];return a?a[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,a){if(!this.has(e))return this;const d=e.wrapped().key,p=a===void 0?0:this.data[d].indexOf(a),_=this.data[d][p];return this.data[d].splice(p,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(e){const a=[];for(const d in this.data)for(const p of this.data[d])e(p.value)||a.push(p);for(const d of a)this.remove(d.value.tileID,d)}}class Lr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,a,d){const p=String(a);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][p]=this.stateChanges[e][p]||{},c.e(this.stateChanges[e][p],d),this.deletedStates[e]===null){this.deletedStates[e]={};for(const _ in this.state[e])_!==p&&(this.deletedStates[e][_]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][p]===null){this.deletedStates[e][p]={};for(const _ in this.state[e][p])d[_]||(this.deletedStates[e][p][_]=null)}else for(const _ in d)this.deletedStates[e]&&this.deletedStates[e][p]&&this.deletedStates[e][p][_]===null&&delete this.deletedStates[e][p][_]}removeFeatureState(e,a,d){if(this.deletedStates[e]===null)return;const p=String(a);if(this.deletedStates[e]=this.deletedStates[e]||{},d&&a!==void 0)this.deletedStates[e][p]!==null&&(this.deletedStates[e][p]=this.deletedStates[e][p]||{},this.deletedStates[e][p][d]=null);else if(a!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][p])for(d in this.deletedStates[e][p]={},this.stateChanges[e][p])this.deletedStates[e][p][d]=null;else this.deletedStates[e][p]=null;else this.deletedStates[e]=null}getState(e,a){const d=String(a),p=c.e({},(this.state[e]||{})[d],(this.stateChanges[e]||{})[d]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const _=this.deletedStates[e][a];if(_===null)return{};for(const E in _)delete p[E]}return p}initializeTileState(e,a){e.setFeatureState(this.state,a)}coalesceChanges(e,a){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const _={};for(const E in this.stateChanges[p])this.state[p][E]||(this.state[p][E]={}),c.e(this.state[p][E],this.stateChanges[p][E]),_[E]=this.state[p][E];d[p]=_}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const _={};if(this.deletedStates[p]===null)for(const E in this.state[p])_[E]={},this.state[p][E]={};else for(const E in this.deletedStates[p]){if(this.deletedStates[p][E]===null)this.state[p][E]={};else for(const P of Object.keys(this.deletedStates[p][E]))delete this.state[p][E][P];_[E]=this.state[p][E]}d[p]=d[p]||{},c.e(d[p],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in e)e[p].setFeatureState(d,a)}}class kr extends c.E{constructor(e,a,d){super(),this.id=e,this.dispatcher=d,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,_,E,P)=>{const A=new(sn(_.type))(p,_,E,P);if(A.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${A.id}`);return A})(e,a,d,this),this._tiles={},this._cache=new Pt(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Lr,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const a=this._tiles[e];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,a,d){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,a,d)}catch(p){e.state="errored",p.status!==404?this._source.fire(new c.j(p,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new c.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const d=this._tiles[a];d.upload(e),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(kn).map(e=>e.key)}getRenderableIds(e){const a=[];for(const d in this._tiles)this._isIdRenderable(d,e)&&a.push(this._tiles[d]);return e?a.sort((d,p)=>{const _=d.tileID,E=p.tileID,P=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),A=new c.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-E.overscaledZ||A.y-P.y||A.x-P.x}).map(d=>d.tileID.key):a.map(d=>d.tileID).sort(kn).map(d=>d.key)}hasRenderableParent(e){const a=this.findLoadedParent(e,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(e,a){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(a||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,a){return c._(this,void 0,void 0,function*(){const d=this._tiles[e];d&&(d.state!=="loading"&&(d.state=a),yield this._loadTile(d,e,a))})}_tileLoaded(e,a,d){e.timeAdded=U.now(),d==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(a,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const _=a[p];if(e.neighboringTiles&&e.neighboringTiles[_]){const E=this.getTileByID(_);d(e,E),d(E,e)}}function d(p,_){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let E=_.tileID.canonical.x-p.tileID.canonical.x;const P=_.tileID.canonical.y-p.tileID.canonical.y,A=Math.pow(2,p.tileID.canonical.z),F=_.tileID.key;E===0&&P===0||Math.abs(P)>1||(Math.abs(E)>1&&(Math.abs(E+A)===1?E+=A:Math.abs(E-A)===1&&(E-=A)),_.dem&&p.dem&&(p.dem.backfillBorder(_.dem,E,P),p.neighboringTiles&&p.neighboringTiles[F]&&(p.neighboringTiles[F].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,a,d,p){for(const _ in this._tiles){let E=this._tiles[_];if(p[_]||!E.hasData()||E.tileID.overscaledZ<=a||E.tileID.overscaledZ>d)continue;let P=E.tileID;for(;E&&E.tileID.overscaledZ>a+1;){const F=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[F.key],E&&E.hasData()&&(P=F)}let A=P;for(;A.overscaledZ>a;)if(A=A.scaledTo(A.overscaledZ-1),e[A.key]){p[P.key]=P;break}}}findLoadedParent(e,a){if(e.key in this._loadedParentTiles){const d=this._loadedParentTiles[e.key];return d&&d.tileID.overscaledZ>=a?d:null}for(let d=e.overscaledZ-1;d>=a;d--){const p=e.scaledTo(d),_=this._getLoadedTile(p);if(_)return _}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const a=this._tiles[e.key];return a&&a.hasData()?a:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const a=Math.ceil(e.width/this._source.tileSize)+1,d=Math.ceil(e.height/this._source.tileSize)+1,p=Math.floor(a*d*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(_)}handleWrapJump(e){const a=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,a){const d={};for(const p in this._tiles){const _=this._tiles[p];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+a),d[_.tileID.key]=_}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(e,a,d,p,_,E){const P={},A={},F=Object.keys(e),H=U.now();for(const $ of F){const ne=e[$],de=this._tiles[$];if(!de||de.fadeEndTime!==0&&de.fadeEndTime<=H)continue;const me=this.findLoadedParent(ne,a),be=this.findLoadedSibling(ne),Ie=me||be||null;Ie&&(this._addTile(Ie.tileID),P[Ie.tileID.key]=Ie.tileID),A[$]=ne}this._retainLoadedChildren(A,p,d,e);for(const $ in P)e[$]||(this._coveredTiles[$]=!0,e[$]=P[$]);if(E){const $={},ne={};for(const de of _)this._tiles[de.key].hasData()?$[de.key]=de:ne[de.key]=de;for(const de in ne){const me=ne[de].children(this._source.maxzoom);this._tiles[me[0].key]&&this._tiles[me[1].key]&&this._tiles[me[2].key]&&this._tiles[me[3].key]&&($[me[0].key]=e[me[0].key]=me[0],$[me[1].key]=e[me[1].key]=me[1],$[me[2].key]=e[me[2].key]=me[2],$[me[3].key]=e[me[3].key]=me[3],delete ne[de])}for(const de in ne){const me=ne[de],be=this.findLoadedParent(me,this._source.minzoom),Ie=this.findLoadedSibling(me),De=be||Ie||null;if(De){$[De.tileID.key]=e[De.tileID.key]=De.tileID;for(const Be in $)$[Be].isChildOf(De.tileID)&&delete $[Be]}}for(const de in this._tiles)$[de]||(this._coveredTiles[de]=!0)}}update(e,a){if(!this._sourceLoaded||this._paused)return;let d;this.transform=e,this.terrain=a,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new c.S(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(d=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(d=d.filter(H=>this._source.hasTile(H)))):d=[];const p=e.coveringZoomLevel(this._source),_=Math.max(p-kr.maxOverzooming,this._source.minzoom),E=Math.max(p+kr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const H={};for(const $ of d)if($.canonical.z>this._source.minzoom){const ne=$.scaledTo($.canonical.z-1);H[ne.key]=ne;const de=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));H[de.key]=de}d=d.concat(Object.values(H))}const P=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(d,p);bi(this._source.type)&&this._updateCoveredAndRetainedTiles(A,_,E,p,d,a);for(const H in A)this._tiles[H].clearFadeHold();const F=c.ab(this._tiles,A);for(const H of F){const $=this._tiles[H];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,a){var d;const p={},_={},E=Math.max(a-kr.maxOverzooming,this._source.minzoom),P=Math.max(a+kr.maxUnderzooming,this._source.minzoom),A={};for(const F of e){const H=this._addTile(F);p[F.key]=F,H.hasData()||a<this._source.maxzoom&&(A[F.key]=F)}this._retainLoadedChildren(A,a,P,p);for(const F of e){let H=this._tiles[F.key];if(H.hasData())continue;if(a+1>this._source.maxzoom){const ne=F.children(this._source.maxzoom)[0],de=this.getTile(ne);if(de&&de.hasData()){p[ne.key]=ne;continue}}else{const ne=F.children(this._source.maxzoom);if(p[ne[0].key]&&p[ne[1].key]&&p[ne[2].key]&&p[ne[3].key])continue}let $=H.wasRequested();for(let ne=F.overscaledZ-1;ne>=E;--ne){const de=F.scaledTo(ne);if(_[de.key])break;if(_[de.key]=!0,H=this.getTile(de),!H&&$&&(H=this._addTile(de)),H){const me=H.hasData();if((me||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||$)&&(p[de.key]=de),$=H.wasRequested(),me)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const a=[];let d,p=this._tiles[e].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}a.push(p.key);const _=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;p=_}for(const _ of a)this._loadedParentTiles[_]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const a=this._tiles[e].tileID,d=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=d}}_addTile(e){let a=this._tiles[e.key];if(a)return a;a=this._cache.getAndRemove(e),a&&(this._setTileReloadTimer(e.key,a),a.tileID=e,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,a)));const d=a;return a||(a=new wi(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(a,e.key,a.state)),a.uses++,this._tiles[e.key]=a,d||this._source.fire(new c.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(e,a){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const d=a.getExpiryTimeout();d&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},d))}_removeTile(e){const a=this._tiles[e];a&&(a.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(e){const a=e.sourceDataType;e.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,a,d){const p=[],_=this.transform;if(!_)return p;const E=d?_.getCameraQueryGeometry(e):e,P=e.map(me=>_.pointCoordinate(me,this.terrain)),A=E.map(me=>_.pointCoordinate(me,this.terrain)),F=this.getIds();let H=1/0,$=1/0,ne=-1/0,de=-1/0;for(const me of A)H=Math.min(H,me.x),$=Math.min($,me.y),ne=Math.max(ne,me.x),de=Math.max(de,me.y);for(let me=0;me<F.length;me++){const be=this._tiles[F[me]];if(be.holdingForFade())continue;const Ie=be.tileID,De=Math.pow(2,_.zoom-be.tileID.overscaledZ),Be=a*be.queryPadding*c.X/be.tileSize/De,Ee=[Ie.getTilePoint(new c.Z(H,$)),Ie.getTilePoint(new c.Z(ne,de))];if(Ee[0].x-Be<c.X&&Ee[0].y-Be<c.X&&Ee[1].x+Be>=0&&Ee[1].y+Be>=0){const We=P.map(it=>Ie.getTilePoint(it)),Ye=A.map(it=>Ie.getTilePoint(it));p.push({tile:be,tileID:Ie,queryGeometry:We,cameraQueryGeometry:Ye,scale:De})}}return p}getVisibleCoordinates(e){const a=this.getRenderableIds(e).map(d=>this._tiles[d].tileID);for(const d of a)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(bi(this._source.type)){const e=U.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=e)return!0}return!1}setFeatureState(e,a,d){this._state.updateState(e=e||"_geojsonTileLayer",a,d)}removeFeatureState(e,a,d){this._state.removeFeatureState(e=e||"_geojsonTileLayer",a,d)}getFeatureState(e,a){return this._state.getState(e=e||"_geojsonTileLayer",a)}setDependencies(e,a,d){const p=this._tiles[e];p&&p.setDependencies(a,d)}reloadTilesForDependencies(e,a){for(const d in this._tiles)this._tiles[d].hasDependency(e,a)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(e,a))}}function kn(v,e){const a=Math.abs(2*v.wrap)-+(v.wrap<0),d=Math.abs(2*e.wrap)-+(e.wrap<0);return v.overscaledZ-e.overscaledZ||d-a||e.canonical.y-v.canonical.y||e.canonical.x-v.canonical.x}function bi(v){return v==="raster"||v==="image"||v==="video"}kr.maxOverzooming=10,kr.maxUnderzooming=3;class Ar{constructor(e,a){this.reset(e,a)}reset(e,a){this.points=e||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=c.ac(e,0,1);let a=1,d=this._distances[a];const p=e*this.paddedLength+this.padding;for(;d<p&&a<this._distances.length;)d=this._distances[++a];const _=a-1,E=this._distances[_],P=d-E,A=P>0?(p-E)/P:0;return this.points[_].mult(1-A).add(this.points[a].mult(A))}}function Nn(v,e){let a=!0;return v==="always"||v!=="never"&&e!=="never"||(a=!1),a}class Ri{constructor(e,a,d){const p=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(e/d),this.yCellCount=Math.ceil(a/d);for(let E=0;E<this.xCellCount*this.yCellCount;E++)p.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=a,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,a,d,p,_){this._forEachCell(a,d,p,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(_)}insertCircle(e,a,d,p){this._forEachCell(a-p,d-p,a+p,d+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(a),this.circles.push(d),this.circles.push(p)}_insertBoxCell(e,a,d,p,_,E){this.boxCells[_].push(E)}_insertCircleCell(e,a,d,p,_,E){this.circleCells[_].push(E)}_query(e,a,d,p,_,E,P){if(d<0||e>this.width||p<0||a>this.height)return[];const A=[];if(e<=0&&a<=0&&this.width<=d&&this.height<=p){if(_)return[{key:null,x1:e,y1:a,x2:d,y2:p}];for(let F=0;F<this.boxKeys.length;F++)A.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const H=this.circles[3*F],$=this.circles[3*F+1],ne=this.circles[3*F+2];A.push({key:this.circleKeys[F],x1:H-ne,y1:$-ne,x2:H+ne,y2:$+ne})}}else this._forEachCell(e,a,d,p,this._queryCell,A,{hitTest:_,overlapMode:E,seenUids:{box:{},circle:{}}},P);return A}query(e,a,d,p){return this._query(e,a,d,p,!1,null)}hitTest(e,a,d,p,_,E){return this._query(e,a,d,p,!0,_,E).length>0}hitTestCircle(e,a,d,p,_){const E=e-d,P=e+d,A=a-d,F=a+d;if(P<0||E>this.width||F<0||A>this.height)return!1;const H=[];return this._forEachCell(E,A,P,F,this._queryCellCircle,H,{hitTest:!0,overlapMode:p,circle:{x:e,y:a,radius:d},seenUids:{box:{},circle:{}}},_),H.length>0}_queryCell(e,a,d,p,_,E,P,A){const{seenUids:F,hitTest:H,overlapMode:$}=P,ne=this.boxCells[_];if(ne!==null){const me=this.bboxes;for(const be of ne)if(!F.box[be]){F.box[be]=!0;const Ie=4*be,De=this.boxKeys[be];if(e<=me[Ie+2]&&a<=me[Ie+3]&&d>=me[Ie+0]&&p>=me[Ie+1]&&(!A||A(De))&&(!H||!Nn($,De.overlapMode))&&(E.push({key:De,x1:me[Ie],y1:me[Ie+1],x2:me[Ie+2],y2:me[Ie+3]}),H))return!0}}const de=this.circleCells[_];if(de!==null){const me=this.circles;for(const be of de)if(!F.circle[be]){F.circle[be]=!0;const Ie=3*be,De=this.circleKeys[be];if(this._circleAndRectCollide(me[Ie],me[Ie+1],me[Ie+2],e,a,d,p)&&(!A||A(De))&&(!H||!Nn($,De.overlapMode))){const Be=me[Ie],Ee=me[Ie+1],We=me[Ie+2];if(E.push({key:De,x1:Be-We,y1:Ee-We,x2:Be+We,y2:Ee+We}),H)return!0}}}return!1}_queryCellCircle(e,a,d,p,_,E,P,A){const{circle:F,seenUids:H,overlapMode:$}=P,ne=this.boxCells[_];if(ne!==null){const me=this.bboxes;for(const be of ne)if(!H.box[be]){H.box[be]=!0;const Ie=4*be,De=this.boxKeys[be];if(this._circleAndRectCollide(F.x,F.y,F.radius,me[Ie+0],me[Ie+1],me[Ie+2],me[Ie+3])&&(!A||A(De))&&!Nn($,De.overlapMode))return E.push(!0),!0}}const de=this.circleCells[_];if(de!==null){const me=this.circles;for(const be of de)if(!H.circle[be]){H.circle[be]=!0;const Ie=3*be,De=this.circleKeys[be];if(this._circlesCollide(me[Ie],me[Ie+1],me[Ie+2],F.x,F.y,F.radius)&&(!A||A(De))&&!Nn($,De.overlapMode))return E.push(!0),!0}}}_forEachCell(e,a,d,p,_,E,P,A){const F=this._convertToXCellCoord(e),H=this._convertToYCellCoord(a),$=this._convertToXCellCoord(d),ne=this._convertToYCellCoord(p);for(let de=F;de<=$;de++)for(let me=H;me<=ne;me++)if(_.call(this,e,a,d,p,this.xCellCount*me+de,E,P,A))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,a,d,p,_,E){const P=p-e,A=_-a,F=d+E;return F*F>P*P+A*A}_circleAndRectCollide(e,a,d,p,_,E,P){const A=(E-p)/2,F=Math.abs(e-(p+A));if(F>A+d)return!1;const H=(P-_)/2,$=Math.abs(a-(_+H));if($>H+d)return!1;if(F<=A||$<=H)return!0;const ne=F-A,de=$-H;return ne*ne+de*de<=d*d}}function si(v,e,a,d,p){const _=c.H();return e?(c.K(_,_,[1/p,1/p,1]),a||c.ad(_,_,d.angle)):c.L(_,d.labelPlaneMatrix,v),_}function Hr(v,e,a,d,p){if(e){const _=c.ae(v);return c.K(_,_,[p,p,1]),a||c.ad(_,_,-d.angle),_}return d.glCoordMatrix}function Ce(v,e,a,d){let p;d?(p=[v,e,d(v,e),1],c.af(p,p,a)):(p=[v,e,0,1],rn(p,p,a));const _=p[3];return{point:new c.P(p[0]/_,p[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function ee(v,e){return .5+v/e*.5}function Q(v,e){return v.x>=-e[0]&&v.x<=e[0]&&v.y>=-e[1]&&v.y<=e[1]}function ue(v,e,a,d,p,_,E,P,A,F,H,$,ne,de,me){const be=d?v.textSizeData:v.iconSizeData,Ie=c.ag(be,a.transform.zoom),De=[256/a.width*2+1,256/a.height*2+1],Be=d?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Be.clear();const Ee=v.lineVertexArray,We=d?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ye=a.transform.width/a.transform.height;let it=!1;for(let Et=0;Et<We.length;Et++){const Bt=We.get(Et);if(Bt.hidden||Bt.writingMode===c.ah.vertical&&!it){mr(Bt.numGlyphs,Be);continue}it=!1;const $t=Ce(Bt.anchorX,Bt.anchorY,e,me);if(!Q($t.point,De)){mr(Bt.numGlyphs,Be);continue}const er=ee(a.transform.cameraToCenterDistance,$t.signedDistanceFromCamera),Wt=c.ai(be,Ie,Bt),Vt=E?Wt/er:Wt*er,cr={getElevation:me,labelPlaneMatrix:p,lineVertexArray:Ee,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:F,tileAnchorPoint:new c.P(Bt.anchorX,Bt.anchorY),unwrappedTileID:H,width:$,height:ne,translation:de},Nr=$e(cr,Bt,Vt,!1,P,e,_,v.glyphOffsetArray,Be,Ye,A);it=Nr.useVertical,(Nr.notEnoughRoom||it||Nr.needsFlipping&&$e(cr,Bt,Vt,!0,P,e,_,v.glyphOffsetArray,Be,Ye,A).notEnoughRoom)&&mr(Bt.numGlyphs,Be)}d?v.text.dynamicLayoutVertexBuffer.updateData(Be):v.icon.dynamicLayoutVertexBuffer.updateData(Be)}function Se(v,e,a,d,p,_,E,P){const A=_.glyphStartIndex+_.numGlyphs,F=_.lineStartIndex,H=_.lineStartIndex+_.lineLength,$=e.getoffsetX(_.glyphStartIndex),ne=e.getoffsetX(A-1),de=Nt(v*$,a,d,p,_.segment,F,H,P,E);if(!de)return null;const me=Nt(v*ne,a,d,p,_.segment,F,H,P,E);return me?P.projectionCache.anyProjectionOccluded?null:{first:de,last:me}:null}function Fe(v,e,a,d){return v===c.ah.horizontal&&Math.abs(a.y-e.y)>Math.abs(a.x-e.x)*d?{useVertical:!0}:(v===c.ah.vertical?e.y<a.y:e.x>a.x)?{needsFlipping:!0}:null}function $e(v,e,a,d,p,_,E,P,A,F,H){const $=a/24,ne=e.lineOffsetX*$,de=e.lineOffsetY*$;let me;if(e.numGlyphs>1){const be=e.glyphStartIndex+e.numGlyphs,Ie=e.lineStartIndex,De=e.lineStartIndex+e.lineLength,Be=Se($,P,ne,de,d,e,H,v);if(!Be)return{notEnoughRoom:!0};const Ee=Ce(Be.first.point.x,Be.first.point.y,E,v.getElevation).point,We=Ce(Be.last.point.x,Be.last.point.y,E,v.getElevation).point;if(p&&!d){const Ye=Fe(e.writingMode,Ee,We,F);if(Ye)return Ye}me=[Be.first];for(let Ye=e.glyphStartIndex+1;Ye<be-1;Ye++)me.push(Nt($*P.getoffsetX(Ye),ne,de,d,e.segment,Ie,De,v,H));me.push(Be.last)}else{if(p&&!d){const Ie=Ce(v.tileAnchorPoint.x,v.tileAnchorPoint.y,_,v.getElevation).point,De=e.lineStartIndex+e.segment+1,Be=new c.P(v.lineVertexArray.getx(De),v.lineVertexArray.gety(De)),Ee=Ce(Be.x,Be.y,_,v.getElevation),We=Ee.signedDistanceFromCamera>0?Ee.point:function(it,Et,Bt,$t,er,Wt){return Xe(it,Et,Bt,1,er,Wt)}(v.tileAnchorPoint,Be,Ie,0,_,v),Ye=Fe(e.writingMode,Ie,We,F);if(Ye)return Ye}const be=Nt($*P.getoffsetX(e.glyphStartIndex),ne,de,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,v,H);if(!be||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};me=[be]}for(const be of me)c.aj(A,be.point,be.angle);return{}}function Xe(v,e,a,d,p,_){const E=v.add(v.sub(e)._unit()),P=p!==void 0?Ce(E.x,E.y,p,_.getElevation).point:pt(E.x,E.y,_).point,A=a.sub(P);return a.add(A._mult(d/A.mag()))}function Le(v,e,a){const d=e.projectionCache;if(d.projections[v])return d.projections[v];const p=new c.P(e.lineVertexArray.getx(v),e.lineVertexArray.gety(v)),_=pt(p.x,p.y,e);if(_.signedDistanceFromCamera>0)return d.projections[v]=_.point,d.anyProjectionOccluded=d.anyProjectionOccluded||_.isOccluded,_.point;const E=v-a.direction;return function(P,A,F,H,$){return Xe(P,A,F,H,void 0,$)}(a.distanceFromAnchor===0?e.tileAnchorPoint:new c.P(e.lineVertexArray.getx(E),e.lineVertexArray.gety(E)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,e)}function pt(v,e,a){const d=v+a.translation[0],p=e+a.translation[1];let _;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(_=a.projection.projectTileCoordinates(d,p,a.unwrappedTileID,a.getElevation),_.point.x=(.5*_.point.x+.5)*a.width,_.point.y=(.5*-_.point.y+.5)*a.height):(_=Ce(d,p,a.labelPlaneMatrix,a.getElevation),_.isOccluded=!1),_}function It(v,e,a){return v._unit()._perp()._mult(e*a)}function ut(v,e,a,d,p,_,E,P,A){if(P.projectionCache.offsets[v])return P.projectionCache.offsets[v];const F=a.add(e);if(v+A.direction<d||v+A.direction>=p)return P.projectionCache.offsets[v]=F,F;const H=Le(v+A.direction,P,A),$=It(H.sub(a),E,A.direction),ne=a.add($),de=H.add($);return P.projectionCache.offsets[v]=c.ak(_,F,ne,de)||F,P.projectionCache.offsets[v]}function Nt(v,e,a,d,p,_,E,P,A){const F=d?v-e:v+e;let H=F>0?1:-1,$=0;d&&(H*=-1,$=Math.PI),H<0&&($+=Math.PI);let ne,de=H>0?_+p:_+p+1;P.projectionCache.cachedAnchorPoint?ne=P.projectionCache.cachedAnchorPoint:(ne=pt(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=ne);let me,be,Ie=ne,De=ne,Be=0,Ee=0;const We=Math.abs(F),Ye=[];let it;for(;Be+Ee<=We;){if(de+=H,de<_||de>=E)return null;Be+=Ee,De=Ie,be=me;const $t={absOffsetX:We,direction:H,distanceFromAnchor:Be,previousVertex:De};if(Ie=Le(de,P,$t),a===0)Ye.push(De),it=Ie.sub(De);else{let er;const Wt=Ie.sub(De);er=Wt.mag()===0?It(Le(de+H,P,$t).sub(Ie),a,H):It(Wt,a,H),be||(be=De.add(er)),me=ut(de,er,Ie,_,E,be,a,P,$t),Ye.push(be),it=me.sub(be)}Ee=it.mag()}const Et=it._mult((We-Be)/Ee)._add(be||De),Bt=$+Math.atan2(Ie.y-De.y,Ie.x-De.x);return Ye.push(Et),{point:Et,angle:A?Bt:0,path:Ye}}const hr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function mr(v,e){for(let a=0;a<v;a++){const d=e.length;e.resize(d+4),e.float32.set(hr,3*d)}}function rn(v,e,a){const d=e[0],p=e[1];return v[0]=a[0]*d+a[4]*p+a[12],v[1]=a[1]*d+a[5]*p+a[13],v[3]=a[3]*d+a[7]*p+a[15],v}const Rr=100;class en{constructor(e,a,d=new Ri(e.width+200,e.height+200,25),p=new Ri(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=a,this.grid=d,this.ignoredGrid=p,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Rr,this.screenBottomBoundary=e.height+Rr,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,a,d,p,_,E,P,A,F,H,$){const ne=e.anchorPointX+A[0],de=e.anchorPointY+A[1],me=this.projectAndGetPerspectiveRatio(p,ne,de,_,H),be=d*me.perspectiveRatio;let Ie;if(E||P)Ie=this._projectCollisionBox(e,be,p,_,E,P,A,me,H,$);else{const Ye=me.point.x+($?$.x*be:0),it=me.point.y+($?$.y*be:0);Ie={allPointsOccluded:!1,box:[Ye+e.x1*be,it+e.y1*be,Ye+e.x2*be,it+e.y2*be]}}const[De,Be,Ee,We]=Ie.box;return this.mapProjection.useSpecialProjectionForSymbols&&(E?Ie.allPointsOccluded:this.mapProjection.isOccluded(ne,de,_))||me.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(De,Be,Ee,We)||a!=="always"&&this.grid.hitTest(De,Be,Ee,We,a,F)?{box:[De,Be,Ee,We],placeable:!1,offscreen:!1}:{box:[De,Be,Ee,We],placeable:!0,offscreen:this.isOffscreen(De,Be,Ee,We)}}placeCollisionCircles(e,a,d,p,_,E,P,A,F,H,$,ne,de,me,be,Ie){const De=[],Be=new c.P(a.anchorX,a.anchorY),Ee=this.getPerspectiveRatio(E,Be.x,Be.y,P,Ie),We=($?_/Ee:_*Ee)/c.ap,Ye={getElevation:Ie,labelPlaneMatrix:A,lineVertexArray:d,pitchWithMap:$,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Be,unwrappedTileID:P,width:this.transform.width,height:this.transform.height,translation:be},it=Se(We,p,a.lineOffsetX*We,a.lineOffsetY*We,!1,a,!1,Ye);let Et=!1,Bt=!1,$t=!0;if(it){const er=.5*de*Ee+me,Wt=new c.P(-100,-100),Vt=new c.P(this.screenRightBoundary,this.screenBottomBoundary),cr=new Ar,Nr=it.first,Zt=it.last;let Xt=[];for(let qr=Nr.path.length-1;qr>=1;qr--)Xt.push(Nr.path[qr]);for(let qr=1;qr<Zt.path.length;qr++)Xt.push(Zt.path[qr]);const Br=2.5*er;if(F){const qr=this.projectPathToScreenSpace(Xt,Ye,F);Xt=qr.some(Jr=>Jr.signedDistanceFromCamera<=0)?[]:qr.map(Jr=>Jr.point)}let Mn=[];if(Xt.length>0){const qr=Xt[0].clone(),Jr=Xt[0].clone();for(let Rn=1;Rn<Xt.length;Rn++)qr.x=Math.min(qr.x,Xt[Rn].x),qr.y=Math.min(qr.y,Xt[Rn].y),Jr.x=Math.max(Jr.x,Xt[Rn].x),Jr.y=Math.max(Jr.y,Xt[Rn].y);Mn=qr.x>=Wt.x&&Jr.x<=Vt.x&&qr.y>=Wt.y&&Jr.y<=Vt.y?[Xt]:Jr.x<Wt.x||qr.x>Vt.x||Jr.y<Wt.y||qr.y>Vt.y?[]:c.al([Xt],Wt.x,Wt.y,Vt.x,Vt.y)}for(const qr of Mn){cr.reset(qr,.25*er);let Jr=0;Jr=cr.length<=.5*er?1:Math.ceil(cr.paddedLength/Br)+1;for(let Rn=0;Rn<Jr;Rn++){const $i=Rn/Math.max(Jr-1,1),Ws=cr.lerp($i),Ln=Ws.x+Rr,Bi=Ws.y+Rr;De.push(Ln,Bi,er,0);const qn=Ln-er,di=Bi-er,Ki=Ln+er,Da=Bi+er;if($t=$t&&this.isOffscreen(qn,di,Ki,Da),Bt=Bt||this.isInsideGrid(qn,di,Ki,Da),e!=="always"&&this.grid.hitTestCircle(Ln,Bi,er,e,ne)&&(Et=!0,!H))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!H&&Et||!Bt||Ee<this.perspectiveRatioCutoff?[]:De,offscreen:$t,collisionDetected:Et}}projectPathToScreenSpace(e,a,d){return e.map(p=>Ce(p.x,p.y,d,a.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let d=1/0,p=1/0,_=-1/0,E=-1/0;for(const H of e){const $=new c.P(H.x+Rr,H.y+Rr);d=Math.min(d,$.x),p=Math.min(p,$.y),_=Math.max(_,$.x),E=Math.max(E,$.y),a.push($)}const P=this.grid.query(d,p,_,E).concat(this.ignoredGrid.query(d,p,_,E)),A={},F={};for(const H of P){const $=H.key;if(A[$.bucketInstanceId]===void 0&&(A[$.bucketInstanceId]={}),A[$.bucketInstanceId][$.featureIndex])continue;const ne=[new c.P(H.x1,H.y1),new c.P(H.x2,H.y1),new c.P(H.x2,H.y2),new c.P(H.x1,H.y2)];c.am(a,ne)&&(A[$.bucketInstanceId][$.featureIndex]=!0,F[$.bucketInstanceId]===void 0&&(F[$.bucketInstanceId]=[]),F[$.bucketInstanceId].push($.featureIndex))}return F}insertCollisionBox(e,a,d,p,_,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:_,collisionGroupID:E,overlapMode:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,a,d,p,_,E){const P=d?this.ignoredGrid:this.grid,A={bucketInstanceId:p,featureIndex:_,collisionGroupID:E,overlapMode:a};for(let F=0;F<e.length;F+=4)P.insertCircle(A,e[F],e[F+1],e[F+2])}projectAndGetPerspectiveRatio(e,a,d,p,_){let E;_?(E=[a,d,_(a,d),1],c.af(E,E,e)):(E=[a,d,0,1],rn(E,E,e));const P=E[3];return{point:new c.P((E[0]/P+1)/2*this.transform.width+Rr,(-E[1]/P+1)/2*this.transform.height+Rr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}getPerspectiveRatio(e,a,d,p,_){const E=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,d,p,_):Ce(a,d,e,_);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(e,a,d,p){return d<Rr||e>=this.screenRightBoundary||p<Rr||a>this.screenBottomBoundary}isInsideGrid(e,a,d,p){return d>=0&&e<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const e=c.an([]);return c.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,a,d,p,_,E,P,A,F,H){let $=new c.P(1,0),ne=new c.P(0,1);const de=new c.P(e.anchorPointX+P[0],e.anchorPointY+P[1]);if(E&&!_){const $t=this.projectAndGetPerspectiveRatio(d,de.x+1,de.y,p,F).point.sub(A.point).unit(),er=Math.atan($t.y/$t.x)+($t.x<0?Math.PI:0),Wt=Math.sin(er),Vt=Math.cos(er);$=new c.P(Vt,Wt),ne=new c.P(-Wt,Vt)}else if(!E&&_){const $t=-this.transform.angle,er=Math.sin($t),Wt=Math.cos($t);$=new c.P(Wt,er),ne=new c.P(-er,Wt)}let me=A.point,be=a;if(_){me=de;const $t=this.transform.zoom-Math.floor(this.transform.zoom);be=Math.pow(2,-$t),be*=this.mapProjection.getPitchedTextCorrection(this.transform,de,p),H||(be*=c.ac(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}H&&(me=me.add($.mult(H.x*be)).add(ne.mult(H.y*be)));const Ie=e.x1*be,De=e.x2*be,Be=(Ie+De)/2,Ee=e.y1*be,We=e.y2*be,Ye=(Ee+We)/2,it=[{offsetX:Ie,offsetY:Ee},{offsetX:Be,offsetY:Ee},{offsetX:De,offsetY:Ee},{offsetX:De,offsetY:Ye},{offsetX:De,offsetY:We},{offsetX:Be,offsetY:We},{offsetX:Ie,offsetY:We},{offsetX:Ie,offsetY:Ye}];let Et=[];for(const{offsetX:$t,offsetY:er}of it)Et.push(new c.P(me.x+$.x*$t+ne.x*er,me.y+$.y*$t+ne.y*er));let Bt=!1;if(_){const $t=Et.map(er=>this.projectAndGetPerspectiveRatio(d,er.x,er.y,p,F));Bt=$t.some(er=>!er.isOccluded),Et=$t.map(er=>er.point)}else Bt=!0;return{box:c.ao(Et),allPointsOccluded:!Bt}}}function Wr(v,e,a){return e*(c.X/(v.tileSize*Math.pow(2,a-v.tileID.overscaledZ)))}class Pn{constructor(e,a,d,p){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?a:-a))):p&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class An{constructor(e,a,d,p,_){this.text=new Pn(e?e.text:null,a,d,_),this.icon=new Pn(e?e.icon:null,a,p,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Zr{constructor(e,a,d){this.text=e,this.icon=a,this.skipFade=d}}class on{constructor(){this.invProjMatrix=c.H(),this.viewportMatrix=c.H(),this.circles=[]}}class pn{constructor(e,a,d,p,_){this.bucketInstanceId=e,this.featureIndex=a,this.sourceLayerIndex=d,this.bucketIndex=p,this.tileID=_}}class Wn{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const a=++this.maxGroupID;this.collisionGroups[e]={ID:a,predicate:d=>d.collisionGroupID===a}}return this.collisionGroups[e]}}function ai(v,e,a,d,p){const{horizontalAlign:_,verticalAlign:E}=c.au(v);return new c.P(-(_-.5)*e+d[0]*p,-(E-.5)*a+d[1]*p)}class Si{constructor(e,a,d,p,_,E){this.transform=e.clone(),this.terrain=d,this.collisionIndex=new en(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Wn(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const a=this.terrain;return a?(d,p)=>a.getElevation(e,d,p):null}getBucketParts(e,a,d,p){const _=d.getBucket(a),E=d.latestFeatureIndex;if(!_||!E||a.id!==_.layerIds[0])return;const P=d.collisionBoxArray,A=_.layers[0].layout,F=_.layers[0].paint,H=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),$=d.tileSize/c.X,ne=d.tileID.toUnwrapped(),de=this.transform.calculatePosMatrix(ne),me=A.get("text-pitch-alignment")==="map",be=A.get("text-rotation-alignment")==="map",Ie=Wr(d,1,this.transform.zoom),De=this.collisionIndex.mapProjection.translatePosition(this.transform,d,F.get("text-translate"),F.get("text-translate-anchor")),Be=this.collisionIndex.mapProjection.translatePosition(this.transform,d,F.get("icon-translate"),F.get("icon-translate-anchor")),Ee=si(de,me,be,this.transform,Ie);let We=null;if(me){const it=Hr(de,me,be,this.transform,Ie);We=c.L([],this.transform.labelPlaneMatrix,it)}this.retainedQueryData[_.bucketInstanceId]=new pn(_.bucketInstanceId,E,_.sourceLayerIndex,_.index,d.tileID);const Ye={bucket:_,layout:A,translationText:De,translationIcon:Be,posMatrix:de,unwrappedTileID:ne,textLabelPlaneMatrix:Ee,labelToScreenMatrix:We,scale:H,textPixelRatio:$,holdingForFade:d.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:c.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(p)for(const it of _.sortKeyRanges){const{sortKey:Et,symbolInstanceStart:Bt,symbolInstanceEnd:$t}=it;e.push({sortKey:Et,symbolInstanceStart:Bt,symbolInstanceEnd:$t,parameters:Ye})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ye})}attemptAnchorPlacement(e,a,d,p,_,E,P,A,F,H,$,ne,de,me,be,Ie,De,Be,Ee){const We=c.aq[e.textAnchor],Ye=[e.textOffset0,e.textOffset1],it=ai(We,d,p,Ye,_),Et=this.collisionIndex.placeCollisionBox(a,ne,A,F,H,P,E,Ie,$.predicate,Ee,it);if((!Be||this.collisionIndex.placeCollisionBox(Be,ne,A,F,H,P,E,De,$.predicate,Ee,it).placeable)&&Et.placeable){let Bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[de.crossTileID]&&this.prevPlacement.placements[de.crossTileID]&&this.prevPlacement.placements[de.crossTileID].text&&(Bt=this.prevPlacement.variableOffsets[de.crossTileID].anchor),de.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[de.crossTileID]={textOffset:Ye,width:d,height:p,anchor:We,textBoxScale:_,prevAnchor:Bt},this.markUsedJustification(me,We,de,be),me.allowVerticalPlacement&&(this.markUsedOrientation(me,be,de),this.placedOrientations[de.crossTileID]=be),{shift:it,placedGlyphBoxes:Et}}}placeLayerBucketPart(e,a,d){const{bucket:p,layout:_,translationText:E,translationIcon:P,posMatrix:A,unwrappedTileID:F,textLabelPlaneMatrix:H,labelToScreenMatrix:$,textPixelRatio:ne,holdingForFade:de,collisionBoxArray:me,partiallyEvaluatedTextSize:be,collisionGroup:Ie}=e.parameters,De=_.get("text-optional"),Be=_.get("icon-optional"),Ee=c.ar(_,"text-overlap","text-allow-overlap"),We=Ee==="always",Ye=c.ar(_,"icon-overlap","icon-allow-overlap"),it=Ye==="always",Et=_.get("text-rotation-alignment")==="map",Bt=_.get("text-pitch-alignment")==="map",$t=_.get("icon-text-fit")!=="none",er=_.get("symbol-z-order")==="viewport-y",Wt=We&&(it||!p.hasIconData()||Be),Vt=it&&(We||!p.hasTextData()||De);!p.collisionArrays&&me&&p.deserializeCollisionBoxes(me);const cr=this._getTerrainElevationFunc(this.retainedQueryData[p.bucketInstanceId].tileID),Nr=(Zt,Xt,Br)=>{var Mn,qr;if(a[Zt.crossTileID])return;if(de)return void(this.placements[Zt.crossTileID]=new Zr(!1,!1,!1));let Jr=!1,Rn=!1,$i=!0,Ws=null,Ln={box:null,placeable:!1,offscreen:null},Bi={placeable:!1},qn=null,di=null,Ki=null,Da=0,As=0,za=0;Xt.textFeatureIndex?Da=Xt.textFeatureIndex:Zt.useRuntimeCollisionCircles&&(Da=Zt.featureIndex),Xt.verticalTextFeatureIndex&&(As=Xt.verticalTextFeatureIndex);const Ko=Xt.textBox;if(Ko){const _s=pi=>{let Qn=c.ah.horizontal;if(p.allowVerticalPlacement&&!pi&&this.prevPlacement){const Ji=this.prevPlacement.placedOrientations[Zt.crossTileID];Ji&&(this.placedOrientations[Zt.crossTileID]=Ji,Qn=Ji,this.markUsedOrientation(p,Qn,Zt))}return Qn},Zs=(pi,Qn)=>{if(p.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&Xt.verticalTextBox){for(const Ji of p.writingModes)if(Ji===c.ah.vertical?(Ln=Qn(),Bi=Ln):Ln=pi(),Ln&&Ln.placeable)break}else Ln=pi()},Ra=Zt.textAnchorOffsetStartIndex,da=Zt.textAnchorOffsetEndIndex;if(da===Ra){const pi=(Qn,Ji)=>{const Qr=this.collisionIndex.placeCollisionBox(Qn,Ee,ne,A,F,Bt,Et,E,Ie.predicate,cr);return Qr&&Qr.placeable&&(this.markUsedOrientation(p,Ji,Zt),this.placedOrientations[Zt.crossTileID]=Ji),Qr};Zs(()=>pi(Ko,c.ah.horizontal),()=>{const Qn=Xt.verticalTextBox;return p.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&Qn?pi(Qn,c.ah.vertical):{box:null,offscreen:null}}),_s(Ln&&Ln.placeable)}else{let pi=c.aq[(qr=(Mn=this.prevPlacement)===null||Mn===void 0?void 0:Mn.variableOffsets[Zt.crossTileID])===null||qr===void 0?void 0:qr.anchor];const Qn=(Qr,qs,Jo)=>{const La=Qr.x2-Qr.x1,lh=Qr.y2-Qr.y1,uh=Zt.textBoxScale,ti=$t&&Ye==="never"?qs:null;let Oa=null,Ec=Ee==="never"?1:2,iu="never";pi&&Ec++;for(let Qo=0;Qo<Ec;Qo++){for(let su=Ra;su<da;su++){const to=p.textAnchorOffsets.get(su);if(pi&&to.textAnchor!==pi)continue;const On=this.attemptAnchorPlacement(to,Qr,La,lh,uh,Et,Bt,ne,A,F,Ie,iu,Zt,p,Jo,E,P,ti,cr);if(On&&(Oa=On.placedGlyphBoxes,Oa&&Oa.placeable))return Jr=!0,Ws=On.shift,Oa}pi?pi=null:iu=Ee}return d&&!Oa&&(Oa={box:this.collisionIndex.placeCollisionBox(Ko,"always",ne,A,F,Bt,Et,E,Ie.predicate,cr,new c.P(0,0)).box,offscreen:!1,placeable:!1}),Oa};Zs(()=>Qn(Ko,Xt.iconBox,c.ah.horizontal),()=>{const Qr=Xt.verticalTextBox;return p.allowVerticalPlacement&&(!Ln||!Ln.placeable)&&Zt.numVerticalGlyphVertices>0&&Qr?Qn(Qr,Xt.verticalIconBox,c.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Ln&&(Jr=Ln.placeable,$i=Ln.offscreen);const Ji=_s(Ln&&Ln.placeable);if(!Jr&&this.prevPlacement){const Qr=this.prevPlacement.variableOffsets[Zt.crossTileID];Qr&&(this.variableOffsets[Zt.crossTileID]=Qr,this.markUsedJustification(p,Qr.anchor,Zt,Ji))}}}if(qn=Ln,Jr=qn&&qn.placeable,$i=qn&&qn.offscreen,Zt.useRuntimeCollisionCircles){const _s=p.text.placedSymbolArray.get(Zt.centerJustifiedTextSymbolIndex),Zs=c.ai(p.textSizeData,be,_s),Ra=_.get("text-padding");di=this.collisionIndex.placeCollisionCircles(Ee,_s,p.lineVertexArray,p.glyphOffsetArray,Zs,A,F,H,$,d,Bt,Ie.predicate,Zt.collisionCircleDiameter,Ra,E,cr),di.circles.length&&di.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Jr=We||di.circles.length>0&&!di.collisionDetected,$i=$i&&di.offscreen}if(Xt.iconFeatureIndex&&(za=Xt.iconFeatureIndex),Xt.iconBox){const _s=Zs=>this.collisionIndex.placeCollisionBox(Zs,Ye,ne,A,F,Bt,Et,P,Ie.predicate,cr,$t&&Ws?Ws:void 0);Bi&&Bi.placeable&&Xt.verticalIconBox?(Ki=_s(Xt.verticalIconBox),Rn=Ki.placeable):(Ki=_s(Xt.iconBox),Rn=Ki.placeable),$i=$i&&Ki.offscreen}const Gs=De||Zt.numHorizontalGlyphVertices===0&&Zt.numVerticalGlyphVertices===0,ha=Be||Zt.numIconVertices===0;Gs||ha?ha?Gs||(Rn=Rn&&Jr):Jr=Rn&&Jr:Rn=Jr=Rn&&Jr;const eo=Rn&&Ki.placeable;if(Jr&&qn.placeable&&this.collisionIndex.insertCollisionBox(qn.box,Ee,_.get("text-ignore-placement"),p.bucketInstanceId,Bi&&Bi.placeable&&As?As:Da,Ie.ID),eo&&this.collisionIndex.insertCollisionBox(Ki.box,Ye,_.get("icon-ignore-placement"),p.bucketInstanceId,za,Ie.ID),di&&Jr&&this.collisionIndex.insertCollisionCircles(di.circles,Ee,_.get("text-ignore-placement"),p.bucketInstanceId,Da,Ie.ID),d&&this.storeCollisionData(p.bucketInstanceId,Br,Xt,qn,Ki,di),Zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Zt.crossTileID]=new Zr(Jr||Wt,Rn||Vt,$i||p.justReloaded),a[Zt.crossTileID]=!0};if(er){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Zt=p.getSortedSymbolIndexes(this.transform.angle);for(let Xt=Zt.length-1;Xt>=0;--Xt){const Br=Zt[Xt];Nr(p.symbolInstances.get(Br),p.collisionArrays[Br],Br)}}else for(let Zt=e.symbolInstanceStart;Zt<e.symbolInstanceEnd;Zt++)Nr(p.symbolInstances.get(Zt),p.collisionArrays[Zt],Zt);if(d&&p.bucketInstanceId in this.collisionCircleArrays){const Zt=this.collisionCircleArrays[p.bucketInstanceId];c.as(Zt.invProjMatrix,A),Zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}p.justReloaded=!1}storeCollisionData(e,a,d,p,_,E){if(d.textBox||d.iconBox){let P,A;this.collisionBoxArrays.has(e)?P=this.collisionBoxArrays.get(e):(P=new Map,this.collisionBoxArrays.set(e,P)),P.has(a)?A=P.get(a):(A={text:null,icon:null},P.set(a,A)),d.textBox&&(A.text=p.box),d.iconBox&&(A.icon=_.box)}if(E){let P=this.collisionCircleArrays[e];P===void 0&&(P=this.collisionCircleArrays[e]=new on);for(let A=0;A<E.circles.length;A+=4)P.circles.push(E.circles[A+0]),P.circles.push(E.circles[A+1]),P.circles.push(E.circles[A+2]),P.circles.push(E.collisionDetected?1:0)}}markUsedJustification(e,a,d,p){let _;_=p===c.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.at(a)];const E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const P of E)P>=0&&(e.text.placedSymbolArray.get(P).crossTileID=_>=0&&P!==_?0:d.crossTileID)}markUsedOrientation(e,a,d){const p=a===c.ah.horizontal||a===c.ah.horizontalOnly?a:0,_=a===c.ah.vertical?a:0,E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const P of E)e.text.placedSymbolArray.get(P).placedOrientation=p;d.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let d=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(e):1,_=a?a.opacities:{},E=a?a.variableOffsets:{},P=a?a.placedOrientations:{};for(const A in this.placements){const F=this.placements[A],H=_[A];H?(this.opacities[A]=new An(H,p,F.text,F.icon),d=d||F.text!==H.text.placed||F.icon!==H.icon.placed):(this.opacities[A]=new An(null,p,F.text,F.icon,F.skipFade),d=d||F.text||F.icon)}for(const A in _){const F=_[A];if(!this.opacities[A]){const H=new An(F,p,!1,!1);H.isHidden()||(this.opacities[A]=H,d=d||F.text.placed||F.icon.placed)}}for(const A in E)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=E[A]);for(const A in P)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=P[A]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:e)}updateLayerOpacities(e,a){const d={};for(const p of a){const _=p.getBucket(e);_&&p.latestFeatureIndex&&e.id===_.layerIds[0]&&this.updateBucketOpacities(_,p.tileID,d,p.collisionBoxArray)}}updateBucketOpacities(e,a,d,p){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const _=e.layers[0],E=_.layout,P=new An(null,0,!1,!1,!0),A=E.get("text-allow-overlap"),F=E.get("icon-allow-overlap"),H=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$=E.get("text-rotation-alignment")==="map",ne=E.get("text-pitch-alignment")==="map",de=E.get("icon-text-fit")!=="none",me=new An(null,0,A&&(F||!e.hasIconData()||E.get("icon-optional")),F&&(A||!e.hasTextData()||E.get("text-optional")),!0);!e.collisionArrays&&p&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(p);const be=(De,Be,Ee)=>{for(let We=0;We<Be/4;We++)De.opacityVertexArray.emplaceBack(Ee);De.hasVisibleVertices=De.hasVisibleVertices||Ee!==Ti},Ie=this.collisionBoxArrays.get(e.bucketInstanceId);for(let De=0;De<e.symbolInstances.length;De++){const Be=e.symbolInstances.get(De),{numHorizontalGlyphVertices:Ee,numVerticalGlyphVertices:We,crossTileID:Ye}=Be;let it=this.opacities[Ye];d[Ye]?it=P:it||(it=me,this.opacities[Ye]=it),d[Ye]=!0;const Et=Be.numIconVertices>0,Bt=this.placedOrientations[Be.crossTileID],$t=Bt===c.ah.vertical,er=Bt===c.ah.horizontal||Bt===c.ah.horizontalOnly;if(Ee>0||We>0){const Vt=Jn(it.text);be(e.text,Ee,$t?Ti:Vt),be(e.text,We,er?Ti:Vt);const cr=it.text.isHidden();[Be.rightJustifiedTextSymbolIndex,Be.centerJustifiedTextSymbolIndex,Be.leftJustifiedTextSymbolIndex].forEach(Xt=>{Xt>=0&&(e.text.placedSymbolArray.get(Xt).hidden=cr||$t?1:0)}),Be.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(Be.verticalPlacedTextSymbolIndex).hidden=cr||er?1:0);const Nr=this.variableOffsets[Be.crossTileID];Nr&&this.markUsedJustification(e,Nr.anchor,Be,Bt);const Zt=this.placedOrientations[Be.crossTileID];Zt&&(this.markUsedJustification(e,"left",Be,Zt),this.markUsedOrientation(e,Zt,Be))}if(Et){const Vt=Jn(it.icon),cr=!(de&&Be.verticalPlacedIconSymbolIndex&&$t);Be.placedIconSymbolIndex>=0&&(be(e.icon,Be.numIconVertices,cr?Vt:Ti),e.icon.placedSymbolArray.get(Be.placedIconSymbolIndex).hidden=it.icon.isHidden()),Be.verticalPlacedIconSymbolIndex>=0&&(be(e.icon,Be.numVerticalIconVertices,cr?Ti:Vt),e.icon.placedSymbolArray.get(Be.verticalPlacedIconSymbolIndex).hidden=it.icon.isHidden())}const Wt=Ie&&Ie.has(De)?Ie.get(De):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Vt=e.collisionArrays[De];if(Vt){let cr=new c.P(0,0);if(Vt.textBox||Vt.verticalTextBox){let Nr=!0;if(H){const Zt=this.variableOffsets[Ye];Zt?(cr=ai(Zt.anchor,Zt.width,Zt.height,Zt.textOffset,Zt.textBoxScale),$&&cr._rotate(ne?this.transform.angle:-this.transform.angle)):Nr=!1}if(Vt.textBox||Vt.verticalTextBox){let Zt;Vt.textBox&&(Zt=$t),Vt.verticalTextBox&&(Zt=er),Sa(e.textCollisionBox.collisionVertexArray,it.text.placed,!Nr||Zt,Wt.text,cr.x,cr.y)}}if(Vt.iconBox||Vt.verticalIconBox){const Nr=!!(!er&&Vt.verticalIconBox);let Zt;Vt.iconBox&&(Zt=Nr),Vt.verticalIconBox&&(Zt=!Nr),Sa(e.iconCollisionBox.collisionVertexArray,it.icon.placed,Zt,Wt.icon,de?cr.x:0,de?cr.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const De=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=De.invProjMatrix,e.placementViewportMatrix=De.viewportMatrix,e.collisionCircleArray=De.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,a){const d=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*d>e}setStale(){this.stale=!0}}function Sa(v,e,a,d,p,_){d&&d.length!==0||(d=[0,0,0,0]);const E=d[0]-Rr,P=d[1]-Rr,A=d[2]-Rr,F=d[3]-Rr;v.emplaceBack(e?1:0,a?1:0,p||0,_||0,E,P),v.emplaceBack(e?1:0,a?1:0,p||0,_||0,A,P),v.emplaceBack(e?1:0,a?1:0,p||0,_||0,A,F),v.emplaceBack(e?1:0,a?1:0,p||0,_||0,E,F)}const Dr=Math.pow(2,25),Li=Math.pow(2,24),Za=Math.pow(2,17),ki=Math.pow(2,16),ci=Math.pow(2,9),Nl=Math.pow(2,8),hi=Math.pow(2,1);function Jn(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const e=v.placed?1:0,a=Math.floor(127*v.opacity);return a*Dr+e*Li+a*Za+e*ki+a*ci+e*Nl+a*hi+e}const Ti=0;function fs(){return{isOccluded:(v,e,a)=>!1,getPitchedTextCorrection:(v,e,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,e,a,d){throw new Error("Not implemented.")},translatePosition:(v,e,a,d)=>function(p,_,E,P,A=!1){if(!E[0]&&!E[1])return[0,0];const F=A?P==="map"?p.angle:0:P==="viewport"?-p.angle:0;if(F){const H=Math.sin(F),$=Math.cos(F);E=[E[0]*$-E[1]*H,E[0]*H+E[1]*$]}return[A?E[0]:Wr(_,E[0],p.zoom),A?E[1]:Wr(_,E[1],p.zoom)]}(v,e,a,d),getCircleRadiusCorrection:v=>1}}class ln{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,a,d,p,_){const E=this._bucketParts;for(;this._currentTileIndex<e.length;)if(a.getBucketParts(E,p,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((P,A)=>P.sortKey-A.sortKey));this._currentPartIndex<E.length;)if(a.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class ka{constructor(e,a,d,p,_,E,P,A){this.placement=new Si(e,fs(),a,E,P,A),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(e,a,d){const p=U.now(),_=()=>!this._forceFullPlacement&&U.now()-p>2;for(;this._currentPlacementIndex>=0;){const E=a[e[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=P)&&(!E.maxzoom||E.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new ln(E)),this._inProgressLayer.continuePlacement(d[E.source],this.placement,this._showCollisionBoxes,E,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Zi=512/c.X/2;class jn{constructor(e,a,d){this.tileID=e,this.bucketInstanceId=d,this._symbolsByKey={};const p=new Map;for(let _=0;_<a.length;_++){const E=a.get(_),P=E.key,A=p.get(P);A?A.push(E):p.set(P,[E])}for(const[_,E]of p){const P={positions:E.map(A=>({x:Math.floor(A.anchorX*Zi),y:Math.floor(A.anchorY*Zi)})),crossTileIDs:E.map(A=>A.crossTileID)};if(P.positions.length>128){const A=new c.av(P.positions.length,16,Uint16Array);for(const{x:F,y:H}of P.positions)A.add(F,H);A.finish(),delete P.positions,P.index=A}this._symbolsByKey[_]=P}}getScaledCoordinates(e,a){const{x:d,y:p,z:_}=this.tileID.canonical,{x:E,y:P,z:A}=a.canonical,F=Zi/Math.pow(2,A-_),H=(P*c.X+e.anchorY)*F,$=p*c.X*Zi;return{x:Math.floor((E*c.X+e.anchorX)*F-d*c.X*Zi),y:Math.floor(H-$)}}findMatches(e,a,d){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let _=0;_<e.length;_++){const E=e.get(_);if(E.crossTileID)continue;const P=this._symbolsByKey[E.key];if(!P)continue;const A=this.getScaledCoordinates(E,a);if(P.index){const F=P.index.range(A.x-p,A.y-p,A.x+p,A.y+p).sort();for(const H of F){const $=P.crossTileIDs[H];if(!d[$]){d[$]=!0,E.crossTileID=$;break}}}else if(P.positions)for(let F=0;F<P.positions.length;F++){const H=P.positions[F],$=P.crossTileIDs[F];if(Math.abs(H.x-A.x)<=p&&Math.abs(H.y-A.y)<=p&&!d[$]){d[$]=!0,E.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class Ss{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Oi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const a=Math.round((e-this.lng)/360);if(a!==0)for(const d in this.indexes){const p=this.indexes[d],_={};for(const E in p){const P=p[E];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+a),_[P.tileID.key]=P}this.indexes[d]=_}this.lng=e}addBucket(e,a,d){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let _=0;_<a.symbolInstances.length;_++)a.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const p=this.usedCrossTileIDs[e.overscaledZ];for(const _ in this.indexes){const E=this.indexes[_];if(Number(_)>e.overscaledZ)for(const P in E){const A=E[P];A.tileID.isChildOf(e)&&A.findMatches(a.symbolInstances,e,p)}else{const P=E[e.scaledTo(Number(_)).key];P&&P.findMatches(a.symbolInstances,e,p)}}for(let _=0;_<a.symbolInstances.length;_++){const E=a.symbolInstances.get(_);E.crossTileID||(E.crossTileID=d.generate(),p[E.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new jn(e,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(e,a){for(const d of a.getCrossTileIDsLists())for(const p of d)delete this.usedCrossTileIDs[e][p]}removeStaleBuckets(e){let a=!1;for(const d in this.indexes){const p=this.indexes[d];for(const _ in p)e[p[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,p[_]),delete p[_],a=!0)}return a}}class ea{constructor(){this.layerIndexes={},this.crossTileIDs=new Ss,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,a,d){let p=this.layerIndexes[e.id];p===void 0&&(p=this.layerIndexes[e.id]=new Oi);let _=!1;const E={};p.handleWrapJump(d);for(const P of a){const A=P.getBucket(e);A&&e.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(P.tileID,A,this.crossTileIDs)&&(_=!0),E[A.bucketInstanceId]=!0)}return p.removeStaleBuckets(E)&&(_=!0),_}pruneUnusedLayers(e){const a={};e.forEach(d=>{a[d]=!0});for(const d in this.layerIndexes)a[d]||delete this.layerIndexes[d]}}const Ei=(v,e)=>c.t(v,e&&e.filter(a=>a.identifier!=="source.canvas")),z=c.aw();class K extends c.E{constructor(e,a={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const p=this.sourceCaches[d].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[d].reload()}},this.map=e,this.dispatcher=new Mr(Kt(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,p)=>this.getGlyphs(d,p)),this.dispatcher.registerMessageHandler("GI",(d,p)=>this.getImages(d,p)),this.imageManager=new Je,this.imageManager.setEventedParent(this),this.glyphManager=new Me(e._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new ea,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.ay()),In().on(vt,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const p=this.sourceCaches[d.sourceId];if(!p)return;const _=p.getSource();if(_&&_.vectorLayerIds)for(const E in this._layers){const P=this._layers[E];P.source===_.id&&this._validateLayer(P)}})}loadURL(e,a={},d){this.fire(new c.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;c.h(p,this._loadStyleRequest).then(E=>{this._loadStyleRequest=null,this._load(E.data,a,d)}).catch(E=>{this._loadStyleRequest=null,E&&!_.signal.aborted&&this.fire(new c.j(E))})}loadJSON(e,a={},d){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(e,a,d)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(z,{validate:!1})}_load(e,a,d){var p;const _=a.transformStyle?a.transformStyle(d,e):e;if(!a.validate||!Ei(this,c.u(_))){this._loaded=!0,this.stylesheet=_;for(const E in _.sources)this.addSource(E,_.sources[E],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new ht(this.stylesheet.light),this.sky=new _e(this.stylesheet.sky),this.map.setTerrain((p=this.stylesheet.terrain)!==null&&p!==void 0?p:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const e=c.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of e){const d=c.aA(a);d.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=d}}_loadSprite(e,a=!1,d=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,E,P,A){return c._(this,void 0,void 0,function*(){const F=at(_),H=P>1?"@2x":"",$={},ne={};for(const{id:de,url:me}of F){const be=E.transformRequest(Mt(me,H,".json"),"SpriteJSON");$[de]=c.h(be,A);const Ie=E.transformRequest(Mt(me,H,".png"),"SpriteImage");ne[de]=ge.getImage(Ie,A)}return yield Promise.all([...Object.values($),...Object.values(ne)]),function(de,me){return c._(this,void 0,void 0,function*(){const be={};for(const Ie in de){be[Ie]={};const De=U.getImageCanvasContext((yield me[Ie]).data),Be=(yield de[Ie]).data;for(const Ee in Be){const{width:We,height:Ye,x:it,y:Et,sdf:Bt,pixelRatio:$t,stretchX:er,stretchY:Wt,content:Vt,textFitWidth:cr,textFitHeight:Nr}=Be[Ee];be[Ie][Ee]={data:null,pixelRatio:$t,sdf:Bt,stretchX:er,stretchY:Wt,content:Vt,textFitWidth:cr,textFitHeight:Nr,spriteData:{width:We,height:Ye,x:it,y:Et,context:De}}}}return be})}($,ne)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const E in _){this._spritesImagesIds[E]=[];const P=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(A=>!(A in _)):[];for(const A of P)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in _[E]){const F=E==="default"?A:`${E}:${A}`;this._spritesImagesIds[E].push(F),F in this.imageManager.images?this.imageManager.updateImage(F,_[E][A],!1):this.imageManager.addImage(F,_[E][A]),a&&(this._changedImages[F]=!0)}}}).catch(_=>{this._spriteRequest=null,p=_,this.fire(new c.j(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),d&&d(p)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(e){const a=this.sourceCaches[e.source];if(!a)return;const d=e.sourceLayer;if(!d)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.j(new Error(`Source layer "${d}" does not exist on source "${p.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,a=!1){const d=this._serializedAllLayers();if(!e||e.length===0)return Object.values(a?c.aB(d):d);const p=[];for(const _ of e)if(d[_]){const E=a?c.aB(d[_]):d[_];p.push(E)}return p}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const a=Object.keys(this._layers);for(const d of a){const p=this._layers[d];p.type!=="custom"&&(e[d]=p.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(p.length||_.length)&&this._updateWorkerLayers(p,_);for(const E in this._updatedSources){const P=this._updatedSources[E];if(P==="reload")this._reloadSource(E);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const d={};for(const p in this.sourceCaches){const _=this.sourceCaches[p];d[p]=_.used,_.used=!1}for(const p of this._order){const _=this._layers[p];_.recalculate(e,this._availableImages),!_.isHidden(e.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const p in d){const _=this.sourceCaches[p];!!d[p]!=!!_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,a&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,a={}){var d;this._checkLoaded();const p=this.serialize();if(e=a.transformStyle?a.transformStyle(p,e):e,((d=a.validate)===null||d===void 0||d)&&Ei(this,c.u(e)))return!1;(e=c.aB(e)).layers=c.az(e.layers);const _=c.aC(p,e),E=this._getOperationsToPerform(_);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const P of E.operations)P();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const a=[],d=[];for(const p of e)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setSky":a.push(()=>this.setSky.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setTransition":a.push(()=>{});break;default:d.push(p.command)}return{operations:a,unimplemented:d}}addImage(e,a){if(this.getImage(e))return this.fire(new c.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,a),this._afterImageUpdated(e)}updateImage(e,a){this.imageManager.updateImage(e,a)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new c.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,a,d={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(c.u.source,`sources.${e}`,a,null,d))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[e]=new kr(e,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:e})),p.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===e)return this.fire(new c.j(new Error(`Source "${e}" cannot be removed while layer "${d}" is using it.`)));const a=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],a.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,a){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const d=this.sourceCaches[e].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(a),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,a,d={}){this._checkLoaded();const p=e.id;if(this.getLayer(p))return void this.fire(new c.j(new Error(`Layer "${p}" already exists on this map.`)));let _;if(e.type==="custom"){if(Ei(this,c.aD(e)))return;_=c.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(p,e.source),e=c.aB(e),e=c.e(e,{source:p})),this._validate(c.u.layer,`layers.${p}`,e,{arrayIndex:-1},d))return;_=c.aA(e),this._validateLayer(_),_.setEventedParent(this,{layer:{id:p}})}const E=a?this._order.indexOf(a):this._order.length;if(a&&E===-1)this.fire(new c.j(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(E,0,p),this._layerOrderChanged=!0,this._layers[p]=_,this._removedLayers[p]&&_.source&&_.type!=="custom"){const P=this._removedLayers[p];delete this._removedLayers[p],P.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(e,a){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new c.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===a)return;const d=this._order.indexOf(e);this._order.splice(d,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new c.j(new Error(`Cannot move layer "${e}" before non-existing layer "${a}".`))):(this._order.splice(p,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const a=this._layers[e];if(!a)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${e}".`)));a.setEventedParent(null);const d=this._order.indexOf(e);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=a,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],a.onRemove&&a.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,a,d){this._checkLoaded();const p=this.getLayer(e);p?p.minzoom===a&&p.maxzoom===d||(a!=null&&(p.minzoom=a),d!=null&&(p.maxzoom=d),this._updateLayer(p)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,a,d={}){this._checkLoaded();const p=this.getLayer(e);if(p){if(!c.aE(p.filter,a))return a==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(c.u.filter,`layers.${p.id}.filter`,a,null,d)||(p.filter=c.aB(a),this._updateLayer(p)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return c.aB(this.getLayer(e).filter)}setLayoutProperty(e,a,d,p={}){this._checkLoaded();const _=this.getLayer(e);_?c.aE(_.getLayoutProperty(a),d)||(_.setLayoutProperty(a,d,p),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,a){const d=this.getLayer(e);if(d)return d.getLayoutProperty(a);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,a,d,p={}){this._checkLoaded();const _=this.getLayer(e);_?c.aE(_.getPaintProperty(a),d)||(_.setPaintProperty(a,d,p)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,a){return this.getLayer(e).getPaintProperty(a)}setFeatureState(e,a){this._checkLoaded();const d=e.source,p=e.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const E=_.getSource().type;E==="geojson"&&p?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||p?(e.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(p,e.id,a)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,a){this._checkLoaded();const d=e.source,p=this.sourceCaches[d];if(p===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const _=p.getSource().type,E=_==="vector"?e.sourceLayer:void 0;_!=="vector"||E?a&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(E,e.id,a):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const a=e.source,d=e.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||d?(e.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),p.getFeatureState(d,e.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=c.aF(this.sourceCaches,_=>_.serialize()),a=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,p=this.stylesheet;return c.aG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,sources:e,layers:a,terrain:d},_=>_!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const a=E=>this._layers[E].type==="fill-extrusion",d={},p=[];for(let E=this._order.length-1;E>=0;E--){const P=this._order[E];if(a(P)){d[P]=E;for(const A of e){const F=A[P];if(F)for(const H of F)p.push(H)}}}p.sort((E,P)=>P.intersectionZ-E.intersectionZ);const _=[];for(let E=this._order.length-1;E>=0;E--){const P=this._order[E];if(a(P))for(let A=p.length-1;A>=0;A--){const F=p[A].feature;if(d[F.layer.id]<E)break;_.push(F),p.pop()}else for(const A of e){const F=A[P];if(F)for(const H of F)_.push(H.feature)}}return _}queryRenderedFeatures(e,a,d){a&&a.filter&&this._validate(c.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const P of a.layers){const A=this._layers[P];if(!A)return this.fire(new c.j(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];p[A.source]=!0}}const _=[];a.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const P in this.sourceCaches)a.layers&&!p[P]||_.push(Kr(this.sourceCaches[P],this._layers,E,e,a,d));return this.placement&&_.push(function(P,A,F,H,$,ne,de){const me={},be=ne.queryRenderedSymbols(H),Ie=[];for(const De of Object.keys(be).map(Number))Ie.push(de[De]);Ie.sort(Y);for(const De of Ie){const Be=De.featureIndex.lookupSymbolFeatures(be[De.bucketInstanceId],A,De.bucketIndex,De.sourceLayerIndex,$.filter,$.layers,$.availableImages,P);for(const Ee in Be){const We=me[Ee]=me[Ee]||[],Ye=Be[Ee];Ye.sort((it,Et)=>{const Bt=De.featureSortOrder;if(Bt){const $t=Bt.indexOf(it.featureIndex);return Bt.indexOf(Et.featureIndex)-$t}return Et.featureIndex-it.featureIndex});for(const it of Ye)We.push(it)}}for(const De in me)me[De].forEach(Be=>{const Ee=Be.feature,We=F[P[De].source].getFeatureState(Ee.layer["source-layer"],Ee.id);Ee.source=Ee.layer.source,Ee.layer["source-layer"]&&(Ee.sourceLayer=Ee.layer["source-layer"]),Ee.state=We});return me}(this._layers,E,this.sourceCaches,e,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(e,a){a&&a.filter&&this._validate(c.u.filter,"querySourceFeatures.filter",a.filter,null,a);const d=this.sourceCaches[e];return d?function(p,_){const E=p.getRenderableIds().map(F=>p.getTileByID(F)),P=[],A={};for(let F=0;F<E.length;F++){const H=E[F],$=H.tileID.canonical.key;A[$]||(A[$]=!0,H.querySourceFeatures(P,_))}return P}(d,a):[]}getLight(){return this.light.getLight()}setLight(e,a={}){this._checkLoaded();const d=this.light.getLight();let p=!1;for(const E in e)if(!c.aE(e[E],d[E])){p=!0;break}if(!p)return;const _={now:U.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,a),this.light.updateTransitions(_)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,a={}){const d=this.getSky();let p=!1;if(!e&&!d)return;if(e&&!d)p=!0;else if(!e&&d)p=!0;else for(const E in e)if(!c.aE(e[E],d[E])){p=!0;break}if(!p)return;const _={now:U.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,a),this.sky.updateTransitions(_)}_validate(e,a,d,p,_={}){return(!_||_.validate!==!1)&&Ei(this,e.call(c.u,c.e({key:a,style:this.serialize(),value:d,styleSpec:c.v},p)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),In().off(vt,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const d=this.sourceCaches[a];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const a in this.sourceCaches)this.sourceCaches[a].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,a,d,p,_=!1){let E=!1,P=!1;const A={};for(const F of this._order){const H=this._layers[F];if(H.type!=="symbol")continue;if(!A[H.source]){const ne=this.sourceCaches[H.source];A[H.source]=ne.getRenderableIds(!0).map(de=>ne.getTileByID(de)).sort((de,me)=>me.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(me.tileID)?-1:1))}const $=this.crossTileSymbolIndex.addLayer(H,A[H.source],e.center.lng);E=E||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),e.zoom))&&(this.pauseablePlacement=new ka(e,this.map.terrain,this._order,_,a,d,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),P=!0),E&&this.pauseablePlacement.placement.setStale()),P||E)for(const F of this._order){const H=this._layers[F];H.type==="symbol"&&this.placement.updateLayerOpacities(H,A[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,a){return c._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),d})}getGlyphs(e,a){return c._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,a={}){this._checkLoaded(),e&&this._validate(c.u.glyphs,"glyphs",e,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,a,d={},p){this._checkLoaded();const _=[{id:e,url:a}],E=[...at(this.stylesheet.sprite),..._];this._validate(c.u.sprite,"sprite",E,null,d)||(this.stylesheet.sprite=E,this._loadSprite(_,!0,p))}removeSprite(e){this._checkLoaded();const a=at(this.stylesheet.sprite);if(a.find(d=>d.id===e)){if(this._spritesImagesIds[e])for(const d of this._spritesImagesIds[e])this.imageManager.removeImage(d),this._changedImages[d]=!0;a.splice(a.findIndex(d=>d.id===e),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return at(this.stylesheet.sprite)}setSprite(e,a={},d){this._checkLoaded(),e&&this._validate(c.u.sprite,"sprite",e,null,a)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,d):(this._unloadSprite(),d&&d(null)))}}var he=c.Y([{name:"a_pos",type:"Int16",components:2}]);const ke={prelude:Ke(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ke(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ke(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ke(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ke("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ke(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ke(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ke("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ke("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ke("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ke(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ke(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ke(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ke(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ke(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ke(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ke(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ke(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ke(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ke(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ke(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ke(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ke(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ke(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ke(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ke(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ke("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ke("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ke("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ke("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ke(v,e){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=e.match(/attribute ([\w]+) ([\w]+)/g),p=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=_?_.concat(p):p,P={};return{fragmentSource:v=v.replace(a,(A,F,H,$,ne)=>(P[ne]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${H} ${$} ${ne};
#else
uniform ${H} ${$} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${H} ${$} ${ne} = u_${ne};
#endif
`)),vertexSource:e=e.replace(a,(A,F,H,$,ne)=>{const de=$==="float"?"vec2":"vec4",me=ne.match(/color/)?"color":de;return P[ne]?F==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${H} ${de} a_${ne};
varying ${H} ${$} ${ne};
#else
uniform ${H} ${$} u_${ne};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${H} ${$} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${me}(a_${ne}, u_${ne}_t);
#else
    ${H} ${$} ${ne} = u_${ne};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${H} ${de} a_${ne};
#else
uniform ${H} ${$} u_${ne};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${H} ${$} ${ne} = a_${ne};
#else
    ${H} ${$} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${H} ${$} ${ne} = unpack_mix_${me}(a_${ne}, u_${ne}_t);
#else
    ${H} ${$} ${ne} = u_${ne};
#endif
`}),staticAttributes:d,staticUniforms:E}}class st{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,a,d,p,_,E,P,A,F){this.context=e;let H=this.boundPaintVertexBuffers.length!==p.length;for(let $=0;!H&&$<p.length;$++)this.boundPaintVertexBuffers[$]!==p[$]&&(H=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==d||H||this.boundIndexBuffer!==_||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==F?this.freshBind(a,d,p,_,E,P,A,F):(e.bindVertexArray.set(this.vao),P&&P.bind(),_&&_.dynamicDraw&&_.bind(),A&&A.bind(),F&&F.bind())}freshBind(e,a,d,p,_,E,P,A){const F=e.numAttributes,H=this.context,$=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=p,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=A,a.enableAttributes($,e);for(const ne of d)ne.enableAttributes($,e);E&&E.enableAttributes($,e),P&&P.enableAttributes($,e),A&&A.enableAttributes($,e),a.bind(),a.setVertexAttribPointers($,e,_);for(const ne of d)ne.bind(),ne.setVertexAttribPointers($,e,_);E&&(E.bind(),E.setVertexAttribPointers($,e,_)),p&&p.bind(),P&&(P.bind(),P.setVertexAttribPointers($,e,_)),A&&(A.bind(),A.setVertexAttribPointers($,e,_)),H.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const kt=(v,e,a,d,p)=>({u_matrix:v,u_texture:0,u_ele_delta:e,u_fog_matrix:a,u_fog_color:d?d.properties.get("fog-color"):c.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(p):0,u_horizon_color:d?d.properties.get("horizon-color"):c.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function Ht(v){const e=[];for(let a=0;a<v.length;a++){if(v[a]===null)continue;const d=v[a].split(" ");e.push(d.pop())}return e}class Qt{constructor(e,a,d,p,_,E){const P=e.gl;this.program=P.createProgram();const A=Ht(a.staticAttributes),F=d?d.getBinderAttributes():[],H=A.concat(F),$=ke.prelude.staticUniforms?Ht(ke.prelude.staticUniforms):[],ne=a.staticUniforms?Ht(a.staticUniforms):[],de=d?d.getBinderUniforms():[],me=$.concat(ne).concat(de),be=[];for(const it of me)be.indexOf(it)<0&&be.push(it);const Ie=d?d.defines():[];_&&Ie.push("#define OVERDRAW_INSPECTOR;"),E&&Ie.push("#define TERRAIN3D;");const De=Ie.concat(ke.prelude.fragmentSource,a.fragmentSource).join(`
`),Be=Ie.concat(ke.prelude.vertexSource,a.vertexSource).join(`
`),Ee=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(Ee,De),P.compileShader(Ee),!P.getShaderParameter(Ee,P.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${P.getShaderInfoLog(Ee)}`);P.attachShader(this.program,Ee);const We=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(We,Be),P.compileShader(We),!P.getShaderParameter(We,P.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${P.getShaderInfoLog(We)}`);P.attachShader(this.program,We),this.attributes={};const Ye={};this.numAttributes=H.length;for(let it=0;it<this.numAttributes;it++)H[it]&&(P.bindAttribLocation(this.program,it,H[it]),this.attributes[H[it]]=it);if(P.linkProgram(this.program),!P.getProgramParameter(this.program,P.LINK_STATUS))throw new Error(`Program failed to link: ${P.getProgramInfoLog(this.program)}`);P.deleteShader(We),P.deleteShader(Ee);for(let it=0;it<be.length;it++){const Et=be[it];if(Et&&!Ye[Et]){const Bt=P.getUniformLocation(this.program,Et);Bt&&(Ye[Et]=Bt)}}this.fixedUniforms=p(e,Ye),this.terrainUniforms=((it,Et)=>({u_depth:new c.aH(it,Et.u_depth),u_terrain:new c.aH(it,Et.u_terrain),u_terrain_dim:new c.aI(it,Et.u_terrain_dim),u_terrain_matrix:new c.aJ(it,Et.u_terrain_matrix),u_terrain_unpack:new c.aK(it,Et.u_terrain_unpack),u_terrain_exaggeration:new c.aI(it,Et.u_terrain_exaggeration)}))(e,Ye),this.binderUniforms=d?d.getUniforms(e,Ye):[]}draw(e,a,d,p,_,E,P,A,F,H,$,ne,de,me,be,Ie,De,Be){const Ee=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(d),e.setStencilMode(p),e.setColorMode(_),e.setCullFace(E),A){e.activeTexture.set(Ee.TEXTURE2),Ee.bindTexture(Ee.TEXTURE_2D,A.depthTexture),e.activeTexture.set(Ee.TEXTURE3),Ee.bindTexture(Ee.TEXTURE_2D,A.texture);for(const Ye in this.terrainUniforms)this.terrainUniforms[Ye].set(A[Ye])}for(const Ye in this.fixedUniforms)this.fixedUniforms[Ye].set(P[Ye]);be&&be.setUniforms(e,this.binderUniforms,de,{zoom:me});let We=0;switch(a){case Ee.LINES:We=2;break;case Ee.TRIANGLES:We=3;break;case Ee.LINE_STRIP:We=1}for(const Ye of ne.get()){const it=Ye.vaos||(Ye.vaos={});(it[F]||(it[F]=new st)).bind(e,this,H,be?be.getPaintVertexBuffers():[],$,Ye.vertexOffset,Ie,De,Be),Ee.drawElements(a,Ye.primitiveLength*We,Ee.UNSIGNED_SHORT,Ye.primitiveOffset*We*2)}}}function Or(v,e,a){const d=1/Wr(a,1,e.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),_=a.tileSize*Math.pow(2,e.transform.tileZoom)/p,E=_*(a.tileID.canonical.x+a.tileID.wrap*p),P=_*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[d,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[E>>16,P>>16],u_pixel_coord_lower:[65535&E,65535&P]}}const Gr=(v,e,a,d)=>{const p=e.style.light,_=p.properties.get("position"),E=[_.x,_.y,_.z],P=function(){var F=new c.A(9);return c.A!=Float32Array&&(F[1]=0,F[2]=0,F[3]=0,F[5]=0,F[6]=0,F[7]=0),F[0]=1,F[4]=1,F[8]=1,F}();p.properties.get("anchor")==="viewport"&&function(F,H){var $=Math.sin(H),ne=Math.cos(H);F[0]=ne,F[1]=$,F[2]=0,F[3]=-$,F[4]=ne,F[5]=0,F[6]=0,F[7]=0,F[8]=1}(P,-e.transform.angle),function(F,H,$){var ne=H[0],de=H[1],me=H[2];F[0]=ne*$[0]+de*$[3]+me*$[6],F[1]=ne*$[1]+de*$[4]+me*$[7],F[2]=ne*$[2]+de*$[5]+me*$[8]}(E,E,P);const A=p.properties.get("color");return{u_matrix:v,u_lightpos:E,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+a,u_opacity:d}},vn=(v,e,a,d,p,_,E)=>c.e(Gr(v,e,a,d),Or(_,e,E),{u_height_factor:-Math.pow(2,p.overscaledZ)/E.tileSize/8}),Fi=v=>({u_matrix:v}),ps=(v,e,a,d)=>c.e(Fi(v),Or(a,e,d)),rs=(v,e)=>({u_matrix:v,u_world:e}),ta=(v,e,a,d,p)=>c.e(ps(v,e,a,d),{u_world:p}),ks=(v,e,a,d)=>{const p=v.transform;let _,E;if(d.paint.get("circle-pitch-alignment")==="map"){const P=Wr(a,1,p.zoom);_=!0,E=[P,P]}else _=!1,E=p.pixelsToGLUnits;return{u_camera_to_center_distance:p.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(e.posMatrix,a,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:E}},Ci=(v,e,a)=>({u_matrix:v,u_inv_matrix:e,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),Ii=(v,e,a=1)=>({u_matrix:v,u_color:e,u_overlay:0,u_overlay_scale:a}),Gn=v=>({u_matrix:v}),Un=(v,e,a,d)=>({u_matrix:v,u_extrude_scale:Wr(e,1,a),u_intensity:d}),Us=(v,e,a,d)=>{const p=c.H();c.aP(p,0,v.width,v.height,0,0,1);const _=v.context.gl;return{u_matrix:p,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:a,u_color_ramp:d,u_opacity:e.paint.get("heatmap-opacity")}};function Vs(v,e){const a=Math.pow(2,e.canonical.z),d=e.canonical.y;return[new c.Z(0,d/a).toLngLat().lat,new c.Z(0,(d+1)/a).toLngLat().lat]}const jl=(v,e,a,d)=>{const p=v.transform;return{u_matrix:lo(v,e,a,d),u_ratio:1/Wr(e,1,p.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Iu=(v,e,a,d,p)=>c.e(jl(v,e,a,p),{u_image:0,u_image_height:d}),ra=(v,e,a,d,p)=>{const _=v.transform,E=Hs(e,_);return{u_matrix:lo(v,e,a,p),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Wr(e,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[E,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},qc=(v,e,a,d,p,_)=>{const E=v.lineAtlas,P=Hs(e,v.transform),A=a.layout.get("line-cap")==="round",F=E.getDash(d.from,A),H=E.getDash(d.to,A),$=F.width*p.fromScale,ne=H.width*p.toScale;return c.e(jl(v,e,a,_),{u_patternscale_a:[P/$,-F.height/2],u_patternscale_b:[P/ne,-H.height/2],u_sdfgamma:E.width/(256*Math.min($,ne)*v.pixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:H.y,u_mix:p.t})};function Hs(v,e){return 1/Wr(v,1,e.tileZoom)}function lo(v,e,a,d){return v.translatePosMatrix(d?d.posMatrix:e.tileID.posMatrix,e,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const hl=(v,e,a,d,p)=>{return{u_matrix:v,u_tl_parent:e,u_scale_parent:a,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(E=p.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(_=p.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Dn(p.paint.get("raster-hue-rotate"))};var _,E};function Dn(v){v*=Math.PI/180;const e=Math.sin(v),a=Math.cos(v);return[(2*a+1)/3,(-Math.sqrt(3)*e-a+1)/3,(Math.sqrt(3)*e-a+1)/3]}const na=(v,e,a,d,p,_,E,P,A,F,H,$,ne,de)=>{const me=E.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_pitch:me.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:me.width/me.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:A,u_coord_matrix:F,u_is_text:+$,u_pitch_with_map:+d,u_is_along_line:p,u_is_variable_anchor:_,u_texsize:ne,u_texture:0,u_translation:H,u_pitched_scale:de}},Ts=(v,e,a,d,p,_,E,P,A,F,H,$,ne,de,me)=>{const be=E.transform;return c.e(na(v,e,a,d,p,_,E,P,A,F,H,$,ne,me),{u_gamma_scale:d?Math.cos(be._pitch)*be.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},Es=(v,e,a,d,p,_,E,P,A,F,H,$,ne,de)=>c.e(Ts(v,e,a,d,p,_,E,P,A,F,H,!0,$,!0,de),{u_texsize_icon:ne,u_texture_icon:1}),ns=(v,e,a)=>({u_matrix:v,u_opacity:e,u_color:a}),No=(v,e,a,d,p,_)=>c.e(function(E,P,A,F){const H=A.imageManager.getPattern(E.from.toString()),$=A.imageManager.getPattern(E.to.toString()),{width:ne,height:de}=A.imageManager.getPixelSize(),me=Math.pow(2,F.tileID.overscaledZ),be=F.tileSize*Math.pow(2,A.transform.tileZoom)/me,Ie=be*(F.tileID.canonical.x+F.tileID.wrap*me),De=be*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[ne,de],u_mix:P.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/Wr(F,1,A.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,De>>16],u_pixel_coord_lower:[65535&Ie,65535&De]}}(d,_,a,p),{u_matrix:v,u_opacity:e}),Ta={fillExtrusion:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_lightpos:new c.aN(v,e.u_lightpos),u_lightintensity:new c.aI(v,e.u_lightintensity),u_lightcolor:new c.aN(v,e.u_lightcolor),u_vertical_gradient:new c.aI(v,e.u_vertical_gradient),u_opacity:new c.aI(v,e.u_opacity)}),fillExtrusionPattern:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_lightpos:new c.aN(v,e.u_lightpos),u_lightintensity:new c.aI(v,e.u_lightintensity),u_lightcolor:new c.aN(v,e.u_lightcolor),u_vertical_gradient:new c.aI(v,e.u_vertical_gradient),u_height_factor:new c.aI(v,e.u_height_factor),u_image:new c.aH(v,e.u_image),u_texsize:new c.aO(v,e.u_texsize),u_pixel_coord_upper:new c.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,e.u_pixel_coord_lower),u_scale:new c.aN(v,e.u_scale),u_fade:new c.aI(v,e.u_fade),u_opacity:new c.aI(v,e.u_opacity)}),fill:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix)}),fillPattern:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_image:new c.aH(v,e.u_image),u_texsize:new c.aO(v,e.u_texsize),u_pixel_coord_upper:new c.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,e.u_pixel_coord_lower),u_scale:new c.aN(v,e.u_scale),u_fade:new c.aI(v,e.u_fade)}),fillOutline:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_world:new c.aO(v,e.u_world)}),fillOutlinePattern:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_world:new c.aO(v,e.u_world),u_image:new c.aH(v,e.u_image),u_texsize:new c.aO(v,e.u_texsize),u_pixel_coord_upper:new c.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,e.u_pixel_coord_lower),u_scale:new c.aN(v,e.u_scale),u_fade:new c.aI(v,e.u_fade)}),circle:(v,e)=>({u_camera_to_center_distance:new c.aI(v,e.u_camera_to_center_distance),u_scale_with_map:new c.aH(v,e.u_scale_with_map),u_pitch_with_map:new c.aH(v,e.u_pitch_with_map),u_extrude_scale:new c.aO(v,e.u_extrude_scale),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_matrix:new c.aJ(v,e.u_matrix)}),collisionBox:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_pixel_extrude_scale:new c.aO(v,e.u_pixel_extrude_scale)}),collisionCircle:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_inv_matrix:new c.aJ(v,e.u_inv_matrix),u_camera_to_center_distance:new c.aI(v,e.u_camera_to_center_distance),u_viewport_size:new c.aO(v,e.u_viewport_size)}),debug:(v,e)=>({u_color:new c.aL(v,e.u_color),u_matrix:new c.aJ(v,e.u_matrix),u_overlay:new c.aH(v,e.u_overlay),u_overlay_scale:new c.aI(v,e.u_overlay_scale)}),clippingMask:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix)}),heatmap:(v,e)=>({u_extrude_scale:new c.aI(v,e.u_extrude_scale),u_intensity:new c.aI(v,e.u_intensity),u_matrix:new c.aJ(v,e.u_matrix)}),heatmapTexture:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_world:new c.aO(v,e.u_world),u_image:new c.aH(v,e.u_image),u_color_ramp:new c.aH(v,e.u_color_ramp),u_opacity:new c.aI(v,e.u_opacity)}),hillshade:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_image:new c.aH(v,e.u_image),u_latrange:new c.aO(v,e.u_latrange),u_light:new c.aO(v,e.u_light),u_shadow:new c.aL(v,e.u_shadow),u_highlight:new c.aL(v,e.u_highlight),u_accent:new c.aL(v,e.u_accent)}),hillshadePrepare:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_image:new c.aH(v,e.u_image),u_dimension:new c.aO(v,e.u_dimension),u_zoom:new c.aI(v,e.u_zoom),u_unpack:new c.aK(v,e.u_unpack)}),line:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_ratio:new c.aI(v,e.u_ratio),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_units_to_pixels:new c.aO(v,e.u_units_to_pixels)}),lineGradient:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_ratio:new c.aI(v,e.u_ratio),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_units_to_pixels:new c.aO(v,e.u_units_to_pixels),u_image:new c.aH(v,e.u_image),u_image_height:new c.aI(v,e.u_image_height)}),linePattern:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_texsize:new c.aO(v,e.u_texsize),u_ratio:new c.aI(v,e.u_ratio),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_image:new c.aH(v,e.u_image),u_units_to_pixels:new c.aO(v,e.u_units_to_pixels),u_scale:new c.aN(v,e.u_scale),u_fade:new c.aI(v,e.u_fade)}),lineSDF:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_ratio:new c.aI(v,e.u_ratio),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_units_to_pixels:new c.aO(v,e.u_units_to_pixels),u_patternscale_a:new c.aO(v,e.u_patternscale_a),u_patternscale_b:new c.aO(v,e.u_patternscale_b),u_sdfgamma:new c.aI(v,e.u_sdfgamma),u_image:new c.aH(v,e.u_image),u_tex_y_a:new c.aI(v,e.u_tex_y_a),u_tex_y_b:new c.aI(v,e.u_tex_y_b),u_mix:new c.aI(v,e.u_mix)}),raster:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_tl_parent:new c.aO(v,e.u_tl_parent),u_scale_parent:new c.aI(v,e.u_scale_parent),u_buffer_scale:new c.aI(v,e.u_buffer_scale),u_fade_t:new c.aI(v,e.u_fade_t),u_opacity:new c.aI(v,e.u_opacity),u_image0:new c.aH(v,e.u_image0),u_image1:new c.aH(v,e.u_image1),u_brightness_low:new c.aI(v,e.u_brightness_low),u_brightness_high:new c.aI(v,e.u_brightness_high),u_saturation_factor:new c.aI(v,e.u_saturation_factor),u_contrast_factor:new c.aI(v,e.u_contrast_factor),u_spin_weights:new c.aN(v,e.u_spin_weights)}),symbolIcon:(v,e)=>({u_is_size_zoom_constant:new c.aH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(v,e.u_is_size_feature_constant),u_size_t:new c.aI(v,e.u_size_t),u_size:new c.aI(v,e.u_size),u_camera_to_center_distance:new c.aI(v,e.u_camera_to_center_distance),u_pitch:new c.aI(v,e.u_pitch),u_rotate_symbol:new c.aH(v,e.u_rotate_symbol),u_aspect_ratio:new c.aI(v,e.u_aspect_ratio),u_fade_change:new c.aI(v,e.u_fade_change),u_matrix:new c.aJ(v,e.u_matrix),u_label_plane_matrix:new c.aJ(v,e.u_label_plane_matrix),u_coord_matrix:new c.aJ(v,e.u_coord_matrix),u_is_text:new c.aH(v,e.u_is_text),u_pitch_with_map:new c.aH(v,e.u_pitch_with_map),u_is_along_line:new c.aH(v,e.u_is_along_line),u_is_variable_anchor:new c.aH(v,e.u_is_variable_anchor),u_texsize:new c.aO(v,e.u_texsize),u_texture:new c.aH(v,e.u_texture),u_translation:new c.aO(v,e.u_translation),u_pitched_scale:new c.aI(v,e.u_pitched_scale)}),symbolSDF:(v,e)=>({u_is_size_zoom_constant:new c.aH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(v,e.u_is_size_feature_constant),u_size_t:new c.aI(v,e.u_size_t),u_size:new c.aI(v,e.u_size),u_camera_to_center_distance:new c.aI(v,e.u_camera_to_center_distance),u_pitch:new c.aI(v,e.u_pitch),u_rotate_symbol:new c.aH(v,e.u_rotate_symbol),u_aspect_ratio:new c.aI(v,e.u_aspect_ratio),u_fade_change:new c.aI(v,e.u_fade_change),u_matrix:new c.aJ(v,e.u_matrix),u_label_plane_matrix:new c.aJ(v,e.u_label_plane_matrix),u_coord_matrix:new c.aJ(v,e.u_coord_matrix),u_is_text:new c.aH(v,e.u_is_text),u_pitch_with_map:new c.aH(v,e.u_pitch_with_map),u_is_along_line:new c.aH(v,e.u_is_along_line),u_is_variable_anchor:new c.aH(v,e.u_is_variable_anchor),u_texsize:new c.aO(v,e.u_texsize),u_texture:new c.aH(v,e.u_texture),u_gamma_scale:new c.aI(v,e.u_gamma_scale),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_is_halo:new c.aH(v,e.u_is_halo),u_translation:new c.aO(v,e.u_translation),u_pitched_scale:new c.aI(v,e.u_pitched_scale)}),symbolTextAndIcon:(v,e)=>({u_is_size_zoom_constant:new c.aH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(v,e.u_is_size_feature_constant),u_size_t:new c.aI(v,e.u_size_t),u_size:new c.aI(v,e.u_size),u_camera_to_center_distance:new c.aI(v,e.u_camera_to_center_distance),u_pitch:new c.aI(v,e.u_pitch),u_rotate_symbol:new c.aH(v,e.u_rotate_symbol),u_aspect_ratio:new c.aI(v,e.u_aspect_ratio),u_fade_change:new c.aI(v,e.u_fade_change),u_matrix:new c.aJ(v,e.u_matrix),u_label_plane_matrix:new c.aJ(v,e.u_label_plane_matrix),u_coord_matrix:new c.aJ(v,e.u_coord_matrix),u_is_text:new c.aH(v,e.u_is_text),u_pitch_with_map:new c.aH(v,e.u_pitch_with_map),u_is_along_line:new c.aH(v,e.u_is_along_line),u_is_variable_anchor:new c.aH(v,e.u_is_variable_anchor),u_texsize:new c.aO(v,e.u_texsize),u_texsize_icon:new c.aO(v,e.u_texsize_icon),u_texture:new c.aH(v,e.u_texture),u_texture_icon:new c.aH(v,e.u_texture_icon),u_gamma_scale:new c.aI(v,e.u_gamma_scale),u_device_pixel_ratio:new c.aI(v,e.u_device_pixel_ratio),u_is_halo:new c.aH(v,e.u_is_halo),u_translation:new c.aO(v,e.u_translation),u_pitched_scale:new c.aI(v,e.u_pitched_scale)}),background:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_opacity:new c.aI(v,e.u_opacity),u_color:new c.aL(v,e.u_color)}),backgroundPattern:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_opacity:new c.aI(v,e.u_opacity),u_image:new c.aH(v,e.u_image),u_pattern_tl_a:new c.aO(v,e.u_pattern_tl_a),u_pattern_br_a:new c.aO(v,e.u_pattern_br_a),u_pattern_tl_b:new c.aO(v,e.u_pattern_tl_b),u_pattern_br_b:new c.aO(v,e.u_pattern_br_b),u_texsize:new c.aO(v,e.u_texsize),u_mix:new c.aI(v,e.u_mix),u_pattern_size_a:new c.aO(v,e.u_pattern_size_a),u_pattern_size_b:new c.aO(v,e.u_pattern_size_b),u_scale_a:new c.aI(v,e.u_scale_a),u_scale_b:new c.aI(v,e.u_scale_b),u_pixel_coord_upper:new c.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,e.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aI(v,e.u_tile_units_to_pixels)}),terrain:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_texture:new c.aH(v,e.u_texture),u_ele_delta:new c.aI(v,e.u_ele_delta),u_fog_matrix:new c.aJ(v,e.u_fog_matrix),u_fog_color:new c.aL(v,e.u_fog_color),u_fog_ground_blend:new c.aI(v,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.aI(v,e.u_fog_ground_blend_opacity),u_horizon_color:new c.aL(v,e.u_horizon_color),u_horizon_fog_blend:new c.aI(v,e.u_horizon_fog_blend)}),terrainDepth:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_ele_delta:new c.aI(v,e.u_ele_delta)}),terrainCoords:(v,e)=>({u_matrix:new c.aJ(v,e.u_matrix),u_texture:new c.aH(v,e.u_texture),u_terrain_coords_id:new c.aI(v,e.u_terrain_coords_id),u_ele_delta:new c.aI(v,e.u_ele_delta)}),sky:(v,e)=>({u_sky_color:new c.aL(v,e.u_sky_color),u_horizon_color:new c.aL(v,e.u_horizon_color),u_horizon:new c.aI(v,e.u_horizon),u_sky_horizon_blend:new c.aI(v,e.u_sky_horizon_blend)})};class ms{constructor(e,a,d){this.context=e;const p=e.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class uo{constructor(e,a,d,p){this.length=a.length,this.attributes=d,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=e;const _=e.gl;this.buffer=_.createBuffer(),e.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,a){for(let d=0;d<this.attributes.length;d++){const p=a.attributes[this.attributes[d].name];p!==void 0&&e.enableVertexAttribArray(p)}}setVertexAttribPointers(e,a,d){for(let p=0;p<this.attributes.length;p++){const _=this.attributes[p],E=a.attributes[_.name];E!==void 0&&e.vertexAttribPointer(E,_.components,e[jo[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ea=new WeakMap;function Hi(v){var e;if(Ea.has(v))return Ea.get(v);{const a=(e=v.getParameter(v.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Ea.set(v,a),a}}class un{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class co extends un{getDefault(){return c.aM.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class mc extends un{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Cs extends un{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class dl extends un{getDefault(){return[!0,!0,!0,!0]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Uo extends un{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class qi extends un{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class ho extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const a=this.current;(e.func!==a.func||e.ref!==a.ref||e.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Ca extends un{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Vo extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=e,this.dirty=!1}}class Ul extends un{getDefault(){return[0,1]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class fo extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=e,this.dirty=!1}}class qa extends un{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class is extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.BLEND):a.disable(a.BLEND),this.current=e,this.dirty=!1}}class Ho extends un{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Pu extends un{getDefault(){return c.aM.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Mu extends un{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class po extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=e,this.dirty=!1}}class gs extends un{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class mo extends un{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Au extends un{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Yc extends un{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Du extends un{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class fl extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class zu extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class pl extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class ml extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class go extends un{getDefault(){return null}set(e){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ia extends un{getDefault(){return null}set(e){var a;if(e===this.current&&!this.dirty)return;const d=this.gl;Hi(d)?d.bindVertexArray(e):(a=d.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Vl extends un{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class $o extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class gl extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class yl extends un{constructor(e,a){super(e),this.context=e,this.parent=a}getDefault(){return null}}class L extends yl{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class X extends yl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ce extends yl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Te{constructor(e,a,d,p,_){this.context=e,this.width=a,this.height=d;const E=e.gl,P=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new L(e,P),p)this.depthAttachment=_?new ce(e,P):new X(e,P);else if(_)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,a=this.colorAttachment.get();if(a&&e.deleteTexture(a),this.depthAttachment){const d=this.depthAttachment.get();d&&e.deleteRenderbuffer(d)}e.deleteFramebuffer(this.framebuffer)}}class tt{constructor(e,a,d){this.blendFunction=e,this.blendColor=a,this.mask=d}}tt.Replace=[1,0],tt.disabled=new tt(tt.Replace,c.aM.transparent,[!1,!1,!1,!1]),tt.unblended=new tt(tt.Replace,c.aM.transparent,[!0,!0,!0,!0]),tt.alphaBlended=new tt([1,771],c.aM.transparent,[!0,!0,!0,!0]);class ot{constructor(e){var a,d;if(this.gl=e,this.clearColor=new co(this),this.clearDepth=new mc(this),this.clearStencil=new Cs(this),this.colorMask=new dl(this),this.depthMask=new Uo(this),this.stencilMask=new qi(this),this.stencilFunc=new ho(this),this.stencilOp=new Ca(this),this.stencilTest=new Vo(this),this.depthRange=new Ul(this),this.depthTest=new fo(this),this.depthFunc=new qa(this),this.blend=new is(this),this.blendFunc=new Ho(this),this.blendColor=new Pu(this),this.blendEquation=new Mu(this),this.cullFace=new po(this),this.cullFaceSide=new gs(this),this.frontFace=new mo(this),this.program=new Au(this),this.activeTexture=new Yc(this),this.viewport=new Du(this),this.bindFramebuffer=new fl(this),this.bindRenderbuffer=new zu(this),this.bindTexture=new pl(this),this.bindVertexBuffer=new ml(this),this.bindElementBuffer=new go(this),this.bindVertexArray=new ia(this),this.pixelStoreUnpack=new Vl(this),this.pixelStoreUnpackPremultiplyAlpha=new $o(this),this.pixelStoreUnpackFlipY=new gl(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Hi(e)){this.HALF_FLOAT=e.HALF_FLOAT;const p=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=e.RGBA16F)!==null&&a!==void 0?a:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(d=e.RGB16F)!==null&&d!==void 0?d:p==null?void 0:p.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const p=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,a){return new ms(this,e,a)}createVertexBuffer(e,a,d){return new uo(this,e,a,d)}createRenderbuffer(e,a,d){const p=this.gl,_=p.createRenderbuffer();return this.bindRenderbuffer.set(_),p.renderbufferStorage(p.RENDERBUFFER,e,a,d),this.bindRenderbuffer.set(null),_}createFramebuffer(e,a,d,p){return new Te(this,e,a,d,p)}clear({color:e,depth:a,stencil:d}){const p=this.gl;let _=0;e&&(_|=p.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(_|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),d!==void 0&&(_|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),p.clear(_)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){c.aE(e.blendFunction,tt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Hi(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var a;return Hi(this.gl)?this.gl.deleteVertexArray(e):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class ct{constructor(e,a,d){this.func=e,this.mask=a,this.range=d}}ct.ReadOnly=!1,ct.ReadWrite=!0,ct.disabled=new ct(519,ct.ReadOnly,[0,1]);const Ut=7680;class sr{constructor(e,a,d,p,_,E){this.test=e,this.ref=a,this.mask=d,this.fail=p,this.depthFail=_,this.pass=E}}sr.disabled=new sr({func:519,mask:0},0,0,Ut,Ut,Ut);class dr{constructor(e,a,d){this.enable=e,this.mode=a,this.frontFace=d}}let Fr;function xn(v,e,a,d,p){const _=v.context,E=_.gl,P=v.useProgram("collisionBox"),A=[];let F=0,H=0;for(let De=0;De<d.length;De++){const Be=d[De],Ee=e.getTile(Be).getBucket(a);if(!Ee)continue;const We=p?Ee.textCollisionBox:Ee.iconCollisionBox,Ye=Ee.collisionCircleArray;if(Ye.length>0){const it=c.H();c.aQ(it,Ee.placementInvProjMatrix,v.transform.glCoordMatrix),c.aQ(it,it,Ee.placementViewportMatrix),A.push({circleArray:Ye,circleOffset:H,transform:Be.posMatrix,invTransform:it,coord:Be}),F+=Ye.length/4,H=F}We&&P.draw(_,E.LINES,ct.disabled,sr.disabled,v.colorModeForRenderPass(),dr.disabled,{u_matrix:Be.posMatrix,u_pixel_extrude_scale:[1/($=v.transform).width,1/$.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(Be),a.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,null,v.transform.zoom,null,null,We.collisionVertexBuffer)}var $;if(!p||!A.length)return;const ne=v.useProgram("collisionCircle"),de=new c.aR;de.resize(4*F),de._trim();let me=0;for(const De of A)for(let Be=0;Be<De.circleArray.length/4;Be++){const Ee=4*Be,We=De.circleArray[Ee+0],Ye=De.circleArray[Ee+1],it=De.circleArray[Ee+2],Et=De.circleArray[Ee+3];de.emplace(me++,We,Ye,it,Et,0),de.emplace(me++,We,Ye,it,Et,1),de.emplace(me++,We,Ye,it,Et,2),de.emplace(me++,We,Ye,it,Et,3)}(!Fr||Fr.length<2*F)&&(Fr=function(De){const Be=2*De,Ee=new c.aT;Ee.resize(Be),Ee._trim();for(let We=0;We<Be;We++){const Ye=6*We;Ee.uint16[Ye+0]=4*We+0,Ee.uint16[Ye+1]=4*We+1,Ee.uint16[Ye+2]=4*We+2,Ee.uint16[Ye+3]=4*We+2,Ee.uint16[Ye+4]=4*We+3,Ee.uint16[Ye+5]=4*We+0}return Ee}(F));const be=_.createIndexBuffer(Fr,!0),Ie=_.createVertexBuffer(de,c.aS.members,!0);for(const De of A){const Be=Ci(De.transform,De.invTransform,v.transform);ne.draw(_,E.TRIANGLES,ct.disabled,sr.disabled,v.colorModeForRenderPass(),dr.disabled,Be,v.style.map.terrain&&v.style.map.terrain.getTerrainData(De.coord),a.id,Ie,be,c.a0.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,v.transform.zoom,null,null,null)}Ie.destroy(),be.destroy()}dr.disabled=new dr(!1,1029,2305),dr.backCCW=new dr(!0,1029,2305);const Pi=c.an(new Float32Array(16));function ss(v,e,a,d,p,_){const{horizontalAlign:E,verticalAlign:P}=c.au(v);return new c.P((-(E-.5)*e/p+d[0])*_,(-(P-.5)*a/p+d[1])*_)}function Mi(v,e,a,d,p,_){const E=e.tileAnchorPoint.add(new c.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let P=d.mult(_);a||(P=P.rotate(-p));const A=E.add(P);return Ce(A.x,A.y,e.labelPlaneMatrix,e.getElevation).point}if(a){const P=pt(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(v),A=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return v.add(d.rotate(A))}return v.add(d)}function sa(v,e,a,d,p,_,E,P,A,F,H,$,ne,de){const me=v.text.placedSymbolArray,be=v.text.dynamicLayoutVertexArray,Ie=v.icon.dynamicLayoutVertexArray,De={};be.clear();for(let Be=0;Be<me.length;Be++){const Ee=me.get(Be),We=Ee.hidden||!Ee.crossTileID||v.allowVerticalPlacement&&!Ee.placedOrientation?null:d[Ee.crossTileID];if(We){const Ye=new c.P(Ee.anchorX,Ee.anchorY),it={getElevation:de,width:p.width,height:p.height,labelPlaneMatrix:_,pitchWithMap:a,projection:H,tileAnchorPoint:Ye,translation:$,unwrappedTileID:ne},Et=a?Ce(Ye.x,Ye.y,E,de):pt(Ye.x,Ye.y,it),Bt=ee(p.cameraToCenterDistance,Et.signedDistanceFromCamera);let $t=c.ai(v.textSizeData,A,Ee)*Bt/c.ap;a&&($t*=v.tilePixelRatio/P);const{width:er,height:Wt,anchor:Vt,textOffset:cr,textBoxScale:Nr}=We,Zt=ss(Vt,er,Wt,cr,Nr,$t),Xt=H.getPitchedTextCorrection(p,Ye.add(new c.P($[0],$[1])),ne),Br=Mi(Et.point,it,e,Zt,p.angle,Xt),Mn=v.allowVerticalPlacement&&Ee.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let qr=0;qr<Ee.numGlyphs;qr++)c.aj(be,Br,Mn);F&&Ee.associatedIconIndex>=0&&(De[Ee.associatedIconIndex]={shiftedAnchor:Br,angle:Mn})}else mr(Ee.numGlyphs,be)}if(F){Ie.clear();const Be=v.icon.placedSymbolArray;for(let Ee=0;Ee<Be.length;Ee++){const We=Be.get(Ee);if(We.hidden)mr(We.numGlyphs,Ie);else{const Ye=De[Ee];if(Ye)for(let it=0;it<We.numGlyphs;it++)c.aj(Ie,Ye.shiftedAnchor,Ye.angle);else mr(We.numGlyphs,Ie)}}v.icon.dynamicLayoutVertexBuffer.updateData(Ie)}v.text.dynamicLayoutVertexBuffer.updateData(be)}function as(v,e,a){return a.iconsInText&&e?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function aa(v,e,a,d,p,_,E,P,A,F,H,$){const ne=v.context,de=ne.gl,me=v.transform,be=fs(),Ie=P==="map",De=A==="map",Be=P!=="viewport"&&a.layout.get("symbol-placement")!=="point",Ee=Ie&&!De&&!Be,We=!De&&Be,Ye=!a.layout.get("symbol-sort-key").isConstant();let it=!1;const Et=v.depthModeForSublayer(0,ct.ReadOnly),Bt=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$t=[],er=be.getCircleRadiusCorrection(me);for(const Wt of d){const Vt=e.getTile(Wt),cr=Vt.getBucket(a);if(!cr)continue;const Nr=p?cr.text:cr.icon;if(!Nr||!Nr.segments.get().length||!Nr.hasVisibleVertices)continue;const Zt=Nr.programConfigurations.get(a.id),Xt=p||cr.sdfIcons,Br=p?cr.textSizeData:cr.iconSizeData,Mn=De||me.pitch!==0,qr=v.useProgram(as(Xt,p,cr),Zt),Jr=c.ag(Br,me.zoom),Rn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Wt);let $i,Ws,Ln,Bi,qn=[0,0],di=null;if(p)Ws=Vt.glyphAtlasTexture,Ln=de.LINEAR,$i=Vt.glyphAtlasTexture.size,cr.iconsInText&&(qn=Vt.imageAtlasTexture.size,di=Vt.imageAtlasTexture,Bi=Mn||v.options.rotating||v.options.zooming||Br.kind==="composite"||Br.kind==="camera"?de.LINEAR:de.NEAREST);else{const Qr=a.layout.get("icon-size").constantOr(0)!==1||cr.iconsNeedLinear;Ws=Vt.imageAtlasTexture,Ln=Xt||v.options.rotating||v.options.zooming||Qr||Mn?de.LINEAR:de.NEAREST,$i=Vt.imageAtlasTexture.size}const Ki=Wr(Vt,1,v.transform.zoom),Da=We?Wt.posMatrix:Pi,As=si(Da,De,Ie,v.transform,Ki),za=Hr(Da,De,Ie,v.transform,Ki),Ko=Hr(Wt.posMatrix,De,Ie,v.transform,Ki),Gs=be.translatePosition(v.transform,Vt,_,E),ha=Bt&&cr.hasTextData(),eo=a.layout.get("icon-text-fit")!=="none"&&ha&&cr.hasIconData();if(Be){const Qr=v.style.map.terrain?(Jo,La)=>v.style.map.terrain.getElevation(Wt,Jo,La):null,qs=a.layout.get("text-rotation-alignment")==="map";ue(cr,Wt.posMatrix,v,p,As,Ko,De,F,qs,be,Wt.toUnwrapped(),me.width,me.height,Gs,Qr)}const _s=Wt.posMatrix,Zs=p&&Bt||eo,Ra=Be||Zs?Pi:As,da=za,pi=Xt&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qn;Qn=Xt?cr.iconsInText?Es(Br.kind,Jr,Ee,De,Be,Zs,v,_s,Ra,da,Gs,$i,qn,er):Ts(Br.kind,Jr,Ee,De,Be,Zs,v,_s,Ra,da,Gs,p,$i,!0,er):na(Br.kind,Jr,Ee,De,Be,Zs,v,_s,Ra,da,Gs,p,$i,er);const Ji={program:qr,buffers:Nr,uniformValues:Qn,atlasTexture:Ws,atlasTextureIcon:di,atlasInterpolation:Ln,atlasInterpolationIcon:Bi,isSDF:Xt,hasHalo:pi};if(Ye&&cr.canOverlap){it=!0;const Qr=Nr.segments.get();for(const qs of Qr)$t.push({segments:new c.a0([qs]),sortKey:qs.sortKey,state:Ji,terrainData:Rn})}else $t.push({segments:Nr.segments,sortKey:0,state:Ji,terrainData:Rn})}it&&$t.sort((Wt,Vt)=>Wt.sortKey-Vt.sortKey);for(const Wt of $t){const Vt=Wt.state;if(ne.activeTexture.set(de.TEXTURE0),Vt.atlasTexture.bind(Vt.atlasInterpolation,de.CLAMP_TO_EDGE),Vt.atlasTextureIcon&&(ne.activeTexture.set(de.TEXTURE1),Vt.atlasTextureIcon&&Vt.atlasTextureIcon.bind(Vt.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),Vt.isSDF){const cr=Vt.uniformValues;Vt.hasHalo&&(cr.u_is_halo=1,Xc(Vt.buffers,Wt.segments,a,v,Vt.program,Et,H,$,cr,Wt.terrainData)),cr.u_is_halo=0}Xc(Vt.buffers,Wt.segments,a,v,Vt.program,Et,H,$,Vt.uniformValues,Wt.terrainData)}}function Xc(v,e,a,d,p,_,E,P,A,F){const H=d.context;p.draw(H,H.gl.TRIANGLES,_,E,P,dr.disabled,A,F,a.id,v.layoutVertexBuffer,v.indexBuffer,e,a.paint,d.transform.zoom,v.programConfigurations.get(a.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Kc(v,e,a,d){const p=v.context,_=p.gl,E=sr.disabled,P=new tt([_.ONE,_.ONE],c.aM.transparent,[!0,!0,!0,!0]),A=e.getBucket(a);if(!A)return;const F=d.key;let H=a.heatmapFbos.get(F);H||(H=Hl(p,e.tileSize,e.tileSize),a.heatmapFbos.set(F,H)),p.bindFramebuffer.set(H.framebuffer),p.viewport.set([0,0,e.tileSize,e.tileSize]),p.clear({color:c.aM.transparent});const $=A.programConfigurations.get(a.id),ne=v.useProgram("heatmap",$),de=v.style.map.terrain.getTerrainData(d);ne.draw(p,_.TRIANGLES,ct.disabled,E,P,dr.disabled,Un(d.posMatrix,e,v.transform.zoom,a.paint.get("heatmap-intensity")),de,a.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,a.paint,v.transform.zoom,$)}function _l(v,e,a){const d=v.context,p=d.gl;d.setColorMode(v.colorModeForRenderPass());const _=$l(d,e),E=a.key,P=e.heatmapFbos.get(E);P&&(d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,P.colorAttachment.get()),d.activeTexture.set(p.TEXTURE1),_.bind(p.LINEAR,p.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(d,p.TRIANGLES,ct.disabled,sr.disabled,v.colorModeForRenderPass(),dr.disabled,Us(v,e,0,1),null,e.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,e.paint,v.transform.zoom),P.destroy(),e.heatmapFbos.delete(E))}function Hl(v,e,a){var d,p;const _=v.gl,E=_.createTexture();_.bindTexture(_.TEXTURE_2D,E),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const P=(d=v.HALF_FLOAT)!==null&&d!==void 0?d:_.UNSIGNED_BYTE,A=(p=v.RGBA16F)!==null&&p!==void 0?p:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,A,e,a,0,_.RGBA,P,null);const F=v.createFramebuffer(e,a,!1,!1);return F.colorAttachment.set(E),F}function $l(v,e){return e.colorRampTexture||(e.colorRampTexture=new xt(v,e.colorRamp,v.gl.RGBA)),e.colorRampTexture}function Ya(v,e,a,d,p){if(!a||!d||!d.imageAtlas)return;const _=d.imageAtlas.patternPositions;let E=_[a.to.toString()],P=_[a.from.toString()];if(!E&&P&&(E=P),!P&&E&&(P=E),!E||!P){const A=p.getPaintProperty(e);E=_[A],P=_[A]}E&&P&&v.setConstantPatternPositions(E,P)}function yo(v,e,a,d,p,_,E){const P=v.context.gl,A="fill-pattern",F=a.paint.get(A),H=F&&F.constantOr(1),$=a.getCrossfadeParameters();let ne,de,me,be,Ie;E?(de=H&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=P.LINES):(de=H?"fillPattern":"fill",ne=P.TRIANGLES);const De=F.constantOr(null);for(const Be of d){const Ee=e.getTile(Be);if(H&&!Ee.patternsLoaded())continue;const We=Ee.getBucket(a);if(!We)continue;const Ye=We.programConfigurations.get(a.id),it=v.useProgram(de,Ye),Et=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Be);H&&(v.context.activeTexture.set(P.TEXTURE0),Ee.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Ye.updatePaintBuffers($)),Ya(Ye,A,De,Ee,a);const Bt=Et?Be:null,$t=v.translatePosMatrix(Bt?Bt.posMatrix:Be.posMatrix,Ee,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(E){be=We.indexBuffer2,Ie=We.segments2;const er=[P.drawingBufferWidth,P.drawingBufferHeight];me=de==="fillOutlinePattern"&&H?ta($t,v,$,Ee,er):rs($t,er)}else be=We.indexBuffer,Ie=We.segments,me=H?ps($t,v,$,Ee):Fi($t);it.draw(v.context,ne,p,v.stencilModeForClipping(Be),_,dr.disabled,me,Et,a.id,We.layoutVertexBuffer,be,Ie,a.paint,v.transform.zoom,Ye)}}function gc(v,e,a,d,p,_,E){const P=v.context,A=P.gl,F="fill-extrusion-pattern",H=a.paint.get(F),$=H.constantOr(1),ne=a.getCrossfadeParameters(),de=a.paint.get("fill-extrusion-opacity"),me=H.constantOr(null);for(const be of d){const Ie=e.getTile(be),De=Ie.getBucket(a);if(!De)continue;const Be=v.style.map.terrain&&v.style.map.terrain.getTerrainData(be),Ee=De.programConfigurations.get(a.id),We=v.useProgram($?"fillExtrusionPattern":"fillExtrusion",Ee);$&&(v.context.activeTexture.set(A.TEXTURE0),Ie.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ee.updatePaintBuffers(ne)),Ya(Ee,F,me,Ie,a);const Ye=v.translatePosMatrix(be.posMatrix,Ie,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),it=a.paint.get("fill-extrusion-vertical-gradient"),Et=$?vn(Ye,v,it,de,be,ne,Ie):Gr(Ye,v,it,de);We.draw(P,P.gl.TRIANGLES,p,_,E,dr.backCCW,Et,Be,a.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,a.paint,v.transform.zoom,Ee,v.style.map.terrain&&De.centroidVertexBuffer)}}function _o(v,e,a,d,p,_,E){const P=v.context,A=P.gl,F=a.fbo;if(!F)return;const H=v.useProgram("hillshade"),$=v.style.map.terrain&&v.style.map.terrain.getTerrainData(e);P.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,F.colorAttachment.get()),H.draw(P,A.TRIANGLES,p,_,E,dr.disabled,((ne,de,me,be)=>{const Ie=me.paint.get("hillshade-shadow-color"),De=me.paint.get("hillshade-highlight-color"),Be=me.paint.get("hillshade-accent-color");let Ee=me.paint.get("hillshade-illumination-direction")*(Math.PI/180);me.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ee-=ne.transform.angle);const We=!ne.options.moving;return{u_matrix:be?be.posMatrix:ne.transform.calculatePosMatrix(de.tileID.toUnwrapped(),We),u_image:0,u_latrange:Vs(0,de.tileID),u_light:[me.paint.get("hillshade-exaggeration"),Ee],u_shadow:Ie,u_highlight:De,u_accent:Be}})(v,a,d,$?e:null),$,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Wl(v,e,a,d,p,_){const E=v.context,P=E.gl,A=e.dem;if(A&&A.data){const F=A.dim,H=A.stride,$=A.getPixels();if(E.activeTexture.set(P.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||v.getTileTexture(H),e.demTexture){const de=e.demTexture;de.update($,{premultiply:!1}),de.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else e.demTexture=new xt(E,$,P.RGBA,{premultiply:!1}),e.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);E.activeTexture.set(P.TEXTURE0);let ne=e.fbo;if(!ne){const de=new xt(E,{width:F,height:F,data:null},P.RGBA);de.bind(P.LINEAR,P.CLAMP_TO_EDGE),ne=e.fbo=E.createFramebuffer(F,F,!0,!1),ne.colorAttachment.set(de.texture)}E.bindFramebuffer.set(ne.framebuffer),E.viewport.set([0,0,F,F]),v.useProgram("hillshadePrepare").draw(E,P.TRIANGLES,d,p,_,dr.disabled,((de,me)=>{const be=me.stride,Ie=c.H();return c.aP(Ie,0,c.X,-c.X,0,0,1),c.J(Ie,Ie,[0,-c.X,0]),{u_matrix:Ie,u_image:1,u_dimension:[be,be],u_zoom:de.overscaledZ,u_unpack:me.getUnpackVector()}})(e.tileID,A),null,a.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function Jc(v,e,a,d,p,_){const E=d.paint.get("raster-fade-duration");if(!_&&E>0){const P=U.now(),A=(P-v.timeAdded)/E,F=e?(P-e.timeAdded)/E:-1,H=a.getSource(),$=p.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),ne=!e||Math.abs(e.tileID.overscaledZ-$)>Math.abs(v.tileID.overscaledZ-$),de=ne&&v.refreshedUponExpiration?1:c.ac(ne?A:1-F,0,1);return v.refreshedUponExpiration&&A>=1&&(v.refreshedUponExpiration=!1),e?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}const Ru=new c.aM(1,0,0,1),hn=new c.aM(0,1,0,1),Lu=new c.aM(0,0,1,1),nd=new c.aM(1,0,1,1),Qc=new c.aM(0,1,1,1);function Gl(v,e,a,d){yc(v,0,e+a/2,v.transform.width,a,d)}function id(v,e,a,d){yc(v,e-a/2,0,a,v.transform.height,d)}function yc(v,e,a,d,p,_){const E=v.context,P=E.gl;P.enable(P.SCISSOR_TEST),P.scissor(e*v.pixelRatio,a*v.pixelRatio,d*v.pixelRatio,p*v.pixelRatio),E.clear({color:_}),P.disable(P.SCISSOR_TEST)}function sd(v,e,a){const d=v.context,p=d.gl,_=a.posMatrix,E=v.useProgram("debug"),P=ct.disabled,A=sr.disabled,F=v.colorModeForRenderPass(),H="$debug",$=v.style.map.terrain&&v.style.map.terrain.getTerrainData(a);d.activeTexture.set(p.TEXTURE0);const ne=e.getTileByID(a.key).latestRawTileData,de=Math.floor((ne&&ne.byteLength||0)/1024),me=e.getTile(a).tileSize,be=512/Math.min(me,512)*(a.overscaledZ/v.transform.zoom)*.5;let Ie=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(Ie+=` => ${a.overscaledZ}`),function(De,Be){De.initDebugOverlayCanvas();const Ee=De.debugOverlayCanvas,We=De.context.gl,Ye=De.debugOverlayCanvas.getContext("2d");Ye.clearRect(0,0,Ee.width,Ee.height),Ye.shadowColor="white",Ye.shadowBlur=2,Ye.lineWidth=1.5,Ye.strokeStyle="white",Ye.textBaseline="top",Ye.font="bold 36px Open Sans, sans-serif",Ye.fillText(Be,5,5),Ye.strokeText(Be,5,5),De.debugOverlayTexture.update(Ee),De.debugOverlayTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE)}(v,`${Ie} ${de}kB`),E.draw(d,p.TRIANGLES,P,A,tt.alphaBlended,dr.disabled,Ii(_,c.aM.transparent,be),null,H,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),E.draw(d,p.LINE_STRIP,P,A,F,dr.disabled,Ii(_,c.aM.red),$,H,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function ad(v,e,a){const d=v.context,p=d.gl,_=v.colorModeForRenderPass(),E=new ct(p.LEQUAL,ct.ReadWrite,v.depthRangeFor3D),P=v.useProgram("terrain"),A=e.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,v.width,v.height]);for(const F of a){const H=v.renderToTexture.getTexture(F),$=e.getTerrainData(F.tileID);d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,H.texture);const ne=v.transform.calculatePosMatrix(F.tileID.toUnwrapped()),de=e.getMeshFrameDelta(v.transform.zoom),me=v.transform.calculateFogMatrix(F.tileID.toUnwrapped()),be=kt(ne,de,me,v.style.sky,v.transform.pitch);P.draw(d,p.TRIANGLES,E,sr.disabled,_,dr.backCCW,be,$,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class Is{constructor(e,a,d){this.vertexBuffer=e,this.indexBuffer=a,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Wo{constructor(e,a){this.context=new ot(e),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=kr.maxUnderzooming+kr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ea}resize(e,a,d){if(this.width=Math.floor(e*d),this.height=Math.floor(a*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const e=this.context,a=new c.aX;a.emplaceBack(0,0),a.emplaceBack(c.X,0),a.emplaceBack(0,c.X),a.emplaceBack(c.X,c.X),this.tileExtentBuffer=e.createVertexBuffer(a,he.members),this.tileExtentSegments=c.a0.simpleSegment(0,0,4,2);const d=new c.aX;d.emplaceBack(0,0),d.emplaceBack(c.X,0),d.emplaceBack(0,c.X),d.emplaceBack(c.X,c.X),this.debugBuffer=e.createVertexBuffer(d,he.members),this.debugSegments=c.a0.simpleSegment(0,0,4,5);const p=new c.$;p.emplaceBack(0,0,0,0),p.emplaceBack(c.X,0,c.X,0),p.emplaceBack(0,c.X,0,c.X),p.emplaceBack(c.X,c.X,c.X,c.X),this.rasterBoundsBuffer=e.createVertexBuffer(p,nt.members),this.rasterBoundsSegments=c.a0.simpleSegment(0,0,4,2);const _=new c.aX;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(_,he.members),this.viewportSegments=c.a0.simpleSegment(0,0,4,2);const E=new c.aZ;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(E);const P=new c.aY;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(P);const A=this.context.gl;this.stencilClearMode=new sr({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const e=this.context,a=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.H();c.aP(d,0,this.width,this.height,0,0,1),c.K(d,d,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,a.TRIANGLES,ct.disabled,this.stencilClearMode,tt.disabled,dr.disabled,Gn(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,a){if(this.currentStencilSource===e.source||!e.isTileClipped()||!a||!a.length)return;this.currentStencilSource=e.source;const d=this.context,p=d.gl;this.nextStencilID+a.length>256&&this.clearStencil(),d.setColorMode(tt.disabled),d.setDepthMode(ct.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of a){const P=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);_.draw(d,p.TRIANGLES,ct.disabled,new sr({func:p.ALWAYS,mask:0},P,255,p.KEEP,p.KEEP,p.REPLACE),tt.disabled,dr.disabled,Gn(E.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,a=this.context.gl;return new sr({func:a.NOTEQUAL,mask:255},e,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(e){const a=this.context.gl;return new sr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(e){const a=this.context.gl,d=e.sort((E,P)=>P.overscaledZ-E.overscaledZ),p=d[d.length-1].overscaledZ,_=d[0].overscaledZ-p+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const E={};for(let P=0;P<_;P++)E[P+p]=new sr({func:a.GEQUAL,mask:255},P+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=_,[E,d]}return[{[p]:sr.disabled},d]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new tt([e.CONSTANT_COLOR,e.ONE],new c.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?tt.unblended:tt.alphaBlended}depthModeForSublayer(e,a,d){if(!this.opaquePassEnabledForLayer())return ct.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ct(d||this.context.gl.LEQUAL,a,[p,p])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,a){this.style=e,this.options=a,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();const d=this.style._order,p=this.style.sourceCaches,_={},E={},P={};for(const A in p){const F=p[A];F.used&&F.prepare(this.context),_[A]=F.getVisibleCoordinates(),E[A]=_[A].slice().reverse(),P[A]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<d.length;A++)if(this.style._layers[d[A]].is3D()){this.opaquePassCutoff=A;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const A of d){const F=this.style._layers[A];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const H=E[F.source];(F.type==="custom"||H.length)&&this.renderLayer(this,p[F.source],F,H)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?c.aM.black:c.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(A,F){const H=A.context,$=H.gl,ne=((De,Be,Ee)=>({u_sky_color:De.properties.get("sky-color"),u_horizon_color:De.properties.get("horizon-color"),u_horizon:(Be.height/2+Be.getHorizon())*Ee,u_sky_horizon_blend:De.properties.get("sky-horizon-blend")*Be.height/2*Ee}))(F,A.style.map.transform,A.pixelRatio),de=new ct($.LEQUAL,ct.ReadWrite,[0,1]),me=sr.disabled,be=A.colorModeForRenderPass(),Ie=A.useProgram("sky");if(!F.mesh){const De=new c.aX;De.emplaceBack(-1,-1),De.emplaceBack(1,-1),De.emplaceBack(1,1),De.emplaceBack(-1,1);const Be=new c.aY;Be.emplaceBack(0,1,2),Be.emplaceBack(0,2,3),F.mesh=new Is(H.createVertexBuffer(De,he.members),H.createIndexBuffer(Be),c.a0.simpleSegment(0,0,De.length,Be.length))}Ie.draw(H,$.TRIANGLES,de,me,be,dr.disabled,ne,void 0,"sky",F.mesh.vertexBuffer,F.mesh.indexBuffer,F.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const A=this.style._layers[d[this.currentLayer]],F=p[A.source],H=_[A.source];this._renderTileClippingMasks(A,H),this.renderLayer(this,F,A,H)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const A=this.style._layers[d[this.currentLayer]],F=p[A.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(A))continue;const H=(A.type==="symbol"?P:E)[A.source];this._renderTileClippingMasks(A,_[A.source]),this.renderLayer(this,F,A,H)}if(this.options.showTileBoundaries){const A=function(F,H){let $=null;const ne=Object.values(F._layers).flatMap(Ie=>Ie.source&&!Ie.isHidden(H)?[F.sourceCaches[Ie.source]]:[]),de=ne.filter(Ie=>Ie.getSource().type==="vector"),me=ne.filter(Ie=>Ie.getSource().type!=="vector"),be=Ie=>{(!$||$.getSource().maxzoom<Ie.getSource().maxzoom)&&($=Ie)};return de.forEach(Ie=>be(Ie)),$||me.forEach(Ie=>be(Ie)),$}(this.style,this.transform.zoom);A&&function(F,H,$){for(let ne=0;ne<$.length;ne++)sd(F,H,$[ne])}(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){const F=A.transform.padding;Gl(A,A.transform.height-(F.top||0),3,Ru),Gl(A,F.bottom||0,3,hn),id(A,F.left||0,3,Lu),id(A,A.transform.width-(F.right||0),3,nd);const H=A.transform.centerPoint;(function($,ne,de,me){yc($,ne-1,de-10,2,20,me),yc($,ne-10,de-1,20,2,me)})(A,H.x,A.transform.height-H.y,Qc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=e?!c.a_(a,d):!c.a$(a,d)),p||(p=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),p&&(c.b0(a,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,E){const P=_.context,A=P.gl,F=tt.unblended,H=new ct(A.LEQUAL,ct.ReadWrite,[0,1]),$=E.getTerrainMesh(),ne=E.sourceCache.getRenderableTiles(),de=_.useProgram("terrainDepth");P.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),P.clear({color:c.aM.transparent,depth:1});for(const me of ne){const be=E.getTerrainData(me.tileID),Ie={u_matrix:_.transform.calculatePosMatrix(me.tileID.toUnwrapped()),u_ele_delta:E.getMeshFrameDelta(_.transform.zoom)};de.draw(P,A.TRIANGLES,H,sr.disabled,F,dr.backCCW,Ie,be,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,E){const P=_.context,A=P.gl,F=tt.unblended,H=new ct(A.LEQUAL,ct.ReadWrite,[0,1]),$=E.getTerrainMesh(),ne=E.getCoordsTexture(),de=E.sourceCache.getRenderableTiles(),me=_.useProgram("terrainCoords");P.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),P.clear({color:c.aM.transparent,depth:1}),E.coordsIndex=[];for(const be of de){const Ie=E.getTerrainData(be.tileID);P.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,ne.texture);const De={u_matrix:_.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(_.transform.zoom)};me.draw(P,A.TRIANGLES,H,sr.disabled,F,dr.backCCW,De,Ie,"terrain",$.vertexBuffer,$.indexBuffer,$.segments),E.coordsIndex.push(be.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(e,a,d,p){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(p||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(_,E,P,A,F){if(_.renderPass!=="translucent")return;const H=sr.disabled,$=_.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ne,de,me,be,Ie,De,Be,Ee,We){const Ye=de.transform,it=fs(),Et=Ie==="map",Bt=De==="map";for(const $t of ne){const er=be.getTile($t),Wt=er.getBucket(me);if(!Wt||!Wt.text||!Wt.text.segments.get().length)continue;const Vt=c.ag(Wt.textSizeData,Ye.zoom),cr=Wr(er,1,de.transform.zoom),Nr=si($t.posMatrix,Bt,Et,de.transform,cr),Zt=me.layout.get("icon-text-fit")!=="none"&&Wt.hasIconData();if(Vt){const Xt=Math.pow(2,Ye.zoom-er.tileID.overscaledZ),Br=de.style.map.terrain?(qr,Jr)=>de.style.map.terrain.getElevation($t,qr,Jr):null,Mn=it.translatePosition(Ye,er,Be,Ee);sa(Wt,Et,Bt,We,Ye,Nr,$t.posMatrix,Xt,Vt,Zt,it,Mn,$t.toUnwrapped(),Br)}}}(A,_,P,E,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),F),P.paint.get("icon-opacity").constantOr(1)!==0&&aa(_,E,P,A,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),H,$),P.paint.get("text-opacity").constantOr(1)!==0&&aa(_,E,P,A,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),H,$),E.map.showCollisionBoxes&&(xn(_,E,P,A,!0),xn(_,E,P,A,!1))})(e,a,d,p,this.style.placement.variableOffsets);break;case"circle":(function(_,E,P,A){if(_.renderPass!=="translucent")return;const F=P.paint.get("circle-opacity"),H=P.paint.get("circle-stroke-width"),$=P.paint.get("circle-stroke-opacity"),ne=!P.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(H.constantOr(1)===0||$.constantOr(1)===0))return;const de=_.context,me=de.gl,be=_.depthModeForSublayer(0,ct.ReadOnly),Ie=sr.disabled,De=_.colorModeForRenderPass(),Be=[];for(let Ee=0;Ee<A.length;Ee++){const We=A[Ee],Ye=E.getTile(We),it=Ye.getBucket(P);if(!it)continue;const Et=it.programConfigurations.get(P.id),Bt=_.useProgram("circle",Et),$t=it.layoutVertexBuffer,er=it.indexBuffer,Wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(We),Vt={programConfiguration:Et,program:Bt,layoutVertexBuffer:$t,indexBuffer:er,uniformValues:ks(_,We,Ye,P),terrainData:Wt};if(ne){const cr=it.segments.get();for(const Nr of cr)Be.push({segments:new c.a0([Nr]),sortKey:Nr.sortKey,state:Vt})}else Be.push({segments:it.segments,sortKey:0,state:Vt})}ne&&Be.sort((Ee,We)=>Ee.sortKey-We.sortKey);for(const Ee of Be){const{programConfiguration:We,program:Ye,layoutVertexBuffer:it,indexBuffer:Et,uniformValues:Bt,terrainData:$t}=Ee.state;Ye.draw(de,me.TRIANGLES,be,Ie,De,dr.disabled,Bt,$t,P.id,it,Et,Ee.segments,P.paint,_.transform.zoom,We)}})(e,a,d,p);break;case"heatmap":(function(_,E,P,A){if(P.paint.get("heatmap-opacity")===0)return;const F=_.context;if(_.style.map.terrain){for(const H of A){const $=E.getTile(H);E.hasRenderableParent(H)||(_.renderPass==="offscreen"?Kc(_,$,P,H):_.renderPass==="translucent"&&_l(_,P,H))}F.viewport.set([0,0,_.width,_.height])}else _.renderPass==="offscreen"?function(H,$,ne,de){const me=H.context,be=me.gl,Ie=sr.disabled,De=new tt([be.ONE,be.ONE],c.aM.transparent,[!0,!0,!0,!0]);(function(Be,Ee,We){const Ye=Be.gl;Be.activeTexture.set(Ye.TEXTURE1),Be.viewport.set([0,0,Ee.width/4,Ee.height/4]);let it=We.heatmapFbos.get(c.aU);it?(Ye.bindTexture(Ye.TEXTURE_2D,it.colorAttachment.get()),Be.bindFramebuffer.set(it.framebuffer)):(it=Hl(Be,Ee.width/4,Ee.height/4),We.heatmapFbos.set(c.aU,it))})(me,H,ne),me.clear({color:c.aM.transparent});for(let Be=0;Be<de.length;Be++){const Ee=de[Be];if($.hasRenderableParent(Ee))continue;const We=$.getTile(Ee),Ye=We.getBucket(ne);if(!Ye)continue;const it=Ye.programConfigurations.get(ne.id),Et=H.useProgram("heatmap",it),{zoom:Bt}=H.transform;Et.draw(me,be.TRIANGLES,ct.disabled,Ie,De,dr.disabled,Un(Ee.posMatrix,We,Bt,ne.paint.get("heatmap-intensity")),null,ne.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,ne.paint,H.transform.zoom,it)}me.viewport.set([0,0,H.width,H.height])}(_,E,P,A):_.renderPass==="translucent"&&function(H,$){const ne=H.context,de=ne.gl;ne.setColorMode(H.colorModeForRenderPass());const me=$.heatmapFbos.get(c.aU);me&&(ne.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,me.colorAttachment.get()),ne.activeTexture.set(de.TEXTURE1),$l(ne,$).bind(de.LINEAR,de.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(ne,de.TRIANGLES,ct.disabled,sr.disabled,H.colorModeForRenderPass(),dr.disabled,Us(H,$,0,1),null,$.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,$.paint,H.transform.zoom))}(_,P)})(e,a,d,p);break;case"line":(function(_,E,P,A){if(_.renderPass!=="translucent")return;const F=P.paint.get("line-opacity"),H=P.paint.get("line-width");if(F.constantOr(1)===0||H.constantOr(1)===0)return;const $=_.depthModeForSublayer(0,ct.ReadOnly),ne=_.colorModeForRenderPass(),de=P.paint.get("line-dasharray"),me=P.paint.get("line-pattern"),be=me.constantOr(1),Ie=P.paint.get("line-gradient"),De=P.getCrossfadeParameters(),Be=be?"linePattern":de?"lineSDF":Ie?"lineGradient":"line",Ee=_.context,We=Ee.gl;let Ye=!0;for(const it of A){const Et=E.getTile(it);if(be&&!Et.patternsLoaded())continue;const Bt=Et.getBucket(P);if(!Bt)continue;const $t=Bt.programConfigurations.get(P.id),er=_.context.program.get(),Wt=_.useProgram(Be,$t),Vt=Ye||Wt.program!==er,cr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(it),Nr=me.constantOr(null);if(Nr&&Et.imageAtlas){const Br=Et.imageAtlas,Mn=Br.patternPositions[Nr.to.toString()],qr=Br.patternPositions[Nr.from.toString()];Mn&&qr&&$t.setConstantPatternPositions(Mn,qr)}const Zt=cr?it:null,Xt=be?ra(_,Et,P,De,Zt):de?qc(_,Et,P,de,De,Zt):Ie?Iu(_,Et,P,Bt.lineClipsArray.length,Zt):jl(_,Et,P,Zt);if(be)Ee.activeTexture.set(We.TEXTURE0),Et.imageAtlasTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE),$t.updatePaintBuffers(De);else if(de&&(Vt||_.lineAtlas.dirty))Ee.activeTexture.set(We.TEXTURE0),_.lineAtlas.bind(Ee);else if(Ie){const Br=Bt.gradients[P.id];let Mn=Br.texture;if(P.gradientVersion!==Br.version){let qr=256;if(P.stepInterpolant){const Jr=E.getSource().maxzoom,Rn=it.canonical.z===Jr?Math.ceil(1<<_.transform.maxZoom-it.canonical.z):1;qr=c.ac(c.aV(Bt.maxLineLength/c.X*1024*Rn),256,Ee.maxTextureSize)}Br.gradient=c.aW({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:qr,image:Br.gradient||void 0,clips:Bt.lineClipsArray}),Br.texture?Br.texture.update(Br.gradient):Br.texture=new xt(Ee,Br.gradient,We.RGBA),Br.version=P.gradientVersion,Mn=Br.texture}Ee.activeTexture.set(We.TEXTURE0),Mn.bind(P.stepInterpolant?We.NEAREST:We.LINEAR,We.CLAMP_TO_EDGE)}Wt.draw(Ee,We.TRIANGLES,$,_.stencilModeForClipping(it),ne,dr.disabled,Xt,cr,P.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,P.paint,_.transform.zoom,$t,Bt.layoutVertexBuffer2),Ye=!1}})(e,a,d,p);break;case"fill":(function(_,E,P,A){const F=P.paint.get("fill-color"),H=P.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const $=_.colorModeForRenderPass(),ne=P.paint.get("fill-pattern"),de=_.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&F.constantOr(c.aM.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===de){const me=_.depthModeForSublayer(1,_.renderPass==="opaque"?ct.ReadWrite:ct.ReadOnly);yo(_,E,P,A,me,$,!1)}if(_.renderPass==="translucent"&&P.paint.get("fill-antialias")){const me=_.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,ct.ReadOnly);yo(_,E,P,A,me,$,!0)}})(e,a,d,p);break;case"fill-extrusion":(function(_,E,P,A){const F=P.paint.get("fill-extrusion-opacity");if(F!==0&&_.renderPass==="translucent"){const H=new ct(_.context.gl.LEQUAL,ct.ReadWrite,_.depthRangeFor3D);if(F!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))gc(_,E,P,A,H,sr.disabled,tt.disabled),gc(_,E,P,A,H,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const $=_.colorModeForRenderPass();gc(_,E,P,A,H,sr.disabled,$)}}})(e,a,d,p);break;case"hillshade":(function(_,E,P,A){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const F=_.context,H=_.depthModeForSublayer(0,ct.ReadOnly),$=_.colorModeForRenderPass(),[ne,de]=_.renderPass==="translucent"?_.stencilConfigForOverlap(A):[{},A];for(const me of de){const be=E.getTile(me);be.needsHillshadePrepare!==void 0&&be.needsHillshadePrepare&&_.renderPass==="offscreen"?Wl(_,be,P,H,sr.disabled,$):_.renderPass==="translucent"&&_o(_,me,be,P,H,ne[me.overscaledZ],$)}F.viewport.set([0,0,_.width,_.height])})(e,a,d,p);break;case"raster":(function(_,E,P,A){if(_.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!A.length)return;const F=_.context,H=F.gl,$=E.getSource(),ne=_.useProgram("raster"),de=_.colorModeForRenderPass(),[me,be]=$ instanceof Dt?[{},A]:_.stencilConfigForOverlap(A),Ie=be[be.length-1].overscaledZ,De=!_.options.moving;for(const Be of be){const Ee=_.depthModeForSublayer(Be.overscaledZ-Ie,P.paint.get("raster-opacity")===1?ct.ReadWrite:ct.ReadOnly,H.LESS),We=E.getTile(Be);We.registerFadeDuration(P.paint.get("raster-fade-duration"));const Ye=E.findLoadedParent(Be,0),it=E.findLoadedSibling(Be),Et=Jc(We,Ye||it||null,E,P,_.transform,_.style.map.terrain);let Bt,$t;const er=P.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;F.activeTexture.set(H.TEXTURE0),We.texture.bind(er,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(H.TEXTURE1),Ye?(Ye.texture.bind(er,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Bt=Math.pow(2,Ye.tileID.overscaledZ-We.tileID.overscaledZ),$t=[We.tileID.canonical.x*Bt%1,We.tileID.canonical.y*Bt%1]):We.texture.bind(er,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),We.texture.useMipmap&&F.extTextureFilterAnisotropic&&_.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const Wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Be),Vt=Wt?Be:null,cr=Vt?Vt.posMatrix:_.transform.calculatePosMatrix(Be.toUnwrapped(),De),Nr=hl(cr,$t||[0,0],Bt||1,Et,P);$ instanceof Dt?ne.draw(F,H.TRIANGLES,Ee,sr.disabled,de,dr.disabled,Nr,Wt,P.id,$.boundsBuffer,_.quadTriangleIndexBuffer,$.boundsSegments):ne.draw(F,H.TRIANGLES,Ee,me[Be.overscaledZ],de,dr.disabled,Nr,Wt,P.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(e,a,d,p);break;case"background":(function(_,E,P,A){const F=P.paint.get("background-color"),H=P.paint.get("background-opacity");if(H===0)return;const $=_.context,ne=$.gl,de=_.transform,me=de.tileSize,be=P.paint.get("background-pattern");if(_.isPatternMissing(be))return;const Ie=!be&&F.a===1&&H===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ie)return;const De=sr.disabled,Be=_.depthModeForSublayer(0,Ie==="opaque"?ct.ReadWrite:ct.ReadOnly),Ee=_.colorModeForRenderPass(),We=_.useProgram(be?"backgroundPattern":"background"),Ye=A||de.coveringTiles({tileSize:me,terrain:_.style.map.terrain});be&&($.activeTexture.set(ne.TEXTURE0),_.imageManager.bind(_.context));const it=P.getCrossfadeParameters();for(const Et of Ye){const Bt=A?Et.posMatrix:_.transform.calculatePosMatrix(Et.toUnwrapped()),$t=be?No(Bt,H,_,be,{tileID:Et,tileSize:me},it):ns(Bt,H,F),er=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Et);We.draw($,ne.TRIANGLES,Be,De,Ee,dr.disabled,$t,er,P.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(e,0,d,p);break;case"custom":(function(_,E,P){const A=_.context,F=P.implementation;if(_.renderPass==="offscreen"){const H=F.prerender;H&&(_.setCustomLayerDefaults(),A.setColorMode(_.colorModeForRenderPass()),H.call(F,A.gl,_.transform.customLayerMatrix()),A.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),A.setColorMode(_.colorModeForRenderPass()),A.setStencilMode(sr.disabled);const H=F.renderingMode==="3d"?new ct(_.context.gl.LEQUAL,ct.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,ct.ReadOnly);A.setDepthMode(H),F.render(A.gl,_.transform.customLayerMatrix(),{farZ:_.transform.farZ,nearZ:_.transform.nearZ,fov:_.transform._fov,modelViewProjectionMatrix:_.transform.modelViewProjectionMatrix,projectionMatrix:_.transform.projectionMatrix}),A.setDirty(),_.setBaseState(),A.bindFramebuffer.set(null)}})(e,0,d)}}translatePosMatrix(e,a,d,p,_){if(!d[0]&&!d[1])return e;const E=_?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(E){const F=Math.sin(E),H=Math.cos(E);d=[d[0]*H-d[1]*F,d[0]*F+d[1]*H]}const P=[_?d[0]:Wr(a,d[0],this.transform.zoom),_?d[1]:Wr(a,d[1],this.transform.zoom),0],A=new Float32Array(16);return c.J(A,e,P),A}saveTileTexture(e){const a=this._tileTextures[e.size[0]];a?a.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const a=this._tileTextures[e];return a&&a.length>0?a.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const a=this.imageManager.getPattern(e.from.toString()),d=this.imageManager.getPattern(e.to.toString());return!a||!d}useProgram(e,a){this.cache=this.cache||{};const d=e+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Qt(this.context,ke[e],a,Ta[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new xt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:a}=this.context.gl;return this.width!==e||this.height!==a}}class vl{constructor(e,a){this.points=e,this.planes=a}static fromInvProjectionMatrix(e,a,d){const p=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const A=1/(P=c.af([],P,e))[3]/a*p;return c.b1(P,P,[A,A,1/P[3],A])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const A=function(ne,de){var me=de[0],be=de[1],Ie=de[2],De=me*me+be*be+Ie*Ie;return De>0&&(De=1/Math.sqrt(De)),ne[0]=de[0]*De,ne[1]=de[1]*De,ne[2]=de[2]*De,ne}([],function(ne,de,me){var be=de[0],Ie=de[1],De=de[2],Be=me[0],Ee=me[1],We=me[2];return ne[0]=Ie*We-De*Ee,ne[1]=De*Be-be*We,ne[2]=be*Ee-Ie*Be,ne}([],je([],_[P[0]],_[P[1]]),je([],_[P[2]],_[P[1]]))),F=-((H=A)[0]*($=_[P[1]])[0]+H[1]*$[1]+H[2]*$[2]);var H,$;return A.concat(F)});return new vl(_,E)}}class xl{constructor(e,a){this.min=e,this.max=a,this.center=function(d,p,_){return d[0]=.5*p[0],d[1]=.5*p[1],d[2]=.5*p[2],d}([],function(d,p,_){return d[0]=p[0]+_[0],d[1]=p[1]+_[1],d[2]=p[2]+_[2],d}([],this.min,this.max))}quadrant(e){const a=[e%2==0,e<2],d=ve(this.min),p=ve(this.max);for(let _=0;_<a.length;_++)d[_]=a[_]?this.min[_]:this.center[_],p[_]=a[_]?this.center[_]:this.max[_];return p[2]=this.max[2],new xl(d,p)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let p=0;p<e.planes.length;p++){const _=e.planes[p];let E=0;for(let P=0;P<a.length;P++)c.b2(_,a[P])>=0&&E++;if(E===0)return 0;E!==a.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let _=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let P=0;P<e.points.length;P++){const A=e.points[P][p]-this.min[p];_=Math.min(_,A),E=Math.max(E,A)}if(E<0||_>this.max[p]-this.min[p])return 0}return 1}}class wl{constructor(e=0,a=0,d=0,p=0){if(isNaN(e)||e<0||isNaN(a)||a<0||isNaN(d)||d<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=a,this.left=d,this.right=p}interpolate(e,a,d){return a.top!=null&&e.top!=null&&(this.top=c.y.number(e.top,a.top,d)),a.bottom!=null&&e.bottom!=null&&(this.bottom=c.y.number(e.bottom,a.bottom,d)),a.left!=null&&e.left!=null&&(this.left=c.y.number(e.left,a.left,d)),a.right!=null&&e.right!=null&&(this.right=c.y.number(e.right,a.right,d)),this}getCenter(e,a){const d=c.ac((this.left+e-this.right)/2,0,e),p=c.ac((this.top+a-this.bottom)/2,0,a);return new c.P(d,p)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new wl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const _c=85.051129;class Go{constructor(e,a,d,p,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=e||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=p??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Go(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const a=-c.b3(e,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var d=new c.A(4);return c.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,p,_){var E=p[0],P=p[1],A=p[2],F=p[3],H=Math.sin(_),$=Math.cos(_);d[0]=E*$+A*H,d[1]=P*$+F*H,d[2]=E*-H+A*$,d[3]=P*-H+F*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const a=c.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const a=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,a,d){this._unmodified=!1,this._edgeInsets.interpolate(e,a,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const a=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(e){const a=[new c.b4(0,e)];if(this._renderWorldCopies){const d=this.pointCoordinate(new c.P(0,0)),p=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),E=this.pointCoordinate(new c.P(0,this.height)),P=Math.floor(Math.min(d.x,p.x,_.x,E.x)),A=Math.floor(Math.max(d.x,p.x,_.x,E.x)),F=1;for(let H=P-F;H<=A+F;H++)H!==0&&a.push(new c.b4(H,e))}return a}coveringTiles(e){var a,d;let p=this.coveringZoomLevel(e);const _=p;if(e.minzoom!==void 0&&p<e.minzoom)return[];e.maxzoom!==void 0&&p>e.maxzoom&&(p=e.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),P=c.Z.fromLngLat(this.center),A=Math.pow(2,p),F=[A*E.x,A*E.y,0],H=[A*P.x,A*P.y,0],$=vl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,p);let ne=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=p);const de=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,me=Ee=>({aabb:new xl([Ee*A,0,0],[(Ee+1)*A,A,0]),zoom:0,x:0,y:0,wrap:Ee,fullyVisible:!1}),be=[],Ie=[],De=p,Be=e.reparseOverscaled?_:p;if(this._renderWorldCopies)for(let Ee=1;Ee<=3;Ee++)be.push(me(-Ee)),be.push(me(Ee));for(be.push(me(0));be.length>0;){const Ee=be.pop(),We=Ee.x,Ye=Ee.y;let it=Ee.fullyVisible;if(!it){const Wt=Ee.aabb.intersects($);if(Wt===0)continue;it=Wt===2}const Et=e.terrain?F:H,Bt=Ee.aabb.distanceX(Et),$t=Ee.aabb.distanceY(Et),er=Math.max(Math.abs(Bt),Math.abs($t));if(Ee.zoom===De||er>de+(1<<De-Ee.zoom)-2&&Ee.zoom>=ne){const Wt=De-Ee.zoom,Vt=F[0]-.5-(We<<Wt),cr=F[1]-.5-(Ye<<Wt);Ie.push({tileID:new c.S(Ee.zoom===De?Be:Ee.zoom,Ee.wrap,Ee.zoom,We,Ye),distanceSq:St([H[0]-.5-We,H[1]-.5-Ye]),tileDistanceToCamera:Math.sqrt(Vt*Vt+cr*cr)})}else for(let Wt=0;Wt<4;Wt++){const Vt=(We<<1)+Wt%2,cr=(Ye<<1)+(Wt>>1),Nr=Ee.zoom+1;let Zt=Ee.aabb.quadrant(Wt);if(e.terrain){const Xt=new c.S(Nr,Ee.wrap,Nr,Vt,cr),Br=e.terrain.getMinMaxElevation(Xt),Mn=(a=Br.minElevation)!==null&&a!==void 0?a:this.elevation,qr=(d=Br.maxElevation)!==null&&d!==void 0?d:this.elevation;Zt=new xl([Zt.min[0],Zt.min[1],Mn],[Zt.max[0],Zt.max[1],qr])}be.push({aabb:Zt,zoom:Nr,x:Vt,y:cr,wrap:Ee.wrap,fullyVisible:it})}}return Ie.sort((Ee,We)=>Ee.distanceSq-We.distanceSq).map(Ee=>Ee.tileID)}resize(e,a){this.width=e,this.height=a,this.pixelsToGLUnits=[2/e,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const a=c.ac(e.lat,-85.051129,_c);return new c.P(c.O(e.lng)*this.worldSize,c.Q(a)*this.worldSize)}unproject(e){return new c.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const a=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,p=this.pointLocation(this.centerPoint,e),_=e.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-_))return;const E=d+a-_,P=Math.cos(this._pitch)*this.cameraToCenterDistance/E/c.b5(1,p.lat),A=this.scaleZoom(P/this.tileSize);this._elevation=_,this._center=p,this.zoom=A}setLocationAtPoint(e,a){const d=this.pointCoordinate(a),p=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(e),E=new c.Z(_.x-(d.x-p.x),_.y-(d.y-p.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,a){return a?this.coordinatePoint(this.locationCoordinate(e),a.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,a){return this.coordinateLocation(this.pointCoordinate(e,a))}locationCoordinate(e){return c.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,a){if(a){const ne=a.pointCoordinate(e);if(ne!=null)return ne}const d=[e.x,e.y,0,1],p=[e.x,e.y,1,1];c.af(d,d,this.pixelMatrixInverse),c.af(p,p,this.pixelMatrixInverse);const _=d[3],E=p[3],P=d[1]/_,A=p[1]/E,F=d[2]/_,H=p[2]/E,$=F===H?0:(0-F)/(H-F);return new c.Z(c.y.number(d[0]/_,p[0]/E,$)/this.worldSize,c.y.number(P,A,$)/this.worldSize)}coordinatePoint(e,a=0,d=this.pixelMatrix){const p=[e.x*this.worldSize,e.y*this.worldSize,a,1];return c.af(p,p,d),new c.P(p[0]/p[3],p[1]/p[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new ye().extend(this.pointLocation(new c.P(0,e))).extend(this.pointLocation(new c.P(this.width,e))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ye([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,_c])}calculateTileMatrix(e){const a=e.canonical,d=this.worldSize/this.zoomScale(a.z),p=a.x+Math.pow(2,a.z)*e.wrap,_=c.an(new Float64Array(16));return c.J(_,_,[p*d,a.y*d,0]),c.K(_,_,[d/c.X,d/c.X,1]),_}calculatePosMatrix(e,a=!1){const d=e.key,p=a?this._alignedPosMatrixCache:this._posMatrixCache;if(p[d])return p[d];const _=this.calculateTileMatrix(e);return c.L(_,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,_),p[d]=new Float32Array(_),p[d]}calculateFogMatrix(e){const a=e.key,d=this._fogMatrixCache;if(d[a])return d[a];const p=this.calculateTileMatrix(e);return c.L(p,this.fogMatrix,p),d[a]=new Float32Array(p),d[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,a){a=c.ac(+a,this.minZoom,this.maxZoom);const d={center:new c.N(e.lng,e.lat),zoom:a};let p=this.lngRange;!this._renderWorldCopies&&p===null&&(p=[-179.9999999999,179.9999999999]);const _=this.tileSize*this.zoomScale(d.zoom);let E=0,P=_,A=0,F=_,H=0,$=0;const{x:ne,y:de}=this.size;if(this.latRange){const Ee=this.latRange;E=c.Q(Ee[1])*_,P=c.Q(Ee[0])*_,P-E<de&&(H=de/(P-E))}p&&(A=c.b3(c.O(p[0])*_,0,_),F=c.b3(c.O(p[1])*_,0,_),F<A&&(F+=_),F-A<ne&&($=ne/(F-A)));const{x:me,y:be}=this.project.call({worldSize:_},e);let Ie,De;const Be=Math.max($||0,H||0);if(Be){const Ee=new c.P($?(F+A)/2:me,H?(P+E)/2:be);return d.center=this.unproject.call({worldSize:_},Ee).wrap(),d.zoom+=this.scaleZoom(Be),d}if(this.latRange){const Ee=de/2;be-Ee<E&&(De=E+Ee),be+Ee>P&&(De=P-Ee)}if(p){const Ee=(A+F)/2;let We=me;this._renderWorldCopies&&(We=c.b3(me,Ee-_/2,Ee+_/2));const Ye=ne/2;We-Ye<A&&(Ie=A+Ye),We+Ye>F&&(Ie=F-Ye)}if(Ie!==void 0||De!==void 0){const Ee=new c.P(Ie??me,De??be);d.center=this.unproject.call({worldSize:_},Ee).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:a,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=d,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,a=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b5(1,this.center.lat)*this.worldSize;let p=c.an(new Float64Array(16));c.K(p,p,[this.width/2,-this.height/2,1]),c.J(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=c.an(new Float64Array(16)),c.K(p,p,[1,-1,1]),c.J(p,p,[-1,-1,0]),c.K(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this.minElevationForCurrentTile),P=_-E*this._pixelPerMeter/Math.cos(this._pitch),A=E<0?P:_,F=Math.PI/2+this._pitch,H=this._fov*(.5+e.y/this.height),$=Math.sin(H)*A/Math.sin(c.ac(Math.PI-F-H,.01,Math.PI-.01)),ne=this.getHorizon(),de=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+e.y/(2*ne)),me=Math.sin(de)*A/Math.sin(c.ac(Math.PI-F-de,.01,Math.PI-.01)),be=Math.min($,me);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*be+A),this.nearZ=this.height/50,p=new Float64Array(16),c.b6(p,this._fov,this.width/this.height,this.nearZ,this.farZ),p[8]=2*-e.x/this.width,p[9]=2*e.y/this.height,this.projectionMatrix=c.ae(p),c.K(p,p,[1,-1,1]),c.J(p,p,[0,0,-this.cameraToCenterDistance]),c.b7(p,p,this._pitch),c.ad(p,p,this.angle),c.J(p,p,[-a,-d,0]),this.mercatorMatrix=c.K([],p,[this.worldSize,this.worldSize,this.worldSize]),c.K(p,p,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.L(new Float64Array(16),this.labelPlaneMatrix,p),c.J(p,p,[0,0,-this.elevation]),this.modelViewProjectionMatrix=p,this.invModelViewProjectionMatrix=c.as([],p),this.fogMatrix=new Float64Array(16),c.b6(this.fogMatrix,this._fov,this.width/this.height,_,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,c.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),c.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b7(this.fogMatrix,this.fogMatrix,this._pitch),c.ad(this.fogMatrix,this.fogMatrix,this.angle),c.J(this.fogMatrix,this.fogMatrix,[-a,-d,0]),c.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),c.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=c.L(new Float64Array(16),this.labelPlaneMatrix,p);const Ie=this.width%2/2,De=this.height%2/2,Be=Math.cos(this.angle),Ee=Math.sin(this.angle),We=a-Math.round(a)+Be*Ie+Ee*De,Ye=d-Math.round(d)+Be*De+Ee*Ie,it=new Float64Array(p);if(c.J(it,it,[We>.5?We-1:We,Ye>.5?Ye-1:Ye,0]),this.alignedModelViewProjectionMatrix=it,p=c.as(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new c.P(0,0)),a=[e.x*this.worldSize,e.y*this.worldSize,0,1];return c.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,e))}getCameraQueryGeometry(e){const a=this.getCameraPoint();if(e.length===1)return[e[0],a];{let d=a.x,p=a.y,_=a.x,E=a.y;for(const P of e)d=Math.min(d,P.x),p=Math.min(p,P.y),_=Math.max(_,P.x),E=Math.max(E,P.y);return[new c.P(d,p),new c.P(_,p),new c.P(_,E),new c.P(d,E),new c.P(d,p)]}}lngLatToCameraDepth(e,a){const d=this.locationCoordinate(e),p=[d.x*this.worldSize,d.y*this.worldSize,a,1];return c.af(p,p,this.modelViewProjectionMatrix),p[2]/p[3]}}function Ou(v,e){let a,d=!1,p=null,_=null;const E=()=>{p=null,d&&(v.apply(_,a),p=setTimeout(E,e),d=!1)};return(...P)=>(d=!0,_=this,a=P,p||E(),p)}class vc{constructor(e){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let d;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(d=p)}),(d&&d[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:d,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const d=a.join("/");let p=d;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${d}`);let _=window.location.hash.replace(p,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let E=window.location.href.replace(/(#.+)?$/,_);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=Ou(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const a=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,p=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,p),E=Math.round(a.lng*_)/_,P=Math.round(a.lat*_)/_,A=this._map.getBearing(),F=this._map.getPitch();let H="";if(H+=e?`/${E}/${P}/${d}`:`${d}/${P}/${E}`,(A||F)&&(H+="/"+Math.round(10*A)/10),F&&(H+=`/${Math.round(F)}`),this._hashName){const $=this._hashName;let ne=!1;const de=window.location.hash.slice(1).split("&").map(me=>{const be=me.split("=")[0];return be===$?(ne=!0,`${be}=${H}`):me}).filter(me=>me);return ne||de.push(`${$}=${H}`),`#${de.join("&")}`}return`#${H}`}}const vo={linearity:.3,easing:c.b8(0,0,.3,1)},Fu=c.e({deceleration:2500,maxSpeed:1400},vo),Bu=c.e({deceleration:20,maxSpeed:1400},vo),xc=c.e({deceleration:1e3,maxSpeed:360},vo),Nu=c.e({deceleration:1e3,maxSpeed:90},vo);class Zl{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,a=U.now();for(;e.length>0&&a-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)a.zoom+=_.zoomDelta||0,a.bearing+=_.bearingDelta||0,a.pitch+=_.pitchDelta||0,_.panDelta&&a.pan._add(_.panDelta),_.around&&(a.around=_.around),_.pinchAround&&(a.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const _=bl(a.pan.mag(),d,c.e({},Fu,e||{}));p.offset=a.pan.mult(_.amount/a.pan.mag()),p.center=this._map.transform.center,Xa(p,_)}if(a.zoom){const _=bl(a.zoom,d,Bu);p.zoom=this._map.transform.zoom+_.amount,Xa(p,_)}if(a.bearing){const _=bl(a.bearing,d,xc);p.bearing=this._map.transform.bearing+c.ac(_.amount,-179,179),Xa(p,_)}if(a.pitch){const _=bl(a.pitch,d,Nu);p.pitch=this._map.transform.pitch+_.amount,Xa(p,_)}if(p.zoom||p.bearing){const _=a.pinchAround===void 0?a.around:a.pinchAround;p.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(p,{noMoveStart:!0})}}function Xa(v,e){(!v.duration||v.duration<e.duration)&&(v.duration=e.duration,v.easing=e.easing)}function bl(v,e,a){const{maxSpeed:d,linearity:p,deceleration:_}=a,E=c.ac(v*p/(e/1e3),-d,d),P=Math.abs(E)/(_*p);return{easing:a.easing,duration:1e3*P,amount:E*(P/2)}}class Yi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,d,p={}){const _=j.mousePos(a.getCanvas(),d),E=a.unproject(_);super(e,c.e({point:_,lngLat:E,originalEvent:d},p)),this._defaultPrevented=!1,this.target=a}}class Ka extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,d){const p=e==="touchend"?d.changedTouches:d.touches,_=j.touchPos(a.getCanvasContainer(),p),E=_.map(A=>a.unproject(A)),P=_.reduce((A,F,H,$)=>A.add(F.div($.length)),new c.P(0,0));super(e,{points:_,point:P,lngLats:E,lngLat:a.unproject(P),originalEvent:d}),this._defaultPrevented=!1}}class eh extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,d){super(e,{originalEvent:d}),this._defaultPrevented=!1}}class th{constructor(e,a){this._map=e,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new eh(e.type,this._map,e))}mousedown(e,a){return this._mousedownPos=a,this._firePreventable(new Yi(e.type,this._map,e))}mouseup(e){this._map.fire(new Yi(e.type,this._map,e))}click(e,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Yi(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Yi(e.type,this._map,e))}mouseover(e){this._map.fire(new Yi(e.type,this._map,e))}mouseout(e){this._map.fire(new Yi(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Ka(e.type,this._map,e))}touchmove(e){this._map.fire(new Ka(e.type,this._map,e))}touchend(e){this._map.fire(new Ka(e.type,this._map,e))}touchcancel(e){this._map.fire(new Ka(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Yi(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Yi(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oa{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(c.P.convert(e),this._map.terrain)}}class Ps{constructor(e,a){this._map=e,this._tr=new oa(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,a){this.isEnabled()&&e.shiftKey&&e.button===0&&(j.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(e,a){if(!this._active)return;const d=a;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=d,this._box||(this._box=j.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const _=Math.min(p.x,d.x),E=Math.max(p.x,d.x),P=Math.min(p.y,d.y),A=Math.max(p.y,d.y);j.setTransform(this._box,`translate(${_}px,${P}px)`),this._box.style.width=E-_+"px",this._box.style.height=A-P+"px"}mouseupWindow(e,a){if(!this._active||e.button!==0)return;const d=this._startPos,p=a;if(this.reset(),j.suppressClick(),d.x!==p.x||d.y!==p.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:e})),{cameraAnimation:_=>_.fitScreenCoordinates(d,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,a){return this._map.fire(new c.k(e,{originalEvent:a}))}}function ql(v,e){if(v.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${e.length}`);const a={};for(let d=0;d<v.length;d++)a[v[d].identifier]=e[d];return a}class Ja{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,a,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),d.length===this.numTouches&&(this.centroid=function(p){const _=new c.P(0,0);for(const E of p)_._add(E);return _.div(p.length)}(a),this.touches=ql(d,a)))}touchmove(e,a,d){if(this.aborted||!this.centroid)return;const p=ql(d,a);for(const _ in this.touches){const E=p[_];(!E||E.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(e,a,d){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Yl{constructor(e){this.singleTap=new Ja(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,a,d){this.singleTap.touchstart(e,a,d)}touchmove(e,a,d){this.singleTap.touchmove(e,a,d)}touchend(e,a,d){const p=this.singleTap.touchend(e,a,d);if(p){const _=e.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(p)<30;if(_&&E||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Zo{constructor(e){this._tr=new oa(e),this._zoomIn=new Yl({numTouches:1,numTaps:2}),this._zoomOut=new Yl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,a,d){this._zoomIn.touchstart(e,a,d),this._zoomOut.touchstart(e,a,d)}touchmove(e,a,d){this._zoomIn.touchmove(e,a,d),this._zoomOut.touchmove(e,a,d)}touchend(e,a,d){const p=this._zoomIn.touchend(e,a,d),_=this._zoomOut.touchend(e,a,d),E=this._tr;return p?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(p)},{originalEvent:e})}):_?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(_)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const a=this._moveFunction(...e);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(e,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,a){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const p=a.length?a[0]:a;return!this._moved&&p.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(d,p))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&j.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const rh={0:1,2:2};class qo{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const a=j.mouseButton(e);this._eventButton=a}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(a,d){const p=rh[d];return a.buttons===void 0||(a.buttons&p)!==p}(e,this._eventButton)}isValidEndEvent(e){return j.mouseButton(e)===this._eventButton}}class nh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const ju=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=e=>{e.preventDefault()}},wc=({enable:v,clickTolerance:e,bearingDegreesPerPixelMoved:a=.8})=>{const d=new qo({checkCorrectEvent:p=>j.mouseButton(p)===0&&p.ctrlKey||j.mouseButton(p)===2});return new xo({clickTolerance:e,move:(p,_)=>({bearingDelta:(_.x-p.x)*a}),moveStateManager:d,enable:v,assignEvents:ju})},Vn=({enable:v,clickTolerance:e,pitchDegreesPerPixelMoved:a=-.5})=>{const d=new qo({checkCorrectEvent:p=>j.mouseButton(p)===0&&p.ctrlKey||j.mouseButton(p)===2});return new xo({clickTolerance:e,move:(p,_)=>({pitchDelta:(_.y-p.y)*a}),moveStateManager:d,enable:v,assignEvents:ju})};class wo{constructor(e,a){this._clickTolerance=e.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,a,d){return this._calculateTransform(e,a,d)}touchmove(e,a,d){if(this._active){if(!this._shouldBePrevented(d.length))return e.preventDefault(),this._calculateTransform(e,a,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,a,d){this._calculateTransform(e,a,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,a,d){d.length>0&&(this._active=!0);const p=ql(d,a),_=new c.P(0,0),E=new c.P(0,0);let P=0;for(const F in p){const H=p[F],$=this._touches[F];$&&(_._add(H),E._add(H.sub($)),P++,p[F]=H)}if(this._touches=p,this._shouldBePrevented(P)||!E.mag())return;const A=E.div(P);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(P),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,a,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([a[0],a[1]]))}touchmove(e,a,d){if(!this._firstTwoTouches)return;e.preventDefault();const[p,_]=this._firstTwoTouches,E=bo(d,a,p),P=bo(d,a,_);if(!E||!P)return;const A=this._aroundCenter?null:E.add(P).div(2);return this._move([E,P],A,e)}touchend(e,a,d){if(!this._firstTwoTouches)return;const[p,_]=this._firstTwoTouches,E=bo(d,a,p),P=bo(d,a,_);E&&P||(this._active&&j.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function bo(v,e,a){for(let d=0;d<v.length;d++)if(v[d].identifier===a)return e[d]}function bc(v,e){return Math.log(v/e)/Math.LN2}class Uu extends Sl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,a){const d=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(bc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bc(this._distance,d),pinchAround:a}}}function kl(v,e){return 180*v.angleWith(e)/Math.PI}class Xl extends Sl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,a,d){const p=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:kl(this._vector,p),pinchAround:a}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const a=25/(Math.PI*this._minDiameter)*360,d=kl(e,this._startVector);return Math.abs(d)<a}}function So(v){return Math.abs(v.y)>Math.abs(v.x)}class Kl extends Sl{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,a,d){super.touchstart(e,a,d),this._currentTouchCount=d.length}_start(e){this._lastPoints=e,So(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,a,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=e[0].sub(this._lastPoints[0]),_=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,_,d.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(p.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(e,a,d){if(this._valid!==void 0)return this._valid;const p=e.mag()>=2,_=a.mag()>=2;if(!p&&!_)return;if(!p||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const E=e.y>0==a.y>0;return So(e)&&So(a)&&E}}const od={panStep:100,bearingStep:15,pitchStep:10};class la{constructor(e){this._tr=new oa(e);const a=od;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let a=0,d=0,p=0,_=0,E=0;switch(e.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:e.shiftKey?d=-1:(e.preventDefault(),_=-1);break;case 39:e.shiftKey?d=1:(e.preventDefault(),_=1);break;case 38:e.shiftKey?p=1:(e.preventDefault(),E=-1);break;case 40:e.shiftKey?p=-1:(e.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,p=0),{cameraAnimation:P=>{const A=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Ia,zoom:a?Math.round(A.zoom)+a*(e.shiftKey?2:1):A.zoom,bearing:A.bearing+d*this._bearingStep,pitch:A.pitch+p*this._pitchStep,offset:[-_*this._panStep,-E*this._panStep],center:A.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ia(v){return v*(2-v)}const Jl=4.000244140625;class Ms{constructor(e,a){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=e,this._tr=new oa(e),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let a=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const d=U.now(),p=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,a!==0&&a%Jl==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),e.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=e,this._delta-=a,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=j.mousePos(this._map.getCanvas(),e),d=this._tr;this._around=a.y>d.transform.height/2-d.transform.getHorizon()?c.N.convert(this._aroundCenter?d.center:d.unproject(a)):c.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Jl?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&F!==0&&(F=1/F);const H=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(H*F))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,d=this._startZoom,p=this._easing;let _,E=!1;const P=U.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&p&&P){const A=Math.min(P/200,1),F=p(A);_=c.y.number(d,a,F),A<1?this._frameId||(this._frameId=!0):E=!0}else _=a,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:_-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let a=c.b9;if(this._prevEase){const d=this._prevEase,p=(U.now()-d.start)/d.duration,_=d.easing(p+.01)-d.easing(p),E=.27/Math.sqrt(_*_+1e-4)*.01,P=Math.sqrt(.0729-E*E);a=c.b8(E,P,.25,1)}return this._prevEase={start:U.now(),duration:e,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ko{constructor(e,a){this._clickZoom=e,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ih{constructor(e){this._tr=new oa(e),this.reset()}reset(){this._active=!1}dblclick(e,a){return e.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sh{constructor(){this._tap=new Yl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,a,d){if(!this._swipePoint)if(this._tapTime){const p=a[0],_=e.timeStamp-this._tapTime<500,E=this._tapPoint.dist(p)<30;_&&E?d.length>0&&(this._swipePoint=p,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(e,a,d)}touchmove(e,a,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const p=a[0],_=p.y-this._swipePoint.y;return this._swipePoint=p,e.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(e,a,d)}touchend(e,a,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const p=this._tap.touchend(e,a,d);p&&(this._tapTime=e.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sc{constructor(e,a,d){this._el=e,this._mousePan=a,this._touchPan=d}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ld{constructor(e,a,d){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=a,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class kc{constructor(e,a,d,p){this._el=e,this._touchZoom=a,this._touchRotate=d,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ql{constructor(e,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=j.create("div","maplibregl-cooperative-gesture-screen",e);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=d,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(j.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,a){this._enabled&&(this._map.fire(new c.k("cooperativegestureprevented",{gestureType:e,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ua=v=>v.zoom||v.drag||v.pitch||v.rotate;class ar extends c.k{}function Pa(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Tc{constructor(e,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,_)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=p.type==="renderFrame"?void 0:p,P={needsRenderFrame:!1},A={},F={},H=p.touches,$=H?this._getMapTouches(H):void 0,ne=$?j.touchPos(this._map.getCanvas(),$):j.mousePos(this._map.getCanvas(),p);for(const{handlerName:be,handler:Ie,allowed:De}of this._handlers){if(!Ie.isEnabled())continue;let Be;this._blockedByActive(F,De,be)?Ie.reset():Ie[_||p.type]&&(Be=Ie[_||p.type](p,ne,$),this.mergeHandlerResult(P,A,Be,be,E),Be&&Be.needsRenderFrame&&this._triggerRenderFrame()),(Be||Ie.isActive())&&(F[be]=Ie)}const de={};for(const be in this._previousActiveHandlers)F[be]||(de[be]=E);this._previousActiveHandlers=F,(Object.keys(de).length||Pa(P))&&(this._changes.push([P,A,de]),this._triggerRenderFrame()),(Object.keys(F).length||Pa(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:me}=P;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zl(e),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,_,E]of this._listeners)j.addEventListener(p,_,p===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[e,a,d]of this._listeners)j.removeEventListener(e,a,e===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(e){const a=this._map,d=a.getCanvasContainer();this._add("mapEvent",new th(a,e));const p=a.boxZoom=new Ps(a,e);this._add("boxZoom",p),e.interactive&&e.boxZoom&&p.enable();const _=a.cooperativeGestures=new Ql(a,e.cooperativeGestures);this._add("cooperativeGestures",_),e.cooperativeGestures&&_.enable();const E=new Zo(a),P=new ih(a);a.doubleClickZoom=new ko(P,E),this._add("tapZoom",E),this._add("clickZoom",P),e.interactive&&e.doubleClickZoom&&a.doubleClickZoom.enable();const A=new sh;this._add("tapDragZoom",A);const F=a.touchPitch=new Kl(a);this._add("touchPitch",F),e.interactive&&e.touchPitch&&a.touchPitch.enable(e.touchPitch);const H=wc(e),$=Vn(e);a.dragRotate=new ld(e,H,$),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",$,["mouseRotate"]),e.interactive&&e.dragRotate&&a.dragRotate.enable();const ne=(({enable:Be,clickTolerance:Ee})=>{const We=new qo({checkCorrectEvent:Ye=>j.mouseButton(Ye)===0&&!Ye.ctrlKey});return new xo({clickTolerance:Ee,move:(Ye,it)=>({around:it,panDelta:it.sub(Ye)}),activateOnStart:!0,moveStateManager:We,enable:Be,assignEvents:ju})})(e),de=new wo(e,a);a.dragPan=new Sc(d,ne,de),this._add("mousePan",ne),this._add("touchPan",de,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&a.dragPan.enable(e.dragPan);const me=new Xl,be=new Uu;a.touchZoomRotate=new kc(d,be,me,A),this._add("touchRotate",me,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&a.touchZoomRotate.enable(e.touchZoomRotate);const Ie=a.scrollZoom=new Ms(a,()=>this._triggerRenderFrame());this._add("scrollZoom",Ie,["mousePan"]),e.interactive&&e.scrollZoom&&a.scrollZoom.enable(e.scrollZoom);const De=a.keyboard=new la(a);this._add("keyboard",De),e.interactive&&e.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new oi(a))}_add(e,a,d){this._handlers.push({handlerName:e,handler:a,allowed:d}),this._handlersById[e]=a}stop(e){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ua(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,a,d){for(const p in e)if(p!==d&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(e){const a=[];for(const d of e)this._el.contains(d.target)&&a.push(d);return a}mergeHandlerResult(e,a,d,p,_){if(!d)return;c.e(e,d);const E={handlerName:p,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(a.zoom=E),d.panDelta!==void 0&&(a.drag=E),d.pitchDelta!==void 0&&(a.pitch=E),d.bearingDelta!==void 0&&(a.rotate=E)}_applyChanges(){const e={},a={},d={};for(const[p,_,E]of this._changes)p.panDelta&&(e.panDelta=(e.panDelta||new c.P(0,0))._add(p.panDelta)),p.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+p.pitchDelta),p.around!==void 0&&(e.around=p.around),p.pinchAround!==void 0&&(e.pinchAround=p.pinchAround),p.noInertia&&(e.noInertia=p.noInertia),c.e(a,_),c.e(d,E);this._updateMapTransform(e,a,d),this._changes=[]}_updateMapTransform(e,a,d){const p=this._map,_=p._getTransformForUpdate(),E=p.terrain;if(!(Pa(e)||E&&this._terrainMovement))return this._fireEvents(a,d,!0);let{panDelta:P,zoomDelta:A,bearingDelta:F,pitchDelta:H,around:$,pinchAround:ne}=e;ne!==void 0&&($=ne),p._stop(!0),$=$||p.transform.centerPoint;const de=_.pointLocation(P?$.sub(P):$);F&&(_.bearing+=F),H&&(_.pitch+=H),A&&(_.zoom+=A),E?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(P)):_.setLocationAtPoint(de,$):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(de,$)):_.setLocationAtPoint(de,$),p._applyUpdatedTransform(_),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(a,d,!0)}_fireEvents(e,a,d){const p=ua(this._eventsInProgress),_=ua(e),E={};for(const $ in e){const{originalEvent:ne}=e[$];this._eventsInProgress[$]||(E[`${$}start`]=ne),this._eventsInProgress[$]=e[$]}!p&&_&&this._fireEvent("movestart",_.originalEvent);for(const $ in E)this._fireEvent($,E[$]);_&&this._fireEvent("move",_.originalEvent);for(const $ in e){const{originalEvent:ne}=e[$];this._fireEvent($,ne)}const P={};let A;for(const $ in this._eventsInProgress){const{handlerName:ne,originalEvent:de}=this._eventsInProgress[$];this._handlersById[ne].isActive()||(delete this._eventsInProgress[$],A=a[ne]||de,P[`${$}end`]=A)}for(const $ in P)this._fireEvent($,P[$]);const F=ua(this._eventsInProgress),H=(p||_)&&!F;if(H&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const $=this._map._getTransformForUpdate();$.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform($)}if(d&&H){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=de=>de!==0&&-this._bearingSnap<de&&de<this._bearingSnap;!$||!$.essential&&U.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:A})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne($.bearing||this._map.getBearing())&&($.bearing=0),$.freezeElevation=!0,this._map.easeTo($,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(e,a){this._map.fire(new c.k(e,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new ar("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Tl extends c.E{constructor(e,a){super(),this._renderFrameCallback=()=>{const d=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,a){return this.jumpTo({center:e},a)}panBy(e,a,d){return e=c.P.convert(e).mult(-1),this.panTo(this.transform.center,c.e({offset:e},a),d)}panTo(e,a,d){return this.easeTo(c.e({center:e},a),d)}getZoom(){return this.transform.zoom}setZoom(e,a){return this.jumpTo({zoom:e},a),this}zoomTo(e,a,d){return this.easeTo(c.e({zoom:e},a),d)}zoomIn(e,a){return this.zoomTo(this.getZoom()+1,e,a),this}zoomOut(e,a){return this.zoomTo(this.getZoom()-1,e,a),this}getBearing(){return this.transform.bearing}setBearing(e,a){return this.jumpTo({bearing:e},a),this}getPadding(){return this.transform.padding}setPadding(e,a){return this.jumpTo({padding:e},a),this}rotateTo(e,a,d){return this.easeTo(c.e({bearing:e},a),d)}resetNorth(e,a){return this.rotateTo(0,c.e({duration:1e3},e),a),this}resetNorthPitch(e,a){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},e),a),this}snapToNorth(e,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,a):this}getPitch(){return this.transform.pitch}setPitch(e,a){return this.jumpTo({pitch:e},a),this}cameraForBounds(e,a){e=ye.convert(e).adjustAntiMeridian();const d=a&&a.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),d,a)}_cameraForBoxAndBearing(e,a,d,p){const _={top:0,bottom:0,right:0,left:0};if(typeof(p=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const Wt=p.padding;p.padding={top:Wt,bottom:Wt,right:Wt,left:Wt}}p.padding=c.e(_,p.padding);const E=this.transform,P=E.padding,A=new ye(e,a),F=E.project(A.getNorthWest()),H=E.project(A.getNorthEast()),$=E.project(A.getSouthEast()),ne=E.project(A.getSouthWest()),de=c.ba(-d),me=F.rotate(de),be=H.rotate(de),Ie=$.rotate(de),De=ne.rotate(de),Be=new c.P(Math.max(me.x,be.x,De.x,Ie.x),Math.max(me.y,be.y,De.y,Ie.y)),Ee=new c.P(Math.min(me.x,be.x,De.x,Ie.x),Math.min(me.y,be.y,De.y,Ie.y)),We=Be.sub(Ee),Ye=(E.width-(P.left+P.right+p.padding.left+p.padding.right))/We.x,it=(E.height-(P.top+P.bottom+p.padding.top+p.padding.bottom))/We.y;if(it<0||Ye<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Et=Math.min(E.scaleZoom(E.scale*Math.min(Ye,it)),p.maxZoom),Bt=c.P.convert(p.offset),$t=new c.P((p.padding.left-p.padding.right)/2,(p.padding.top-p.padding.bottom)/2).rotate(c.ba(d)),er=Bt.add($t).mult(E.scale/E.zoomScale(Et));return{center:E.unproject(F.add($).div(2).sub(er)),zoom:Et,bearing:d}}fitBounds(e,a,d){return this._fitInternal(this.cameraForBounds(e,a),a,d)}fitScreenCoordinates(e,a,d,p,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(e)),this.transform.pointLocation(c.P.convert(a)),d,p),p,_)}_fitInternal(e,a,d){return e?(delete(a=c.e(e,a)).padding,a.linear?this.easeTo(a,d):this.flyTo(a,d)):this}jumpTo(e,a){this.stop();const d=this._getTransformForUpdate();let p=!1,_=!1,E=!1;return"zoom"in e&&d.zoom!==+e.zoom&&(p=!0,d.zoom=+e.zoom),e.center!==void 0&&(d.center=c.N.convert(e.center)),"bearing"in e&&d.bearing!==+e.bearing&&(_=!0,d.bearing=+e.bearing),"pitch"in e&&d.pitch!==+e.pitch&&(E=!0,d.pitch=+e.pitch),e.padding==null||d.isPaddingEqual(e.padding)||(d.padding=e.padding),this._applyUpdatedTransform(d),this.fire(new c.k("movestart",a)).fire(new c.k("move",a)),p&&this.fire(new c.k("zoomstart",a)).fire(new c.k("zoom",a)).fire(new c.k("zoomend",a)),_&&this.fire(new c.k("rotatestart",a)).fire(new c.k("rotate",a)).fire(new c.k("rotateend",a)),E&&this.fire(new c.k("pitchstart",a)).fire(new c.k("pitch",a)).fire(new c.k("pitchend",a)),this.fire(new c.k("moveend",a))}calculateCameraOptionsFromTo(e,a,d,p=0){const _=c.Z.fromLngLat(e,a),E=c.Z.fromLngLat(d,p),P=E.x-_.x,A=E.y-_.y,F=E.z-_.z,H=Math.hypot(P,A,F);if(H===0)throw new Error("Can't calculate camera options with same From and To");const $=Math.hypot(P,A),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),de=180*Math.atan2(P,-A)/Math.PI;let me=180*Math.acos($/H)/Math.PI;return me=F<0?90-me:90+me,{center:E.toLngLat(),zoom:ne,pitch:me,bearing:de}}easeTo(e,a){var d;this._stop(!1,e.easeId),((e=c.e({offset:[0,0],duration:500,easing:c.b9},e)).animate===!1||!e.essential&&U.prefersReducedMotion)&&(e.duration=0);const p=this._getTransformForUpdate(),_=p.zoom,E=p.bearing,P=p.pitch,A=p.padding,F="bearing"in e?this._normalizeBearing(e.bearing,E):E,H="pitch"in e?+e.pitch:P,$="padding"in e?e.padding:p.padding,ne=c.P.convert(e.offset);let de=p.centerPoint.add(ne);const me=p.pointLocation(de),{center:be,zoom:Ie}=p.getConstrained(c.N.convert(e.center||me),(d=e.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(be,p);const De=p.project(me),Be=p.project(be).sub(De),Ee=p.zoomScale(Ie-_);let We,Ye;e.around&&(We=c.N.convert(e.around),Ye=p.locationPoint(We));const it={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ie!==_,this._rotating=this._rotating||E!==F,this._pitching=this._pitching||H!==P,this._padding=!p.isPaddingEqual($),this._easeId=e.easeId,this._prepareEase(a,e.noMoveStart,it),this.terrain&&this._prepareElevation(be),this._ease(Et=>{if(this._zooming&&(p.zoom=c.y.number(_,Ie,Et)),this._rotating&&(p.bearing=c.y.number(E,F,Et)),this._pitching&&(p.pitch=c.y.number(P,H,Et)),this._padding&&(p.interpolatePadding(A,$,Et),de=p.centerPoint.add(ne)),this.terrain&&!e.freezeElevation&&this._updateElevation(Et),We)p.setLocationAtPoint(We,Ye);else{const Bt=p.zoomScale(p.zoom-_),$t=Ie>_?Math.min(2,Ee):Math.max(.5,Ee),er=Math.pow($t,1-Et),Wt=p.unproject(De.add(Be.mult(Et*er)).mult(Bt));p.setLocationAtPoint(p.renderWorldCopies?Wt.wrap():Wt,de)}this._applyUpdatedTransform(p),this._fireMoveEvents(a)},Et=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a,Et)},e),this}_prepareEase(e,a,d={}){this._moving=!0,a||d.moving||this.fire(new c.k("movestart",e)),this._zooming&&!d.zooming&&this.fire(new c.k("zoomstart",e)),this._rotating&&!d.rotating&&this.fire(new c.k("rotatestart",e)),this._pitching&&!d.pitching&&this.fire(new c.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&a!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(d-(a-(d*e+this._elevationStart))/(1-e)),this._elevationTarget=a}this.transform.elevation=c.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const a=e.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(a.lngLat,e.zoom);if(a.altitude<d){const p=this.calculateCameraOptionsFromTo(a.lngLat,d,e.center,e.elevation);return{pitch:p.pitch,zoom:p.zoom}}return{}}_applyUpdatedTransform(e){const a=[];if(this.terrain&&a.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&a.push(p=>this.transformCameraUpdate(p)),!a.length)return;const d=e.clone();for(const p of a){const _=d.clone(),{center:E,zoom:P,pitch:A,bearing:F,elevation:H}=p(_);E&&(_.center=E),P!==void 0&&(_.zoom=P),A!==void 0&&(_.pitch=A),F!==void 0&&(_.bearing=F),H!==void 0&&(_.elevation=H),d.apply(_)}this.transform.apply(d)}_fireMoveEvents(e){this.fire(new c.k("move",e)),this._zooming&&this.fire(new c.k("zoom",e)),this._rotating&&this.fire(new c.k("rotate",e)),this._pitching&&this.fire(new c.k("pitch",e))}_afterEase(e,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const d=this._zooming,p=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.k("zoomend",e)),p&&this.fire(new c.k("rotateend",e)),_&&this.fire(new c.k("pitchend",e)),this.fire(new c.k("moveend",e))}flyTo(e,a){var d;if(!e.essential&&U.prefersReducedMotion){const Xt=c.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xt,a)}this.stop(),e=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b9},e);const p=this._getTransformForUpdate(),_=p.zoom,E=p.bearing,P=p.pitch,A=p.padding,F="bearing"in e?this._normalizeBearing(e.bearing,E):E,H="pitch"in e?+e.pitch:P,$="padding"in e?e.padding:p.padding,ne=c.P.convert(e.offset);let de=p.centerPoint.add(ne);const me=p.pointLocation(de),{center:be,zoom:Ie}=p.getConstrained(c.N.convert(e.center||me),(d=e.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(be,p);const De=p.zoomScale(Ie-_),Be=p.project(me),Ee=p.project(be).sub(Be);let We=e.curve;const Ye=Math.max(p.width,p.height),it=Ye/De,Et=Ee.mag();if("minZoom"in e){const Xt=c.ac(Math.min(e.minZoom,_,Ie),p.minZoom,p.maxZoom),Br=Ye/p.zoomScale(Xt-_);We=Math.sqrt(Br/Et*2)}const Bt=We*We;function $t(Xt){const Br=(it*it-Ye*Ye+(Xt?-1:1)*Bt*Bt*Et*Et)/(2*(Xt?it:Ye)*Bt*Et);return Math.log(Math.sqrt(Br*Br+1)-Br)}function er(Xt){return(Math.exp(Xt)-Math.exp(-Xt))/2}function Wt(Xt){return(Math.exp(Xt)+Math.exp(-Xt))/2}const Vt=$t(!1);let cr=function(Xt){return Wt(Vt)/Wt(Vt+We*Xt)},Nr=function(Xt){return Ye*((Wt(Vt)*(er(Br=Vt+We*Xt)/Wt(Br))-er(Vt))/Bt)/Et;var Br},Zt=($t(!0)-Vt)/We;if(Math.abs(Et)<1e-6||!isFinite(Zt)){if(Math.abs(Ye-it)<1e-6)return this.easeTo(e,a);const Xt=it<Ye?-1:1;Zt=Math.abs(Math.log(it/Ye))/We,Nr=()=>0,cr=Br=>Math.exp(Xt*We*Br)}return e.duration="duration"in e?+e.duration:1e3*Zt/("screenSpeed"in e?+e.screenSpeed/We:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=E!==F,this._pitching=H!==P,this._padding=!p.isPaddingEqual($),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(be),this._ease(Xt=>{const Br=Xt*Zt,Mn=1/cr(Br);p.zoom=Xt===1?Ie:_+p.scaleZoom(Mn),this._rotating&&(p.bearing=c.y.number(E,F,Xt)),this._pitching&&(p.pitch=c.y.number(P,H,Xt)),this._padding&&(p.interpolatePadding(A,$,Xt),de=p.centerPoint.add(ne)),this.terrain&&!e.freezeElevation&&this._updateElevation(Xt);const qr=Xt===1?be:p.unproject(Be.add(Ee.mult(Nr(Br))).mult(Mn));p.setLocationAtPoint(p.renderWorldCopies?qr.wrap():qr,de),this._applyUpdatedTransform(p),this._fireMoveEvents(a)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,a){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return e||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(e,a,d){d.animate===!1||d.duration===0?(e(1),a()):(this._easeStart=U.now(),this._easeOptions=d,this._onEaseFrame=e,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,a){e=c.b3(e,-180,180);const d=Math.abs(e-a);return Math.abs(e-360-a)<d&&(e-=360),Math.abs(e+360-a)<d&&(e+=360),e}_normalizeCenter(e,a){if(!a.renderWorldCopies||a.lngRange)return;const d=e.lng-a.center.lng;e.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(c.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const ys={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qa{constructor(e=ys){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=j.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=j.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,a){const d=this._map._getUIString(`AttributionControl.${a}`);e.title=d,e.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const _=a[p];if(_.used||_.usedForTerrain){const E=_.getSource();E.attribution&&e.indexOf(E.attribution)<0&&e.push(E.attribution)}}e=e.filter(p=>String(p).trim()),e.sort((p,_)=>p.length-_.length),e=e.filter((p,_)=>{for(let E=_+1;E<e.length;E++)if(e[E].indexOf(p)>=0)return!1;return!0});const d=e.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,e.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ma{constructor(e={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const d=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=j.create("div","maplibregl-ctrl");const a=j.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){j.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class nn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const a=++this._id;return this._queue.push({callback:e,id:a,cancelled:!1}),a}remove(e){const a=this._currentlyRunning,d=a?this._queue.concat(a):this._queue;for(const p of d)if(p.id===e)return void(p.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const d of a)if(!d.cancelled&&(d.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ah=c.Y([{name:"a_pos3d",type:"Int16",components:3}]);class hf extends c.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,a){this.sourceCache.update(e,a),this._renderableTilesKeys=[];const d={};for(const p of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))d[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),c.aP(p.posMatrix,0,c.X,0,c.X,0,1),this._tiles[p.key]=new wi(p,this.tileSize));for(const p in this._tiles)d[p]||delete this._tiles[p]}freeRtt(e){for(const a in this._tiles){const d=this._tiles[a];(!e||d.tileID.equals(e)||d.tileID.isChildOf(e)||e.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const a={};for(const d of this._renderableTilesKeys){const p=this._tiles[d].tileID;if(p.canonical.equals(e.canonical)){const _=e.clone();_.posMatrix=new Float64Array(16),c.aP(_.posMatrix,0,c.X,0,c.X,0,1),a[d]=_}else if(p.canonical.isChildOf(e.canonical)){const _=e.clone();_.posMatrix=new Float64Array(16);const E=p.canonical.z-e.canonical.z,P=p.canonical.x-(p.canonical.x>>E<<E),A=p.canonical.y-(p.canonical.y>>E<<E),F=c.X>>E;c.aP(_.posMatrix,0,F,0,F,0,1),c.J(_.posMatrix,_.posMatrix,[-P*F,-A*F,0]),a[d]=_}else if(e.canonical.isChildOf(p.canonical)){const _=e.clone();_.posMatrix=new Float64Array(16);const E=e.canonical.z-p.canonical.z,P=e.canonical.x-(e.canonical.x>>E<<E),A=e.canonical.y-(e.canonical.y>>E<<E),F=c.X>>E;c.aP(_.posMatrix,0,c.X,0,c.X,0,1),c.J(_.posMatrix,_.posMatrix,[P*F,A*F,0]),c.K(_.posMatrix,_.posMatrix,[1/2**E,1/2**E,0]),a[d]=_}}return a}getSourceTile(e,a){const d=this.sourceCache._source;let p=e.overscaledZ-this.deltaZoom;if(p>d.maxzoom&&(p=d.maxzoom),p<d.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(p).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!_||!_.dem)&&a)for(;p>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(e.scaledTo(p--).key);return _}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=e)}}class To{constructor(e,a,d){this.painter=e,this.sourceCache=new hf(a),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,a,d,p=c.X){var _;if(!(a>=0&&a<p&&d>=0&&d<p))return 0;const E=this.getTerrainData(e),P=(_=E.tile)===null||_===void 0?void 0:_.dem;if(!P)return 0;const A=function(me,be,Ie){var De=be[0],Be=be[1];return me[0]=Ie[0]*De+Ie[4]*Be+Ie[12],me[1]=Ie[1]*De+Ie[5]*Be+Ie[13],me}([],[a/p*c.X,d/p*c.X],E.u_terrain_matrix),F=[A[0]*P.dim,A[1]*P.dim],H=Math.floor(F[0]),$=Math.floor(F[1]),ne=F[0]-H,de=F[1]-$;return P.get(H,$)*(1-ne)*(1-de)+P.get(H+1,$)*ne*(1-de)+P.get(H,$+1)*(1-ne)*de+P.get(H+1,$+1)*ne*de}getElevationForLngLatZoom(e,a){if(!c.bb(a,e.wrap()))return 0;const{tileID:d,mercatorX:p,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(e,a);return this.getElevation(d,p%c.X,_%c.X,c.X)}getElevation(e,a,d,p=c.X){return this.getDEMElevation(e,a,d,p)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const p=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new xt(p,_,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new xt(p,new c.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const a=this.sourceCache.getSourceTile(e,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new xt(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const d=a&&a+a.tileID.key+e.key;if(d&&!this._demMatrixCache[d]){const p=this.sourceCache.sourceCache._source.maxzoom;let _=e.canonical.z-a.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=p?_=e.canonical.z-p:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=e.canonical.x-(e.canonical.x>>_<<_),P=e.canonical.y-(e.canonical.y>>_<<_),A=c.bc(new Float64Array(16),[1/(c.X<<_),1/(c.X<<_),0]);c.J(A,A,[E*c.X,P*c.X,0]),this._demMatrixCache[e.key]={matrix:A,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(e){const a=this.painter,d=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new xt(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new xt(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(d,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,d,p))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,E=0;_<this._coordsTextureSize;_++)for(let P=0;P<this._coordsTextureSize;P++,E+=4)a[E+0]=255&P,a[E+1]=255&_,a[E+2]=P>>8<<4|_>>8,a[E+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new xt(e,d,e.gl.RGBA,{premultiply:!1});return p.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),d=this.painter.context,p=d.gl,_=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(_,P-E-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null);const A=a[0]+(a[2]>>4<<8),F=a[1]+((15&a[2])<<8),H=this.coordsIndex[255-a[3]],$=H&&this.sourceCache.getTileByID(H);if(!$)return null;const ne=this._coordsTextureSize,de=(1<<$.tileID.canonical.z)*ne;return new c.Z(($.tileID.canonical.x*ne+A)/de+$.tileID.wrap,($.tileID.canonical.y*ne+F)/de,this.getElevation($.tileID,A,F,ne))}depthAtPoint(e){const a=new Uint8Array(4),d=this.painter.context,p=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,a=new c.bd,d=new c.aY,p=this.meshSize,_=c.X/p,E=p*p;for(let $=0;$<=p;$++)for(let ne=0;ne<=p;ne++)a.emplaceBack(ne*_,$*_,0);for(let $=0;$<E;$+=p+1)for(let ne=0;ne<p;ne++)d.emplaceBack(ne+$,p+ne+$+1,p+ne+$+2),d.emplaceBack(ne+$,p+ne+$+2,ne+$+1);const P=a.length,A=P+2*(p+1);for(const $ of[0,1])for(let ne=0;ne<=p;ne++)for(const de of[0,1])a.emplaceBack(ne*_,$*c.X,de);for(let $=0;$<2*p;$+=2)d.emplaceBack(A+$,A+$+1,A+$+3),d.emplaceBack(A+$,A+$+3,A+$+2),d.emplaceBack(P+$,P+$+3,P+$+1),d.emplaceBack(P+$,P+$+2,P+$+3);const F=a.length,H=F+2*(p+1);for(const $ of[0,1])for(let ne=0;ne<=p;ne++)for(const de of[0,1])a.emplaceBack($*c.X,ne*_,de);for(let $=0;$<2*p;$+=2)d.emplaceBack(F+$,F+$+1,F+$+3),d.emplaceBack(F+$,F+$+3,F+$+2),d.emplaceBack(H+$,H+$+3,H+$+1),d.emplaceBack(H+$,H+$+2,H+$+3);return this._mesh=new Is(e.createVertexBuffer(a,ah.members),e.createIndexBuffer(d),c.a0.simpleSegment(0,0,a.length,d.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*c.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,a){var d;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(e,a);return(d=this.getMinMaxElevation(p).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(e){const a=this.getTerrainData(e).tile,d={minElevation:null,maxElevation:null};return a&&a.dem&&(d.minElevation=a.dem.min*this.exaggeration,d.maxElevation=a.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(e,a){const d=c.Z.fromLngLat(e.wrap()),p=(1<<a)*c.X,_=d.x*p,E=d.y*p,P=Math.floor(_/c.X),A=Math.floor(E/c.X);return{tileID:new c.S(a,0,a,P,A),mercatorX:_,mercatorY:E}}}class Vu{constructor(e,a,d){this._context=e,this._size=a,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new xt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(d.texture),{id:e,fbo:a,texture:d,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>e.id!==a),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const Aa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Hu{constructor(e,a){this.painter=e,this.terrain=a,this.pool=new Vu(e.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(d=>!e._layers[d].isHidden(a)),this._coordsDescendingInv={};for(const d in e.sourceCaches){this._coordsDescendingInv[d]={};const p=e.sourceCaches[d].getVisibleCoordinates();for(const _ of p){const E=this.terrain.sourceCache.getTerrainCoords(_);for(const P in E)this._coordsDescendingInv[d][P]||(this._coordsDescendingInv[d][P]=[]),this._coordsDescendingInv[d][P].push(E[P])}}this._coordsDescendingInvStr={};for(const d of e._order){const p=e._layers[d],_=p.source;if(Aa[p.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const E in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][E]=this._coordsDescendingInv[_][E].map(P=>P.key).sort().join()}}for(const d of this._renderableTiles)for(const p in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[p][d.tileID.key];_&&_!==d.rttCoords[p]&&(d.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const a=e.type,d=this.painter,p=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Aa[a]&&(this._prevType&&Aa[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(e.id),!p))return!0;if(Aa[this._prevType]||Aa[a]&&p){this._prevType=a;const _=this._stacks.length-1,E=this._stacks[_]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(ad(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[_]){const F=this.pool.getObjectForId(P.rtt[_].id);if(F.stamp===P.rtt[_].stamp){this.pool.useObject(F);continue}}const A=this.pool.getOrCreateFreeObject();this.pool.useObject(A),this.pool.stampObject(A),P.rtt[_]={id:A.id,stamp:A.stamp},d.context.bindFramebuffer.set(A.fbo.framebuffer),d.context.clear({color:c.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let F=0;F<E.length;F++){const H=d.style._layers[E[F]],$=H.source?this._coordsDescendingInv[H.source][P.tileID.key]:[P.tileID];d.context.viewport.set([0,0,A.fbo.width,A.fbo.height]),d._renderTileClippingMasks(H,$),d.renderLayer(d,d.style.sourceCaches[H.source],H,$),H.source&&(P.rttCoords[H.source]=this._coordsDescendingInvStr[H.source][P.tileID.key])}}return ad(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Aa[a]}return!1}}const $u={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},El=R,Yo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ys,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Hn=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Zn={showCompass:!0,showZoom:!0,visualizePitch:!1};class Xo{constructor(e,a,d=!1){this.mousedown=E=>{this.startMouse(c.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),j.mousePos(this.element,E)),j.addEventListener(window,"mousemove",this.mousemove),j.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,j.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),j.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const p=e.dragRotate._mouseRotate.getClickTolerance(),_=e.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=wc({clickTolerance:p,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:P,bearingDegreesPerPixelMoved:A=.8})=>{const F=new nh;return new xo({clickTolerance:P,move:(H,$)=>({bearingDelta:($.x-H.x)*A}),moveStateManager:F,enable:E,assignEvents:Hn})})({clickTolerance:p,enable:!0}),this.map=e,d&&(this.mousePitch=Vn({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:P,pitchDegreesPerPixelMoved:A=-.5})=>{const F=new nh;return new xo({clickTolerance:P,move:(H,$)=>({pitchDelta:($.y-H.y)*A}),moveStateManager:F,enable:E,assignEvents:Hn})})({clickTolerance:_,enable:!0})),j.addEventListener(a,"mousedown",this.mousedown),j.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(a,"touchcancel",this.reset)}startMouse(e,a){this.mouseRotate.dragStart(e,a),this.mousePitch&&this.mousePitch.dragStart(e,a),j.disableDrag()}startTouch(e,a){this.touchRotate.dragStart(e,a),this.touchPitch&&this.touchPitch.dragStart(e,a),j.disableDrag()}moveMouse(e,a){const d=this.map,{bearingDelta:p}=this.mouseRotate.dragMove(e,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(e,a)||{};_&&d.setPitch(d.getPitch()+_)}}moveTouch(e,a){const d=this.map,{bearingDelta:p}=this.touchRotate.dragMove(e,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(e,a)||{};_&&d.setPitch(d.getPitch()+_)}}off(){const e=this.element;j.removeEventListener(e,"mousedown",this.mousedown),j.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend),j.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){j.enableDrag(),j.removeEventListener(window,"mousemove",this.mousemove),j.removeEventListener(window,"mouseup",this.mouseup),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend)}}let zn;function an(v,e,a){const d=new c.N(v.lng,v.lat);if(v=new c.N(v.lng,v.lat),e){const p=new c.N(v.lng-360,v.lat),_=new c.N(v.lng+360,v.lat),E=a.locationPoint(v).distSqr(e);a.locationPoint(p).distSqr(e)<E?v=p:a.locationPoint(_).distSqr(e)<E&&(v=_)}for(;Math.abs(v.lng-a.center.lng)>180;){const p=a.locationPoint(v);if(p.x>=0&&p.y>=0&&p.x<=a.width&&p.y<=a.height)break;v.lng>a.center.lng?v.lng-=360:v.lng+=360}return v.lng!==d.lng&&a.locationPoint(v).y>a.height/2-a.getHorizon()?v:d}const ca={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Eo(v,e,a){const d=v.classList;for(const p in ca)d.remove(`maplibregl-${a}-anchor-${p}`);d.add(`maplibregl-${a}-anchor-${e}`)}class Xi extends c.E{constructor(e){if(super(),this._onKeyPress=a=>{const d=a.code,p=a.charCode||a.keyCode;d!=="Space"&&d!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const d=a.originalEvent.target,p=this._element;this._popup&&(d===p||p.contains(d))&&this.togglePopup()},this._update=a=>{var d;if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?an(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,`${ca[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${_}`),U.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=c.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div");const a=j.createNS("http://www.w3.org/2000/svg","svg"),d=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${d}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${d}`);const _=j.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const E=j.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const P=j.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const De of A){const Be=j.createNS("http://www.w3.org/2000/svg","ellipse");Be.setAttributeNS(null,"opacity","0.04"),Be.setAttributeNS(null,"cx","10.5"),Be.setAttributeNS(null,"cy","5.80029008"),Be.setAttributeNS(null,"rx",De.rx),Be.setAttributeNS(null,"ry",De.ry),P.appendChild(Be)}const F=j.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const H=j.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(H);const $=j.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const ne=j.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(ne);const de=j.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(6.0, 7.0)"),de.setAttributeNS(null,"fill","#FFFFFF");const me=j.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=j.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const Ie=j.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#FFFFFF"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962"),me.appendChild(be),me.appendChild(Ie),E.appendChild(P),E.appendChild(F),E.appendChild($),E.appendChild(de),E.appendChild(me),a.appendChild(E),a.setAttributeNS(null,"height",d*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=c.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Eo(this._element,this._anchor,"marker"),e&&e.className)for(const a of e.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=c.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const p=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var a,d;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,_=p.terrain.depthAtPoint(this._pos),E=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,E)-_<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/p.transform._pixelPerMeter,A=Math.sin(p.getPitch()*Math.PI/180)*P,F=p.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),H=p.transform.lngLatToCameraDepth(this._lngLat,E+A)-F>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=c.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,a){return e===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Wu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let eu=0,tu=!1;const $s={maxWidth:100,unit:"metric"};function ru(v,e,a){const d=a&&a.maxWidth||100,p=v._container.clientHeight/2,_=v.unproject([0,p]),E=v.unproject([d,p]),P=_.distanceTo(E);if(a&&a.unit==="imperial"){const A=3.2808*P;A>5280?or(e,d,A/5280,v._getUIString("ScaleControl.Miles")):or(e,d,A,v._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?or(e,d,P/1852,v._getUIString("ScaleControl.NauticalMiles")):P>=1e3?or(e,d,P/1e3,v._getUIString("ScaleControl.Kilometers")):or(e,d,P,v._getUIString("ScaleControl.Meters"))}function or(v,e,a,d){const p=function(_){const E=Math.pow(10,`${Math.floor(_)}`.length-1);let P=_/E;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(A){const F=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*F)/F}(P),E*P}(a);v.style.width=e*(p/a)+"px",v.innerHTML=`${p}&nbsp;${d}`}const Er={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},nu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gu(v){if(v){if(typeof v=="number"){const e=Math.round(Math.abs(v)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,v),"top-left":new c.P(e,e),"top-right":new c.P(-e,e),bottom:new c.P(0,-v),"bottom-left":new c.P(e,-e),"bottom-right":new c.P(-e,-e),left:new c.P(v,0),right:new c.P(-v,0)}}if(v instanceof c.P||Array.isArray(v)){const e=c.P.convert(v);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:c.P.convert(v.center||[0,0]),top:c.P.convert(v.top||[0,0]),"top-left":c.P.convert(v["top-left"]||[0,0]),"top-right":c.P.convert(v["top-right"]||[0,0]),bottom:c.P.convert(v.bottom||[0,0]),"bottom-left":c.P.convert(v["bottom-left"]||[0,0]),"bottom-right":c.P.convert(v["bottom-right"]||[0,0]),left:c.P.convert(v.left||[0,0]),right:c.P.convert(v.right||[0,0])}}return Gu(new c.P(0,0))}const oh=R;S.AJAXError=c.bh,S.Evented=c.E,S.LngLat=c.N,S.MercatorCoordinate=c.Z,S.Point=c.P,S.addProtocol=c.bi,S.config=c.a,S.removeProtocol=c.bj,S.AttributionControl=Qa,S.BoxZoomHandler=Ps,S.CanvasSource=Lt,S.CooperativeGesturesHandler=Ql,S.DoubleClickZoomHandler=ko,S.DragPanHandler=Sc,S.DragRotateHandler=ld,S.EdgeInsets=wl,S.FullscreenControl=class extends c.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var e;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=a==null?void 0:a.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){j.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=j.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);j.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},S.GeoJSONSource=At,S.GeolocateControl=class extends c.E{constructor(v){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const a=new c.N(e.coords.longitude,e.coords.latitude),d=e.coords.accuracy,p=this._map.getBearing(),_=c.e({bearing:p},this.options.fitBoundsOptions),E=ye.fromLngLat(a,d);this._map.fitBounds(E,_,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const a=new c.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&tu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=j.create("button","maplibregl-ctrl-geolocate",this._container),j.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Xi({element:this._dotElement}),this._circleElement=j.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")),this.fire(new c.k("userlocationlostfocus")))})}},this.options=c.e({},Wu,v)}onAdd(v){return this._map=v,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(e=!1){if(zn!==void 0&&!e)return zn;if(window.navigator.permissions===void 0)return zn=!!window.navigator.geolocation,zn;try{zn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{zn=!!window.navigator.geolocation}return zn})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,eu=0,tu=!1}_isOutOfMapMaxBounds(v){const e=this._map.getMaxBounds(),a=v.coords;return e&&(a.longitude<e.getWest()||a.longitude>e.getEast()||a.latitude<e.getSouth()||a.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),e=v.getSouthEast(),a=v.getNorthEast(),d=e.distanceTo(a),p=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":eu--,tu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart")),this.fire(new c.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),eu++,eu>1?(v={maximumAge:6e5,timeout:0},tu=!0):(v=this.options.positionOptions,tu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},S.Hash=vc,S.ImageSource=Dt,S.KeyboardHandler=la,S.LngLatBounds=ye,S.LogoControl=Ma,S.Map=class extends Tl{constructor(v){c.bf.mark(c.bg.create);const e=Object.assign(Object.assign({},Yo),v);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Go(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new nn,this._controls=[],this._mapId=c.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},$u),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ge.addThrottleControl(()=>this.isMoving()),this._requestManager=new Oe(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=Ou(p=>{this._trackResize&&!this._removed&&(this.resize(p),this.redraw())},50);this._resizeObserver=new ResizeObserver(p=>{a?d(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Tc(this,e),this._hash=e.hash&&new vc(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,c.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Qa(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new Ma,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new c.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new c.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new c.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(v,e){if(e===void 0&&(e=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=v.onAdd(this);this._controls.push(v);const d=this._controlPositions[e];return e.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(v);return e>-1&&this._controls.splice(e,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,e,a,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,e,a,d)}resize(v){var e;const a=this._containerDimensions(),d=a[0],p=a[1],_=this._getClampedPixelRatio(d,p);if(this._resizeCanvas(d,p,_),this.painter.resize(d,p,_),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const A=this._getClampedPixelRatio(d,p);this._resizeCanvas(d,p,A),this.painter.resize(d,p,A)}this.transform.resize(d,p),(e=this._requestedCameraState)===null||e===void 0||e.resize(d,p);const E=!this._moving;return E&&(this.stop(),this.fire(new c.k("movestart",v)).fire(new c.k("move",v))),this.fire(new c.k("resize",v)),E&&this.fire(new c.k("moveend",v)),this}_getClampedPixelRatio(v,e){const{0:a,1:d}=this._maxCanvasSize,p=this.getPixelRatio(),_=v*p,E=e*p;return Math.min(_>a?a/_:1,E>d?d/E:1)*p}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(ye.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(c.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(c.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,e,a){if(v==="mouseenter"||v==="mouseover"){let d=!1;return{layers:e,listener:a,delegates:{mousemove:_=>{const E=e.filter(A=>this.getLayer(A)),P=E.length!==0?this.queryRenderedFeatures(_.point,{layers:E}):[];P.length?d||(d=!0,a.call(this,new Yi(v,this,_.originalEvent,{features:P}))):d=!1},mouseout:()=>{d=!1}}}}if(v==="mouseleave"||v==="mouseout"){let d=!1;return{layers:e,listener:a,delegates:{mousemove:E=>{const P=e.filter(A=>this.getLayer(A));(P.length!==0?this.queryRenderedFeatures(E.point,{layers:P}):[]).length?d=!0:d&&(d=!1,a.call(this,new Yi(v,this,E.originalEvent)))},mouseout:E=>{d&&(d=!1,a.call(this,new Yi(v,this,E.originalEvent)))}}}}{const d=p=>{const _=e.filter(P=>this.getLayer(P)),E=_.length!==0?this.queryRenderedFeatures(p.point,{layers:_}):[];E.length&&(p.features=E,a.call(this,p),delete p.features)};return{layers:e,listener:a,delegates:{[v]:d}}}}_saveDelegatedListener(v,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(e)}_removeDelegatedListener(v,e,a){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const d=this._delegatedListeners[v];for(let p=0;p<d.length;p++){const _=d[p];if(_.listener===a&&_.layers.length===e.length&&_.layers.every(E=>e.includes(E))){for(const E in _.delegates)this.off(E,_.delegates[E]);return void d.splice(p,1)}}}on(v,e,a){if(a===void 0)return super.on(v,e);const d=this._createDelegatedListener(v,typeof e=="string"?[e]:e,a);this._saveDelegatedListener(v,d);for(const p in d.delegates)this.on(p,d.delegates[p]);return this}once(v,e,a){if(a===void 0)return super.once(v,e);const d=typeof e=="string"?[e]:e,p=this._createDelegatedListener(v,d,a);for(const _ in p.delegates){const E=p.delegates[_];p.delegates[_]=(...P)=>{this._removeDelegatedListener(v,d,a),E(...P)}}this._saveDelegatedListener(v,p);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(v,e,a){return a===void 0?super.off(v,e):(this._removeDelegatedListener(v,typeof e=="string"?[e]:e,a),this)}queryRenderedFeatures(v,e){if(!this.style)return[];let a;const d=v instanceof c.P||Array.isArray(v),p=d?v:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(d?{}:v)||{},p instanceof c.P||typeof p[0]=="number")a=[c.P.convert(p)];else{const _=c.P.convert(p[0]),E=c.P.convert(p[1]);a=[_,new c.P(E.x,_.y),E,new c.P(_.x,E.y),_]}return this.style.queryRenderedFeatures(a,e,this.transform)}querySourceFeatures(v,e){return this.style.querySourceFeatures(v,e)}setStyle(v,e){return(e=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(v,e))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const e=this._locale[v];if(e==null)throw new Error(`Missing UI string '${v}'`);return e}_updateStyle(v,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,e));const a=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new K(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,e,a):this.style.loadJSON(v,e,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new K(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,e){if(typeof v=="string"){const a=this._requestManager.transformRequest(v,"Style");c.h(a,new AbortController).then(d=>{this._updateDiff(d.data,e)}).catch(d=>{d&&this.fire(new c.j(d))})}else typeof v=="object"&&this._updateDiff(v,e)}_updateDiff(v,e){try{this.style.setState(v,e)&&this._update(!0)}catch(a){c.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(v,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(v,e){return this._lazyInitEmptyStyle(),this.style.addSource(v,e),this._update(!0)}isSourceLoaded(v){const e=this.style&&this.style.sourceCaches[v];if(e!==void 0)return e.loaded();this.fire(new c.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const e=this.style.sourceCaches[v.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&e.reload();for(const a in this.style._layers){const d=this.style._layers[a];d.type==="hillshade"&&d.source===v.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new To(this.painter,e,v),this.painter.renderToTexture=new Hu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:v})),this}getTerrain(){var v,e;return(e=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const e in v){const a=v[e]._tiles;for(const d in a){const p=a[d];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,e,a={}){const{pixelRatio:d=1,sdf:p=!1,stretchX:_,stretchY:E,content:P,textFitWidth:A,textFitHeight:F}=a;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||c.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:H,height:$,data:ne}=e,de=e;return this.style.addImage(v,{data:new c.R({width:H,height:$},new Uint8Array(ne)),pixelRatio:d,stretchX:_,stretchY:E,content:P,textFitWidth:A,textFitHeight:F,sdf:p,version:0,userImage:de}),de.onAdd&&de.onAdd(this,v),this}}{const{width:H,height:$,data:ne}=U.getImageData(e);this.style.addImage(v,{data:new c.R({width:H,height:$},ne),pixelRatio:d,stretchX:_,stretchY:E,content:P,textFitWidth:A,textFitHeight:F,sdf:p,version:0})}}updateImage(v,e){const a=this.style.getImage(v);if(!a)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=e instanceof HTMLImageElement||c.b(e)?U.getImageData(e):e,{width:p,height:_,data:E}=d;if(p===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||_!==a.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(e instanceof HTMLImageElement||c.b(e));return a.data.replace(E,P),this.style.updateImage(v,a),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return ge.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,e){return this._lazyInitEmptyStyle(),this.style.addLayer(v,e),this._update(!0)}moveLayer(v,e){return this.style.moveLayer(v,e),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,e,a){return this.style.setLayerZoomRange(v,e,a),this._update(!0)}setFilter(v,e,a={}){return this.style.setFilter(v,e,a),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,e,a,d={}){return this.style.setPaintProperty(v,e,a,d),this._update(!0)}getPaintProperty(v,e){return this.style.getPaintProperty(v,e)}setLayoutProperty(v,e,a,d={}){return this.style.setLayoutProperty(v,e,a,d),this._update(!0)}getLayoutProperty(v,e){return this.style.getLayoutProperty(v,e)}setGlyphs(v,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,e,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,e,a,d=>{d||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,e,a=>{a||this._update(!0)}),this}setLight(v,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,e){return this.style.setFeatureState(v,e),this._update()}removeFeatureState(v,e){return this.style.removeFeatureState(v,e),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,e=0;return this._container&&(v=this._container.clientWidth||400,e=this._container.clientHeight||300),[v,e]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const e=this._canvasContainer=j.create("div","maplibregl-canvas-container",v);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=j.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),d=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],d);const p=this._controlContainer=j.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{_[E]=j.create("div",`maplibregl-ctrl-${E} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,e,a){this._canvas.width=Math.floor(a*v),this._canvas.height=Math.floor(a*e),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{e={requestedAttributes:v},d&&(e.statusMessage=d.statusMessage,e.type=d.type)},{once:!0});const a=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!a){const d="Failed to initialize WebGL";throw e?(e.message=d,new Error(JSON.stringify(e))):new Error(d)}this.painter=new Wo(a,this.transform),G.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const p=this.transform.zoom,_=U.now();this.style.zoomHistory.update(p,_);const E=new c.z(p,{now:_,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=E.crossFadingFactor();P===1&&P===this._crossFadingFactor||(a=!0,this._crossFadingFactor=P),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bf.mark(c.bg.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,c.bf.mark(c.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ge.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),j.remove(this._canvasContainer),j.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bf.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(v=>{c.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return El}getCameraTargetElevation(){return this.transform.elevation}},S.MapMouseEvent=Yi,S.MapTouchEvent=Ka,S.MapWheelEvent=eh,S.Marker=Xi,S.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const e=this._map.getZoom(),a=e===this._map.getMaxZoom(),d=e===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,a)=>{const d=this._map._getUIString(`NavigationControl.${a}`);e.title=d,e.setAttribute("aria-label",d)},this.options=c.e({},Zn,v),this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),j.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),j.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=j.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,e){const a=j.create("button",v,this._container);return a.type="button",a.addEventListener("click",e),a}},S.Popup=class extends c.E{constructor(v){super(),this.remove=()=>(this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=j.create("div","maplibregl-popup",this._map.getContainer()),this._tip=j.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?an(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!e)return;const d=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let p=this.options.anchor;const _=Gu(this.options.offset);if(!p){const P=this._container.offsetWidth,A=this._container.offsetHeight;let F;F=d.y+_.bottom.y<A?["top"]:d.y>this._map.transform.height-A?["bottom"]:[],d.x<P/2?F.push("left"):d.x>this._map.transform.width-P/2&&F.push("right"),p=F.length===0?"bottom":F.join("-")}let E=d.add(_[p]);this.options.subpixelPositioning||(E=E.round()),j.setTransform(this._container,`${ca[p]} translate(${E.x}px,${E.y}px)`),Eo(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Er),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=c.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const e=document.createDocumentFragment(),a=document.createElement("body");let d;for(a.innerHTML=v;d=a.firstChild,d;)e.appendChild(d);return this.setDOMContent(e)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=j.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(nu);v&&v.focus()}},S.RasterDEMTileSource=_t,S.RasterTileSource=Ne,S.ScaleControl=class{constructor(v){this._onMove=()=>{ru(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,ru(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},$s),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},S.ScrollZoomHandler=Ms,S.Style=K,S.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=j.create("button","maplibregl-ctrl-terrain",this._container),j.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){j.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},S.TwoFingersTouchPitchHandler=Kl,S.TwoFingersTouchRotateHandler=Xl,S.TwoFingersTouchZoomHandler=Uu,S.TwoFingersTouchZoomRotateHandler=kc,S.VectorTileSource=we,S.VideoSource=nr,S.addSourceType=(v,e)=>c._(void 0,void 0,void 0,function*(){if(sn(v))throw new Error(`A source type called "${v}" already exists.`);((a,d)=>{xr[a]=d})(v,e)}),S.clearPrewarmedResources=function(){const v=pr;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(bt),pr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},S.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},S.getRTLTextPluginStatus=function(){return In().getRTLTextPluginStatus()},S.getVersion=function(){return oh},S.getWorkerCount=function(){return wt.workerCount},S.getWorkerUrl=function(){return c.a.WORKER_URL},S.importScriptInWorkers=function(v){return Vr().broadcast("IS",v)},S.prewarm=function(){Kt().acquire(bt)},S.setMaxParallelImageRequests=function(v){c.a.MAX_PARALLEL_IMAGE_REQUESTS=v},S.setRTLTextPlugin=function(v,e){return In().setRTLTextPlugin(v,e)},S.setWorkerCount=function(v){wt.workerCount=v},S.setWorkerUrl=function(v){c.a.WORKER_URL=v}});var C=f;return C})}(fm)),fm.exports}var E1=T1();const Gv=af(E1),C1={version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"&copy; OpenStreetMap Contributors",maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]};var jc={},Vh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function I1(){if(P_)return Vh;P_=1;var n=ed();function h(z){for(var K="https://reactjs.org/docs/error-decoder.html?invariant="+z,he=1;he<arguments.length;he++)K+="&args[]="+encodeURIComponent(arguments[he]);return"Minified React error #"+z+"; visit "+K+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},C={};function S(z){return f.call(C,z)?!0:f.call(b,z)?!1:y.test(z)?C[z]=!0:(b[z]=!0,!1)}function c(z,K,he,ke,Ke,st,kt){this.acceptsBooleans=K===2||K===3||K===4,this.attributeName=ke,this.attributeNamespace=Ke,this.mustUseProperty=he,this.propertyName=z,this.type=K,this.sanitizeURL=st,this.removeEmptyString=kt}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(z){R[z]=new c(z,0,!1,z,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(z){var K=z[0];R[K]=new c(K,1,!1,z[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(z){R[z]=new c(z,2,!1,z.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(z){R[z]=new c(z,2,!1,z,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(z){R[z]=new c(z,3,!1,z.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(z){R[z]=new c(z,3,!0,z,null,!1,!1)}),["capture","download"].forEach(function(z){R[z]=new c(z,4,!1,z,null,!1,!1)}),["cols","rows","size","span"].forEach(function(z){R[z]=new c(z,6,!1,z,null,!1,!1)}),["rowSpan","start"].forEach(function(z){R[z]=new c(z,5,!1,z.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function Z(z){return z[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(z){var K=z.replace(N,Z);R[K]=new c(K,1,!1,z,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(z){var K=z.replace(N,Z);R[K]=new c(K,1,!1,z,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(z){var K=z.replace(N,Z);R[K]=new c(K,1,!1,z,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(z){R[z]=new c(z,1,!1,z.toLowerCase(),null,!1,!1)}),R.xlinkHref=new c("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(z){R[z]=new c(z,1,!1,z.toLowerCase(),null,!0,!0)});var U={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j=["Webkit","ms","Moz","O"];Object.keys(U).forEach(function(z){j.forEach(function(K){K=K+z.charAt(0).toUpperCase()+z.substring(1),U[K]=U[z]})});var G=/["'&<>]/;function se(z){if(typeof z=="boolean"||typeof z=="number")return""+z;z=""+z;var K=G.exec(z);if(K){var he="",ke,Ke=0;for(ke=K.index;ke<z.length;ke++){switch(z.charCodeAt(ke)){case 34:K="&quot;";break;case 38:K="&amp;";break;case 39:K="&#x27;";break;case 60:K="&lt;";break;case 62:K="&gt;";break;default:continue}Ke!==ke&&(he+=z.substring(Ke,ke)),Ke=ke+1,he+=K}z=Ke!==ke?he+z.substring(Ke,ke):he}return z}var J=/([A-Z])/g,oe=/^ms-/,re=Array.isArray;function pe(z,K){return{insertionMode:z,selectedValue:K}}function ge(z,K,he){switch(K){case"select":return pe(1,he.value!=null?he.value:he.defaultValue);case"svg":return pe(2,null);case"math":return pe(3,null);case"foreignObject":return pe(1,null);case"table":return pe(4,null);case"thead":case"tbody":case"tfoot":return pe(5,null);case"colgroup":return pe(7,null);case"tr":return pe(6,null)}return 4<=z.insertionMode||z.insertionMode===0?pe(1,null):z}var Oe=new Map;function ve(z,K,he){if(typeof he!="object")throw Error(h(62));K=!0;for(var ke in he)if(f.call(he,ke)){var Ke=he[ke];if(Ke!=null&&typeof Ke!="boolean"&&Ke!==""){if(ke.indexOf("--")===0){var st=se(ke);Ke=se((""+Ke).trim())}else{st=ke;var kt=Oe.get(st);kt!==void 0||(kt=se(st.replace(J,"-$1").toLowerCase().replace(oe,"-ms-")),Oe.set(st,kt)),st=kt,Ke=typeof Ke=="number"?Ke===0||f.call(U,ke)?""+Ke:Ke+"px":se((""+Ke).trim())}K?(K=!1,z.push(' style="',st,":",Ke)):z.push(";",st,":",Ke)}}K||z.push('"')}function Ge(z,K,he,ke){switch(he){case"style":ve(z,K,ke);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<he.length)||he[0]!=="o"&&he[0]!=="O"||he[1]!=="n"&&he[1]!=="N"){if(K=R.hasOwnProperty(he)?R[he]:null,K!==null){switch(typeof ke){case"function":case"symbol":return;case"boolean":if(!K.acceptsBooleans)return}switch(he=K.attributeName,K.type){case 3:ke&&z.push(" ",he,'=""');break;case 4:ke===!0?z.push(" ",he,'=""'):ke!==!1&&z.push(" ",he,'="',se(ke),'"');break;case 5:isNaN(ke)||z.push(" ",he,'="',se(ke),'"');break;case 6:!isNaN(ke)&&1<=ke&&z.push(" ",he,'="',se(ke),'"');break;default:K.sanitizeURL&&(ke=""+ke),z.push(" ",he,'="',se(ke),'"')}}else if(S(he)){switch(typeof ke){case"function":case"symbol":return;case"boolean":if(K=he.toLowerCase().slice(0,5),K!=="data-"&&K!=="aria-")return}z.push(" ",he,'="',se(ke),'"')}}}function je(z,K,he){if(K!=null){if(he!=null)throw Error(h(60));if(typeof K!="object"||!("__html"in K))throw Error(h(61));K=K.__html,K!=null&&z.push(""+K)}}function St(z){var K="";return n.Children.forEach(z,function(he){he!=null&&(K+=he)}),K}function at(z,K,he,ke){z.push(xe(he));var Ke=he=null,st;for(st in K)if(f.call(K,st)){var kt=K[st];if(kt!=null)switch(st){case"children":he=kt;break;case"dangerouslySetInnerHTML":Ke=kt;break;default:Ge(z,ke,st,kt)}}return z.push(">"),je(z,Ke,he),typeof he=="string"?(z.push(se(he)),null):he}var Mt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xt=new Map;function xe(z){var K=xt.get(z);if(K===void 0){if(!Mt.test(z))throw Error(h(65,z));K="<"+z,xt.set(z,K)}return K}function Je(z,K,he,ke,Ke){switch(K){case"select":z.push(xe("select"));var st=null,kt=null;for(Gr in he)if(f.call(he,Gr)){var Ht=he[Gr];if(Ht!=null)switch(Gr){case"children":st=Ht;break;case"dangerouslySetInnerHTML":kt=Ht;break;case"defaultValue":case"value":break;default:Ge(z,ke,Gr,Ht)}}return z.push(">"),je(z,kt,st),st;case"option":kt=Ke.selectedValue,z.push(xe("option"));var Qt=Ht=null,Or=null,Gr=null;for(st in he)if(f.call(he,st)){var vn=he[st];if(vn!=null)switch(st){case"children":Ht=vn;break;case"selected":Or=vn;break;case"dangerouslySetInnerHTML":Gr=vn;break;case"value":Qt=vn;default:Ge(z,ke,st,vn)}}if(kt!=null)if(he=Qt!==null?""+Qt:St(Ht),re(kt)){for(ke=0;ke<kt.length;ke++)if(""+kt[ke]===he){z.push(' selected=""');break}}else""+kt===he&&z.push(' selected=""');else Or&&z.push(' selected=""');return z.push(">"),je(z,Gr,Ht),Ht;case"textarea":z.push(xe("textarea")),Gr=kt=st=null;for(Ht in he)if(f.call(he,Ht)&&(Qt=he[Ht],Qt!=null))switch(Ht){case"children":Gr=Qt;break;case"value":st=Qt;break;case"defaultValue":kt=Qt;break;case"dangerouslySetInnerHTML":throw Error(h(91));default:Ge(z,ke,Ht,Qt)}if(st===null&&kt!==null&&(st=kt),z.push(">"),Gr!=null){if(st!=null)throw Error(h(92));if(re(Gr)&&1<Gr.length)throw Error(h(93));st=""+Gr}return typeof st=="string"&&st[0]===`
`&&z.push(`
`),st!==null&&z.push(se(""+st)),null;case"input":z.push(xe("input")),Qt=Gr=Ht=st=null;for(kt in he)if(f.call(he,kt)&&(Or=he[kt],Or!=null))switch(kt){case"children":case"dangerouslySetInnerHTML":throw Error(h(399,"input"));case"defaultChecked":Qt=Or;break;case"defaultValue":Ht=Or;break;case"checked":Gr=Or;break;case"value":st=Or;break;default:Ge(z,ke,kt,Or)}return Gr!==null?Ge(z,ke,"checked",Gr):Qt!==null&&Ge(z,ke,"checked",Qt),st!==null?Ge(z,ke,"value",st):Ht!==null&&Ge(z,ke,"value",Ht),z.push("/>"),null;case"menuitem":z.push(xe("menuitem"));for(var Fi in he)if(f.call(he,Fi)&&(st=he[Fi],st!=null))switch(Fi){case"children":case"dangerouslySetInnerHTML":throw Error(h(400));default:Ge(z,ke,Fi,st)}return z.push(">"),null;case"title":z.push(xe("title")),st=null;for(vn in he)if(f.call(he,vn)&&(kt=he[vn],kt!=null))switch(vn){case"children":st=kt;break;case"dangerouslySetInnerHTML":throw Error(h(434));default:Ge(z,ke,vn,kt)}return z.push(">"),st;case"listing":case"pre":z.push(xe(K)),kt=st=null;for(Qt in he)if(f.call(he,Qt)&&(Ht=he[Qt],Ht!=null))switch(Qt){case"children":st=Ht;break;case"dangerouslySetInnerHTML":kt=Ht;break;default:Ge(z,ke,Qt,Ht)}if(z.push(">"),kt!=null){if(st!=null)throw Error(h(60));if(typeof kt!="object"||!("__html"in kt))throw Error(h(61));he=kt.__html,he!=null&&(typeof he=="string"&&0<he.length&&he[0]===`
`?z.push(`
`,he):z.push(""+he))}return typeof st=="string"&&st[0]===`
`&&z.push(`
`),st;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":z.push(xe(K));for(var ps in he)if(f.call(he,ps)&&(st=he[ps],st!=null))switch(ps){case"children":case"dangerouslySetInnerHTML":throw Error(h(399,K));default:Ge(z,ke,ps,st)}return z.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return at(z,he,K,ke);case"html":return Ke.insertionMode===0&&z.push("<!DOCTYPE html>"),at(z,he,K,ke);default:if(K.indexOf("-")===-1&&typeof he.is!="string")return at(z,he,K,ke);z.push(xe(K)),kt=st=null;for(Or in he)if(f.call(he,Or)&&(Ht=he[Or],Ht!=null))switch(Or){case"children":st=Ht;break;case"dangerouslySetInnerHTML":kt=Ht;break;case"style":ve(z,ke,Ht);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:S(Or)&&typeof Ht!="function"&&typeof Ht!="symbol"&&z.push(" ",Or,'="',se(Ht),'"')}return z.push(">"),je(z,kt,st),st}}function W(z,K,he){if(z.push('<!--$?--><template id="'),he===null)throw Error(h(395));return z.push(he),z.push('"></template>')}function Ve(z,K,he,ke){switch(he.insertionMode){case 0:case 1:return z.push('<div hidden id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');case 2:return z.push('<svg aria-hidden="true" style="display:none" id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');case 3:return z.push('<math aria-hidden="true" style="display:none" id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');case 4:return z.push('<table hidden id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');case 5:return z.push('<table hidden><tbody id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');case 6:return z.push('<table hidden><tr id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');case 7:return z.push('<table hidden><colgroup id="'),z.push(K.segmentPrefix),K=ke.toString(16),z.push(K),z.push('">');default:throw Error(h(397))}}function zt(z,K){switch(K.insertionMode){case 0:case 1:return z.push("</div>");case 2:return z.push("</svg>");case 3:return z.push("</math>");case 4:return z.push("</table>");case 5:return z.push("</tbody></table>");case 6:return z.push("</tr></table>");case 7:return z.push("</colgroup></table>");default:throw Error(h(397))}}var Me=/[<\u2028\u2029]/g;function et(z){return JSON.stringify(z).replace(Me,function(K){switch(K){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Ze(z,K){return K=K===void 0?"":K,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:K+"P:",segmentPrefix:K+"S:",boundaryPrefix:K+"B:",idPrefix:K,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:z}}function ht(z,K,he,ke){return he.generateStaticMarkup?(z.push(se(K)),!1):(K===""?z=ke:(ke&&z.push("<!-- -->"),z.push(se(K)),z=!0),z)}var ae=Object.assign,_e=Symbol.for("react.element"),Ct=Symbol.for("react.portal"),bt=Symbol.for("react.fragment"),wt=Symbol.for("react.strict_mode"),lr=Symbol.for("react.profiler"),pr=Symbol.for("react.provider"),Gt=Symbol.for("react.context"),Kt=Symbol.for("react.forward_ref"),Mr=Symbol.for("react.suspense"),Vr=Symbol.for("react.suspense_list"),tn=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),Y=Symbol.for("react.scope"),ft=Symbol.for("react.debug_trace_mode"),ye=Symbol.for("react.legacy_hidden"),Ae=Symbol.for("react.default_value"),we=Symbol.iterator;function Ne(z){if(z==null)return null;if(typeof z=="function")return z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case bt:return"Fragment";case Ct:return"Portal";case lr:return"Profiler";case wt:return"StrictMode";case Mr:return"Suspense";case Vr:return"SuspenseList"}if(typeof z=="object")switch(z.$$typeof){case Gt:return(z.displayName||"Context")+".Consumer";case pr:return(z._context.displayName||"Context")+".Provider";case Kt:var K=z.render;return z=z.displayName,z||(z=K.displayName||K.name||"",z=z!==""?"ForwardRef("+z+")":"ForwardRef"),z;case tn:return K=z.displayName||null,K!==null?K:Ne(z.type)||"Memo";case Kr:K=z._payload,z=z._init;try{return Ne(z(K))}catch{}}return null}var _t={};function At(z,K){if(z=z.contextTypes,!z)return _t;var he={},ke;for(ke in z)he[ke]=K[ke];return he}var nt=null;function Dt(z,K){if(z!==K){z.context._currentValue2=z.parentValue,z=z.parent;var he=K.parent;if(z===null){if(he!==null)throw Error(h(401))}else{if(he===null)throw Error(h(401));Dt(z,he)}K.context._currentValue2=K.value}}function nr(z){z.context._currentValue2=z.parentValue,z=z.parent,z!==null&&nr(z)}function Lt(z){var K=z.parent;K!==null&&Lt(K),z.context._currentValue2=z.value}function xr(z,K){if(z.context._currentValue2=z.parentValue,z=z.parent,z===null)throw Error(h(402));z.depth===K.depth?Dt(z,K):xr(z,K)}function sn(z,K){var he=K.parent;if(he===null)throw Error(h(402));z.depth===he.depth?Dt(z,he):sn(z,he),K.context._currentValue2=K.value}function vt(z){var K=nt;K!==z&&(K===null?Lt(z):z===null?nr(K):K.depth===z.depth?Dt(K,z):K.depth>z.depth?xr(K,z):sn(K,z),nt=z)}var Cn={isMounted:function(){return!1},enqueueSetState:function(z,K){z=z._reactInternals,z.queue!==null&&z.queue.push(K)},enqueueReplaceState:function(z,K){z=z._reactInternals,z.replace=!0,z.queue=[K]},enqueueForceUpdate:function(){}};function Sn(z,K,he,ke){var Ke=z.state!==void 0?z.state:null;z.updater=Cn,z.props=he,z.state=Ke;var st={queue:[],replace:!1};z._reactInternals=st;var kt=K.contextType;if(z.context=typeof kt=="object"&&kt!==null?kt._currentValue2:ke,kt=K.getDerivedStateFromProps,typeof kt=="function"&&(kt=kt(he,Ke),Ke=kt==null?Ke:ae({},Ke,kt),z.state=Ke),typeof K.getDerivedStateFromProps!="function"&&typeof z.getSnapshotBeforeUpdate!="function"&&(typeof z.UNSAFE_componentWillMount=="function"||typeof z.componentWillMount=="function"))if(K=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),K!==z.state&&Cn.enqueueReplaceState(z,z.state,null),st.queue!==null&&0<st.queue.length)if(K=st.queue,kt=st.replace,st.queue=null,st.replace=!1,kt&&K.length===1)z.state=K[0];else{for(st=kt?K[0]:z.state,Ke=!0,kt=kt?1:0;kt<K.length;kt++){var Ht=K[kt];Ht=typeof Ht=="function"?Ht.call(z,st,he,ke):Ht,Ht!=null&&(Ke?(Ke=!1,st=ae({},st,Ht)):ae(st,Ht))}z.state=st}else st.queue=null}var In={id:1,overflow:""};function wi(z,K,he){var ke=z.id;z=z.overflow;var Ke=32-Pt(ke)-1;ke&=~(1<<Ke),he+=1;var st=32-Pt(K)+Ke;if(30<st){var kt=Ke-Ke%5;return st=(ke&(1<<kt)-1).toString(32),ke>>=kt,Ke-=kt,{id:1<<32-Pt(K)+Ke|he<<Ke|ke,overflow:st+z}}return{id:1<<st|he<<Ke|ke,overflow:z}}var Pt=Math.clz32?Math.clz32:kn,Lr=Math.log,kr=Math.LN2;function kn(z){return z>>>=0,z===0?32:31-(Lr(z)/kr|0)|0}function bi(z,K){return z===K&&(z!==0||1/z===1/K)||z!==z&&K!==K}var Ar=typeof Object.is=="function"?Object.is:bi,Nn=null,Ri=null,si=null,Hr=null,Ce=!1,ee=!1,Q=0,ue=null,Se=0;function Fe(){if(Nn===null)throw Error(h(321));return Nn}function $e(){if(0<Se)throw Error(h(312));return{memoizedState:null,queue:null,next:null}}function Xe(){return Hr===null?si===null?(Ce=!1,si=Hr=$e()):(Ce=!0,Hr=si):Hr.next===null?(Ce=!1,Hr=Hr.next=$e()):(Ce=!0,Hr=Hr.next),Hr}function Le(){Ri=Nn=null,ee=!1,si=null,Se=0,Hr=ue=null}function pt(z,K){return typeof K=="function"?K(z):K}function It(z,K,he){if(Nn=Fe(),Hr=Xe(),Ce){var ke=Hr.queue;if(K=ke.dispatch,ue!==null&&(he=ue.get(ke),he!==void 0)){ue.delete(ke),ke=Hr.memoizedState;do ke=z(ke,he.action),he=he.next;while(he!==null);return Hr.memoizedState=ke,[ke,K]}return[Hr.memoizedState,K]}return z=z===pt?typeof K=="function"?K():K:he!==void 0?he(K):K,Hr.memoizedState=z,z=Hr.queue={last:null,dispatch:null},z=z.dispatch=Nt.bind(null,Nn,z),[Hr.memoizedState,z]}function ut(z,K){if(Nn=Fe(),Hr=Xe(),K=K===void 0?null:K,Hr!==null){var he=Hr.memoizedState;if(he!==null&&K!==null){var ke=he[1];e:if(ke===null)ke=!1;else{for(var Ke=0;Ke<ke.length&&Ke<K.length;Ke++)if(!Ar(K[Ke],ke[Ke])){ke=!1;break e}ke=!0}if(ke)return he[0]}}return z=z(),Hr.memoizedState=[z,K],z}function Nt(z,K,he){if(25<=Se)throw Error(h(301));if(z===Nn)if(ee=!0,z={action:he,next:null},ue===null&&(ue=new Map),he=ue.get(K),he===void 0)ue.set(K,z);else{for(K=he;K.next!==null;)K=K.next;K.next=z}}function hr(){throw Error(h(394))}function mr(){}var rn={readContext:function(z){return z._currentValue2},useContext:function(z){return Fe(),z._currentValue2},useMemo:ut,useReducer:It,useRef:function(z){Nn=Fe(),Hr=Xe();var K=Hr.memoizedState;return K===null?(z={current:z},Hr.memoizedState=z):K},useState:function(z){return It(pt,z)},useInsertionEffect:mr,useLayoutEffect:function(){},useCallback:function(z,K){return ut(function(){return z},K)},useImperativeHandle:mr,useEffect:mr,useDebugValue:mr,useDeferredValue:function(z){return Fe(),z},useTransition:function(){return Fe(),[!1,hr]},useId:function(){var z=Ri.treeContext,K=z.overflow;z=z.id,z=(z&~(1<<32-Pt(z)-1)).toString(32)+K;var he=Rr;if(he===null)throw Error(h(404));return K=Q++,z=":"+he.idPrefix+"R"+z,0<K&&(z+="H"+K.toString(32)),z+":"},useMutableSource:function(z,K){return Fe(),K(z._source)},useSyncExternalStore:function(z,K,he){if(he===void 0)throw Error(h(407));return he()}},Rr=null,en=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Wr(z){return console.error(z),null}function Pn(){}function An(z,K,he,ke,Ke,st,kt,Ht,Qt){var Or=[],Gr=new Set;return K={destination:null,responseState:K,progressiveChunkSize:ke===void 0?12800:ke,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Gr,pingedTasks:Or,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Ke===void 0?Wr:Ke,onAllReady:Pn,onShellReady:kt===void 0?Pn:kt,onShellError:Pn,onFatalError:Pn},he=on(K,0,null,he,!1,!1),he.parentFlushed=!0,z=Zr(K,z,null,he,Gr,_t,null,In),Or.push(z),K}function Zr(z,K,he,ke,Ke,st,kt,Ht){z.allPendingTasks++,he===null?z.pendingRootTasks++:he.pendingTasks++;var Qt={node:K,ping:function(){var Or=z.pingedTasks;Or.push(Qt),Or.length===1&&Ti(z)},blockedBoundary:he,blockedSegment:ke,abortSet:Ke,legacyContext:st,context:kt,treeContext:Ht};return Ke.add(Qt),Qt}function on(z,K,he,ke,Ke,st){return{status:0,id:-1,index:K,parentFlushed:!1,chunks:[],children:[],formatContext:ke,boundary:he,lastPushedText:Ke,textEmbedded:st}}function pn(z,K){if(z=z.onError(K),z!=null&&typeof z!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof z+'" instead');return z}function Wn(z,K){var he=z.onShellError;he(K),he=z.onFatalError,he(K),z.destination!==null?(z.status=2,z.destination.destroy(K)):(z.status=1,z.fatalError=K)}function ai(z,K,he,ke,Ke){for(Nn={},Ri=K,Q=0,z=he(ke,Ke);ee;)ee=!1,Q=0,Se+=1,Hr=null,z=he(ke,Ke);return Le(),z}function Si(z,K,he,ke){var Ke=he.render(),st=ke.childContextTypes;if(st!=null){var kt=K.legacyContext;if(typeof he.getChildContext!="function")ke=kt;else{he=he.getChildContext();for(var Ht in he)if(!(Ht in st))throw Error(h(108,Ne(ke)||"Unknown",Ht));ke=ae({},kt,he)}K.legacyContext=ke,Li(z,K,Ke),K.legacyContext=kt}else Li(z,K,Ke)}function Sa(z,K){if(z&&z.defaultProps){K=ae({},K),z=z.defaultProps;for(var he in z)K[he]===void 0&&(K[he]=z[he]);return K}return K}function Dr(z,K,he,ke,Ke){if(typeof he=="function")if(he.prototype&&he.prototype.isReactComponent){Ke=At(he,K.legacyContext);var st=he.contextType;st=new he(ke,typeof st=="object"&&st!==null?st._currentValue2:Ke),Sn(st,he,ke,Ke),Si(z,K,st,he)}else{st=At(he,K.legacyContext),Ke=ai(z,K,he,ke,st);var kt=Q!==0;if(typeof Ke=="object"&&Ke!==null&&typeof Ke.render=="function"&&Ke.$$typeof===void 0)Sn(Ke,he,ke,st),Si(z,K,Ke,he);else if(kt){ke=K.treeContext,K.treeContext=wi(ke,1,0);try{Li(z,K,Ke)}finally{K.treeContext=ke}}else Li(z,K,Ke)}else if(typeof he=="string"){switch(Ke=K.blockedSegment,st=Je(Ke.chunks,he,ke,z.responseState,Ke.formatContext),Ke.lastPushedText=!1,kt=Ke.formatContext,Ke.formatContext=ge(kt,he,ke),ki(z,K,st),Ke.formatContext=kt,he){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:Ke.chunks.push("</",he,">")}Ke.lastPushedText=!1}else{switch(he){case ye:case ft:case wt:case lr:case bt:Li(z,K,ke.children);return;case Vr:Li(z,K,ke.children);return;case Y:throw Error(h(343));case Mr:e:{he=K.blockedBoundary,Ke=K.blockedSegment,st=ke.fallback,ke=ke.children,kt=new Set;var Ht={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:kt,errorDigest:null},Qt=on(z,Ke.chunks.length,Ht,Ke.formatContext,!1,!1);Ke.children.push(Qt),Ke.lastPushedText=!1;var Or=on(z,0,null,Ke.formatContext,!1,!1);Or.parentFlushed=!0,K.blockedBoundary=Ht,K.blockedSegment=Or;try{if(ki(z,K,ke),z.responseState.generateStaticMarkup||Or.lastPushedText&&Or.textEmbedded&&Or.chunks.push("<!-- -->"),Or.status=1,hi(Ht,Or),Ht.pendingTasks===0)break e}catch(Gr){Or.status=4,Ht.forceClientRender=!0,Ht.errorDigest=pn(z,Gr)}finally{K.blockedBoundary=he,K.blockedSegment=Ke}K=Zr(z,st,he,Qt,kt,K.legacyContext,K.context,K.treeContext),z.pingedTasks.push(K)}return}if(typeof he=="object"&&he!==null)switch(he.$$typeof){case Kt:if(ke=ai(z,K,he.render,ke,Ke),Q!==0){he=K.treeContext,K.treeContext=wi(he,1,0);try{Li(z,K,ke)}finally{K.treeContext=he}}else Li(z,K,ke);return;case tn:he=he.type,ke=Sa(he,ke),Dr(z,K,he,ke,Ke);return;case pr:if(Ke=ke.children,he=he._context,ke=ke.value,st=he._currentValue2,he._currentValue2=ke,kt=nt,nt=ke={parent:kt,depth:kt===null?0:kt.depth+1,context:he,parentValue:st,value:ke},K.context=ke,Li(z,K,Ke),z=nt,z===null)throw Error(h(403));ke=z.parentValue,z.context._currentValue2=ke===Ae?z.context._defaultValue:ke,z=nt=z.parent,K.context=z;return;case Gt:ke=ke.children,ke=ke(he._currentValue2),Li(z,K,ke);return;case Kr:Ke=he._init,he=Ke(he._payload),ke=Sa(he,ke),Dr(z,K,he,ke,void 0);return}throw Error(h(130,he==null?he:typeof he,""))}}function Li(z,K,he){if(K.node=he,typeof he=="object"&&he!==null){switch(he.$$typeof){case _e:Dr(z,K,he.type,he.props,he.ref);return;case Ct:throw Error(h(257));case Kr:var ke=he._init;he=ke(he._payload),Li(z,K,he);return}if(re(he)){Za(z,K,he);return}if(he===null||typeof he!="object"?ke=null:(ke=we&&he[we]||he["@@iterator"],ke=typeof ke=="function"?ke:null),ke&&(ke=ke.call(he))){if(he=ke.next(),!he.done){var Ke=[];do Ke.push(he.value),he=ke.next();while(!he.done);Za(z,K,Ke)}return}throw z=Object.prototype.toString.call(he),Error(h(31,z==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":z))}typeof he=="string"?(ke=K.blockedSegment,ke.lastPushedText=ht(K.blockedSegment.chunks,he,z.responseState,ke.lastPushedText)):typeof he=="number"&&(ke=K.blockedSegment,ke.lastPushedText=ht(K.blockedSegment.chunks,""+he,z.responseState,ke.lastPushedText))}function Za(z,K,he){for(var ke=he.length,Ke=0;Ke<ke;Ke++){var st=K.treeContext;K.treeContext=wi(st,ke,Ke);try{ki(z,K,he[Ke])}finally{K.treeContext=st}}}function ki(z,K,he){var ke=K.blockedSegment.formatContext,Ke=K.legacyContext,st=K.context;try{return Li(z,K,he)}catch(Qt){if(Le(),typeof Qt=="object"&&Qt!==null&&typeof Qt.then=="function"){he=Qt;var kt=K.blockedSegment,Ht=on(z,kt.chunks.length,null,kt.formatContext,kt.lastPushedText,!0);kt.children.push(Ht),kt.lastPushedText=!1,z=Zr(z,K.node,K.blockedBoundary,Ht,K.abortSet,K.legacyContext,K.context,K.treeContext).ping,he.then(z,z),K.blockedSegment.formatContext=ke,K.legacyContext=Ke,K.context=st,vt(st)}else throw K.blockedSegment.formatContext=ke,K.legacyContext=Ke,K.context=st,vt(st),Qt}}function ci(z){var K=z.blockedBoundary;z=z.blockedSegment,z.status=3,Jn(this,K,z)}function Nl(z,K,he){var ke=z.blockedBoundary;z.blockedSegment.status=3,ke===null?(K.allPendingTasks--,K.status!==2&&(K.status=2,K.destination!==null&&K.destination.push(null))):(ke.pendingTasks--,ke.forceClientRender||(ke.forceClientRender=!0,z=he===void 0?Error(h(432)):he,ke.errorDigest=K.onError(z),ke.parentFlushed&&K.clientRenderedBoundaries.push(ke)),ke.fallbackAbortableTasks.forEach(function(Ke){return Nl(Ke,K,he)}),ke.fallbackAbortableTasks.clear(),K.allPendingTasks--,K.allPendingTasks===0&&(ke=K.onAllReady,ke()))}function hi(z,K){if(K.chunks.length===0&&K.children.length===1&&K.children[0].boundary===null){var he=K.children[0];he.id=K.id,he.parentFlushed=!0,he.status===1&&hi(z,he)}else z.completedSegments.push(K)}function Jn(z,K,he){if(K===null){if(he.parentFlushed){if(z.completedRootSegment!==null)throw Error(h(389));z.completedRootSegment=he}z.pendingRootTasks--,z.pendingRootTasks===0&&(z.onShellError=Pn,K=z.onShellReady,K())}else K.pendingTasks--,K.forceClientRender||(K.pendingTasks===0?(he.parentFlushed&&he.status===1&&hi(K,he),K.parentFlushed&&z.completedBoundaries.push(K),K.fallbackAbortableTasks.forEach(ci,z),K.fallbackAbortableTasks.clear()):he.parentFlushed&&he.status===1&&(hi(K,he),K.completedSegments.length===1&&K.parentFlushed&&z.partialBoundaries.push(K)));z.allPendingTasks--,z.allPendingTasks===0&&(z=z.onAllReady,z())}function Ti(z){if(z.status!==2){var K=nt,he=en.current;en.current=rn;var ke=Rr;Rr=z.responseState;try{var Ke=z.pingedTasks,st;for(st=0;st<Ke.length;st++){var kt=Ke[st],Ht=z,Qt=kt.blockedSegment;if(Qt.status===0){vt(kt.context);try{Li(Ht,kt,kt.node),Ht.responseState.generateStaticMarkup||Qt.lastPushedText&&Qt.textEmbedded&&Qt.chunks.push("<!-- -->"),kt.abortSet.delete(kt),Qt.status=1,Jn(Ht,kt.blockedBoundary,Qt)}catch(rs){if(Le(),typeof rs=="object"&&rs!==null&&typeof rs.then=="function"){var Or=kt.ping;rs.then(Or,Or)}else{kt.abortSet.delete(kt),Qt.status=4;var Gr=kt.blockedBoundary,vn=rs,Fi=pn(Ht,vn);if(Gr===null?Wn(Ht,vn):(Gr.pendingTasks--,Gr.forceClientRender||(Gr.forceClientRender=!0,Gr.errorDigest=Fi,Gr.parentFlushed&&Ht.clientRenderedBoundaries.push(Gr))),Ht.allPendingTasks--,Ht.allPendingTasks===0){var ps=Ht.onAllReady;ps()}}}finally{}}}Ke.splice(0,st),z.destination!==null&&Ss(z,z.destination)}catch(rs){pn(z,rs),Wn(z,rs)}finally{Rr=ke,en.current=he,he===rn&&vt(K)}}}function fs(z,K,he){switch(he.parentFlushed=!0,he.status){case 0:var ke=he.id=z.nextSegmentId++;return he.lastPushedText=!1,he.textEmbedded=!1,z=z.responseState,K.push('<template id="'),K.push(z.placeholderPrefix),z=ke.toString(16),K.push(z),K.push('"></template>');case 1:he.status=2;var Ke=!0;ke=he.chunks;var st=0;he=he.children;for(var kt=0;kt<he.length;kt++){for(Ke=he[kt];st<Ke.index;st++)K.push(ke[st]);Ke=ln(z,K,Ke)}for(;st<ke.length-1;st++)K.push(ke[st]);return st<ke.length&&(Ke=K.push(ke[st])),Ke;default:throw Error(h(390))}}function ln(z,K,he){var ke=he.boundary;if(ke===null)return fs(z,K,he);if(ke.parentFlushed=!0,ke.forceClientRender)return z.responseState.generateStaticMarkup||(ke=ke.errorDigest,K.push("<!--$!-->"),K.push("<template"),ke&&(K.push(' data-dgst="'),ke=se(ke),K.push(ke),K.push('"')),K.push("></template>")),fs(z,K,he),z=z.responseState.generateStaticMarkup?!0:K.push("<!--/$-->"),z;if(0<ke.pendingTasks){ke.rootSegmentID=z.nextSegmentId++,0<ke.completedSegments.length&&z.partialBoundaries.push(ke);var Ke=z.responseState,st=Ke.nextSuspenseID++;return Ke=Ke.boundaryPrefix+st.toString(16),ke=ke.id=Ke,W(K,z.responseState,ke),fs(z,K,he),K.push("<!--/$-->")}if(ke.byteSize>z.progressiveChunkSize)return ke.rootSegmentID=z.nextSegmentId++,z.completedBoundaries.push(ke),W(K,z.responseState,ke.id),fs(z,K,he),K.push("<!--/$-->");if(z.responseState.generateStaticMarkup||K.push("<!--$-->"),he=ke.completedSegments,he.length!==1)throw Error(h(391));return ln(z,K,he[0]),z=z.responseState.generateStaticMarkup?!0:K.push("<!--/$-->"),z}function ka(z,K,he){return Ve(K,z.responseState,he.formatContext,he.id),ln(z,K,he),zt(K,he.formatContext)}function Zi(z,K,he){for(var ke=he.completedSegments,Ke=0;Ke<ke.length;Ke++)jn(z,K,he,ke[Ke]);if(ke.length=0,z=z.responseState,ke=he.id,he=he.rootSegmentID,K.push(z.startInlineScript),z.sentCompleteBoundaryFunction?K.push('$RC("'):(z.sentCompleteBoundaryFunction=!0,K.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),ke===null)throw Error(h(395));return he=he.toString(16),K.push(ke),K.push('","'),K.push(z.segmentPrefix),K.push(he),K.push('")<\/script>')}function jn(z,K,he,ke){if(ke.status===2)return!0;var Ke=ke.id;if(Ke===-1){if((ke.id=he.rootSegmentID)===-1)throw Error(h(392));return ka(z,K,ke)}return ka(z,K,ke),z=z.responseState,K.push(z.startInlineScript),z.sentCompleteSegmentFunction?K.push('$RS("'):(z.sentCompleteSegmentFunction=!0,K.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),K.push(z.segmentPrefix),Ke=Ke.toString(16),K.push(Ke),K.push('","'),K.push(z.placeholderPrefix),K.push(Ke),K.push('")<\/script>')}function Ss(z,K){try{var he=z.completedRootSegment;if(he!==null&&z.pendingRootTasks===0){ln(z,K,he),z.completedRootSegment=null;var ke=z.responseState.bootstrapChunks;for(he=0;he<ke.length-1;he++)K.push(ke[he]);he<ke.length&&K.push(ke[he])}var Ke=z.clientRenderedBoundaries,st;for(st=0;st<Ke.length;st++){var kt=Ke[st];ke=K;var Ht=z.responseState,Qt=kt.id,Or=kt.errorDigest,Gr=kt.errorMessage,vn=kt.errorComponentStack;if(ke.push(Ht.startInlineScript),Ht.sentClientRenderFunction?ke.push('$RX("'):(Ht.sentClientRenderFunction=!0,ke.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),Qt===null)throw Error(h(395));if(ke.push(Qt),ke.push('"'),Or||Gr||vn){ke.push(",");var Fi=et(Or||"");ke.push(Fi)}if(Gr||vn){ke.push(",");var ps=et(Gr||"");ke.push(ps)}if(vn){ke.push(",");var rs=et(vn);ke.push(rs)}if(!ke.push(")<\/script>")){z.destination=null,st++,Ke.splice(0,st);return}}Ke.splice(0,st);var ta=z.completedBoundaries;for(st=0;st<ta.length;st++)if(!Zi(z,K,ta[st])){z.destination=null,st++,ta.splice(0,st);return}ta.splice(0,st);var ks=z.partialBoundaries;for(st=0;st<ks.length;st++){var Ci=ks[st];e:{Ke=z,kt=K;var Ii=Ci.completedSegments;for(Ht=0;Ht<Ii.length;Ht++)if(!jn(Ke,kt,Ci,Ii[Ht])){Ht++,Ii.splice(0,Ht);var Gn=!1;break e}Ii.splice(0,Ht),Gn=!0}if(!Gn){z.destination=null,st++,ks.splice(0,st);return}}ks.splice(0,st);var Un=z.completedBoundaries;for(st=0;st<Un.length;st++)if(!Zi(z,K,Un[st])){z.destination=null,st++,Un.splice(0,st);return}Un.splice(0,st)}finally{z.allPendingTasks===0&&z.pingedTasks.length===0&&z.clientRenderedBoundaries.length===0&&z.completedBoundaries.length===0&&K.push(null)}}function Oi(z,K){try{var he=z.abortableTasks;he.forEach(function(ke){return Nl(ke,z,K)}),he.clear(),z.destination!==null&&Ss(z,z.destination)}catch(ke){pn(z,ke),Wn(z,ke)}}function ea(){}function Ei(z,K,he,ke){var Ke=!1,st=null,kt="",Ht={push:function(Or){return Or!==null&&(kt+=Or),!0},destroy:function(Or){Ke=!0,st=Or}},Qt=!1;if(z=An(z,Ze(he,K?K.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,ea,void 0,function(){Qt=!0}),Ti(z),Oi(z,ke),z.status===1)z.status=2,Ht.destroy(z.fatalError);else if(z.status!==2&&z.destination===null){z.destination=Ht;try{Ss(z,Ht)}catch(Or){pn(z,Or),Wn(z,Or)}}if(Ke)throw st;if(!Qt)throw Error(h(426));return kt}return Vh.renderToNodeStream=function(){throw Error(h(207))},Vh.renderToStaticMarkup=function(z,K){return Ei(z,K,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Vh.renderToStaticNodeStream=function(){throw Error(h(208))},Vh.renderToString=function(z,K){return Ei(z,K,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Vh.version="18.3.1",Vh}var tm={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function P1(){if(M_)return tm;M_=1;var n=ed();function h(L){for(var X="https://reactjs.org/docs/error-decoder.html?invariant="+L,ce=1;ce<arguments.length;ce++)X+="&args[]="+encodeURIComponent(arguments[ce]);return"Minified React error #"+L+"; visit "+X+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=null,y=0;function b(L,X){if(X.length!==0)if(512<X.length)0<y&&(L.enqueue(new Uint8Array(f.buffer,0,y)),f=new Uint8Array(512),y=0),L.enqueue(X);else{var ce=f.length-y;ce<X.length&&(ce===0?L.enqueue(f):(f.set(X.subarray(0,ce),y),L.enqueue(f),X=X.subarray(ce)),f=new Uint8Array(512),y=0),f.set(X,y),y+=X.length}}function C(L,X){return b(L,X),!0}function S(L){f&&0<y&&(L.enqueue(new Uint8Array(f.buffer,0,y)),f=null,y=0)}var c=new TextEncoder;function R(L){return c.encode(L)}function N(L){return c.encode(L)}function Z(L,X){typeof L.error=="function"?L.error(X):L.close()}var U=Object.prototype.hasOwnProperty,j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G={},se={};function J(L){return U.call(se,L)?!0:U.call(G,L)?!1:j.test(L)?se[L]=!0:(G[L]=!0,!1)}function oe(L,X,ce,Te,tt,ot,ct){this.acceptsBooleans=X===2||X===3||X===4,this.attributeName=Te,this.attributeNamespace=tt,this.mustUseProperty=ce,this.propertyName=L,this.type=X,this.sanitizeURL=ot,this.removeEmptyString=ct}var re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(L){re[L]=new oe(L,0,!1,L,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(L){var X=L[0];re[X]=new oe(X,1,!1,L[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(L){re[L]=new oe(L,2,!1,L.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(L){re[L]=new oe(L,2,!1,L,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(L){re[L]=new oe(L,3,!1,L.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(L){re[L]=new oe(L,3,!0,L,null,!1,!1)}),["capture","download"].forEach(function(L){re[L]=new oe(L,4,!1,L,null,!1,!1)}),["cols","rows","size","span"].forEach(function(L){re[L]=new oe(L,6,!1,L,null,!1,!1)}),["rowSpan","start"].forEach(function(L){re[L]=new oe(L,5,!1,L.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function ge(L){return L[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(L){var X=L.replace(pe,ge);re[X]=new oe(X,1,!1,L,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(L){var X=L.replace(pe,ge);re[X]=new oe(X,1,!1,L,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(L){var X=L.replace(pe,ge);re[X]=new oe(X,1,!1,L,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(L){re[L]=new oe(L,1,!1,L.toLowerCase(),null,!1,!1)}),re.xlinkHref=new oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(L){re[L]=new oe(L,1,!1,L.toLowerCase(),null,!0,!0)});var Oe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];Object.keys(Oe).forEach(function(L){ve.forEach(function(X){X=X+L.charAt(0).toUpperCase()+L.substring(1),Oe[X]=Oe[L]})});var Ge=/["'&<>]/;function je(L){if(typeof L=="boolean"||typeof L=="number")return""+L;L=""+L;var X=Ge.exec(L);if(X){var ce="",Te,tt=0;for(Te=X.index;Te<L.length;Te++){switch(L.charCodeAt(Te)){case 34:X="&quot;";break;case 38:X="&amp;";break;case 39:X="&#x27;";break;case 60:X="&lt;";break;case 62:X="&gt;";break;default:continue}tt!==Te&&(ce+=L.substring(tt,Te)),tt=Te+1,ce+=X}L=tt!==Te?ce+L.substring(tt,Te):ce}return L}var St=/([A-Z])/g,at=/^ms-/,Mt=Array.isArray,xt=N("<script>"),xe=N("<\/script>"),Je=N('<script src="'),W=N('<script type="module" src="'),Ve=N('" async=""><\/script>'),zt=/(<\/|<)(s)(cript)/gi;function Me(L,X,ce,Te){return""+X+(ce==="s"?"\\u0073":"\\u0053")+Te}function et(L,X,ce,Te,tt){L=L===void 0?"":L,X=X===void 0?xt:N('<script nonce="'+je(X)+'">');var ot=[];if(ce!==void 0&&ot.push(X,R((""+ce).replace(zt,Me)),xe),Te!==void 0)for(ce=0;ce<Te.length;ce++)ot.push(Je,R(je(Te[ce])),Ve);if(tt!==void 0)for(Te=0;Te<tt.length;Te++)ot.push(W,R(je(tt[Te])),Ve);return{bootstrapChunks:ot,startInlineScript:X,placeholderPrefix:N(L+"P:"),segmentPrefix:N(L+"S:"),boundaryPrefix:L+"B:",idPrefix:L,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Ze(L,X){return{insertionMode:L,selectedValue:X}}function ht(L){return Ze(L==="http://www.w3.org/2000/svg"?2:L==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function ae(L,X,ce){switch(X){case"select":return Ze(1,ce.value!=null?ce.value:ce.defaultValue);case"svg":return Ze(2,null);case"math":return Ze(3,null);case"foreignObject":return Ze(1,null);case"table":return Ze(4,null);case"thead":case"tbody":case"tfoot":return Ze(5,null);case"colgroup":return Ze(7,null);case"tr":return Ze(6,null)}return 4<=L.insertionMode||L.insertionMode===0?Ze(1,null):L}var _e=N("<!-- -->");function Ct(L,X,ce,Te){return X===""?Te:(Te&&L.push(_e),L.push(R(je(X))),!0)}var bt=new Map,wt=N(' style="'),lr=N(":"),pr=N(";");function Gt(L,X,ce){if(typeof ce!="object")throw Error(h(62));X=!0;for(var Te in ce)if(U.call(ce,Te)){var tt=ce[Te];if(tt!=null&&typeof tt!="boolean"&&tt!==""){if(Te.indexOf("--")===0){var ot=R(je(Te));tt=R(je((""+tt).trim()))}else{ot=Te;var ct=bt.get(ot);ct!==void 0||(ct=N(je(ot.replace(St,"-$1").toLowerCase().replace(at,"-ms-"))),bt.set(ot,ct)),ot=ct,tt=typeof tt=="number"?tt===0||U.call(Oe,Te)?R(""+tt):R(tt+"px"):R(je((""+tt).trim()))}X?(X=!1,L.push(wt,ot,lr,tt)):L.push(pr,ot,lr,tt)}}X||L.push(Vr)}var Kt=N(" "),Mr=N('="'),Vr=N('"'),tn=N('=""');function Kr(L,X,ce,Te){switch(ce){case"style":Gt(L,X,Te);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<ce.length)||ce[0]!=="o"&&ce[0]!=="O"||ce[1]!=="n"&&ce[1]!=="N"){if(X=re.hasOwnProperty(ce)?re[ce]:null,X!==null){switch(typeof Te){case"function":case"symbol":return;case"boolean":if(!X.acceptsBooleans)return}switch(ce=R(X.attributeName),X.type){case 3:Te&&L.push(Kt,ce,tn);break;case 4:Te===!0?L.push(Kt,ce,tn):Te!==!1&&L.push(Kt,ce,Mr,R(je(Te)),Vr);break;case 5:isNaN(Te)||L.push(Kt,ce,Mr,R(je(Te)),Vr);break;case 6:!isNaN(Te)&&1<=Te&&L.push(Kt,ce,Mr,R(je(Te)),Vr);break;default:X.sanitizeURL&&(Te=""+Te),L.push(Kt,ce,Mr,R(je(Te)),Vr)}}else if(J(ce)){switch(typeof Te){case"function":case"symbol":return;case"boolean":if(X=ce.toLowerCase().slice(0,5),X!=="data-"&&X!=="aria-")return}L.push(Kt,R(ce),Mr,R(je(Te)),Vr)}}}var Y=N(">"),ft=N("/>");function ye(L,X,ce){if(X!=null){if(ce!=null)throw Error(h(60));if(typeof X!="object"||!("__html"in X))throw Error(h(61));X=X.__html,X!=null&&L.push(R(""+X))}}function Ae(L){var X="";return n.Children.forEach(L,function(ce){ce!=null&&(X+=ce)}),X}var we=N(' selected=""');function Ne(L,X,ce,Te){L.push(Dt(ce));var tt=ce=null,ot;for(ot in X)if(U.call(X,ot)){var ct=X[ot];if(ct!=null)switch(ot){case"children":ce=ct;break;case"dangerouslySetInnerHTML":tt=ct;break;default:Kr(L,Te,ot,ct)}}return L.push(Y),ye(L,tt,ce),typeof ce=="string"?(L.push(R(je(ce))),null):ce}var _t=N(`
`),At=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,nt=new Map;function Dt(L){var X=nt.get(L);if(X===void 0){if(!At.test(L))throw Error(h(65,L));X=N("<"+L),nt.set(L,X)}return X}var nr=N("<!DOCTYPE html>");function Lt(L,X,ce,Te,tt){switch(X){case"select":L.push(Dt("select"));var ot=null,ct=null;for(Fr in ce)if(U.call(ce,Fr)){var Ut=ce[Fr];if(Ut!=null)switch(Fr){case"children":ot=Ut;break;case"dangerouslySetInnerHTML":ct=Ut;break;case"defaultValue":case"value":break;default:Kr(L,Te,Fr,Ut)}}return L.push(Y),ye(L,ct,ot),ot;case"option":ct=tt.selectedValue,L.push(Dt("option"));var sr=Ut=null,dr=null,Fr=null;for(ot in ce)if(U.call(ce,ot)){var xn=ce[ot];if(xn!=null)switch(ot){case"children":Ut=xn;break;case"selected":dr=xn;break;case"dangerouslySetInnerHTML":Fr=xn;break;case"value":sr=xn;default:Kr(L,Te,ot,xn)}}if(ct!=null)if(ce=sr!==null?""+sr:Ae(Ut),Mt(ct)){for(Te=0;Te<ct.length;Te++)if(""+ct[Te]===ce){L.push(we);break}}else""+ct===ce&&L.push(we);else dr&&L.push(we);return L.push(Y),ye(L,Fr,Ut),Ut;case"textarea":L.push(Dt("textarea")),Fr=ct=ot=null;for(Ut in ce)if(U.call(ce,Ut)&&(sr=ce[Ut],sr!=null))switch(Ut){case"children":Fr=sr;break;case"value":ot=sr;break;case"defaultValue":ct=sr;break;case"dangerouslySetInnerHTML":throw Error(h(91));default:Kr(L,Te,Ut,sr)}if(ot===null&&ct!==null&&(ot=ct),L.push(Y),Fr!=null){if(ot!=null)throw Error(h(92));if(Mt(Fr)&&1<Fr.length)throw Error(h(93));ot=""+Fr}return typeof ot=="string"&&ot[0]===`
`&&L.push(_t),ot!==null&&L.push(R(je(""+ot))),null;case"input":L.push(Dt("input")),sr=Fr=Ut=ot=null;for(ct in ce)if(U.call(ce,ct)&&(dr=ce[ct],dr!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(h(399,"input"));case"defaultChecked":sr=dr;break;case"defaultValue":Ut=dr;break;case"checked":Fr=dr;break;case"value":ot=dr;break;default:Kr(L,Te,ct,dr)}return Fr!==null?Kr(L,Te,"checked",Fr):sr!==null&&Kr(L,Te,"checked",sr),ot!==null?Kr(L,Te,"value",ot):Ut!==null&&Kr(L,Te,"value",Ut),L.push(ft),null;case"menuitem":L.push(Dt("menuitem"));for(var Pi in ce)if(U.call(ce,Pi)&&(ot=ce[Pi],ot!=null))switch(Pi){case"children":case"dangerouslySetInnerHTML":throw Error(h(400));default:Kr(L,Te,Pi,ot)}return L.push(Y),null;case"title":L.push(Dt("title")),ot=null;for(xn in ce)if(U.call(ce,xn)&&(ct=ce[xn],ct!=null))switch(xn){case"children":ot=ct;break;case"dangerouslySetInnerHTML":throw Error(h(434));default:Kr(L,Te,xn,ct)}return L.push(Y),ot;case"listing":case"pre":L.push(Dt(X)),ct=ot=null;for(sr in ce)if(U.call(ce,sr)&&(Ut=ce[sr],Ut!=null))switch(sr){case"children":ot=Ut;break;case"dangerouslySetInnerHTML":ct=Ut;break;default:Kr(L,Te,sr,Ut)}if(L.push(Y),ct!=null){if(ot!=null)throw Error(h(60));if(typeof ct!="object"||!("__html"in ct))throw Error(h(61));ce=ct.__html,ce!=null&&(typeof ce=="string"&&0<ce.length&&ce[0]===`
`?L.push(_t,R(ce)):L.push(R(""+ce)))}return typeof ot=="string"&&ot[0]===`
`&&L.push(_t),ot;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":L.push(Dt(X));for(var ss in ce)if(U.call(ce,ss)&&(ot=ce[ss],ot!=null))switch(ss){case"children":case"dangerouslySetInnerHTML":throw Error(h(399,X));default:Kr(L,Te,ss,ot)}return L.push(ft),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Ne(L,ce,X,Te);case"html":return tt.insertionMode===0&&L.push(nr),Ne(L,ce,X,Te);default:if(X.indexOf("-")===-1&&typeof ce.is!="string")return Ne(L,ce,X,Te);L.push(Dt(X)),ct=ot=null;for(dr in ce)if(U.call(ce,dr)&&(Ut=ce[dr],Ut!=null))switch(dr){case"children":ot=Ut;break;case"dangerouslySetInnerHTML":ct=Ut;break;case"style":Gt(L,Te,Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:J(dr)&&typeof Ut!="function"&&typeof Ut!="symbol"&&L.push(Kt,R(dr),Mr,R(je(Ut)),Vr)}return L.push(Y),ye(L,ct,ot),ot}}var xr=N("</"),sn=N(">"),vt=N('<template id="'),Cn=N('"></template>'),Sn=N("<!--$-->"),In=N('<!--$?--><template id="'),wi=N('"></template>'),Pt=N("<!--$!-->"),Lr=N("<!--/$-->"),kr=N("<template"),kn=N('"'),bi=N(' data-dgst="');N(' data-msg="'),N(' data-stck="');var Ar=N("></template>");function Nn(L,X,ce){if(b(L,In),ce===null)throw Error(h(395));return b(L,ce),C(L,wi)}var Ri=N('<div hidden id="'),si=N('">'),Hr=N("</div>"),Ce=N('<svg aria-hidden="true" style="display:none" id="'),ee=N('">'),Q=N("</svg>"),ue=N('<math aria-hidden="true" style="display:none" id="'),Se=N('">'),Fe=N("</math>"),$e=N('<table hidden id="'),Xe=N('">'),Le=N("</table>"),pt=N('<table hidden><tbody id="'),It=N('">'),ut=N("</tbody></table>"),Nt=N('<table hidden><tr id="'),hr=N('">'),mr=N("</tr></table>"),rn=N('<table hidden><colgroup id="'),Rr=N('">'),en=N("</colgroup></table>");function Wr(L,X,ce,Te){switch(ce.insertionMode){case 0:case 1:return b(L,Ri),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,si);case 2:return b(L,Ce),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,ee);case 3:return b(L,ue),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,Se);case 4:return b(L,$e),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,Xe);case 5:return b(L,pt),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,It);case 6:return b(L,Nt),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,hr);case 7:return b(L,rn),b(L,X.segmentPrefix),b(L,R(Te.toString(16))),C(L,Rr);default:throw Error(h(397))}}function Pn(L,X){switch(X.insertionMode){case 0:case 1:return C(L,Hr);case 2:return C(L,Q);case 3:return C(L,Fe);case 4:return C(L,Le);case 5:return C(L,ut);case 6:return C(L,mr);case 7:return C(L,en);default:throw Error(h(397))}}var An=N('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Zr=N('$RS("'),on=N('","'),pn=N('")<\/script>'),Wn=N('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),ai=N('$RC("'),Si=N('","'),Sa=N('")<\/script>'),Dr=N('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Li=N('$RX("'),Za=N('"'),ki=N(")<\/script>"),ci=N(","),Nl=/[<\u2028\u2029]/g;function hi(L){return JSON.stringify(L).replace(Nl,function(X){switch(X){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Jn=Object.assign,Ti=Symbol.for("react.element"),fs=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),ka=Symbol.for("react.strict_mode"),Zi=Symbol.for("react.profiler"),jn=Symbol.for("react.provider"),Ss=Symbol.for("react.context"),Oi=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),Ei=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),he=Symbol.for("react.scope"),ke=Symbol.for("react.debug_trace_mode"),Ke=Symbol.for("react.legacy_hidden"),st=Symbol.for("react.default_value"),kt=Symbol.iterator;function Ht(L){if(L==null)return null;if(typeof L=="function")return L.displayName||L.name||null;if(typeof L=="string")return L;switch(L){case ln:return"Fragment";case fs:return"Portal";case Zi:return"Profiler";case ka:return"StrictMode";case ea:return"Suspense";case Ei:return"SuspenseList"}if(typeof L=="object")switch(L.$$typeof){case Ss:return(L.displayName||"Context")+".Consumer";case jn:return(L._context.displayName||"Context")+".Provider";case Oi:var X=L.render;return L=L.displayName,L||(L=X.displayName||X.name||"",L=L!==""?"ForwardRef("+L+")":"ForwardRef"),L;case z:return X=L.displayName||null,X!==null?X:Ht(L.type)||"Memo";case K:X=L._payload,L=L._init;try{return Ht(L(X))}catch{}}return null}var Qt={};function Or(L,X){if(L=L.contextTypes,!L)return Qt;var ce={},Te;for(Te in L)ce[Te]=X[Te];return ce}var Gr=null;function vn(L,X){if(L!==X){L.context._currentValue=L.parentValue,L=L.parent;var ce=X.parent;if(L===null){if(ce!==null)throw Error(h(401))}else{if(ce===null)throw Error(h(401));vn(L,ce)}X.context._currentValue=X.value}}function Fi(L){L.context._currentValue=L.parentValue,L=L.parent,L!==null&&Fi(L)}function ps(L){var X=L.parent;X!==null&&ps(X),L.context._currentValue=L.value}function rs(L,X){if(L.context._currentValue=L.parentValue,L=L.parent,L===null)throw Error(h(402));L.depth===X.depth?vn(L,X):rs(L,X)}function ta(L,X){var ce=X.parent;if(ce===null)throw Error(h(402));L.depth===ce.depth?vn(L,ce):ta(L,ce),X.context._currentValue=X.value}function ks(L){var X=Gr;X!==L&&(X===null?ps(L):L===null?Fi(X):X.depth===L.depth?vn(X,L):X.depth>L.depth?rs(X,L):ta(X,L),Gr=L)}var Ci={isMounted:function(){return!1},enqueueSetState:function(L,X){L=L._reactInternals,L.queue!==null&&L.queue.push(X)},enqueueReplaceState:function(L,X){L=L._reactInternals,L.replace=!0,L.queue=[X]},enqueueForceUpdate:function(){}};function Ii(L,X,ce,Te){var tt=L.state!==void 0?L.state:null;L.updater=Ci,L.props=ce,L.state=tt;var ot={queue:[],replace:!1};L._reactInternals=ot;var ct=X.contextType;if(L.context=typeof ct=="object"&&ct!==null?ct._currentValue:Te,ct=X.getDerivedStateFromProps,typeof ct=="function"&&(ct=ct(ce,tt),tt=ct==null?tt:Jn({},tt,ct),L.state=tt),typeof X.getDerivedStateFromProps!="function"&&typeof L.getSnapshotBeforeUpdate!="function"&&(typeof L.UNSAFE_componentWillMount=="function"||typeof L.componentWillMount=="function"))if(X=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),X!==L.state&&Ci.enqueueReplaceState(L,L.state,null),ot.queue!==null&&0<ot.queue.length)if(X=ot.queue,ct=ot.replace,ot.queue=null,ot.replace=!1,ct&&X.length===1)L.state=X[0];else{for(ot=ct?X[0]:L.state,tt=!0,ct=ct?1:0;ct<X.length;ct++){var Ut=X[ct];Ut=typeof Ut=="function"?Ut.call(L,ot,ce,Te):Ut,Ut!=null&&(tt?(tt=!1,ot=Jn({},ot,Ut)):Jn(ot,Ut))}L.state=ot}else ot.queue=null}var Gn={id:1,overflow:""};function Un(L,X,ce){var Te=L.id;L=L.overflow;var tt=32-Us(Te)-1;Te&=~(1<<tt),ce+=1;var ot=32-Us(X)+tt;if(30<ot){var ct=tt-tt%5;return ot=(Te&(1<<ct)-1).toString(32),Te>>=ct,tt-=ct,{id:1<<32-Us(X)+tt|ce<<tt|Te,overflow:ot+L}}return{id:1<<ot|ce<<tt|Te,overflow:L}}var Us=Math.clz32?Math.clz32:Iu,Vs=Math.log,jl=Math.LN2;function Iu(L){return L>>>=0,L===0?32:31-(Vs(L)/jl|0)|0}function ra(L,X){return L===X&&(L!==0||1/L===1/X)||L!==L&&X!==X}var qc=typeof Object.is=="function"?Object.is:ra,Hs=null,lo=null,hl=null,Dn=null,na=!1,Ts=!1,Es=0,ns=null,No=0;function Ta(){if(Hs===null)throw Error(h(321));return Hs}function ms(){if(0<No)throw Error(h(312));return{memoizedState:null,queue:null,next:null}}function jo(){return Dn===null?hl===null?(na=!1,hl=Dn=ms()):(na=!0,Dn=hl):Dn.next===null?(na=!1,Dn=Dn.next=ms()):(na=!0,Dn=Dn.next),Dn}function uo(){lo=Hs=null,Ts=!1,hl=null,No=0,Dn=ns=null}function Ea(L,X){return typeof X=="function"?X(L):X}function Hi(L,X,ce){if(Hs=Ta(),Dn=jo(),na){var Te=Dn.queue;if(X=Te.dispatch,ns!==null&&(ce=ns.get(Te),ce!==void 0)){ns.delete(Te),Te=Dn.memoizedState;do Te=L(Te,ce.action),ce=ce.next;while(ce!==null);return Dn.memoizedState=Te,[Te,X]}return[Dn.memoizedState,X]}return L=L===Ea?typeof X=="function"?X():X:ce!==void 0?ce(X):X,Dn.memoizedState=L,L=Dn.queue={last:null,dispatch:null},L=L.dispatch=co.bind(null,Hs,L),[Dn.memoizedState,L]}function un(L,X){if(Hs=Ta(),Dn=jo(),X=X===void 0?null:X,Dn!==null){var ce=Dn.memoizedState;if(ce!==null&&X!==null){var Te=ce[1];e:if(Te===null)Te=!1;else{for(var tt=0;tt<Te.length&&tt<X.length;tt++)if(!qc(X[tt],Te[tt])){Te=!1;break e}Te=!0}if(Te)return ce[0]}}return L=L(),Dn.memoizedState=[L,X],L}function co(L,X,ce){if(25<=No)throw Error(h(301));if(L===Hs)if(Ts=!0,L={action:ce,next:null},ns===null&&(ns=new Map),ce=ns.get(X),ce===void 0)ns.set(X,L);else{for(X=ce;X.next!==null;)X=X.next;X.next=L}}function mc(){throw Error(h(394))}function Cs(){}var dl={readContext:function(L){return L._currentValue},useContext:function(L){return Ta(),L._currentValue},useMemo:un,useReducer:Hi,useRef:function(L){Hs=Ta(),Dn=jo();var X=Dn.memoizedState;return X===null?(L={current:L},Dn.memoizedState=L):X},useState:function(L){return Hi(Ea,L)},useInsertionEffect:Cs,useLayoutEffect:function(){},useCallback:function(L,X){return un(function(){return L},X)},useImperativeHandle:Cs,useEffect:Cs,useDebugValue:Cs,useDeferredValue:function(L){return Ta(),L},useTransition:function(){return Ta(),[!1,mc]},useId:function(){var L=lo.treeContext,X=L.overflow;L=L.id,L=(L&~(1<<32-Us(L)-1)).toString(32)+X;var ce=Uo;if(ce===null)throw Error(h(404));return X=Es++,L=":"+ce.idPrefix+"R"+L,0<X&&(L+="H"+X.toString(32)),L+":"},useMutableSource:function(L,X){return Ta(),X(L._source)},useSyncExternalStore:function(L,X,ce){if(ce===void 0)throw Error(h(407));return ce()}},Uo=null,qi=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ho(L){return console.error(L),null}function Ca(){}function Vo(L,X,ce,Te,tt,ot,ct,Ut,sr){var dr=[],Fr=new Set;return X={destination:null,responseState:X,progressiveChunkSize:Te===void 0?12800:Te,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Fr,pingedTasks:dr,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:tt===void 0?ho:tt,onAllReady:ot===void 0?Ca:ot,onShellReady:ct===void 0?Ca:ct,onShellError:Ut===void 0?Ca:Ut,onFatalError:sr===void 0?Ca:sr},ce=fo(X,0,null,ce,!1,!1),ce.parentFlushed=!0,L=Ul(X,L,null,ce,Fr,Qt,null,Gn),dr.push(L),X}function Ul(L,X,ce,Te,tt,ot,ct,Ut){L.allPendingTasks++,ce===null?L.pendingRootTasks++:ce.pendingTasks++;var sr={node:X,ping:function(){var dr=L.pingedTasks;dr.push(sr),dr.length===1&&pl(L)},blockedBoundary:ce,blockedSegment:Te,abortSet:tt,legacyContext:ot,context:ct,treeContext:Ut};return tt.add(sr),sr}function fo(L,X,ce,Te,tt,ot){return{status:0,id:-1,index:X,parentFlushed:!1,chunks:[],children:[],formatContext:Te,boundary:ce,lastPushedText:tt,textEmbedded:ot}}function qa(L,X){if(L=L.onError(X),L!=null&&typeof L!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof L+'" instead');return L}function is(L,X){var ce=L.onShellError;ce(X),ce=L.onFatalError,ce(X),L.destination!==null?(L.status=2,Z(L.destination,X)):(L.status=1,L.fatalError=X)}function Ho(L,X,ce,Te,tt){for(Hs={},lo=X,Es=0,L=ce(Te,tt);Ts;)Ts=!1,Es=0,No+=1,Dn=null,L=ce(Te,tt);return uo(),L}function Pu(L,X,ce,Te){var tt=ce.render(),ot=Te.childContextTypes;if(ot!=null){var ct=X.legacyContext;if(typeof ce.getChildContext!="function")Te=ct;else{ce=ce.getChildContext();for(var Ut in ce)if(!(Ut in ot))throw Error(h(108,Ht(Te)||"Unknown",Ut));Te=Jn({},ct,ce)}X.legacyContext=Te,gs(L,X,tt),X.legacyContext=ct}else gs(L,X,tt)}function Mu(L,X){if(L&&L.defaultProps){X=Jn({},X),L=L.defaultProps;for(var ce in L)X[ce]===void 0&&(X[ce]=L[ce]);return X}return X}function po(L,X,ce,Te,tt){if(typeof ce=="function")if(ce.prototype&&ce.prototype.isReactComponent){tt=Or(ce,X.legacyContext);var ot=ce.contextType;ot=new ce(Te,typeof ot=="object"&&ot!==null?ot._currentValue:tt),Ii(ot,ce,Te,tt),Pu(L,X,ot,ce)}else{ot=Or(ce,X.legacyContext),tt=Ho(L,X,ce,Te,ot);var ct=Es!==0;if(typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0)Ii(tt,ce,Te,ot),Pu(L,X,tt,ce);else if(ct){Te=X.treeContext,X.treeContext=Un(Te,1,0);try{gs(L,X,tt)}finally{X.treeContext=Te}}else gs(L,X,tt)}else if(typeof ce=="string"){switch(tt=X.blockedSegment,ot=Lt(tt.chunks,ce,Te,L.responseState,tt.formatContext),tt.lastPushedText=!1,ct=tt.formatContext,tt.formatContext=ae(ct,ce,Te),Au(L,X,ot),tt.formatContext=ct,ce){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:tt.chunks.push(xr,R(ce),sn)}tt.lastPushedText=!1}else{switch(ce){case Ke:case ke:case ka:case Zi:case ln:gs(L,X,Te.children);return;case Ei:gs(L,X,Te.children);return;case he:throw Error(h(343));case ea:e:{ce=X.blockedBoundary,tt=X.blockedSegment,ot=Te.fallback,Te=Te.children,ct=new Set;var Ut={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:ct,errorDigest:null},sr=fo(L,tt.chunks.length,Ut,tt.formatContext,!1,!1);tt.children.push(sr),tt.lastPushedText=!1;var dr=fo(L,0,null,tt.formatContext,!1,!1);dr.parentFlushed=!0,X.blockedBoundary=Ut,X.blockedSegment=dr;try{if(Au(L,X,Te),dr.lastPushedText&&dr.textEmbedded&&dr.chunks.push(_e),dr.status=1,fl(Ut,dr),Ut.pendingTasks===0)break e}catch(Fr){dr.status=4,Ut.forceClientRender=!0,Ut.errorDigest=qa(L,Fr)}finally{X.blockedBoundary=ce,X.blockedSegment=tt}X=Ul(L,ot,ce,sr,ct,X.legacyContext,X.context,X.treeContext),L.pingedTasks.push(X)}return}if(typeof ce=="object"&&ce!==null)switch(ce.$$typeof){case Oi:if(Te=Ho(L,X,ce.render,Te,tt),Es!==0){ce=X.treeContext,X.treeContext=Un(ce,1,0);try{gs(L,X,Te)}finally{X.treeContext=ce}}else gs(L,X,Te);return;case z:ce=ce.type,Te=Mu(ce,Te),po(L,X,ce,Te,tt);return;case jn:if(tt=Te.children,ce=ce._context,Te=Te.value,ot=ce._currentValue,ce._currentValue=Te,ct=Gr,Gr=Te={parent:ct,depth:ct===null?0:ct.depth+1,context:ce,parentValue:ot,value:Te},X.context=Te,gs(L,X,tt),L=Gr,L===null)throw Error(h(403));Te=L.parentValue,L.context._currentValue=Te===st?L.context._defaultValue:Te,L=Gr=L.parent,X.context=L;return;case Ss:Te=Te.children,Te=Te(ce._currentValue),gs(L,X,Te);return;case K:tt=ce._init,ce=tt(ce._payload),Te=Mu(ce,Te),po(L,X,ce,Te,void 0);return}throw Error(h(130,ce==null?ce:typeof ce,""))}}function gs(L,X,ce){if(X.node=ce,typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Ti:po(L,X,ce.type,ce.props,ce.ref);return;case fs:throw Error(h(257));case K:var Te=ce._init;ce=Te(ce._payload),gs(L,X,ce);return}if(Mt(ce)){mo(L,X,ce);return}if(ce===null||typeof ce!="object"?Te=null:(Te=kt&&ce[kt]||ce["@@iterator"],Te=typeof Te=="function"?Te:null),Te&&(Te=Te.call(ce))){if(ce=Te.next(),!ce.done){var tt=[];do tt.push(ce.value),ce=Te.next();while(!ce.done);mo(L,X,tt)}return}throw L=Object.prototype.toString.call(ce),Error(h(31,L==="[object Object]"?"object with keys {"+Object.keys(ce).join(", ")+"}":L))}typeof ce=="string"?(Te=X.blockedSegment,Te.lastPushedText=Ct(X.blockedSegment.chunks,ce,L.responseState,Te.lastPushedText)):typeof ce=="number"&&(Te=X.blockedSegment,Te.lastPushedText=Ct(X.blockedSegment.chunks,""+ce,L.responseState,Te.lastPushedText))}function mo(L,X,ce){for(var Te=ce.length,tt=0;tt<Te;tt++){var ot=X.treeContext;X.treeContext=Un(ot,Te,tt);try{Au(L,X,ce[tt])}finally{X.treeContext=ot}}}function Au(L,X,ce){var Te=X.blockedSegment.formatContext,tt=X.legacyContext,ot=X.context;try{return gs(L,X,ce)}catch(sr){if(uo(),typeof sr=="object"&&sr!==null&&typeof sr.then=="function"){ce=sr;var ct=X.blockedSegment,Ut=fo(L,ct.chunks.length,null,ct.formatContext,ct.lastPushedText,!0);ct.children.push(Ut),ct.lastPushedText=!1,L=Ul(L,X.node,X.blockedBoundary,Ut,X.abortSet,X.legacyContext,X.context,X.treeContext).ping,ce.then(L,L),X.blockedSegment.formatContext=Te,X.legacyContext=tt,X.context=ot,ks(ot)}else throw X.blockedSegment.formatContext=Te,X.legacyContext=tt,X.context=ot,ks(ot),sr}}function Yc(L){var X=L.blockedBoundary;L=L.blockedSegment,L.status=3,zu(this,X,L)}function Du(L,X,ce){var Te=L.blockedBoundary;L.blockedSegment.status=3,Te===null?(X.allPendingTasks--,X.status!==2&&(X.status=2,X.destination!==null&&X.destination.close())):(Te.pendingTasks--,Te.forceClientRender||(Te.forceClientRender=!0,L=ce===void 0?Error(h(432)):ce,Te.errorDigest=X.onError(L),Te.parentFlushed&&X.clientRenderedBoundaries.push(Te)),Te.fallbackAbortableTasks.forEach(function(tt){return Du(tt,X,ce)}),Te.fallbackAbortableTasks.clear(),X.allPendingTasks--,X.allPendingTasks===0&&(Te=X.onAllReady,Te()))}function fl(L,X){if(X.chunks.length===0&&X.children.length===1&&X.children[0].boundary===null){var ce=X.children[0];ce.id=X.id,ce.parentFlushed=!0,ce.status===1&&fl(L,ce)}else L.completedSegments.push(X)}function zu(L,X,ce){if(X===null){if(ce.parentFlushed){if(L.completedRootSegment!==null)throw Error(h(389));L.completedRootSegment=ce}L.pendingRootTasks--,L.pendingRootTasks===0&&(L.onShellError=Ca,X=L.onShellReady,X())}else X.pendingTasks--,X.forceClientRender||(X.pendingTasks===0?(ce.parentFlushed&&ce.status===1&&fl(X,ce),X.parentFlushed&&L.completedBoundaries.push(X),X.fallbackAbortableTasks.forEach(Yc,L),X.fallbackAbortableTasks.clear()):ce.parentFlushed&&ce.status===1&&(fl(X,ce),X.completedSegments.length===1&&X.parentFlushed&&L.partialBoundaries.push(X)));L.allPendingTasks--,L.allPendingTasks===0&&(L=L.onAllReady,L())}function pl(L){if(L.status!==2){var X=Gr,ce=qi.current;qi.current=dl;var Te=Uo;Uo=L.responseState;try{var tt=L.pingedTasks,ot;for(ot=0;ot<tt.length;ot++){var ct=tt[ot],Ut=L,sr=ct.blockedSegment;if(sr.status===0){ks(ct.context);try{gs(Ut,ct,ct.node),sr.lastPushedText&&sr.textEmbedded&&sr.chunks.push(_e),ct.abortSet.delete(ct),sr.status=1,zu(Ut,ct.blockedBoundary,sr)}catch(Mi){if(uo(),typeof Mi=="object"&&Mi!==null&&typeof Mi.then=="function"){var dr=ct.ping;Mi.then(dr,dr)}else{ct.abortSet.delete(ct),sr.status=4;var Fr=ct.blockedBoundary,xn=Mi,Pi=qa(Ut,xn);if(Fr===null?is(Ut,xn):(Fr.pendingTasks--,Fr.forceClientRender||(Fr.forceClientRender=!0,Fr.errorDigest=Pi,Fr.parentFlushed&&Ut.clientRenderedBoundaries.push(Fr))),Ut.allPendingTasks--,Ut.allPendingTasks===0){var ss=Ut.onAllReady;ss()}}}finally{}}}tt.splice(0,ot),L.destination!==null&&gl(L,L.destination)}catch(Mi){qa(L,Mi),is(L,Mi)}finally{Uo=Te,qi.current=ce,ce===dl&&ks(X)}}}function ml(L,X,ce){switch(ce.parentFlushed=!0,ce.status){case 0:var Te=ce.id=L.nextSegmentId++;return ce.lastPushedText=!1,ce.textEmbedded=!1,L=L.responseState,b(X,vt),b(X,L.placeholderPrefix),L=R(Te.toString(16)),b(X,L),C(X,Cn);case 1:ce.status=2;var tt=!0;Te=ce.chunks;var ot=0;ce=ce.children;for(var ct=0;ct<ce.length;ct++){for(tt=ce[ct];ot<tt.index;ot++)b(X,Te[ot]);tt=go(L,X,tt)}for(;ot<Te.length-1;ot++)b(X,Te[ot]);return ot<Te.length&&(tt=C(X,Te[ot])),tt;default:throw Error(h(390))}}function go(L,X,ce){var Te=ce.boundary;if(Te===null)return ml(L,X,ce);if(Te.parentFlushed=!0,Te.forceClientRender)Te=Te.errorDigest,C(X,Pt),b(X,kr),Te&&(b(X,bi),b(X,R(je(Te))),b(X,kn)),C(X,Ar),ml(L,X,ce);else if(0<Te.pendingTasks){Te.rootSegmentID=L.nextSegmentId++,0<Te.completedSegments.length&&L.partialBoundaries.push(Te);var tt=L.responseState,ot=tt.nextSuspenseID++;tt=N(tt.boundaryPrefix+ot.toString(16)),Te=Te.id=tt,Nn(X,L.responseState,Te),ml(L,X,ce)}else if(Te.byteSize>L.progressiveChunkSize)Te.rootSegmentID=L.nextSegmentId++,L.completedBoundaries.push(Te),Nn(X,L.responseState,Te.id),ml(L,X,ce);else{if(C(X,Sn),ce=Te.completedSegments,ce.length!==1)throw Error(h(391));go(L,X,ce[0])}return C(X,Lr)}function ia(L,X,ce){return Wr(X,L.responseState,ce.formatContext,ce.id),go(L,X,ce),Pn(X,ce.formatContext)}function Vl(L,X,ce){for(var Te=ce.completedSegments,tt=0;tt<Te.length;tt++)$o(L,X,ce,Te[tt]);if(Te.length=0,L=L.responseState,Te=ce.id,ce=ce.rootSegmentID,b(X,L.startInlineScript),L.sentCompleteBoundaryFunction?b(X,ai):(L.sentCompleteBoundaryFunction=!0,b(X,Wn)),Te===null)throw Error(h(395));return ce=R(ce.toString(16)),b(X,Te),b(X,Si),b(X,L.segmentPrefix),b(X,ce),C(X,Sa)}function $o(L,X,ce,Te){if(Te.status===2)return!0;var tt=Te.id;if(tt===-1){if((Te.id=ce.rootSegmentID)===-1)throw Error(h(392));return ia(L,X,Te)}return ia(L,X,Te),L=L.responseState,b(X,L.startInlineScript),L.sentCompleteSegmentFunction?b(X,Zr):(L.sentCompleteSegmentFunction=!0,b(X,An)),b(X,L.segmentPrefix),tt=R(tt.toString(16)),b(X,tt),b(X,on),b(X,L.placeholderPrefix),b(X,tt),C(X,pn)}function gl(L,X){f=new Uint8Array(512),y=0;try{var ce=L.completedRootSegment;if(ce!==null&&L.pendingRootTasks===0){go(L,X,ce),L.completedRootSegment=null;var Te=L.responseState.bootstrapChunks;for(ce=0;ce<Te.length-1;ce++)b(X,Te[ce]);ce<Te.length&&C(X,Te[ce])}var tt=L.clientRenderedBoundaries,ot;for(ot=0;ot<tt.length;ot++){var ct=tt[ot];Te=X;var Ut=L.responseState,sr=ct.id,dr=ct.errorDigest,Fr=ct.errorMessage,xn=ct.errorComponentStack;if(b(Te,Ut.startInlineScript),Ut.sentClientRenderFunction?b(Te,Li):(Ut.sentClientRenderFunction=!0,b(Te,Dr)),sr===null)throw Error(h(395));b(Te,sr),b(Te,Za),(dr||Fr||xn)&&(b(Te,ci),b(Te,R(hi(dr||"")))),(Fr||xn)&&(b(Te,ci),b(Te,R(hi(Fr||"")))),xn&&(b(Te,ci),b(Te,R(hi(xn)))),C(Te,ki)}tt.splice(0,ot);var Pi=L.completedBoundaries;for(ot=0;ot<Pi.length;ot++)Vl(L,X,Pi[ot]);Pi.splice(0,ot),S(X),f=new Uint8Array(512),y=0;var ss=L.partialBoundaries;for(ot=0;ot<ss.length;ot++){var Mi=ss[ot];e:{tt=L,ct=X;var sa=Mi.completedSegments;for(Ut=0;Ut<sa.length;Ut++)if(!$o(tt,ct,Mi,sa[Ut])){Ut++,sa.splice(0,Ut);var as=!1;break e}sa.splice(0,Ut),as=!0}if(!as){L.destination=null,ot++,ss.splice(0,ot);return}}ss.splice(0,ot);var aa=L.completedBoundaries;for(ot=0;ot<aa.length;ot++)Vl(L,X,aa[ot]);aa.splice(0,ot)}finally{S(X),L.allPendingTasks===0&&L.pingedTasks.length===0&&L.clientRenderedBoundaries.length===0&&L.completedBoundaries.length===0&&X.close()}}function yl(L,X){try{var ce=L.abortableTasks;ce.forEach(function(Te){return Du(Te,L,X)}),ce.clear(),L.destination!==null&&gl(L,L.destination)}catch(Te){qa(L,Te),is(L,Te)}}return tm.renderToReadableStream=function(L,X){return new Promise(function(ce,Te){var tt,ot,ct=new Promise(function(Fr,xn){ot=Fr,tt=xn}),Ut=Vo(L,et(X?X.identifierPrefix:void 0,X?X.nonce:void 0,X?X.bootstrapScriptContent:void 0,X?X.bootstrapScripts:void 0,X?X.bootstrapModules:void 0),ht(X?X.namespaceURI:void 0),X?X.progressiveChunkSize:void 0,X?X.onError:void 0,ot,function(){var Fr=new ReadableStream({type:"bytes",pull:function(xn){if(Ut.status===1)Ut.status=2,Z(xn,Ut.fatalError);else if(Ut.status!==2&&Ut.destination===null){Ut.destination=xn;try{gl(Ut,xn)}catch(Pi){qa(Ut,Pi),is(Ut,Pi)}}},cancel:function(){yl(Ut)}},{highWaterMark:0});Fr.allReady=ct,ce(Fr)},function(Fr){ct.catch(function(){}),Te(Fr)},tt);if(X&&X.signal){var sr=X.signal,dr=function(){yl(Ut,sr.reason),sr.removeEventListener("abort",dr)};sr.addEventListener("abort",dr)}pl(Ut)})},tm.version="18.3.1",tm}var A_;function M1(){if(A_)return jc;A_=1;var n,h;return n=I1(),h=P1(),jc.version=n.version,jc.renderToString=n.renderToString,jc.renderToStaticMarkup=n.renderToStaticMarkup,jc.renderToNodeStream=n.renderToNodeStream,jc.renderToStaticNodeStream=n.renderToStaticNodeStream,jc.renderToReadableStream=h.renderToReadableStream,jc}var A1=M1();function D1({latitude:n,longitude:h,children:f,closeOnMove:y,closeButton:b,closeOnClick:C,popupRef:S}){return Xr.useEffect(()=>{S.current||(S.current=new Gv.Popup({closeOnClick:!1,closeOnMove:y,closeButton:b,className:"popup"})),S.current.setLngLat([h,n]).setHTML(A1.renderToString(f))},[n,h,f,C,y,b,S]),null}var Vd={},D_;function z1(){if(D_)return Vd;D_=1;function n(b,C,S){var c,R,N,Z,U,j,G,se,J=0,oe,re=b.type==="FeatureCollection",pe=b.type==="Feature",ge=re?b.features.length:1;for(c=0;c<ge;c++)for(se=re?b.features[c].geometry:pe?b.geometry:b,oe=se.type==="GeometryCollection",j=oe?se.geometries.length:1,Z=0;Z<j;Z++)if(U=oe?se.geometries[Z]:se,G=U.coordinates,J=S&&(U.type==="Polygon"||U.type==="MultiPolygon")?1:0,U.type==="Point")C(G);else if(U.type==="LineString"||U.type==="MultiPoint")for(R=0;R<G.length;R++)C(G[R]);else if(U.type==="Polygon"||U.type==="MultiLineString")for(R=0;R<G.length;R++)for(N=0;N<G[R].length-J;N++)C(G[R][N]);else if(U.type==="MultiPolygon")for(R=0;R<G.length;R++)for(N=0;N<G[R].length;N++)for(l=0;l<G[R][N].length-J;l++)C(G[R][N][l]);else throw new Error("Unknown Geometry Type")}Vd.coordEach=n;function h(b,C,S,c){return n(b,function(R){S=C(S,R)},c),S}Vd.coordReduce=h;function f(b,C){var S;switch(b.type){case"FeatureCollection":for(features=b.features,S=0;S<b.features.length;S++)C(b.features[S].properties);break;case"Feature":C(b.properties);break}}Vd.propEach=f;function y(b,C,S){return f(b,function(c){S=C(S,c)}),S}return Vd.propReduce=y,Vd}var Ig,z_;function R1(){if(z_)return Ig;z_=1;var n=z1().coordEach;return Ig=function(h){var f=[1/0,1/0,-1/0,-1/0];return n(h,function(y){f[0]>y[0]&&(f[0]=y[0]),f[1]>y[1]&&(f[1]=y[1]),f[2]<y[0]&&(f[2]=y[0]),f[3]<y[1]&&(f[3]=y[1])}),f},Ig}var L1=R1();const O1=af(L1),F1=(n,h)=>{if(n.file&&h&&n.file in h){if(n.file.endsWith("jpg")||n.file.endsWith("jpeg"))return yt.jsx("img",{className:"popupImage",alt:"Message attached file",src:URL.createObjectURL(h[n.file])});if(n.file.endsWith("mp4"))return yt.jsx("video",{controls:!0,autoplay:!0,loop:!0,className:"popupImage",alt:"Message attached file",src:URL.createObjectURL(h[n.file])})}return n.message},B1=n=>{const h=new Date(n.time);return String(h.getHours()).padStart(2,"0")+":"+String(h.getMinutes()).padStart(2,"0")};function N1({data:n,dataFiles:h}){const f=Xr.useRef(null),y=Xr.useRef(null),[b,C]=Xr.useState(null),S=Xr.useRef(null);return Xr.useEffect(()=>{y.current||(y.current=new Gv.Map({container:f.current,center:[0,0],zoom:17,style:C1}),y.current.on("load",()=>{y.current.setCenter(n.features[0].geometry.coordinates),y.current.addSource("locations",{data:n,type:"geojson"});const c=O1(n);y.current.fitBounds(c,{padding:50}),y.current.on("mouseenter","pois",()=>{y.current.getCanvas().style.cursor="pointer"}),y.current.on("mouseleave","pois",()=>{y.current.getCanvas().style.cursor="inherit"}),y.current.addLayer({id:"pois",type:"circle",source:"locations",layout:{},paint:{"circle-color":"#D63F40","circle-radius":10}}),y.current.on("click","pois",R=>{C(R.features[0])})}))},[n,S]),Xr.useEffect(()=>{!y.current||!b||(C(b),S.current.addTo(y.current))},[b]),yt.jsxs("div",{className:"map-wrap",children:[yt.jsx("div",{ref:f,className:"map"}),y.current&&b&&yt.jsx(D1,{longitude:b.geometry.coordinates[0],latitude:b.geometry.coordinates[1],popupRef:S,closeOnMove:!1,closeButton:!0,children:yt.jsxs("div",{className:"activePopupFeatureContent",children:[yt.jsxs("p",{children:[yt.jsx("span",{className:"msgUsername",children:b.properties.username}),yt.jsx("span",{className:"msgDatetime",children:B1(b.properties)})]}),yt.jsx("p",{children:F1(b.properties,h)})]})})]})}function j1(n){const[h,f]=Xr.useState(n);return[h,C=>{f(C)},()=>{f(n)}]}function U1(n){return n.substring(n.lastIndexOf("/")+1,n.length)}function V1(){const[n,h]=Xr.useState(),[f,y]=Xr.useState();return[c=>{y(c)},(c,R)=>{h(N=>({...N,[U1(c)]:R}))},()=>{y(null),h()},n,f]}const ky=(n,h)=>{let f=h-1,y=h+1,b,C,S=n[h];for(;(n[f]||n[y])&&!(C&&b);){if(n[f]&&n[f].username===S.username&&!b){const c=Math.abs(n[h].time-n[f].time);b={index:f,delta:c}}if(n[y]&&n[y].username===S.username&&!C){const c=Math.abs(n[h].time-n[y].time);C={index:y,delta:c}}f--,y++}if(b&&C){if(b.delta===C.delta)return{...n[b.index],message:n[b.index].message+". "+n[C.index].message};if(b.delta<C.delta)return n[b.index];if(b.delta>C.delta)return n[C.index]}else{if(b)return n[b.index];if(C)return n[C.index]}return S},Ty=(n,h)=>Zv(n,h,1),Ey=(n,h)=>Zv(n,h,-1),Zv=(n,h,f)=>{let y=h+f,b,C=n[h];for(;n[y]&&!b;){if(n[y]&&n[y].username===C.username&&!b){const S=Math.abs(n[h].time-n[y].time);b={index:y,delta:S}}y+=f}return b?n[b.index]:C},H1=/[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?).*$/,Jg={IOS:/\[(.*)\] ([^:]*): (.*)/,ANDROID:/(.*) - ([^:]*): (.*)/},$1=n=>{const h=n.match(Jg.IOS),f=n.match(Jg.ANDROID);return h?"IOS":f?"ANDROID":"UNKNOWN"},W1=n=>{const h=n.message.toLowerCase();let f=h.indexOf(".jpg");return f<0&&(f=h.indexOf(".mp4")),f>0?n.message.substring(h.lastIndexOf(":")+2,f+4):""},G1=n=>{const h=n.match(H1);return h?h[0].split(",").map(f=>parseFloat(f)):null},Z1=(n,h)=>{const f=n.match(Jg[h]);if(f){let y=f[2];const b=y.indexOf(":");b>-1&&(y=y.substring(0,b));let C={time:q1(f[1]),username:y,message:f[3]};return C.file=W1(C),C.file&&(C.message=""),C}},q1=n=>{let h=n.replace("a. m.","AM").replace("p. m.","PM");h=h.replace("a.m.","AM").replace("p.m.","PM");let f=h.split(" ");const y=new Date;let b=[[y.getFullYear(),y.getMonth()+1,y.getDate()].join("/"),f[1]].join(" ");return new Date(b)},Y1=(n,h)=>{let f=0;const y={};return n.forEach(b=>{b=b.replaceAll(/[\u200E\u200F\u202A-\u202E\u200B]/g,"");const C=Z1(b,h);C&&(y[f]=C,f++)}),y};function X1({text:n,msgPosition:h}){if(!n)return;const f=n.split(`
`),y={type:"FeatureCollection",features:[]};let b={},C;for(let R=0;R<f.length&&(C=$1(f[R]),C==="UNKNOWN");R++);const S=Y1(f,C);return Object.values(S).forEach((R,N)=>{if(R.message){const Z=G1(R.message);if(Z){b={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[parseFloat(Z[1]),parseFloat(Z[0])]}};let U;switch(h){case"before":U=Ey(S,N);break;case"after":U=Ty(S,N);break;default:U=ky(S,N);break}b.properties={...U},y.features.push(b)}}}),y}function R_(n){return n.substring(n.lastIndexOf("/")+1,n.length)}const K1=n=>{let h="",f={time:J1(n.date),username:n.from};return Array.isArray(n.text)?n.text.forEach(y=>{y.type==="link"&&(h=y.text)}):n.text!==""&&(h=n.text),f.message=h,n.location_information&&(f.location=[n.location_information.latitude,n.location_information.longitude]),n.photo&&(f.file=R_(n.photo)),n.file&&n.mime_type==="video/mp4"&&(f.file=R_(n.file)),f},J1=n=>new Date(n),Q1=n=>{let h=0;const f={};return n.forEach(y=>{const b=K1(y);b&&(f[h]=b,h++)}),f};function ew({text:n,msgPosition:h}){if(!n)return;const f=JSON.parse(n),y={type:"FeatureCollection",features:[]},b=Q1(f.messages);return Object.values(b).forEach((S,c)=>{if(S.location){let R={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[S.location[1],S.location[0]]}},N;switch(h){case"before":N=Ey(b,c);break;case"after":N=Ty(b,c);break;default:N=ky(b,c);break}R.properties={...N},y.features.push(R)}}),y}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var qv;function gr(){return qv.apply(null,arguments)}function tw(n){qv=n}function Ol(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function qh(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function Fn(n,h){return Object.prototype.hasOwnProperty.call(n,h)}function Cy(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var h;for(h in n)if(Fn(n,h))return!1;return!0}function ao(n){return n===void 0}function dc(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function tp(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function Yv(n,h){var f=[],y,b=n.length;for(y=0;y<b;++y)f.push(h(n[y],y));return f}function $c(n,h){for(var f in h)Fn(h,f)&&(n[f]=h[f]);return Fn(h,"toString")&&(n.toString=h.toString),Fn(h,"valueOf")&&(n.valueOf=h.valueOf),n}function Eu(n,h,f,y){return _0(n,h,f,y,!0).utc()}function rw(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function cn(n){return n._pf==null&&(n._pf=rw()),n._pf}var Qg;Array.prototype.some?Qg=Array.prototype.some:Qg=function(n){var h=Object(this),f=h.length>>>0,y;for(y=0;y<f;y++)if(y in h&&n.call(this,h[y],y,h))return!0;return!1};function Iy(n){var h=null,f=!1,y=n._d&&!isNaN(n._d.getTime());if(y&&(h=cn(n),f=Qg.call(h.parsedDateParts,function(b){return b!=null}),y=h.overflow<0&&!h.empty&&!h.invalidEra&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&f),n._strict&&(y=y&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=y;else return y;return n._isValid}function Rm(n){var h=Eu(NaN);return n!=null?$c(cn(h),n):cn(h).userInvalidated=!0,h}var L_=gr.momentProperties=[],Pg=!1;function Py(n,h){var f,y,b,C=L_.length;if(ao(h._isAMomentObject)||(n._isAMomentObject=h._isAMomentObject),ao(h._i)||(n._i=h._i),ao(h._f)||(n._f=h._f),ao(h._l)||(n._l=h._l),ao(h._strict)||(n._strict=h._strict),ao(h._tzm)||(n._tzm=h._tzm),ao(h._isUTC)||(n._isUTC=h._isUTC),ao(h._offset)||(n._offset=h._offset),ao(h._pf)||(n._pf=cn(h)),ao(h._locale)||(n._locale=h._locale),C>0)for(f=0;f<C;f++)y=L_[f],b=h[y],ao(b)||(n[y]=b);return n}function rp(n){Py(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Pg===!1&&(Pg=!0,gr.updateOffset(this),Pg=!1)}function Fl(n){return n instanceof rp||n!=null&&n._isAMomentObject!=null}function Xv(n){gr.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function ol(n,h){var f=!0;return $c(function(){if(gr.deprecationHandler!=null&&gr.deprecationHandler(null,n),f){var y=[],b,C,S,c=arguments.length;for(C=0;C<c;C++){if(b="",typeof arguments[C]=="object"){b+=`
[`+C+"] ";for(S in arguments[0])Fn(arguments[0],S)&&(b+=S+": "+arguments[0][S]+", ");b=b.slice(0,-2)}else b=arguments[C];y.push(b)}Xv(n+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),f=!1}return h.apply(this,arguments)},h)}var O_={};function Kv(n,h){gr.deprecationHandler!=null&&gr.deprecationHandler(n,h),O_[n]||(Xv(h),O_[n]=!0)}gr.suppressDeprecationWarnings=!1;gr.deprecationHandler=null;function Cu(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function nw(n){var h,f;for(f in n)Fn(n,f)&&(h=n[f],Cu(h)?this[f]=h:this["_"+f]=h);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ey(n,h){var f=$c({},n),y;for(y in h)Fn(h,y)&&(qh(n[y])&&qh(h[y])?(f[y]={},$c(f[y],n[y]),$c(f[y],h[y])):h[y]!=null?f[y]=h[y]:delete f[y]);for(y in n)Fn(n,y)&&!Fn(h,y)&&qh(n[y])&&(f[y]=$c({},f[y]));return f}function My(n){n!=null&&this.set(n)}var ty;Object.keys?ty=Object.keys:ty=function(n){var h,f=[];for(h in n)Fn(n,h)&&f.push(h);return f};var iw={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function sw(n,h,f){var y=this._calendar[n]||this._calendar.sameElse;return Cu(y)?y.call(h,f):y}function ku(n,h,f){var y=""+Math.abs(n),b=h-y.length,C=n>=0;return(C?f?"+":"":"-")+Math.pow(10,Math.max(0,b)).toString().substr(1)+y}var Ay=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,rm=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Mg={},Yd={};function Ur(n,h,f,y){var b=y;typeof y=="string"&&(b=function(){return this[y]()}),n&&(Yd[n]=b),h&&(Yd[h[0]]=function(){return ku(b.apply(this,arguments),h[1],h[2])}),f&&(Yd[f]=function(){return this.localeData().ordinal(b.apply(this,arguments),n)})}function aw(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function ow(n){var h=n.match(Ay),f,y;for(f=0,y=h.length;f<y;f++)Yd[h[f]]?h[f]=Yd[h[f]]:h[f]=aw(h[f]);return function(b){var C="",S;for(S=0;S<y;S++)C+=Cu(h[S])?h[S].call(b,n):h[S];return C}}function pm(n,h){return n.isValid()?(h=Jv(h,n.localeData()),Mg[h]=Mg[h]||ow(h),Mg[h](n)):n.localeData().invalidDate()}function Jv(n,h){var f=5;function y(b){return h.longDateFormat(b)||b}for(rm.lastIndex=0;f>=0&&rm.test(n);)n=n.replace(rm,y),rm.lastIndex=0,f-=1;return n}var lw={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function uw(n){var h=this._longDateFormat[n],f=this._longDateFormat[n.toUpperCase()];return h||!f?h:(this._longDateFormat[n]=f.match(Ay).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[n])}var cw="Invalid date";function hw(){return this._invalidDate}var dw="%d",fw=/\d{1,2}/;function pw(n){return this._ordinal.replace("%d",n)}var mw={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function gw(n,h,f,y){var b=this._relativeTime[f];return Cu(b)?b(n,h,f,y):b.replace(/%d/i,n)}function yw(n,h){var f=this._relativeTime[n>0?"future":"past"];return Cu(f)?f(h):f.replace(/%s/i,h)}var F_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ll(n){return typeof n=="string"?F_[n]||F_[n.toLowerCase()]:void 0}function Dy(n){var h={},f,y;for(y in n)Fn(n,y)&&(f=ll(y),f&&(h[f]=n[y]));return h}var _w={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function vw(n){var h=[],f;for(f in n)Fn(n,f)&&h.push({unit:f,priority:_w[f]});return h.sort(function(y,b){return y.priority-b.priority}),h}var Qv=/\d/,Bo=/\d\d/,e0=/\d{3}/,zy=/\d{4}/,Lm=/[+-]?\d{6}/,xi=/\d\d?/,t0=/\d\d\d\d?/,r0=/\d\d\d\d\d\d?/,Om=/\d{1,3}/,Ry=/\d{1,4}/,Fm=/[+-]?\d{1,6}/,of=/\d+/,Bm=/[+-]?\d+/,xw=/Z|[+-]\d\d:?\d\d/gi,Nm=/Z|[+-]\d\d(?::?\d\d)?/gi,ww=/[+-]?\d+(\.\d{1,3})?/,np=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lf=/^[1-9]\d?/,Ly=/^([1-9]\d|\d)/,Tm;Tm={};function Sr(n,h,f){Tm[n]=Cu(h)?h:function(y,b){return y&&f?f:h}}function bw(n,h){return Fn(Tm,n)?Tm[n](h._strict,h._locale):new RegExp(Sw(n))}function Sw(n){return cc(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,f,y,b,C){return f||y||b||C}))}function cc(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function sl(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function _n(n){var h=+n,f=0;return h!==0&&isFinite(h)&&(f=sl(h)),f}var ry={};function ii(n,h){var f,y=h,b;for(typeof n=="string"&&(n=[n]),dc(h)&&(y=function(C,S){S[h]=_n(C)}),b=n.length,f=0;f<b;f++)ry[n[f]]=y}function ip(n,h){ii(n,function(f,y,b,C){b._w=b._w||{},h(f,b._w,b,C)})}function kw(n,h,f){h!=null&&Fn(ry,n)&&ry[n](h,f._a,f,n)}function jm(n){return n%4===0&&n%100!==0||n%400===0}var ba=0,lc=1,Su=2,bs=3,Rl=4,uc=5,Gh=6,Tw=7,Ew=8;Ur("Y",0,0,function(){var n=this.year();return n<=9999?ku(n,4):"+"+n});Ur(0,["YY",2],0,function(){return this.year()%100});Ur(0,["YYYY",4],0,"year");Ur(0,["YYYYY",5],0,"year");Ur(0,["YYYYYY",6,!0],0,"year");Sr("Y",Bm);Sr("YY",xi,Bo);Sr("YYYY",Ry,zy);Sr("YYYYY",Fm,Lm);Sr("YYYYYY",Fm,Lm);ii(["YYYYY","YYYYYY"],ba);ii("YYYY",function(n,h){h[ba]=n.length===2?gr.parseTwoDigitYear(n):_n(n)});ii("YY",function(n,h){h[ba]=gr.parseTwoDigitYear(n)});ii("Y",function(n,h){h[ba]=parseInt(n,10)});function qf(n){return jm(n)?366:365}gr.parseTwoDigitYear=function(n){return _n(n)+(_n(n)>68?1900:2e3)};var n0=uf("FullYear",!0);function Cw(){return jm(this.year())}function uf(n,h){return function(f){return f!=null?(i0(this,n,f),gr.updateOffset(this,h),this):Xf(this,n)}}function Xf(n,h){if(!n.isValid())return NaN;var f=n._d,y=n._isUTC;switch(h){case"Milliseconds":return y?f.getUTCMilliseconds():f.getMilliseconds();case"Seconds":return y?f.getUTCSeconds():f.getSeconds();case"Minutes":return y?f.getUTCMinutes():f.getMinutes();case"Hours":return y?f.getUTCHours():f.getHours();case"Date":return y?f.getUTCDate():f.getDate();case"Day":return y?f.getUTCDay():f.getDay();case"Month":return y?f.getUTCMonth():f.getMonth();case"FullYear":return y?f.getUTCFullYear():f.getFullYear();default:return NaN}}function i0(n,h,f){var y,b,C,S,c;if(!(!n.isValid()||isNaN(f))){switch(y=n._d,b=n._isUTC,h){case"Milliseconds":return void(b?y.setUTCMilliseconds(f):y.setMilliseconds(f));case"Seconds":return void(b?y.setUTCSeconds(f):y.setSeconds(f));case"Minutes":return void(b?y.setUTCMinutes(f):y.setMinutes(f));case"Hours":return void(b?y.setUTCHours(f):y.setHours(f));case"Date":return void(b?y.setUTCDate(f):y.setDate(f));case"FullYear":break;default:return}C=f,S=n.month(),c=n.date(),c=c===29&&S===1&&!jm(C)?28:c,b?y.setUTCFullYear(C,S,c):y.setFullYear(C,S,c)}}function Iw(n){return n=ll(n),Cu(this[n])?this[n]():this}function Pw(n,h){if(typeof n=="object"){n=Dy(n);var f=vw(n),y,b=f.length;for(y=0;y<b;y++)this[f[y].unit](n[f[y].unit])}else if(n=ll(n),Cu(this[n]))return this[n](h);return this}function Mw(n,h){return(n%h+h)%h}var ts;Array.prototype.indexOf?ts=Array.prototype.indexOf:ts=function(n){var h;for(h=0;h<this.length;++h)if(this[h]===n)return h;return-1};function Oy(n,h){if(isNaN(n)||isNaN(h))return NaN;var f=Mw(h,12);return n+=(h-f)/12,f===1?jm(n)?29:28:31-f%7%2}Ur("M",["MM",2],"Mo",function(){return this.month()+1});Ur("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});Ur("MMMM",0,0,function(n){return this.localeData().months(this,n)});Sr("M",xi,lf);Sr("MM",xi,Bo);Sr("MMM",function(n,h){return h.monthsShortRegex(n)});Sr("MMMM",function(n,h){return h.monthsRegex(n)});ii(["M","MM"],function(n,h){h[lc]=_n(n)-1});ii(["MMM","MMMM"],function(n,h,f,y){var b=f._locale.monthsParse(n,y,f._strict);b!=null?h[lc]=b:cn(f).invalidMonth=n});var Aw="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),s0="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),a0=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Dw=np,zw=np;function Rw(n,h){return n?Ol(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||a0).test(h)?"format":"standalone"][n.month()]:Ol(this._months)?this._months:this._months.standalone}function Lw(n,h){return n?Ol(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[a0.test(h)?"format":"standalone"][n.month()]:Ol(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ow(n,h,f){var y,b,C,S=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)C=Eu([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(C,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(C,"").toLocaleLowerCase();return f?h==="MMM"?(b=ts.call(this._shortMonthsParse,S),b!==-1?b:null):(b=ts.call(this._longMonthsParse,S),b!==-1?b:null):h==="MMM"?(b=ts.call(this._shortMonthsParse,S),b!==-1?b:(b=ts.call(this._longMonthsParse,S),b!==-1?b:null)):(b=ts.call(this._longMonthsParse,S),b!==-1?b:(b=ts.call(this._shortMonthsParse,S),b!==-1?b:null))}function Fw(n,h,f){var y,b,C;if(this._monthsParseExact)return Ow.call(this,n,h,f);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){if(b=Eu([2e3,y]),f&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(b,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(b,"").replace(".","")+"$","i")),!f&&!this._monthsParse[y]&&(C="^"+this.months(b,"")+"|^"+this.monthsShort(b,""),this._monthsParse[y]=new RegExp(C.replace(".",""),"i")),f&&h==="MMMM"&&this._longMonthsParse[y].test(n))return y;if(f&&h==="MMM"&&this._shortMonthsParse[y].test(n))return y;if(!f&&this._monthsParse[y].test(n))return y}}function o0(n,h){if(!n.isValid())return n;if(typeof h=="string"){if(/^\d+$/.test(h))h=_n(h);else if(h=n.localeData().monthsParse(h),!dc(h))return n}var f=h,y=n.date();return y=y<29?y:Math.min(y,Oy(n.year(),f)),n._isUTC?n._d.setUTCMonth(f,y):n._d.setMonth(f,y),n}function l0(n){return n!=null?(o0(this,n),gr.updateOffset(this,!0),this):Xf(this,"Month")}function Bw(){return Oy(this.year(),this.month())}function Nw(n){return this._monthsParseExact?(Fn(this,"_monthsRegex")||u0.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(Fn(this,"_monthsShortRegex")||(this._monthsShortRegex=Dw),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function jw(n){return this._monthsParseExact?(Fn(this,"_monthsRegex")||u0.call(this),n?this._monthsStrictRegex:this._monthsRegex):(Fn(this,"_monthsRegex")||(this._monthsRegex=zw),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function u0(){function n(R,N){return N.length-R.length}var h=[],f=[],y=[],b,C,S,c;for(b=0;b<12;b++)C=Eu([2e3,b]),S=cc(this.monthsShort(C,"")),c=cc(this.months(C,"")),h.push(S),f.push(c),y.push(c),y.push(S);h.sort(n),f.sort(n),y.sort(n),this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Uw(n,h,f,y,b,C,S){var c;return n<100&&n>=0?(c=new Date(n+400,h,f,y,b,C,S),isFinite(c.getFullYear())&&c.setFullYear(n)):c=new Date(n,h,f,y,b,C,S),c}function Kf(n){var h,f;return n<100&&n>=0?(f=Array.prototype.slice.call(arguments),f[0]=n+400,h=new Date(Date.UTC.apply(null,f)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(n)):h=new Date(Date.UTC.apply(null,arguments)),h}function Em(n,h,f){var y=7+h-f,b=(7+Kf(n,0,y).getUTCDay()-h)%7;return-b+y-1}function c0(n,h,f,y,b){var C=(7+f-y)%7,S=Em(n,y,b),c=1+7*(h-1)+C+S,R,N;return c<=0?(R=n-1,N=qf(R)+c):c>qf(n)?(R=n+1,N=c-qf(n)):(R=n,N=c),{year:R,dayOfYear:N}}function Jf(n,h,f){var y=Em(n.year(),h,f),b=Math.floor((n.dayOfYear()-y-1)/7)+1,C,S;return b<1?(S=n.year()-1,C=b+hc(S,h,f)):b>hc(n.year(),h,f)?(C=b-hc(n.year(),h,f),S=n.year()+1):(S=n.year(),C=b),{week:C,year:S}}function hc(n,h,f){var y=Em(n,h,f),b=Em(n+1,h,f);return(qf(n)-y+b)/7}Ur("w",["ww",2],"wo","week");Ur("W",["WW",2],"Wo","isoWeek");Sr("w",xi,lf);Sr("ww",xi,Bo);Sr("W",xi,lf);Sr("WW",xi,Bo);ip(["w","ww","W","WW"],function(n,h,f,y){h[y.substr(0,1)]=_n(n)});function Vw(n){return Jf(n,this._week.dow,this._week.doy).week}var Hw={dow:0,doy:6};function $w(){return this._week.dow}function Ww(){return this._week.doy}function Gw(n){var h=this.localeData().week(this);return n==null?h:this.add((n-h)*7,"d")}function Zw(n){var h=Jf(this,1,4).week;return n==null?h:this.add((n-h)*7,"d")}Ur("d",0,"do","day");Ur("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});Ur("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});Ur("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});Ur("e",0,0,"weekday");Ur("E",0,0,"isoWeekday");Sr("d",xi);Sr("e",xi);Sr("E",xi);Sr("dd",function(n,h){return h.weekdaysMinRegex(n)});Sr("ddd",function(n,h){return h.weekdaysShortRegex(n)});Sr("dddd",function(n,h){return h.weekdaysRegex(n)});ip(["dd","ddd","dddd"],function(n,h,f,y){var b=f._locale.weekdaysParse(n,y,f._strict);b!=null?h.d=b:cn(f).invalidWeekday=n});ip(["d","e","E"],function(n,h,f,y){h[y]=_n(n)});function qw(n,h){return typeof n!="string"?n:isNaN(n)?(n=h.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function Yw(n,h){return typeof n=="string"?h.weekdaysParse(n)%7||7:isNaN(n)?null:n}function Fy(n,h){return n.slice(h,7).concat(n.slice(0,h))}var Xw="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),h0="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Kw="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Jw=np,Qw=np,eb=np;function tb(n,h){var f=Ol(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return n===!0?Fy(f,this._week.dow):n?f[n.day()]:f}function rb(n){return n===!0?Fy(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function nb(n){return n===!0?Fy(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function ib(n,h,f){var y,b,C,S=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)C=Eu([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(C,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(C,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(C,"").toLocaleLowerCase();return f?h==="dddd"?(b=ts.call(this._weekdaysParse,S),b!==-1?b:null):h==="ddd"?(b=ts.call(this._shortWeekdaysParse,S),b!==-1?b:null):(b=ts.call(this._minWeekdaysParse,S),b!==-1?b:null):h==="dddd"?(b=ts.call(this._weekdaysParse,S),b!==-1||(b=ts.call(this._shortWeekdaysParse,S),b!==-1)?b:(b=ts.call(this._minWeekdaysParse,S),b!==-1?b:null)):h==="ddd"?(b=ts.call(this._shortWeekdaysParse,S),b!==-1||(b=ts.call(this._weekdaysParse,S),b!==-1)?b:(b=ts.call(this._minWeekdaysParse,S),b!==-1?b:null)):(b=ts.call(this._minWeekdaysParse,S),b!==-1||(b=ts.call(this._weekdaysParse,S),b!==-1)?b:(b=ts.call(this._shortWeekdaysParse,S),b!==-1?b:null))}function sb(n,h,f){var y,b,C;if(this._weekdaysParseExact)return ib.call(this,n,h,f);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){if(b=Eu([2e3,1]).day(y),f&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(b,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(b,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(b,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(C="^"+this.weekdays(b,"")+"|^"+this.weekdaysShort(b,"")+"|^"+this.weekdaysMin(b,""),this._weekdaysParse[y]=new RegExp(C.replace(".",""),"i")),f&&h==="dddd"&&this._fullWeekdaysParse[y].test(n))return y;if(f&&h==="ddd"&&this._shortWeekdaysParse[y].test(n))return y;if(f&&h==="dd"&&this._minWeekdaysParse[y].test(n))return y;if(!f&&this._weekdaysParse[y].test(n))return y}}function ab(n){if(!this.isValid())return n!=null?this:NaN;var h=Xf(this,"Day");return n!=null?(n=qw(n,this.localeData()),this.add(n-h,"d")):h}function ob(n){if(!this.isValid())return n!=null?this:NaN;var h=(this.day()+7-this.localeData()._week.dow)%7;return n==null?h:this.add(n-h,"d")}function lb(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var h=Yw(n,this.localeData());return this.day(this.day()%7?h:h-7)}else return this.day()||7}function ub(n){return this._weekdaysParseExact?(Fn(this,"_weekdaysRegex")||By.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(Fn(this,"_weekdaysRegex")||(this._weekdaysRegex=Jw),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function cb(n){return this._weekdaysParseExact?(Fn(this,"_weekdaysRegex")||By.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Fn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qw),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function hb(n){return this._weekdaysParseExact?(Fn(this,"_weekdaysRegex")||By.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Fn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=eb),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function By(){function n(Z,U){return U.length-Z.length}var h=[],f=[],y=[],b=[],C,S,c,R,N;for(C=0;C<7;C++)S=Eu([2e3,1]).day(C),c=cc(this.weekdaysMin(S,"")),R=cc(this.weekdaysShort(S,"")),N=cc(this.weekdays(S,"")),h.push(c),f.push(R),y.push(N),b.push(c),b.push(R),b.push(N);h.sort(n),f.sort(n),y.sort(n),b.sort(n),this._weekdaysRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+f.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Ny(){return this.hours()%12||12}function db(){return this.hours()||24}Ur("H",["HH",2],0,"hour");Ur("h",["hh",2],0,Ny);Ur("k",["kk",2],0,db);Ur("hmm",0,0,function(){return""+Ny.apply(this)+ku(this.minutes(),2)});Ur("hmmss",0,0,function(){return""+Ny.apply(this)+ku(this.minutes(),2)+ku(this.seconds(),2)});Ur("Hmm",0,0,function(){return""+this.hours()+ku(this.minutes(),2)});Ur("Hmmss",0,0,function(){return""+this.hours()+ku(this.minutes(),2)+ku(this.seconds(),2)});function d0(n,h){Ur(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}d0("a",!0);d0("A",!1);function f0(n,h){return h._meridiemParse}Sr("a",f0);Sr("A",f0);Sr("H",xi,Ly);Sr("h",xi,lf);Sr("k",xi,lf);Sr("HH",xi,Bo);Sr("hh",xi,Bo);Sr("kk",xi,Bo);Sr("hmm",t0);Sr("hmmss",r0);Sr("Hmm",t0);Sr("Hmmss",r0);ii(["H","HH"],bs);ii(["k","kk"],function(n,h,f){var y=_n(n);h[bs]=y===24?0:y});ii(["a","A"],function(n,h,f){f._isPm=f._locale.isPM(n),f._meridiem=n});ii(["h","hh"],function(n,h,f){h[bs]=_n(n),cn(f).bigHour=!0});ii("hmm",function(n,h,f){var y=n.length-2;h[bs]=_n(n.substr(0,y)),h[Rl]=_n(n.substr(y)),cn(f).bigHour=!0});ii("hmmss",function(n,h,f){var y=n.length-4,b=n.length-2;h[bs]=_n(n.substr(0,y)),h[Rl]=_n(n.substr(y,2)),h[uc]=_n(n.substr(b)),cn(f).bigHour=!0});ii("Hmm",function(n,h,f){var y=n.length-2;h[bs]=_n(n.substr(0,y)),h[Rl]=_n(n.substr(y))});ii("Hmmss",function(n,h,f){var y=n.length-4,b=n.length-2;h[bs]=_n(n.substr(0,y)),h[Rl]=_n(n.substr(y,2)),h[uc]=_n(n.substr(b))});function fb(n){return(n+"").toLowerCase().charAt(0)==="p"}var pb=/[ap]\.?m?\.?/i,mb=uf("Hours",!0);function gb(n,h,f){return n>11?f?"pm":"PM":f?"am":"AM"}var p0={calendar:iw,longDateFormat:lw,invalidDate:cw,ordinal:dw,dayOfMonthOrdinalParse:fw,relativeTime:mw,months:Aw,monthsShort:s0,week:Hw,weekdays:Xw,weekdaysMin:Kw,weekdaysShort:h0,meridiemParse:pb},zi={},$f={},Qf;function yb(n,h){var f,y=Math.min(n.length,h.length);for(f=0;f<y;f+=1)if(n[f]!==h[f])return f;return y}function B_(n){return n&&n.toLowerCase().replace("_","-")}function _b(n){for(var h=0,f,y,b,C;h<n.length;){for(C=B_(n[h]).split("-"),f=C.length,y=B_(n[h+1]),y=y?y.split("-"):null;f>0;){if(b=Um(C.slice(0,f).join("-")),b)return b;if(y&&y.length>=f&&yb(C,y)>=f-1)break;f--}h++}return Qf}function vb(n){return!!(n&&n.match("^[^/\\\\]*$"))}function Um(n){var h=null,f;if(zi[n]===void 0&&typeof km<"u"&&km&&km.exports&&vb(n))try{h=Qf._abbr,f=require,f("./locale/"+n),Gc(h)}catch{zi[n]=null}return zi[n]}function Gc(n,h){var f;return n&&(ao(h)?f=fc(n):f=jy(n,h),f?Qf=f:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),Qf._abbr}function jy(n,h){if(h!==null){var f,y=p0;if(h.abbr=n,zi[n]!=null)Kv("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=zi[n]._config;else if(h.parentLocale!=null)if(zi[h.parentLocale]!=null)y=zi[h.parentLocale]._config;else if(f=Um(h.parentLocale),f!=null)y=f._config;else return $f[h.parentLocale]||($f[h.parentLocale]=[]),$f[h.parentLocale].push({name:n,config:h}),null;return zi[n]=new My(ey(y,h)),$f[n]&&$f[n].forEach(function(b){jy(b.name,b.config)}),Gc(n),zi[n]}else return delete zi[n],null}function xb(n,h){if(h!=null){var f,y,b=p0;zi[n]!=null&&zi[n].parentLocale!=null?zi[n].set(ey(zi[n]._config,h)):(y=Um(n),y!=null&&(b=y._config),h=ey(b,h),y==null&&(h.abbr=n),f=new My(h),f.parentLocale=zi[n],zi[n]=f),Gc(n)}else zi[n]!=null&&(zi[n].parentLocale!=null?(zi[n]=zi[n].parentLocale,n===Gc()&&Gc(n)):zi[n]!=null&&delete zi[n]);return zi[n]}function fc(n){var h;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return Qf;if(!Ol(n)){if(h=Um(n),h)return h;n=[n]}return _b(n)}function wb(){return ty(zi)}function Uy(n){var h,f=n._a;return f&&cn(n).overflow===-2&&(h=f[lc]<0||f[lc]>11?lc:f[Su]<1||f[Su]>Oy(f[ba],f[lc])?Su:f[bs]<0||f[bs]>24||f[bs]===24&&(f[Rl]!==0||f[uc]!==0||f[Gh]!==0)?bs:f[Rl]<0||f[Rl]>59?Rl:f[uc]<0||f[uc]>59?uc:f[Gh]<0||f[Gh]>999?Gh:-1,cn(n)._overflowDayOfYear&&(h<ba||h>Su)&&(h=Su),cn(n)._overflowWeeks&&h===-1&&(h=Tw),cn(n)._overflowWeekday&&h===-1&&(h=Ew),cn(n).overflow=h),n}var bb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kb=/Z|[+-]\d\d(?::?\d\d)?/,nm=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ag=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tb=/^\/?Date\((-?\d+)/i,Eb=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cb={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function m0(n){var h,f,y=n._i,b=bb.exec(y)||Sb.exec(y),C,S,c,R,N=nm.length,Z=Ag.length;if(b){for(cn(n).iso=!0,h=0,f=N;h<f;h++)if(nm[h][1].exec(b[1])){S=nm[h][0],C=nm[h][2]!==!1;break}if(S==null){n._isValid=!1;return}if(b[3]){for(h=0,f=Z;h<f;h++)if(Ag[h][1].exec(b[3])){c=(b[2]||" ")+Ag[h][0];break}if(c==null){n._isValid=!1;return}}if(!C&&c!=null){n._isValid=!1;return}if(b[4])if(kb.exec(b[4]))R="Z";else{n._isValid=!1;return}n._f=S+(c||"")+(R||""),Hy(n)}else n._isValid=!1}function Ib(n,h,f,y,b,C){var S=[Pb(n),s0.indexOf(h),parseInt(f,10),parseInt(y,10),parseInt(b,10)];return C&&S.push(parseInt(C,10)),S}function Pb(n){var h=parseInt(n,10);return h<=49?2e3+h:h<=999?1900+h:h}function Mb(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ab(n,h,f){if(n){var y=h0.indexOf(n),b=new Date(h[0],h[1],h[2]).getDay();if(y!==b)return cn(f).weekdayMismatch=!0,f._isValid=!1,!1}return!0}function Db(n,h,f){if(n)return Cb[n];if(h)return 0;var y=parseInt(f,10),b=y%100,C=(y-b)/100;return C*60+b}function g0(n){var h=Eb.exec(Mb(n._i)),f;if(h){if(f=Ib(h[4],h[3],h[2],h[5],h[6],h[7]),!Ab(h[1],f,n))return;n._a=f,n._tzm=Db(h[8],h[9],h[10]),n._d=Kf.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),cn(n).rfc2822=!0}else n._isValid=!1}function zb(n){var h=Tb.exec(n._i);if(h!==null){n._d=new Date(+h[1]);return}if(m0(n),n._isValid===!1)delete n._isValid;else return;if(g0(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:gr.createFromInputFallback(n)}gr.createFromInputFallback=ol("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function Gd(n,h,f){return n??h??f}function Rb(n){var h=new Date(gr.now());return n._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function Vy(n){var h,f,y=[],b,C,S;if(!n._d){for(b=Rb(n),n._w&&n._a[Su]==null&&n._a[lc]==null&&Lb(n),n._dayOfYear!=null&&(S=Gd(n._a[ba],b[ba]),(n._dayOfYear>qf(S)||n._dayOfYear===0)&&(cn(n)._overflowDayOfYear=!0),f=Kf(S,0,n._dayOfYear),n._a[lc]=f.getUTCMonth(),n._a[Su]=f.getUTCDate()),h=0;h<3&&n._a[h]==null;++h)n._a[h]=y[h]=b[h];for(;h<7;h++)n._a[h]=y[h]=n._a[h]==null?h===2?1:0:n._a[h];n._a[bs]===24&&n._a[Rl]===0&&n._a[uc]===0&&n._a[Gh]===0&&(n._nextDay=!0,n._a[bs]=0),n._d=(n._useUTC?Kf:Uw).apply(null,y),C=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[bs]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==C&&(cn(n).weekdayMismatch=!0)}}function Lb(n){var h,f,y,b,C,S,c,R,N;h=n._w,h.GG!=null||h.W!=null||h.E!=null?(C=1,S=4,f=Gd(h.GG,n._a[ba],Jf(vi(),1,4).year),y=Gd(h.W,1),b=Gd(h.E,1),(b<1||b>7)&&(R=!0)):(C=n._locale._week.dow,S=n._locale._week.doy,N=Jf(vi(),C,S),f=Gd(h.gg,n._a[ba],N.year),y=Gd(h.w,N.week),h.d!=null?(b=h.d,(b<0||b>6)&&(R=!0)):h.e!=null?(b=h.e+C,(h.e<0||h.e>6)&&(R=!0)):b=C),y<1||y>hc(f,C,S)?cn(n)._overflowWeeks=!0:R!=null?cn(n)._overflowWeekday=!0:(c=c0(f,y,b,C,S),n._a[ba]=c.year,n._dayOfYear=c.dayOfYear)}gr.ISO_8601=function(){};gr.RFC_2822=function(){};function Hy(n){if(n._f===gr.ISO_8601){m0(n);return}if(n._f===gr.RFC_2822){g0(n);return}n._a=[],cn(n).empty=!0;var h=""+n._i,f,y,b,C,S,c=h.length,R=0,N,Z;for(b=Jv(n._f,n._locale).match(Ay)||[],Z=b.length,f=0;f<Z;f++)C=b[f],y=(h.match(bw(C,n))||[])[0],y&&(S=h.substr(0,h.indexOf(y)),S.length>0&&cn(n).unusedInput.push(S),h=h.slice(h.indexOf(y)+y.length),R+=y.length),Yd[C]?(y?cn(n).empty=!1:cn(n).unusedTokens.push(C),kw(C,y,n)):n._strict&&!y&&cn(n).unusedTokens.push(C);cn(n).charsLeftOver=c-R,h.length>0&&cn(n).unusedInput.push(h),n._a[bs]<=12&&cn(n).bigHour===!0&&n._a[bs]>0&&(cn(n).bigHour=void 0),cn(n).parsedDateParts=n._a.slice(0),cn(n).meridiem=n._meridiem,n._a[bs]=Ob(n._locale,n._a[bs],n._meridiem),N=cn(n).era,N!==null&&(n._a[ba]=n._locale.erasConvertYear(N,n._a[ba])),Vy(n),Uy(n)}function Ob(n,h,f){var y;return f==null?h:n.meridiemHour!=null?n.meridiemHour(h,f):(n.isPM!=null&&(y=n.isPM(f),y&&h<12&&(h+=12),!y&&h===12&&(h=0)),h)}function Fb(n){var h,f,y,b,C,S,c=!1,R=n._f.length;if(R===0){cn(n).invalidFormat=!0,n._d=new Date(NaN);return}for(b=0;b<R;b++)C=0,S=!1,h=Py({},n),n._useUTC!=null&&(h._useUTC=n._useUTC),h._f=n._f[b],Hy(h),Iy(h)&&(S=!0),C+=cn(h).charsLeftOver,C+=cn(h).unusedTokens.length*10,cn(h).score=C,c?C<y&&(y=C,f=h):(y==null||C<y||S)&&(y=C,f=h,S&&(c=!0));$c(n,f||h)}function Bb(n){if(!n._d){var h=Dy(n._i),f=h.day===void 0?h.date:h.day;n._a=Yv([h.year,h.month,f,h.hour,h.minute,h.second,h.millisecond],function(y){return y&&parseInt(y,10)}),Vy(n)}}function Nb(n){var h=new rp(Uy(y0(n)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function y0(n){var h=n._i,f=n._f;return n._locale=n._locale||fc(n._l),h===null||f===void 0&&h===""?Rm({nullInput:!0}):(typeof h=="string"&&(n._i=h=n._locale.preparse(h)),Fl(h)?new rp(Uy(h)):(tp(h)?n._d=h:Ol(f)?Fb(n):f?Hy(n):jb(n),Iy(n)||(n._d=null),n))}function jb(n){var h=n._i;ao(h)?n._d=new Date(gr.now()):tp(h)?n._d=new Date(h.valueOf()):typeof h=="string"?zb(n):Ol(h)?(n._a=Yv(h.slice(0),function(f){return parseInt(f,10)}),Vy(n)):qh(h)?Bb(n):dc(h)?n._d=new Date(h):gr.createFromInputFallback(n)}function _0(n,h,f,y,b){var C={};return(h===!0||h===!1)&&(y=h,h=void 0),(f===!0||f===!1)&&(y=f,f=void 0),(qh(n)&&Cy(n)||Ol(n)&&n.length===0)&&(n=void 0),C._isAMomentObject=!0,C._useUTC=C._isUTC=b,C._l=f,C._i=n,C._f=h,C._strict=y,Nb(C)}function vi(n,h,f,y){return _0(n,h,f,y,!1)}var Ub=ol("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=vi.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:Rm()}),Vb=ol("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=vi.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:Rm()});function v0(n,h){var f,y;if(h.length===1&&Ol(h[0])&&(h=h[0]),!h.length)return vi();for(f=h[0],y=1;y<h.length;++y)(!h[y].isValid()||h[y][n](f))&&(f=h[y]);return f}function Hb(){var n=[].slice.call(arguments,0);return v0("isBefore",n)}function $b(){var n=[].slice.call(arguments,0);return v0("isAfter",n)}var Wb=function(){return Date.now?Date.now():+new Date},Wf=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Gb(n){var h,f=!1,y,b=Wf.length;for(h in n)if(Fn(n,h)&&!(ts.call(Wf,h)!==-1&&(n[h]==null||!isNaN(n[h]))))return!1;for(y=0;y<b;++y)if(n[Wf[y]]){if(f)return!1;parseFloat(n[Wf[y]])!==_n(n[Wf[y]])&&(f=!0)}return!0}function Zb(){return this._isValid}function qb(){return Bl(NaN)}function Vm(n){var h=Dy(n),f=h.year||0,y=h.quarter||0,b=h.month||0,C=h.week||h.isoWeek||0,S=h.day||0,c=h.hour||0,R=h.minute||0,N=h.second||0,Z=h.millisecond||0;this._isValid=Gb(h),this._milliseconds=+Z+N*1e3+R*6e4+c*1e3*60*60,this._days=+S+C*7,this._months=+b+y*3+f*12,this._data={},this._locale=fc(),this._bubble()}function mm(n){return n instanceof Vm}function ny(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function Yb(n,h,f){var y=Math.min(n.length,h.length),b=Math.abs(n.length-h.length),C=0,S;for(S=0;S<y;S++)_n(n[S])!==_n(h[S])&&C++;return C+b}function x0(n,h){Ur(n,0,0,function(){var f=this.utcOffset(),y="+";return f<0&&(f=-f,y="-"),y+ku(~~(f/60),2)+h+ku(~~f%60,2)})}x0("Z",":");x0("ZZ","");Sr("Z",Nm);Sr("ZZ",Nm);ii(["Z","ZZ"],function(n,h,f){f._useUTC=!0,f._tzm=$y(Nm,n)});var Xb=/([\+\-]|\d\d)/gi;function $y(n,h){var f=(h||"").match(n),y,b,C;return f===null?null:(y=f[f.length-1]||[],b=(y+"").match(Xb)||["-",0,0],C=+(b[1]*60)+_n(b[2]),C===0?0:b[0]==="+"?C:-C)}function Wy(n,h){var f,y;return h._isUTC?(f=h.clone(),y=(Fl(n)||tp(n)?n.valueOf():vi(n).valueOf())-f.valueOf(),f._d.setTime(f._d.valueOf()+y),gr.updateOffset(f,!1),f):vi(n).local()}function iy(n){return-Math.round(n._d.getTimezoneOffset())}gr.updateOffset=function(){};function Kb(n,h,f){var y=this._offset||0,b;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=$y(Nm,n),n===null)return this}else Math.abs(n)<16&&!f&&(n=n*60);return!this._isUTC&&h&&(b=iy(this)),this._offset=n,this._isUTC=!0,b!=null&&this.add(b,"m"),y!==n&&(!h||this._changeInProgress?S0(this,Bl(n-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,gr.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:iy(this)}function Jb(n,h){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,h),this):-this.utcOffset()}function Qb(n){return this.utcOffset(0,n)}function e2(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(iy(this),"m")),this}function t2(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=$y(xw,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function r2(n){return this.isValid()?(n=n?vi(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function n2(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function i2(){if(!ao(this._isDSTShifted))return this._isDSTShifted;var n={},h;return Py(n,this),n=y0(n),n._a?(h=n._isUTC?Eu(n._a):vi(n._a),this._isDSTShifted=this.isValid()&&Yb(n._a,h.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function s2(){return this.isValid()?!this._isUTC:!1}function a2(){return this.isValid()?this._isUTC:!1}function w0(){return this.isValid()?this._isUTC&&this._offset===0:!1}var o2=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,l2=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bl(n,h){var f=n,y=null,b,C,S;return mm(n)?f={ms:n._milliseconds,d:n._days,M:n._months}:dc(n)||!isNaN(+n)?(f={},h?f[h]=+n:f.milliseconds=+n):(y=o2.exec(n))?(b=y[1]==="-"?-1:1,f={y:0,d:_n(y[Su])*b,h:_n(y[bs])*b,m:_n(y[Rl])*b,s:_n(y[uc])*b,ms:_n(ny(y[Gh]*1e3))*b}):(y=l2.exec(n))?(b=y[1]==="-"?-1:1,f={y:Hh(y[2],b),M:Hh(y[3],b),w:Hh(y[4],b),d:Hh(y[5],b),h:Hh(y[6],b),m:Hh(y[7],b),s:Hh(y[8],b)}):f==null?f={}:typeof f=="object"&&("from"in f||"to"in f)&&(S=u2(vi(f.from),vi(f.to)),f={},f.ms=S.milliseconds,f.M=S.months),C=new Vm(f),mm(n)&&Fn(n,"_locale")&&(C._locale=n._locale),mm(n)&&Fn(n,"_isValid")&&(C._isValid=n._isValid),C}Bl.fn=Vm.prototype;Bl.invalid=qb;function Hh(n,h){var f=n&&parseFloat(n.replace(",","."));return(isNaN(f)?0:f)*h}function N_(n,h){var f={};return f.months=h.month()-n.month()+(h.year()-n.year())*12,n.clone().add(f.months,"M").isAfter(h)&&--f.months,f.milliseconds=+h-+n.clone().add(f.months,"M"),f}function u2(n,h){var f;return n.isValid()&&h.isValid()?(h=Wy(h,n),n.isBefore(h)?f=N_(n,h):(f=N_(h,n),f.milliseconds=-f.milliseconds,f.months=-f.months),f):{milliseconds:0,months:0}}function b0(n,h){return function(f,y){var b,C;return y!==null&&!isNaN(+y)&&(Kv(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),C=f,f=y,y=C),b=Bl(f,y),S0(this,b,n),this}}function S0(n,h,f,y){var b=h._milliseconds,C=ny(h._days),S=ny(h._months);n.isValid()&&(y=y??!0,S&&o0(n,Xf(n,"Month")+S*f),C&&i0(n,"Date",Xf(n,"Date")+C*f),b&&n._d.setTime(n._d.valueOf()+b*f),y&&gr.updateOffset(n,C||S))}var c2=b0(1,"add"),h2=b0(-1,"subtract");function k0(n){return typeof n=="string"||n instanceof String}function d2(n){return Fl(n)||tp(n)||k0(n)||dc(n)||p2(n)||f2(n)||n===null||n===void 0}function f2(n){var h=qh(n)&&!Cy(n),f=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],b,C,S=y.length;for(b=0;b<S;b+=1)C=y[b],f=f||Fn(n,C);return h&&f}function p2(n){var h=Ol(n),f=!1;return h&&(f=n.filter(function(y){return!dc(y)&&k0(n)}).length===0),h&&f}function m2(n){var h=qh(n)&&!Cy(n),f=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],b,C;for(b=0;b<y.length;b+=1)C=y[b],f=f||Fn(n,C);return h&&f}function g2(n,h){var f=n.diff(h,"days",!0);return f<-6?"sameElse":f<-1?"lastWeek":f<0?"lastDay":f<1?"sameDay":f<2?"nextDay":f<7?"nextWeek":"sameElse"}function y2(n,h){arguments.length===1&&(arguments[0]?d2(arguments[0])?(n=arguments[0],h=void 0):m2(arguments[0])&&(h=arguments[0],n=void 0):(n=void 0,h=void 0));var f=n||vi(),y=Wy(f,this).startOf("day"),b=gr.calendarFormat(this,y)||"sameElse",C=h&&(Cu(h[b])?h[b].call(this,f):h[b]);return this.format(C||this.localeData().calendar(b,this,vi(f)))}function _2(){return new rp(this)}function v2(n,h){var f=Fl(n)?n:vi(n);return this.isValid()&&f.isValid()?(h=ll(h)||"millisecond",h==="millisecond"?this.valueOf()>f.valueOf():f.valueOf()<this.clone().startOf(h).valueOf()):!1}function x2(n,h){var f=Fl(n)?n:vi(n);return this.isValid()&&f.isValid()?(h=ll(h)||"millisecond",h==="millisecond"?this.valueOf()<f.valueOf():this.clone().endOf(h).valueOf()<f.valueOf()):!1}function w2(n,h,f,y){var b=Fl(n)?n:vi(n),C=Fl(h)?h:vi(h);return this.isValid()&&b.isValid()&&C.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(b,f):!this.isBefore(b,f))&&(y[1]===")"?this.isBefore(C,f):!this.isAfter(C,f))):!1}function b2(n,h){var f=Fl(n)?n:vi(n),y;return this.isValid()&&f.isValid()?(h=ll(h)||"millisecond",h==="millisecond"?this.valueOf()===f.valueOf():(y=f.valueOf(),this.clone().startOf(h).valueOf()<=y&&y<=this.clone().endOf(h).valueOf())):!1}function S2(n,h){return this.isSame(n,h)||this.isAfter(n,h)}function k2(n,h){return this.isSame(n,h)||this.isBefore(n,h)}function T2(n,h,f){var y,b,C;if(!this.isValid())return NaN;if(y=Wy(n,this),!y.isValid())return NaN;switch(b=(y.utcOffset()-this.utcOffset())*6e4,h=ll(h),h){case"year":C=gm(this,y)/12;break;case"month":C=gm(this,y);break;case"quarter":C=gm(this,y)/3;break;case"second":C=(this-y)/1e3;break;case"minute":C=(this-y)/6e4;break;case"hour":C=(this-y)/36e5;break;case"day":C=(this-y-b)/864e5;break;case"week":C=(this-y-b)/6048e5;break;default:C=this-y}return f?C:sl(C)}function gm(n,h){if(n.date()<h.date())return-gm(h,n);var f=(h.year()-n.year())*12+(h.month()-n.month()),y=n.clone().add(f,"months"),b,C;return h-y<0?(b=n.clone().add(f-1,"months"),C=(h-y)/(y-b)):(b=n.clone().add(f+1,"months"),C=(h-y)/(b-y)),-(f+C)||0}gr.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";gr.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function E2(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function C2(n){if(!this.isValid())return null;var h=n!==!0,f=h?this.clone().utc():this;return f.year()<0||f.year()>9999?pm(f,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Cu(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",pm(f,"Z")):pm(f,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function I2(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",h="",f,y,b,C;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z"),f="["+n+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",b="-MM-DD[T]HH:mm:ss.SSS",C=h+'[")]',this.format(f+y+b+C)}function P2(n){n||(n=this.isUtc()?gr.defaultFormatUtc:gr.defaultFormat);var h=pm(this,n);return this.localeData().postformat(h)}function M2(n,h){return this.isValid()&&(Fl(n)&&n.isValid()||vi(n).isValid())?Bl({to:this,from:n}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function A2(n){return this.from(vi(),n)}function D2(n,h){return this.isValid()&&(Fl(n)&&n.isValid()||vi(n).isValid())?Bl({from:this,to:n}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function z2(n){return this.to(vi(),n)}function T0(n){var h;return n===void 0?this._locale._abbr:(h=fc(n),h!=null&&(this._locale=h),this)}var E0=ol("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function C0(){return this._locale}var Cm=1e3,Xd=60*Cm,Im=60*Xd,I0=(365*400+97)*24*Im;function Kd(n,h){return(n%h+h)%h}function P0(n,h,f){return n<100&&n>=0?new Date(n+400,h,f)-I0:new Date(n,h,f).valueOf()}function M0(n,h,f){return n<100&&n>=0?Date.UTC(n+400,h,f)-I0:Date.UTC(n,h,f)}function R2(n){var h,f;if(n=ll(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(f=this._isUTC?M0:P0,n){case"year":h=f(this.year(),0,1);break;case"quarter":h=f(this.year(),this.month()-this.month()%3,1);break;case"month":h=f(this.year(),this.month(),1);break;case"week":h=f(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":h=f(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":h=f(this.year(),this.month(),this.date());break;case"hour":h=this._d.valueOf(),h-=Kd(h+(this._isUTC?0:this.utcOffset()*Xd),Im);break;case"minute":h=this._d.valueOf(),h-=Kd(h,Xd);break;case"second":h=this._d.valueOf(),h-=Kd(h,Cm);break}return this._d.setTime(h),gr.updateOffset(this,!0),this}function L2(n){var h,f;if(n=ll(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(f=this._isUTC?M0:P0,n){case"year":h=f(this.year()+1,0,1)-1;break;case"quarter":h=f(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":h=f(this.year(),this.month()+1,1)-1;break;case"week":h=f(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":h=f(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":h=f(this.year(),this.month(),this.date()+1)-1;break;case"hour":h=this._d.valueOf(),h+=Im-Kd(h+(this._isUTC?0:this.utcOffset()*Xd),Im)-1;break;case"minute":h=this._d.valueOf(),h+=Xd-Kd(h,Xd)-1;break;case"second":h=this._d.valueOf(),h+=Cm-Kd(h,Cm)-1;break}return this._d.setTime(h),gr.updateOffset(this,!0),this}function O2(){return this._d.valueOf()-(this._offset||0)*6e4}function F2(){return Math.floor(this.valueOf()/1e3)}function B2(){return new Date(this.valueOf())}function N2(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function j2(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function U2(){return this.isValid()?this.toISOString():null}function V2(){return Iy(this)}function H2(){return $c({},cn(this))}function $2(){return cn(this).overflow}function W2(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ur("N",0,0,"eraAbbr");Ur("NN",0,0,"eraAbbr");Ur("NNN",0,0,"eraAbbr");Ur("NNNN",0,0,"eraName");Ur("NNNNN",0,0,"eraNarrow");Ur("y",["y",1],"yo","eraYear");Ur("y",["yy",2],0,"eraYear");Ur("y",["yyy",3],0,"eraYear");Ur("y",["yyyy",4],0,"eraYear");Sr("N",Gy);Sr("NN",Gy);Sr("NNN",Gy);Sr("NNNN",rS);Sr("NNNNN",nS);ii(["N","NN","NNN","NNNN","NNNNN"],function(n,h,f,y){var b=f._locale.erasParse(n,y,f._strict);b?cn(f).era=b:cn(f).invalidEra=n});Sr("y",of);Sr("yy",of);Sr("yyy",of);Sr("yyyy",of);Sr("yo",iS);ii(["y","yy","yyy","yyyy"],ba);ii(["yo"],function(n,h,f,y){var b;f._locale._eraYearOrdinalRegex&&(b=n.match(f._locale._eraYearOrdinalRegex)),f._locale.eraYearOrdinalParse?h[ba]=f._locale.eraYearOrdinalParse(n,b):h[ba]=parseInt(n,10)});function G2(n,h){var f,y,b,C=this._eras||fc("en")._eras;for(f=0,y=C.length;f<y;++f){switch(typeof C[f].since){case"string":b=gr(C[f].since).startOf("day"),C[f].since=b.valueOf();break}switch(typeof C[f].until){case"undefined":C[f].until=1/0;break;case"string":b=gr(C[f].until).startOf("day").valueOf(),C[f].until=b.valueOf();break}}return C}function Z2(n,h,f){var y,b,C=this.eras(),S,c,R;for(n=n.toUpperCase(),y=0,b=C.length;y<b;++y)if(S=C[y].name.toUpperCase(),c=C[y].abbr.toUpperCase(),R=C[y].narrow.toUpperCase(),f)switch(h){case"N":case"NN":case"NNN":if(c===n)return C[y];break;case"NNNN":if(S===n)return C[y];break;case"NNNNN":if(R===n)return C[y];break}else if([S,c,R].indexOf(n)>=0)return C[y]}function q2(n,h){var f=n.since<=n.until?1:-1;return h===void 0?gr(n.since).year():gr(n.since).year()+(h-n.offset)*f}function Y2(){var n,h,f,y=this.localeData().eras();for(n=0,h=y.length;n<h;++n)if(f=this.clone().startOf("day").valueOf(),y[n].since<=f&&f<=y[n].until||y[n].until<=f&&f<=y[n].since)return y[n].name;return""}function X2(){var n,h,f,y=this.localeData().eras();for(n=0,h=y.length;n<h;++n)if(f=this.clone().startOf("day").valueOf(),y[n].since<=f&&f<=y[n].until||y[n].until<=f&&f<=y[n].since)return y[n].narrow;return""}function K2(){var n,h,f,y=this.localeData().eras();for(n=0,h=y.length;n<h;++n)if(f=this.clone().startOf("day").valueOf(),y[n].since<=f&&f<=y[n].until||y[n].until<=f&&f<=y[n].since)return y[n].abbr;return""}function J2(){var n,h,f,y,b=this.localeData().eras();for(n=0,h=b.length;n<h;++n)if(f=b[n].since<=b[n].until?1:-1,y=this.clone().startOf("day").valueOf(),b[n].since<=y&&y<=b[n].until||b[n].until<=y&&y<=b[n].since)return(this.year()-gr(b[n].since).year())*f+b[n].offset;return this.year()}function Q2(n){return Fn(this,"_erasNameRegex")||Zy.call(this),n?this._erasNameRegex:this._erasRegex}function eS(n){return Fn(this,"_erasAbbrRegex")||Zy.call(this),n?this._erasAbbrRegex:this._erasRegex}function tS(n){return Fn(this,"_erasNarrowRegex")||Zy.call(this),n?this._erasNarrowRegex:this._erasRegex}function Gy(n,h){return h.erasAbbrRegex(n)}function rS(n,h){return h.erasNameRegex(n)}function nS(n,h){return h.erasNarrowRegex(n)}function iS(n,h){return h._eraYearOrdinalRegex||of}function Zy(){var n=[],h=[],f=[],y=[],b,C,S,c,R,N=this.eras();for(b=0,C=N.length;b<C;++b)S=cc(N[b].name),c=cc(N[b].abbr),R=cc(N[b].narrow),h.push(S),n.push(c),f.push(R),y.push(S),y.push(c),y.push(R);this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+h.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+f.join("|")+")","i")}Ur(0,["gg",2],0,function(){return this.weekYear()%100});Ur(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Hm(n,h){Ur(0,[n,n.length],0,h)}Hm("gggg","weekYear");Hm("ggggg","weekYear");Hm("GGGG","isoWeekYear");Hm("GGGGG","isoWeekYear");Sr("G",Bm);Sr("g",Bm);Sr("GG",xi,Bo);Sr("gg",xi,Bo);Sr("GGGG",Ry,zy);Sr("gggg",Ry,zy);Sr("GGGGG",Fm,Lm);Sr("ggggg",Fm,Lm);ip(["gggg","ggggg","GGGG","GGGGG"],function(n,h,f,y){h[y.substr(0,2)]=_n(n)});ip(["gg","GG"],function(n,h,f,y){h[y]=gr.parseTwoDigitYear(n)});function sS(n){return A0.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function aS(n){return A0.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function oS(){return hc(this.year(),1,4)}function lS(){return hc(this.isoWeekYear(),1,4)}function uS(){var n=this.localeData()._week;return hc(this.year(),n.dow,n.doy)}function cS(){var n=this.localeData()._week;return hc(this.weekYear(),n.dow,n.doy)}function A0(n,h,f,y,b){var C;return n==null?Jf(this,y,b).year:(C=hc(n,y,b),h>C&&(h=C),hS.call(this,n,h,f,y,b))}function hS(n,h,f,y,b){var C=c0(n,h,f,y,b),S=Kf(C.year,0,C.dayOfYear);return this.year(S.getUTCFullYear()),this.month(S.getUTCMonth()),this.date(S.getUTCDate()),this}Ur("Q",0,"Qo","quarter");Sr("Q",Qv);ii("Q",function(n,h){h[lc]=(_n(n)-1)*3});function dS(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}Ur("D",["DD",2],"Do","date");Sr("D",xi,lf);Sr("DD",xi,Bo);Sr("Do",function(n,h){return n?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient});ii(["D","DD"],Su);ii("Do",function(n,h){h[Su]=_n(n.match(xi)[0])});var D0=uf("Date",!0);Ur("DDD",["DDDD",3],"DDDo","dayOfYear");Sr("DDD",Om);Sr("DDDD",e0);ii(["DDD","DDDD"],function(n,h,f){f._dayOfYear=_n(n)});function fS(n){var h=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?h:this.add(n-h,"d")}Ur("m",["mm",2],0,"minute");Sr("m",xi,Ly);Sr("mm",xi,Bo);ii(["m","mm"],Rl);var pS=uf("Minutes",!1);Ur("s",["ss",2],0,"second");Sr("s",xi,Ly);Sr("ss",xi,Bo);ii(["s","ss"],uc);var mS=uf("Seconds",!1);Ur("S",0,0,function(){return~~(this.millisecond()/100)});Ur(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Ur(0,["SSS",3],0,"millisecond");Ur(0,["SSSS",4],0,function(){return this.millisecond()*10});Ur(0,["SSSSS",5],0,function(){return this.millisecond()*100});Ur(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Ur(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Ur(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Ur(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Sr("S",Om,Qv);Sr("SS",Om,Bo);Sr("SSS",Om,e0);var Wc,z0;for(Wc="SSSS";Wc.length<=9;Wc+="S")Sr(Wc,of);function gS(n,h){h[Gh]=_n(("0."+n)*1e3)}for(Wc="S";Wc.length<=9;Wc+="S")ii(Wc,gS);z0=uf("Milliseconds",!1);Ur("z",0,0,"zoneAbbr");Ur("zz",0,0,"zoneName");function yS(){return this._isUTC?"UTC":""}function _S(){return this._isUTC?"Coordinated Universal Time":""}var Yt=rp.prototype;Yt.add=c2;Yt.calendar=y2;Yt.clone=_2;Yt.diff=T2;Yt.endOf=L2;Yt.format=P2;Yt.from=M2;Yt.fromNow=A2;Yt.to=D2;Yt.toNow=z2;Yt.get=Iw;Yt.invalidAt=$2;Yt.isAfter=v2;Yt.isBefore=x2;Yt.isBetween=w2;Yt.isSame=b2;Yt.isSameOrAfter=S2;Yt.isSameOrBefore=k2;Yt.isValid=V2;Yt.lang=E0;Yt.locale=T0;Yt.localeData=C0;Yt.max=Vb;Yt.min=Ub;Yt.parsingFlags=H2;Yt.set=Pw;Yt.startOf=R2;Yt.subtract=h2;Yt.toArray=N2;Yt.toObject=j2;Yt.toDate=B2;Yt.toISOString=C2;Yt.inspect=I2;typeof Symbol<"u"&&Symbol.for!=null&&(Yt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Yt.toJSON=U2;Yt.toString=E2;Yt.unix=F2;Yt.valueOf=O2;Yt.creationData=W2;Yt.eraName=Y2;Yt.eraNarrow=X2;Yt.eraAbbr=K2;Yt.eraYear=J2;Yt.year=n0;Yt.isLeapYear=Cw;Yt.weekYear=sS;Yt.isoWeekYear=aS;Yt.quarter=Yt.quarters=dS;Yt.month=l0;Yt.daysInMonth=Bw;Yt.week=Yt.weeks=Gw;Yt.isoWeek=Yt.isoWeeks=Zw;Yt.weeksInYear=uS;Yt.weeksInWeekYear=cS;Yt.isoWeeksInYear=oS;Yt.isoWeeksInISOWeekYear=lS;Yt.date=D0;Yt.day=Yt.days=ab;Yt.weekday=ob;Yt.isoWeekday=lb;Yt.dayOfYear=fS;Yt.hour=Yt.hours=mb;Yt.minute=Yt.minutes=pS;Yt.second=Yt.seconds=mS;Yt.millisecond=Yt.milliseconds=z0;Yt.utcOffset=Kb;Yt.utc=Qb;Yt.local=e2;Yt.parseZone=t2;Yt.hasAlignedHourOffset=r2;Yt.isDST=n2;Yt.isLocal=s2;Yt.isUtcOffset=a2;Yt.isUtc=w0;Yt.isUTC=w0;Yt.zoneAbbr=yS;Yt.zoneName=_S;Yt.dates=ol("dates accessor is deprecated. Use date instead.",D0);Yt.months=ol("months accessor is deprecated. Use month instead",l0);Yt.years=ol("years accessor is deprecated. Use year instead",n0);Yt.zone=ol("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Jb);Yt.isDSTShifted=ol("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",i2);function vS(n){return vi(n*1e3)}function xS(){return vi.apply(null,arguments).parseZone()}function R0(n){return n}var Bn=My.prototype;Bn.calendar=sw;Bn.longDateFormat=uw;Bn.invalidDate=hw;Bn.ordinal=pw;Bn.preparse=R0;Bn.postformat=R0;Bn.relativeTime=gw;Bn.pastFuture=yw;Bn.set=nw;Bn.eras=G2;Bn.erasParse=Z2;Bn.erasConvertYear=q2;Bn.erasAbbrRegex=eS;Bn.erasNameRegex=Q2;Bn.erasNarrowRegex=tS;Bn.months=Rw;Bn.monthsShort=Lw;Bn.monthsParse=Fw;Bn.monthsRegex=jw;Bn.monthsShortRegex=Nw;Bn.week=Vw;Bn.firstDayOfYear=Ww;Bn.firstDayOfWeek=$w;Bn.weekdays=tb;Bn.weekdaysMin=nb;Bn.weekdaysShort=rb;Bn.weekdaysParse=sb;Bn.weekdaysRegex=ub;Bn.weekdaysShortRegex=cb;Bn.weekdaysMinRegex=hb;Bn.isPM=fb;Bn.meridiem=gb;function Pm(n,h,f,y){var b=fc(),C=Eu().set(y,h);return b[f](C,n)}function L0(n,h,f){if(dc(n)&&(h=n,n=void 0),n=n||"",h!=null)return Pm(n,h,f,"month");var y,b=[];for(y=0;y<12;y++)b[y]=Pm(n,y,f,"month");return b}function qy(n,h,f,y){typeof n=="boolean"?(dc(h)&&(f=h,h=void 0),h=h||""):(h=n,f=h,n=!1,dc(h)&&(f=h,h=void 0),h=h||"");var b=fc(),C=n?b._week.dow:0,S,c=[];if(f!=null)return Pm(h,(f+C)%7,y,"day");for(S=0;S<7;S++)c[S]=Pm(h,(S+C)%7,y,"day");return c}function wS(n,h){return L0(n,h,"months")}function bS(n,h){return L0(n,h,"monthsShort")}function SS(n,h,f){return qy(n,h,f,"weekdays")}function kS(n,h,f){return qy(n,h,f,"weekdaysShort")}function TS(n,h,f){return qy(n,h,f,"weekdaysMin")}Gc("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var h=n%10,f=_n(n%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th";return n+f}});gr.lang=ol("moment.lang is deprecated. Use moment.locale instead.",Gc);gr.langData=ol("moment.langData is deprecated. Use moment.localeData instead.",fc);var sc=Math.abs;function ES(){var n=this._data;return this._milliseconds=sc(this._milliseconds),this._days=sc(this._days),this._months=sc(this._months),n.milliseconds=sc(n.milliseconds),n.seconds=sc(n.seconds),n.minutes=sc(n.minutes),n.hours=sc(n.hours),n.months=sc(n.months),n.years=sc(n.years),this}function O0(n,h,f,y){var b=Bl(h,f);return n._milliseconds+=y*b._milliseconds,n._days+=y*b._days,n._months+=y*b._months,n._bubble()}function CS(n,h){return O0(this,n,h,1)}function IS(n,h){return O0(this,n,h,-1)}function j_(n){return n<0?Math.floor(n):Math.ceil(n)}function PS(){var n=this._milliseconds,h=this._days,f=this._months,y=this._data,b,C,S,c,R;return n>=0&&h>=0&&f>=0||n<=0&&h<=0&&f<=0||(n+=j_(sy(f)+h)*864e5,h=0,f=0),y.milliseconds=n%1e3,b=sl(n/1e3),y.seconds=b%60,C=sl(b/60),y.minutes=C%60,S=sl(C/60),y.hours=S%24,h+=sl(S/24),R=sl(F0(h)),f+=R,h-=j_(sy(R)),c=sl(f/12),f%=12,y.days=h,y.months=f,y.years=c,this}function F0(n){return n*4800/146097}function sy(n){return n*146097/4800}function MS(n){if(!this.isValid())return NaN;var h,f,y=this._milliseconds;if(n=ll(n),n==="month"||n==="quarter"||n==="year")switch(h=this._days+y/864e5,f=this._months+F0(h),n){case"month":return f;case"quarter":return f/3;case"year":return f/12}else switch(h=this._days+Math.round(sy(this._months)),n){case"week":return h/7+y/6048e5;case"day":return h+y/864e5;case"hour":return h*24+y/36e5;case"minute":return h*1440+y/6e4;case"second":return h*86400+y/1e3;case"millisecond":return Math.floor(h*864e5)+y;default:throw new Error("Unknown unit "+n)}}function pc(n){return function(){return this.as(n)}}var B0=pc("ms"),AS=pc("s"),DS=pc("m"),zS=pc("h"),RS=pc("d"),LS=pc("w"),OS=pc("M"),FS=pc("Q"),BS=pc("y"),NS=B0;function jS(){return Bl(this)}function US(n){return n=ll(n),this.isValid()?this[n+"s"]():NaN}function td(n){return function(){return this.isValid()?this._data[n]:NaN}}var VS=td("milliseconds"),HS=td("seconds"),$S=td("minutes"),WS=td("hours"),GS=td("days"),ZS=td("months"),qS=td("years");function YS(){return sl(this.days()/7)}var ac=Math.round,Zd={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function XS(n,h,f,y,b){return b.relativeTime(h||1,!!f,n,y)}function KS(n,h,f,y){var b=Bl(n).abs(),C=ac(b.as("s")),S=ac(b.as("m")),c=ac(b.as("h")),R=ac(b.as("d")),N=ac(b.as("M")),Z=ac(b.as("w")),U=ac(b.as("y")),j=C<=f.ss&&["s",C]||C<f.s&&["ss",C]||S<=1&&["m"]||S<f.m&&["mm",S]||c<=1&&["h"]||c<f.h&&["hh",c]||R<=1&&["d"]||R<f.d&&["dd",R];return f.w!=null&&(j=j||Z<=1&&["w"]||Z<f.w&&["ww",Z]),j=j||N<=1&&["M"]||N<f.M&&["MM",N]||U<=1&&["y"]||["yy",U],j[2]=h,j[3]=+n>0,j[4]=y,XS.apply(null,j)}function JS(n){return n===void 0?ac:typeof n=="function"?(ac=n,!0):!1}function QS(n,h){return Zd[n]===void 0?!1:h===void 0?Zd[n]:(Zd[n]=h,n==="s"&&(Zd.ss=h-1),!0)}function ek(n,h){if(!this.isValid())return this.localeData().invalidDate();var f=!1,y=Zd,b,C;return typeof n=="object"&&(h=n,n=!1),typeof n=="boolean"&&(f=n),typeof h=="object"&&(y=Object.assign({},Zd,h),h.s!=null&&h.ss==null&&(y.ss=h.s-1)),b=this.localeData(),C=KS(this,!f,y,b),f&&(C=b.pastFuture(+this,C)),b.postformat(C)}var Dg=Math.abs;function Hd(n){return(n>0)-(n<0)||+n}function $m(){if(!this.isValid())return this.localeData().invalidDate();var n=Dg(this._milliseconds)/1e3,h=Dg(this._days),f=Dg(this._months),y,b,C,S,c=this.asSeconds(),R,N,Z,U;return c?(y=sl(n/60),b=sl(y/60),n%=60,y%=60,C=sl(f/12),f%=12,S=n?n.toFixed(3).replace(/\.?0+$/,""):"",R=c<0?"-":"",N=Hd(this._months)!==Hd(c)?"-":"",Z=Hd(this._days)!==Hd(c)?"-":"",U=Hd(this._milliseconds)!==Hd(c)?"-":"",R+"P"+(C?N+C+"Y":"")+(f?N+f+"M":"")+(h?Z+h+"D":"")+(b||y||n?"T":"")+(b?U+b+"H":"")+(y?U+y+"M":"")+(n?U+S+"S":"")):"P0D"}var En=Vm.prototype;En.isValid=Zb;En.abs=ES;En.add=CS;En.subtract=IS;En.as=MS;En.asMilliseconds=B0;En.asSeconds=AS;En.asMinutes=DS;En.asHours=zS;En.asDays=RS;En.asWeeks=LS;En.asMonths=OS;En.asQuarters=FS;En.asYears=BS;En.valueOf=NS;En._bubble=PS;En.clone=jS;En.get=US;En.milliseconds=VS;En.seconds=HS;En.minutes=$S;En.hours=WS;En.days=GS;En.weeks=YS;En.months=ZS;En.years=qS;En.humanize=ek;En.toISOString=$m;En.toString=$m;En.toJSON=$m;En.locale=T0;En.localeData=C0;En.toIsoString=ol("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$m);En.lang=E0;Ur("X",0,0,"unix");Ur("x",0,0,"valueOf");Sr("x",Bm);Sr("X",ww);ii("X",function(n,h,f){f._d=new Date(parseFloat(n)*1e3)});ii("x",function(n,h,f){f._d=new Date(_n(n))});//! moment.js
gr.version="2.30.1";tw(vi);gr.fn=Yt;gr.min=Hb;gr.max=$b;gr.now=Wb;gr.utc=Eu;gr.unix=vS;gr.months=wS;gr.isDate=tp;gr.locale=Gc;gr.invalid=Rm;gr.duration=Bl;gr.isMoment=Fl;gr.weekdays=SS;gr.parseZone=xS;gr.localeData=fc;gr.isDuration=mm;gr.monthsShort=bS;gr.weekdaysMin=TS;gr.defineLocale=jy;gr.updateLocale=xb;gr.locales=wb;gr.weekdaysShort=kS;gr.normalizeUnits=ll;gr.relativeTimeRounding=JS;gr.relativeTimeThreshold=QS;gr.calendarFormat=g2;gr.prototype=Yt;gr.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const tk=/[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)%2C\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/,rk=n=>{const h=n.match(tk);return h?h[0].split("%2C").map(f=>parseFloat(f)):null},nk=(n,h)=>{const f=rk(n);if(f)h._location=[parseFloat(f[1]),parseFloat(f[0])],h.file=null;else if(n.indexOf("From: ")===0)h.username=n.replace("From: ","");else if(n.indexOf("Sent: ")===0)h.timeString=n.replace("Sent: ",""),h.time=ik(h.timeString);else if(n.indexOf("Attachment: ")===0&&n.indexOf(".jpeg")>-1)h.file=n.substring(12,n.indexOf(".jpeg")+5);else if(n.indexOf("Attachment: ")===0&&n.indexOf(".jpg")>-1)h.file=n.substring(12,n.indexOf(".jpg")+4);else if(n.indexOf("Attachment: ")===0&&n.indexOf("jpeg")>-1&&n.indexOf("no filename")>-1){const y=gr.parseZone(h.timeString).format("YYYY-MM-DD-HH-mm-ss");h.file=`attachment-${y}.jpg`}else!h.file&&!h.message&&n.indexOf("Type: ")===-1&&n.indexOf("Received: ")===-1&&n.indexOf("Conversation: ")===-1&&(h.message=n)},ik=n=>new Date(n),sk=n=>{const h={};let f={},y=!1,b,C=0;for(const[S,c]of n.entries()){nk(c,f);let R=c.indexOf("From: ")===0;y&&(R?(h[C]=f,b=f.username,f={},C++):S===n.length-1&&f&&(f.username=b,h[C]=f)),R&&!y&&(y=!0)}return h};function ak({text:n,msgPosition:h}){if(!n)return;const f=n.split(`
`),y={type:"FeatureCollection",features:[]};let b={};const C=sk(f);return Object.values(C).forEach((c,R)=>{if(c._location){b={type:"Feature",properties:{},geometry:{type:"Point",coordinates:c._location}};let N;switch(h){case"before":N=Ey(C,R);break;case"after":N=Ty(C,R);break;default:N=ky(C,R);break}b.properties={...N},y.features.push(b)}}),y}function ok(n){if(n)return n[0]==="{"?ew:n.indexOf("group-v2-change")>-1?ak:X1}function lk({files:n,msgPosition:h}){const[f,y]=Xr.useState({type:"FeatureCollection",features:[]});return Xr.useEffect(()=>{if(!n)return;let C=[];for(let S in n){const R=ok(n[S])({text:n[S],msgPosition:h});C=C.concat(R.features)}y(S=>({type:"FeatureCollection",features:[...S.features,...C]}))},[n]),[f,()=>{y({type:"FeatureCollection",features:[]})}]}const N0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='80'%20height='48'%20viewBox='0%200%2080%2048'%3e%3cg%20fill='%23D73F3F'%20fill-rule='evenodd'%3e%3cpath%20d='M37.02656,20.77496%20C37.02656,20.29096%2037.12976,19.85896%2037.33616,19.48616%20C37.54096,19.11176%2037.81296,18.80696%2038.15056,18.56376%20C38.48656,18.32136%2038.86496,18.13736%2039.28576,18.01336%20C39.70496,17.89016%2040.12736,17.82776%2040.55376,17.82776%20C40.97856,17.82776%2041.40256,17.89016%2041.82336,18.01336%20C42.24176,18.13736%2042.62016,18.32136%2042.95616,18.56376%20C43.29456,18.80696%2043.56576,19.11176%2043.77216,19.48616%20C43.97856,19.85896%2044.08096,20.29096%2044.08096,20.77496%20L44.08096,27.14696%20C44.08096,27.64136%2043.97856,28.07496%2043.77216,28.44216%20C43.56576,28.81096%2043.29456,29.11416%2042.95616,29.35736%20C42.62016,29.60136%2042.24176,29.78616%2041.82336,29.90856%20C41.40256,30.03176%2040.97856,30.09336%2040.55376,30.09336%20C40.12736,30.09336%2039.70496,30.03176%2039.28576,29.90856%20C38.86496,29.78616%2038.48656,29.60136%2038.15056,29.35736%20C37.81296,29.11416%2037.54096,28.81096%2037.33616,28.44216%20C37.12976,28.07496%2037.02656,27.64136%2037.02656,27.14696%20L37.02656,20.77496%20Z%20M39.05136,27.15016%20C39.05136,27.56536%2039.28256,27.87496%2039.56576,28.07176%20C39.84736,28.27016%2040.18096,28.37496%2040.56576,28.37496%20C40.94896,28.37496%2041.28416,28.27016%2041.56656,28.07176%20C41.84736,27.87496%2042.00816,27.56536%2042.00816,27.15016%20L42.00816,20.77816%20C42.00816,20.36136%2041.84736,20.05256%2041.56656,19.85576%20C41.28416,19.65816%2040.94896,19.52536%2040.56576,19.52536%20C40.18096,19.52536%2039.84736,19.65816%2039.56576,19.85576%20C39.28256,20.05256%2039.05136,20.36136%2039.05136,20.77816%20L39.05136,27.15016%20Z'/%3e%3cpolygon%20points='33.379%2017.815%2033.379%2022.99%2030.152%2022.99%2030.152%2017.815%2028.387%2017.815%2028.387%2030.1%2030.152%2030.1%2030.152%2024.923%2033.379%2024.923%2033.379%2030.1%2035.278%2030.1%2035.278%2017.815'/%3e%3cpolygon%20points='52.431%2017.815%2045.426%2017.815%2045.426%2019.622%2048.015%2019.622%2047.985%2030.1%2049.847%2030.1%2049.847%2019.622%2052.431%2019.622'/%3e%3cpath%20d='M65.42344,28.7668%20L79.67944,28.7668%20L71.15544,19.1684%20L62.66904,9.57%20L54.18104,0.000400000001%20L11.53944,0.000400000001%20L20.02584,9.57%20L5.73784,9.57%20L14.22584,19.1684%20L14.29144,19.2332%20L0.000239999999,19.2332%20L8.52184,28.8316%20L17.01304,38.43%20L25.50024,48.0004%20L68.14184,48.0004%20L59.65064,38.43%20L59.58824,38.3364%20L73.87864,38.3364%20L65.42344,28.7668%20Z%20M39.83944,39.9492%20C30.31864,39.9492%2022.60104,32.8084%2022.60104,24.0012%20C22.60104,15.1908%2030.31864,8.05%2039.83944,8.05%20C49.36104,8.05%2057.07944,15.1908%2057.07944,24.0012%20C57.07944,32.8084%2049.36104,39.9492%2039.83944,39.9492%20Z'/%3e%3c/g%3e%3c/svg%3e";var ay=function(n,h){return ay=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(f[b]=y[b])},ay(n,h)};function ul(n,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");ay(n,h);function f(){this.constructor=n}n.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}var Pr=function(){return Pr=Object.assign||function(h){for(var f,y=1,b=arguments.length;y<b;y++){f=arguments[y];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(h[C]=f[C])}return h},Pr.apply(this,arguments)};function Jd(n,h){var f={};for(var y in n)Object.prototype.hasOwnProperty.call(n,y)&&h.indexOf(y)<0&&(f[y]=n[y]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,y=Object.getOwnPropertySymbols(n);b<y.length;b++)h.indexOf(y[b])<0&&Object.prototype.propertyIsEnumerable.call(n,y[b])&&(f[y[b]]=n[y[b]]);return f}function Ga(n,h,f){if(f||arguments.length===2)for(var y=0,b=h.length,C;y<b;y++)(C||!(y in h))&&(C||(C=Array.prototype.slice.call(h,0,y)),C[y]=h[y]);return n.concat(C||Array.prototype.slice.call(h))}function $a(n,h){var f=h&&h.cache?h.cache:pk,y=h&&h.serializer?h.serializer:fk,b=h&&h.strategy?h.strategy:hk;return b(n,{cache:f,serializer:y})}function uk(n){return n==null||typeof n=="number"||typeof n=="boolean"}function ck(n,h,f,y){var b=uk(y)?y:f(y),C=h.get(b);return typeof C>"u"&&(C=n.call(this,y),h.set(b,C)),C}function j0(n,h,f){var y=Array.prototype.slice.call(arguments,3),b=f(y),C=h.get(b);return typeof C>"u"&&(C=n.apply(this,y),h.set(b,C)),C}function U0(n,h,f,y,b){return f.bind(h,n,y,b)}function hk(n,h){var f=n.length===1?ck:j0;return U0(n,this,f,h.cache.create(),h.serializer)}function dk(n,h){return U0(n,this,j0,h.cache.create(),h.serializer)}var fk=function(){return JSON.stringify(arguments)};function Yy(){this.cache=Object.create(null)}Yy.prototype.get=function(n){return this.cache[n]};Yy.prototype.set=function(n,h){this.cache[n]=h};var pk={create:function(){return new Yy}},Wa={variadic:dk};function V0(n,h,f){if(f===void 0&&(f=Error),!n)throw new f(h)}$a(function(){for(var n,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((n=Intl.NumberFormat).bind.apply(n,Ga([void 0],h,!1)))},{strategy:Wa.variadic});$a(function(){for(var n,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((n=Intl.DateTimeFormat).bind.apply(n,Ga([void 0],h,!1)))},{strategy:Wa.variadic});$a(function(){for(var n,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((n=Intl.PluralRules).bind.apply(n,Ga([void 0],h,!1)))},{strategy:Wa.variadic});$a(function(){for(var n,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((n=Intl.Locale).bind.apply(n,Ga([void 0],h,!1)))},{strategy:Wa.variadic});$a(function(){for(var n,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((n=Intl.ListFormat).bind.apply(n,Ga([void 0],h,!1)))},{strategy:Wa.variadic});var bn;(function(n){n[n.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",n[n.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",n[n.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",n[n.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",n[n.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",n[n.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",n[n.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",n[n.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",n[n.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",n[n.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",n[n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",n[n.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",n[n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",n[n.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",n[n.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",n[n.INVALID_TAG=23]="INVALID_TAG",n[n.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",n[n.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",n[n.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(bn||(bn={}));var _i;(function(n){n[n.literal=0]="literal",n[n.argument=1]="argument",n[n.number=2]="number",n[n.date=3]="date",n[n.time=4]="time",n[n.select=5]="select",n[n.plural=6]="plural",n[n.pound=7]="pound",n[n.tag=8]="tag"})(_i||(_i={}));var Qd;(function(n){n[n.number=0]="number",n[n.dateTime=1]="dateTime"})(Qd||(Qd={}));function U_(n){return n.type===_i.literal}function mk(n){return n.type===_i.argument}function H0(n){return n.type===_i.number}function $0(n){return n.type===_i.date}function W0(n){return n.type===_i.time}function G0(n){return n.type===_i.select}function Z0(n){return n.type===_i.plural}function gk(n){return n.type===_i.pound}function q0(n){return n.type===_i.tag}function Y0(n){return!!(n&&typeof n=="object"&&n.type===Qd.number)}function oy(n){return!!(n&&typeof n=="object"&&n.type===Qd.dateTime)}var X0=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,yk=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function _k(n){var h={};return n.replace(yk,function(f){var y=f.length;switch(f[0]){case"G":h.era=y===4?"long":y===5?"narrow":"short";break;case"y":h.year=y===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":h.month=["numeric","2-digit","short","long","narrow"][y-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":h.day=["numeric","2-digit"][y-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":h.weekday=y===4?"long":y===5?"narrow":"short";break;case"e":if(y<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");h.weekday=["short","long","narrow","short"][y-4];break;case"c":if(y<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");h.weekday=["short","long","narrow","short"][y-4];break;case"a":h.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":h.hourCycle="h12",h.hour=["numeric","2-digit"][y-1];break;case"H":h.hourCycle="h23",h.hour=["numeric","2-digit"][y-1];break;case"K":h.hourCycle="h11",h.hour=["numeric","2-digit"][y-1];break;case"k":h.hourCycle="h24",h.hour=["numeric","2-digit"][y-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":h.minute=["numeric","2-digit"][y-1];break;case"s":h.second=["numeric","2-digit"][y-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":h.timeZoneName=y<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),h}var vk=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function xk(n){if(n.length===0)throw new Error("Number skeleton cannot be empty");for(var h=n.split(vk).filter(function(j){return j.length>0}),f=[],y=0,b=h;y<b.length;y++){var C=b[y],S=C.split("/");if(S.length===0)throw new Error("Invalid number skeleton");for(var c=S[0],R=S.slice(1),N=0,Z=R;N<Z.length;N++){var U=Z[N];if(U.length===0)throw new Error("Invalid number skeleton")}f.push({stem:c,options:R})}return f}function wk(n){return n.replace(/^(.*?)-/,"")}var V_=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,K0=/^(@+)?(\+|#+)?[rs]?$/g,bk=/(\*)(0+)|(#+)(0+)|(0+)/g,J0=/^(0+)$/;function H_(n){var h={};return n[n.length-1]==="r"?h.roundingPriority="morePrecision":n[n.length-1]==="s"&&(h.roundingPriority="lessPrecision"),n.replace(K0,function(f,y,b){return typeof b!="string"?(h.minimumSignificantDigits=y.length,h.maximumSignificantDigits=y.length):b==="+"?h.minimumSignificantDigits=y.length:y[0]==="#"?h.maximumSignificantDigits=y.length:(h.minimumSignificantDigits=y.length,h.maximumSignificantDigits=y.length+(typeof b=="string"?b.length:0)),""}),h}function Q0(n){switch(n){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Sk(n){var h;if(n[0]==="E"&&n[1]==="E"?(h={notation:"engineering"},n=n.slice(2)):n[0]==="E"&&(h={notation:"scientific"},n=n.slice(1)),h){var f=n.slice(0,2);if(f==="+!"?(h.signDisplay="always",n=n.slice(2)):f==="+?"&&(h.signDisplay="exceptZero",n=n.slice(2)),!J0.test(n))throw new Error("Malformed concise eng/scientific notation");h.minimumIntegerDigits=n.length}return h}function $_(n){var h={},f=Q0(n);return f||h}function kk(n){for(var h={},f=0,y=n;f<y.length;f++){var b=y[f];switch(b.stem){case"percent":case"%":h.style="percent";continue;case"%x100":h.style="percent",h.scale=100;continue;case"currency":h.style="currency",h.currency=b.options[0];continue;case"group-off":case",_":h.useGrouping=!1;continue;case"precision-integer":case".":h.maximumFractionDigits=0;continue;case"measure-unit":case"unit":h.style="unit",h.unit=wk(b.options[0]);continue;case"compact-short":case"K":h.notation="compact",h.compactDisplay="short";continue;case"compact-long":case"KK":h.notation="compact",h.compactDisplay="long";continue;case"scientific":h=Pr(Pr(Pr({},h),{notation:"scientific"}),b.options.reduce(function(R,N){return Pr(Pr({},R),$_(N))},{}));continue;case"engineering":h=Pr(Pr(Pr({},h),{notation:"engineering"}),b.options.reduce(function(R,N){return Pr(Pr({},R),$_(N))},{}));continue;case"notation-simple":h.notation="standard";continue;case"unit-width-narrow":h.currencyDisplay="narrowSymbol",h.unitDisplay="narrow";continue;case"unit-width-short":h.currencyDisplay="code",h.unitDisplay="short";continue;case"unit-width-full-name":h.currencyDisplay="name",h.unitDisplay="long";continue;case"unit-width-iso-code":h.currencyDisplay="symbol";continue;case"scale":h.scale=parseFloat(b.options[0]);continue;case"rounding-mode-floor":h.roundingMode="floor";continue;case"rounding-mode-ceiling":h.roundingMode="ceil";continue;case"rounding-mode-down":h.roundingMode="trunc";continue;case"rounding-mode-up":h.roundingMode="expand";continue;case"rounding-mode-half-even":h.roundingMode="halfEven";continue;case"rounding-mode-half-down":h.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":h.roundingMode="halfExpand";continue;case"integer-width":if(b.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");b.options[0].replace(bk,function(R,N,Z,U,j,G){if(N)h.minimumIntegerDigits=Z.length;else{if(U&&j)throw new Error("We currently do not support maximum integer digits");if(G)throw new Error("We currently do not support exact integer digits")}return""});continue}if(J0.test(b.stem)){h.minimumIntegerDigits=b.stem.length;continue}if(V_.test(b.stem)){if(b.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");b.stem.replace(V_,function(R,N,Z,U,j,G){return Z==="*"?h.minimumFractionDigits=N.length:U&&U[0]==="#"?h.maximumFractionDigits=U.length:j&&G?(h.minimumFractionDigits=j.length,h.maximumFractionDigits=j.length+G.length):(h.minimumFractionDigits=N.length,h.maximumFractionDigits=N.length),""});var C=b.options[0];C==="w"?h=Pr(Pr({},h),{trailingZeroDisplay:"stripIfInteger"}):C&&(h=Pr(Pr({},h),H_(C)));continue}if(K0.test(b.stem)){h=Pr(Pr({},h),H_(b.stem));continue}var S=Q0(b.stem);S&&(h=Pr(Pr({},h),S));var c=Sk(b.stem);c&&(h=Pr(Pr({},h),c))}return h}var im={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Tk(n,h){for(var f="",y=0;y<n.length;y++){var b=n.charAt(y);if(b==="j"){for(var C=0;y+1<n.length&&n.charAt(y+1)===b;)C++,y++;var S=1+(C&1),c=C<2?1:3+(C>>1),R="a",N=Ek(h);for((N=="H"||N=="k")&&(c=0);c-- >0;)f+=R;for(;S-- >0;)f=N+f}else b==="J"?f+="H":f+=b}return f}function Ek(n){var h=n.hourCycle;if(h===void 0&&n.hourCycles&&n.hourCycles.length&&(h=n.hourCycles[0]),h)switch(h){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var f=n.language,y;f!=="root"&&(y=n.maximize().region);var b=im[y||""]||im[f||""]||im["".concat(f,"-001")]||im["001"];return b[0]}var zg,Ck=new RegExp("^".concat(X0.source,"*")),Ik=new RegExp("".concat(X0.source,"*$"));function Tn(n,h){return{start:n,end:h}}var Pk=!!String.prototype.startsWith&&"_a".startsWith("a",1),Mk=!!String.fromCodePoint,Ak=!!Object.fromEntries,Dk=!!String.prototype.codePointAt,zk=!!String.prototype.trimStart,Rk=!!String.prototype.trimEnd,Lk=!!Number.isSafeInteger,Ok=Lk?Number.isSafeInteger:function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n&&Math.abs(n)<=9007199254740991},ly=!0;try{var Fk=tx("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ly=((zg=Fk.exec("a"))===null||zg===void 0?void 0:zg[0])==="a"}catch{ly=!1}var W_=Pk?function(h,f,y){return h.startsWith(f,y)}:function(h,f,y){return h.slice(y,y+f.length)===f},uy=Mk?String.fromCodePoint:function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];for(var y="",b=h.length,C=0,S;b>C;){if(S=h[C++],S>1114111)throw RangeError(S+" is not a valid code point");y+=S<65536?String.fromCharCode(S):String.fromCharCode(((S-=65536)>>10)+55296,S%1024+56320)}return y},G_=Ak?Object.fromEntries:function(h){for(var f={},y=0,b=h;y<b.length;y++){var C=b[y],S=C[0],c=C[1];f[S]=c}return f},ex=Dk?function(h,f){return h.codePointAt(f)}:function(h,f){var y=h.length;if(!(f<0||f>=y)){var b=h.charCodeAt(f),C;return b<55296||b>56319||f+1===y||(C=h.charCodeAt(f+1))<56320||C>57343?b:(b-55296<<10)+(C-56320)+65536}},Bk=zk?function(h){return h.trimStart()}:function(h){return h.replace(Ck,"")},Nk=Rk?function(h){return h.trimEnd()}:function(h){return h.replace(Ik,"")};function tx(n,h){return new RegExp(n,h)}var cy;if(ly){var Z_=tx("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");cy=function(h,f){var y;Z_.lastIndex=f;var b=Z_.exec(h);return(y=b[1])!==null&&y!==void 0?y:""}}else cy=function(h,f){for(var y=[];;){var b=ex(h,f);if(b===void 0||rx(b)||Hk(b))break;y.push(b),f+=b>=65536?2:1}return uy.apply(void 0,y)};var jk=function(){function n(h,f){f===void 0&&(f={}),this.message=h,this.position={offset:0,line:1,column:1},this.ignoreTag=!!f.ignoreTag,this.locale=f.locale,this.requiresOtherClause=!!f.requiresOtherClause,this.shouldParseSkeletons=!!f.shouldParseSkeletons}return n.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},n.prototype.parseMessage=function(h,f,y){for(var b=[];!this.isEOF();){var C=this.char();if(C===123){var S=this.parseArgument(h,y);if(S.err)return S;b.push(S.val)}else{if(C===125&&h>0)break;if(C===35&&(f==="plural"||f==="selectordinal")){var c=this.clonePosition();this.bump(),b.push({type:_i.pound,location:Tn(c,this.clonePosition())})}else if(C===60&&!this.ignoreTag&&this.peek()===47){if(y)break;return this.error(bn.UNMATCHED_CLOSING_TAG,Tn(this.clonePosition(),this.clonePosition()))}else if(C===60&&!this.ignoreTag&&hy(this.peek()||0)){var S=this.parseTag(h,f);if(S.err)return S;b.push(S.val)}else{var S=this.parseLiteral(h,f);if(S.err)return S;b.push(S.val)}}}return{val:b,err:null}},n.prototype.parseTag=function(h,f){var y=this.clonePosition();this.bump();var b=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:_i.literal,value:"<".concat(b,"/>"),location:Tn(y,this.clonePosition())},err:null};if(this.bumpIf(">")){var C=this.parseMessage(h+1,f,!0);if(C.err)return C;var S=C.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!hy(this.char()))return this.error(bn.INVALID_TAG,Tn(c,this.clonePosition()));var R=this.clonePosition(),N=this.parseTagName();return b!==N?this.error(bn.UNMATCHED_CLOSING_TAG,Tn(R,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:_i.tag,value:b,children:S,location:Tn(y,this.clonePosition())},err:null}:this.error(bn.INVALID_TAG,Tn(c,this.clonePosition())))}else return this.error(bn.UNCLOSED_TAG,Tn(y,this.clonePosition()))}else return this.error(bn.INVALID_TAG,Tn(y,this.clonePosition()))},n.prototype.parseTagName=function(){var h=this.offset();for(this.bump();!this.isEOF()&&Vk(this.char());)this.bump();return this.message.slice(h,this.offset())},n.prototype.parseLiteral=function(h,f){for(var y=this.clonePosition(),b="";;){var C=this.tryParseQuote(f);if(C){b+=C;continue}var S=this.tryParseUnquoted(h,f);if(S){b+=S;continue}var c=this.tryParseLeftAngleBracket();if(c){b+=c;continue}break}var R=Tn(y,this.clonePosition());return{val:{type:_i.literal,value:b,location:R},err:null}},n.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Uk(this.peek()||0))?(this.bump(),"<"):null},n.prototype.tryParseQuote=function(h){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(h==="plural"||h==="selectordinal")break;return null;default:return null}this.bump();var f=[this.char()];for(this.bump();!this.isEOF();){var y=this.char();if(y===39)if(this.peek()===39)f.push(39),this.bump();else{this.bump();break}else f.push(y);this.bump()}return uy.apply(void 0,f)},n.prototype.tryParseUnquoted=function(h,f){if(this.isEOF())return null;var y=this.char();return y===60||y===123||y===35&&(f==="plural"||f==="selectordinal")||y===125&&h>0?null:(this.bump(),uy(y))},n.prototype.parseArgument=function(h,f){var y=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(bn.EXPECT_ARGUMENT_CLOSING_BRACE,Tn(y,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(bn.EMPTY_ARGUMENT,Tn(y,this.clonePosition()));var b=this.parseIdentifierIfPossible().value;if(!b)return this.error(bn.MALFORMED_ARGUMENT,Tn(y,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(bn.EXPECT_ARGUMENT_CLOSING_BRACE,Tn(y,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:_i.argument,value:b,location:Tn(y,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(bn.EXPECT_ARGUMENT_CLOSING_BRACE,Tn(y,this.clonePosition())):this.parseArgumentOptions(h,f,b,y);default:return this.error(bn.MALFORMED_ARGUMENT,Tn(y,this.clonePosition()))}},n.prototype.parseIdentifierIfPossible=function(){var h=this.clonePosition(),f=this.offset(),y=cy(this.message,f),b=f+y.length;this.bumpTo(b);var C=this.clonePosition(),S=Tn(h,C);return{value:y,location:S}},n.prototype.parseArgumentOptions=function(h,f,y,b){var C,S=this.clonePosition(),c=this.parseIdentifierIfPossible().value,R=this.clonePosition();switch(c){case"":return this.error(bn.EXPECT_ARGUMENT_TYPE,Tn(S,R));case"number":case"date":case"time":{this.bumpSpace();var N=null;if(this.bumpIf(",")){this.bumpSpace();var Z=this.clonePosition(),U=this.parseSimpleArgStyleIfPossible();if(U.err)return U;var j=Nk(U.val);if(j.length===0)return this.error(bn.EXPECT_ARGUMENT_STYLE,Tn(this.clonePosition(),this.clonePosition()));var G=Tn(Z,this.clonePosition());N={style:j,styleLocation:G}}var se=this.tryParseArgumentClose(b);if(se.err)return se;var J=Tn(b,this.clonePosition());if(N&&W_(N==null?void 0:N.style,"::",0)){var oe=Bk(N.style.slice(2));if(c==="number"){var U=this.parseNumberSkeletonFromString(oe,N.styleLocation);return U.err?U:{val:{type:_i.number,value:y,location:J,style:U.val},err:null}}else{if(oe.length===0)return this.error(bn.EXPECT_DATE_TIME_SKELETON,J);var re=oe;this.locale&&(re=Tk(oe,this.locale));var j={type:Qd.dateTime,pattern:re,location:N.styleLocation,parsedOptions:this.shouldParseSkeletons?_k(re):{}},pe=c==="date"?_i.date:_i.time;return{val:{type:pe,value:y,location:J,style:j},err:null}}}return{val:{type:c==="number"?_i.number:c==="date"?_i.date:_i.time,value:y,location:J,style:(C=N==null?void 0:N.style)!==null&&C!==void 0?C:null},err:null}}case"plural":case"selectordinal":case"select":{var ge=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(bn.EXPECT_SELECT_ARGUMENT_OPTIONS,Tn(ge,Pr({},ge)));this.bumpSpace();var Oe=this.parseIdentifierIfPossible(),ve=0;if(c!=="select"&&Oe.value==="offset"){if(!this.bumpIf(":"))return this.error(bn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Tn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var U=this.tryParseDecimalInteger(bn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,bn.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(U.err)return U;this.bumpSpace(),Oe=this.parseIdentifierIfPossible(),ve=U.val}var Ge=this.tryParsePluralOrSelectOptions(h,c,f,Oe);if(Ge.err)return Ge;var se=this.tryParseArgumentClose(b);if(se.err)return se;var je=Tn(b,this.clonePosition());return c==="select"?{val:{type:_i.select,value:y,options:G_(Ge.val),location:je},err:null}:{val:{type:_i.plural,value:y,options:G_(Ge.val),offset:ve,pluralType:c==="plural"?"cardinal":"ordinal",location:je},err:null}}default:return this.error(bn.INVALID_ARGUMENT_TYPE,Tn(S,R))}},n.prototype.tryParseArgumentClose=function(h){return this.isEOF()||this.char()!==125?this.error(bn.EXPECT_ARGUMENT_CLOSING_BRACE,Tn(h,this.clonePosition())):(this.bump(),{val:!0,err:null})},n.prototype.parseSimpleArgStyleIfPossible=function(){for(var h=0,f=this.clonePosition();!this.isEOF();){var y=this.char();switch(y){case 39:{this.bump();var b=this.clonePosition();if(!this.bumpUntil("'"))return this.error(bn.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Tn(b,this.clonePosition()));this.bump();break}case 123:{h+=1,this.bump();break}case 125:{if(h>0)h-=1;else return{val:this.message.slice(f.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(f.offset,this.offset()),err:null}},n.prototype.parseNumberSkeletonFromString=function(h,f){var y=[];try{y=xk(h)}catch{return this.error(bn.INVALID_NUMBER_SKELETON,f)}return{val:{type:Qd.number,tokens:y,location:f,parsedOptions:this.shouldParseSkeletons?kk(y):{}},err:null}},n.prototype.tryParsePluralOrSelectOptions=function(h,f,y,b){for(var C,S=!1,c=[],R=new Set,N=b.value,Z=b.location;;){if(N.length===0){var U=this.clonePosition();if(f!=="select"&&this.bumpIf("=")){var j=this.tryParseDecimalInteger(bn.EXPECT_PLURAL_ARGUMENT_SELECTOR,bn.INVALID_PLURAL_ARGUMENT_SELECTOR);if(j.err)return j;Z=Tn(U,this.clonePosition()),N=this.message.slice(U.offset,this.offset())}else break}if(R.has(N))return this.error(f==="select"?bn.DUPLICATE_SELECT_ARGUMENT_SELECTOR:bn.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,Z);N==="other"&&(S=!0),this.bumpSpace();var G=this.clonePosition();if(!this.bumpIf("{"))return this.error(f==="select"?bn.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:bn.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Tn(this.clonePosition(),this.clonePosition()));var se=this.parseMessage(h+1,f,y);if(se.err)return se;var J=this.tryParseArgumentClose(G);if(J.err)return J;c.push([N,{value:se.val,location:Tn(G,this.clonePosition())}]),R.add(N),this.bumpSpace(),C=this.parseIdentifierIfPossible(),N=C.value,Z=C.location}return c.length===0?this.error(f==="select"?bn.EXPECT_SELECT_ARGUMENT_SELECTOR:bn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Tn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!S?this.error(bn.MISSING_OTHER_CLAUSE,Tn(this.clonePosition(),this.clonePosition())):{val:c,err:null}},n.prototype.tryParseDecimalInteger=function(h,f){var y=1,b=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(y=-1);for(var C=!1,S=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)C=!0,S=S*10+(c-48),this.bump();else break}var R=Tn(b,this.clonePosition());return C?(S*=y,Ok(S)?{val:S,err:null}:this.error(f,R)):this.error(h,R)},n.prototype.offset=function(){return this.position.offset},n.prototype.isEOF=function(){return this.offset()===this.message.length},n.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},n.prototype.char=function(){var h=this.position.offset;if(h>=this.message.length)throw Error("out of bound");var f=ex(this.message,h);if(f===void 0)throw Error("Offset ".concat(h," is at invalid UTF-16 code unit boundary"));return f},n.prototype.error=function(h,f){return{val:null,err:{kind:h,message:this.message,location:f}}},n.prototype.bump=function(){if(!this.isEOF()){var h=this.char();h===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=h<65536?1:2)}},n.prototype.bumpIf=function(h){if(W_(this.message,h,this.offset())){for(var f=0;f<h.length;f++)this.bump();return!0}return!1},n.prototype.bumpUntil=function(h){var f=this.offset(),y=this.message.indexOf(h,f);return y>=0?(this.bumpTo(y),!0):(this.bumpTo(this.message.length),!1)},n.prototype.bumpTo=function(h){if(this.offset()>h)throw Error("targetOffset ".concat(h," must be greater than or equal to the current offset ").concat(this.offset()));for(h=Math.min(h,this.message.length);;){var f=this.offset();if(f===h)break;if(f>h)throw Error("targetOffset ".concat(h," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},n.prototype.bumpSpace=function(){for(;!this.isEOF()&&rx(this.char());)this.bump()},n.prototype.peek=function(){if(this.isEOF())return null;var h=this.char(),f=this.offset(),y=this.message.charCodeAt(f+(h>=65536?2:1));return y??null},n}();function hy(n){return n>=97&&n<=122||n>=65&&n<=90}function Uk(n){return hy(n)||n===47}function Vk(n){return n===45||n===46||n>=48&&n<=57||n===95||n>=97&&n<=122||n>=65&&n<=90||n==183||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8255&&n<=8256||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}function rx(n){return n>=9&&n<=13||n===32||n===133||n>=8206&&n<=8207||n===8232||n===8233}function Hk(n){return n>=33&&n<=35||n===36||n>=37&&n<=39||n===40||n===41||n===42||n===43||n===44||n===45||n>=46&&n<=47||n>=58&&n<=59||n>=60&&n<=62||n>=63&&n<=64||n===91||n===92||n===93||n===94||n===96||n===123||n===124||n===125||n===126||n===161||n>=162&&n<=165||n===166||n===167||n===169||n===171||n===172||n===174||n===176||n===177||n===182||n===187||n===191||n===215||n===247||n>=8208&&n<=8213||n>=8214&&n<=8215||n===8216||n===8217||n===8218||n>=8219&&n<=8220||n===8221||n===8222||n===8223||n>=8224&&n<=8231||n>=8240&&n<=8248||n===8249||n===8250||n>=8251&&n<=8254||n>=8257&&n<=8259||n===8260||n===8261||n===8262||n>=8263&&n<=8273||n===8274||n===8275||n>=8277&&n<=8286||n>=8592&&n<=8596||n>=8597&&n<=8601||n>=8602&&n<=8603||n>=8604&&n<=8607||n===8608||n>=8609&&n<=8610||n===8611||n>=8612&&n<=8613||n===8614||n>=8615&&n<=8621||n===8622||n>=8623&&n<=8653||n>=8654&&n<=8655||n>=8656&&n<=8657||n===8658||n===8659||n===8660||n>=8661&&n<=8691||n>=8692&&n<=8959||n>=8960&&n<=8967||n===8968||n===8969||n===8970||n===8971||n>=8972&&n<=8991||n>=8992&&n<=8993||n>=8994&&n<=9e3||n===9001||n===9002||n>=9003&&n<=9083||n===9084||n>=9085&&n<=9114||n>=9115&&n<=9139||n>=9140&&n<=9179||n>=9180&&n<=9185||n>=9186&&n<=9254||n>=9255&&n<=9279||n>=9280&&n<=9290||n>=9291&&n<=9311||n>=9472&&n<=9654||n===9655||n>=9656&&n<=9664||n===9665||n>=9666&&n<=9719||n>=9720&&n<=9727||n>=9728&&n<=9838||n===9839||n>=9840&&n<=10087||n===10088||n===10089||n===10090||n===10091||n===10092||n===10093||n===10094||n===10095||n===10096||n===10097||n===10098||n===10099||n===10100||n===10101||n>=10132&&n<=10175||n>=10176&&n<=10180||n===10181||n===10182||n>=10183&&n<=10213||n===10214||n===10215||n===10216||n===10217||n===10218||n===10219||n===10220||n===10221||n===10222||n===10223||n>=10224&&n<=10239||n>=10240&&n<=10495||n>=10496&&n<=10626||n===10627||n===10628||n===10629||n===10630||n===10631||n===10632||n===10633||n===10634||n===10635||n===10636||n===10637||n===10638||n===10639||n===10640||n===10641||n===10642||n===10643||n===10644||n===10645||n===10646||n===10647||n===10648||n>=10649&&n<=10711||n===10712||n===10713||n===10714||n===10715||n>=10716&&n<=10747||n===10748||n===10749||n>=10750&&n<=11007||n>=11008&&n<=11055||n>=11056&&n<=11076||n>=11077&&n<=11078||n>=11079&&n<=11084||n>=11085&&n<=11123||n>=11124&&n<=11125||n>=11126&&n<=11157||n===11158||n>=11159&&n<=11263||n>=11776&&n<=11777||n===11778||n===11779||n===11780||n===11781||n>=11782&&n<=11784||n===11785||n===11786||n===11787||n===11788||n===11789||n>=11790&&n<=11798||n===11799||n>=11800&&n<=11801||n===11802||n===11803||n===11804||n===11805||n>=11806&&n<=11807||n===11808||n===11809||n===11810||n===11811||n===11812||n===11813||n===11814||n===11815||n===11816||n===11817||n>=11818&&n<=11822||n===11823||n>=11824&&n<=11833||n>=11834&&n<=11835||n>=11836&&n<=11839||n===11840||n===11841||n===11842||n>=11843&&n<=11855||n>=11856&&n<=11857||n===11858||n>=11859&&n<=11903||n>=12289&&n<=12291||n===12296||n===12297||n===12298||n===12299||n===12300||n===12301||n===12302||n===12303||n===12304||n===12305||n>=12306&&n<=12307||n===12308||n===12309||n===12310||n===12311||n===12312||n===12313||n===12314||n===12315||n===12316||n===12317||n>=12318&&n<=12319||n===12320||n===12336||n===64830||n===64831||n>=65093&&n<=65094}function dy(n){n.forEach(function(h){if(delete h.location,G0(h)||Z0(h))for(var f in h.options)delete h.options[f].location,dy(h.options[f].value);else H0(h)&&Y0(h.style)||($0(h)||W0(h))&&oy(h.style)?delete h.style.location:q0(h)&&dy(h.children)})}function $k(n,h){h===void 0&&(h={}),h=Pr({shouldParseSkeletons:!0,requiresOtherClause:!0},h);var f=new jk(n,h).parse();if(f.err){var y=SyntaxError(bn[f.err.kind]);throw y.location=f.err.location,y.originalMessage=f.err.message,y}return h!=null&&h.captureLocation||dy(f.val),f.val}var Tu;(function(n){n.MISSING_VALUE="MISSING_VALUE",n.INVALID_VALUE="INVALID_VALUE",n.MISSING_INTL_API="MISSING_INTL_API"})(Tu||(Tu={}));var Zc=function(n){ul(h,n);function h(f,y,b){var C=n.call(this,f)||this;return C.code=y,C.originalMessage=b,C}return h.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},h}(Error),q_=function(n){ul(h,n);function h(f,y,b,C){return n.call(this,'Invalid values for "'.concat(f,'": "').concat(y,'". Options are "').concat(Object.keys(b).join('", "'),'"'),Tu.INVALID_VALUE,C)||this}return h}(Zc),Wk=function(n){ul(h,n);function h(f,y,b){return n.call(this,'Value for "'.concat(f,'" must be of type ').concat(y),Tu.INVALID_VALUE,b)||this}return h}(Zc),Gk=function(n){ul(h,n);function h(f,y){return n.call(this,'The intl string context variable "'.concat(f,'" was not provided to the string "').concat(y,'"'),Tu.MISSING_VALUE,y)||this}return h}(Zc),Ha;(function(n){n[n.literal=0]="literal",n[n.object=1]="object"})(Ha||(Ha={}));function Zk(n){return n.length<2?n:n.reduce(function(h,f){var y=h[h.length-1];return!y||y.type!==Ha.literal||f.type!==Ha.literal?h.push(f):y.value+=f.value,h},[])}function nx(n){return typeof n=="function"}function ym(n,h,f,y,b,C,S){if(n.length===1&&U_(n[0]))return[{type:Ha.literal,value:n[0].value}];for(var c=[],R=0,N=n;R<N.length;R++){var Z=N[R];if(U_(Z)){c.push({type:Ha.literal,value:Z.value});continue}if(gk(Z)){typeof C=="number"&&c.push({type:Ha.literal,value:f.getNumberFormat(h).format(C)});continue}var U=Z.value;if(!(b&&U in b))throw new Gk(U,S);var j=b[U];if(mk(Z)){(!j||typeof j=="string"||typeof j=="number")&&(j=typeof j=="string"||typeof j=="number"?String(j):""),c.push({type:typeof j=="string"?Ha.literal:Ha.object,value:j});continue}if($0(Z)){var G=typeof Z.style=="string"?y.date[Z.style]:oy(Z.style)?Z.style.parsedOptions:void 0;c.push({type:Ha.literal,value:f.getDateTimeFormat(h,G).format(j)});continue}if(W0(Z)){var G=typeof Z.style=="string"?y.time[Z.style]:oy(Z.style)?Z.style.parsedOptions:y.time.medium;c.push({type:Ha.literal,value:f.getDateTimeFormat(h,G).format(j)});continue}if(H0(Z)){var G=typeof Z.style=="string"?y.number[Z.style]:Y0(Z.style)?Z.style.parsedOptions:void 0;G&&G.scale&&(j=j*(G.scale||1)),c.push({type:Ha.literal,value:f.getNumberFormat(h,G).format(j)});continue}if(q0(Z)){var se=Z.children,J=Z.value,oe=b[J];if(!nx(oe))throw new Wk(J,"function",S);var re=ym(se,h,f,y,b,C),pe=oe(re.map(function(ve){return ve.value}));Array.isArray(pe)||(pe=[pe]),c.push.apply(c,pe.map(function(ve){return{type:typeof ve=="string"?Ha.literal:Ha.object,value:ve}}))}if(G0(Z)){var ge=Z.options[j]||Z.options.other;if(!ge)throw new q_(Z.value,j,Object.keys(Z.options),S);c.push.apply(c,ym(ge.value,h,f,y,b));continue}if(Z0(Z)){var ge=Z.options["=".concat(j)];if(!ge){if(!Intl.PluralRules)throw new Zc(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Tu.MISSING_INTL_API,S);var Oe=f.getPluralRules(h,{type:Z.pluralType}).select(j-(Z.offset||0));ge=Z.options[Oe]||Z.options.other}if(!ge)throw new q_(Z.value,j,Object.keys(Z.options),S);c.push.apply(c,ym(ge.value,h,f,y,b,j-(Z.offset||0)));continue}}return Zk(c)}function qk(n,h){return h?Pr(Pr(Pr({},n||{}),h||{}),Object.keys(n).reduce(function(f,y){return f[y]=Pr(Pr({},n[y]),h[y]||{}),f},{})):n}function Yk(n,h){return h?Object.keys(n).reduce(function(f,y){return f[y]=qk(n[y],h[y]),f},Pr({},n)):n}function Rg(n){return{create:function(){return{get:function(h){return n[h]},set:function(h,f){n[h]=f}}}}}function Xk(n){return n===void 0&&(n={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:$a(function(){for(var h,f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];return new((h=Intl.NumberFormat).bind.apply(h,Ga([void 0],f,!1)))},{cache:Rg(n.number),strategy:Wa.variadic}),getDateTimeFormat:$a(function(){for(var h,f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];return new((h=Intl.DateTimeFormat).bind.apply(h,Ga([void 0],f,!1)))},{cache:Rg(n.dateTime),strategy:Wa.variadic}),getPluralRules:$a(function(){for(var h,f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];return new((h=Intl.PluralRules).bind.apply(h,Ga([void 0],f,!1)))},{cache:Rg(n.pluralRules),strategy:Wa.variadic})}}var ix=function(){function n(h,f,y,b){f===void 0&&(f=n.defaultLocale);var C=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(R){var N=C.formatToParts(R);if(N.length===1)return N[0].value;var Z=N.reduce(function(U,j){return!U.length||j.type!==Ha.literal||typeof U[U.length-1]!="string"?U.push(j.value):U[U.length-1]+=j.value,U},[]);return Z.length<=1?Z[0]||"":Z},this.formatToParts=function(R){return ym(C.ast,C.locales,C.formatters,C.formats,R,void 0,C.message)},this.resolvedOptions=function(){var R;return{locale:((R=C.resolvedLocale)===null||R===void 0?void 0:R.toString())||Intl.NumberFormat.supportedLocalesOf(C.locales)[0]}},this.getAst=function(){return C.ast},this.locales=f,this.resolvedLocale=n.resolveLocale(f),typeof h=="string"){if(this.message=h,!n.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var S=b||{};S.formatters;var c=Jd(S,["formatters"]);this.ast=n.__parse(h,Pr(Pr({},c),{locale:this.resolvedLocale}))}else this.ast=h;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Yk(n.formats,y),this.formatters=b&&b.formatters||Xk(this.formatterCache)}return Object.defineProperty(n,"defaultLocale",{get:function(){return n.memoizedDefaultLocale||(n.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),n.memoizedDefaultLocale},enumerable:!1,configurable:!0}),n.memoizedDefaultLocale=null,n.resolveLocale=function(h){if(!(typeof Intl.Locale>"u")){var f=Intl.NumberFormat.supportedLocalesOf(h);return f.length>0?new Intl.Locale(f[0]):new Intl.Locale(typeof h=="string"?h:h[0])}},n.__parse=$k,n.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},n}(),Qh;(function(n){n.FORMAT_ERROR="FORMAT_ERROR",n.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",n.INVALID_CONFIG="INVALID_CONFIG",n.MISSING_DATA="MISSING_DATA",n.MISSING_TRANSLATION="MISSING_TRANSLATION"})(Qh||(Qh={}));var sp=function(n){ul(h,n);function h(f,y,b){var C=this,S=b?b instanceof Error?b:new Error(String(b)):void 0;return C=n.call(this,"[@formatjs/intl Error ".concat(f,"] ").concat(y,`
`).concat(S?`
`.concat(S.message,`
`).concat(S.stack):""))||this,C.code=f,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(C,h),C}return h}(Error),Kk=function(n){ul(h,n);function h(f,y){return n.call(this,Qh.UNSUPPORTED_FORMATTER,f,y)||this}return h}(sp),Jk=function(n){ul(h,n);function h(f,y){return n.call(this,Qh.INVALID_CONFIG,f,y)||this}return h}(sp),Y_=function(n){ul(h,n);function h(f,y){return n.call(this,Qh.MISSING_DATA,f,y)||this}return h}(sp),cl=function(n){ul(h,n);function h(f,y,b){var C=n.call(this,Qh.FORMAT_ERROR,"".concat(f,`
Locale: `).concat(y,`
`),b)||this;return C.locale=y,C}return h}(sp),Lg=function(n){ul(h,n);function h(f,y,b,C){var S=n.call(this,"".concat(f,`
MessageID: `).concat(b==null?void 0:b.id,`
Default Message: `).concat(b==null?void 0:b.defaultMessage,`
Description: `).concat(b==null?void 0:b.description,`
`),y,C)||this;return S.descriptor=b,S.locale=y,S}return h}(cl),Qk=function(n){ul(h,n);function h(f,y){var b=n.call(this,Qh.MISSING_TRANSLATION,'Missing message: "'.concat(f.id,'" for locale "').concat(y,'", using ').concat(f.defaultMessage?"default message (".concat(typeof f.defaultMessage=="string"?f.defaultMessage:f.defaultMessage.map(function(C){var S;return(S=C.value)!==null&&S!==void 0?S:JSON.stringify(C)}).join(),")"):"id"," as fallback."))||this;return b.descriptor=f,b}return h}(sp);function rd(n,h,f){return f===void 0&&(f={}),h.reduce(function(y,b){return b in n?y[b]=n[b]:b in f&&(y[b]=f[b]),y},{})}var eT=function(n){},tT=function(n){},sx={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:eT,onWarn:tT};function ax(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function $h(n){return{create:function(){return{get:function(h){return n[h]},set:function(h,f){n[h]=f}}}}}function rT(n){n===void 0&&(n=ax());var h=Intl.RelativeTimeFormat,f=Intl.ListFormat,y=Intl.DisplayNames,b=$a(function(){for(var c,R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];return new((c=Intl.DateTimeFormat).bind.apply(c,Ga([void 0],R,!1)))},{cache:$h(n.dateTime),strategy:Wa.variadic}),C=$a(function(){for(var c,R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];return new((c=Intl.NumberFormat).bind.apply(c,Ga([void 0],R,!1)))},{cache:$h(n.number),strategy:Wa.variadic}),S=$a(function(){for(var c,R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];return new((c=Intl.PluralRules).bind.apply(c,Ga([void 0],R,!1)))},{cache:$h(n.pluralRules),strategy:Wa.variadic});return{getDateTimeFormat:b,getNumberFormat:C,getMessageFormat:$a(function(c,R,N,Z){return new ix(c,R,N,Pr({formatters:{getNumberFormat:C,getDateTimeFormat:b,getPluralRules:S}},Z||{}))},{cache:$h(n.message),strategy:Wa.variadic}),getRelativeTimeFormat:$a(function(){for(var c=[],R=0;R<arguments.length;R++)c[R]=arguments[R];return new(h.bind.apply(h,Ga([void 0],c,!1)))},{cache:$h(n.relativeTime),strategy:Wa.variadic}),getPluralRules:S,getListFormat:$a(function(){for(var c=[],R=0;R<arguments.length;R++)c[R]=arguments[R];return new(f.bind.apply(f,Ga([void 0],c,!1)))},{cache:$h(n.list),strategy:Wa.variadic}),getDisplayNames:$a(function(){for(var c=[],R=0;R<arguments.length;R++)c[R]=arguments[R];return new(y.bind.apply(y,Ga([void 0],c,!1)))},{cache:$h(n.displayNames),strategy:Wa.variadic})}}function Xy(n,h,f,y){var b=n&&n[h],C;if(b&&(C=b[f]),C)return C;y(new Kk("No ".concat(h," format named: ").concat(f)))}function sm(n,h){return Object.keys(n).reduce(function(f,y){return f[y]=Pr({timeZone:h},n[y]),f},{})}function X_(n,h){var f=Object.keys(Pr(Pr({},n),h));return f.reduce(function(y,b){return y[b]=Pr(Pr({},n[b]||{}),h[b]||{}),y},{})}function K_(n,h){if(!h)return n;var f=ix.formats;return Pr(Pr(Pr({},f),n),{date:X_(sm(f.date,h),sm(n.date||{},h)),time:X_(sm(f.time,h),sm(n.time||{},h))})}var fy=function(n,h,f,y,b){var C=n.locale,S=n.formats,c=n.messages,R=n.defaultLocale,N=n.defaultFormats,Z=n.fallbackOnEmptyString,U=n.onError,j=n.timeZone,G=n.defaultRichTextElements;f===void 0&&(f={id:""});var se=f.id,J=f.defaultMessage;V0(!!se,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var oe=String(se),re=c&&Object.prototype.hasOwnProperty.call(c,oe)&&c[oe];if(Array.isArray(re)&&re.length===1&&re[0].type===_i.literal)return re[0].value;if(!y&&re&&typeof re=="string"&&!G)return re.replace(/'\{(.*?)\}'/gi,"{$1}");if(y=Pr(Pr({},G),y||{}),S=K_(S,j),N=K_(N,j),!re){if(Z===!1&&re==="")return re;if((!J||C&&C.toLowerCase()!==R.toLowerCase())&&U(new Qk(f,C)),J)try{var pe=h.getMessageFormat(J,R,N,b);return pe.format(y)}catch(ge){return U(new Lg('Error formatting default message for: "'.concat(oe,'", rendering default message verbatim'),C,f,ge)),typeof J=="string"?J:oe}return oe}try{var pe=h.getMessageFormat(re,C,S,Pr({formatters:h},b||{}));return pe.format(y)}catch(ge){U(new Lg('Error formatting message: "'.concat(oe,'", using ').concat(J?"default message":"id"," as fallback."),C,f,ge))}if(J)try{var pe=h.getMessageFormat(J,R,N,b);return pe.format(y)}catch(ge){U(new Lg('Error formatting the default message for: "'.concat(oe,'", rendering message verbatim'),C,f,ge))}return typeof re=="string"?re:typeof J=="string"?J:oe},ox=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Wm(n,h,f,y){var b=n.locale,C=n.formats,S=n.onError,c=n.timeZone;y===void 0&&(y={});var R=y.format,N=Pr(Pr({},c&&{timeZone:c}),R&&Xy(C,h,R,S)),Z=rd(y,ox,N);return h==="time"&&!Z.hour&&!Z.minute&&!Z.second&&!Z.timeStyle&&!Z.dateStyle&&(Z=Pr(Pr({},Z),{hour:"numeric",minute:"numeric"})),f(b,Z)}function nT(n,h){for(var f=[],y=2;y<arguments.length;y++)f[y-2]=arguments[y];var b=f[0],C=f[1],S=C===void 0?{}:C,c=typeof b=="string"?new Date(b||0):b;try{return Wm(n,"date",h,S).format(c)}catch(R){n.onError(new cl("Error formatting date.",n.locale,R))}return String(c)}function iT(n,h){for(var f=[],y=2;y<arguments.length;y++)f[y-2]=arguments[y];var b=f[0],C=f[1],S=C===void 0?{}:C,c=typeof b=="string"?new Date(b||0):b;try{return Wm(n,"time",h,S).format(c)}catch(R){n.onError(new cl("Error formatting time.",n.locale,R))}return String(c)}function sT(n,h){for(var f=[],y=2;y<arguments.length;y++)f[y-2]=arguments[y];var b=f[0],C=f[1],S=f[2],c=S===void 0?{}:S,R=n.timeZone,N=n.locale,Z=n.onError,U=rd(c,ox,R?{timeZone:R}:{});try{return h(N,U).formatRange(b,C)}catch(j){Z(new cl("Error formatting date time range.",n.locale,j))}return String(b)}function aT(n,h){for(var f=[],y=2;y<arguments.length;y++)f[y-2]=arguments[y];var b=f[0],C=f[1],S=C===void 0?{}:C,c=typeof b=="string"?new Date(b||0):b;try{return Wm(n,"date",h,S).formatToParts(c)}catch(R){n.onError(new cl("Error formatting date.",n.locale,R))}return[]}function oT(n,h){for(var f=[],y=2;y<arguments.length;y++)f[y-2]=arguments[y];var b=f[0],C=f[1],S=C===void 0?{}:C,c=typeof b=="string"?new Date(b||0):b;try{return Wm(n,"time",h,S).formatToParts(c)}catch(R){n.onError(new cl("Error formatting time.",n.locale,R))}return[]}var lT=["style","type","fallback","languageDisplay"];function uT(n,h,f,y){var b=n.locale,C=n.onError,S=Intl.DisplayNames;S||C(new Zc(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Tu.MISSING_INTL_API));var c=rd(y,lT);try{return h(b,c).of(f)}catch(R){C(new cl("Error formatting display name.",b,R))}}var cT=["type","style"],J_=Date.now();function hT(n){return"".concat(J_,"_").concat(n,"_").concat(J_)}function dT(n,h,f,y){y===void 0&&(y={});var b=lx(n,h,f,y).reduce(function(C,S){var c=S.value;return typeof c!="string"?C.push(c):typeof C[C.length-1]=="string"?C[C.length-1]+=c:C.push(c),C},[]);return b.length===1?b[0]:b.length===0?"":b}function lx(n,h,f,y){var b=n.locale,C=n.onError;y===void 0&&(y={});var S=Intl.ListFormat;S||C(new Zc(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Tu.MISSING_INTL_API));var c=rd(y,cT);try{var R={},N=f.map(function(Z,U){if(typeof Z=="object"){var j=hT(U);return R[j]=Z,j}return String(Z)});return h(b,c).formatToParts(N).map(function(Z){return Z.type==="literal"?Z:Pr(Pr({},Z),{value:R[Z.value]||Z.value})})}catch(Z){C(new cl("Error formatting list.",b,Z))}return f}var fT=["type"];function pT(n,h,f,y){var b=n.locale,C=n.onError;y===void 0&&(y={}),Intl.PluralRules||C(new Zc(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Tu.MISSING_INTL_API));var S=rd(y,fT);try{return h(b,S).select(f)}catch(c){C(new cl("Error formatting plural.",b,c))}return"other"}var mT=["numeric","style"];function gT(n,h,f){var y=n.locale,b=n.formats,C=n.onError;f===void 0&&(f={});var S=f.format,c=!!S&&Xy(b,"relative",S,C)||{},R=rd(f,mT,c);return h(y,R)}function yT(n,h,f,y,b){b===void 0&&(b={}),y||(y="second");var C=Intl.RelativeTimeFormat;C||n.onError(new Zc(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Tu.MISSING_INTL_API));try{return gT(n,h,b).format(f,y)}catch(S){n.onError(new cl("Error formatting relative time.",n.locale,S))}return String(f)}var _T=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function ux(n,h,f){var y=n.locale,b=n.formats,C=n.onError;f===void 0&&(f={});var S=f.format,c=S&&Xy(b,"number",S,C)||{},R=rd(f,_T,c);return h(y,R)}function vT(n,h,f,y){y===void 0&&(y={});try{return ux(n,h,y).format(f)}catch(b){n.onError(new cl("Error formatting number.",n.locale,b))}return String(f)}function xT(n,h,f,y){y===void 0&&(y={});try{return ux(n,h,y).formatToParts(f)}catch(b){n.onError(new cl("Error formatting number.",n.locale,b))}return[]}function wT(n){var h=n?n[Object.keys(n)[0]]:void 0;return typeof h=="string"}function bT(n){n.onWarn&&n.defaultRichTextElements&&wT(n.messages||{})&&n.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function ST(n,h){var f=rT(h),y=Pr(Pr({},sx),n),b=y.locale,C=y.defaultLocale,S=y.onError;return b?!Intl.NumberFormat.supportedLocalesOf(b).length&&S?S(new Y_('Missing locale data for locale: "'.concat(b,'" in Intl.NumberFormat. Using default locale: "').concat(C,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(b).length&&S&&S(new Y_('Missing locale data for locale: "'.concat(b,'" in Intl.DateTimeFormat. Using default locale: "').concat(C,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(S&&S(new Jk('"locale" was not configured, using "'.concat(C,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),y.locale=y.defaultLocale||"en"),bT(y),Pr(Pr({},y),{formatters:f,formatNumber:vT.bind(null,y,f.getNumberFormat),formatNumberToParts:xT.bind(null,y,f.getNumberFormat),formatRelativeTime:yT.bind(null,y,f.getRelativeTimeFormat),formatDate:nT.bind(null,y,f.getDateTimeFormat),formatDateToParts:aT.bind(null,y,f.getDateTimeFormat),formatTime:iT.bind(null,y,f.getDateTimeFormat),formatDateTimeRange:sT.bind(null,y,f.getDateTimeFormat),formatTimeToParts:oT.bind(null,y,f.getDateTimeFormat),formatPlural:pT.bind(null,y,f.getPluralRules),formatMessage:fy.bind(null,y,f),$t:fy.bind(null,y,f),formatList:dT.bind(null,y,f.getListFormat),formatListToParts:lx.bind(null,y,f.getListFormat),formatDisplayName:uT.bind(null,y,f.getDisplayNames)})}function cx(n){V0(n,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var hx=Pr(Pr({},sx),{textComponent:Xr.Fragment});function kT(n){return function(h){return n(Xr.Children.toArray(h))}}function py(n,h){if(n===h)return!0;if(!n||!h)return!1;var f=Object.keys(n),y=Object.keys(h),b=f.length;if(y.length!==b)return!1;for(var C=0;C<b;C++){var S=f[C];if(n[S]!==h[S]||!Object.prototype.hasOwnProperty.call(h,S))return!1}return!0}var Og={exports:{}},Xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function TT(){if(Q_)return Xn;Q_=1;var n=typeof Symbol=="function"&&Symbol.for,h=n?Symbol.for("react.element"):60103,f=n?Symbol.for("react.portal"):60106,y=n?Symbol.for("react.fragment"):60107,b=n?Symbol.for("react.strict_mode"):60108,C=n?Symbol.for("react.profiler"):60114,S=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,R=n?Symbol.for("react.async_mode"):60111,N=n?Symbol.for("react.concurrent_mode"):60111,Z=n?Symbol.for("react.forward_ref"):60112,U=n?Symbol.for("react.suspense"):60113,j=n?Symbol.for("react.suspense_list"):60120,G=n?Symbol.for("react.memo"):60115,se=n?Symbol.for("react.lazy"):60116,J=n?Symbol.for("react.block"):60121,oe=n?Symbol.for("react.fundamental"):60117,re=n?Symbol.for("react.responder"):60118,pe=n?Symbol.for("react.scope"):60119;function ge(ve){if(typeof ve=="object"&&ve!==null){var Ge=ve.$$typeof;switch(Ge){case h:switch(ve=ve.type,ve){case R:case N:case y:case C:case b:case U:return ve;default:switch(ve=ve&&ve.$$typeof,ve){case c:case Z:case se:case G:case S:return ve;default:return Ge}}case f:return Ge}}}function Oe(ve){return ge(ve)===N}return Xn.AsyncMode=R,Xn.ConcurrentMode=N,Xn.ContextConsumer=c,Xn.ContextProvider=S,Xn.Element=h,Xn.ForwardRef=Z,Xn.Fragment=y,Xn.Lazy=se,Xn.Memo=G,Xn.Portal=f,Xn.Profiler=C,Xn.StrictMode=b,Xn.Suspense=U,Xn.isAsyncMode=function(ve){return Oe(ve)||ge(ve)===R},Xn.isConcurrentMode=Oe,Xn.isContextConsumer=function(ve){return ge(ve)===c},Xn.isContextProvider=function(ve){return ge(ve)===S},Xn.isElement=function(ve){return typeof ve=="object"&&ve!==null&&ve.$$typeof===h},Xn.isForwardRef=function(ve){return ge(ve)===Z},Xn.isFragment=function(ve){return ge(ve)===y},Xn.isLazy=function(ve){return ge(ve)===se},Xn.isMemo=function(ve){return ge(ve)===G},Xn.isPortal=function(ve){return ge(ve)===f},Xn.isProfiler=function(ve){return ge(ve)===C},Xn.isStrictMode=function(ve){return ge(ve)===b},Xn.isSuspense=function(ve){return ge(ve)===U},Xn.isValidElementType=function(ve){return typeof ve=="string"||typeof ve=="function"||ve===y||ve===N||ve===C||ve===b||ve===U||ve===j||typeof ve=="object"&&ve!==null&&(ve.$$typeof===se||ve.$$typeof===G||ve.$$typeof===S||ve.$$typeof===c||ve.$$typeof===Z||ve.$$typeof===oe||ve.$$typeof===re||ve.$$typeof===pe||ve.$$typeof===J)},Xn.typeOf=ge,Xn}var ev;function ET(){return ev||(ev=1,Og.exports=TT()),Og.exports}var Fg,tv;function CT(){if(tv)return Fg;tv=1;var n=ET(),h={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},y={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},C={};C[n.ForwardRef]=y,C[n.Memo]=b;function S(se){return n.isMemo(se)?b:C[se.$$typeof]||h}var c=Object.defineProperty,R=Object.getOwnPropertyNames,N=Object.getOwnPropertySymbols,Z=Object.getOwnPropertyDescriptor,U=Object.getPrototypeOf,j=Object.prototype;function G(se,J,oe){if(typeof J!="string"){if(j){var re=U(J);re&&re!==j&&G(se,re,oe)}var pe=R(J);N&&(pe=pe.concat(N(J)));for(var ge=S(se),Oe=S(J),ve=0;ve<pe.length;++ve){var Ge=pe[ve];if(!f[Ge]&&!(oe&&oe[Ge])&&!(Oe&&Oe[Ge])&&!(ge&&ge[Ge])){var je=Z(J,Ge);try{c(se,Ge,je)}catch{}}}}return se}return Fg=G,Fg}CT();var Ky=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=Xr.createContext(null)):Xr.createContext(null);Ky.Consumer;var IT=Ky.Provider,PT=IT,MT=Ky;function Gm(){var n=Xr.useContext(MT);return cx(n),n}var my;(function(n){n.formatDate="FormattedDate",n.formatTime="FormattedTime",n.formatNumber="FormattedNumber",n.formatList="FormattedList",n.formatDisplayName="FormattedDisplayName"})(my||(my={}));var gy;(function(n){n.formatDate="FormattedDateParts",n.formatTime="FormattedTimeParts",n.formatNumber="FormattedNumberParts",n.formatList="FormattedListParts"})(gy||(gy={}));function dx(n){var h=function(f){var y=Gm(),b=f.value,C=f.children,S=Jd(f,["value","children"]),c=typeof b=="string"?new Date(b||0):b,R=n==="formatDate"?y.formatDateToParts(c,S):y.formatTimeToParts(c,S);return C(R)};return h.displayName=gy[n],h}function ap(n){var h=function(f){var y=Gm(),b=f.value,C=f.children,S=Jd(f,["value","children"]),c=y[n](b,S);if(typeof C=="function")return C(c);var R=y.textComponent||Xr.Fragment;return Xr.createElement(R,null,c)};return h.displayName=my[n],h}function fx(n){return n&&Object.keys(n).reduce(function(h,f){var y=n[f];return h[f]=nx(y)?kT(y):y,h},{})}var rv=function(n,h,f,y){for(var b=[],C=4;C<arguments.length;C++)b[C-4]=arguments[C];var S=fx(y),c=fy.apply(void 0,Ga([n,h,f,S],b,!1));return Array.isArray(c)?Xr.Children.toArray(c):c},nv=function(n,h){var f=n.defaultRichTextElements,y=Jd(n,["defaultRichTextElements"]),b=fx(f),C=ST(Pr(Pr(Pr({},hx),y),{defaultRichTextElements:b}),h),S={locale:C.locale,timeZone:C.timeZone,fallbackOnEmptyString:C.fallbackOnEmptyString,formats:C.formats,defaultLocale:C.defaultLocale,defaultFormats:C.defaultFormats,messages:C.messages,onError:C.onError,defaultRichTextElements:b};return Pr(Pr({},C),{formatMessage:rv.bind(null,S,C.formatters),$t:rv.bind(null,S,C.formatters)})};function Bg(n){return{locale:n.locale,timeZone:n.timeZone,fallbackOnEmptyString:n.fallbackOnEmptyString,formats:n.formats,textComponent:n.textComponent,messages:n.messages,defaultLocale:n.defaultLocale,defaultFormats:n.defaultFormats,onError:n.onError,onWarn:n.onWarn,wrapRichTextChunksInFragment:n.wrapRichTextChunksInFragment,defaultRichTextElements:n.defaultRichTextElements}}var AT=function(n){ul(h,n);function h(){var f=n!==null&&n.apply(this,arguments)||this;return f.cache=ax(),f.state={cache:f.cache,intl:nv(Bg(f.props),f.cache),prevConfig:Bg(f.props)},f}return h.getDerivedStateFromProps=function(f,y){var b=y.prevConfig,C=y.cache,S=Bg(f);return py(b,S)?null:{intl:nv(S,C),prevConfig:S}},h.prototype.render=function(){return cx(this.state.intl),Xr.createElement(PT,{value:this.state.intl},this.props.children)},h.displayName="IntlProvider",h.defaultProps=hx,h}(Xr.PureComponent);function DT(n,h){var f=n.values,y=Jd(n,["values"]),b=h.values,C=Jd(h,["values"]);return py(b,f)&&py(y,C)}function px(n){var h=Gm(),f=h.formatMessage,y=h.textComponent,b=y===void 0?Xr.Fragment:y,C=n.id,S=n.description,c=n.defaultMessage,R=n.values,N=n.children,Z=n.tagName,U=Z===void 0?b:Z,j=n.ignoreTag,G={id:C,description:S,defaultMessage:c},se=f(G,R,{ignoreTag:j});return typeof N=="function"?N(Array.isArray(se)?se:[se]):U?Xr.createElement(U,null,Xr.Children.toArray(se)):Xr.createElement(Xr.Fragment,null,se)}px.displayName="FormattedMessage";var hs=Xr.memo(px,DT);hs.displayName="MemoizedFormattedMessage";ap("formatDate");ap("formatTime");ap("formatNumber");ap("formatList");ap("formatDisplayName");dx("formatDate");dx("formatTime");function am(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ng={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var iv;function zT(){return iv||(iv=1,function(n,h){(function(f){n.exports=f()})(function(){return function f(y,b,C){function S(N,Z){if(!b[N]){if(!y[N]){var U=typeof am=="function"&&am;if(!Z&&U)return U(N,!0);if(c)return c(N,!0);var j=new Error("Cannot find module '"+N+"'");throw j.code="MODULE_NOT_FOUND",j}var G=b[N]={exports:{}};y[N][0].call(G.exports,function(se){var J=y[N][1][se];return S(J||se)},G,G.exports,f,y,b,C)}return b[N].exports}for(var c=typeof am=="function"&&am,R=0;R<C.length;R++)S(C[R]);return S}({1:[function(f,y,b){var C=f("./utils"),S=f("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(R){for(var N,Z,U,j,G,se,J,oe=[],re=0,pe=R.length,ge=pe,Oe=C.getTypeOf(R)!=="string";re<R.length;)ge=pe-re,U=Oe?(N=R[re++],Z=re<pe?R[re++]:0,re<pe?R[re++]:0):(N=R.charCodeAt(re++),Z=re<pe?R.charCodeAt(re++):0,re<pe?R.charCodeAt(re++):0),j=N>>2,G=(3&N)<<4|Z>>4,se=1<ge?(15&Z)<<2|U>>6:64,J=2<ge?63&U:64,oe.push(c.charAt(j)+c.charAt(G)+c.charAt(se)+c.charAt(J));return oe.join("")},b.decode=function(R){var N,Z,U,j,G,se,J=0,oe=0,re="data:";if(R.substr(0,re.length)===re)throw new Error("Invalid base64 input, it looks like a data url.");var pe,ge=3*(R=R.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(R.charAt(R.length-1)===c.charAt(64)&&ge--,R.charAt(R.length-2)===c.charAt(64)&&ge--,ge%1!=0)throw new Error("Invalid base64 input, bad content length.");for(pe=S.uint8array?new Uint8Array(0|ge):new Array(0|ge);J<R.length;)N=c.indexOf(R.charAt(J++))<<2|(j=c.indexOf(R.charAt(J++)))>>4,Z=(15&j)<<4|(G=c.indexOf(R.charAt(J++)))>>2,U=(3&G)<<6|(se=c.indexOf(R.charAt(J++))),pe[oe++]=N,G!==64&&(pe[oe++]=Z),se!==64&&(pe[oe++]=U);return pe}},{"./support":30,"./utils":32}],2:[function(f,y,b){var C=f("./external"),S=f("./stream/DataWorker"),c=f("./stream/Crc32Probe"),R=f("./stream/DataLengthProbe");function N(Z,U,j,G,se){this.compressedSize=Z,this.uncompressedSize=U,this.crc32=j,this.compression=G,this.compressedContent=se}N.prototype={getContentWorker:function(){var Z=new S(C.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new R("data_length")),U=this;return Z.on("end",function(){if(this.streamInfo.data_length!==U.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Z},getCompressedWorker:function(){return new S(C.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},N.createWorkerFrom=function(Z,U,j){return Z.pipe(new c).pipe(new R("uncompressedSize")).pipe(U.compressWorker(j)).pipe(new R("compressedSize")).withStreamInfo("compression",U)},y.exports=N},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(f,y,b){var C=f("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new C("STORE compression")},uncompressWorker:function(){return new C("STORE decompression")}},b.DEFLATE=f("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(f,y,b){var C=f("./utils"),S=function(){for(var c,R=[],N=0;N<256;N++){c=N;for(var Z=0;Z<8;Z++)c=1&c?3988292384^c>>>1:c>>>1;R[N]=c}return R}();y.exports=function(c,R){return c!==void 0&&c.length?C.getTypeOf(c)!=="string"?function(N,Z,U,j){var G=S,se=j+U;N^=-1;for(var J=j;J<se;J++)N=N>>>8^G[255&(N^Z[J])];return-1^N}(0|R,c,c.length,0):function(N,Z,U,j){var G=S,se=j+U;N^=-1;for(var J=j;J<se;J++)N=N>>>8^G[255&(N^Z.charCodeAt(J))];return-1^N}(0|R,c,c.length,0):0}},{"./utils":32}],5:[function(f,y,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(f,y,b){var C=null;C=typeof Promise<"u"?Promise:f("lie"),y.exports={Promise:C}},{lie:37}],7:[function(f,y,b){var C=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",S=f("pako"),c=f("./utils"),R=f("./stream/GenericWorker"),N=C?"uint8array":"array";function Z(U,j){R.call(this,"FlateWorker/"+U),this._pako=null,this._pakoAction=U,this._pakoOptions=j,this.meta={}}b.magic="\b\0",c.inherits(Z,R),Z.prototype.processChunk=function(U){this.meta=U.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(N,U.data),!1)},Z.prototype.flush=function(){R.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},Z.prototype.cleanUp=function(){R.prototype.cleanUp.call(this),this._pako=null},Z.prototype._createPako=function(){this._pako=new S[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var U=this;this._pako.onData=function(j){U.push({data:j,meta:U.meta})}},b.compressWorker=function(U){return new Z("Deflate",U)},b.uncompressWorker=function(){return new Z("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(f,y,b){function C(G,se){var J,oe="";for(J=0;J<se;J++)oe+=String.fromCharCode(255&G),G>>>=8;return oe}function S(G,se,J,oe,re,pe){var ge,Oe,ve=G.file,Ge=G.compression,je=pe!==N.utf8encode,St=c.transformTo("string",pe(ve.name)),at=c.transformTo("string",N.utf8encode(ve.name)),Mt=ve.comment,xt=c.transformTo("string",pe(Mt)),xe=c.transformTo("string",N.utf8encode(Mt)),Je=at.length!==ve.name.length,W=xe.length!==Mt.length,Ve="",zt="",Me="",et=ve.dir,Ze=ve.date,ht={crc32:0,compressedSize:0,uncompressedSize:0};se&&!J||(ht.crc32=G.crc32,ht.compressedSize=G.compressedSize,ht.uncompressedSize=G.uncompressedSize);var ae=0;se&&(ae|=8),je||!Je&&!W||(ae|=2048);var _e=0,Ct=0;et&&(_e|=16),re==="UNIX"?(Ct=798,_e|=function(wt,lr){var pr=wt;return wt||(pr=lr?16893:33204),(65535&pr)<<16}(ve.unixPermissions,et)):(Ct=20,_e|=function(wt){return 63&(wt||0)}(ve.dosPermissions)),ge=Ze.getUTCHours(),ge<<=6,ge|=Ze.getUTCMinutes(),ge<<=5,ge|=Ze.getUTCSeconds()/2,Oe=Ze.getUTCFullYear()-1980,Oe<<=4,Oe|=Ze.getUTCMonth()+1,Oe<<=5,Oe|=Ze.getUTCDate(),Je&&(zt=C(1,1)+C(Z(St),4)+at,Ve+="up"+C(zt.length,2)+zt),W&&(Me=C(1,1)+C(Z(xt),4)+xe,Ve+="uc"+C(Me.length,2)+Me);var bt="";return bt+=`
\0`,bt+=C(ae,2),bt+=Ge.magic,bt+=C(ge,2),bt+=C(Oe,2),bt+=C(ht.crc32,4),bt+=C(ht.compressedSize,4),bt+=C(ht.uncompressedSize,4),bt+=C(St.length,2),bt+=C(Ve.length,2),{fileRecord:U.LOCAL_FILE_HEADER+bt+St+Ve,dirRecord:U.CENTRAL_FILE_HEADER+C(Ct,2)+bt+C(xt.length,2)+"\0\0\0\0"+C(_e,4)+C(oe,4)+St+Ve+xt}}var c=f("../utils"),R=f("../stream/GenericWorker"),N=f("../utf8"),Z=f("../crc32"),U=f("../signature");function j(G,se,J,oe){R.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=se,this.zipPlatform=J,this.encodeFileName=oe,this.streamFiles=G,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(j,R),j.prototype.push=function(G){var se=G.meta.percent||0,J=this.entriesCount,oe=this._sources.length;this.accumulate?this.contentBuffer.push(G):(this.bytesWritten+=G.data.length,R.prototype.push.call(this,{data:G.data,meta:{currentFile:this.currentFile,percent:J?(se+100*(J-oe-1))/J:100}}))},j.prototype.openedSource=function(G){this.currentSourceOffset=this.bytesWritten,this.currentFile=G.file.name;var se=this.streamFiles&&!G.file.dir;if(se){var J=S(G,se,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:J.fileRecord,meta:{percent:0}})}else this.accumulate=!0},j.prototype.closedSource=function(G){this.accumulate=!1;var se=this.streamFiles&&!G.file.dir,J=S(G,se,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(J.dirRecord),se)this.push({data:function(oe){return U.DATA_DESCRIPTOR+C(oe.crc32,4)+C(oe.compressedSize,4)+C(oe.uncompressedSize,4)}(G),meta:{percent:100}});else for(this.push({data:J.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},j.prototype.flush=function(){for(var G=this.bytesWritten,se=0;se<this.dirRecords.length;se++)this.push({data:this.dirRecords[se],meta:{percent:100}});var J=this.bytesWritten-G,oe=function(re,pe,ge,Oe,ve){var Ge=c.transformTo("string",ve(Oe));return U.CENTRAL_DIRECTORY_END+"\0\0\0\0"+C(re,2)+C(re,2)+C(pe,4)+C(ge,4)+C(Ge.length,2)+Ge}(this.dirRecords.length,J,G,this.zipComment,this.encodeFileName);this.push({data:oe,meta:{percent:100}})},j.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},j.prototype.registerPrevious=function(G){this._sources.push(G);var se=this;return G.on("data",function(J){se.processChunk(J)}),G.on("end",function(){se.closedSource(se.previous.streamInfo),se._sources.length?se.prepareNextSource():se.end()}),G.on("error",function(J){se.error(J)}),this},j.prototype.resume=function(){return!!R.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},j.prototype.error=function(G){var se=this._sources;if(!R.prototype.error.call(this,G))return!1;for(var J=0;J<se.length;J++)try{se[J].error(G)}catch{}return!0},j.prototype.lock=function(){R.prototype.lock.call(this);for(var G=this._sources,se=0;se<G.length;se++)G[se].lock()},y.exports=j},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(f,y,b){var C=f("../compressions"),S=f("./ZipFileWorker");b.generateWorker=function(c,R,N){var Z=new S(R.streamFiles,N,R.platform,R.encodeFileName),U=0;try{c.forEach(function(j,G){U++;var se=function(pe,ge){var Oe=pe||ge,ve=C[Oe];if(!ve)throw new Error(Oe+" is not a valid compression method !");return ve}(G.options.compression,R.compression),J=G.options.compressionOptions||R.compressionOptions||{},oe=G.dir,re=G.date;G._compressWorker(se,J).withStreamInfo("file",{name:j,dir:oe,date:re,comment:G.comment||"",unixPermissions:G.unixPermissions,dosPermissions:G.dosPermissions}).pipe(Z)}),Z.entriesCount=U}catch(j){Z.error(j)}return Z}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(f,y,b){function C(){if(!(this instanceof C))return new C;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var S=new C;for(var c in this)typeof this[c]!="function"&&(S[c]=this[c]);return S}}(C.prototype=f("./object")).loadAsync=f("./load"),C.support=f("./support"),C.defaults=f("./defaults"),C.version="3.10.1",C.loadAsync=function(S,c){return new C().loadAsync(S,c)},C.external=f("./external"),y.exports=C},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(f,y,b){var C=f("./utils"),S=f("./external"),c=f("./utf8"),R=f("./zipEntries"),N=f("./stream/Crc32Probe"),Z=f("./nodejsUtils");function U(j){return new S.Promise(function(G,se){var J=j.decompressed.getContentWorker().pipe(new N);J.on("error",function(oe){se(oe)}).on("end",function(){J.streamInfo.crc32!==j.decompressed.crc32?se(new Error("Corrupted zip : CRC32 mismatch")):G()}).resume()})}y.exports=function(j,G){var se=this;return G=C.extend(G||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),Z.isNode&&Z.isStream(j)?S.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):C.prepareContent("the loaded zip file",j,!0,G.optimizedBinaryString,G.base64).then(function(J){var oe=new R(G);return oe.load(J),oe}).then(function(J){var oe=[S.Promise.resolve(J)],re=J.files;if(G.checkCRC32)for(var pe=0;pe<re.length;pe++)oe.push(U(re[pe]));return S.Promise.all(oe)}).then(function(J){for(var oe=J.shift(),re=oe.files,pe=0;pe<re.length;pe++){var ge=re[pe],Oe=ge.fileNameStr,ve=C.resolve(ge.fileNameStr);se.file(ve,ge.decompressed,{binary:!0,optimizedBinaryString:!0,date:ge.date,dir:ge.dir,comment:ge.fileCommentStr.length?ge.fileCommentStr:null,unixPermissions:ge.unixPermissions,dosPermissions:ge.dosPermissions,createFolders:G.createFolders}),ge.dir||(se.file(ve).unsafeOriginalName=Oe)}return oe.zipComment.length&&(se.comment=oe.zipComment),se})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(f,y,b){var C=f("../utils"),S=f("../stream/GenericWorker");function c(R,N){S.call(this,"Nodejs stream input adapter for "+R),this._upstreamEnded=!1,this._bindStream(N)}C.inherits(c,S),c.prototype._bindStream=function(R){var N=this;(this._stream=R).pause(),R.on("data",function(Z){N.push({data:Z,meta:{percent:0}})}).on("error",function(Z){N.isPaused?this.generatedError=Z:N.error(Z)}).on("end",function(){N.isPaused?N._upstreamEnded=!0:N.end()})},c.prototype.pause=function(){return!!S.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},y.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(f,y,b){var C=f("readable-stream").Readable;function S(c,R,N){C.call(this,R),this._helper=c;var Z=this;c.on("data",function(U,j){Z.push(U)||Z._helper.pause(),N&&N(j)}).on("error",function(U){Z.emit("error",U)}).on("end",function(){Z.push(null)})}f("../utils").inherits(S,C),S.prototype._read=function(){this._helper.resume()},y.exports=S},{"../utils":32,"readable-stream":16}],14:[function(f,y,b){y.exports={isNode:typeof Buffer<"u",newBufferFrom:function(C,S){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(C,S);if(typeof C=="number")throw new Error('The "data" argument must not be a number');return new Buffer(C,S)},allocBuffer:function(C){if(Buffer.alloc)return Buffer.alloc(C);var S=new Buffer(C);return S.fill(0),S},isBuffer:function(C){return Buffer.isBuffer(C)},isStream:function(C){return C&&typeof C.on=="function"&&typeof C.pause=="function"&&typeof C.resume=="function"}}},{}],15:[function(f,y,b){function C(ve,Ge,je){var St,at=c.getTypeOf(Ge),Mt=c.extend(je||{},Z);Mt.date=Mt.date||new Date,Mt.compression!==null&&(Mt.compression=Mt.compression.toUpperCase()),typeof Mt.unixPermissions=="string"&&(Mt.unixPermissions=parseInt(Mt.unixPermissions,8)),Mt.unixPermissions&&16384&Mt.unixPermissions&&(Mt.dir=!0),Mt.dosPermissions&&16&Mt.dosPermissions&&(Mt.dir=!0),Mt.dir&&(ve=re(ve)),Mt.createFolders&&(St=oe(ve))&&pe.call(this,St,!0);var xt=at==="string"&&Mt.binary===!1&&Mt.base64===!1;je&&je.binary!==void 0||(Mt.binary=!xt),(Ge instanceof U&&Ge.uncompressedSize===0||Mt.dir||!Ge||Ge.length===0)&&(Mt.base64=!1,Mt.binary=!0,Ge="",Mt.compression="STORE",at="string");var xe=null;xe=Ge instanceof U||Ge instanceof R?Ge:se.isNode&&se.isStream(Ge)?new J(ve,Ge):c.prepareContent(ve,Ge,Mt.binary,Mt.optimizedBinaryString,Mt.base64);var Je=new j(ve,xe,Mt);this.files[ve]=Je}var S=f("./utf8"),c=f("./utils"),R=f("./stream/GenericWorker"),N=f("./stream/StreamHelper"),Z=f("./defaults"),U=f("./compressedObject"),j=f("./zipObject"),G=f("./generate"),se=f("./nodejsUtils"),J=f("./nodejs/NodejsStreamInputAdapter"),oe=function(ve){ve.slice(-1)==="/"&&(ve=ve.substring(0,ve.length-1));var Ge=ve.lastIndexOf("/");return 0<Ge?ve.substring(0,Ge):""},re=function(ve){return ve.slice(-1)!=="/"&&(ve+="/"),ve},pe=function(ve,Ge){return Ge=Ge!==void 0?Ge:Z.createFolders,ve=re(ve),this.files[ve]||C.call(this,ve,null,{dir:!0,createFolders:Ge}),this.files[ve]};function ge(ve){return Object.prototype.toString.call(ve)==="[object RegExp]"}var Oe={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ve){var Ge,je,St;for(Ge in this.files)St=this.files[Ge],(je=Ge.slice(this.root.length,Ge.length))&&Ge.slice(0,this.root.length)===this.root&&ve(je,St)},filter:function(ve){var Ge=[];return this.forEach(function(je,St){ve(je,St)&&Ge.push(St)}),Ge},file:function(ve,Ge,je){if(arguments.length!==1)return ve=this.root+ve,C.call(this,ve,Ge,je),this;if(ge(ve)){var St=ve;return this.filter(function(Mt,xt){return!xt.dir&&St.test(Mt)})}var at=this.files[this.root+ve];return at&&!at.dir?at:null},folder:function(ve){if(!ve)return this;if(ge(ve))return this.filter(function(at,Mt){return Mt.dir&&ve.test(at)});var Ge=this.root+ve,je=pe.call(this,Ge),St=this.clone();return St.root=je.name,St},remove:function(ve){ve=this.root+ve;var Ge=this.files[ve];if(Ge||(ve.slice(-1)!=="/"&&(ve+="/"),Ge=this.files[ve]),Ge&&!Ge.dir)delete this.files[ve];else for(var je=this.filter(function(at,Mt){return Mt.name.slice(0,ve.length)===ve}),St=0;St<je.length;St++)delete this.files[je[St].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ve){var Ge,je={};try{if((je=c.extend(ve||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:S.utf8encode})).type=je.type.toLowerCase(),je.compression=je.compression.toUpperCase(),je.type==="binarystring"&&(je.type="string"),!je.type)throw new Error("No output type specified.");c.checkSupport(je.type),je.platform!=="darwin"&&je.platform!=="freebsd"&&je.platform!=="linux"&&je.platform!=="sunos"||(je.platform="UNIX"),je.platform==="win32"&&(je.platform="DOS");var St=je.comment||this.comment||"";Ge=G.generateWorker(this,je,St)}catch(at){(Ge=new R("error")).error(at)}return new N(Ge,je.type||"string",je.mimeType)},generateAsync:function(ve,Ge){return this.generateInternalStream(ve).accumulate(Ge)},generateNodeStream:function(ve,Ge){return(ve=ve||{}).type||(ve.type="nodebuffer"),this.generateInternalStream(ve).toNodejsStream(Ge)}};y.exports=Oe},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(f,y,b){y.exports=f("stream")},{stream:void 0}],17:[function(f,y,b){var C=f("./DataReader");function S(c){C.call(this,c);for(var R=0;R<this.data.length;R++)c[R]=255&c[R]}f("../utils").inherits(S,C),S.prototype.byteAt=function(c){return this.data[this.zero+c]},S.prototype.lastIndexOfSignature=function(c){for(var R=c.charCodeAt(0),N=c.charCodeAt(1),Z=c.charCodeAt(2),U=c.charCodeAt(3),j=this.length-4;0<=j;--j)if(this.data[j]===R&&this.data[j+1]===N&&this.data[j+2]===Z&&this.data[j+3]===U)return j-this.zero;return-1},S.prototype.readAndCheckSignature=function(c){var R=c.charCodeAt(0),N=c.charCodeAt(1),Z=c.charCodeAt(2),U=c.charCodeAt(3),j=this.readData(4);return R===j[0]&&N===j[1]&&Z===j[2]&&U===j[3]},S.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var R=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,R},y.exports=S},{"../utils":32,"./DataReader":18}],18:[function(f,y,b){var C=f("../utils");function S(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}S.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var R,N=0;for(this.checkOffset(c),R=this.index+c-1;R>=this.index;R--)N=(N<<8)+this.byteAt(R);return this.index+=c,N},readString:function(c){return C.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},y.exports=S},{"../utils":32}],19:[function(f,y,b){var C=f("./Uint8ArrayReader");function S(c){C.call(this,c)}f("../utils").inherits(S,C),S.prototype.readData=function(c){this.checkOffset(c);var R=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,R},y.exports=S},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(f,y,b){var C=f("./DataReader");function S(c){C.call(this,c)}f("../utils").inherits(S,C),S.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},S.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},S.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},S.prototype.readData=function(c){this.checkOffset(c);var R=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,R},y.exports=S},{"../utils":32,"./DataReader":18}],21:[function(f,y,b){var C=f("./ArrayReader");function S(c){C.call(this,c)}f("../utils").inherits(S,C),S.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var R=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,R},y.exports=S},{"../utils":32,"./ArrayReader":17}],22:[function(f,y,b){var C=f("../utils"),S=f("../support"),c=f("./ArrayReader"),R=f("./StringReader"),N=f("./NodeBufferReader"),Z=f("./Uint8ArrayReader");y.exports=function(U){var j=C.getTypeOf(U);return C.checkSupport(j),j!=="string"||S.uint8array?j==="nodebuffer"?new N(U):S.uint8array?new Z(C.transformTo("uint8array",U)):new c(C.transformTo("array",U)):new R(U)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(f,y,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(f,y,b){var C=f("./GenericWorker"),S=f("../utils");function c(R){C.call(this,"ConvertWorker to "+R),this.destType=R}S.inherits(c,C),c.prototype.processChunk=function(R){this.push({data:S.transformTo(this.destType,R.data),meta:R.meta})},y.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(f,y,b){var C=f("./GenericWorker"),S=f("../crc32");function c(){C.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}f("../utils").inherits(c,C),c.prototype.processChunk=function(R){this.streamInfo.crc32=S(R.data,this.streamInfo.crc32||0),this.push(R)},y.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(f,y,b){var C=f("../utils"),S=f("./GenericWorker");function c(R){S.call(this,"DataLengthProbe for "+R),this.propName=R,this.withStreamInfo(R,0)}C.inherits(c,S),c.prototype.processChunk=function(R){if(R){var N=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=N+R.data.length}S.prototype.processChunk.call(this,R)},y.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(f,y,b){var C=f("../utils"),S=f("./GenericWorker");function c(R){S.call(this,"DataWorker");var N=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,R.then(function(Z){N.dataIsReady=!0,N.data=Z,N.max=Z&&Z.length||0,N.type=C.getTypeOf(Z),N.isPaused||N._tickAndRepeat()},function(Z){N.error(Z)})}C.inherits(c,S),c.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,C.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(C.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var R=null,N=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":R=this.data.substring(this.index,N);break;case"uint8array":R=this.data.subarray(this.index,N);break;case"array":case"nodebuffer":R=this.data.slice(this.index,N)}return this.index=N,this.push({data:R,meta:{percent:this.max?this.index/this.max*100:0}})},y.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(f,y,b){function C(S){this.name=S||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}C.prototype={push:function(S){this.emit("data",S)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(S){this.emit("error",S)}return!0},error:function(S){return!this.isFinished&&(this.isPaused?this.generatedError=S:(this.isFinished=!0,this.emit("error",S),this.previous&&this.previous.error(S),this.cleanUp()),!0)},on:function(S,c){return this._listeners[S].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(S,c){if(this._listeners[S])for(var R=0;R<this._listeners[S].length;R++)this._listeners[S][R].call(this,c)},pipe:function(S){return S.registerPrevious(this)},registerPrevious:function(S){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=S.streamInfo,this.mergeStreamInfo(),this.previous=S;var c=this;return S.on("data",function(R){c.processChunk(R)}),S.on("end",function(){c.end()}),S.on("error",function(R){c.error(R)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var S=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),S=!0),this.previous&&this.previous.resume(),!S},flush:function(){},processChunk:function(S){this.push(S)},withStreamInfo:function(S,c){return this.extraStreamInfo[S]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var S in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,S)&&(this.streamInfo[S]=this.extraStreamInfo[S])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var S="Worker "+this.name;return this.previous?this.previous+" -> "+S:S}},y.exports=C},{}],29:[function(f,y,b){var C=f("../utils"),S=f("./ConvertWorker"),c=f("./GenericWorker"),R=f("../base64"),N=f("../support"),Z=f("../external"),U=null;if(N.nodestream)try{U=f("../nodejs/NodejsStreamOutputAdapter")}catch{}function j(se,J){return new Z.Promise(function(oe,re){var pe=[],ge=se._internalType,Oe=se._outputType,ve=se._mimeType;se.on("data",function(Ge,je){pe.push(Ge),J&&J(je)}).on("error",function(Ge){pe=[],re(Ge)}).on("end",function(){try{var Ge=function(je,St,at){switch(je){case"blob":return C.newBlob(C.transformTo("arraybuffer",St),at);case"base64":return R.encode(St);default:return C.transformTo(je,St)}}(Oe,function(je,St){var at,Mt=0,xt=null,xe=0;for(at=0;at<St.length;at++)xe+=St[at].length;switch(je){case"string":return St.join("");case"array":return Array.prototype.concat.apply([],St);case"uint8array":for(xt=new Uint8Array(xe),at=0;at<St.length;at++)xt.set(St[at],Mt),Mt+=St[at].length;return xt;case"nodebuffer":return Buffer.concat(St);default:throw new Error("concat : unsupported type '"+je+"'")}}(ge,pe),ve);oe(Ge)}catch(je){re(je)}pe=[]}).resume()})}function G(se,J,oe){var re=J;switch(J){case"blob":case"arraybuffer":re="uint8array";break;case"base64":re="string"}try{this._internalType=re,this._outputType=J,this._mimeType=oe,C.checkSupport(re),this._worker=se.pipe(new S(re)),se.lock()}catch(pe){this._worker=new c("error"),this._worker.error(pe)}}G.prototype={accumulate:function(se){return j(this,se)},on:function(se,J){var oe=this;return se==="data"?this._worker.on(se,function(re){J.call(oe,re.data,re.meta)}):this._worker.on(se,function(){C.delay(J,arguments,oe)}),this},resume:function(){return C.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(se){if(C.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new U(this,{objectMode:this._outputType!=="nodebuffer"},se)}},y.exports=G},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(f,y,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=typeof Buffer<"u",b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var C=new ArrayBuffer(0);try{b.blob=new Blob([C],{type:"application/zip"}).size===0}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);S.append(C),b.blob=S.getBlob("application/zip").size===0}catch{b.blob=!1}}}try{b.nodestream=!!f("readable-stream").Readable}catch{b.nodestream=!1}},{"readable-stream":16}],31:[function(f,y,b){for(var C=f("./utils"),S=f("./support"),c=f("./nodejsUtils"),R=f("./stream/GenericWorker"),N=new Array(256),Z=0;Z<256;Z++)N[Z]=252<=Z?6:248<=Z?5:240<=Z?4:224<=Z?3:192<=Z?2:1;N[254]=N[254]=1;function U(){R.call(this,"utf-8 decode"),this.leftOver=null}function j(){R.call(this,"utf-8 encode")}b.utf8encode=function(G){return S.nodebuffer?c.newBufferFrom(G,"utf-8"):function(se){var J,oe,re,pe,ge,Oe=se.length,ve=0;for(pe=0;pe<Oe;pe++)(64512&(oe=se.charCodeAt(pe)))==55296&&pe+1<Oe&&(64512&(re=se.charCodeAt(pe+1)))==56320&&(oe=65536+(oe-55296<<10)+(re-56320),pe++),ve+=oe<128?1:oe<2048?2:oe<65536?3:4;for(J=S.uint8array?new Uint8Array(ve):new Array(ve),pe=ge=0;ge<ve;pe++)(64512&(oe=se.charCodeAt(pe)))==55296&&pe+1<Oe&&(64512&(re=se.charCodeAt(pe+1)))==56320&&(oe=65536+(oe-55296<<10)+(re-56320),pe++),oe<128?J[ge++]=oe:(oe<2048?J[ge++]=192|oe>>>6:(oe<65536?J[ge++]=224|oe>>>12:(J[ge++]=240|oe>>>18,J[ge++]=128|oe>>>12&63),J[ge++]=128|oe>>>6&63),J[ge++]=128|63&oe);return J}(G)},b.utf8decode=function(G){return S.nodebuffer?C.transformTo("nodebuffer",G).toString("utf-8"):function(se){var J,oe,re,pe,ge=se.length,Oe=new Array(2*ge);for(J=oe=0;J<ge;)if((re=se[J++])<128)Oe[oe++]=re;else if(4<(pe=N[re]))Oe[oe++]=65533,J+=pe-1;else{for(re&=pe===2?31:pe===3?15:7;1<pe&&J<ge;)re=re<<6|63&se[J++],pe--;1<pe?Oe[oe++]=65533:re<65536?Oe[oe++]=re:(re-=65536,Oe[oe++]=55296|re>>10&1023,Oe[oe++]=56320|1023&re)}return Oe.length!==oe&&(Oe.subarray?Oe=Oe.subarray(0,oe):Oe.length=oe),C.applyFromCharCode(Oe)}(G=C.transformTo(S.uint8array?"uint8array":"array",G))},C.inherits(U,R),U.prototype.processChunk=function(G){var se=C.transformTo(S.uint8array?"uint8array":"array",G.data);if(this.leftOver&&this.leftOver.length){if(S.uint8array){var J=se;(se=new Uint8Array(J.length+this.leftOver.length)).set(this.leftOver,0),se.set(J,this.leftOver.length)}else se=this.leftOver.concat(se);this.leftOver=null}var oe=function(pe,ge){var Oe;for((ge=ge||pe.length)>pe.length&&(ge=pe.length),Oe=ge-1;0<=Oe&&(192&pe[Oe])==128;)Oe--;return Oe<0||Oe===0?ge:Oe+N[pe[Oe]]>ge?Oe:ge}(se),re=se;oe!==se.length&&(S.uint8array?(re=se.subarray(0,oe),this.leftOver=se.subarray(oe,se.length)):(re=se.slice(0,oe),this.leftOver=se.slice(oe,se.length))),this.push({data:b.utf8decode(re),meta:G.meta})},U.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=U,C.inherits(j,R),j.prototype.processChunk=function(G){this.push({data:b.utf8encode(G.data),meta:G.meta})},b.Utf8EncodeWorker=j},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(f,y,b){var C=f("./support"),S=f("./base64"),c=f("./nodejsUtils"),R=f("./external");function N(J){return J}function Z(J,oe){for(var re=0;re<J.length;++re)oe[re]=255&J.charCodeAt(re);return oe}f("setimmediate"),b.newBlob=function(J,oe){b.checkSupport("blob");try{return new Blob([J],{type:oe})}catch{try{var re=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return re.append(J),re.getBlob(oe)}catch{throw new Error("Bug : can't construct the Blob.")}}};var U={stringifyByChunk:function(J,oe,re){var pe=[],ge=0,Oe=J.length;if(Oe<=re)return String.fromCharCode.apply(null,J);for(;ge<Oe;)oe==="array"||oe==="nodebuffer"?pe.push(String.fromCharCode.apply(null,J.slice(ge,Math.min(ge+re,Oe)))):pe.push(String.fromCharCode.apply(null,J.subarray(ge,Math.min(ge+re,Oe)))),ge+=re;return pe.join("")},stringifyByChar:function(J){for(var oe="",re=0;re<J.length;re++)oe+=String.fromCharCode(J[re]);return oe},applyCanBeUsed:{uint8array:function(){try{return C.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return C.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}}()}};function j(J){var oe=65536,re=b.getTypeOf(J),pe=!0;if(re==="uint8array"?pe=U.applyCanBeUsed.uint8array:re==="nodebuffer"&&(pe=U.applyCanBeUsed.nodebuffer),pe)for(;1<oe;)try{return U.stringifyByChunk(J,re,oe)}catch{oe=Math.floor(oe/2)}return U.stringifyByChar(J)}function G(J,oe){for(var re=0;re<J.length;re++)oe[re]=J[re];return oe}b.applyFromCharCode=j;var se={};se.string={string:N,array:function(J){return Z(J,new Array(J.length))},arraybuffer:function(J){return se.string.uint8array(J).buffer},uint8array:function(J){return Z(J,new Uint8Array(J.length))},nodebuffer:function(J){return Z(J,c.allocBuffer(J.length))}},se.array={string:j,array:N,arraybuffer:function(J){return new Uint8Array(J).buffer},uint8array:function(J){return new Uint8Array(J)},nodebuffer:function(J){return c.newBufferFrom(J)}},se.arraybuffer={string:function(J){return j(new Uint8Array(J))},array:function(J){return G(new Uint8Array(J),new Array(J.byteLength))},arraybuffer:N,uint8array:function(J){return new Uint8Array(J)},nodebuffer:function(J){return c.newBufferFrom(new Uint8Array(J))}},se.uint8array={string:j,array:function(J){return G(J,new Array(J.length))},arraybuffer:function(J){return J.buffer},uint8array:N,nodebuffer:function(J){return c.newBufferFrom(J)}},se.nodebuffer={string:j,array:function(J){return G(J,new Array(J.length))},arraybuffer:function(J){return se.nodebuffer.uint8array(J).buffer},uint8array:function(J){return G(J,new Uint8Array(J.length))},nodebuffer:N},b.transformTo=function(J,oe){if(oe=oe||"",!J)return oe;b.checkSupport(J);var re=b.getTypeOf(oe);return se[re][J](oe)},b.resolve=function(J){for(var oe=J.split("/"),re=[],pe=0;pe<oe.length;pe++){var ge=oe[pe];ge==="."||ge===""&&pe!==0&&pe!==oe.length-1||(ge===".."?re.pop():re.push(ge))}return re.join("/")},b.getTypeOf=function(J){return typeof J=="string"?"string":Object.prototype.toString.call(J)==="[object Array]"?"array":C.nodebuffer&&c.isBuffer(J)?"nodebuffer":C.uint8array&&J instanceof Uint8Array?"uint8array":C.arraybuffer&&J instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(J){if(!C[J.toLowerCase()])throw new Error(J+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(J){var oe,re,pe="";for(re=0;re<(J||"").length;re++)pe+="\\x"+((oe=J.charCodeAt(re))<16?"0":"")+oe.toString(16).toUpperCase();return pe},b.delay=function(J,oe,re){setImmediate(function(){J.apply(re||null,oe||[])})},b.inherits=function(J,oe){function re(){}re.prototype=oe.prototype,J.prototype=new re},b.extend=function(){var J,oe,re={};for(J=0;J<arguments.length;J++)for(oe in arguments[J])Object.prototype.hasOwnProperty.call(arguments[J],oe)&&re[oe]===void 0&&(re[oe]=arguments[J][oe]);return re},b.prepareContent=function(J,oe,re,pe,ge){return R.Promise.resolve(oe).then(function(Oe){return C.blob&&(Oe instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Oe))!==-1)&&typeof FileReader<"u"?new R.Promise(function(ve,Ge){var je=new FileReader;je.onload=function(St){ve(St.target.result)},je.onerror=function(St){Ge(St.target.error)},je.readAsArrayBuffer(Oe)}):Oe}).then(function(Oe){var ve=b.getTypeOf(Oe);return ve?(ve==="arraybuffer"?Oe=b.transformTo("uint8array",Oe):ve==="string"&&(ge?Oe=S.decode(Oe):re&&pe!==!0&&(Oe=function(Ge){return Z(Ge,C.uint8array?new Uint8Array(Ge.length):new Array(Ge.length))}(Oe))),Oe):R.Promise.reject(new Error("Can't read the data of '"+J+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(f,y,b){var C=f("./reader/readerFor"),S=f("./utils"),c=f("./signature"),R=f("./zipEntry"),N=f("./support");function Z(U){this.files=[],this.loadOptions=U}Z.prototype={checkSignature:function(U){if(!this.reader.readAndCheckSignature(U)){this.reader.index-=4;var j=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+S.pretty(j)+", expected "+S.pretty(U)+")")}},isSignature:function(U,j){var G=this.reader.index;this.reader.setIndex(U);var se=this.reader.readString(4)===j;return this.reader.setIndex(G),se},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var U=this.reader.readData(this.zipCommentLength),j=N.uint8array?"uint8array":"array",G=S.transformTo(j,U);this.zipComment=this.loadOptions.decodeFileName(G)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var U,j,G,se=this.zip64EndOfCentralSize-44;0<se;)U=this.reader.readInt(2),j=this.reader.readInt(4),G=this.reader.readData(j),this.zip64ExtensibleData[U]={id:U,length:j,value:G}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var U,j;for(U=0;U<this.files.length;U++)j=this.files[U],this.reader.setIndex(j.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),j.readLocalPart(this.reader),j.handleUTF8(),j.processAttributes()},readCentralDir:function(){var U;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(U=new R({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(U);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var U=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(U<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(U);var j=U;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===S.MAX_VALUE_16BITS||this.diskWithCentralDirStart===S.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===S.MAX_VALUE_16BITS||this.centralDirRecords===S.MAX_VALUE_16BITS||this.centralDirSize===S.MAX_VALUE_32BITS||this.centralDirOffset===S.MAX_VALUE_32BITS){if(this.zip64=!0,(U=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(U),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var G=this.centralDirOffset+this.centralDirSize;this.zip64&&(G+=20,G+=12+this.zip64EndOfCentralSize);var se=j-G;if(0<se)this.isSignature(j,c.CENTRAL_FILE_HEADER)||(this.reader.zero=se);else if(se<0)throw new Error("Corrupted zip: missing "+Math.abs(se)+" bytes.")},prepareReader:function(U){this.reader=C(U)},load:function(U){this.prepareReader(U),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},y.exports=Z},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(f,y,b){var C=f("./reader/readerFor"),S=f("./utils"),c=f("./compressedObject"),R=f("./crc32"),N=f("./utf8"),Z=f("./compressions"),U=f("./support");function j(G,se){this.options=G,this.loadOptions=se}j.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(G){var se,J;if(G.skip(22),this.fileNameLength=G.readInt(2),J=G.readInt(2),this.fileName=G.readData(this.fileNameLength),G.skip(J),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((se=function(oe){for(var re in Z)if(Object.prototype.hasOwnProperty.call(Z,re)&&Z[re].magic===oe)return Z[re];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+S.pretty(this.compressionMethod)+" unknown (inner file : "+S.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,se,G.readData(this.compressedSize))},readCentralPart:function(G){this.versionMadeBy=G.readInt(2),G.skip(2),this.bitFlag=G.readInt(2),this.compressionMethod=G.readString(2),this.date=G.readDate(),this.crc32=G.readInt(4),this.compressedSize=G.readInt(4),this.uncompressedSize=G.readInt(4);var se=G.readInt(2);if(this.extraFieldsLength=G.readInt(2),this.fileCommentLength=G.readInt(2),this.diskNumberStart=G.readInt(2),this.internalFileAttributes=G.readInt(2),this.externalFileAttributes=G.readInt(4),this.localHeaderOffset=G.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");G.skip(se),this.readExtraFields(G),this.parseZIP64ExtraField(G),this.fileComment=G.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var G=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),G==0&&(this.dosPermissions=63&this.externalFileAttributes),G==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var G=C(this.extraFields[1].value);this.uncompressedSize===S.MAX_VALUE_32BITS&&(this.uncompressedSize=G.readInt(8)),this.compressedSize===S.MAX_VALUE_32BITS&&(this.compressedSize=G.readInt(8)),this.localHeaderOffset===S.MAX_VALUE_32BITS&&(this.localHeaderOffset=G.readInt(8)),this.diskNumberStart===S.MAX_VALUE_32BITS&&(this.diskNumberStart=G.readInt(4))}},readExtraFields:function(G){var se,J,oe,re=G.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});G.index+4<re;)se=G.readInt(2),J=G.readInt(2),oe=G.readData(J),this.extraFields[se]={id:se,length:J,value:oe};G.setIndex(re)},handleUTF8:function(){var G=U.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=N.utf8decode(this.fileName),this.fileCommentStr=N.utf8decode(this.fileComment);else{var se=this.findExtraFieldUnicodePath();if(se!==null)this.fileNameStr=se;else{var J=S.transformTo(G,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(J)}var oe=this.findExtraFieldUnicodeComment();if(oe!==null)this.fileCommentStr=oe;else{var re=S.transformTo(G,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(re)}}},findExtraFieldUnicodePath:function(){var G=this.extraFields[28789];if(G){var se=C(G.value);return se.readInt(1)!==1||R(this.fileName)!==se.readInt(4)?null:N.utf8decode(se.readData(G.length-5))}return null},findExtraFieldUnicodeComment:function(){var G=this.extraFields[25461];if(G){var se=C(G.value);return se.readInt(1)!==1||R(this.fileComment)!==se.readInt(4)?null:N.utf8decode(se.readData(G.length-5))}return null}},y.exports=j},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(f,y,b){function C(se,J,oe){this.name=se,this.dir=oe.dir,this.date=oe.date,this.comment=oe.comment,this.unixPermissions=oe.unixPermissions,this.dosPermissions=oe.dosPermissions,this._data=J,this._dataBinary=oe.binary,this.options={compression:oe.compression,compressionOptions:oe.compressionOptions}}var S=f("./stream/StreamHelper"),c=f("./stream/DataWorker"),R=f("./utf8"),N=f("./compressedObject"),Z=f("./stream/GenericWorker");C.prototype={internalStream:function(se){var J=null,oe="string";try{if(!se)throw new Error("No output type specified.");var re=(oe=se.toLowerCase())==="string"||oe==="text";oe!=="binarystring"&&oe!=="text"||(oe="string"),J=this._decompressWorker();var pe=!this._dataBinary;pe&&!re&&(J=J.pipe(new R.Utf8EncodeWorker)),!pe&&re&&(J=J.pipe(new R.Utf8DecodeWorker))}catch(ge){(J=new Z("error")).error(ge)}return new S(J,oe,"")},async:function(se,J){return this.internalStream(se).accumulate(J)},nodeStream:function(se,J){return this.internalStream(se||"nodebuffer").toNodejsStream(J)},_compressWorker:function(se,J){if(this._data instanceof N&&this._data.compression.magic===se.magic)return this._data.getCompressedWorker();var oe=this._decompressWorker();return this._dataBinary||(oe=oe.pipe(new R.Utf8EncodeWorker)),N.createWorkerFrom(oe,se,J)},_decompressWorker:function(){return this._data instanceof N?this._data.getContentWorker():this._data instanceof Z?this._data:new c(this._data)}};for(var U=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],j=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},G=0;G<U.length;G++)C.prototype[U[G]]=j;y.exports=C},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(f,y,b){(function(C){var S,c,R=C.MutationObserver||C.WebKitMutationObserver;if(R){var N=0,Z=new R(se),U=C.document.createTextNode("");Z.observe(U,{characterData:!0}),S=function(){U.data=N=++N%2}}else if(C.setImmediate||C.MessageChannel===void 0)S="document"in C&&"onreadystatechange"in C.document.createElement("script")?function(){var J=C.document.createElement("script");J.onreadystatechange=function(){se(),J.onreadystatechange=null,J.parentNode.removeChild(J),J=null},C.document.documentElement.appendChild(J)}:function(){setTimeout(se,0)};else{var j=new C.MessageChannel;j.port1.onmessage=se,S=function(){j.port2.postMessage(0)}}var G=[];function se(){var J,oe;c=!0;for(var re=G.length;re;){for(oe=G,G=[],J=-1;++J<re;)oe[J]();re=G.length}c=!1}y.exports=function(J){G.push(J)!==1||c||S()}}).call(this,typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(f,y,b){var C=f("immediate");function S(){}var c={},R=["REJECTED"],N=["FULFILLED"],Z=["PENDING"];function U(re){if(typeof re!="function")throw new TypeError("resolver must be a function");this.state=Z,this.queue=[],this.outcome=void 0,re!==S&&J(this,re)}function j(re,pe,ge){this.promise=re,typeof pe=="function"&&(this.onFulfilled=pe,this.callFulfilled=this.otherCallFulfilled),typeof ge=="function"&&(this.onRejected=ge,this.callRejected=this.otherCallRejected)}function G(re,pe,ge){C(function(){var Oe;try{Oe=pe(ge)}catch(ve){return c.reject(re,ve)}Oe===re?c.reject(re,new TypeError("Cannot resolve promise with itself")):c.resolve(re,Oe)})}function se(re){var pe=re&&re.then;if(re&&(typeof re=="object"||typeof re=="function")&&typeof pe=="function")return function(){pe.apply(re,arguments)}}function J(re,pe){var ge=!1;function Oe(je){ge||(ge=!0,c.reject(re,je))}function ve(je){ge||(ge=!0,c.resolve(re,je))}var Ge=oe(function(){pe(ve,Oe)});Ge.status==="error"&&Oe(Ge.value)}function oe(re,pe){var ge={};try{ge.value=re(pe),ge.status="success"}catch(Oe){ge.status="error",ge.value=Oe}return ge}(y.exports=U).prototype.finally=function(re){if(typeof re!="function")return this;var pe=this.constructor;return this.then(function(ge){return pe.resolve(re()).then(function(){return ge})},function(ge){return pe.resolve(re()).then(function(){throw ge})})},U.prototype.catch=function(re){return this.then(null,re)},U.prototype.then=function(re,pe){if(typeof re!="function"&&this.state===N||typeof pe!="function"&&this.state===R)return this;var ge=new this.constructor(S);return this.state!==Z?G(ge,this.state===N?re:pe,this.outcome):this.queue.push(new j(ge,re,pe)),ge},j.prototype.callFulfilled=function(re){c.resolve(this.promise,re)},j.prototype.otherCallFulfilled=function(re){G(this.promise,this.onFulfilled,re)},j.prototype.callRejected=function(re){c.reject(this.promise,re)},j.prototype.otherCallRejected=function(re){G(this.promise,this.onRejected,re)},c.resolve=function(re,pe){var ge=oe(se,pe);if(ge.status==="error")return c.reject(re,ge.value);var Oe=ge.value;if(Oe)J(re,Oe);else{re.state=N,re.outcome=pe;for(var ve=-1,Ge=re.queue.length;++ve<Ge;)re.queue[ve].callFulfilled(pe)}return re},c.reject=function(re,pe){re.state=R,re.outcome=pe;for(var ge=-1,Oe=re.queue.length;++ge<Oe;)re.queue[ge].callRejected(pe);return re},U.resolve=function(re){return re instanceof this?re:c.resolve(new this(S),re)},U.reject=function(re){var pe=new this(S);return c.reject(pe,re)},U.all=function(re){var pe=this;if(Object.prototype.toString.call(re)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ge=re.length,Oe=!1;if(!ge)return this.resolve([]);for(var ve=new Array(ge),Ge=0,je=-1,St=new this(S);++je<ge;)at(re[je],je);return St;function at(Mt,xt){pe.resolve(Mt).then(function(xe){ve[xt]=xe,++Ge!==ge||Oe||(Oe=!0,c.resolve(St,ve))},function(xe){Oe||(Oe=!0,c.reject(St,xe))})}},U.race=function(re){var pe=this;if(Object.prototype.toString.call(re)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ge=re.length,Oe=!1;if(!ge)return this.resolve([]);for(var ve=-1,Ge=new this(S);++ve<ge;)je=re[ve],pe.resolve(je).then(function(St){Oe||(Oe=!0,c.resolve(Ge,St))},function(St){Oe||(Oe=!0,c.reject(Ge,St))});var je;return Ge}},{immediate:36}],38:[function(f,y,b){var C={};(0,f("./lib/utils/common").assign)(C,f("./lib/deflate"),f("./lib/inflate"),f("./lib/zlib/constants")),y.exports=C},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(f,y,b){var C=f("./zlib/deflate"),S=f("./utils/common"),c=f("./utils/strings"),R=f("./zlib/messages"),N=f("./zlib/zstream"),Z=Object.prototype.toString,U=0,j=-1,G=0,se=8;function J(re){if(!(this instanceof J))return new J(re);this.options=S.assign({level:j,method:se,chunkSize:16384,windowBits:15,memLevel:8,strategy:G,to:""},re||{});var pe=this.options;pe.raw&&0<pe.windowBits?pe.windowBits=-pe.windowBits:pe.gzip&&0<pe.windowBits&&pe.windowBits<16&&(pe.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new N,this.strm.avail_out=0;var ge=C.deflateInit2(this.strm,pe.level,pe.method,pe.windowBits,pe.memLevel,pe.strategy);if(ge!==U)throw new Error(R[ge]);if(pe.header&&C.deflateSetHeader(this.strm,pe.header),pe.dictionary){var Oe;if(Oe=typeof pe.dictionary=="string"?c.string2buf(pe.dictionary):Z.call(pe.dictionary)==="[object ArrayBuffer]"?new Uint8Array(pe.dictionary):pe.dictionary,(ge=C.deflateSetDictionary(this.strm,Oe))!==U)throw new Error(R[ge]);this._dict_set=!0}}function oe(re,pe){var ge=new J(pe);if(ge.push(re,!0),ge.err)throw ge.msg||R[ge.err];return ge.result}J.prototype.push=function(re,pe){var ge,Oe,ve=this.strm,Ge=this.options.chunkSize;if(this.ended)return!1;Oe=pe===~~pe?pe:pe===!0?4:0,typeof re=="string"?ve.input=c.string2buf(re):Z.call(re)==="[object ArrayBuffer]"?ve.input=new Uint8Array(re):ve.input=re,ve.next_in=0,ve.avail_in=ve.input.length;do{if(ve.avail_out===0&&(ve.output=new S.Buf8(Ge),ve.next_out=0,ve.avail_out=Ge),(ge=C.deflate(ve,Oe))!==1&&ge!==U)return this.onEnd(ge),!(this.ended=!0);ve.avail_out!==0&&(ve.avail_in!==0||Oe!==4&&Oe!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(S.shrinkBuf(ve.output,ve.next_out))):this.onData(S.shrinkBuf(ve.output,ve.next_out)))}while((0<ve.avail_in||ve.avail_out===0)&&ge!==1);return Oe===4?(ge=C.deflateEnd(this.strm),this.onEnd(ge),this.ended=!0,ge===U):Oe!==2||(this.onEnd(U),!(ve.avail_out=0))},J.prototype.onData=function(re){this.chunks.push(re)},J.prototype.onEnd=function(re){re===U&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=re,this.msg=this.strm.msg},b.Deflate=J,b.deflate=oe,b.deflateRaw=function(re,pe){return(pe=pe||{}).raw=!0,oe(re,pe)},b.gzip=function(re,pe){return(pe=pe||{}).gzip=!0,oe(re,pe)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(f,y,b){var C=f("./zlib/inflate"),S=f("./utils/common"),c=f("./utils/strings"),R=f("./zlib/constants"),N=f("./zlib/messages"),Z=f("./zlib/zstream"),U=f("./zlib/gzheader"),j=Object.prototype.toString;function G(J){if(!(this instanceof G))return new G(J);this.options=S.assign({chunkSize:16384,windowBits:0,to:""},J||{});var oe=this.options;oe.raw&&0<=oe.windowBits&&oe.windowBits<16&&(oe.windowBits=-oe.windowBits,oe.windowBits===0&&(oe.windowBits=-15)),!(0<=oe.windowBits&&oe.windowBits<16)||J&&J.windowBits||(oe.windowBits+=32),15<oe.windowBits&&oe.windowBits<48&&(15&oe.windowBits)==0&&(oe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Z,this.strm.avail_out=0;var re=C.inflateInit2(this.strm,oe.windowBits);if(re!==R.Z_OK)throw new Error(N[re]);this.header=new U,C.inflateGetHeader(this.strm,this.header)}function se(J,oe){var re=new G(oe);if(re.push(J,!0),re.err)throw re.msg||N[re.err];return re.result}G.prototype.push=function(J,oe){var re,pe,ge,Oe,ve,Ge,je=this.strm,St=this.options.chunkSize,at=this.options.dictionary,Mt=!1;if(this.ended)return!1;pe=oe===~~oe?oe:oe===!0?R.Z_FINISH:R.Z_NO_FLUSH,typeof J=="string"?je.input=c.binstring2buf(J):j.call(J)==="[object ArrayBuffer]"?je.input=new Uint8Array(J):je.input=J,je.next_in=0,je.avail_in=je.input.length;do{if(je.avail_out===0&&(je.output=new S.Buf8(St),je.next_out=0,je.avail_out=St),(re=C.inflate(je,R.Z_NO_FLUSH))===R.Z_NEED_DICT&&at&&(Ge=typeof at=="string"?c.string2buf(at):j.call(at)==="[object ArrayBuffer]"?new Uint8Array(at):at,re=C.inflateSetDictionary(this.strm,Ge)),re===R.Z_BUF_ERROR&&Mt===!0&&(re=R.Z_OK,Mt=!1),re!==R.Z_STREAM_END&&re!==R.Z_OK)return this.onEnd(re),!(this.ended=!0);je.next_out&&(je.avail_out!==0&&re!==R.Z_STREAM_END&&(je.avail_in!==0||pe!==R.Z_FINISH&&pe!==R.Z_SYNC_FLUSH)||(this.options.to==="string"?(ge=c.utf8border(je.output,je.next_out),Oe=je.next_out-ge,ve=c.buf2string(je.output,ge),je.next_out=Oe,je.avail_out=St-Oe,Oe&&S.arraySet(je.output,je.output,ge,Oe,0),this.onData(ve)):this.onData(S.shrinkBuf(je.output,je.next_out)))),je.avail_in===0&&je.avail_out===0&&(Mt=!0)}while((0<je.avail_in||je.avail_out===0)&&re!==R.Z_STREAM_END);return re===R.Z_STREAM_END&&(pe=R.Z_FINISH),pe===R.Z_FINISH?(re=C.inflateEnd(this.strm),this.onEnd(re),this.ended=!0,re===R.Z_OK):pe!==R.Z_SYNC_FLUSH||(this.onEnd(R.Z_OK),!(je.avail_out=0))},G.prototype.onData=function(J){this.chunks.push(J)},G.prototype.onEnd=function(J){J===R.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=J,this.msg=this.strm.msg},b.Inflate=G,b.inflate=se,b.inflateRaw=function(J,oe){return(oe=oe||{}).raw=!0,se(J,oe)},b.ungzip=se},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(f,y,b){var C=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(R){for(var N=Array.prototype.slice.call(arguments,1);N.length;){var Z=N.shift();if(Z){if(typeof Z!="object")throw new TypeError(Z+"must be non-object");for(var U in Z)Z.hasOwnProperty(U)&&(R[U]=Z[U])}}return R},b.shrinkBuf=function(R,N){return R.length===N?R:R.subarray?R.subarray(0,N):(R.length=N,R)};var S={arraySet:function(R,N,Z,U,j){if(N.subarray&&R.subarray)R.set(N.subarray(Z,Z+U),j);else for(var G=0;G<U;G++)R[j+G]=N[Z+G]},flattenChunks:function(R){var N,Z,U,j,G,se;for(N=U=0,Z=R.length;N<Z;N++)U+=R[N].length;for(se=new Uint8Array(U),N=j=0,Z=R.length;N<Z;N++)G=R[N],se.set(G,j),j+=G.length;return se}},c={arraySet:function(R,N,Z,U,j){for(var G=0;G<U;G++)R[j+G]=N[Z+G]},flattenChunks:function(R){return[].concat.apply([],R)}};b.setTyped=function(R){R?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,S)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,c))},b.setTyped(C)},{}],42:[function(f,y,b){var C=f("./common"),S=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{S=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var R=new C.Buf8(256),N=0;N<256;N++)R[N]=252<=N?6:248<=N?5:240<=N?4:224<=N?3:192<=N?2:1;function Z(U,j){if(j<65537&&(U.subarray&&c||!U.subarray&&S))return String.fromCharCode.apply(null,C.shrinkBuf(U,j));for(var G="",se=0;se<j;se++)G+=String.fromCharCode(U[se]);return G}R[254]=R[254]=1,b.string2buf=function(U){var j,G,se,J,oe,re=U.length,pe=0;for(J=0;J<re;J++)(64512&(G=U.charCodeAt(J)))==55296&&J+1<re&&(64512&(se=U.charCodeAt(J+1)))==56320&&(G=65536+(G-55296<<10)+(se-56320),J++),pe+=G<128?1:G<2048?2:G<65536?3:4;for(j=new C.Buf8(pe),J=oe=0;oe<pe;J++)(64512&(G=U.charCodeAt(J)))==55296&&J+1<re&&(64512&(se=U.charCodeAt(J+1)))==56320&&(G=65536+(G-55296<<10)+(se-56320),J++),G<128?j[oe++]=G:(G<2048?j[oe++]=192|G>>>6:(G<65536?j[oe++]=224|G>>>12:(j[oe++]=240|G>>>18,j[oe++]=128|G>>>12&63),j[oe++]=128|G>>>6&63),j[oe++]=128|63&G);return j},b.buf2binstring=function(U){return Z(U,U.length)},b.binstring2buf=function(U){for(var j=new C.Buf8(U.length),G=0,se=j.length;G<se;G++)j[G]=U.charCodeAt(G);return j},b.buf2string=function(U,j){var G,se,J,oe,re=j||U.length,pe=new Array(2*re);for(G=se=0;G<re;)if((J=U[G++])<128)pe[se++]=J;else if(4<(oe=R[J]))pe[se++]=65533,G+=oe-1;else{for(J&=oe===2?31:oe===3?15:7;1<oe&&G<re;)J=J<<6|63&U[G++],oe--;1<oe?pe[se++]=65533:J<65536?pe[se++]=J:(J-=65536,pe[se++]=55296|J>>10&1023,pe[se++]=56320|1023&J)}return Z(pe,se)},b.utf8border=function(U,j){var G;for((j=j||U.length)>U.length&&(j=U.length),G=j-1;0<=G&&(192&U[G])==128;)G--;return G<0||G===0?j:G+R[U[G]]>j?G:j}},{"./common":41}],43:[function(f,y,b){y.exports=function(C,S,c,R){for(var N=65535&C|0,Z=C>>>16&65535|0,U=0;c!==0;){for(c-=U=2e3<c?2e3:c;Z=Z+(N=N+S[R++]|0)|0,--U;);N%=65521,Z%=65521}return N|Z<<16|0}},{}],44:[function(f,y,b){y.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(f,y,b){var C=function(){for(var S,c=[],R=0;R<256;R++){S=R;for(var N=0;N<8;N++)S=1&S?3988292384^S>>>1:S>>>1;c[R]=S}return c}();y.exports=function(S,c,R,N){var Z=C,U=N+R;S^=-1;for(var j=N;j<U;j++)S=S>>>8^Z[255&(S^c[j])];return-1^S}},{}],46:[function(f,y,b){var C,S=f("../utils/common"),c=f("./trees"),R=f("./adler32"),N=f("./crc32"),Z=f("./messages"),U=0,j=4,G=0,se=-2,J=-1,oe=4,re=2,pe=8,ge=9,Oe=286,ve=30,Ge=19,je=2*Oe+1,St=15,at=3,Mt=258,xt=Mt+at+1,xe=42,Je=113,W=1,Ve=2,zt=3,Me=4;function et(Y,ft){return Y.msg=Z[ft],ft}function Ze(Y){return(Y<<1)-(4<Y?9:0)}function ht(Y){for(var ft=Y.length;0<=--ft;)Y[ft]=0}function ae(Y){var ft=Y.state,ye=ft.pending;ye>Y.avail_out&&(ye=Y.avail_out),ye!==0&&(S.arraySet(Y.output,ft.pending_buf,ft.pending_out,ye,Y.next_out),Y.next_out+=ye,ft.pending_out+=ye,Y.total_out+=ye,Y.avail_out-=ye,ft.pending-=ye,ft.pending===0&&(ft.pending_out=0))}function _e(Y,ft){c._tr_flush_block(Y,0<=Y.block_start?Y.block_start:-1,Y.strstart-Y.block_start,ft),Y.block_start=Y.strstart,ae(Y.strm)}function Ct(Y,ft){Y.pending_buf[Y.pending++]=ft}function bt(Y,ft){Y.pending_buf[Y.pending++]=ft>>>8&255,Y.pending_buf[Y.pending++]=255&ft}function wt(Y,ft){var ye,Ae,we=Y.max_chain_length,Ne=Y.strstart,_t=Y.prev_length,At=Y.nice_match,nt=Y.strstart>Y.w_size-xt?Y.strstart-(Y.w_size-xt):0,Dt=Y.window,nr=Y.w_mask,Lt=Y.prev,xr=Y.strstart+Mt,sn=Dt[Ne+_t-1],vt=Dt[Ne+_t];Y.prev_length>=Y.good_match&&(we>>=2),At>Y.lookahead&&(At=Y.lookahead);do if(Dt[(ye=ft)+_t]===vt&&Dt[ye+_t-1]===sn&&Dt[ye]===Dt[Ne]&&Dt[++ye]===Dt[Ne+1]){Ne+=2,ye++;do;while(Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Dt[++Ne]===Dt[++ye]&&Ne<xr);if(Ae=Mt-(xr-Ne),Ne=xr-Mt,_t<Ae){if(Y.match_start=ft,At<=(_t=Ae))break;sn=Dt[Ne+_t-1],vt=Dt[Ne+_t]}}while((ft=Lt[ft&nr])>nt&&--we!=0);return _t<=Y.lookahead?_t:Y.lookahead}function lr(Y){var ft,ye,Ae,we,Ne,_t,At,nt,Dt,nr,Lt=Y.w_size;do{if(we=Y.window_size-Y.lookahead-Y.strstart,Y.strstart>=Lt+(Lt-xt)){for(S.arraySet(Y.window,Y.window,Lt,Lt,0),Y.match_start-=Lt,Y.strstart-=Lt,Y.block_start-=Lt,ft=ye=Y.hash_size;Ae=Y.head[--ft],Y.head[ft]=Lt<=Ae?Ae-Lt:0,--ye;);for(ft=ye=Lt;Ae=Y.prev[--ft],Y.prev[ft]=Lt<=Ae?Ae-Lt:0,--ye;);we+=Lt}if(Y.strm.avail_in===0)break;if(_t=Y.strm,At=Y.window,nt=Y.strstart+Y.lookahead,Dt=we,nr=void 0,nr=_t.avail_in,Dt<nr&&(nr=Dt),ye=nr===0?0:(_t.avail_in-=nr,S.arraySet(At,_t.input,_t.next_in,nr,nt),_t.state.wrap===1?_t.adler=R(_t.adler,At,nr,nt):_t.state.wrap===2&&(_t.adler=N(_t.adler,At,nr,nt)),_t.next_in+=nr,_t.total_in+=nr,nr),Y.lookahead+=ye,Y.lookahead+Y.insert>=at)for(Ne=Y.strstart-Y.insert,Y.ins_h=Y.window[Ne],Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Ne+1])&Y.hash_mask;Y.insert&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Ne+at-1])&Y.hash_mask,Y.prev[Ne&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Ne,Ne++,Y.insert--,!(Y.lookahead+Y.insert<at)););}while(Y.lookahead<xt&&Y.strm.avail_in!==0)}function pr(Y,ft){for(var ye,Ae;;){if(Y.lookahead<xt){if(lr(Y),Y.lookahead<xt&&ft===U)return W;if(Y.lookahead===0)break}if(ye=0,Y.lookahead>=at&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+at-1])&Y.hash_mask,ye=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart),ye!==0&&Y.strstart-ye<=Y.w_size-xt&&(Y.match_length=wt(Y,ye)),Y.match_length>=at)if(Ae=c._tr_tally(Y,Y.strstart-Y.match_start,Y.match_length-at),Y.lookahead-=Y.match_length,Y.match_length<=Y.max_lazy_match&&Y.lookahead>=at){for(Y.match_length--;Y.strstart++,Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+at-1])&Y.hash_mask,ye=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart,--Y.match_length!=0;);Y.strstart++}else Y.strstart+=Y.match_length,Y.match_length=0,Y.ins_h=Y.window[Y.strstart],Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+1])&Y.hash_mask;else Ae=c._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++;if(Ae&&(_e(Y,!1),Y.strm.avail_out===0))return W}return Y.insert=Y.strstart<at-1?Y.strstart:at-1,ft===j?(_e(Y,!0),Y.strm.avail_out===0?zt:Me):Y.last_lit&&(_e(Y,!1),Y.strm.avail_out===0)?W:Ve}function Gt(Y,ft){for(var ye,Ae,we;;){if(Y.lookahead<xt){if(lr(Y),Y.lookahead<xt&&ft===U)return W;if(Y.lookahead===0)break}if(ye=0,Y.lookahead>=at&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+at-1])&Y.hash_mask,ye=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart),Y.prev_length=Y.match_length,Y.prev_match=Y.match_start,Y.match_length=at-1,ye!==0&&Y.prev_length<Y.max_lazy_match&&Y.strstart-ye<=Y.w_size-xt&&(Y.match_length=wt(Y,ye),Y.match_length<=5&&(Y.strategy===1||Y.match_length===at&&4096<Y.strstart-Y.match_start)&&(Y.match_length=at-1)),Y.prev_length>=at&&Y.match_length<=Y.prev_length){for(we=Y.strstart+Y.lookahead-at,Ae=c._tr_tally(Y,Y.strstart-1-Y.prev_match,Y.prev_length-at),Y.lookahead-=Y.prev_length-1,Y.prev_length-=2;++Y.strstart<=we&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+at-1])&Y.hash_mask,ye=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart),--Y.prev_length!=0;);if(Y.match_available=0,Y.match_length=at-1,Y.strstart++,Ae&&(_e(Y,!1),Y.strm.avail_out===0))return W}else if(Y.match_available){if((Ae=c._tr_tally(Y,0,Y.window[Y.strstart-1]))&&_e(Y,!1),Y.strstart++,Y.lookahead--,Y.strm.avail_out===0)return W}else Y.match_available=1,Y.strstart++,Y.lookahead--}return Y.match_available&&(Ae=c._tr_tally(Y,0,Y.window[Y.strstart-1]),Y.match_available=0),Y.insert=Y.strstart<at-1?Y.strstart:at-1,ft===j?(_e(Y,!0),Y.strm.avail_out===0?zt:Me):Y.last_lit&&(_e(Y,!1),Y.strm.avail_out===0)?W:Ve}function Kt(Y,ft,ye,Ae,we){this.good_length=Y,this.max_lazy=ft,this.nice_length=ye,this.max_chain=Ae,this.func=we}function Mr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*je),this.dyn_dtree=new S.Buf16(2*(2*ve+1)),this.bl_tree=new S.Buf16(2*(2*Ge+1)),ht(this.dyn_ltree),ht(this.dyn_dtree),ht(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(St+1),this.heap=new S.Buf16(2*Oe+1),ht(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*Oe+1),ht(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Vr(Y){var ft;return Y&&Y.state?(Y.total_in=Y.total_out=0,Y.data_type=re,(ft=Y.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?xe:Je,Y.adler=ft.wrap===2?0:1,ft.last_flush=U,c._tr_init(ft),G):et(Y,se)}function tn(Y){var ft=Vr(Y);return ft===G&&function(ye){ye.window_size=2*ye.w_size,ht(ye.head),ye.max_lazy_match=C[ye.level].max_lazy,ye.good_match=C[ye.level].good_length,ye.nice_match=C[ye.level].nice_length,ye.max_chain_length=C[ye.level].max_chain,ye.strstart=0,ye.block_start=0,ye.lookahead=0,ye.insert=0,ye.match_length=ye.prev_length=at-1,ye.match_available=0,ye.ins_h=0}(Y.state),ft}function Kr(Y,ft,ye,Ae,we,Ne){if(!Y)return se;var _t=1;if(ft===J&&(ft=6),Ae<0?(_t=0,Ae=-Ae):15<Ae&&(_t=2,Ae-=16),we<1||ge<we||ye!==pe||Ae<8||15<Ae||ft<0||9<ft||Ne<0||oe<Ne)return et(Y,se);Ae===8&&(Ae=9);var At=new Mr;return(Y.state=At).strm=Y,At.wrap=_t,At.gzhead=null,At.w_bits=Ae,At.w_size=1<<At.w_bits,At.w_mask=At.w_size-1,At.hash_bits=we+7,At.hash_size=1<<At.hash_bits,At.hash_mask=At.hash_size-1,At.hash_shift=~~((At.hash_bits+at-1)/at),At.window=new S.Buf8(2*At.w_size),At.head=new S.Buf16(At.hash_size),At.prev=new S.Buf16(At.w_size),At.lit_bufsize=1<<we+6,At.pending_buf_size=4*At.lit_bufsize,At.pending_buf=new S.Buf8(At.pending_buf_size),At.d_buf=1*At.lit_bufsize,At.l_buf=3*At.lit_bufsize,At.level=ft,At.strategy=Ne,At.method=ye,tn(Y)}C=[new Kt(0,0,0,0,function(Y,ft){var ye=65535;for(ye>Y.pending_buf_size-5&&(ye=Y.pending_buf_size-5);;){if(Y.lookahead<=1){if(lr(Y),Y.lookahead===0&&ft===U)return W;if(Y.lookahead===0)break}Y.strstart+=Y.lookahead,Y.lookahead=0;var Ae=Y.block_start+ye;if((Y.strstart===0||Y.strstart>=Ae)&&(Y.lookahead=Y.strstart-Ae,Y.strstart=Ae,_e(Y,!1),Y.strm.avail_out===0)||Y.strstart-Y.block_start>=Y.w_size-xt&&(_e(Y,!1),Y.strm.avail_out===0))return W}return Y.insert=0,ft===j?(_e(Y,!0),Y.strm.avail_out===0?zt:Me):(Y.strstart>Y.block_start&&(_e(Y,!1),Y.strm.avail_out),W)}),new Kt(4,4,8,4,pr),new Kt(4,5,16,8,pr),new Kt(4,6,32,32,pr),new Kt(4,4,16,16,Gt),new Kt(8,16,32,32,Gt),new Kt(8,16,128,128,Gt),new Kt(8,32,128,256,Gt),new Kt(32,128,258,1024,Gt),new Kt(32,258,258,4096,Gt)],b.deflateInit=function(Y,ft){return Kr(Y,ft,pe,15,8,0)},b.deflateInit2=Kr,b.deflateReset=tn,b.deflateResetKeep=Vr,b.deflateSetHeader=function(Y,ft){return Y&&Y.state?Y.state.wrap!==2?se:(Y.state.gzhead=ft,G):se},b.deflate=function(Y,ft){var ye,Ae,we,Ne;if(!Y||!Y.state||5<ft||ft<0)return Y?et(Y,se):se;if(Ae=Y.state,!Y.output||!Y.input&&Y.avail_in!==0||Ae.status===666&&ft!==j)return et(Y,Y.avail_out===0?-5:se);if(Ae.strm=Y,ye=Ae.last_flush,Ae.last_flush=ft,Ae.status===xe)if(Ae.wrap===2)Y.adler=0,Ct(Ae,31),Ct(Ae,139),Ct(Ae,8),Ae.gzhead?(Ct(Ae,(Ae.gzhead.text?1:0)+(Ae.gzhead.hcrc?2:0)+(Ae.gzhead.extra?4:0)+(Ae.gzhead.name?8:0)+(Ae.gzhead.comment?16:0)),Ct(Ae,255&Ae.gzhead.time),Ct(Ae,Ae.gzhead.time>>8&255),Ct(Ae,Ae.gzhead.time>>16&255),Ct(Ae,Ae.gzhead.time>>24&255),Ct(Ae,Ae.level===9?2:2<=Ae.strategy||Ae.level<2?4:0),Ct(Ae,255&Ae.gzhead.os),Ae.gzhead.extra&&Ae.gzhead.extra.length&&(Ct(Ae,255&Ae.gzhead.extra.length),Ct(Ae,Ae.gzhead.extra.length>>8&255)),Ae.gzhead.hcrc&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending,0)),Ae.gzindex=0,Ae.status=69):(Ct(Ae,0),Ct(Ae,0),Ct(Ae,0),Ct(Ae,0),Ct(Ae,0),Ct(Ae,Ae.level===9?2:2<=Ae.strategy||Ae.level<2?4:0),Ct(Ae,3),Ae.status=Je);else{var _t=pe+(Ae.w_bits-8<<4)<<8;_t|=(2<=Ae.strategy||Ae.level<2?0:Ae.level<6?1:Ae.level===6?2:3)<<6,Ae.strstart!==0&&(_t|=32),_t+=31-_t%31,Ae.status=Je,bt(Ae,_t),Ae.strstart!==0&&(bt(Ae,Y.adler>>>16),bt(Ae,65535&Y.adler)),Y.adler=1}if(Ae.status===69)if(Ae.gzhead.extra){for(we=Ae.pending;Ae.gzindex<(65535&Ae.gzhead.extra.length)&&(Ae.pending!==Ae.pending_buf_size||(Ae.gzhead.hcrc&&Ae.pending>we&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending-we,we)),ae(Y),we=Ae.pending,Ae.pending!==Ae.pending_buf_size));)Ct(Ae,255&Ae.gzhead.extra[Ae.gzindex]),Ae.gzindex++;Ae.gzhead.hcrc&&Ae.pending>we&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending-we,we)),Ae.gzindex===Ae.gzhead.extra.length&&(Ae.gzindex=0,Ae.status=73)}else Ae.status=73;if(Ae.status===73)if(Ae.gzhead.name){we=Ae.pending;do{if(Ae.pending===Ae.pending_buf_size&&(Ae.gzhead.hcrc&&Ae.pending>we&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending-we,we)),ae(Y),we=Ae.pending,Ae.pending===Ae.pending_buf_size)){Ne=1;break}Ne=Ae.gzindex<Ae.gzhead.name.length?255&Ae.gzhead.name.charCodeAt(Ae.gzindex++):0,Ct(Ae,Ne)}while(Ne!==0);Ae.gzhead.hcrc&&Ae.pending>we&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending-we,we)),Ne===0&&(Ae.gzindex=0,Ae.status=91)}else Ae.status=91;if(Ae.status===91)if(Ae.gzhead.comment){we=Ae.pending;do{if(Ae.pending===Ae.pending_buf_size&&(Ae.gzhead.hcrc&&Ae.pending>we&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending-we,we)),ae(Y),we=Ae.pending,Ae.pending===Ae.pending_buf_size)){Ne=1;break}Ne=Ae.gzindex<Ae.gzhead.comment.length?255&Ae.gzhead.comment.charCodeAt(Ae.gzindex++):0,Ct(Ae,Ne)}while(Ne!==0);Ae.gzhead.hcrc&&Ae.pending>we&&(Y.adler=N(Y.adler,Ae.pending_buf,Ae.pending-we,we)),Ne===0&&(Ae.status=103)}else Ae.status=103;if(Ae.status===103&&(Ae.gzhead.hcrc?(Ae.pending+2>Ae.pending_buf_size&&ae(Y),Ae.pending+2<=Ae.pending_buf_size&&(Ct(Ae,255&Y.adler),Ct(Ae,Y.adler>>8&255),Y.adler=0,Ae.status=Je)):Ae.status=Je),Ae.pending!==0){if(ae(Y),Y.avail_out===0)return Ae.last_flush=-1,G}else if(Y.avail_in===0&&Ze(ft)<=Ze(ye)&&ft!==j)return et(Y,-5);if(Ae.status===666&&Y.avail_in!==0)return et(Y,-5);if(Y.avail_in!==0||Ae.lookahead!==0||ft!==U&&Ae.status!==666){var At=Ae.strategy===2?function(nt,Dt){for(var nr;;){if(nt.lookahead===0&&(lr(nt),nt.lookahead===0)){if(Dt===U)return W;break}if(nt.match_length=0,nr=c._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++,nr&&(_e(nt,!1),nt.strm.avail_out===0))return W}return nt.insert=0,Dt===j?(_e(nt,!0),nt.strm.avail_out===0?zt:Me):nt.last_lit&&(_e(nt,!1),nt.strm.avail_out===0)?W:Ve}(Ae,ft):Ae.strategy===3?function(nt,Dt){for(var nr,Lt,xr,sn,vt=nt.window;;){if(nt.lookahead<=Mt){if(lr(nt),nt.lookahead<=Mt&&Dt===U)return W;if(nt.lookahead===0)break}if(nt.match_length=0,nt.lookahead>=at&&0<nt.strstart&&(Lt=vt[xr=nt.strstart-1])===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]){sn=nt.strstart+Mt;do;while(Lt===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]&&Lt===vt[++xr]&&xr<sn);nt.match_length=Mt-(sn-xr),nt.match_length>nt.lookahead&&(nt.match_length=nt.lookahead)}if(nt.match_length>=at?(nr=c._tr_tally(nt,1,nt.match_length-at),nt.lookahead-=nt.match_length,nt.strstart+=nt.match_length,nt.match_length=0):(nr=c._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++),nr&&(_e(nt,!1),nt.strm.avail_out===0))return W}return nt.insert=0,Dt===j?(_e(nt,!0),nt.strm.avail_out===0?zt:Me):nt.last_lit&&(_e(nt,!1),nt.strm.avail_out===0)?W:Ve}(Ae,ft):C[Ae.level].func(Ae,ft);if(At!==zt&&At!==Me||(Ae.status=666),At===W||At===zt)return Y.avail_out===0&&(Ae.last_flush=-1),G;if(At===Ve&&(ft===1?c._tr_align(Ae):ft!==5&&(c._tr_stored_block(Ae,0,0,!1),ft===3&&(ht(Ae.head),Ae.lookahead===0&&(Ae.strstart=0,Ae.block_start=0,Ae.insert=0))),ae(Y),Y.avail_out===0))return Ae.last_flush=-1,G}return ft!==j?G:Ae.wrap<=0?1:(Ae.wrap===2?(Ct(Ae,255&Y.adler),Ct(Ae,Y.adler>>8&255),Ct(Ae,Y.adler>>16&255),Ct(Ae,Y.adler>>24&255),Ct(Ae,255&Y.total_in),Ct(Ae,Y.total_in>>8&255),Ct(Ae,Y.total_in>>16&255),Ct(Ae,Y.total_in>>24&255)):(bt(Ae,Y.adler>>>16),bt(Ae,65535&Y.adler)),ae(Y),0<Ae.wrap&&(Ae.wrap=-Ae.wrap),Ae.pending!==0?G:1)},b.deflateEnd=function(Y){var ft;return Y&&Y.state?(ft=Y.state.status)!==xe&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==Je&&ft!==666?et(Y,se):(Y.state=null,ft===Je?et(Y,-3):G):se},b.deflateSetDictionary=function(Y,ft){var ye,Ae,we,Ne,_t,At,nt,Dt,nr=ft.length;if(!Y||!Y.state||(Ne=(ye=Y.state).wrap)===2||Ne===1&&ye.status!==xe||ye.lookahead)return se;for(Ne===1&&(Y.adler=R(Y.adler,ft,nr,0)),ye.wrap=0,nr>=ye.w_size&&(Ne===0&&(ht(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),Dt=new S.Buf8(ye.w_size),S.arraySet(Dt,ft,nr-ye.w_size,ye.w_size,0),ft=Dt,nr=ye.w_size),_t=Y.avail_in,At=Y.next_in,nt=Y.input,Y.avail_in=nr,Y.next_in=0,Y.input=ft,lr(ye);ye.lookahead>=at;){for(Ae=ye.strstart,we=ye.lookahead-(at-1);ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[Ae+at-1])&ye.hash_mask,ye.prev[Ae&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=Ae,Ae++,--we;);ye.strstart=Ae,ye.lookahead=at-1,lr(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=at-1,ye.match_available=0,Y.next_in=At,Y.input=nt,Y.avail_in=_t,ye.wrap=Ne,G},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(f,y,b){y.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(f,y,b){y.exports=function(C,S){var c,R,N,Z,U,j,G,se,J,oe,re,pe,ge,Oe,ve,Ge,je,St,at,Mt,xt,xe,Je,W,Ve;c=C.state,R=C.next_in,W=C.input,N=R+(C.avail_in-5),Z=C.next_out,Ve=C.output,U=Z-(S-C.avail_out),j=Z+(C.avail_out-257),G=c.dmax,se=c.wsize,J=c.whave,oe=c.wnext,re=c.window,pe=c.hold,ge=c.bits,Oe=c.lencode,ve=c.distcode,Ge=(1<<c.lenbits)-1,je=(1<<c.distbits)-1;e:do{ge<15&&(pe+=W[R++]<<ge,ge+=8,pe+=W[R++]<<ge,ge+=8),St=Oe[pe&Ge];t:for(;;){if(pe>>>=at=St>>>24,ge-=at,(at=St>>>16&255)===0)Ve[Z++]=65535&St;else{if(!(16&at)){if((64&at)==0){St=Oe[(65535&St)+(pe&(1<<at)-1)];continue t}if(32&at){c.mode=12;break e}C.msg="invalid literal/length code",c.mode=30;break e}Mt=65535&St,(at&=15)&&(ge<at&&(pe+=W[R++]<<ge,ge+=8),Mt+=pe&(1<<at)-1,pe>>>=at,ge-=at),ge<15&&(pe+=W[R++]<<ge,ge+=8,pe+=W[R++]<<ge,ge+=8),St=ve[pe&je];r:for(;;){if(pe>>>=at=St>>>24,ge-=at,!(16&(at=St>>>16&255))){if((64&at)==0){St=ve[(65535&St)+(pe&(1<<at)-1)];continue r}C.msg="invalid distance code",c.mode=30;break e}if(xt=65535&St,ge<(at&=15)&&(pe+=W[R++]<<ge,(ge+=8)<at&&(pe+=W[R++]<<ge,ge+=8)),G<(xt+=pe&(1<<at)-1)){C.msg="invalid distance too far back",c.mode=30;break e}if(pe>>>=at,ge-=at,(at=Z-U)<xt){if(J<(at=xt-at)&&c.sane){C.msg="invalid distance too far back",c.mode=30;break e}if(Je=re,(xe=0)===oe){if(xe+=se-at,at<Mt){for(Mt-=at;Ve[Z++]=re[xe++],--at;);xe=Z-xt,Je=Ve}}else if(oe<at){if(xe+=se+oe-at,(at-=oe)<Mt){for(Mt-=at;Ve[Z++]=re[xe++],--at;);if(xe=0,oe<Mt){for(Mt-=at=oe;Ve[Z++]=re[xe++],--at;);xe=Z-xt,Je=Ve}}}else if(xe+=oe-at,at<Mt){for(Mt-=at;Ve[Z++]=re[xe++],--at;);xe=Z-xt,Je=Ve}for(;2<Mt;)Ve[Z++]=Je[xe++],Ve[Z++]=Je[xe++],Ve[Z++]=Je[xe++],Mt-=3;Mt&&(Ve[Z++]=Je[xe++],1<Mt&&(Ve[Z++]=Je[xe++]))}else{for(xe=Z-xt;Ve[Z++]=Ve[xe++],Ve[Z++]=Ve[xe++],Ve[Z++]=Ve[xe++],2<(Mt-=3););Mt&&(Ve[Z++]=Ve[xe++],1<Mt&&(Ve[Z++]=Ve[xe++]))}break}}break}}while(R<N&&Z<j);R-=Mt=ge>>3,pe&=(1<<(ge-=Mt<<3))-1,C.next_in=R,C.next_out=Z,C.avail_in=R<N?N-R+5:5-(R-N),C.avail_out=Z<j?j-Z+257:257-(Z-j),c.hold=pe,c.bits=ge}},{}],49:[function(f,y,b){var C=f("../utils/common"),S=f("./adler32"),c=f("./crc32"),R=f("./inffast"),N=f("./inftrees"),Z=1,U=2,j=0,G=-2,se=1,J=852,oe=592;function re(xe){return(xe>>>24&255)+(xe>>>8&65280)+((65280&xe)<<8)+((255&xe)<<24)}function pe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new C.Buf16(320),this.work=new C.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ge(xe){var Je;return xe&&xe.state?(Je=xe.state,xe.total_in=xe.total_out=Je.total=0,xe.msg="",Je.wrap&&(xe.adler=1&Je.wrap),Je.mode=se,Je.last=0,Je.havedict=0,Je.dmax=32768,Je.head=null,Je.hold=0,Je.bits=0,Je.lencode=Je.lendyn=new C.Buf32(J),Je.distcode=Je.distdyn=new C.Buf32(oe),Je.sane=1,Je.back=-1,j):G}function Oe(xe){var Je;return xe&&xe.state?((Je=xe.state).wsize=0,Je.whave=0,Je.wnext=0,ge(xe)):G}function ve(xe,Je){var W,Ve;return xe&&xe.state?(Ve=xe.state,Je<0?(W=0,Je=-Je):(W=1+(Je>>4),Je<48&&(Je&=15)),Je&&(Je<8||15<Je)?G:(Ve.window!==null&&Ve.wbits!==Je&&(Ve.window=null),Ve.wrap=W,Ve.wbits=Je,Oe(xe))):G}function Ge(xe,Je){var W,Ve;return xe?(Ve=new pe,(xe.state=Ve).window=null,(W=ve(xe,Je))!==j&&(xe.state=null),W):G}var je,St,at=!0;function Mt(xe){if(at){var Je;for(je=new C.Buf32(512),St=new C.Buf32(32),Je=0;Je<144;)xe.lens[Je++]=8;for(;Je<256;)xe.lens[Je++]=9;for(;Je<280;)xe.lens[Je++]=7;for(;Je<288;)xe.lens[Je++]=8;for(N(Z,xe.lens,0,288,je,0,xe.work,{bits:9}),Je=0;Je<32;)xe.lens[Je++]=5;N(U,xe.lens,0,32,St,0,xe.work,{bits:5}),at=!1}xe.lencode=je,xe.lenbits=9,xe.distcode=St,xe.distbits=5}function xt(xe,Je,W,Ve){var zt,Me=xe.state;return Me.window===null&&(Me.wsize=1<<Me.wbits,Me.wnext=0,Me.whave=0,Me.window=new C.Buf8(Me.wsize)),Ve>=Me.wsize?(C.arraySet(Me.window,Je,W-Me.wsize,Me.wsize,0),Me.wnext=0,Me.whave=Me.wsize):(Ve<(zt=Me.wsize-Me.wnext)&&(zt=Ve),C.arraySet(Me.window,Je,W-Ve,zt,Me.wnext),(Ve-=zt)?(C.arraySet(Me.window,Je,W-Ve,Ve,0),Me.wnext=Ve,Me.whave=Me.wsize):(Me.wnext+=zt,Me.wnext===Me.wsize&&(Me.wnext=0),Me.whave<Me.wsize&&(Me.whave+=zt))),0}b.inflateReset=Oe,b.inflateReset2=ve,b.inflateResetKeep=ge,b.inflateInit=function(xe){return Ge(xe,15)},b.inflateInit2=Ge,b.inflate=function(xe,Je){var W,Ve,zt,Me,et,Ze,ht,ae,_e,Ct,bt,wt,lr,pr,Gt,Kt,Mr,Vr,tn,Kr,Y,ft,ye,Ae,we=0,Ne=new C.Buf8(4),_t=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!xe||!xe.state||!xe.output||!xe.input&&xe.avail_in!==0)return G;(W=xe.state).mode===12&&(W.mode=13),et=xe.next_out,zt=xe.output,ht=xe.avail_out,Me=xe.next_in,Ve=xe.input,Ze=xe.avail_in,ae=W.hold,_e=W.bits,Ct=Ze,bt=ht,ft=j;e:for(;;)switch(W.mode){case se:if(W.wrap===0){W.mode=13;break}for(;_e<16;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(2&W.wrap&&ae===35615){Ne[W.check=0]=255&ae,Ne[1]=ae>>>8&255,W.check=c(W.check,Ne,2,0),_e=ae=0,W.mode=2;break}if(W.flags=0,W.head&&(W.head.done=!1),!(1&W.wrap)||(((255&ae)<<8)+(ae>>8))%31){xe.msg="incorrect header check",W.mode=30;break}if((15&ae)!=8){xe.msg="unknown compression method",W.mode=30;break}if(_e-=4,Y=8+(15&(ae>>>=4)),W.wbits===0)W.wbits=Y;else if(Y>W.wbits){xe.msg="invalid window size",W.mode=30;break}W.dmax=1<<Y,xe.adler=W.check=1,W.mode=512&ae?10:12,_e=ae=0;break;case 2:for(;_e<16;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(W.flags=ae,(255&W.flags)!=8){xe.msg="unknown compression method",W.mode=30;break}if(57344&W.flags){xe.msg="unknown header flags set",W.mode=30;break}W.head&&(W.head.text=ae>>8&1),512&W.flags&&(Ne[0]=255&ae,Ne[1]=ae>>>8&255,W.check=c(W.check,Ne,2,0)),_e=ae=0,W.mode=3;case 3:for(;_e<32;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}W.head&&(W.head.time=ae),512&W.flags&&(Ne[0]=255&ae,Ne[1]=ae>>>8&255,Ne[2]=ae>>>16&255,Ne[3]=ae>>>24&255,W.check=c(W.check,Ne,4,0)),_e=ae=0,W.mode=4;case 4:for(;_e<16;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}W.head&&(W.head.xflags=255&ae,W.head.os=ae>>8),512&W.flags&&(Ne[0]=255&ae,Ne[1]=ae>>>8&255,W.check=c(W.check,Ne,2,0)),_e=ae=0,W.mode=5;case 5:if(1024&W.flags){for(;_e<16;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}W.length=ae,W.head&&(W.head.extra_len=ae),512&W.flags&&(Ne[0]=255&ae,Ne[1]=ae>>>8&255,W.check=c(W.check,Ne,2,0)),_e=ae=0}else W.head&&(W.head.extra=null);W.mode=6;case 6:if(1024&W.flags&&(Ze<(wt=W.length)&&(wt=Ze),wt&&(W.head&&(Y=W.head.extra_len-W.length,W.head.extra||(W.head.extra=new Array(W.head.extra_len)),C.arraySet(W.head.extra,Ve,Me,wt,Y)),512&W.flags&&(W.check=c(W.check,Ve,wt,Me)),Ze-=wt,Me+=wt,W.length-=wt),W.length))break e;W.length=0,W.mode=7;case 7:if(2048&W.flags){if(Ze===0)break e;for(wt=0;Y=Ve[Me+wt++],W.head&&Y&&W.length<65536&&(W.head.name+=String.fromCharCode(Y)),Y&&wt<Ze;);if(512&W.flags&&(W.check=c(W.check,Ve,wt,Me)),Ze-=wt,Me+=wt,Y)break e}else W.head&&(W.head.name=null);W.length=0,W.mode=8;case 8:if(4096&W.flags){if(Ze===0)break e;for(wt=0;Y=Ve[Me+wt++],W.head&&Y&&W.length<65536&&(W.head.comment+=String.fromCharCode(Y)),Y&&wt<Ze;);if(512&W.flags&&(W.check=c(W.check,Ve,wt,Me)),Ze-=wt,Me+=wt,Y)break e}else W.head&&(W.head.comment=null);W.mode=9;case 9:if(512&W.flags){for(;_e<16;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(ae!==(65535&W.check)){xe.msg="header crc mismatch",W.mode=30;break}_e=ae=0}W.head&&(W.head.hcrc=W.flags>>9&1,W.head.done=!0),xe.adler=W.check=0,W.mode=12;break;case 10:for(;_e<32;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}xe.adler=W.check=re(ae),_e=ae=0,W.mode=11;case 11:if(W.havedict===0)return xe.next_out=et,xe.avail_out=ht,xe.next_in=Me,xe.avail_in=Ze,W.hold=ae,W.bits=_e,2;xe.adler=W.check=1,W.mode=12;case 12:if(Je===5||Je===6)break e;case 13:if(W.last){ae>>>=7&_e,_e-=7&_e,W.mode=27;break}for(;_e<3;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}switch(W.last=1&ae,_e-=1,3&(ae>>>=1)){case 0:W.mode=14;break;case 1:if(Mt(W),W.mode=20,Je!==6)break;ae>>>=2,_e-=2;break e;case 2:W.mode=17;break;case 3:xe.msg="invalid block type",W.mode=30}ae>>>=2,_e-=2;break;case 14:for(ae>>>=7&_e,_e-=7&_e;_e<32;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if((65535&ae)!=(ae>>>16^65535)){xe.msg="invalid stored block lengths",W.mode=30;break}if(W.length=65535&ae,_e=ae=0,W.mode=15,Je===6)break e;case 15:W.mode=16;case 16:if(wt=W.length){if(Ze<wt&&(wt=Ze),ht<wt&&(wt=ht),wt===0)break e;C.arraySet(zt,Ve,Me,wt,et),Ze-=wt,Me+=wt,ht-=wt,et+=wt,W.length-=wt;break}W.mode=12;break;case 17:for(;_e<14;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(W.nlen=257+(31&ae),ae>>>=5,_e-=5,W.ndist=1+(31&ae),ae>>>=5,_e-=5,W.ncode=4+(15&ae),ae>>>=4,_e-=4,286<W.nlen||30<W.ndist){xe.msg="too many length or distance symbols",W.mode=30;break}W.have=0,W.mode=18;case 18:for(;W.have<W.ncode;){for(;_e<3;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}W.lens[_t[W.have++]]=7&ae,ae>>>=3,_e-=3}for(;W.have<19;)W.lens[_t[W.have++]]=0;if(W.lencode=W.lendyn,W.lenbits=7,ye={bits:W.lenbits},ft=N(0,W.lens,0,19,W.lencode,0,W.work,ye),W.lenbits=ye.bits,ft){xe.msg="invalid code lengths set",W.mode=30;break}W.have=0,W.mode=19;case 19:for(;W.have<W.nlen+W.ndist;){for(;Kt=(we=W.lencode[ae&(1<<W.lenbits)-1])>>>16&255,Mr=65535&we,!((Gt=we>>>24)<=_e);){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(Mr<16)ae>>>=Gt,_e-=Gt,W.lens[W.have++]=Mr;else{if(Mr===16){for(Ae=Gt+2;_e<Ae;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(ae>>>=Gt,_e-=Gt,W.have===0){xe.msg="invalid bit length repeat",W.mode=30;break}Y=W.lens[W.have-1],wt=3+(3&ae),ae>>>=2,_e-=2}else if(Mr===17){for(Ae=Gt+3;_e<Ae;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}_e-=Gt,Y=0,wt=3+(7&(ae>>>=Gt)),ae>>>=3,_e-=3}else{for(Ae=Gt+7;_e<Ae;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}_e-=Gt,Y=0,wt=11+(127&(ae>>>=Gt)),ae>>>=7,_e-=7}if(W.have+wt>W.nlen+W.ndist){xe.msg="invalid bit length repeat",W.mode=30;break}for(;wt--;)W.lens[W.have++]=Y}}if(W.mode===30)break;if(W.lens[256]===0){xe.msg="invalid code -- missing end-of-block",W.mode=30;break}if(W.lenbits=9,ye={bits:W.lenbits},ft=N(Z,W.lens,0,W.nlen,W.lencode,0,W.work,ye),W.lenbits=ye.bits,ft){xe.msg="invalid literal/lengths set",W.mode=30;break}if(W.distbits=6,W.distcode=W.distdyn,ye={bits:W.distbits},ft=N(U,W.lens,W.nlen,W.ndist,W.distcode,0,W.work,ye),W.distbits=ye.bits,ft){xe.msg="invalid distances set",W.mode=30;break}if(W.mode=20,Je===6)break e;case 20:W.mode=21;case 21:if(6<=Ze&&258<=ht){xe.next_out=et,xe.avail_out=ht,xe.next_in=Me,xe.avail_in=Ze,W.hold=ae,W.bits=_e,R(xe,bt),et=xe.next_out,zt=xe.output,ht=xe.avail_out,Me=xe.next_in,Ve=xe.input,Ze=xe.avail_in,ae=W.hold,_e=W.bits,W.mode===12&&(W.back=-1);break}for(W.back=0;Kt=(we=W.lencode[ae&(1<<W.lenbits)-1])>>>16&255,Mr=65535&we,!((Gt=we>>>24)<=_e);){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(Kt&&(240&Kt)==0){for(Vr=Gt,tn=Kt,Kr=Mr;Kt=(we=W.lencode[Kr+((ae&(1<<Vr+tn)-1)>>Vr)])>>>16&255,Mr=65535&we,!(Vr+(Gt=we>>>24)<=_e);){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}ae>>>=Vr,_e-=Vr,W.back+=Vr}if(ae>>>=Gt,_e-=Gt,W.back+=Gt,W.length=Mr,Kt===0){W.mode=26;break}if(32&Kt){W.back=-1,W.mode=12;break}if(64&Kt){xe.msg="invalid literal/length code",W.mode=30;break}W.extra=15&Kt,W.mode=22;case 22:if(W.extra){for(Ae=W.extra;_e<Ae;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}W.length+=ae&(1<<W.extra)-1,ae>>>=W.extra,_e-=W.extra,W.back+=W.extra}W.was=W.length,W.mode=23;case 23:for(;Kt=(we=W.distcode[ae&(1<<W.distbits)-1])>>>16&255,Mr=65535&we,!((Gt=we>>>24)<=_e);){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if((240&Kt)==0){for(Vr=Gt,tn=Kt,Kr=Mr;Kt=(we=W.distcode[Kr+((ae&(1<<Vr+tn)-1)>>Vr)])>>>16&255,Mr=65535&we,!(Vr+(Gt=we>>>24)<=_e);){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}ae>>>=Vr,_e-=Vr,W.back+=Vr}if(ae>>>=Gt,_e-=Gt,W.back+=Gt,64&Kt){xe.msg="invalid distance code",W.mode=30;break}W.offset=Mr,W.extra=15&Kt,W.mode=24;case 24:if(W.extra){for(Ae=W.extra;_e<Ae;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}W.offset+=ae&(1<<W.extra)-1,ae>>>=W.extra,_e-=W.extra,W.back+=W.extra}if(W.offset>W.dmax){xe.msg="invalid distance too far back",W.mode=30;break}W.mode=25;case 25:if(ht===0)break e;if(wt=bt-ht,W.offset>wt){if((wt=W.offset-wt)>W.whave&&W.sane){xe.msg="invalid distance too far back",W.mode=30;break}lr=wt>W.wnext?(wt-=W.wnext,W.wsize-wt):W.wnext-wt,wt>W.length&&(wt=W.length),pr=W.window}else pr=zt,lr=et-W.offset,wt=W.length;for(ht<wt&&(wt=ht),ht-=wt,W.length-=wt;zt[et++]=pr[lr++],--wt;);W.length===0&&(W.mode=21);break;case 26:if(ht===0)break e;zt[et++]=W.length,ht--,W.mode=21;break;case 27:if(W.wrap){for(;_e<32;){if(Ze===0)break e;Ze--,ae|=Ve[Me++]<<_e,_e+=8}if(bt-=ht,xe.total_out+=bt,W.total+=bt,bt&&(xe.adler=W.check=W.flags?c(W.check,zt,bt,et-bt):S(W.check,zt,bt,et-bt)),bt=ht,(W.flags?ae:re(ae))!==W.check){xe.msg="incorrect data check",W.mode=30;break}_e=ae=0}W.mode=28;case 28:if(W.wrap&&W.flags){for(;_e<32;){if(Ze===0)break e;Ze--,ae+=Ve[Me++]<<_e,_e+=8}if(ae!==(4294967295&W.total)){xe.msg="incorrect length check",W.mode=30;break}_e=ae=0}W.mode=29;case 29:ft=1;break e;case 30:ft=-3;break e;case 31:return-4;case 32:default:return G}return xe.next_out=et,xe.avail_out=ht,xe.next_in=Me,xe.avail_in=Ze,W.hold=ae,W.bits=_e,(W.wsize||bt!==xe.avail_out&&W.mode<30&&(W.mode<27||Je!==4))&&xt(xe,xe.output,xe.next_out,bt-xe.avail_out)?(W.mode=31,-4):(Ct-=xe.avail_in,bt-=xe.avail_out,xe.total_in+=Ct,xe.total_out+=bt,W.total+=bt,W.wrap&&bt&&(xe.adler=W.check=W.flags?c(W.check,zt,bt,xe.next_out-bt):S(W.check,zt,bt,xe.next_out-bt)),xe.data_type=W.bits+(W.last?64:0)+(W.mode===12?128:0)+(W.mode===20||W.mode===15?256:0),(Ct==0&&bt===0||Je===4)&&ft===j&&(ft=-5),ft)},b.inflateEnd=function(xe){if(!xe||!xe.state)return G;var Je=xe.state;return Je.window&&(Je.window=null),xe.state=null,j},b.inflateGetHeader=function(xe,Je){var W;return xe&&xe.state?(2&(W=xe.state).wrap)==0?G:((W.head=Je).done=!1,j):G},b.inflateSetDictionary=function(xe,Je){var W,Ve=Je.length;return xe&&xe.state?(W=xe.state).wrap!==0&&W.mode!==11?G:W.mode===11&&S(1,Je,Ve,0)!==W.check?-3:xt(xe,Je,Ve,Ve)?(W.mode=31,-4):(W.havedict=1,j):G},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(f,y,b){var C=f("../utils/common"),S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],N=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];y.exports=function(Z,U,j,G,se,J,oe,re){var pe,ge,Oe,ve,Ge,je,St,at,Mt,xt=re.bits,xe=0,Je=0,W=0,Ve=0,zt=0,Me=0,et=0,Ze=0,ht=0,ae=0,_e=null,Ct=0,bt=new C.Buf16(16),wt=new C.Buf16(16),lr=null,pr=0;for(xe=0;xe<=15;xe++)bt[xe]=0;for(Je=0;Je<G;Je++)bt[U[j+Je]]++;for(zt=xt,Ve=15;1<=Ve&&bt[Ve]===0;Ve--);if(Ve<zt&&(zt=Ve),Ve===0)return se[J++]=20971520,se[J++]=20971520,re.bits=1,0;for(W=1;W<Ve&&bt[W]===0;W++);for(zt<W&&(zt=W),xe=Ze=1;xe<=15;xe++)if(Ze<<=1,(Ze-=bt[xe])<0)return-1;if(0<Ze&&(Z===0||Ve!==1))return-1;for(wt[1]=0,xe=1;xe<15;xe++)wt[xe+1]=wt[xe]+bt[xe];for(Je=0;Je<G;Je++)U[j+Je]!==0&&(oe[wt[U[j+Je]]++]=Je);if(je=Z===0?(_e=lr=oe,19):Z===1?(_e=S,Ct-=257,lr=c,pr-=257,256):(_e=R,lr=N,-1),xe=W,Ge=J,et=Je=ae=0,Oe=-1,ve=(ht=1<<(Me=zt))-1,Z===1&&852<ht||Z===2&&592<ht)return 1;for(;;){for(St=xe-et,Mt=oe[Je]<je?(at=0,oe[Je]):oe[Je]>je?(at=lr[pr+oe[Je]],_e[Ct+oe[Je]]):(at=96,0),pe=1<<xe-et,W=ge=1<<Me;se[Ge+(ae>>et)+(ge-=pe)]=St<<24|at<<16|Mt|0,ge!==0;);for(pe=1<<xe-1;ae&pe;)pe>>=1;if(pe!==0?(ae&=pe-1,ae+=pe):ae=0,Je++,--bt[xe]==0){if(xe===Ve)break;xe=U[j+oe[Je]]}if(zt<xe&&(ae&ve)!==Oe){for(et===0&&(et=zt),Ge+=W,Ze=1<<(Me=xe-et);Me+et<Ve&&!((Ze-=bt[Me+et])<=0);)Me++,Ze<<=1;if(ht+=1<<Me,Z===1&&852<ht||Z===2&&592<ht)return 1;se[Oe=ae&ve]=zt<<24|Me<<16|Ge-J|0}}return ae!==0&&(se[Ge+ae]=xe-et<<24|64<<16|0),re.bits=zt,0}},{"../utils/common":41}],51:[function(f,y,b){y.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(f,y,b){var C=f("../utils/common"),S=0,c=1;function R(we){for(var Ne=we.length;0<=--Ne;)we[Ne]=0}var N=0,Z=29,U=256,j=U+1+Z,G=30,se=19,J=2*j+1,oe=15,re=16,pe=7,ge=256,Oe=16,ve=17,Ge=18,je=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],St=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xt=new Array(2*(j+2));R(xt);var xe=new Array(2*G);R(xe);var Je=new Array(512);R(Je);var W=new Array(256);R(W);var Ve=new Array(Z);R(Ve);var zt,Me,et,Ze=new Array(G);function ht(we,Ne,_t,At,nt){this.static_tree=we,this.extra_bits=Ne,this.extra_base=_t,this.elems=At,this.max_length=nt,this.has_stree=we&&we.length}function ae(we,Ne){this.dyn_tree=we,this.max_code=0,this.stat_desc=Ne}function _e(we){return we<256?Je[we]:Je[256+(we>>>7)]}function Ct(we,Ne){we.pending_buf[we.pending++]=255&Ne,we.pending_buf[we.pending++]=Ne>>>8&255}function bt(we,Ne,_t){we.bi_valid>re-_t?(we.bi_buf|=Ne<<we.bi_valid&65535,Ct(we,we.bi_buf),we.bi_buf=Ne>>re-we.bi_valid,we.bi_valid+=_t-re):(we.bi_buf|=Ne<<we.bi_valid&65535,we.bi_valid+=_t)}function wt(we,Ne,_t){bt(we,_t[2*Ne],_t[2*Ne+1])}function lr(we,Ne){for(var _t=0;_t|=1&we,we>>>=1,_t<<=1,0<--Ne;);return _t>>>1}function pr(we,Ne,_t){var At,nt,Dt=new Array(oe+1),nr=0;for(At=1;At<=oe;At++)Dt[At]=nr=nr+_t[At-1]<<1;for(nt=0;nt<=Ne;nt++){var Lt=we[2*nt+1];Lt!==0&&(we[2*nt]=lr(Dt[Lt]++,Lt))}}function Gt(we){var Ne;for(Ne=0;Ne<j;Ne++)we.dyn_ltree[2*Ne]=0;for(Ne=0;Ne<G;Ne++)we.dyn_dtree[2*Ne]=0;for(Ne=0;Ne<se;Ne++)we.bl_tree[2*Ne]=0;we.dyn_ltree[2*ge]=1,we.opt_len=we.static_len=0,we.last_lit=we.matches=0}function Kt(we){8<we.bi_valid?Ct(we,we.bi_buf):0<we.bi_valid&&(we.pending_buf[we.pending++]=we.bi_buf),we.bi_buf=0,we.bi_valid=0}function Mr(we,Ne,_t,At){var nt=2*Ne,Dt=2*_t;return we[nt]<we[Dt]||we[nt]===we[Dt]&&At[Ne]<=At[_t]}function Vr(we,Ne,_t){for(var At=we.heap[_t],nt=_t<<1;nt<=we.heap_len&&(nt<we.heap_len&&Mr(Ne,we.heap[nt+1],we.heap[nt],we.depth)&&nt++,!Mr(Ne,At,we.heap[nt],we.depth));)we.heap[_t]=we.heap[nt],_t=nt,nt<<=1;we.heap[_t]=At}function tn(we,Ne,_t){var At,nt,Dt,nr,Lt=0;if(we.last_lit!==0)for(;At=we.pending_buf[we.d_buf+2*Lt]<<8|we.pending_buf[we.d_buf+2*Lt+1],nt=we.pending_buf[we.l_buf+Lt],Lt++,At===0?wt(we,nt,Ne):(wt(we,(Dt=W[nt])+U+1,Ne),(nr=je[Dt])!==0&&bt(we,nt-=Ve[Dt],nr),wt(we,Dt=_e(--At),_t),(nr=St[Dt])!==0&&bt(we,At-=Ze[Dt],nr)),Lt<we.last_lit;);wt(we,ge,Ne)}function Kr(we,Ne){var _t,At,nt,Dt=Ne.dyn_tree,nr=Ne.stat_desc.static_tree,Lt=Ne.stat_desc.has_stree,xr=Ne.stat_desc.elems,sn=-1;for(we.heap_len=0,we.heap_max=J,_t=0;_t<xr;_t++)Dt[2*_t]!==0?(we.heap[++we.heap_len]=sn=_t,we.depth[_t]=0):Dt[2*_t+1]=0;for(;we.heap_len<2;)Dt[2*(nt=we.heap[++we.heap_len]=sn<2?++sn:0)]=1,we.depth[nt]=0,we.opt_len--,Lt&&(we.static_len-=nr[2*nt+1]);for(Ne.max_code=sn,_t=we.heap_len>>1;1<=_t;_t--)Vr(we,Dt,_t);for(nt=xr;_t=we.heap[1],we.heap[1]=we.heap[we.heap_len--],Vr(we,Dt,1),At=we.heap[1],we.heap[--we.heap_max]=_t,we.heap[--we.heap_max]=At,Dt[2*nt]=Dt[2*_t]+Dt[2*At],we.depth[nt]=(we.depth[_t]>=we.depth[At]?we.depth[_t]:we.depth[At])+1,Dt[2*_t+1]=Dt[2*At+1]=nt,we.heap[1]=nt++,Vr(we,Dt,1),2<=we.heap_len;);we.heap[--we.heap_max]=we.heap[1],function(vt,Cn){var Sn,In,wi,Pt,Lr,kr,kn=Cn.dyn_tree,bi=Cn.max_code,Ar=Cn.stat_desc.static_tree,Nn=Cn.stat_desc.has_stree,Ri=Cn.stat_desc.extra_bits,si=Cn.stat_desc.extra_base,Hr=Cn.stat_desc.max_length,Ce=0;for(Pt=0;Pt<=oe;Pt++)vt.bl_count[Pt]=0;for(kn[2*vt.heap[vt.heap_max]+1]=0,Sn=vt.heap_max+1;Sn<J;Sn++)Hr<(Pt=kn[2*kn[2*(In=vt.heap[Sn])+1]+1]+1)&&(Pt=Hr,Ce++),kn[2*In+1]=Pt,bi<In||(vt.bl_count[Pt]++,Lr=0,si<=In&&(Lr=Ri[In-si]),kr=kn[2*In],vt.opt_len+=kr*(Pt+Lr),Nn&&(vt.static_len+=kr*(Ar[2*In+1]+Lr)));if(Ce!==0){do{for(Pt=Hr-1;vt.bl_count[Pt]===0;)Pt--;vt.bl_count[Pt]--,vt.bl_count[Pt+1]+=2,vt.bl_count[Hr]--,Ce-=2}while(0<Ce);for(Pt=Hr;Pt!==0;Pt--)for(In=vt.bl_count[Pt];In!==0;)bi<(wi=vt.heap[--Sn])||(kn[2*wi+1]!==Pt&&(vt.opt_len+=(Pt-kn[2*wi+1])*kn[2*wi],kn[2*wi+1]=Pt),In--)}}(we,Ne),pr(Dt,sn,we.bl_count)}function Y(we,Ne,_t){var At,nt,Dt=-1,nr=Ne[1],Lt=0,xr=7,sn=4;for(nr===0&&(xr=138,sn=3),Ne[2*(_t+1)+1]=65535,At=0;At<=_t;At++)nt=nr,nr=Ne[2*(At+1)+1],++Lt<xr&&nt===nr||(Lt<sn?we.bl_tree[2*nt]+=Lt:nt!==0?(nt!==Dt&&we.bl_tree[2*nt]++,we.bl_tree[2*Oe]++):Lt<=10?we.bl_tree[2*ve]++:we.bl_tree[2*Ge]++,Dt=nt,sn=(Lt=0)===nr?(xr=138,3):nt===nr?(xr=6,3):(xr=7,4))}function ft(we,Ne,_t){var At,nt,Dt=-1,nr=Ne[1],Lt=0,xr=7,sn=4;for(nr===0&&(xr=138,sn=3),At=0;At<=_t;At++)if(nt=nr,nr=Ne[2*(At+1)+1],!(++Lt<xr&&nt===nr)){if(Lt<sn)for(;wt(we,nt,we.bl_tree),--Lt!=0;);else nt!==0?(nt!==Dt&&(wt(we,nt,we.bl_tree),Lt--),wt(we,Oe,we.bl_tree),bt(we,Lt-3,2)):Lt<=10?(wt(we,ve,we.bl_tree),bt(we,Lt-3,3)):(wt(we,Ge,we.bl_tree),bt(we,Lt-11,7));Dt=nt,sn=(Lt=0)===nr?(xr=138,3):nt===nr?(xr=6,3):(xr=7,4)}}R(Ze);var ye=!1;function Ae(we,Ne,_t,At){bt(we,(N<<1)+(At?1:0),3),function(nt,Dt,nr,Lt){Kt(nt),Ct(nt,nr),Ct(nt,~nr),C.arraySet(nt.pending_buf,nt.window,Dt,nr,nt.pending),nt.pending+=nr}(we,Ne,_t)}b._tr_init=function(we){ye||(function(){var Ne,_t,At,nt,Dt,nr=new Array(oe+1);for(nt=At=0;nt<Z-1;nt++)for(Ve[nt]=At,Ne=0;Ne<1<<je[nt];Ne++)W[At++]=nt;for(W[At-1]=nt,nt=Dt=0;nt<16;nt++)for(Ze[nt]=Dt,Ne=0;Ne<1<<St[nt];Ne++)Je[Dt++]=nt;for(Dt>>=7;nt<G;nt++)for(Ze[nt]=Dt<<7,Ne=0;Ne<1<<St[nt]-7;Ne++)Je[256+Dt++]=nt;for(_t=0;_t<=oe;_t++)nr[_t]=0;for(Ne=0;Ne<=143;)xt[2*Ne+1]=8,Ne++,nr[8]++;for(;Ne<=255;)xt[2*Ne+1]=9,Ne++,nr[9]++;for(;Ne<=279;)xt[2*Ne+1]=7,Ne++,nr[7]++;for(;Ne<=287;)xt[2*Ne+1]=8,Ne++,nr[8]++;for(pr(xt,j+1,nr),Ne=0;Ne<G;Ne++)xe[2*Ne+1]=5,xe[2*Ne]=lr(Ne,5);zt=new ht(xt,je,U+1,j,oe),Me=new ht(xe,St,0,G,oe),et=new ht(new Array(0),at,0,se,pe)}(),ye=!0),we.l_desc=new ae(we.dyn_ltree,zt),we.d_desc=new ae(we.dyn_dtree,Me),we.bl_desc=new ae(we.bl_tree,et),we.bi_buf=0,we.bi_valid=0,Gt(we)},b._tr_stored_block=Ae,b._tr_flush_block=function(we,Ne,_t,At){var nt,Dt,nr=0;0<we.level?(we.strm.data_type===2&&(we.strm.data_type=function(Lt){var xr,sn=4093624447;for(xr=0;xr<=31;xr++,sn>>>=1)if(1&sn&&Lt.dyn_ltree[2*xr]!==0)return S;if(Lt.dyn_ltree[18]!==0||Lt.dyn_ltree[20]!==0||Lt.dyn_ltree[26]!==0)return c;for(xr=32;xr<U;xr++)if(Lt.dyn_ltree[2*xr]!==0)return c;return S}(we)),Kr(we,we.l_desc),Kr(we,we.d_desc),nr=function(Lt){var xr;for(Y(Lt,Lt.dyn_ltree,Lt.l_desc.max_code),Y(Lt,Lt.dyn_dtree,Lt.d_desc.max_code),Kr(Lt,Lt.bl_desc),xr=se-1;3<=xr&&Lt.bl_tree[2*Mt[xr]+1]===0;xr--);return Lt.opt_len+=3*(xr+1)+5+5+4,xr}(we),nt=we.opt_len+3+7>>>3,(Dt=we.static_len+3+7>>>3)<=nt&&(nt=Dt)):nt=Dt=_t+5,_t+4<=nt&&Ne!==-1?Ae(we,Ne,_t,At):we.strategy===4||Dt===nt?(bt(we,2+(At?1:0),3),tn(we,xt,xe)):(bt(we,4+(At?1:0),3),function(Lt,xr,sn,vt){var Cn;for(bt(Lt,xr-257,5),bt(Lt,sn-1,5),bt(Lt,vt-4,4),Cn=0;Cn<vt;Cn++)bt(Lt,Lt.bl_tree[2*Mt[Cn]+1],3);ft(Lt,Lt.dyn_ltree,xr-1),ft(Lt,Lt.dyn_dtree,sn-1)}(we,we.l_desc.max_code+1,we.d_desc.max_code+1,nr+1),tn(we,we.dyn_ltree,we.dyn_dtree)),Gt(we),At&&Kt(we)},b._tr_tally=function(we,Ne,_t){return we.pending_buf[we.d_buf+2*we.last_lit]=Ne>>>8&255,we.pending_buf[we.d_buf+2*we.last_lit+1]=255&Ne,we.pending_buf[we.l_buf+we.last_lit]=255&_t,we.last_lit++,Ne===0?we.dyn_ltree[2*_t]++:(we.matches++,Ne--,we.dyn_ltree[2*(W[_t]+U+1)]++,we.dyn_dtree[2*_e(Ne)]++),we.last_lit===we.lit_bufsize-1},b._tr_align=function(we){bt(we,2,3),wt(we,ge,xt),function(Ne){Ne.bi_valid===16?(Ct(Ne,Ne.bi_buf),Ne.bi_buf=0,Ne.bi_valid=0):8<=Ne.bi_valid&&(Ne.pending_buf[Ne.pending++]=255&Ne.bi_buf,Ne.bi_buf>>=8,Ne.bi_valid-=8)}(we)}},{"../utils/common":41}],53:[function(f,y,b){y.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(f,y,b){(function(C){(function(S,c){if(!S.setImmediate){var R,N,Z,U,j=1,G={},se=!1,J=S.document,oe=Object.getPrototypeOf&&Object.getPrototypeOf(S);oe=oe&&oe.setTimeout?oe:S,R={}.toString.call(S.process)==="[object process]"?function(Oe){process.nextTick(function(){pe(Oe)})}:function(){if(S.postMessage&&!S.importScripts){var Oe=!0,ve=S.onmessage;return S.onmessage=function(){Oe=!1},S.postMessage("","*"),S.onmessage=ve,Oe}}()?(U="setImmediate$"+Math.random()+"$",S.addEventListener?S.addEventListener("message",ge,!1):S.attachEvent("onmessage",ge),function(Oe){S.postMessage(U+Oe,"*")}):S.MessageChannel?((Z=new MessageChannel).port1.onmessage=function(Oe){pe(Oe.data)},function(Oe){Z.port2.postMessage(Oe)}):J&&"onreadystatechange"in J.createElement("script")?(N=J.documentElement,function(Oe){var ve=J.createElement("script");ve.onreadystatechange=function(){pe(Oe),ve.onreadystatechange=null,N.removeChild(ve),ve=null},N.appendChild(ve)}):function(Oe){setTimeout(pe,0,Oe)},oe.setImmediate=function(Oe){typeof Oe!="function"&&(Oe=new Function(""+Oe));for(var ve=new Array(arguments.length-1),Ge=0;Ge<ve.length;Ge++)ve[Ge]=arguments[Ge+1];var je={callback:Oe,args:ve};return G[j]=je,R(j),j++},oe.clearImmediate=re}function re(Oe){delete G[Oe]}function pe(Oe){if(se)setTimeout(pe,0,Oe);else{var ve=G[Oe];if(ve){se=!0;try{(function(Ge){var je=Ge.callback,St=Ge.args;switch(St.length){case 0:je();break;case 1:je(St[0]);break;case 2:je(St[0],St[1]);break;case 3:je(St[0],St[1],St[2]);break;default:je.apply(c,St)}})(ve)}finally{re(Oe),se=!1}}}}function ge(Oe){Oe.source===S&&typeof Oe.data=="string"&&Oe.data.indexOf(U)===0&&pe(+Oe.data.slice(U.length))}})(typeof self>"u"?C===void 0?this:C:self)}).call(this,typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Ng)),Ng.exports}var RT=zT();const mx=af(RT);var _m={exports:{}},LT=_m.exports,sv;function OT(){return sv||(sv=1,function(n,h){(function(f,y){y()})(LT,function(){function f(N,Z){return typeof Z>"u"?Z={autoBom:!1}:typeof Z!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Z={autoBom:!Z}),Z.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(N.type)?new Blob(["\uFEFF",N],{type:N.type}):N}function y(N,Z,U){var j=new XMLHttpRequest;j.open("GET",N),j.responseType="blob",j.onload=function(){R(j.response,Z,U)},j.onerror=function(){console.error("could not download file")},j.send()}function b(N){var Z=new XMLHttpRequest;Z.open("HEAD",N,!1);try{Z.send()}catch{}return 200<=Z.status&&299>=Z.status}function C(N){try{N.dispatchEvent(new MouseEvent("click"))}catch{var Z=document.createEvent("MouseEvents");Z.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),N.dispatchEvent(Z)}}var S=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hc=="object"&&Hc.global===Hc?Hc:void 0,c=S.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),R=S.saveAs||(typeof window!="object"||window!==S?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(N,Z,U){var j=S.URL||S.webkitURL,G=document.createElement("a");Z=Z||N.name||"download",G.download=Z,G.rel="noopener",typeof N=="string"?(G.href=N,G.origin===location.origin?C(G):b(G.href)?y(N,Z,U):C(G,G.target="_blank")):(G.href=j.createObjectURL(N),setTimeout(function(){j.revokeObjectURL(G.href)},4e4),setTimeout(function(){C(G)},0))}:"msSaveOrOpenBlob"in navigator?function(N,Z,U){if(Z=Z||N.name||"download",typeof N!="string")navigator.msSaveOrOpenBlob(f(N,U),Z);else if(b(N))y(N,Z,U);else{var j=document.createElement("a");j.href=N,j.target="_blank",setTimeout(function(){C(j)})}}:function(N,Z,U,j){if(j=j||open("","_blank"),j&&(j.document.title=j.document.body.innerText="downloading..."),typeof N=="string")return y(N,Z,U);var G=N.type==="application/octet-stream",se=/constructor/i.test(S.HTMLElement)||S.safari,J=/CriOS\/[\d]+/.test(navigator.userAgent);if((J||G&&se||c)&&typeof FileReader<"u"){var oe=new FileReader;oe.onloadend=function(){var ge=oe.result;ge=J?ge:ge.replace(/^data:[^;]*;/,"data:attachment/file;"),j?j.location.href=ge:location=ge,j=null},oe.readAsDataURL(N)}else{var re=S.URL||S.webkitURL,pe=re.createObjectURL(N);j?j.location=pe:location.href=pe,j=null,setTimeout(function(){re.revokeObjectURL(pe)},4e4)}});S.saveAs=R.saveAs=R,n.exports=R})}(_m)),_m.exports}var FT=OT();function BT(n,h){const f=new mx,y=n.features.map(C=>C.properties.file),b=new Blob([JSON.stringify(n)],{type:"application/json"});if(f.file("data.geojson",b),h)for(const[C,S]of Object.entries(h))y.indexOf(C)>-1&&f.file(C,S);f.generateAsync({type:"blob"}).then(C=>{FT.saveAs(C,`chatmap-${Math.floor(1e4+Math.random()*9e4)}.zip`)})}function NT({data:n,dataFiles:h}){const f=()=>{BT(n,h)};return yt.jsx("button",{className:"primaryButton",onClick:f,children:yt.jsx(hs,{id:"app.download",defaultMessage:"Download"})})}function jT({onOptionClick:n}){return yt.jsx(yt.Fragment,{children:yt.jsx("div",{className:"appNav",children:yt.jsx("button",{className:"textButton",onClick:()=>n("options"),children:yt.jsx(hs,{id:"app.options",defaultMessage:"Options"})})})})}var om={exports:{}},Uc={},jg={exports:{}},Ug,av;function UT(){if(av)return Ug;av=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ug=n,Ug}var Vg,ov;function VT(){if(ov)return Vg;ov=1;var n=UT();function h(){}function f(){}return f.resetWarningCache=h,Vg=function(){function y(S,c,R,N,Z,U){if(U!==n){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}y.isRequired=y;function b(){return y}var C={array:y,bigint:y,bool:y,func:y,number:y,object:y,string:y,symbol:y,any:y,arrayOf:b,element:y,elementType:y,instanceOf:b,node:y,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:h};return C.PropTypes=C,C},Vg}var lv;function gx(){return lv||(lv=1,jg.exports=VT()()),jg.exports}var lm={exports:{}},il={},um={exports:{}},uv;function yx(){return uv||(uv=1,function(n,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=Z;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var f="none",y="contents",b=/input|select|textarea|button|object|iframe/;function C(U,j){return j.getPropertyValue("overflow")!=="visible"||U.scrollWidth<=0&&U.scrollHeight<=0}function S(U){var j=U.offsetWidth<=0&&U.offsetHeight<=0;if(j&&!U.innerHTML)return!0;try{var G=window.getComputedStyle(U),se=G.getPropertyValue("display");return j?se!==y&&C(U,G):se===f}catch{return console.warn("Failed to inspect element style"),!1}}function c(U){for(var j=U,G=U.getRootNode&&U.getRootNode();j&&j!==document.body;){if(G&&j===G&&(j=G.host.parentNode),S(j))return!1;j=j.parentNode}return!0}function R(U,j){var G=U.nodeName.toLowerCase(),se=b.test(G)&&!U.disabled||G==="a"&&U.href||j;return se&&c(U)}function N(U){var j=U.getAttribute("tabindex");j===null&&(j=void 0);var G=isNaN(j);return(G||j>=0)&&R(U,!G)}function Z(U){var j=[].slice.call(U.querySelectorAll("*"),0).reduce(function(G,se){return G.concat(se.shadowRoot?Z(se.shadowRoot):[se])},[]);return j.filter(N)}n.exports=h.default}(um,um.exports)),um.exports}var cv;function HT(){if(cv)return il;cv=1,Object.defineProperty(il,"__esModule",{value:!0}),il.resetState=S,il.log=c,il.handleBlur=R,il.handleFocus=N,il.markForFocusLater=Z,il.returnFocus=U,il.popWithoutFocus=j,il.setupScopedFocus=G,il.teardownScopedFocus=se;var n=yx(),h=f(n);function f(J){return J&&J.__esModule?J:{default:J}}var y=[],b=null,C=!1;function S(){y=[]}function c(){}function R(){C=!0}function N(){if(C){if(C=!1,!b)return;setTimeout(function(){if(!b.contains(document.activeElement)){var J=(0,h.default)(b)[0]||b;J.focus()}},0)}}function Z(){y.push(document.activeElement)}function U(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,oe=null;try{y.length!==0&&(oe=y.pop(),oe.focus({preventScroll:J}));return}catch{console.warn(["You tried to return focus to",oe,"but it is not in the DOM anymore"].join(" "))}}function j(){y.length>0&&y.pop()}function G(J){b=J,window.addEventListener?(window.addEventListener("blur",R,!1),document.addEventListener("focus",N,!0)):(window.attachEvent("onBlur",R),document.attachEvent("onFocus",N))}function se(){b=null,window.addEventListener?(window.removeEventListener("blur",R),document.removeEventListener("focus",N)):(window.detachEvent("onBlur",R),document.detachEvent("onFocus",N))}return il}var cm={exports:{}},hv;function $T(){return hv||(hv=1,function(n,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=S;var f=yx(),y=b(f);function b(c){return c&&c.__esModule?c:{default:c}}function C(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return c.activeElement.shadowRoot?C(c.activeElement.shadowRoot):c.activeElement}function S(c,R){var N=(0,y.default)(c);if(!N.length){R.preventDefault();return}var Z=void 0,U=R.shiftKey,j=N[0],G=N[N.length-1],se=C();if(c===se){if(!U)return;Z=G}if(G===se&&!U&&(Z=j),j===se&&U&&(Z=G),Z){R.preventDefault(),Z.focus();return}var J=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),oe=J!=null&&J[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(oe){var re=N.indexOf(se);if(re>-1&&(re+=U?-1:1),Z=N[re],typeof Z>"u"){R.preventDefault(),Z=U?G:j,Z.focus();return}R.preventDefault(),Z.focus()}}n.exports=h.default}(cm,cm.exports)),cm.exports}var zl={},Hg,dv;function WT(){if(dv)return Hg;dv=1;var n=function(){};return Hg=n,Hg}var wu={},$g={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/var fv;function GT(){return fv||(fv=1,function(n){(function(){var h=!!(typeof window<"u"&&window.document&&window.document.createElement),f={canUseDOM:h,canUseWorkers:typeof Worker<"u",canUseEventListeners:h&&!!(window.addEventListener||window.attachEvent),canUseViewport:h&&!!window.screen};n.exports?n.exports=f:window.ExecutionEnvironment=f})()}($g)),$g.exports}var pv;function Jy(){if(pv)return wu;pv=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.canUseDOM=wu.SafeNodeList=wu.SafeHTMLCollection=void 0;var n=GT(),h=f(n);function f(C){return C&&C.__esModule?C:{default:C}}var y=h.default,b=y.canUseDOM?window.HTMLElement:{};return wu.SafeHTMLCollection=y.canUseDOM?window.HTMLCollection:{},wu.SafeNodeList=y.canUseDOM?window.NodeList:{},wu.canUseDOM=y.canUseDOM,wu.default=b,wu}var mv;function _x(){if(mv)return zl;mv=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.resetState=C,zl.log=S,zl.assertNodeList=c,zl.setElement=R,zl.validateElement=N,zl.hide=Z,zl.show=U,zl.documentNotReadyOrSSRTesting=j;var n=WT(),h=y(n),f=Jy();function y(G){return G&&G.__esModule?G:{default:G}}var b=null;function C(){b&&(b.removeAttribute?b.removeAttribute("aria-hidden"):b.length!=null?b.forEach(function(G){return G.removeAttribute("aria-hidden")}):document.querySelectorAll(b).forEach(function(G){return G.removeAttribute("aria-hidden")})),b=null}function S(){}function c(G,se){if(!G||!G.length)throw new Error("react-modal: No elements were found for selector "+se+".")}function R(G){var se=G;if(typeof se=="string"&&f.canUseDOM){var J=document.querySelectorAll(se);c(J,se),se=J}return b=se||b,b}function N(G){var se=G||b;return se?Array.isArray(se)||se instanceof HTMLCollection||se instanceof NodeList?se:[se]:((0,h.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function Z(G){var se=!0,J=!1,oe=void 0;try{for(var re=N(G)[Symbol.iterator](),pe;!(se=(pe=re.next()).done);se=!0){var ge=pe.value;ge.setAttribute("aria-hidden","true")}}catch(Oe){J=!0,oe=Oe}finally{try{!se&&re.return&&re.return()}finally{if(J)throw oe}}}function U(G){var se=!0,J=!1,oe=void 0;try{for(var re=N(G)[Symbol.iterator](),pe;!(se=(pe=re.next()).done);se=!0){var ge=pe.value;ge.removeAttribute("aria-hidden")}}catch(Oe){J=!0,oe=Oe}finally{try{!se&&re.return&&re.return()}finally{if(J)throw oe}}}function j(){b=null}return zl}var Wh={},gv;function ZT(){if(gv)return Wh;gv=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.resetState=y,Wh.log=b;var n={},h={};function f(N,Z){N.classList.remove(Z)}function y(){var N=document.getElementsByTagName("html")[0];for(var Z in n)f(N,n[Z]);var U=document.body;for(var j in h)f(U,h[j]);n={},h={}}function b(){}var C=function(Z,U){return Z[U]||(Z[U]=0),Z[U]+=1,U},S=function(Z,U){return Z[U]&&(Z[U]-=1),U},c=function(Z,U,j){j.forEach(function(G){C(U,G),Z.add(G)})},R=function(Z,U,j){j.forEach(function(G){S(U,G),U[G]===0&&Z.remove(G)})};return Wh.add=function(Z,U){return c(Z.classList,Z.nodeName.toLowerCase()=="html"?n:h,U.split(" "))},Wh.remove=function(Z,U){return R(Z.classList,Z.nodeName.toLowerCase()=="html"?n:h,U.split(" "))},Wh}var $d={},yv;function vx(){if(yv)return $d;yv=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.log=y,$d.resetState=b;function n(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}var h=function C(){var S=this;n(this,C),this.register=function(c){S.openInstances.indexOf(c)===-1&&(S.openInstances.push(c),S.emit("register"))},this.deregister=function(c){var R=S.openInstances.indexOf(c);R!==-1&&(S.openInstances.splice(R,1),S.emit("deregister"))},this.subscribe=function(c){S.subscribers.push(c)},this.emit=function(c){S.subscribers.forEach(function(R){return R(c,S.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},f=new h;function y(){console.log("portalOpenInstances ----------"),console.log(f.openInstances.length),f.openInstances.forEach(function(C){return console.log(C)}),console.log("end portalOpenInstances ----------")}function b(){f=new h}return $d.default=f,$d}var Gf={},_v;function qT(){if(_v)return Gf;_v=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.resetState=S,Gf.log=c;var n=vx(),h=f(n);function f(Z){return Z&&Z.__esModule?Z:{default:Z}}var y=void 0,b=void 0,C=[];function S(){for(var Z=[y,b],U=0;U<Z.length;U++){var j=Z[U];j&&j.parentNode&&j.parentNode.removeChild(j)}y=b=null,C=[]}function c(){console.log("bodyTrap ----------"),console.log(C.length);for(var Z=[y,b],U=0;U<Z.length;U++){var j=Z[U],G=j||{};console.log(G.nodeName,G.className,G.id)}console.log("edn bodyTrap ----------")}function R(){C.length!==0&&C[C.length-1].focusContent()}function N(Z,U){!y&&!b&&(y=document.createElement("div"),y.setAttribute("data-react-modal-body-trap",""),y.style.position="absolute",y.style.opacity="0",y.setAttribute("tabindex","0"),y.addEventListener("focus",R),b=y.cloneNode(),b.addEventListener("focus",R)),C=U,C.length>0?(document.body.firstChild!==y&&document.body.insertBefore(y,document.body.firstChild),document.body.lastChild!==b&&document.body.appendChild(b)):(y.parentElement&&y.parentElement.removeChild(y),b.parentElement&&b.parentElement.removeChild(b))}return h.default.subscribe(N),Gf}var vv;function YT(){return vv||(vv=1,function(n,h){Object.defineProperty(h,"__esModule",{value:!0});var f=Object.assign||function(W){for(var Ve=1;Ve<arguments.length;Ve++){var zt=arguments[Ve];for(var Me in zt)Object.prototype.hasOwnProperty.call(zt,Me)&&(W[Me]=zt[Me])}return W},y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},b=function(){function W(Ve,zt){for(var Me=0;Me<zt.length;Me++){var et=zt[Me];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(Ve,et.key,et)}}return function(Ve,zt,Me){return zt&&W(Ve.prototype,zt),Me&&W(Ve,Me),Ve}}(),C=ed(),S=gx(),c=ve(S),R=HT(),N=Oe(R),Z=$T(),U=ve(Z),j=_x(),G=Oe(j),se=ZT(),J=Oe(se),oe=Jy(),re=ve(oe),pe=vx(),ge=ve(pe);qT();function Oe(W){if(W&&W.__esModule)return W;var Ve={};if(W!=null)for(var zt in W)Object.prototype.hasOwnProperty.call(W,zt)&&(Ve[zt]=W[zt]);return Ve.default=W,Ve}function ve(W){return W&&W.__esModule?W:{default:W}}function Ge(W,Ve){if(!(W instanceof Ve))throw new TypeError("Cannot call a class as a function")}function je(W,Ve){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ve&&(typeof Ve=="object"||typeof Ve=="function")?Ve:W}function St(W,Ve){if(typeof Ve!="function"&&Ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ve);W.prototype=Object.create(Ve&&Ve.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),Ve&&(Object.setPrototypeOf?Object.setPrototypeOf(W,Ve):W.__proto__=Ve)}var at={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},Mt=function(Ve){return Ve.code==="Tab"||Ve.keyCode===9},xt=function(Ve){return Ve.code==="Escape"||Ve.keyCode===27},xe=0,Je=function(W){St(Ve,W);function Ve(zt){Ge(this,Ve);var Me=je(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).call(this,zt));return Me.setOverlayRef=function(et){Me.overlay=et,Me.props.overlayRef&&Me.props.overlayRef(et)},Me.setContentRef=function(et){Me.content=et,Me.props.contentRef&&Me.props.contentRef(et)},Me.afterClose=function(){var et=Me.props,Ze=et.appElement,ht=et.ariaHideApp,ae=et.htmlOpenClassName,_e=et.bodyOpenClassName,Ct=et.parentSelector,bt=Ct&&Ct().ownerDocument||document;_e&&J.remove(bt.body,_e),ae&&J.remove(bt.getElementsByTagName("html")[0],ae),ht&&xe>0&&(xe-=1,xe===0&&G.show(Ze)),Me.props.shouldFocusAfterRender&&(Me.props.shouldReturnFocusAfterClose?(N.returnFocus(Me.props.preventScroll),N.teardownScopedFocus()):N.popWithoutFocus()),Me.props.onAfterClose&&Me.props.onAfterClose(),ge.default.deregister(Me)},Me.open=function(){Me.beforeOpen(),Me.state.afterOpen&&Me.state.beforeClose?(clearTimeout(Me.closeTimer),Me.setState({beforeClose:!1})):(Me.props.shouldFocusAfterRender&&(N.setupScopedFocus(Me.node),N.markForFocusLater()),Me.setState({isOpen:!0},function(){Me.openAnimationFrame=requestAnimationFrame(function(){Me.setState({afterOpen:!0}),Me.props.isOpen&&Me.props.onAfterOpen&&Me.props.onAfterOpen({overlayEl:Me.overlay,contentEl:Me.content})})}))},Me.close=function(){Me.props.closeTimeoutMS>0?Me.closeWithTimeout():Me.closeWithoutTimeout()},Me.focusContent=function(){return Me.content&&!Me.contentHasFocus()&&Me.content.focus({preventScroll:!0})},Me.closeWithTimeout=function(){var et=Date.now()+Me.props.closeTimeoutMS;Me.setState({beforeClose:!0,closesAt:et},function(){Me.closeTimer=setTimeout(Me.closeWithoutTimeout,Me.state.closesAt-Date.now())})},Me.closeWithoutTimeout=function(){Me.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},Me.afterClose)},Me.handleKeyDown=function(et){Mt(et)&&(0,U.default)(Me.content,et),Me.props.shouldCloseOnEsc&&xt(et)&&(et.stopPropagation(),Me.requestClose(et))},Me.handleOverlayOnClick=function(et){Me.shouldClose===null&&(Me.shouldClose=!0),Me.shouldClose&&Me.props.shouldCloseOnOverlayClick&&(Me.ownerHandlesClose()?Me.requestClose(et):Me.focusContent()),Me.shouldClose=null},Me.handleContentOnMouseUp=function(){Me.shouldClose=!1},Me.handleOverlayOnMouseDown=function(et){!Me.props.shouldCloseOnOverlayClick&&et.target==Me.overlay&&et.preventDefault()},Me.handleContentOnClick=function(){Me.shouldClose=!1},Me.handleContentOnMouseDown=function(){Me.shouldClose=!1},Me.requestClose=function(et){return Me.ownerHandlesClose()&&Me.props.onRequestClose(et)},Me.ownerHandlesClose=function(){return Me.props.onRequestClose},Me.shouldBeClosed=function(){return!Me.state.isOpen&&!Me.state.beforeClose},Me.contentHasFocus=function(){return document.activeElement===Me.content||Me.content.contains(document.activeElement)},Me.buildClassName=function(et,Ze){var ht=(typeof Ze>"u"?"undefined":y(Ze))==="object"?Ze:{base:at[et],afterOpen:at[et]+"--after-open",beforeClose:at[et]+"--before-close"},ae=ht.base;return Me.state.afterOpen&&(ae=ae+" "+ht.afterOpen),Me.state.beforeClose&&(ae=ae+" "+ht.beforeClose),typeof Ze=="string"&&Ze?ae+" "+Ze:ae},Me.attributesFromObject=function(et,Ze){return Object.keys(Ze).reduce(function(ht,ae){return ht[et+"-"+ae]=Ze[ae],ht},{})},Me.state={afterOpen:!1,beforeClose:!1},Me.shouldClose=null,Me.moveFromContentToOverlay=null,Me}return b(Ve,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(Me,et){this.props.isOpen&&!Me.isOpen?this.open():!this.props.isOpen&&Me.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!et.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var Me=this.props,et=Me.appElement,Ze=Me.ariaHideApp,ht=Me.htmlOpenClassName,ae=Me.bodyOpenClassName,_e=Me.parentSelector,Ct=_e&&_e().ownerDocument||document;ae&&J.add(Ct.body,ae),ht&&J.add(Ct.getElementsByTagName("html")[0],ht),Ze&&(xe+=1,G.hide(et)),ge.default.register(this)}},{key:"render",value:function(){var Me=this.props,et=Me.id,Ze=Me.className,ht=Me.overlayClassName,ae=Me.defaultStyles,_e=Me.children,Ct=Ze?{}:ae.content,bt=ht?{}:ae.overlay;if(this.shouldBeClosed())return null;var wt={ref:this.setOverlayRef,className:this.buildClassName("overlay",ht),style:f({},bt,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},lr=f({id:et,ref:this.setContentRef,style:f({},Ct,this.props.style.content),className:this.buildClassName("content",Ze),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",f({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),pr=this.props.contentElement(lr,_e);return this.props.overlayElement(wt,pr)}}]),Ve}(C.Component);Je.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Je.propTypes={isOpen:c.default.bool.isRequired,defaultStyles:c.default.shape({content:c.default.object,overlay:c.default.object}),style:c.default.shape({content:c.default.object,overlay:c.default.object}),className:c.default.oneOfType([c.default.string,c.default.object]),overlayClassName:c.default.oneOfType([c.default.string,c.default.object]),parentSelector:c.default.func,bodyOpenClassName:c.default.string,htmlOpenClassName:c.default.string,ariaHideApp:c.default.bool,appElement:c.default.oneOfType([c.default.instanceOf(re.default),c.default.instanceOf(oe.SafeHTMLCollection),c.default.instanceOf(oe.SafeNodeList),c.default.arrayOf(c.default.instanceOf(re.default))]),onAfterOpen:c.default.func,onAfterClose:c.default.func,onRequestClose:c.default.func,closeTimeoutMS:c.default.number,shouldFocusAfterRender:c.default.bool,shouldCloseOnOverlayClick:c.default.bool,shouldReturnFocusAfterClose:c.default.bool,preventScroll:c.default.bool,role:c.default.string,contentLabel:c.default.string,aria:c.default.object,data:c.default.object,children:c.default.node,shouldCloseOnEsc:c.default.bool,overlayRef:c.default.func,contentRef:c.default.func,id:c.default.string,overlayElement:c.default.func,contentElement:c.default.func,testId:c.default.string},h.default=Je,n.exports=h.default}(lm,lm.exports)),lm.exports}function xx(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function wx(n){function h(f){var y=this.constructor.getDerivedStateFromProps(n,f);return y??null}this.setState(h.bind(this))}function bx(n,h){try{var f=this.props,y=this.state;this.props=n,this.state=h,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(f,y)}finally{this.props=f,this.state=y}}xx.__suppressDeprecationWarning=!0;wx.__suppressDeprecationWarning=!0;bx.__suppressDeprecationWarning=!0;function XT(n){var h=n.prototype;if(!h||!h.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof h.getSnapshotBeforeUpdate!="function")return n;var f=null,y=null,b=null;if(typeof h.componentWillMount=="function"?f="componentWillMount":typeof h.UNSAFE_componentWillMount=="function"&&(f="UNSAFE_componentWillMount"),typeof h.componentWillReceiveProps=="function"?y="componentWillReceiveProps":typeof h.UNSAFE_componentWillReceiveProps=="function"&&(y="UNSAFE_componentWillReceiveProps"),typeof h.componentWillUpdate=="function"?b="componentWillUpdate":typeof h.UNSAFE_componentWillUpdate=="function"&&(b="UNSAFE_componentWillUpdate"),f!==null||y!==null||b!==null){var C=n.displayName||n.name,S=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+C+" uses "+S+" but also contains the following legacy lifecycles:"+(f!==null?`
  `+f:"")+(y!==null?`
  `+y:"")+(b!==null?`
  `+b:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(h.componentWillMount=xx,h.componentWillReceiveProps=wx),typeof h.getSnapshotBeforeUpdate=="function"){if(typeof h.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");h.componentWillUpdate=bx;var c=h.componentDidUpdate;h.componentDidUpdate=function(N,Z,U){var j=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:U;c.call(this,N,Z,j)}}return n}const KT=Object.freeze(Object.defineProperty({__proto__:null,polyfill:XT},Symbol.toStringTag,{value:"Module"})),JT=p1(KT);var xv;function QT(){if(xv)return Uc;xv=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.bodyOpenClassName=Uc.portalClassName=void 0;var n=Object.assign||function(xt){for(var xe=1;xe<arguments.length;xe++){var Je=arguments[xe];for(var W in Je)Object.prototype.hasOwnProperty.call(Je,W)&&(xt[W]=Je[W])}return xt},h=function(){function xt(xe,Je){for(var W=0;W<Je.length;W++){var Ve=Je[W];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(xe,Ve.key,Ve)}}return function(xe,Je,W){return Je&&xt(xe.prototype,Je),W&&xt(xe,W),xe}}(),f=ed(),y=oe(f),b=$v(),C=oe(b),S=gx(),c=oe(S),R=YT(),N=oe(R),Z=_x(),U=J(Z),j=Jy(),G=oe(j),se=JT;function J(xt){if(xt&&xt.__esModule)return xt;var xe={};if(xt!=null)for(var Je in xt)Object.prototype.hasOwnProperty.call(xt,Je)&&(xe[Je]=xt[Je]);return xe.default=xt,xe}function oe(xt){return xt&&xt.__esModule?xt:{default:xt}}function re(xt,xe){if(!(xt instanceof xe))throw new TypeError("Cannot call a class as a function")}function pe(xt,xe){if(!xt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe&&(typeof xe=="object"||typeof xe=="function")?xe:xt}function ge(xt,xe){if(typeof xe!="function"&&xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xe);xt.prototype=Object.create(xe&&xe.prototype,{constructor:{value:xt,enumerable:!1,writable:!0,configurable:!0}}),xe&&(Object.setPrototypeOf?Object.setPrototypeOf(xt,xe):xt.__proto__=xe)}var Oe=Uc.portalClassName="ReactModalPortal",ve=Uc.bodyOpenClassName="ReactModal__Body--open",Ge=j.canUseDOM&&C.default.createPortal!==void 0,je=function(xe){return document.createElement(xe)},St=function(){return Ge?C.default.createPortal:C.default.unstable_renderSubtreeIntoContainer};function at(xt){return xt()}var Mt=function(xt){ge(xe,xt);function xe(){var Je,W,Ve,zt;re(this,xe);for(var Me=arguments.length,et=Array(Me),Ze=0;Ze<Me;Ze++)et[Ze]=arguments[Ze];return zt=(W=(Ve=pe(this,(Je=xe.__proto__||Object.getPrototypeOf(xe)).call.apply(Je,[this].concat(et))),Ve),Ve.removePortal=function(){!Ge&&C.default.unmountComponentAtNode(Ve.node);var ht=at(Ve.props.parentSelector);ht&&ht.contains(Ve.node)?ht.removeChild(Ve.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},Ve.portalRef=function(ht){Ve.portal=ht},Ve.renderPortal=function(ht){var ae=St(),_e=ae(Ve,y.default.createElement(N.default,n({defaultStyles:xe.defaultStyles},ht)),Ve.node);Ve.portalRef(_e)},W),pe(Ve,zt)}return h(xe,[{key:"componentDidMount",value:function(){if(j.canUseDOM){Ge||(this.node=je("div")),this.node.className=this.props.portalClassName;var W=at(this.props.parentSelector);W.appendChild(this.node),!Ge&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(W){var Ve=at(W.parentSelector),zt=at(this.props.parentSelector);return{prevParent:Ve,nextParent:zt}}},{key:"componentDidUpdate",value:function(W,Ve,zt){if(j.canUseDOM){var Me=this.props,et=Me.isOpen,Ze=Me.portalClassName;W.portalClassName!==Ze&&(this.node.className=Ze);var ht=zt.prevParent,ae=zt.nextParent;ae!==ht&&(ht.removeChild(this.node),ae.appendChild(this.node)),!(!W.isOpen&&!et)&&!Ge&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!j.canUseDOM||!this.node||!this.portal)){var W=this.portal.state,Ve=Date.now(),zt=W.isOpen&&this.props.closeTimeoutMS&&(W.closesAt||Ve+this.props.closeTimeoutMS);zt?(W.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,zt-Ve)):this.removePortal()}}},{key:"render",value:function(){if(!j.canUseDOM||!Ge)return null;!this.node&&Ge&&(this.node=je("div"));var W=St();return W(y.default.createElement(N.default,n({ref:this.portalRef,defaultStyles:xe.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(W){U.setElement(W)}}]),xe}(f.Component);return Mt.propTypes={isOpen:c.default.bool.isRequired,style:c.default.shape({content:c.default.object,overlay:c.default.object}),portalClassName:c.default.string,bodyOpenClassName:c.default.string,htmlOpenClassName:c.default.string,className:c.default.oneOfType([c.default.string,c.default.shape({base:c.default.string.isRequired,afterOpen:c.default.string.isRequired,beforeClose:c.default.string.isRequired})]),overlayClassName:c.default.oneOfType([c.default.string,c.default.shape({base:c.default.string.isRequired,afterOpen:c.default.string.isRequired,beforeClose:c.default.string.isRequired})]),appElement:c.default.oneOfType([c.default.instanceOf(G.default),c.default.instanceOf(j.SafeHTMLCollection),c.default.instanceOf(j.SafeNodeList),c.default.arrayOf(c.default.instanceOf(G.default))]),onAfterOpen:c.default.func,onRequestClose:c.default.func,closeTimeoutMS:c.default.number,ariaHideApp:c.default.bool,shouldFocusAfterRender:c.default.bool,shouldCloseOnOverlayClick:c.default.bool,shouldReturnFocusAfterClose:c.default.bool,preventScroll:c.default.bool,parentSelector:c.default.func,aria:c.default.object,data:c.default.object,role:c.default.string,contentLabel:c.default.string,shouldCloseOnEsc:c.default.bool,overlayRef:c.default.func,contentRef:c.default.func,id:c.default.string,overlayElement:c.default.func,contentElement:c.default.func},Mt.defaultProps={isOpen:!1,portalClassName:Oe,bodyOpenClassName:ve,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(xe,Je){return y.default.createElement("div",xe,Je)},contentElement:function(xe,Je){return y.default.createElement("div",xe,Je)}},Mt.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,se.polyfill)(Mt),Uc.default=Mt,Uc}var wv;function eE(){return wv||(wv=1,function(n,h){Object.defineProperty(h,"__esModule",{value:!0});var f=QT(),y=b(f);function b(C){return C&&C.__esModule?C:{default:C}}h.default=y.default,n.exports=h.default}(om,om.exports)),om.exports}var tE=eE();const Sx=af(tE);Sx.setAppElement("#root");function rE({isOpen:n,afterOpen:h,onClose:f,content:y}){const b={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",minWidth:"60vw",minHeight:"60vh",textAlign:"center"}};return yt.jsx(Sx,{isOpen:n,onAfterOpen:h,onRequestClose:f,style:b,contentLabel:"Example Modal",children:y})}function Wg({img:n,title:h,children:f,selected:y,onClick:b,name:C}){return yt.jsxs("div",{onClick:()=>b(C),className:["cardOption",y?"cardOptionSelected":""].join(" "),children:[yt.jsx("img",{className:"cardOptionImage",src:n,alt:h}),yt.jsx("h3",{children:h}),f]})}function nE({settings:n,onChange:h}){const f=y=>{h({...n,msgPosition:y})};return yt.jsx("div",{className:"",children:yt.jsxs("div",{className:"cardOptions",children:[yt.jsxs(Wg,{selected:n.msgPosition==="closest",img:"img/config-closest.png",name:"closest",title:yt.jsx(hs,{id:"app.config.closestMsg",defaultMessage:"closest"}),onClick:f,children:[yt.jsx(hs,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",yt.jsxs("strong",{children:[" ",yt.jsx(hs,{id:"app.config.closestMsg",defaultMessage:"closest"})," "]})," ",yt.jsx(hs,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]}),yt.jsxs(Wg,{selected:n.msgPosition==="after",img:"img/config-after.png",name:"after",title:yt.jsx(hs,{id:"app.config.closestNextMsg",defaultMessage:"next"}),onClick:f,children:[yt.jsx(hs,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",yt.jsx("strong",{children:yt.jsx(hs,{id:"app.config.closestNextMsg",defaultMessage:"next"})})," ",yt.jsx(hs,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]}),yt.jsxs(Wg,{selected:n.msgPosition==="before",img:"img/config-before.png",name:"before",title:yt.jsx(hs,{id:"app.config.closestPreviousMsg",defaultMessage:"previous"}),onClick:f,children:[yt.jsx(hs,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",yt.jsx("strong",{children:yt.jsx(hs,{id:"app.config.previousNextMsg",defaultMessage:"next"})})," ",yt.jsx(hs,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]})]})})}function iE({dataAvailable:n,dataFiles:h,mapData:f,handleNewUploadClick:y,settings:b,handleSettingsChange:C}){const[S,c]=Xr.useState(null),R=()=>{c(null)};return Xr.useEffect(()=>{c(null)},[b.msgPosition]),yt.jsx(yt.Fragment,{children:yt.jsxs("header",{className:"header",children:[yt.jsxs("div",{className:"top",children:[!n&&yt.jsx(jT,{onOptionClick:N=>{N==="options"&&c(yt.jsx(nE,{settings:b,onChange:C}))}}),yt.jsx(rE,{isOpen:S!==null,onClose:R,content:S})]}),yt.jsxs("h1",{className:n?"titleSmall":"title",children:[yt.jsx("img",{src:N0,className:"logo",alt:"logo"}),yt.jsx("span",{children:"ChatMap"})]}),n?yt.jsxs("div",{className:"fileOptions",children:[yt.jsx(NT,{data:f,dataFiles:h}),yt.jsx("button",{onClick:y,className:"secondaryButton",children:yt.jsx(hs,{id:"app.uploadNewFile",defaultMessage:"Upload new file"})})]}):yt.jsxs(yt.Fragment,{children:[yt.jsx("p",{className:"subtitle",children:yt.jsx(hs,{id:"app.subtitle",defaultMessage:"Export and upload a chat to visualize locations, messages and media"})}),yt.jsx("p",{className:"highlighted",children:yt.jsx(hs,{id:"app.supportedApps",defaultMessage:"Now it works with WhatsApp, Telegram or Signal!"})})]})]})})}function sE(){return yt.jsxs(yt.Fragment,{children:[yt.jsxs("p",{className:"info",children:[yt.jsx("strong",{children:"From chat to map"})," check this quick ",yt.jsx("strong",{children:yt.jsx("a",{href:"https://www.youtube.com/watch?v=ScHgVhyj1aw",children:"video tutorial"})})]}),yt.jsxs("div",{className:"infoLinks",children:[yt.jsxs("div",{className:"copy",children:[yt.jsx("a",{className:"github",href:"https://github.com/hotosm/chatmap"}),yt.jsx("span",{children:"Free and Open Source Software"})]}),yt.jsx("a",{href:"https://www.hotosm.org/privacy",children:"We collect zero data. https://www.hotosm.org/privacy"})]})]})}var oo=function(){return oo=Object.assign||function(h){for(var f,y=1,b=arguments.length;y<b;y++){f=arguments[y];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(h[C]=f[C])}return h},oo.apply(this,arguments)};function Mm(n,h,f){if(f||arguments.length===2)for(var y=0,b=h.length,C;y<b;y++)(C||!(y in h))&&(C||(C=Array.prototype.slice.call(h,0,y)),C[y]=h[y]);return n.concat(C||Array.prototype.slice.call(h))}var yi="-ms-",Yf="-moz-",Kn="-webkit-",kx="comm",Zm="rule",Qy="decl",aE="@import",Tx="@keyframes",oE="@layer",Ex=Math.abs,e_=String.fromCharCode,yy=Object.assign;function lE(n,h){return js(n,0)^45?(((h<<2^js(n,0))<<2^js(n,1))<<2^js(n,2))<<2^js(n,3):0}function Cx(n){return n.trim()}function oc(n,h){return(n=h.exec(n))?n[0]:n}function fn(n,h,f){return n.replace(h,f)}function vm(n,h,f){return n.indexOf(h,f)}function js(n,h){return n.charCodeAt(h)|0}function ef(n,h,f){return n.slice(h,f)}function bu(n){return n.length}function Ix(n){return n.length}function Zf(n,h){return h.push(n),n}function uE(n,h){return n.map(h).join("")}function bv(n,h){return n.filter(function(f){return!oc(f,h)})}var qm=1,tf=1,Px=0,al=0,ds=0,cf="";function Ym(n,h,f,y,b,C,S,c){return{value:n,root:h,parent:f,type:y,props:b,children:C,line:qm,column:tf,length:S,return:"",siblings:c}}function Vc(n,h){return yy(Ym("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},h)}function Wd(n){for(;n.root;)n=Vc(n.root,{children:[n]});Zf(n,n.siblings)}function cE(){return ds}function hE(){return ds=al>0?js(cf,--al):0,tf--,ds===10&&(tf=1,qm--),ds}function Ll(){return ds=al<Px?js(cf,al++):0,tf++,ds===10&&(tf=1,qm++),ds}function Yh(){return js(cf,al)}function xm(){return al}function Xm(n,h){return ef(cf,n,h)}function _y(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dE(n){return qm=tf=1,Px=bu(cf=n),al=0,[]}function fE(n){return cf="",n}function Gg(n){return Cx(Xm(al-1,vy(n===91?n+2:n===40?n+1:n)))}function pE(n){for(;(ds=Yh())&&ds<33;)Ll();return _y(n)>2||_y(ds)>3?"":" "}function mE(n,h){for(;--h&&Ll()&&!(ds<48||ds>102||ds>57&&ds<65||ds>70&&ds<97););return Xm(n,xm()+(h<6&&Yh()==32&&Ll()==32))}function vy(n){for(;Ll();)switch(ds){case n:return al;case 34:case 39:n!==34&&n!==39&&vy(ds);break;case 40:n===41&&vy(n);break;case 92:Ll();break}return al}function gE(n,h){for(;Ll()&&n+ds!==57;)if(n+ds===84&&Yh()===47)break;return"/*"+Xm(h,al-1)+"*"+e_(n===47?n:Ll())}function yE(n){for(;!_y(Yh());)Ll();return Xm(n,al)}function _E(n){return fE(wm("",null,null,null,[""],n=dE(n),0,[0],n))}function wm(n,h,f,y,b,C,S,c,R){for(var N=0,Z=0,U=S,j=0,G=0,se=0,J=1,oe=1,re=1,pe=0,ge="",Oe=b,ve=C,Ge=y,je=ge;oe;)switch(se=pe,pe=Ll()){case 40:if(se!=108&&js(je,U-1)==58){vm(je+=fn(Gg(pe),"&","&\f"),"&\f",Ex(N?c[N-1]:0))!=-1&&(re=-1);break}case 34:case 39:case 91:je+=Gg(pe);break;case 9:case 10:case 13:case 32:je+=pE(se);break;case 92:je+=mE(xm()-1,7);continue;case 47:switch(Yh()){case 42:case 47:Zf(vE(gE(Ll(),xm()),h,f,R),R);break;default:je+="/"}break;case 123*J:c[N++]=bu(je)*re;case 125*J:case 59:case 0:switch(pe){case 0:case 125:oe=0;case 59+Z:re==-1&&(je=fn(je,/\f/g,"")),G>0&&bu(je)-U&&Zf(G>32?kv(je+";",y,f,U-1,R):kv(fn(je," ","")+";",y,f,U-2,R),R);break;case 59:je+=";";default:if(Zf(Ge=Sv(je,h,f,N,Z,b,c,ge,Oe=[],ve=[],U,C),C),pe===123)if(Z===0)wm(je,h,Ge,Ge,Oe,C,U,c,ve);else switch(j===99&&js(je,3)===110?100:j){case 100:case 108:case 109:case 115:wm(n,Ge,Ge,y&&Zf(Sv(n,Ge,Ge,0,0,b,c,ge,b,Oe=[],U,ve),ve),b,ve,U,c,y?Oe:ve);break;default:wm(je,Ge,Ge,Ge,[""],ve,0,c,ve)}}N=Z=G=0,J=re=1,ge=je="",U=S;break;case 58:U=1+bu(je),G=se;default:if(J<1){if(pe==123)--J;else if(pe==125&&J++==0&&hE()==125)continue}switch(je+=e_(pe),pe*J){case 38:re=Z>0?1:(je+="\f",-1);break;case 44:c[N++]=(bu(je)-1)*re,re=1;break;case 64:Yh()===45&&(je+=Gg(Ll())),j=Yh(),Z=U=bu(ge=je+=yE(xm())),pe++;break;case 45:se===45&&bu(je)==2&&(J=0)}}return C}function Sv(n,h,f,y,b,C,S,c,R,N,Z,U){for(var j=b-1,G=b===0?C:[""],se=Ix(G),J=0,oe=0,re=0;J<y;++J)for(var pe=0,ge=ef(n,j+1,j=Ex(oe=S[J])),Oe=n;pe<se;++pe)(Oe=Cx(oe>0?G[pe]+" "+ge:fn(ge,/&\f/g,G[pe])))&&(R[re++]=Oe);return Ym(n,h,f,b===0?Zm:c,R,N,Z,U)}function vE(n,h,f,y){return Ym(n,h,f,kx,e_(cE()),ef(n,2,-2),0,y)}function kv(n,h,f,y,b){return Ym(n,h,f,Qy,ef(n,0,y),ef(n,y+1,-1),y,b)}function Mx(n,h,f){switch(lE(n,h)){case 5103:return Kn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kn+n+n;case 4789:return Yf+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Kn+n+Yf+n+yi+n+n;case 5936:switch(js(n,h+11)){case 114:return Kn+n+yi+fn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Kn+n+yi+fn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Kn+n+yi+fn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Kn+n+yi+n+n;case 6165:return Kn+n+yi+"flex-"+n+n;case 5187:return Kn+n+fn(n,/(\w+).+(:[^]+)/,Kn+"box-$1$2"+yi+"flex-$1$2")+n;case 5443:return Kn+n+yi+"flex-item-"+fn(n,/flex-|-self/g,"")+(oc(n,/flex-|baseline/)?"":yi+"grid-row-"+fn(n,/flex-|-self/g,""))+n;case 4675:return Kn+n+yi+"flex-line-pack"+fn(n,/align-content|flex-|-self/g,"")+n;case 5548:return Kn+n+yi+fn(n,"shrink","negative")+n;case 5292:return Kn+n+yi+fn(n,"basis","preferred-size")+n;case 6060:return Kn+"box-"+fn(n,"-grow","")+Kn+n+yi+fn(n,"grow","positive")+n;case 4554:return Kn+fn(n,/([^-])(transform)/g,"$1"+Kn+"$2")+n;case 6187:return fn(fn(fn(n,/(zoom-|grab)/,Kn+"$1"),/(image-set)/,Kn+"$1"),n,"")+n;case 5495:case 3959:return fn(n,/(image-set\([^]*)/,Kn+"$1$`$1");case 4968:return fn(fn(n,/(.+:)(flex-)?(.*)/,Kn+"box-pack:$3"+yi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kn+n+n;case 4200:if(!oc(n,/flex-|baseline/))return yi+"grid-column-align"+ef(n,h)+n;break;case 2592:case 3360:return yi+fn(n,"template-","")+n;case 4384:case 3616:return f&&f.some(function(y,b){return h=b,oc(y.props,/grid-\w+-end/)})?~vm(n+(f=f[h].value),"span",0)?n:yi+fn(n,"-start","")+n+yi+"grid-row-span:"+(~vm(f,"span",0)?oc(f,/\d+/):+oc(f,/\d+/)-+oc(n,/\d+/))+";":yi+fn(n,"-start","")+n;case 4896:case 4128:return f&&f.some(function(y){return oc(y.props,/grid-\w+-start/)})?n:yi+fn(fn(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return fn(n,/(.+)-inline(.+)/,Kn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bu(n)-1-h>6)switch(js(n,h+1)){case 109:if(js(n,h+4)!==45)break;case 102:return fn(n,/(.+:)(.+)-([^]+)/,"$1"+Kn+"$2-$3$1"+Yf+(js(n,h+3)==108?"$3":"$2-$3"))+n;case 115:return~vm(n,"stretch",0)?Mx(fn(n,"stretch","fill-available"),h,f)+n:n}break;case 5152:case 5920:return fn(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(y,b,C,S,c,R,N){return yi+b+":"+C+N+(S?yi+b+"-span:"+(c?R:+R-+C)+N:"")+n});case 4949:if(js(n,h+6)===121)return fn(n,":",":"+Kn)+n;break;case 6444:switch(js(n,js(n,14)===45?18:11)){case 120:return fn(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Kn+(js(n,14)===45?"inline-":"")+"box$3$1"+Kn+"$2$3$1"+yi+"$2box$3")+n;case 100:return fn(n,":",":"+yi)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return fn(n,"scroll-","scroll-snap-")+n}return n}function Am(n,h){for(var f="",y=0;y<n.length;y++)f+=h(n[y],y,n,h)||"";return f}function xE(n,h,f,y){switch(n.type){case oE:if(n.children.length)break;case aE:case Qy:return n.return=n.return||n.value;case kx:return"";case Tx:return n.return=n.value+"{"+Am(n.children,y)+"}";case Zm:if(!bu(n.value=n.props.join(",")))return""}return bu(f=Am(n.children,y))?n.return=n.value+"{"+f+"}":""}function wE(n){var h=Ix(n);return function(f,y,b,C){for(var S="",c=0;c<h;c++)S+=n[c](f,y,b,C)||"";return S}}function bE(n){return function(h){h.root||(h=h.return)&&n(h)}}function SE(n,h,f,y){if(n.length>-1&&!n.return)switch(n.type){case Qy:n.return=Mx(n.value,n.length,f);return;case Tx:return Am([Vc(n,{value:fn(n.value,"@","@"+Kn)})],y);case Zm:if(n.length)return uE(f=n.props,function(b){switch(oc(b,y=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Wd(Vc(n,{props:[fn(b,/:(read-\w+)/,":"+Yf+"$1")]})),Wd(Vc(n,{props:[b]})),yy(n,{props:bv(f,y)});break;case"::placeholder":Wd(Vc(n,{props:[fn(b,/:(plac\w+)/,":"+Kn+"input-$1")]})),Wd(Vc(n,{props:[fn(b,/:(plac\w+)/,":"+Yf+"$1")]})),Wd(Vc(n,{props:[fn(b,/:(plac\w+)/,yi+"input-$1")]})),Wd(Vc(n,{props:[b]})),yy(n,{props:bv(f,y)});break}return""})}}var kE={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fo={},rf=typeof process<"u"&&Fo!==void 0&&(Fo.REACT_APP_SC_ATTR||Fo.SC_ATTR)||"data-styled",Ax="active",Dx="data-styled-version",Km="6.1.13",t_=`/*!sc*/
`,Dm=typeof window<"u"&&"HTMLElement"in window,TE=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Fo!==void 0&&Fo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Fo.REACT_APP_SC_DISABLE_SPEEDY!==""?Fo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Fo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Fo!==void 0&&Fo.SC_DISABLE_SPEEDY!==void 0&&Fo.SC_DISABLE_SPEEDY!==""&&Fo.SC_DISABLE_SPEEDY!=="false"&&Fo.SC_DISABLE_SPEEDY),Jm=Object.freeze([]),nf=Object.freeze({});function EE(n,h,f){return f===void 0&&(f=nf),n.theme!==f.theme&&n.theme||h||f.theme}var zx=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),CE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,IE=/(^-|-$)/g;function Tv(n){return n.replace(CE,"-").replace(IE,"")}var PE=/(a)(d)/gi,hm=52,Ev=function(n){return String.fromCharCode(n+(n>25?39:97))};function xy(n){var h,f="";for(h=Math.abs(n);h>hm;h=h/hm|0)f=Ev(h%hm)+f;return(Ev(h%hm)+f).replace(PE,"$1-$2")}var Zg,Rx=5381,qd=function(n,h){for(var f=h.length;f;)n=33*n^h.charCodeAt(--f);return n},Lx=function(n){return qd(Rx,n)};function ME(n){return xy(Lx(n)>>>0)}function AE(n){return n.displayName||n.name||"Component"}function qg(n){return typeof n=="string"&&!0}var Ox=typeof Symbol=="function"&&Symbol.for,Fx=Ox?Symbol.for("react.memo"):60115,DE=Ox?Symbol.for("react.forward_ref"):60112,zE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},RE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Bx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LE=((Zg={})[DE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Zg[Fx]=Bx,Zg);function Cv(n){return("type"in(h=n)&&h.type.$$typeof)===Fx?Bx:"$$typeof"in n?LE[n.$$typeof]:zE;var h}var OE=Object.defineProperty,FE=Object.getOwnPropertyNames,Iv=Object.getOwnPropertySymbols,BE=Object.getOwnPropertyDescriptor,NE=Object.getPrototypeOf,Pv=Object.prototype;function Nx(n,h,f){if(typeof h!="string"){if(Pv){var y=NE(h);y&&y!==Pv&&Nx(n,y,f)}var b=FE(h);Iv&&(b=b.concat(Iv(h)));for(var C=Cv(n),S=Cv(h),c=0;c<b.length;++c){var R=b[c];if(!(R in RE||f&&f[R]||S&&R in S||C&&R in C)){var N=BE(h,R);try{OE(n,R,N)}catch{}}}}return n}function sf(n){return typeof n=="function"}function r_(n){return typeof n=="object"&&"styledComponentId"in n}function Zh(n,h){return n&&h?"".concat(n," ").concat(h):n||h||""}function Mv(n,h){if(n.length===0)return"";for(var f=n[0],y=1;y<n.length;y++)f+=n[y];return f}function ep(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function wy(n,h,f){if(f===void 0&&(f=!1),!f&&!ep(n)&&!Array.isArray(n))return h;if(Array.isArray(h))for(var y=0;y<h.length;y++)n[y]=wy(n[y],h[y]);else if(ep(h))for(var y in h)n[y]=wy(n[y],h[y]);return n}function n_(n,h){Object.defineProperty(n,"toString",{value:h})}function op(n){for(var h=[],f=1;f<arguments.length;f++)h[f-1]=arguments[f];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(h.length>0?" Args: ".concat(h.join(", ")):""))}var jE=function(){function n(h){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=h}return n.prototype.indexOfGroup=function(h){for(var f=0,y=0;y<h;y++)f+=this.groupSizes[y];return f},n.prototype.insertRules=function(h,f){if(h>=this.groupSizes.length){for(var y=this.groupSizes,b=y.length,C=b;h>=C;)if((C<<=1)<0)throw op(16,"".concat(h));this.groupSizes=new Uint32Array(C),this.groupSizes.set(y),this.length=C;for(var S=b;S<C;S++)this.groupSizes[S]=0}for(var c=this.indexOfGroup(h+1),R=(S=0,f.length);S<R;S++)this.tag.insertRule(c,f[S])&&(this.groupSizes[h]++,c++)},n.prototype.clearGroup=function(h){if(h<this.length){var f=this.groupSizes[h],y=this.indexOfGroup(h),b=y+f;this.groupSizes[h]=0;for(var C=y;C<b;C++)this.tag.deleteRule(y)}},n.prototype.getGroup=function(h){var f="";if(h>=this.length||this.groupSizes[h]===0)return f;for(var y=this.groupSizes[h],b=this.indexOfGroup(h),C=b+y,S=b;S<C;S++)f+="".concat(this.tag.getRule(S)).concat(t_);return f},n}(),bm=new Map,zm=new Map,Sm=1,dm=function(n){if(bm.has(n))return bm.get(n);for(;zm.has(Sm);)Sm++;var h=Sm++;return bm.set(n,h),zm.set(h,n),h},UE=function(n,h){Sm=h+1,bm.set(n,h),zm.set(h,n)},VE="style[".concat(rf,"][").concat(Dx,'="').concat(Km,'"]'),HE=new RegExp("^".concat(rf,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),$E=function(n,h,f){for(var y,b=f.split(","),C=0,S=b.length;C<S;C++)(y=b[C])&&n.registerName(h,y)},WE=function(n,h){for(var f,y=((f=h.textContent)!==null&&f!==void 0?f:"").split(t_),b=[],C=0,S=y.length;C<S;C++){var c=y[C].trim();if(c){var R=c.match(HE);if(R){var N=0|parseInt(R[1],10),Z=R[2];N!==0&&(UE(Z,N),$E(n,Z,R[3]),n.getTag().insertRules(N,b)),b.length=0}else b.push(c)}}},Av=function(n){for(var h=document.querySelectorAll(VE),f=0,y=h.length;f<y;f++){var b=h[f];b&&b.getAttribute(rf)!==Ax&&(WE(n,b),b.parentNode&&b.parentNode.removeChild(b))}};function GE(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var jx=function(n){var h=document.head,f=n||h,y=document.createElement("style"),b=function(c){var R=Array.from(c.querySelectorAll("style[".concat(rf,"]")));return R[R.length-1]}(f),C=b!==void 0?b.nextSibling:null;y.setAttribute(rf,Ax),y.setAttribute(Dx,Km);var S=GE();return S&&y.setAttribute("nonce",S),f.insertBefore(y,C),y},ZE=function(){function n(h){this.element=jx(h),this.element.appendChild(document.createTextNode("")),this.sheet=function(f){if(f.sheet)return f.sheet;for(var y=document.styleSheets,b=0,C=y.length;b<C;b++){var S=y[b];if(S.ownerNode===f)return S}throw op(17)}(this.element),this.length=0}return n.prototype.insertRule=function(h,f){try{return this.sheet.insertRule(f,h),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(h){this.sheet.deleteRule(h),this.length--},n.prototype.getRule=function(h){var f=this.sheet.cssRules[h];return f&&f.cssText?f.cssText:""},n}(),qE=function(){function n(h){this.element=jx(h),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(h,f){if(h<=this.length&&h>=0){var y=document.createTextNode(f);return this.element.insertBefore(y,this.nodes[h]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(h){this.element.removeChild(this.nodes[h]),this.length--},n.prototype.getRule=function(h){return h<this.length?this.nodes[h].textContent:""},n}(),YE=function(){function n(h){this.rules=[],this.length=0}return n.prototype.insertRule=function(h,f){return h<=this.length&&(this.rules.splice(h,0,f),this.length++,!0)},n.prototype.deleteRule=function(h){this.rules.splice(h,1),this.length--},n.prototype.getRule=function(h){return h<this.length?this.rules[h]:""},n}(),Dv=Dm,XE={isServer:!Dm,useCSSOMInjection:!TE},Ux=function(){function n(h,f,y){h===void 0&&(h=nf),f===void 0&&(f={});var b=this;this.options=oo(oo({},XE),h),this.gs=f,this.names=new Map(y),this.server=!!h.isServer,!this.server&&Dm&&Dv&&(Dv=!1,Av(this)),n_(this,function(){return function(C){for(var S=C.getTag(),c=S.length,R="",N=function(U){var j=function(re){return zm.get(re)}(U);if(j===void 0)return"continue";var G=C.names.get(j),se=S.getGroup(U);if(G===void 0||!G.size||se.length===0)return"continue";var J="".concat(rf,".g").concat(U,'[id="').concat(j,'"]'),oe="";G!==void 0&&G.forEach(function(re){re.length>0&&(oe+="".concat(re,","))}),R+="".concat(se).concat(J,'{content:"').concat(oe,'"}').concat(t_)},Z=0;Z<c;Z++)N(Z);return R}(b)})}return n.registerId=function(h){return dm(h)},n.prototype.rehydrate=function(){!this.server&&Dm&&Av(this)},n.prototype.reconstructWithOptions=function(h,f){return f===void 0&&(f=!0),new n(oo(oo({},this.options),h),this.gs,f&&this.names||void 0)},n.prototype.allocateGSInstance=function(h){return this.gs[h]=(this.gs[h]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(h=function(f){var y=f.useCSSOMInjection,b=f.target;return f.isServer?new YE(b):y?new ZE(b):new qE(b)}(this.options),new jE(h)));var h},n.prototype.hasNameForId=function(h,f){return this.names.has(h)&&this.names.get(h).has(f)},n.prototype.registerName=function(h,f){if(dm(h),this.names.has(h))this.names.get(h).add(f);else{var y=new Set;y.add(f),this.names.set(h,y)}},n.prototype.insertRules=function(h,f,y){this.registerName(h,f),this.getTag().insertRules(dm(h),y)},n.prototype.clearNames=function(h){this.names.has(h)&&this.names.get(h).clear()},n.prototype.clearRules=function(h){this.getTag().clearGroup(dm(h)),this.clearNames(h)},n.prototype.clearTag=function(){this.tag=void 0},n}(),KE=/&/g,JE=/^\s*\/\/.*$/gm;function Vx(n,h){return n.map(function(f){return f.type==="rule"&&(f.value="".concat(h," ").concat(f.value),f.value=f.value.replaceAll(",",",".concat(h," ")),f.props=f.props.map(function(y){return"".concat(h," ").concat(y)})),Array.isArray(f.children)&&f.type!=="@keyframes"&&(f.children=Vx(f.children,h)),f})}function QE(n){var h,f,y,b=nf,C=b.options,S=C===void 0?nf:C,c=b.plugins,R=c===void 0?Jm:c,N=function(j,G,se){return se.startsWith(f)&&se.endsWith(f)&&se.replaceAll(f,"").length>0?".".concat(h):j},Z=R.slice();Z.push(function(j){j.type===Zm&&j.value.includes("&")&&(j.props[0]=j.props[0].replace(KE,f).replace(y,N))}),S.prefix&&Z.push(SE),Z.push(xE);var U=function(j,G,se,J){G===void 0&&(G=""),se===void 0&&(se=""),J===void 0&&(J="&"),h=J,f=G,y=new RegExp("\\".concat(f,"\\b"),"g");var oe=j.replace(JE,""),re=_E(se||G?"".concat(se," ").concat(G," { ").concat(oe," }"):oe);S.namespace&&(re=Vx(re,S.namespace));var pe=[];return Am(re,wE(Z.concat(bE(function(ge){return pe.push(ge)})))),pe};return U.hash=R.length?R.reduce(function(j,G){return G.name||op(15),qd(j,G.name)},Rx).toString():"",U}var eC=new Ux,by=QE(),Hx=Jh.createContext({shouldForwardProp:void 0,styleSheet:eC,stylis:by});Hx.Consumer;Jh.createContext(void 0);function zv(){return Xr.useContext(Hx)}var tC=function(){function n(h,f){var y=this;this.inject=function(b,C){C===void 0&&(C=by);var S=y.name+C.hash;b.hasNameForId(y.id,S)||b.insertRules(y.id,S,C(y.rules,S,"@keyframes"))},this.name=h,this.id="sc-keyframes-".concat(h),this.rules=f,n_(this,function(){throw op(12,String(y.name))})}return n.prototype.getName=function(h){return h===void 0&&(h=by),this.name+h.hash},n}(),rC=function(n){return n>="A"&&n<="Z"};function Rv(n){for(var h="",f=0;f<n.length;f++){var y=n[f];if(f===1&&y==="-"&&n[0]==="-")return n;rC(y)?h+="-"+y.toLowerCase():h+=y}return h.startsWith("ms-")?"-"+h:h}var $x=function(n){return n==null||n===!1||n===""},Wx=function(n){var h,f,y=[];for(var b in n){var C=n[b];n.hasOwnProperty(b)&&!$x(C)&&(Array.isArray(C)&&C.isCss||sf(C)?y.push("".concat(Rv(b),":"),C,";"):ep(C)?y.push.apply(y,Mm(Mm(["".concat(b," {")],Wx(C),!1),["}"],!1)):y.push("".concat(Rv(b),": ").concat((h=b,(f=C)==null||typeof f=="boolean"||f===""?"":typeof f!="number"||f===0||h in kE||h.startsWith("--")?String(f).trim():"".concat(f,"px")),";")))}return y};function Xh(n,h,f,y){if($x(n))return[];if(r_(n))return[".".concat(n.styledComponentId)];if(sf(n)){if(!sf(C=n)||C.prototype&&C.prototype.isReactComponent||!h)return[n];var b=n(h);return Xh(b,h,f,y)}var C;return n instanceof tC?f?(n.inject(f,y),[n.getName(y)]):[n]:ep(n)?Wx(n):Array.isArray(n)?Array.prototype.concat.apply(Jm,n.map(function(S){return Xh(S,h,f,y)})):[n.toString()]}function nC(n){for(var h=0;h<n.length;h+=1){var f=n[h];if(sf(f)&&!r_(f))return!1}return!0}var iC=Lx(Km),sC=function(){function n(h,f,y){this.rules=h,this.staticRulesId="",this.isStatic=(y===void 0||y.isStatic)&&nC(h),this.componentId=f,this.baseHash=qd(iC,f),this.baseStyle=y,Ux.registerId(f)}return n.prototype.generateAndInjectStyles=function(h,f,y){var b=this.baseStyle?this.baseStyle.generateAndInjectStyles(h,f,y):"";if(this.isStatic&&!y.hash)if(this.staticRulesId&&f.hasNameForId(this.componentId,this.staticRulesId))b=Zh(b,this.staticRulesId);else{var C=Mv(Xh(this.rules,h,f,y)),S=xy(qd(this.baseHash,C)>>>0);if(!f.hasNameForId(this.componentId,S)){var c=y(C,".".concat(S),void 0,this.componentId);f.insertRules(this.componentId,S,c)}b=Zh(b,S),this.staticRulesId=S}else{for(var R=qd(this.baseHash,y.hash),N="",Z=0;Z<this.rules.length;Z++){var U=this.rules[Z];if(typeof U=="string")N+=U;else if(U){var j=Mv(Xh(U,h,f,y));R=qd(R,j+Z),N+=j}}if(N){var G=xy(R>>>0);f.hasNameForId(this.componentId,G)||f.insertRules(this.componentId,G,y(N,".".concat(G),void 0,this.componentId)),b=Zh(b,G)}}return b},n}(),Gx=Jh.createContext(void 0);Gx.Consumer;var Yg={};function aC(n,h,f){var y=r_(n),b=n,C=!qg(n),S=h.attrs,c=S===void 0?Jm:S,R=h.componentId,N=R===void 0?function(Oe,ve){var Ge=typeof Oe!="string"?"sc":Tv(Oe);Yg[Ge]=(Yg[Ge]||0)+1;var je="".concat(Ge,"-").concat(ME(Km+Ge+Yg[Ge]));return ve?"".concat(ve,"-").concat(je):je}(h.displayName,h.parentComponentId):R,Z=h.displayName,U=Z===void 0?function(Oe){return qg(Oe)?"styled.".concat(Oe):"Styled(".concat(AE(Oe),")")}(n):Z,j=h.displayName&&h.componentId?"".concat(Tv(h.displayName),"-").concat(h.componentId):h.componentId||N,G=y&&b.attrs?b.attrs.concat(c).filter(Boolean):c,se=h.shouldForwardProp;if(y&&b.shouldForwardProp){var J=b.shouldForwardProp;if(h.shouldForwardProp){var oe=h.shouldForwardProp;se=function(Oe,ve){return J(Oe,ve)&&oe(Oe,ve)}}else se=J}var re=new sC(f,j,y?b.componentStyle:void 0);function pe(Oe,ve){return function(Ge,je,St){var at=Ge.attrs,Mt=Ge.componentStyle,xt=Ge.defaultProps,xe=Ge.foldedComponentIds,Je=Ge.styledComponentId,W=Ge.target,Ve=Jh.useContext(Gx),zt=zv(),Me=Ge.shouldForwardProp||zt.shouldForwardProp,et=EE(je,Ve,xt)||nf,Ze=function(wt,lr,pr){for(var Gt,Kt=oo(oo({},lr),{className:void 0,theme:pr}),Mr=0;Mr<wt.length;Mr+=1){var Vr=sf(Gt=wt[Mr])?Gt(Kt):Gt;for(var tn in Vr)Kt[tn]=tn==="className"?Zh(Kt[tn],Vr[tn]):tn==="style"?oo(oo({},Kt[tn]),Vr[tn]):Vr[tn]}return lr.className&&(Kt.className=Zh(Kt.className,lr.className)),Kt}(at,je,et),ht=Ze.as||W,ae={};for(var _e in Ze)Ze[_e]===void 0||_e[0]==="$"||_e==="as"||_e==="theme"&&Ze.theme===et||(_e==="forwardedAs"?ae.as=Ze.forwardedAs:Me&&!Me(_e,ht)||(ae[_e]=Ze[_e]));var Ct=function(wt,lr){var pr=zv(),Gt=wt.generateAndInjectStyles(lr,pr.styleSheet,pr.stylis);return Gt}(Mt,Ze),bt=Zh(xe,Je);return Ct&&(bt+=" "+Ct),Ze.className&&(bt+=" "+Ze.className),ae[qg(ht)&&!zx.has(ht)?"class":"className"]=bt,ae.ref=St,Xr.createElement(ht,ae)}(ge,Oe,ve)}pe.displayName=U;var ge=Jh.forwardRef(pe);return ge.attrs=G,ge.componentStyle=re,ge.displayName=U,ge.shouldForwardProp=se,ge.foldedComponentIds=y?Zh(b.foldedComponentIds,b.styledComponentId):"",ge.styledComponentId=j,ge.target=y?b.target:n,Object.defineProperty(ge,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Oe){this._foldedDefaultProps=y?function(ve){for(var Ge=[],je=1;je<arguments.length;je++)Ge[je-1]=arguments[je];for(var St=0,at=Ge;St<at.length;St++)wy(ve,at[St],!0);return ve}({},b.defaultProps,Oe):Oe}}),n_(ge,function(){return".".concat(ge.styledComponentId)}),C&&Nx(ge,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),ge}function Lv(n,h){for(var f=[n[0]],y=0,b=h.length;y<b;y+=1)f.push(h[y],n[y+1]);return f}var Ov=function(n){return Object.assign(n,{isCss:!0})};function Zx(n){for(var h=[],f=1;f<arguments.length;f++)h[f-1]=arguments[f];if(sf(n)||ep(n))return Ov(Xh(Lv(Jm,Mm([n],h,!0))));var y=n;return h.length===0&&y.length===1&&typeof y[0]=="string"?Xh(y):Ov(Xh(Lv(y,h)))}function Sy(n,h,f){if(f===void 0&&(f=nf),!h)throw op(1,h);var y=function(b){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];return n(h,f,Zx.apply(void 0,Mm([b],C,!1)))};return y.attrs=function(b){return Sy(n,h,oo(oo({},f),{attrs:Array.prototype.concat(f.attrs,b).filter(Boolean)}))},y.withConfig=function(b){return Sy(n,h,oo(oo({},f),b))},y}var qx=function(n){return Sy(aC,n)},lp=qx;zx.forEach(function(n){lp[n]=qx(n)});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kh=function(){return Kh=Object.assign||function(n){for(var h,f=1,y=arguments.length;f<y;f++)for(var b in h=arguments[f])Object.prototype.hasOwnProperty.call(h,b)&&(n[b]=h[b]);return n},Kh.apply(this,arguments)};function up(n,h){return Object.defineProperty?Object.defineProperty(n,"raw",{value:h}):n.raw=h,n}var Fv,Bv,Nv,jv,Uv,oC=Zx(Fv||(Fv=up([`
  display: flex;
  align-items: center;
  min-width: 322px;
  max-width: 508px;
  height: 48px;
  border: dashed 2px `,`;
  padding: 8px 16px 8px 8px;
  border-radius: 5px;
  cursor: pointer;
  flex-grow: 0;

  &.is-disabled {
    border: dashed 2px `,`;
    cursor: no-drop;
    svg {
      fill: `,`;
      color: `,`;
      path {
        fill: `,`;
        color: `,`;
      }
    }
  }
`],[`
  display: flex;
  align-items: center;
  min-width: 322px;
  max-width: 508px;
  height: 48px;
  border: dashed 2px `,`;
  padding: 8px 16px 8px 8px;
  border-radius: 5px;
  cursor: pointer;
  flex-grow: 0;

  &.is-disabled {
    border: dashed 2px `,`;
    cursor: no-drop;
    svg {
      fill: `,`;
      color: `,`;
      path {
        fill: `,`;
        color: `,`;
      }
    }
  }
`])),"#0658c2","#666","#666","#666","#666","#666"),lC=lp.label(Bv||(Bv=up([`
  position: relative;
  `,`;
  &:focus-within {
    outline: 2px solid black;
  }
  & > input {
    display: block;
    opacity: 0;
    position: absolute;
    pointer-events: none;
  }
`],[`
  position: relative;
  `,`;
  &:focus-within {
    outline: 2px solid black;
  }
  & > input {
    display: block;
    opacity: 0;
    position: absolute;
    pointer-events: none;
  }
`])),function(n){return n.overRide?"":oC}),uC=lp.div(Nv||(Nv=up([`
  border: dashed 2px `,`;
  border-radius: 5px;
  background-color: `,`;
  opacity: 0.9;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 999;
  & > span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
  }
`],[`
  border: dashed 2px `,`;
  border-radius: 5px;
  background-color: `,`;
  opacity: 0.9;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 999;
  & > span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
  }
`])),"#666","#999"),cC=lp.div(jv||(jv=up([`
  display: flex;
  justify-content: space-between;
  flex-grow: 1;
  & > span {
    font-size: 12px;
    color: `,`;
  }
  .file-types {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 100px;
  }
`],[`
  display: flex;
  justify-content: space-between;
  flex-grow: 1;
  & > span {
    font-size: 12px;
    color: `,`;
  }
  .file-types {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 100px;
  }
`])),function(n){return n.error?"red":"#666"}),hC=lp.span(Uv||(Uv=up([`
  font-size: 14px;
  color: `,`;
  span {
    text-decoration: underline;
  }
`],[`
  font-size: 14px;
  color: `,`;
  span {
    text-decoration: underline;
  }
`])),"#666"),Vv=function(n){return n/1024/1024},dC=function(n){return n===void 0?"":n.map(function(h){return".".concat(h.toLowerCase())}).join(",")};function fC(n){var h=n.types,f=n.minSize,y=n.maxSize;if(h){var b=h.toString(),C="";return y&&(C+="size >= ".concat(y,", ")),f&&(C+="size <= ".concat(f,", ")),yt.jsx("span",Kh({title:"".concat(C,"types: ").concat(b),className:"file-types"},{children:b}),void 0)}return null}function pC(){return yt.jsxs("svg",Kh({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[yt.jsx("path",{d:"M5.33317 6.66667H22.6665V16H25.3332V6.66667C25.3332 5.196 24.1372 4 22.6665 4H5.33317C3.8625 4 2.6665 5.196 2.6665 6.66667V22.6667C2.6665 24.1373 3.8625 25.3333 5.33317 25.3333H15.9998V22.6667H5.33317V6.66667Z",fill:"#0658C2"},void 0),yt.jsx("path",{d:"M10.6665 14.6667L6.6665 20H21.3332L15.9998 12L11.9998 17.3333L10.6665 14.6667Z",fill:"#0658C2"},void 0),yt.jsx("path",{d:"M25.3332 18.6667H22.6665V22.6667H18.6665V25.3333H22.6665V29.3333H25.3332V25.3333H29.3332V22.6667H25.3332V18.6667Z",fill:"#0658C2"},void 0)]}),void 0)}var Xg=0,mC=function(n,h,f,y,b,C){return f?yt.jsx("span",{children:"File type/size error, Hovered on types!"},void 0):yt.jsx(hC,{children:y?yt.jsx("span",{children:"Upload disabled"},void 0):yt.jsx(yt.Fragment,n||h?{children:C?yt.jsx(yt.Fragment,{children:yt.jsx("span",{children:C},void 0)},void 0):yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:"Uploaded Successfully!"},void 0)," Upload another?"]},void 0)}:{children:yt.jsxs(yt.Fragment,b?{children:[yt.jsx("span",{children:b.split(" ")[0]},void 0)," ",b.substr(b.indexOf(" ")+1)]}:{children:[yt.jsx("span",{children:"Upload"},void 0)," or drop a file right here"]},void 0)},void 0)},void 0)},gC=function(n){var h=n.name,f=n.hoverTitle,y=n.types,b=n.handleChange,C=n.classes,S=n.children,c=n.maxSize,R=n.minSize,N=n.fileOrFiles,Z=n.onSizeError,U=n.onTypeError,j=n.onSelect,G=n.onDrop,se=n.disabled,J=n.label,oe=n.uploadedLabel,re=n.multiple,pe=n.required,ge=n.onDraggingStateChange,Oe=n.dropMessageStyle,ve=n.ariaLabel,Ge=n.ariaDescribedby,je=Xr.useRef(null),St=Xr.useRef(null),at=Xr.useState(!1),Mt=at[0],xt=at[1],xe=Xr.useState(null),Je=xe[0],W=xe[1],Ve=Xr.useState(!1),zt=Ve[0],Me=Ve[1],et=function(ae){return y&&!function(_e,Ct){var bt=_e.name.split(".").pop();return Ct.map(function(wt){return wt.toLowerCase()}).includes(bt.toLowerCase())}(ae,y)?(Me(!0),U&&U("File type is not supported"),!1):c&&Vv(ae.size)>c?(Me(!0),Z&&Z("File size is too big"),!1):!(R&&Vv(ae.size)<R)||(Me(!0),Z&&Z("File size is too small"),!1)},Ze=function(ae){var _e=!1;if(ae){if(ae instanceof File)_e=!et(ae);else for(var Ct=0;Ct<ae.length;Ct++){var bt=ae[Ct];_e=!et(bt)||_e}return!_e&&(b&&b(ae),W(ae),xt(!0),Me(!1),!0)}return!1},ht=function(ae){var _e=ae.labelRef,Ct=ae.inputRef,bt=ae.multiple,wt=ae.handleChanges,lr=ae.onDrop,pr=Xr.useState(!1),Gt=pr[0],Kt=pr[1],Mr=Xr.useCallback(function(){Ct.current.click()},[Ct]),Vr=Xr.useCallback(function(ft){ft.preventDefault(),ft.stopPropagation(),Xg++,ft.dataTransfer.items&&ft.dataTransfer.items.length!==0&&Kt(!0)},[]),tn=Xr.useCallback(function(ft){ft.preventDefault(),ft.stopPropagation(),--Xg>0||Kt(!1)},[]),Kr=Xr.useCallback(function(ft){ft.preventDefault(),ft.stopPropagation()},[]),Y=Xr.useCallback(function(ft){ft.preventDefault(),ft.stopPropagation(),Kt(!1),Xg=0;var ye=ft.dataTransfer.files;if(ye&&ye.length>0){var Ae=bt?ye:ye[0],we=wt(Ae);lr&&we&&lr(Ae)}},[wt]);return Xr.useEffect(function(){var ft=_e.current;return ft.addEventListener("click",Mr),ft.addEventListener("dragenter",Vr),ft.addEventListener("dragleave",tn),ft.addEventListener("dragover",Kr),ft.addEventListener("drop",Y),function(){ft.removeEventListener("click",Mr),ft.removeEventListener("dragenter",Vr),ft.removeEventListener("dragleave",tn),ft.removeEventListener("dragover",Kr),ft.removeEventListener("drop",Y)}},[Mr,Vr,tn,Kr,Y,_e]),Gt}({labelRef:je,inputRef:St,multiple:re,handleChanges:Ze,onDrop:G});return Xr.useEffect(function(){ge==null||ge(ht)},[ht]),Xr.useEffect(function(){N?(xt(!0),W(N)):(St.current&&(St.current.value=""),xt(!1),W(null))},[N]),yt.jsxs(lC,Kh({overRide:S,className:"".concat(C||""," ").concat(se?"is-disabled":""),ref:je,htmlFor:h,onClick:function(ae){ae.preventDefault(),ae.stopPropagation()},"aria-describedby":Ge,role:"button","aria-label":ve},{children:[yt.jsx("input",{onClick:function(ae){ae.stopPropagation(),St&&St.current&&(St.current.value="",St.current.click())},onChange:function(ae){var _e=ae.target.files,Ct=re?_e:_e[0],bt=Ze(Ct);j&&bt&&j(Ct)},accept:dC(y),ref:St,type:"file",id:h,name:h,disabled:se,multiple:re,required:pe},void 0),ht&&yt.jsx(uC,Kh({style:Oe},{children:yt.jsx("span",{children:f||"Drop Here"},void 0)}),void 0),!S&&yt.jsxs(yt.Fragment,{children:[yt.jsx(pC,{},void 0),yt.jsxs(cC,Kh({error:zt},{children:[mC(Je,Mt,zt,se,J,oe),yt.jsx(fC,{types:y,minSize:R,maxSize:c},void 0)]}),void 0)]},void 0),S]}),void 0)};const yC=["txt","zip","json"],Hv=n=>{if(n.substring(0,8)==="__MACOSX")return;const h=n.toLowerCase();if(h.endsWith(".txt")||h.endsWith(".json"))return"chat";if(h.endsWith(".zip"))return"zip";if(h.endsWith(".jpg")||h.endsWith(".jpeg")||h.endsWith(".mp4"))return"media"},_C=({onFilesLoad:n,onDataFileLoad:h,onError:f})=>{const[y,b]=Xr.useState(),[C,S]=Xr.useState(),c=Gm(),R=Z=>{S(Z.length);for(let j=0;j<Z.length;j++){const G=Z[j],se=Hv(G.name);if(se==="chat"){var U=new FileReader;U.readAsText(G,"UTF-8"),U.onload=function(J){b(oe=>({...oe,[G.name]:J.target.result}))},U.onerror=function(J){f(G.name)}}else se==="zip"&&new mx().loadAsync(G).then(function(J){Object.keys(J.files).forEach(oe=>{const re=Hv(oe);re==="chat"?J.files[oe].async("string").then(function(pe){b(ge=>({...ge,[G.name]:pe}))}):re==="media"&&J.files[oe].async("arraybuffer").then(function(pe){const ge=new Uint8Array(pe),Oe=new Blob([ge.buffer]);h(oe,Oe)})})})}};Xr.useEffect(()=>{y&&Object.keys(y).length===C&&n(y)},[y,n]);const N=y&&Object.keys(y).length!==C;return yt.jsxs(yt.Fragment,{children:[N?yt.jsxs("p",{style:{textAlign:"center"},children:[c.formatMessage({id:"app.loading",defaultMessage:"Loading"})," ..."]}):"",yt.jsx("div",{style:N?{display:"none"}:null,children:yt.jsx(gC,{classes:"fileUploadDropArea",handleChange:R,multiple:!0,name:"file",types:yC,label:c.formatMessage({id:"app.uploadLabel",defaultMessage:"Upload or drag a file right here"})})})]})};function vC({handleDataFile:n,handleFiles:h}){return yt.jsx(yt.Fragment,{children:yt.jsx("div",{className:"fileUpload",children:yt.jsx(_C,{onDataFileLoad:n,onFilesLoad:h})})})}function xC({handleNewUploadClick:n}){return yt.jsxs(yt.Fragment,{children:[yt.jsx("h2",{children:yt.jsx(hs,{id:"app.nolocations",defaultMessage:"No locations found in this file"})}),yt.jsx("button",{onClick:n,className:"secondaryButton",children:yt.jsx(hs,{id:"app.uploadNewFile",defaultMessage:"Upload new file"})})]})}function wC(){const[n,h]=j1({msgPosition:"closest"}),[f,y,b,C,S]=V1(),[c,R]=lk({files:S,msgPosition:n.msgPosition}),N=()=>{b(),R()},Z=S&&c&&c.features.length>0,U=S&&c&&c.features.length===0;return yt.jsxs("div",{className:"app",children:[yt.jsx(iE,{dataAvailable:Z,dataFiles:C,mapData:c,handleNewUploadClick:N,settings:n,handleSettingsChange:h}),!S&&yt.jsxs(yt.Fragment,{children:[yt.jsx(vC,{handleFiles:f,handleDataFile:y}),yt.jsx(sE,{})]}),Z&&yt.jsx(N1,{data:c,dataFiles:C}),U&&yt.jsx(xC,{handleNewUploadClick:N})]})}class bC extends Jh.Component{constructor(h){super(h),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(h){return{hasError:!0,error:h}}render(){if(this.state.hasError){const h=`${this.state.error.fileName}(${this.state.error.lineNumber}): 
 ${this.state.error.toString()} 
 ${this.state.error.stack}`,f=`mailto:emilio.mariscal@hotosm.org?subject=ChatMap Error&body=Hi, something went wrong with chatmap: ${h}`;return yt.jsxs("div",{className:"errorMessage",children:[yt.jsx("header",{className:"header",children:yt.jsxs("h1",{className:"title",children:[yt.jsx("img",{src:N0,className:"logo",alt:"logo"})," ChatMap"]})}),yt.jsxs("div",{children:[yt.jsx("h2",{children:"Oops! something went wrong 🫢"}),yt.jsx("h3",{children:"Let us know of this error so we can fix it as soon as possible."}),yt.jsxs("p",{children:[yt.jsxs("strong",{className:"highlighted",children:["Please, send the detail below to ",yt.jsx("a",{href:f,children:"emilio.mariscal@hotosm.org"})]}),yt.jsx("br",{}),"or create an issue in ",yt.jsx("a",{href:"https://github.com/hotosm/chatmap/issues",children:"github.com/hotosm/chatmap/issues"})]}),yt.jsxs("div",{className:"buttons",children:[yt.jsx("a",{className:"primaryButton",href:"/",children:"Go back"}),yt.jsx("a",{className:"secondaryButton",href:f,children:"Send error report"})]}),yt.jsxs("pre",{children:[yt.jsx("strong",{children:"Error:"})," ",h]})]})]})}return this.props.children}}const SC={"app.subtitle":"Export and upload a chat to visualize locations, messages and media","app.config.msgPositionTextStart":"It will search for locations and the","app.config.msgPositionTextEnd":"message from the same user.","app.config.closestPreviousMsg":"previous","app.config.closestNextMsg":"next","app.config.closestMsg":"closest","app.uploadNewFile":"Upload new file","app.download":"Download","app.options":"Options","app.uploadLabel":"Upload or drag a file right here","app.nolocations":"No locations found in this file","app.supportedApps":"Now it works with WhatsApp, Telegram or Signal!"},kC={"app.subtitle":"Exporte e carregue um bate-papo para visualizar locais, mensagens e mídia","app.config.msgPositionTextStart":"Buscará localizaciones y el","app.config.msgPositionTextEnd":"mensaje del mismo usuario.","app.config.closestPreviousMsg":"anterior","app.config.closestNextMsg":"siguiente","app.config.closestMsg":"más cercano","app.uploadNewFile":"Subir un nuevo archivo","app.download":"Descargar","app.options":"Opciones","app.uploadLabel":"Sube o arrastra un archivo aquí mismo","app.nolocations":"No se han encontrado ubicaciones en este archivo","app.loading":"Cargando","app.supportedApps":"Ahora funciona con WhatsApp, Telegram o Signal!"},TC={"app.subtitle":"Exportar uma chat da aplicação e visualizar localizações partilhadas na conversa","app.config.msgPositionTextStart":"Procurará locais e o","app.config.msgPositionTextEnd":"mensagem do mesmo utilizador.","app.config.closestPreviousMsg":"anterior","app.config.closestNextMsg":"seguinte","app.config.closestMsg":"mais próximo","app.uploadNewFile":"Carregar um novo ficheiro","app.download":"Descarregar","app.options":"Opções","app.uploadLabel":"Carregue ou arraste um ficheiro aqui mesmo","app.nolocations":"Não foram encontrados locais neste arquivo.","app.loading":"Carregando","app.supportedApps":"Agora funciona com WhatsApp, Telegram e Signal!"},Kg={en:SC,es:kC,pt:TC},EC=()=>{const n=navigator.language.slice(0,2);return n in Kg?Kg[n]:Kg.en},CC=S1.createRoot(document.getElementById("root"));CC.render(yt.jsx(Jh.StrictMode,{children:yt.jsx(AT,{locale:navigator.language,messages:EC(),children:yt.jsx(bC,{children:yt.jsx(wC,{})})})}))});export default IC();
//# sourceMappingURL=index-B_4ibV3n.js.map
