import{C as t}from"./chatmap-97irJHsa.js";const e=t=>t.substring(t.lastIndexOf("/")+1,t.length),o=t=>t.location,n=t=>new Date(t),i=t=>{let o=0;const i={};return t.forEach((t=>{const a=(t=>{let o="",i={time:n(t.date),username:t.from};return Array.isArray(t.text)?t.text.forEach((t=>{"link"===t.type&&(o=t.text)})):""!==t.text&&(o=t.text),i.message=o,t.location_information&&(i.location=[t.location_information.latitude,t.location_information.longitude]),t.photo&&(i.file=e(t.photo)),t.file&&"video/mp4"===t.mime_type&&(i.file=e(t.file)),i})(t);a&&(i[o]=a,i[o].id=o,o++)})),i};function a({text:e}){if(!e)return;const n=JSON.parse(e),a=i(n.messages);return{geoJSON:new t(a,o).pairContentAndLocations(),messages:a}}export{a as default};
