import{C as e}from"./index-EljJHplB.js";const t=["Se eliminó este mensaje","Los mensajes y las llamadas están cifrados de extremo a extremo. Solo las personas en este chat pueden leerlos, escucharlos o compartirlos. Obtén más información.","deleted this message.","changed this group's icon","changed the group description","created group ","Messages and calls are end-to-end encrypted. Only people in this chat can read, listen to, or share them.","This message was deleted","joined using your invite","Tap to change who can add other members","<Multimedia omitido>"],s=/[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?).*$/,n={IOS:/\[(.*)\] ([^:]*): (.*)/,ANDROID:/(.*) - ([^:]*): (.*)/},a=e=>{const t=e.match(n.IOS),s=e.match(n.ANDROID);return t?"IOS":s?"ANDROID":"UNKNOWN"},r=e=>{const t=e.message.toLowerCase(),s=[".jpg",".mp4",".ogg",".opus",".mp3",".m4a",".wav"];let n=-1,a="";for(let r of s){let e=t.indexOf(r);if(e>0){n=e,a=r;break}}if(n>0){let s=e.message.substring(t.lastIndexOf(":")+1,n+a.length);return" "==s.substring(0,1)?s.substring(1,s.length):s}return""},o=e=>{if(e.message){const t=e.message.match(s);if(t)return t[0].split(",").map((e=>parseFloat(e)))}return null},l=e=>{for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return!0;return!1},i=(e,t)=>{const s=e.match(n[t]);if(s&&!l(s[3])){let e=s[2];const t=e.indexOf(":");t>-1&&(e=e.substring(0,t));let n={time:m(s[1]),username:e,message:s[3]};return n.file=r(n),n.file&&(n.message=""),n}},m=e=>{let t=e.replace("a. m.","AM").replace("p. m.","PM");t=t.replace("a.m.","AM").replace("p.m.","PM");let s=t.split(" ");const n=new Date;let a=[[n.getFullYear(),n.getMonth()+1,n.getDate()].join("/"),s[1]].join(" ").replaceAll(".",":");return new Date(a)},c=(e,t)=>{const s=[];return e.forEach((e=>{e=e.replaceAll(/[\u200E\u200F\u202A-\u202E\u200B]/g,"");const n=i(e,t);n&&!l(n.message)?s.push(n):(s[-1]&&"ANDROID"==t&&"/"!==e.substring(2,1)&&-1==e.indexOf("a. m.")&&-1==e.indexOf("p. m.")||"IOS"==t&&-1==e.indexOf("["))&&(s[s.length-1].message+=" "+e)})),s};function d({text:t,options:s}){if(!t)return;const n=t.split("\n");let r;for(let e=0;e<n.length&&(r=a(n[e]),"UNKNOWN"===r);e++);const l=c(n,r);return{geoJSON:new e(l,o,s).pairContentAndLocations()}}export{d as default,a as detectSystem,r as lookForMediaFile,c as parseAndIndex,i as parseMessage,m as parseTimeString,o as searchLocation};
