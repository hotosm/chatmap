import{C as t}from"./chatmap-BGdbUB3b.js";const e=t=>t.substring(t.lastIndexOf("/")+1,t.length),o=t=>t.location,i=t=>new Date(t),a=t=>{let o=0;const a={};return t.forEach((t=>{const n=(t=>{let o="",a={time:i(t.date),username:t.from};return Array.isArray(t.text)?t.text.forEach((t=>{"link"===t.type&&(o=t.text)})):""!==t.text&&(o=t.text),a.message=o,t.location_information&&(a.location=[t.location_information.latitude,t.location_information.longitude]),t.photo&&(a.file=e(t.photo)),t.file&&"video/mp4"===t.mime_type&&(a.file=e(t.file)),t.file&&["audio/ogg","audio/opus","audio/mp3","audio/m4a","audio/wav"].indexOf(t.mime_type)>-1&&(a.file=e(t.file)),a})(t);n&&(a[o]=n,a[o].id=o,o++)})),a};function n({text:e}){if(!e)return;const i=JSON.parse(e),n=a(i.messages);return{geoJSON:new t(n,o).pairContentAndLocations(),messages:n}}export{n as default};
