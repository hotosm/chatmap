var mD=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var jj=mD((Vj,Bg)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function i(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(h){if(h.ep)return;h.ep=!0;const f=i(h);fetch(h.href,f)}})();var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gD(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var h=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(i,o,h.get?h:{enumerable:!0,get:function(){return e[o]}})}),i}var JT={exports:{}},Ay={},QT={exports:{}},yr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp=Symbol.for("react.element"),yD=Symbol.for("react.portal"),_D=Symbol.for("react.fragment"),vD=Symbol.for("react.strict_mode"),xD=Symbol.for("react.profiler"),wD=Symbol.for("react.provider"),bD=Symbol.for("react.context"),SD=Symbol.for("react.forward_ref"),kD=Symbol.for("react.suspense"),TD=Symbol.for("react.memo"),ED=Symbol.for("react.lazy"),eS=Symbol.iterator;function CD(e){return e===null||typeof e!="object"?null:(e=eS&&e[eS]||e["@@iterator"],typeof e=="function"?e:null)}var eE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tE=Object.assign,rE={};function Fh(e,t,i){this.props=e,this.context=t,this.refs=rE,this.updater=i||eE}Fh.prototype.isReactComponent={};Fh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nE(){}nE.prototype=Fh.prototype;function xx(e,t,i){this.props=e,this.context=t,this.refs=rE,this.updater=i||eE}var wx=xx.prototype=new nE;wx.constructor=xx;tE(wx,Fh.prototype);wx.isPureReactComponent=!0;var tS=Array.isArray,iE=Object.prototype.hasOwnProperty,bx={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function oE(e,t,i){var o,h={},f=null,g=null;if(t!=null)for(o in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)iE.call(t,o)&&!sE.hasOwnProperty(o)&&(h[o]=t[o]);var c=arguments.length-2;if(c===1)h.children=i;else if(1<c){for(var T=Array(c),P=0;P<c;P++)T[P]=arguments[P+2];h.children=T}if(e&&e.defaultProps)for(o in c=e.defaultProps,c)h[o]===void 0&&(h[o]=c[o]);return{$$typeof:fp,type:e,key:f,ref:g,props:h,_owner:bx.current}}function ID(e,t){return{$$typeof:fp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sx(e){return typeof e=="object"&&e!==null&&e.$$typeof===fp}function PD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var rS=/\/+/g;function H0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PD(""+e.key):t.toString(36)}function ag(e,t,i,o,h){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case fp:case yD:g=!0}}if(g)return g=e,h=h(g),e=o===""?"."+H0(g,0):o,tS(h)?(i="",e!=null&&(i=e.replace(rS,"$&/")+"/"),ag(h,t,i,"",function(P){return P})):h!=null&&(Sx(h)&&(h=ID(h,i+(!h.key||g&&g.key===h.key?"":(""+h.key).replace(rS,"$&/")+"/")+e)),t.push(h)),1;if(g=0,o=o===""?".":o+":",tS(e))for(var c=0;c<e.length;c++){f=e[c];var T=o+H0(f,c);g+=ag(f,t,i,T,h)}else if(T=CD(e),typeof T=="function")for(e=T.call(e),c=0;!(f=e.next()).done;)f=f.value,T=o+H0(f,c++),g+=ag(f,t,i,T,h);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Dm(e,t,i){if(e==null)return e;var o=[],h=0;return ag(e,o,"","",function(f){return t.call(i,f,h++)}),o}function MD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wi={current:null},lg={transition:null},AD={ReactCurrentDispatcher:Wi,ReactCurrentBatchConfig:lg,ReactCurrentOwner:bx};function aE(){throw Error("act(...) is not supported in production builds of React.")}yr.Children={map:Dm,forEach:function(e,t,i){Dm(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Dm(e,function(){t++}),t},toArray:function(e){return Dm(e,function(t){return t})||[]},only:function(e){if(!Sx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yr.Component=Fh;yr.Fragment=_D;yr.Profiler=xD;yr.PureComponent=xx;yr.StrictMode=vD;yr.Suspense=kD;yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AD;yr.act=aE;yr.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=tE({},e.props),h=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=bx.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(T in t)iE.call(t,T)&&!sE.hasOwnProperty(T)&&(o[T]=t[T]===void 0&&c!==void 0?c[T]:t[T])}var T=arguments.length-2;if(T===1)o.children=i;else if(1<T){c=Array(T);for(var P=0;P<T;P++)c[P]=arguments[P+2];o.children=c}return{$$typeof:fp,type:e.type,key:h,ref:f,props:o,_owner:g}};yr.createContext=function(e){return e={$$typeof:bD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wD,_context:e},e.Consumer=e};yr.createElement=oE;yr.createFactory=function(e){var t=oE.bind(null,e);return t.type=e,t};yr.createRef=function(){return{current:null}};yr.forwardRef=function(e){return{$$typeof:SD,render:e}};yr.isValidElement=Sx;yr.lazy=function(e){return{$$typeof:ED,_payload:{_status:-1,_result:e},_init:MD}};yr.memo=function(e,t){return{$$typeof:TD,type:e,compare:t===void 0?null:t}};yr.startTransition=function(e){var t=lg.transition;lg.transition={};try{e()}finally{lg.transition=t}};yr.unstable_act=aE;yr.useCallback=function(e,t){return Wi.current.useCallback(e,t)};yr.useContext=function(e){return Wi.current.useContext(e)};yr.useDebugValue=function(){};yr.useDeferredValue=function(e){return Wi.current.useDeferredValue(e)};yr.useEffect=function(e,t){return Wi.current.useEffect(e,t)};yr.useId=function(){return Wi.current.useId()};yr.useImperativeHandle=function(e,t,i){return Wi.current.useImperativeHandle(e,t,i)};yr.useInsertionEffect=function(e,t){return Wi.current.useInsertionEffect(e,t)};yr.useLayoutEffect=function(e,t){return Wi.current.useLayoutEffect(e,t)};yr.useMemo=function(e,t){return Wi.current.useMemo(e,t)};yr.useReducer=function(e,t,i){return Wi.current.useReducer(e,t,i)};yr.useRef=function(e){return Wi.current.useRef(e)};yr.useState=function(e){return Wi.current.useState(e)};yr.useSyncExternalStore=function(e,t,i){return Wi.current.useSyncExternalStore(e,t,i)};yr.useTransition=function(){return Wi.current.useTransition()};yr.version="18.3.1";QT.exports=yr;var Ht=QT.exports;const ju=dp(Ht);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DD=Ht,zD=Symbol.for("react.element"),RD=Symbol.for("react.fragment"),LD=Object.prototype.hasOwnProperty,OD=DD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FD={key:!0,ref:!0,__self:!0,__source:!0};function lE(e,t,i){var o,h={},f=null,g=null;i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(o in t)LD.call(t,o)&&!FD.hasOwnProperty(o)&&(h[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)h[o]===void 0&&(h[o]=t[o]);return{$$typeof:zD,type:e,key:f,ref:g,props:h,_owner:OD.current}}Ay.Fragment=RD;Ay.jsx=lE;Ay.jsxs=lE;JT.exports=Ay;var We=JT.exports,$v={},uE={exports:{}},Bs={},cE={exports:{}},hE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Be,Le){var Ke=Be.length;Be.push(Le);e:for(;0<Ke;){var xe=Ke-1>>>1,Ee=Be[xe];if(0<h(Ee,Le))Be[xe]=Le,Be[Ke]=Ee,Ke=xe;else break e}}function i(Be){return Be.length===0?null:Be[0]}function o(Be){if(Be.length===0)return null;var Le=Be[0],Ke=Be.pop();if(Ke!==Le){Be[0]=Ke;e:for(var xe=0,Ee=Be.length,mt=Ee>>>1;xe<mt;){var nt=2*(xe+1)-1,rt=Be[nt],Jt=nt+1,er=Be[Jt];if(0>h(rt,Ke))Jt<Ee&&0>h(er,rt)?(Be[xe]=er,Be[Jt]=Ke,xe=Jt):(Be[xe]=rt,Be[nt]=Ke,xe=nt);else if(Jt<Ee&&0>h(er,Ke))Be[xe]=er,Be[Jt]=Ke,xe=Jt;else break e}}return Le}function h(Be,Le){var Ke=Be.sortIndex-Le.sortIndex;return Ke!==0?Ke:Be.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,c=g.now();e.unstable_now=function(){return g.now()-c}}var T=[],P=[],R=1,A=null,M=3,N=!1,Y=!1,U=!1,te=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(Be){for(var Le=i(P);Le!==null;){if(Le.callback===null)o(P);else if(Le.startTime<=Be)o(P),Le.sortIndex=Le.expirationTime,t(T,Le);else break;Le=i(P)}}function ne(Be){if(U=!1,q(Be),!Y)if(i(T)!==null)Y=!0,vt(oe);else{var Le=i(P);Le!==null&&ye(ne,Le.startTime-Be)}}function oe(Be,Le){Y=!1,U&&(U=!1,O(Fe),Fe=-1),N=!0;var Ke=M;try{for(q(Le),A=i(T);A!==null&&(!(A.expirationTime>Le)||Be&&!it());){var xe=A.callback;if(typeof xe=="function"){A.callback=null,M=A.priorityLevel;var Ee=xe(A.expirationTime<=Le);Le=e.unstable_now(),typeof Ee=="function"?A.callback=Ee:A===i(T)&&o(T),q(Le)}else o(T);A=i(T)}if(A!==null)var mt=!0;else{var nt=i(P);nt!==null&&ye(ne,nt.startTime-Le),mt=!1}return mt}finally{A=null,M=Ke,N=!1}}var ke=!1,ge=null,Fe=-1,Oe=5,Ge=-1;function it(){return!(e.unstable_now()-Ge<Oe)}function ve(){if(ge!==null){var Be=e.unstable_now();Ge=Be;var Le=!0;try{Le=ge(!0,Be)}finally{Le?je():(ke=!1,ge=null)}}else ke=!1}var je;if(typeof $=="function")je=function(){$(ve)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Re=H.port2;H.port1.onmessage=ve,je=function(){Re.postMessage(null)}}else je=function(){te(ve,0)};function vt(Be){ge=Be,ke||(ke=!0,je())}function ye(Be,Le){Fe=te(function(){Be(e.unstable_now())},Le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Be){Be.callback=null},e.unstable_continueExecution=function(){Y||N||(Y=!0,vt(oe))},e.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<Be?Math.floor(1e3/Be):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return i(T)},e.unstable_next=function(Be){switch(M){case 1:case 2:case 3:var Le=3;break;default:Le=M}var Ke=M;M=Le;try{return Be()}finally{M=Ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Be,Le){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Ke=M;M=Be;try{return Le()}finally{M=Ke}},e.unstable_scheduleCallback=function(Be,Le,Ke){var xe=e.unstable_now();switch(typeof Ke=="object"&&Ke!==null?(Ke=Ke.delay,Ke=typeof Ke=="number"&&0<Ke?xe+Ke:xe):Ke=xe,Be){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Ke+Ee,Be={id:R++,callback:Le,priorityLevel:Be,startTime:Ke,expirationTime:Ee,sortIndex:-1},Ke>xe?(Be.sortIndex=Ke,t(P,Be),i(T)===null&&Be===i(P)&&(U?(O(Fe),Fe=-1):U=!0,ye(ne,Ke-xe))):(Be.sortIndex=Ee,t(T,Be),Y||N||(Y=!0,vt(oe))),Be},e.unstable_shouldYield=it,e.unstable_wrapCallback=function(Be){var Le=M;return function(){var Ke=M;M=Le;try{return Be.apply(this,arguments)}finally{M=Ke}}}})(hE);cE.exports=hE;var BD=cE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ND=Ht,Fs=BD;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dE=new Set,Bf={};function Yu(e,t){bh(e,t),bh(e+"Capture",t)}function bh(e,t){for(Bf[e]=t,e=0;e<t.length;e++)dE.add(t[e])}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jv=Object.prototype.hasOwnProperty,$D=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nS={},iS={};function jD(e){return jv.call(iS,e)?!0:jv.call(nS,e)?!1:$D.test(e)?iS[e]=!0:(nS[e]=!0,!1)}function UD(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VD(e,t,i,o){if(t===null||typeof t>"u"||UD(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gi(e,t,i,o,h,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hi[e]=new Gi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hi[t]=new Gi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hi[e]=new Gi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hi[e]=new Gi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hi[e]=new Gi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hi[e]=new Gi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hi[e]=new Gi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hi[e]=new Gi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hi[e]=new Gi(e,5,!1,e.toLowerCase(),null,!1,!1)});var kx=/[\-:]([a-z])/g;function Tx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kx,Tx);hi[t]=new Gi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kx,Tx);hi[t]=new Gi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kx,Tx);hi[t]=new Gi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hi[e]=new Gi(e,1,!1,e.toLowerCase(),null,!1,!1)});hi.xlinkHref=new Gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hi[e]=new Gi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ex(e,t,i,o){var h=hi.hasOwnProperty(t)?hi[t]:null;(h!==null?h.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VD(t,i,h,o)&&(i=null),o||h===null?jD(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):h.mustUseProperty?e[h.propertyName]=i===null?h.type===3?!1:"":i:(t=h.attributeName,o=h.attributeNamespace,i===null?e.removeAttribute(t):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var Ra=ND.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zm=Symbol.for("react.element"),Jc=Symbol.for("react.portal"),Qc=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),Uv=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),pE=Symbol.for("react.context"),Ix=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),Hv=Symbol.for("react.suspense_list"),Px=Symbol.for("react.memo"),wl=Symbol.for("react.lazy"),mE=Symbol.for("react.offscreen"),sS=Symbol.iterator;function rf(e){return e===null||typeof e!="object"?null:(e=sS&&e[sS]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,W0;function pf(e){if(W0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);W0=t&&t[1]||""}return`
`+W0+e}var G0=!1;function Z0(e,t){if(!e||G0)return"";G0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var o=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){o=P}e.call(t.prototype)}else{try{throw Error()}catch(P){o=P}e()}}catch(P){if(P&&o&&typeof P.stack=="string"){for(var h=P.stack.split(`
`),f=o.stack.split(`
`),g=h.length-1,c=f.length-1;1<=g&&0<=c&&h[g]!==f[c];)c--;for(;1<=g&&0<=c;g--,c--)if(h[g]!==f[c]){if(g!==1||c!==1)do if(g--,c--,0>c||h[g]!==f[c]){var T=`
`+h[g].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=g&&0<=c);break}}}finally{G0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?pf(e):""}function HD(e){switch(e.tag){case 5:return pf(e.type);case 16:return pf("Lazy");case 13:return pf("Suspense");case 19:return pf("SuspenseList");case 0:case 2:case 15:return e=Z0(e.type,!1),e;case 11:return e=Z0(e.type.render,!1),e;case 1:return e=Z0(e.type,!0),e;default:return""}}function Wv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qc:return"Fragment";case Jc:return"Portal";case Uv:return"Profiler";case Cx:return"StrictMode";case Vv:return"Suspense";case Hv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pE:return(e.displayName||"Context")+".Consumer";case fE:return(e._context.displayName||"Context")+".Provider";case Ix:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Px:return t=e.displayName||null,t!==null?t:Wv(e.type)||"Memo";case wl:t=e._payload,e=e._init;try{return Wv(e(t))}catch{}}return null}function WD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wv(t);case 8:return t===Cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GD(e){var t=gE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(g){o=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rm(e){e._valueTracker||(e._valueTracker=GD(e))}function yE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=gE(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Ng(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gv(e,t){var i=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function oS(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=jl(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _E(e,t){t=t.checked,t!=null&&Ex(e,"checked",t,!1)}function Zv(e,t){_E(e,t);var i=jl(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qv(e,t.type,i):t.hasOwnProperty("defaultValue")&&qv(e,t.type,jl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function aS(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function qv(e,t,i){(t!=="number"||Ng(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var mf=Array.isArray;function fh(e,t,i,o){if(e=e.options,t){t={};for(var h=0;h<i.length;h++)t["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=t.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&o&&(e[i].defaultSelected=!0)}else{for(i=""+jl(i),t=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Yv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lS(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(lt(92));if(mf(i)){if(1<i.length)throw Error(lt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:jl(i)}}function vE(e,t){var i=jl(t.value),o=jl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function uS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Lm,wE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,o,h){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Lm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Sf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZD=["Webkit","ms","Moz","O"];Object.keys(Sf).forEach(function(e){ZD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sf[t]=Sf[e]})});function bE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Sf.hasOwnProperty(e)&&Sf[e]?(""+t).trim():t+"px"}function SE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,h=bE(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,h):e[i]=h}}var qD=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kv(e,t){if(t){if(qD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function Jv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=null;function Mx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var e1=null,ph=null,mh=null;function cS(e){if(e=gp(e)){if(typeof e1!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=Oy(t),e1(e.stateNode,e.type,t))}}function kE(e){ph?mh?mh.push(e):mh=[e]:ph=e}function TE(){if(ph){var e=ph,t=mh;if(mh=ph=null,cS(e),t)for(e=0;e<t.length;e++)cS(t[e])}}function EE(e,t){return e(t)}function CE(){}var q0=!1;function IE(e,t,i){if(q0)return e(t,i);q0=!0;try{return EE(e,t,i)}finally{q0=!1,(ph!==null||mh!==null)&&(CE(),TE())}}function $f(e,t){var i=e.stateNode;if(i===null)return null;var o=Oy(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(lt(231,t,typeof i));return i}var t1=!1;if(Ca)try{var nf={};Object.defineProperty(nf,"passive",{get:function(){t1=!0}}),window.addEventListener("test",nf,nf),window.removeEventListener("test",nf,nf)}catch{t1=!1}function YD(e,t,i,o,h,f,g,c,T){var P=Array.prototype.slice.call(arguments,3);try{t.apply(i,P)}catch(R){this.onError(R)}}var kf=!1,$g=null,jg=!1,r1=null,XD={onError:function(e){kf=!0,$g=e}};function KD(e,t,i,o,h,f,g,c,T){kf=!1,$g=null,YD.apply(XD,arguments)}function JD(e,t,i,o,h,f,g,c,T){if(KD.apply(this,arguments),kf){if(kf){var P=$g;kf=!1,$g=null}else throw Error(lt(198));jg||(jg=!0,r1=P)}}function Xu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function PE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hS(e){if(Xu(e)!==e)throw Error(lt(188))}function QD(e){var t=e.alternate;if(!t){if(t=Xu(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var i=e,o=t;;){var h=i.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){i=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===i)return hS(h),e;if(f===o)return hS(h),t;f=f.sibling}throw Error(lt(188))}if(i.return!==o.return)i=h,o=f;else{for(var g=!1,c=h.child;c;){if(c===i){g=!0,i=h,o=f;break}if(c===o){g=!0,o=h,i=f;break}c=c.sibling}if(!g){for(c=f.child;c;){if(c===i){g=!0,i=f,o=h;break}if(c===o){g=!0,o=f,i=h;break}c=c.sibling}if(!g)throw Error(lt(189))}}if(i.alternate!==o)throw Error(lt(190))}if(i.tag!==3)throw Error(lt(188));return i.stateNode.current===i?e:t}function ME(e){return e=QD(e),e!==null?AE(e):null}function AE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=AE(e);if(t!==null)return t;e=e.sibling}return null}var DE=Fs.unstable_scheduleCallback,dS=Fs.unstable_cancelCallback,ez=Fs.unstable_shouldYield,tz=Fs.unstable_requestPaint,An=Fs.unstable_now,rz=Fs.unstable_getCurrentPriorityLevel,Ax=Fs.unstable_ImmediatePriority,zE=Fs.unstable_UserBlockingPriority,Ug=Fs.unstable_NormalPriority,nz=Fs.unstable_LowPriority,RE=Fs.unstable_IdlePriority,Dy=null,Wo=null;function iz(e){if(Wo&&typeof Wo.onCommitFiberRoot=="function")try{Wo.onCommitFiberRoot(Dy,e,void 0,(e.current.flags&128)===128)}catch{}}var vo=Math.clz32?Math.clz32:az,sz=Math.log,oz=Math.LN2;function az(e){return e>>>=0,e===0?32:31-(sz(e)/oz|0)|0}var Om=64,Fm=4194304;function gf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vg(e,t){var i=e.pendingLanes;if(i===0)return 0;var o=0,h=e.suspendedLanes,f=e.pingedLanes,g=i&268435455;if(g!==0){var c=g&~h;c!==0?o=gf(c):(f&=g,f!==0&&(o=gf(f)))}else g=i&~h,g!==0?o=gf(g):f!==0&&(o=gf(f));if(o===0)return 0;if(t!==0&&t!==o&&!(t&h)&&(h=o&-o,f=t&-t,h>=f||h===16&&(f&4194240)!==0))return t;if(o&4&&(o|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-vo(t),h=1<<i,o|=e[i],t&=~h;return o}function lz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uz(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-vo(f),c=1<<g,T=h[g];T===-1?(!(c&i)||c&o)&&(h[g]=lz(c,t)):T<=t&&(e.expiredLanes|=c),f&=~c}}function n1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function LE(){var e=Om;return Om<<=1,!(Om&4194240)&&(Om=64),e}function Y0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function pp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vo(t),e[t]=i}function cz(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var h=31-vo(i),f=1<<h;t[h]=0,o[h]=-1,e[h]=-1,i&=~f}}function Dx(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-vo(i),h=1<<o;h&t|e[o]&t&&(e[o]|=t),i&=~h}}var jr=0;function OE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var FE,zx,BE,NE,$E,i1=!1,Bm=[],Dl=null,zl=null,Rl=null,jf=new Map,Uf=new Map,Sl=[],hz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fS(e,t){switch(e){case"focusin":case"focusout":Dl=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Rl=null;break;case"pointerover":case"pointerout":jf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uf.delete(t.pointerId)}}function sf(e,t,i,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},t!==null&&(t=gp(t),t!==null&&zx(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function dz(e,t,i,o,h){switch(t){case"focusin":return Dl=sf(Dl,e,t,i,o,h),!0;case"dragenter":return zl=sf(zl,e,t,i,o,h),!0;case"mouseover":return Rl=sf(Rl,e,t,i,o,h),!0;case"pointerover":var f=h.pointerId;return jf.set(f,sf(jf.get(f)||null,e,t,i,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Uf.set(f,sf(Uf.get(f)||null,e,t,i,o,h)),!0}return!1}function jE(e){var t=Cu(e.target);if(t!==null){var i=Xu(t);if(i!==null){if(t=i.tag,t===13){if(t=PE(i),t!==null){e.blockedOn=t,$E(e.priority,function(){BE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ug(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=s1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Qv=o,i.target.dispatchEvent(o),Qv=null}else return t=gp(i),t!==null&&zx(t),e.blockedOn=i,!1;t.shift()}return!0}function pS(e,t,i){ug(e)&&i.delete(t)}function fz(){i1=!1,Dl!==null&&ug(Dl)&&(Dl=null),zl!==null&&ug(zl)&&(zl=null),Rl!==null&&ug(Rl)&&(Rl=null),jf.forEach(pS),Uf.forEach(pS)}function of(e,t){e.blockedOn===t&&(e.blockedOn=null,i1||(i1=!0,Fs.unstable_scheduleCallback(Fs.unstable_NormalPriority,fz)))}function Vf(e){function t(h){return of(h,e)}if(0<Bm.length){of(Bm[0],e);for(var i=1;i<Bm.length;i++){var o=Bm[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Dl!==null&&of(Dl,e),zl!==null&&of(zl,e),Rl!==null&&of(Rl,e),jf.forEach(t),Uf.forEach(t),i=0;i<Sl.length;i++)o=Sl[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Sl.length&&(i=Sl[0],i.blockedOn===null);)jE(i),i.blockedOn===null&&Sl.shift()}var gh=Ra.ReactCurrentBatchConfig,Hg=!0;function pz(e,t,i,o){var h=jr,f=gh.transition;gh.transition=null;try{jr=1,Rx(e,t,i,o)}finally{jr=h,gh.transition=f}}function mz(e,t,i,o){var h=jr,f=gh.transition;gh.transition=null;try{jr=4,Rx(e,t,i,o)}finally{jr=h,gh.transition=f}}function Rx(e,t,i,o){if(Hg){var h=s1(e,t,i,o);if(h===null)sv(e,t,o,Wg,i),fS(e,o);else if(dz(h,e,t,i,o))o.stopPropagation();else if(fS(e,o),t&4&&-1<hz.indexOf(e)){for(;h!==null;){var f=gp(h);if(f!==null&&FE(f),f=s1(e,t,i,o),f===null&&sv(e,t,o,Wg,i),f===h)break;h=f}h!==null&&o.stopPropagation()}else sv(e,t,o,null,i)}}var Wg=null;function s1(e,t,i,o){if(Wg=null,e=Mx(o),e=Cu(e),e!==null)if(t=Xu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=PE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wg=e,null}function UE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rz()){case Ax:return 1;case zE:return 4;case Ug:case nz:return 16;case RE:return 536870912;default:return 16}default:return 16}}var Tl=null,Lx=null,cg=null;function VE(){if(cg)return cg;var e,t=Lx,i=t.length,o,h="value"in Tl?Tl.value:Tl.textContent,f=h.length;for(e=0;e<i&&t[e]===h[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===h[f-o];o++);return cg=h.slice(e,1<o?1-o:void 0)}function hg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nm(){return!0}function mS(){return!1}function Ns(e){function t(i,o,h,f,g){this._reactName=i,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(i=e[c],this[c]=i?i(f):f[c]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Nm:mS,this.isPropagationStopped=mS,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Nm)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Nm)},persist:function(){},isPersistent:Nm}),t}var Bh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ox=Ns(Bh),mp=kn({},Bh,{view:0,detail:0}),gz=Ns(mp),X0,K0,af,zy=kn({},mp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==af&&(af&&e.type==="mousemove"?(X0=e.screenX-af.screenX,K0=e.screenY-af.screenY):K0=X0=0,af=e),X0)},movementY:function(e){return"movementY"in e?e.movementY:K0}}),gS=Ns(zy),yz=kn({},zy,{dataTransfer:0}),_z=Ns(yz),vz=kn({},mp,{relatedTarget:0}),J0=Ns(vz),xz=kn({},Bh,{animationName:0,elapsedTime:0,pseudoElement:0}),wz=Ns(xz),bz=kn({},Bh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sz=Ns(bz),kz=kn({},Bh,{data:0}),yS=Ns(kz),Tz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ez={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cz[e])?!!t[e]:!1}function Fx(){return Iz}var Pz=kn({},mp,{key:function(e){if(e.key){var t=Tz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ez[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fx,charCode:function(e){return e.type==="keypress"?hg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mz=Ns(Pz),Az=kn({},zy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_S=Ns(Az),Dz=kn({},mp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fx}),zz=Ns(Dz),Rz=kn({},Bh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lz=Ns(Rz),Oz=kn({},zy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fz=Ns(Oz),Bz=[9,13,27,32],Bx=Ca&&"CompositionEvent"in window,Tf=null;Ca&&"documentMode"in document&&(Tf=document.documentMode);var Nz=Ca&&"TextEvent"in window&&!Tf,HE=Ca&&(!Bx||Tf&&8<Tf&&11>=Tf),vS=" ",xS=!1;function WE(e,t){switch(e){case"keyup":return Bz.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eh=!1;function $z(e,t){switch(e){case"compositionend":return GE(t);case"keypress":return t.which!==32?null:(xS=!0,vS);case"textInput":return e=t.data,e===vS&&xS?null:e;default:return null}}function jz(e,t){if(eh)return e==="compositionend"||!Bx&&WE(e,t)?(e=VE(),cg=Lx=Tl=null,eh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HE&&t.locale!=="ko"?null:t.data;default:return null}}var Uz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uz[e.type]:t==="textarea"}function ZE(e,t,i,o){kE(o),t=Gg(t,"onChange"),0<t.length&&(i=new Ox("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Ef=null,Hf=null;function Vz(e){iC(e,0)}function Ry(e){var t=nh(e);if(yE(t))return e}function Hz(e,t){if(e==="change")return t}var qE=!1;if(Ca){var Q0;if(Ca){var ev="oninput"in document;if(!ev){var bS=document.createElement("div");bS.setAttribute("oninput","return;"),ev=typeof bS.oninput=="function"}Q0=ev}else Q0=!1;qE=Q0&&(!document.documentMode||9<document.documentMode)}function SS(){Ef&&(Ef.detachEvent("onpropertychange",YE),Hf=Ef=null)}function YE(e){if(e.propertyName==="value"&&Ry(Hf)){var t=[];ZE(t,Hf,e,Mx(e)),IE(Vz,t)}}function Wz(e,t,i){e==="focusin"?(SS(),Ef=t,Hf=i,Ef.attachEvent("onpropertychange",YE)):e==="focusout"&&SS()}function Gz(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ry(Hf)}function Zz(e,t){if(e==="click")return Ry(t)}function qz(e,t){if(e==="input"||e==="change")return Ry(t)}function Yz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var So=typeof Object.is=="function"?Object.is:Yz;function Wf(e,t){if(So(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var h=i[o];if(!jv.call(t,h)||!So(e[h],t[h]))return!1}return!0}function kS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function TS(e,t){var i=kS(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=kS(i)}}function XE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?XE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KE(){for(var e=window,t=Ng();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ng(e.document)}return t}function Nx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xz(e){var t=KE(),i=e.focusedElem,o=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&XE(i.ownerDocument.documentElement,i)){if(o!==null&&Nx(i)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=i.textContent.length,f=Math.min(o.start,h);o=o.end===void 0?f:Math.min(o.end,h),!e.extend&&f>o&&(h=o,o=f,f=h),h=TS(i,f);var g=TS(i,o);h&&g&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),f>o?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kz=Ca&&"documentMode"in document&&11>=document.documentMode,th=null,o1=null,Cf=null,a1=!1;function ES(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;a1||th==null||th!==Ng(o)||(o=th,"selectionStart"in o&&Nx(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Cf&&Wf(Cf,o)||(Cf=o,o=Gg(o1,"onSelect"),0<o.length&&(t=new Ox("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=th)))}function $m(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var rh={animationend:$m("Animation","AnimationEnd"),animationiteration:$m("Animation","AnimationIteration"),animationstart:$m("Animation","AnimationStart"),transitionend:$m("Transition","TransitionEnd")},tv={},JE={};Ca&&(JE=document.createElement("div").style,"AnimationEvent"in window||(delete rh.animationend.animation,delete rh.animationiteration.animation,delete rh.animationstart.animation),"TransitionEvent"in window||delete rh.transitionend.transition);function Ly(e){if(tv[e])return tv[e];if(!rh[e])return e;var t=rh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in JE)return tv[e]=t[i];return e}var QE=Ly("animationend"),eC=Ly("animationiteration"),tC=Ly("animationstart"),rC=Ly("transitionend"),nC=new Map,CS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vl(e,t){nC.set(e,t),Yu(t,[e])}for(var rv=0;rv<CS.length;rv++){var nv=CS[rv],Jz=nv.toLowerCase(),Qz=nv[0].toUpperCase()+nv.slice(1);Vl(Jz,"on"+Qz)}Vl(QE,"onAnimationEnd");Vl(eC,"onAnimationIteration");Vl(tC,"onAnimationStart");Vl("dblclick","onDoubleClick");Vl("focusin","onFocus");Vl("focusout","onBlur");Vl(rC,"onTransitionEnd");bh("onMouseEnter",["mouseout","mouseover"]);bh("onMouseLeave",["mouseout","mouseover"]);bh("onPointerEnter",["pointerout","pointerover"]);bh("onPointerLeave",["pointerout","pointerover"]);Yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eR=new Set("cancel close invalid load scroll toggle".split(" ").concat(yf));function IS(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,JD(o,t,void 0,e),e.currentTarget=null}function iC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],h=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var c=o[g],T=c.instance,P=c.currentTarget;if(c=c.listener,T!==f&&h.isPropagationStopped())break e;IS(h,c,P),f=T}else for(g=0;g<o.length;g++){if(c=o[g],T=c.instance,P=c.currentTarget,c=c.listener,T!==f&&h.isPropagationStopped())break e;IS(h,c,P),f=T}}}if(jg)throw e=r1,jg=!1,r1=null,e}function sn(e,t){var i=t[d1];i===void 0&&(i=t[d1]=new Set);var o=e+"__bubble";i.has(o)||(sC(t,e,2,!1),i.add(o))}function iv(e,t,i){var o=0;t&&(o|=4),sC(i,e,o,t)}var jm="_reactListening"+Math.random().toString(36).slice(2);function Gf(e){if(!e[jm]){e[jm]=!0,dE.forEach(function(i){i!=="selectionchange"&&(eR.has(i)||iv(i,!1,e),iv(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jm]||(t[jm]=!0,iv("selectionchange",!1,t))}}function sC(e,t,i,o){switch(UE(t)){case 1:var h=pz;break;case 4:h=mz;break;default:h=Rx}i=h.bind(null,t,i,e),h=void 0,!t1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(t,i,{capture:!0,passive:h}):e.addEventListener(t,i,!0):h!==void 0?e.addEventListener(t,i,{passive:h}):e.addEventListener(t,i,!1)}function sv(e,t,i,o,h){var f=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var c=o.stateNode.containerInfo;if(c===h||c.nodeType===8&&c.parentNode===h)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&(T=g.stateNode.containerInfo,T===h||T.nodeType===8&&T.parentNode===h))return;g=g.return}for(;c!==null;){if(g=Cu(c),g===null)return;if(T=g.tag,T===5||T===6){o=f=g;continue e}c=c.parentNode}}o=o.return}IE(function(){var P=f,R=Mx(i),A=[];e:{var M=nC.get(e);if(M!==void 0){var N=Ox,Y=e;switch(e){case"keypress":if(hg(i)===0)break e;case"keydown":case"keyup":N=Mz;break;case"focusin":Y="focus",N=J0;break;case"focusout":Y="blur",N=J0;break;case"beforeblur":case"afterblur":N=J0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=gS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=_z;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=zz;break;case QE:case eC:case tC:N=wz;break;case rC:N=Lz;break;case"scroll":N=gz;break;case"wheel":N=Fz;break;case"copy":case"cut":case"paste":N=Sz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=_S}var U=(t&4)!==0,te=!U&&e==="scroll",O=U?M!==null?M+"Capture":null:M;U=[];for(var $=P,q;$!==null;){q=$;var ne=q.stateNode;if(q.tag===5&&ne!==null&&(q=ne,O!==null&&(ne=$f($,O),ne!=null&&U.push(Zf($,ne,q)))),te)break;$=$.return}0<U.length&&(M=new N(M,Y,null,i,R),A.push({event:M,listeners:U}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",M&&i!==Qv&&(Y=i.relatedTarget||i.fromElement)&&(Cu(Y)||Y[Ia]))break e;if((N||M)&&(M=R.window===R?R:(M=R.ownerDocument)?M.defaultView||M.parentWindow:window,N?(Y=i.relatedTarget||i.toElement,N=P,Y=Y?Cu(Y):null,Y!==null&&(te=Xu(Y),Y!==te||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(N=null,Y=P),N!==Y)){if(U=gS,ne="onMouseLeave",O="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(U=_S,ne="onPointerLeave",O="onPointerEnter",$="pointer"),te=N==null?M:nh(N),q=Y==null?M:nh(Y),M=new U(ne,$+"leave",N,i,R),M.target=te,M.relatedTarget=q,ne=null,Cu(R)===P&&(U=new U(O,$+"enter",Y,i,R),U.target=q,U.relatedTarget=te,ne=U),te=ne,N&&Y)t:{for(U=N,O=Y,$=0,q=U;q;q=Zc(q))$++;for(q=0,ne=O;ne;ne=Zc(ne))q++;for(;0<$-q;)U=Zc(U),$--;for(;0<q-$;)O=Zc(O),q--;for(;$--;){if(U===O||O!==null&&U===O.alternate)break t;U=Zc(U),O=Zc(O)}U=null}else U=null;N!==null&&PS(A,M,N,U,!1),Y!==null&&te!==null&&PS(A,te,Y,U,!0)}}e:{if(M=P?nh(P):window,N=M.nodeName&&M.nodeName.toLowerCase(),N==="select"||N==="input"&&M.type==="file")var oe=Hz;else if(wS(M))if(qE)oe=qz;else{oe=Gz;var ke=Wz}else(N=M.nodeName)&&N.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(oe=Zz);if(oe&&(oe=oe(e,P))){ZE(A,oe,i,R);break e}ke&&ke(e,M,P),e==="focusout"&&(ke=M._wrapperState)&&ke.controlled&&M.type==="number"&&qv(M,"number",M.value)}switch(ke=P?nh(P):window,e){case"focusin":(wS(ke)||ke.contentEditable==="true")&&(th=ke,o1=P,Cf=null);break;case"focusout":Cf=o1=th=null;break;case"mousedown":a1=!0;break;case"contextmenu":case"mouseup":case"dragend":a1=!1,ES(A,i,R);break;case"selectionchange":if(Kz)break;case"keydown":case"keyup":ES(A,i,R)}var ge;if(Bx)e:{switch(e){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else eh?WE(e,i)&&(Fe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Fe="onCompositionStart");Fe&&(HE&&i.locale!=="ko"&&(eh||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&eh&&(ge=VE()):(Tl=R,Lx="value"in Tl?Tl.value:Tl.textContent,eh=!0)),ke=Gg(P,Fe),0<ke.length&&(Fe=new yS(Fe,e,null,i,R),A.push({event:Fe,listeners:ke}),ge?Fe.data=ge:(ge=GE(i),ge!==null&&(Fe.data=ge)))),(ge=Nz?$z(e,i):jz(e,i))&&(P=Gg(P,"onBeforeInput"),0<P.length&&(R=new yS("onBeforeInput","beforeinput",null,i,R),A.push({event:R,listeners:P}),R.data=ge))}iC(A,t)})}function Zf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Gg(e,t){for(var i=t+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=$f(e,i),f!=null&&o.unshift(Zf(e,f,h)),f=$f(e,t),f!=null&&o.push(Zf(e,f,h))),e=e.return}return o}function Zc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PS(e,t,i,o,h){for(var f=t._reactName,g=[];i!==null&&i!==o;){var c=i,T=c.alternate,P=c.stateNode;if(T!==null&&T===o)break;c.tag===5&&P!==null&&(c=P,h?(T=$f(i,f),T!=null&&g.unshift(Zf(i,T,c))):h||(T=$f(i,f),T!=null&&g.push(Zf(i,T,c)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var tR=/\r\n?/g,rR=/\u0000|\uFFFD/g;function MS(e){return(typeof e=="string"?e:""+e).replace(tR,`
`).replace(rR,"")}function Um(e,t,i){if(t=MS(t),MS(e)!==t&&i)throw Error(lt(425))}function Zg(){}var l1=null,u1=null;function c1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var h1=typeof setTimeout=="function"?setTimeout:void 0,nR=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,iR=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(e){return AS.resolve(null).then(e).catch(sR)}:h1;function sR(e){setTimeout(function(){throw e})}function ov(e,t){var i=t,o=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(o===0){e.removeChild(h),Vf(t);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=h}while(i);Vf(t)}function Ll(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Nh=Math.random().toString(36).slice(2),Vo="__reactFiber$"+Nh,qf="__reactProps$"+Nh,Ia="__reactContainer$"+Nh,d1="__reactEvents$"+Nh,oR="__reactListeners$"+Nh,aR="__reactHandles$"+Nh;function Cu(e){var t=e[Vo];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ia]||i[Vo]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=DS(e);e!==null;){if(i=e[Vo])return i;e=DS(e)}return t}e=i,i=e.parentNode}return null}function gp(e){return e=e[Vo]||e[Ia],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function Oy(e){return e[qf]||null}var f1=[],ih=-1;function Hl(e){return{current:e}}function cn(e){0>ih||(e.current=f1[ih],f1[ih]=null,ih--)}function en(e,t){ih++,f1[ih]=e.current,e.current=t}var Ul={},Pi=Hl(Ul),cs=Hl(!1),Uu=Ul;function Sh(e,t){var i=e.type.contextTypes;if(!i)return Ul;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in i)h[f]=t[f];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function hs(e){return e=e.childContextTypes,e!=null}function qg(){cn(cs),cn(Pi)}function zS(e,t,i){if(Pi.current!==Ul)throw Error(lt(168));en(Pi,t),en(cs,i)}function oC(e,t,i){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var h in o)if(!(h in t))throw Error(lt(108,WD(e)||"Unknown",h));return kn({},i,o)}function Yg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ul,Uu=Pi.current,en(Pi,e),en(cs,cs.current),!0}function RS(e,t,i){var o=e.stateNode;if(!o)throw Error(lt(169));i?(e=oC(e,t,Uu),o.__reactInternalMemoizedMergedChildContext=e,cn(cs),cn(Pi),en(Pi,e)):cn(cs),en(cs,i)}var va=null,Fy=!1,av=!1;function aC(e){va===null?va=[e]:va.push(e)}function lR(e){Fy=!0,aC(e)}function Wl(){if(!av&&va!==null){av=!0;var e=0,t=jr;try{var i=va;for(jr=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}va=null,Fy=!1}catch(h){throw va!==null&&(va=va.slice(e+1)),DE(Ax,Wl),h}finally{jr=t,av=!1}}return null}var sh=[],oh=0,Xg=null,Kg=0,Ys=[],Xs=0,Vu=null,xa=1,wa="";function wu(e,t){sh[oh++]=Kg,sh[oh++]=Xg,Xg=e,Kg=t}function lC(e,t,i){Ys[Xs++]=xa,Ys[Xs++]=wa,Ys[Xs++]=Vu,Vu=e;var o=xa;e=wa;var h=32-vo(o)-1;o&=~(1<<h),i+=1;var f=32-vo(t)+h;if(30<f){var g=h-h%5;f=(o&(1<<g)-1).toString(32),o>>=g,h-=g,xa=1<<32-vo(t)+h|i<<h|o,wa=f+e}else xa=1<<f|i<<h|o,wa=e}function $x(e){e.return!==null&&(wu(e,1),lC(e,1,0))}function jx(e){for(;e===Xg;)Xg=sh[--oh],sh[oh]=null,Kg=sh[--oh],sh[oh]=null;for(;e===Vu;)Vu=Ys[--Xs],Ys[Xs]=null,wa=Ys[--Xs],Ys[Xs]=null,xa=Ys[--Xs],Ys[Xs]=null}var Os=null,Ls=null,yn=!1,yo=null;function uC(e,t){var i=Js(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function LS(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Os=e,Ls=Ll(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Os=e,Ls=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Vu!==null?{id:xa,overflow:wa}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Js(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Os=e,Ls=null,!0):!1;default:return!1}}function p1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function m1(e){if(yn){var t=Ls;if(t){var i=t;if(!LS(e,t)){if(p1(e))throw Error(lt(418));t=Ll(i.nextSibling);var o=Os;t&&LS(e,t)?uC(o,i):(e.flags=e.flags&-4097|2,yn=!1,Os=e)}}else{if(p1(e))throw Error(lt(418));e.flags=e.flags&-4097|2,yn=!1,Os=e}}}function OS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Os=e}function Vm(e){if(e!==Os)return!1;if(!yn)return OS(e),yn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c1(e.type,e.memoizedProps)),t&&(t=Ls)){if(p1(e))throw cC(),Error(lt(418));for(;t;)uC(e,t),t=Ll(t.nextSibling)}if(OS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Ls=Ll(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Ls=null}}else Ls=Os?Ll(e.stateNode.nextSibling):null;return!0}function cC(){for(var e=Ls;e;)e=Ll(e.nextSibling)}function kh(){Ls=Os=null,yn=!1}function Ux(e){yo===null?yo=[e]:yo.push(e)}var uR=Ra.ReactCurrentBatchConfig;function lf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(lt(309));var o=i.stateNode}if(!o)throw Error(lt(147,e));var h=o,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var c=h.refs;g===null?delete c[f]:c[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(lt(284));if(!i._owner)throw Error(lt(290,e))}return e}function Hm(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function FS(e){var t=e._init;return t(e._payload)}function hC(e){function t(O,$){if(e){var q=O.deletions;q===null?(O.deletions=[$],O.flags|=16):q.push($)}}function i(O,$){if(!e)return null;for(;$!==null;)t(O,$),$=$.sibling;return null}function o(O,$){for(O=new Map;$!==null;)$.key!==null?O.set($.key,$):O.set($.index,$),$=$.sibling;return O}function h(O,$){return O=Nl(O,$),O.index=0,O.sibling=null,O}function f(O,$,q){return O.index=q,e?(q=O.alternate,q!==null?(q=q.index,q<$?(O.flags|=2,$):q):(O.flags|=2,$)):(O.flags|=1048576,$)}function g(O){return e&&O.alternate===null&&(O.flags|=2),O}function c(O,$,q,ne){return $===null||$.tag!==6?($=pv(q,O.mode,ne),$.return=O,$):($=h($,q),$.return=O,$)}function T(O,$,q,ne){var oe=q.type;return oe===Qc?R(O,$,q.props.children,ne,q.key):$!==null&&($.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===wl&&FS(oe)===$.type)?(ne=h($,q.props),ne.ref=lf(O,$,q),ne.return=O,ne):(ne=_g(q.type,q.key,q.props,null,O.mode,ne),ne.ref=lf(O,$,q),ne.return=O,ne)}function P(O,$,q,ne){return $===null||$.tag!==4||$.stateNode.containerInfo!==q.containerInfo||$.stateNode.implementation!==q.implementation?($=mv(q,O.mode,ne),$.return=O,$):($=h($,q.children||[]),$.return=O,$)}function R(O,$,q,ne,oe){return $===null||$.tag!==7?($=Lu(q,O.mode,ne,oe),$.return=O,$):($=h($,q),$.return=O,$)}function A(O,$,q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=pv(""+$,O.mode,q),$.return=O,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case zm:return q=_g($.type,$.key,$.props,null,O.mode,q),q.ref=lf(O,null,$),q.return=O,q;case Jc:return $=mv($,O.mode,q),$.return=O,$;case wl:var ne=$._init;return A(O,ne($._payload),q)}if(mf($)||rf($))return $=Lu($,O.mode,q,null),$.return=O,$;Hm(O,$)}return null}function M(O,$,q,ne){var oe=$!==null?$.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return oe!==null?null:c(O,$,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case zm:return q.key===oe?T(O,$,q,ne):null;case Jc:return q.key===oe?P(O,$,q,ne):null;case wl:return oe=q._init,M(O,$,oe(q._payload),ne)}if(mf(q)||rf(q))return oe!==null?null:R(O,$,q,ne,null);Hm(O,q)}return null}function N(O,$,q,ne,oe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return O=O.get(q)||null,c($,O,""+ne,oe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case zm:return O=O.get(ne.key===null?q:ne.key)||null,T($,O,ne,oe);case Jc:return O=O.get(ne.key===null?q:ne.key)||null,P($,O,ne,oe);case wl:var ke=ne._init;return N(O,$,q,ke(ne._payload),oe)}if(mf(ne)||rf(ne))return O=O.get(q)||null,R($,O,ne,oe,null);Hm($,ne)}return null}function Y(O,$,q,ne){for(var oe=null,ke=null,ge=$,Fe=$=0,Oe=null;ge!==null&&Fe<q.length;Fe++){ge.index>Fe?(Oe=ge,ge=null):Oe=ge.sibling;var Ge=M(O,ge,q[Fe],ne);if(Ge===null){ge===null&&(ge=Oe);break}e&&ge&&Ge.alternate===null&&t(O,ge),$=f(Ge,$,Fe),ke===null?oe=Ge:ke.sibling=Ge,ke=Ge,ge=Oe}if(Fe===q.length)return i(O,ge),yn&&wu(O,Fe),oe;if(ge===null){for(;Fe<q.length;Fe++)ge=A(O,q[Fe],ne),ge!==null&&($=f(ge,$,Fe),ke===null?oe=ge:ke.sibling=ge,ke=ge);return yn&&wu(O,Fe),oe}for(ge=o(O,ge);Fe<q.length;Fe++)Oe=N(ge,O,Fe,q[Fe],ne),Oe!==null&&(e&&Oe.alternate!==null&&ge.delete(Oe.key===null?Fe:Oe.key),$=f(Oe,$,Fe),ke===null?oe=Oe:ke.sibling=Oe,ke=Oe);return e&&ge.forEach(function(it){return t(O,it)}),yn&&wu(O,Fe),oe}function U(O,$,q,ne){var oe=rf(q);if(typeof oe!="function")throw Error(lt(150));if(q=oe.call(q),q==null)throw Error(lt(151));for(var ke=oe=null,ge=$,Fe=$=0,Oe=null,Ge=q.next();ge!==null&&!Ge.done;Fe++,Ge=q.next()){ge.index>Fe?(Oe=ge,ge=null):Oe=ge.sibling;var it=M(O,ge,Ge.value,ne);if(it===null){ge===null&&(ge=Oe);break}e&&ge&&it.alternate===null&&t(O,ge),$=f(it,$,Fe),ke===null?oe=it:ke.sibling=it,ke=it,ge=Oe}if(Ge.done)return i(O,ge),yn&&wu(O,Fe),oe;if(ge===null){for(;!Ge.done;Fe++,Ge=q.next())Ge=A(O,Ge.value,ne),Ge!==null&&($=f(Ge,$,Fe),ke===null?oe=Ge:ke.sibling=Ge,ke=Ge);return yn&&wu(O,Fe),oe}for(ge=o(O,ge);!Ge.done;Fe++,Ge=q.next())Ge=N(ge,O,Fe,Ge.value,ne),Ge!==null&&(e&&Ge.alternate!==null&&ge.delete(Ge.key===null?Fe:Ge.key),$=f(Ge,$,Fe),ke===null?oe=Ge:ke.sibling=Ge,ke=Ge);return e&&ge.forEach(function(ve){return t(O,ve)}),yn&&wu(O,Fe),oe}function te(O,$,q,ne){if(typeof q=="object"&&q!==null&&q.type===Qc&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case zm:e:{for(var oe=q.key,ke=$;ke!==null;){if(ke.key===oe){if(oe=q.type,oe===Qc){if(ke.tag===7){i(O,ke.sibling),$=h(ke,q.props.children),$.return=O,O=$;break e}}else if(ke.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===wl&&FS(oe)===ke.type){i(O,ke.sibling),$=h(ke,q.props),$.ref=lf(O,ke,q),$.return=O,O=$;break e}i(O,ke);break}else t(O,ke);ke=ke.sibling}q.type===Qc?($=Lu(q.props.children,O.mode,ne,q.key),$.return=O,O=$):(ne=_g(q.type,q.key,q.props,null,O.mode,ne),ne.ref=lf(O,$,q),ne.return=O,O=ne)}return g(O);case Jc:e:{for(ke=q.key;$!==null;){if($.key===ke)if($.tag===4&&$.stateNode.containerInfo===q.containerInfo&&$.stateNode.implementation===q.implementation){i(O,$.sibling),$=h($,q.children||[]),$.return=O,O=$;break e}else{i(O,$);break}else t(O,$);$=$.sibling}$=mv(q,O.mode,ne),$.return=O,O=$}return g(O);case wl:return ke=q._init,te(O,$,ke(q._payload),ne)}if(mf(q))return Y(O,$,q,ne);if(rf(q))return U(O,$,q,ne);Hm(O,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,$!==null&&$.tag===6?(i(O,$.sibling),$=h($,q),$.return=O,O=$):(i(O,$),$=pv(q,O.mode,ne),$.return=O,O=$),g(O)):i(O,$)}return te}var Th=hC(!0),dC=hC(!1),Jg=Hl(null),Qg=null,ah=null,Vx=null;function Hx(){Vx=ah=Qg=null}function Wx(e){var t=Jg.current;cn(Jg),e._currentValue=t}function g1(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function yh(e,t){Qg=e,Vx=ah=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ls=!0),e.firstContext=null)}function eo(e){var t=e._currentValue;if(Vx!==e)if(e={context:e,memoizedValue:t,next:null},ah===null){if(Qg===null)throw Error(lt(308));ah=e,Qg.dependencies={lanes:0,firstContext:e}}else ah=ah.next=e;return t}var Iu=null;function Gx(e){Iu===null?Iu=[e]:Iu.push(e)}function fC(e,t,i,o){var h=t.interleaved;return h===null?(i.next=i,Gx(t)):(i.next=h.next,h.next=i),t.interleaved=i,Pa(e,o)}function Pa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var bl=!1;function Zx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ol(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Pr&2){var h=o.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),o.pending=t,Pa(e,i)}return h=o.interleaved,h===null?(t.next=t,Gx(o)):(t.next=h.next,h.next=t),o.interleaved=t,Pa(e,i)}function dg(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Dx(e,i)}}function BS(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var h=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?h=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?h=f=t:f=f.next=t}else h=f=t;i={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ey(e,t,i,o){var h=e.updateQueue;bl=!1;var f=h.firstBaseUpdate,g=h.lastBaseUpdate,c=h.shared.pending;if(c!==null){h.shared.pending=null;var T=c,P=T.next;T.next=null,g===null?f=P:g.next=P,g=T;var R=e.alternate;R!==null&&(R=R.updateQueue,c=R.lastBaseUpdate,c!==g&&(c===null?R.firstBaseUpdate=P:c.next=P,R.lastBaseUpdate=T))}if(f!==null){var A=h.baseState;g=0,R=P=T=null,c=f;do{var M=c.lane,N=c.eventTime;if((o&M)===M){R!==null&&(R=R.next={eventTime:N,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var Y=e,U=c;switch(M=t,N=i,U.tag){case 1:if(Y=U.payload,typeof Y=="function"){A=Y.call(N,A,M);break e}A=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=U.payload,M=typeof Y=="function"?Y.call(N,A,M):Y,M==null)break e;A=kn({},A,M);break e;case 2:bl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,M=h.effects,M===null?h.effects=[c]:M.push(c))}else N={eventTime:N,lane:M,tag:c.tag,payload:c.payload,callback:c.callback,next:null},R===null?(P=R=N,T=A):R=R.next=N,g|=M;if(c=c.next,c===null){if(c=h.shared.pending,c===null)break;M=c,c=M.next,M.next=null,h.lastBaseUpdate=M,h.shared.pending=null}}while(!0);if(R===null&&(T=A),h.baseState=T,h.firstBaseUpdate=P,h.lastBaseUpdate=R,t=h.shared.interleaved,t!==null){h=t;do g|=h.lane,h=h.next;while(h!==t)}else f===null&&(h.shared.lanes=0);Wu|=g,e.lanes=g,e.memoizedState=A}}function NS(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],h=o.callback;if(h!==null){if(o.callback=null,o=i,typeof h!="function")throw Error(lt(191,h));h.call(o)}}}var yp={},Go=Hl(yp),Yf=Hl(yp),Xf=Hl(yp);function Pu(e){if(e===yp)throw Error(lt(174));return e}function qx(e,t){switch(en(Xf,t),en(Yf,e),en(Go,yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xv(t,e)}cn(Go),en(Go,t)}function Eh(){cn(Go),cn(Yf),cn(Xf)}function mC(e){Pu(Xf.current);var t=Pu(Go.current),i=Xv(t,e.type);t!==i&&(en(Yf,e),en(Go,i))}function Yx(e){Yf.current===e&&(cn(Go),cn(Yf))}var bn=Hl(0);function ty(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lv=[];function Xx(){for(var e=0;e<lv.length;e++)lv[e]._workInProgressVersionPrimary=null;lv.length=0}var fg=Ra.ReactCurrentDispatcher,uv=Ra.ReactCurrentBatchConfig,Hu=0,Sn=null,jn=null,Qn=null,ry=!1,If=!1,Kf=0,cR=0;function ki(){throw Error(lt(321))}function Kx(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!So(e[i],t[i]))return!1;return!0}function Jx(e,t,i,o,h,f){if(Hu=f,Sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fg.current=e===null||e.memoizedState===null?pR:mR,e=i(o,h),If){f=0;do{if(If=!1,Kf=0,25<=f)throw Error(lt(301));f+=1,Qn=jn=null,t.updateQueue=null,fg.current=gR,e=i(o,h)}while(If)}if(fg.current=ny,t=jn!==null&&jn.next!==null,Hu=0,Qn=jn=Sn=null,ry=!1,t)throw Error(lt(300));return e}function Qx(){var e=Kf!==0;return Kf=0,e}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?Sn.memoizedState=Qn=e:Qn=Qn.next=e,Qn}function to(){if(jn===null){var e=Sn.alternate;e=e!==null?e.memoizedState:null}else e=jn.next;var t=Qn===null?Sn.memoizedState:Qn.next;if(t!==null)Qn=t,jn=e;else{if(e===null)throw Error(lt(310));jn=e,e={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Qn===null?Sn.memoizedState=Qn=e:Qn=Qn.next=e}return Qn}function Jf(e,t){return typeof t=="function"?t(e):t}function cv(e){var t=to(),i=t.queue;if(i===null)throw Error(lt(311));i.lastRenderedReducer=e;var o=jn,h=o.baseQueue,f=i.pending;if(f!==null){if(h!==null){var g=h.next;h.next=f.next,f.next=g}o.baseQueue=h=f,i.pending=null}if(h!==null){f=h.next,o=o.baseState;var c=g=null,T=null,P=f;do{var R=P.lane;if((Hu&R)===R)T!==null&&(T=T.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),o=P.hasEagerState?P.eagerState:e(o,P.action);else{var A={lane:R,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};T===null?(c=T=A,g=o):T=T.next=A,Sn.lanes|=R,Wu|=R}P=P.next}while(P!==null&&P!==f);T===null?g=o:T.next=c,So(o,t.memoizedState)||(ls=!0),t.memoizedState=o,t.baseState=g,t.baseQueue=T,i.lastRenderedState=o}if(e=i.interleaved,e!==null){h=e;do f=h.lane,Sn.lanes|=f,Wu|=f,h=h.next;while(h!==e)}else h===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function hv(e){var t=to(),i=t.queue;if(i===null)throw Error(lt(311));i.lastRenderedReducer=e;var o=i.dispatch,h=i.pending,f=t.memoizedState;if(h!==null){i.pending=null;var g=h=h.next;do f=e(f,g.action),g=g.next;while(g!==h);So(f,t.memoizedState)||(ls=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,o]}function gC(){}function yC(e,t){var i=Sn,o=to(),h=t(),f=!So(o.memoizedState,h);if(f&&(o.memoizedState=h,ls=!0),o=o.queue,ew(xC.bind(null,i,o,e),[e]),o.getSnapshot!==t||f||Qn!==null&&Qn.memoizedState.tag&1){if(i.flags|=2048,Qf(9,vC.bind(null,i,o,h,t),void 0,null),ti===null)throw Error(lt(349));Hu&30||_C(i,t,h)}return h}function _C(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function vC(e,t,i,o){t.value=i,t.getSnapshot=o,wC(t)&&bC(e)}function xC(e,t,i){return i(function(){wC(t)&&bC(e)})}function wC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!So(e,i)}catch{return!0}}function bC(e){var t=Pa(e,1);t!==null&&xo(t,e,1,-1)}function $S(e){var t=jo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jf,lastRenderedState:e},t.queue=e,e=e.dispatch=fR.bind(null,Sn,e),[t.memoizedState,e]}function Qf(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function SC(){return to().memoizedState}function pg(e,t,i,o){var h=jo();Sn.flags|=e,h.memoizedState=Qf(1|t,i,void 0,o===void 0?null:o)}function By(e,t,i,o){var h=to();o=o===void 0?null:o;var f=void 0;if(jn!==null){var g=jn.memoizedState;if(f=g.destroy,o!==null&&Kx(o,g.deps)){h.memoizedState=Qf(t,i,f,o);return}}Sn.flags|=e,h.memoizedState=Qf(1|t,i,f,o)}function jS(e,t){return pg(8390656,8,e,t)}function ew(e,t){return By(2048,8,e,t)}function kC(e,t){return By(4,2,e,t)}function TC(e,t){return By(4,4,e,t)}function EC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function CC(e,t,i){return i=i!=null?i.concat([e]):null,By(4,4,EC.bind(null,t,e),i)}function tw(){}function IC(e,t){var i=to();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&Kx(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function PC(e,t){var i=to();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&Kx(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function MC(e,t,i){return Hu&21?(So(i,t)||(i=LE(),Sn.lanes|=i,Wu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ls=!0),e.memoizedState=i)}function hR(e,t){var i=jr;jr=i!==0&&4>i?i:4,e(!0);var o=uv.transition;uv.transition={};try{e(!1),t()}finally{jr=i,uv.transition=o}}function AC(){return to().memoizedState}function dR(e,t,i){var o=Bl(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},DC(e))zC(t,i);else if(i=fC(e,t,i,o),i!==null){var h=Hi();xo(i,e,o,h),RC(i,t,o)}}function fR(e,t,i){var o=Bl(e),h={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(DC(e))zC(t,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,c=f(g,i);if(h.hasEagerState=!0,h.eagerState=c,So(c,g)){var T=t.interleaved;T===null?(h.next=h,Gx(t)):(h.next=T.next,T.next=h),t.interleaved=h;return}}catch{}finally{}i=fC(e,t,h,o),i!==null&&(h=Hi(),xo(i,e,o,h),RC(i,t,o))}}function DC(e){var t=e.alternate;return e===Sn||t!==null&&t===Sn}function zC(e,t){If=ry=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function RC(e,t,i){if(i&4194240){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Dx(e,i)}}var ny={readContext:eo,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},pR={readContext:eo,useCallback:function(e,t){return jo().memoizedState=[e,t===void 0?null:t],e},useContext:eo,useEffect:jS,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,pg(4194308,4,EC.bind(null,t,e),i)},useLayoutEffect:function(e,t){return pg(4194308,4,e,t)},useInsertionEffect:function(e,t){return pg(4,2,e,t)},useMemo:function(e,t){var i=jo();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=jo();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=dR.bind(null,Sn,e),[o.memoizedState,e]},useRef:function(e){var t=jo();return e={current:e},t.memoizedState=e},useState:$S,useDebugValue:tw,useDeferredValue:function(e){return jo().memoizedState=e},useTransition:function(){var e=$S(!1),t=e[0];return e=hR.bind(null,e[1]),jo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var o=Sn,h=jo();if(yn){if(i===void 0)throw Error(lt(407));i=i()}else{if(i=t(),ti===null)throw Error(lt(349));Hu&30||_C(o,t,i)}h.memoizedState=i;var f={value:i,getSnapshot:t};return h.queue=f,jS(xC.bind(null,o,f,e),[e]),o.flags|=2048,Qf(9,vC.bind(null,o,f,i,t),void 0,null),i},useId:function(){var e=jo(),t=ti.identifierPrefix;if(yn){var i=wa,o=xa;i=(o&~(1<<32-vo(o)-1)).toString(32)+i,t=":"+t+"R"+i,i=Kf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=cR++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mR={readContext:eo,useCallback:IC,useContext:eo,useEffect:ew,useImperativeHandle:CC,useInsertionEffect:kC,useLayoutEffect:TC,useMemo:PC,useReducer:cv,useRef:SC,useState:function(){return cv(Jf)},useDebugValue:tw,useDeferredValue:function(e){var t=to();return MC(t,jn.memoizedState,e)},useTransition:function(){var e=cv(Jf)[0],t=to().memoizedState;return[e,t]},useMutableSource:gC,useSyncExternalStore:yC,useId:AC,unstable_isNewReconciler:!1},gR={readContext:eo,useCallback:IC,useContext:eo,useEffect:ew,useImperativeHandle:CC,useInsertionEffect:kC,useLayoutEffect:TC,useMemo:PC,useReducer:hv,useRef:SC,useState:function(){return hv(Jf)},useDebugValue:tw,useDeferredValue:function(e){var t=to();return jn===null?t.memoizedState=e:MC(t,jn.memoizedState,e)},useTransition:function(){var e=hv(Jf)[0],t=to().memoizedState;return[e,t]},useMutableSource:gC,useSyncExternalStore:yC,useId:AC,unstable_isNewReconciler:!1};function po(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function y1(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:kn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ny={isMounted:function(e){return(e=e._reactInternals)?Xu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Hi(),h=Bl(e),f=ka(o,h);f.payload=t,i!=null&&(f.callback=i),t=Ol(e,f,h),t!==null&&(xo(t,e,h,o),dg(t,e,h))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Hi(),h=Bl(e),f=ka(o,h);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=Ol(e,f,h),t!==null&&(xo(t,e,h,o),dg(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Hi(),o=Bl(e),h=ka(i,o);h.tag=2,t!=null&&(h.callback=t),t=Ol(e,h,o),t!==null&&(xo(t,e,o,i),dg(t,e,o))}};function US(e,t,i,o,h,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!Wf(i,o)||!Wf(h,f):!0}function LC(e,t,i){var o=!1,h=Ul,f=t.contextType;return typeof f=="object"&&f!==null?f=eo(f):(h=hs(t)?Uu:Pi.current,o=t.contextTypes,f=(o=o!=null)?Sh(e,h):Ul),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ny,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),t}function VS(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Ny.enqueueReplaceState(t,t.state,null)}function _1(e,t,i,o){var h=e.stateNode;h.props=i,h.state=e.memoizedState,h.refs={},Zx(e);var f=t.contextType;typeof f=="object"&&f!==null?h.context=eo(f):(f=hs(t)?Uu:Pi.current,h.context=Sh(e,f)),h.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(y1(e,t,f,i),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&Ny.enqueueReplaceState(h,h.state,null),ey(e,i,h,o),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Ch(e,t){try{var i="",o=t;do i+=HD(o),o=o.return;while(o);var h=i}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:h,digest:null}}function dv(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function v1(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var yR=typeof WeakMap=="function"?WeakMap:Map;function OC(e,t,i){i=ka(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){sy||(sy=!0,P1=o),v1(e,t)},i}function FC(e,t,i){i=ka(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var h=t.value;i.payload=function(){return o(h)},i.callback=function(){v1(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){v1(e,t),typeof o!="function"&&(Fl===null?Fl=new Set([this]):Fl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function HS(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new yR;var h=new Set;o.set(t,h)}else h=o.get(t),h===void 0&&(h=new Set,o.set(t,h));h.has(i)||(h.add(i),e=AR.bind(null,e,t,i),t.then(e,e))}function WS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function GS(e,t,i,o,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ka(-1,1),t.tag=2,Ol(i,t,1))),i.lanes|=1),e)}var _R=Ra.ReactCurrentOwner,ls=!1;function Ni(e,t,i,o){t.child=e===null?dC(t,null,i,o):Th(t,e.child,i,o)}function ZS(e,t,i,o,h){i=i.render;var f=t.ref;return yh(t,h),o=Jx(e,t,i,o,f,h),i=Qx(),e!==null&&!ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ma(e,t,h)):(yn&&i&&$x(t),t.flags|=1,Ni(e,t,o,h),t.child)}function qS(e,t,i,o,h){if(e===null){var f=i.type;return typeof f=="function"&&!uw(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,BC(e,t,f,o,h)):(e=_g(i.type,null,o,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&h)){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:Wf,i(g,o)&&e.ref===t.ref)return Ma(e,t,h)}return t.flags|=1,e=Nl(f,o),e.ref=t.ref,e.return=t,t.child=e}function BC(e,t,i,o,h){if(e!==null){var f=e.memoizedProps;if(Wf(f,o)&&e.ref===t.ref)if(ls=!1,t.pendingProps=o=f,(e.lanes&h)!==0)e.flags&131072&&(ls=!0);else return t.lanes=e.lanes,Ma(e,t,h)}return x1(e,t,i,o,h)}function NC(e,t,i){var o=t.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(uh,Ms),Ms|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,en(uh,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=f!==null?f.baseLanes:i,en(uh,Ms),Ms|=o}else f!==null?(o=f.baseLanes|i,t.memoizedState=null):o=i,en(uh,Ms),Ms|=o;return Ni(e,t,h,i),t.child}function $C(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function x1(e,t,i,o,h){var f=hs(i)?Uu:Pi.current;return f=Sh(t,f),yh(t,h),i=Jx(e,t,i,o,f,h),o=Qx(),e!==null&&!ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ma(e,t,h)):(yn&&o&&$x(t),t.flags|=1,Ni(e,t,i,h),t.child)}function YS(e,t,i,o,h){if(hs(i)){var f=!0;Yg(t)}else f=!1;if(yh(t,h),t.stateNode===null)mg(e,t),LC(t,i,o),_1(t,i,o,h),o=!0;else if(e===null){var g=t.stateNode,c=t.memoizedProps;g.props=c;var T=g.context,P=i.contextType;typeof P=="object"&&P!==null?P=eo(P):(P=hs(i)?Uu:Pi.current,P=Sh(t,P));var R=i.getDerivedStateFromProps,A=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function";A||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(c!==o||T!==P)&&VS(t,g,o,P),bl=!1;var M=t.memoizedState;g.state=M,ey(t,o,g,h),T=t.memoizedState,c!==o||M!==T||cs.current||bl?(typeof R=="function"&&(y1(t,i,R,o),T=t.memoizedState),(c=bl||US(t,i,c,o,M,T,P))?(A||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=T),g.props=o,g.state=T,g.context=P,o=c):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,pC(e,t),c=t.memoizedProps,P=t.type===t.elementType?c:po(t.type,c),g.props=P,A=t.pendingProps,M=g.context,T=i.contextType,typeof T=="object"&&T!==null?T=eo(T):(T=hs(i)?Uu:Pi.current,T=Sh(t,T));var N=i.getDerivedStateFromProps;(R=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(c!==A||M!==T)&&VS(t,g,o,T),bl=!1,M=t.memoizedState,g.state=M,ey(t,o,g,h);var Y=t.memoizedState;c!==A||M!==Y||cs.current||bl?(typeof N=="function"&&(y1(t,i,N,o),Y=t.memoizedState),(P=bl||US(t,i,P,o,M,Y,T)||!1)?(R||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,Y,T),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,Y,T)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||c===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Y),g.props=o,g.state=Y,g.context=T,o=P):(typeof g.componentDidUpdate!="function"||c===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),o=!1)}return w1(e,t,i,o,f,h)}function w1(e,t,i,o,h,f){$C(e,t);var g=(t.flags&128)!==0;if(!o&&!g)return h&&RS(t,i,!1),Ma(e,t,f);o=t.stateNode,_R.current=t;var c=g&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=Th(t,e.child,null,f),t.child=Th(t,null,c,f)):Ni(e,t,c,f),t.memoizedState=o.state,h&&RS(t,i,!0),t.child}function jC(e){var t=e.stateNode;t.pendingContext?zS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zS(e,t.context,!1),qx(e,t.containerInfo)}function XS(e,t,i,o,h){return kh(),Ux(h),t.flags|=256,Ni(e,t,i,o),t.child}var b1={dehydrated:null,treeContext:null,retryLane:0};function S1(e){return{baseLanes:e,cachePool:null,transitions:null}}function UC(e,t,i){var o=t.pendingProps,h=bn.current,f=!1,g=(t.flags&128)!==0,c;if((c=g)||(c=e!==null&&e.memoizedState===null?!1:(h&2)!==0),c?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),en(bn,h&1),e===null)return m1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=o.children,e=o.fallback,f?(o=t.mode,f=t.child,g={mode:"hidden",children:g},!(o&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Uy(g,o,0,null),e=Lu(e,o,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=S1(i),t.memoizedState=b1,e):rw(t,g));if(h=e.memoizedState,h!==null&&(c=h.dehydrated,c!==null))return vR(e,t,g,o,c,h,i);if(f){f=o.fallback,g=t.mode,h=e.child,c=h.sibling;var T={mode:"hidden",children:o.children};return!(g&1)&&t.child!==h?(o=t.child,o.childLanes=0,o.pendingProps=T,t.deletions=null):(o=Nl(h,T),o.subtreeFlags=h.subtreeFlags&14680064),c!==null?f=Nl(c,f):(f=Lu(f,g,i,null),f.flags|=2),f.return=t,o.return=t,o.sibling=f,t.child=o,o=f,f=t.child,g=e.child.memoizedState,g=g===null?S1(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~i,t.memoizedState=b1,o}return f=e.child,e=f.sibling,o=Nl(f,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=i),o.return=t,o.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function rw(e,t){return t=Uy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wm(e,t,i,o){return o!==null&&Ux(o),Th(t,e.child,null,i),e=rw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vR(e,t,i,o,h,f,g){if(i)return t.flags&256?(t.flags&=-257,o=dv(Error(lt(422))),Wm(e,t,g,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=o.fallback,h=t.mode,o=Uy({mode:"visible",children:o.children},h,0,null),f=Lu(f,h,g,null),f.flags|=2,o.return=t,f.return=t,o.sibling=f,t.child=o,t.mode&1&&Th(t,e.child,null,g),t.child.memoizedState=S1(g),t.memoizedState=b1,f);if(!(t.mode&1))return Wm(e,t,g,null);if(h.data==="$!"){if(o=h.nextSibling&&h.nextSibling.dataset,o)var c=o.dgst;return o=c,f=Error(lt(419)),o=dv(f,o,void 0),Wm(e,t,g,o)}if(c=(g&e.childLanes)!==0,ls||c){if(o=ti,o!==null){switch(g&-g){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(o.suspendedLanes|g)?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,Pa(e,h),xo(o,e,h,-1))}return lw(),o=dv(Error(lt(421))),Wm(e,t,g,o)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=DR.bind(null,e),h._reactRetry=t,null):(e=f.treeContext,Ls=Ll(h.nextSibling),Os=t,yn=!0,yo=null,e!==null&&(Ys[Xs++]=xa,Ys[Xs++]=wa,Ys[Xs++]=Vu,xa=e.id,wa=e.overflow,Vu=t),t=rw(t,o.children),t.flags|=4096,t)}function KS(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),g1(e.return,t,i)}function fv(e,t,i,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:h}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=h)}function VC(e,t,i){var o=t.pendingProps,h=o.revealOrder,f=o.tail;if(Ni(e,t,o.children,i),o=bn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&KS(e,i,t);else if(e.tag===19)KS(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(en(bn,o),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(i=t.child,h=null;i!==null;)e=i.alternate,e!==null&&ty(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=t.child,t.child=null):(h=i.sibling,i.sibling=null),fv(t,!1,h,i,f);break;case"backwards":for(i=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&ty(e)===null){t.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}fv(t,!0,i,null,f);break;case"together":fv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ma(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Wu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,i=Nl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Nl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function xR(e,t,i){switch(t.tag){case 3:jC(t),kh();break;case 5:mC(t);break;case 1:hs(t.type)&&Yg(t);break;case 4:qx(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,h=t.memoizedProps.value;en(Jg,o._currentValue),o._currentValue=h;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(en(bn,bn.current&1),t.flags|=128,null):i&t.child.childLanes?UC(e,t,i):(en(bn,bn.current&1),e=Ma(e,t,i),e!==null?e.sibling:null);en(bn,bn.current&1);break;case 19:if(o=(i&t.childLanes)!==0,e.flags&128){if(o)return VC(e,t,i);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),en(bn,bn.current),o)break;return null;case 22:case 23:return t.lanes=0,NC(e,t,i)}return Ma(e,t,i)}var HC,k1,WC,GC;HC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};k1=function(){};WC=function(e,t,i,o){var h=e.memoizedProps;if(h!==o){e=t.stateNode,Pu(Go.current);var f=null;switch(i){case"input":h=Gv(e,h),o=Gv(e,o),f=[];break;case"select":h=kn({},h,{value:void 0}),o=kn({},o,{value:void 0}),f=[];break;case"textarea":h=Yv(e,h),o=Yv(e,o),f=[];break;default:typeof h.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Zg)}Kv(i,o);var g;i=null;for(P in h)if(!o.hasOwnProperty(P)&&h.hasOwnProperty(P)&&h[P]!=null)if(P==="style"){var c=h[P];for(g in c)c.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(Bf.hasOwnProperty(P)?f||(f=[]):(f=f||[]).push(P,null));for(P in o){var T=o[P];if(c=h!=null?h[P]:void 0,o.hasOwnProperty(P)&&T!==c&&(T!=null||c!=null))if(P==="style")if(c){for(g in c)!c.hasOwnProperty(g)||T&&T.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in T)T.hasOwnProperty(g)&&c[g]!==T[g]&&(i||(i={}),i[g]=T[g])}else i||(f||(f=[]),f.push(P,i)),i=T;else P==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,c=c?c.__html:void 0,T!=null&&c!==T&&(f=f||[]).push(P,T)):P==="children"?typeof T!="string"&&typeof T!="number"||(f=f||[]).push(P,""+T):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(Bf.hasOwnProperty(P)?(T!=null&&P==="onScroll"&&sn("scroll",e),f||c===T||(f=[])):(f=f||[]).push(P,T))}i&&(f=f||[]).push("style",i);var P=f;(t.updateQueue=P)&&(t.flags|=4)}};GC=function(e,t,i,o){i!==o&&(t.flags|=4)};function uf(e,t){if(!yn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ti(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags&14680064,o|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function wR(e,t,i){var o=t.pendingProps;switch(jx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(t),null;case 1:return hs(t.type)&&qg(),Ti(t),null;case 3:return o=t.stateNode,Eh(),cn(cs),cn(Pi),Xx(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Vm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yo!==null&&(D1(yo),yo=null))),k1(e,t),Ti(t),null;case 5:Yx(t);var h=Pu(Xf.current);if(i=t.type,e!==null&&t.stateNode!=null)WC(e,t,i,o,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(lt(166));return Ti(t),null}if(e=Pu(Go.current),Vm(t)){o=t.stateNode,i=t.type;var f=t.memoizedProps;switch(o[Vo]=t,o[qf]=f,e=(t.mode&1)!==0,i){case"dialog":sn("cancel",o),sn("close",o);break;case"iframe":case"object":case"embed":sn("load",o);break;case"video":case"audio":for(h=0;h<yf.length;h++)sn(yf[h],o);break;case"source":sn("error",o);break;case"img":case"image":case"link":sn("error",o),sn("load",o);break;case"details":sn("toggle",o);break;case"input":oS(o,f),sn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!f.multiple},sn("invalid",o);break;case"textarea":lS(o,f),sn("invalid",o)}Kv(i,f),h=null;for(var g in f)if(f.hasOwnProperty(g)){var c=f[g];g==="children"?typeof c=="string"?o.textContent!==c&&(f.suppressHydrationWarning!==!0&&Um(o.textContent,c,e),h=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(f.suppressHydrationWarning!==!0&&Um(o.textContent,c,e),h=["children",""+c]):Bf.hasOwnProperty(g)&&c!=null&&g==="onScroll"&&sn("scroll",o)}switch(i){case"input":Rm(o),aS(o,f,!0);break;case"textarea":Rm(o),uS(o);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(o.onclick=Zg)}o=h,t.updateQueue=o,o!==null&&(t.flags|=4)}else{g=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(i,{is:o.is}):(e=g.createElement(i),i==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,i),e[Vo]=t,e[qf]=o,HC(e,t,!1,!1),t.stateNode=e;e:{switch(g=Jv(i,o),i){case"dialog":sn("cancel",e),sn("close",e),h=o;break;case"iframe":case"object":case"embed":sn("load",e),h=o;break;case"video":case"audio":for(h=0;h<yf.length;h++)sn(yf[h],e);h=o;break;case"source":sn("error",e),h=o;break;case"img":case"image":case"link":sn("error",e),sn("load",e),h=o;break;case"details":sn("toggle",e),h=o;break;case"input":oS(e,o),h=Gv(e,o),sn("invalid",e);break;case"option":h=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},h=kn({},o,{value:void 0}),sn("invalid",e);break;case"textarea":lS(e,o),h=Yv(e,o),sn("invalid",e);break;default:h=o}Kv(i,h),c=h;for(f in c)if(c.hasOwnProperty(f)){var T=c[f];f==="style"?SE(e,T):f==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&wE(e,T)):f==="children"?typeof T=="string"?(i!=="textarea"||T!=="")&&Nf(e,T):typeof T=="number"&&Nf(e,""+T):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Bf.hasOwnProperty(f)?T!=null&&f==="onScroll"&&sn("scroll",e):T!=null&&Ex(e,f,T,g))}switch(i){case"input":Rm(e),aS(e,o,!1);break;case"textarea":Rm(e),uS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+jl(o.value));break;case"select":e.multiple=!!o.multiple,f=o.value,f!=null?fh(e,!!o.multiple,f,!1):o.defaultValue!=null&&fh(e,!!o.multiple,o.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Zg)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ti(t),null;case 6:if(e&&t.stateNode!=null)GC(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(lt(166));if(i=Pu(Xf.current),Pu(Go.current),Vm(t)){if(o=t.stateNode,i=t.memoizedProps,o[Vo]=t,(f=o.nodeValue!==i)&&(e=Os,e!==null))switch(e.tag){case 3:Um(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Um(o.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Vo]=t,t.stateNode=o}return Ti(t),null;case 13:if(cn(bn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yn&&Ls!==null&&t.mode&1&&!(t.flags&128))cC(),kh(),t.flags|=98560,f=!1;else if(f=Vm(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(lt(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(lt(317));f[Vo]=t}else kh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ti(t),f=!1}else yo!==null&&(D1(yo),yo=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||bn.current&1?Un===0&&(Un=3):lw())),t.updateQueue!==null&&(t.flags|=4),Ti(t),null);case 4:return Eh(),k1(e,t),e===null&&Gf(t.stateNode.containerInfo),Ti(t),null;case 10:return Wx(t.type._context),Ti(t),null;case 17:return hs(t.type)&&qg(),Ti(t),null;case 19:if(cn(bn),f=t.memoizedState,f===null)return Ti(t),null;if(o=(t.flags&128)!==0,g=f.rendering,g===null)if(o)uf(f,!1);else{if(Un!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=ty(e),g!==null){for(t.flags|=128,uf(f,!1),o=g.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=i,i=t.child;i!==null;)f=i,e=o,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return en(bn,bn.current&1|2),t.child}e=e.sibling}f.tail!==null&&An()>Ih&&(t.flags|=128,o=!0,uf(f,!1),t.lanes=4194304)}else{if(!o)if(e=ty(g),e!==null){if(t.flags|=128,o=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),uf(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!yn)return Ti(t),null}else 2*An()-f.renderingStartTime>Ih&&i!==1073741824&&(t.flags|=128,o=!0,uf(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(i=f.last,i!==null?i.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=An(),t.sibling=null,i=bn.current,en(bn,o?i&1|2:i&1),t):(Ti(t),null);case 22:case 23:return aw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Ms&1073741824&&(Ti(t),t.subtreeFlags&6&&(t.flags|=8192)):Ti(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function bR(e,t){switch(jx(t),t.tag){case 1:return hs(t.type)&&qg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eh(),cn(cs),cn(Pi),Xx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yx(t),null;case 13:if(cn(bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));kh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(bn),null;case 4:return Eh(),null;case 10:return Wx(t.type._context),null;case 22:case 23:return aw(),null;case 24:return null;default:return null}}var Gm=!1,Ci=!1,SR=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function lh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){In(e,t,o)}else i.current=null}function T1(e,t,i){try{i()}catch(o){In(e,t,o)}}var JS=!1;function kR(e,t){if(l1=Hg,e=KE(),Nx(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,c=-1,T=-1,P=0,R=0,A=e,M=null;t:for(;;){for(var N;A!==i||h!==0&&A.nodeType!==3||(c=g+h),A!==f||o!==0&&A.nodeType!==3||(T=g+o),A.nodeType===3&&(g+=A.nodeValue.length),(N=A.firstChild)!==null;)M=A,A=N;for(;;){if(A===e)break t;if(M===i&&++P===h&&(c=g),M===f&&++R===o&&(T=g),(N=A.nextSibling)!==null)break;A=M,M=A.parentNode}A=N}i=c===-1||T===-1?null:{start:c,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(u1={focusedElem:e,selectionRange:i},Hg=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){t=Lt;try{var Y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var U=Y.memoizedProps,te=Y.memoizedState,O=t.stateNode,$=O.getSnapshotBeforeUpdate(t.elementType===t.type?U:po(t.type,U),te);O.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var q=t.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(ne){In(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}return Y=JS,JS=!1,Y}function Pf(e,t,i){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&T1(t,i,f)}h=h.next}while(h!==o)}}function $y(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==t)}}function E1(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function ZC(e){var t=e.alternate;t!==null&&(e.alternate=null,ZC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vo],delete t[qf],delete t[d1],delete t[oR],delete t[aR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qC(e){return e.tag===5||e.tag===3||e.tag===4}function QS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C1(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Zg));else if(o!==4&&(e=e.child,e!==null))for(C1(e,t,i),e=e.sibling;e!==null;)C1(e,t,i),e=e.sibling}function I1(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(I1(e,t,i),e=e.sibling;e!==null;)I1(e,t,i),e=e.sibling}var li=null,go=!1;function yl(e,t,i){for(i=i.child;i!==null;)YC(e,t,i),i=i.sibling}function YC(e,t,i){if(Wo&&typeof Wo.onCommitFiberUnmount=="function")try{Wo.onCommitFiberUnmount(Dy,i)}catch{}switch(i.tag){case 5:Ci||lh(i,t);case 6:var o=li,h=go;li=null,yl(e,t,i),li=o,go=h,li!==null&&(go?(e=li,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):li.removeChild(i.stateNode));break;case 18:li!==null&&(go?(e=li,i=i.stateNode,e.nodeType===8?ov(e.parentNode,i):e.nodeType===1&&ov(e,i),Vf(e)):ov(li,i.stateNode));break;case 4:o=li,h=go,li=i.stateNode.containerInfo,go=!0,yl(e,t,i),li=o,go=h;break;case 0:case 11:case 14:case 15:if(!Ci&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){h=o=o.next;do{var f=h,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&T1(i,t,g),h=h.next}while(h!==o)}yl(e,t,i);break;case 1:if(!Ci&&(lh(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(c){In(i,t,c)}yl(e,t,i);break;case 21:yl(e,t,i);break;case 22:i.mode&1?(Ci=(o=Ci)||i.memoizedState!==null,yl(e,t,i),Ci=o):yl(e,t,i);break;default:yl(e,t,i)}}function ek(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new SR),t.forEach(function(o){var h=zR.bind(null,e,o);i.has(o)||(i.add(o),o.then(h,h))})}}function fo(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];try{var f=e,g=t,c=g;e:for(;c!==null;){switch(c.tag){case 5:li=c.stateNode,go=!1;break e;case 3:li=c.stateNode.containerInfo,go=!0;break e;case 4:li=c.stateNode.containerInfo,go=!0;break e}c=c.return}if(li===null)throw Error(lt(160));YC(f,g,h),li=null,go=!1;var T=h.alternate;T!==null&&(T.return=null),h.return=null}catch(P){In(h,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)XC(t,e),t=t.sibling}function XC(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fo(t,e),Fo(e),o&4){try{Pf(3,e,e.return),$y(3,e)}catch(U){In(e,e.return,U)}try{Pf(5,e,e.return)}catch(U){In(e,e.return,U)}}break;case 1:fo(t,e),Fo(e),o&512&&i!==null&&lh(i,i.return);break;case 5:if(fo(t,e),Fo(e),o&512&&i!==null&&lh(i,i.return),e.flags&32){var h=e.stateNode;try{Nf(h,"")}catch(U){In(e,e.return,U)}}if(o&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,g=i!==null?i.memoizedProps:f,c=e.type,T=e.updateQueue;if(e.updateQueue=null,T!==null)try{c==="input"&&f.type==="radio"&&f.name!=null&&_E(h,f),Jv(c,g);var P=Jv(c,f);for(g=0;g<T.length;g+=2){var R=T[g],A=T[g+1];R==="style"?SE(h,A):R==="dangerouslySetInnerHTML"?wE(h,A):R==="children"?Nf(h,A):Ex(h,R,A,P)}switch(c){case"input":Zv(h,f);break;case"textarea":vE(h,f);break;case"select":var M=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var N=f.value;N!=null?fh(h,!!f.multiple,N,!1):M!==!!f.multiple&&(f.defaultValue!=null?fh(h,!!f.multiple,f.defaultValue,!0):fh(h,!!f.multiple,f.multiple?[]:"",!1))}h[qf]=f}catch(U){In(e,e.return,U)}}break;case 6:if(fo(t,e),Fo(e),o&4){if(e.stateNode===null)throw Error(lt(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(U){In(e,e.return,U)}}break;case 3:if(fo(t,e),Fo(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Vf(t.containerInfo)}catch(U){In(e,e.return,U)}break;case 4:fo(t,e),Fo(e);break;case 13:fo(t,e),Fo(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(sw=An())),o&4&&ek(e);break;case 22:if(R=i!==null&&i.memoizedState!==null,e.mode&1?(Ci=(P=Ci)||R,fo(t,e),Ci=P):fo(t,e),Fo(e),o&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!R&&e.mode&1)for(Lt=e,R=e.child;R!==null;){for(A=Lt=R;Lt!==null;){switch(M=Lt,N=M.child,M.tag){case 0:case 11:case 14:case 15:Pf(4,M,M.return);break;case 1:lh(M,M.return);var Y=M.stateNode;if(typeof Y.componentWillUnmount=="function"){o=M,i=M.return;try{t=o,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(U){In(o,i,U)}}break;case 5:lh(M,M.return);break;case 22:if(M.memoizedState!==null){rk(A);continue}}N!==null?(N.return=M,Lt=N):rk(A)}R=R.sibling}e:for(R=null,A=e;;){if(A.tag===5){if(R===null){R=A;try{h=A.stateNode,P?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(c=A.stateNode,T=A.memoizedProps.style,g=T!=null&&T.hasOwnProperty("display")?T.display:null,c.style.display=bE("display",g))}catch(U){In(e,e.return,U)}}}else if(A.tag===6){if(R===null)try{A.stateNode.nodeValue=P?"":A.memoizedProps}catch(U){In(e,e.return,U)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;R===A&&(R=null),A=A.return}R===A&&(R=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:fo(t,e),Fo(e),o&4&&ek(e);break;case 21:break;default:fo(t,e),Fo(e)}}function Fo(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(qC(i)){var o=i;break e}i=i.return}throw Error(lt(160))}switch(o.tag){case 5:var h=o.stateNode;o.flags&32&&(Nf(h,""),o.flags&=-33);var f=QS(e);I1(e,f,h);break;case 3:case 4:var g=o.stateNode.containerInfo,c=QS(e);C1(e,c,g);break;default:throw Error(lt(161))}}catch(T){In(e,e.return,T)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TR(e,t,i){Lt=e,KC(e)}function KC(e,t,i){for(var o=(e.mode&1)!==0;Lt!==null;){var h=Lt,f=h.child;if(h.tag===22&&o){var g=h.memoizedState!==null||Gm;if(!g){var c=h.alternate,T=c!==null&&c.memoizedState!==null||Ci;c=Gm;var P=Ci;if(Gm=g,(Ci=T)&&!P)for(Lt=h;Lt!==null;)g=Lt,T=g.child,g.tag===22&&g.memoizedState!==null?nk(h):T!==null?(T.return=g,Lt=T):nk(h);for(;f!==null;)Lt=f,KC(f),f=f.sibling;Lt=h,Gm=c,Ci=P}tk(e)}else h.subtreeFlags&8772&&f!==null?(f.return=h,Lt=f):tk(e)}}function tk(e){for(;Lt!==null;){var t=Lt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ci||$y(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Ci)if(i===null)o.componentDidMount();else{var h=t.elementType===t.type?i.memoizedProps:po(t.type,i.memoizedProps);o.componentDidUpdate(h,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&NS(t,f,o);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}NS(t,g,i)}break;case 5:var c=t.stateNode;if(i===null&&t.flags&4){i=c;var T=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&i.focus();break;case"img":T.src&&(i.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var R=P.memoizedState;if(R!==null){var A=R.dehydrated;A!==null&&Vf(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}Ci||t.flags&512&&E1(t)}catch(M){In(t,t.return,M)}}if(t===e){Lt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Lt=i;break}Lt=t.return}}function rk(e){for(;Lt!==null;){var t=Lt;if(t===e){Lt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Lt=i;break}Lt=t.return}}function nk(e){for(;Lt!==null;){var t=Lt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{$y(4,t)}catch(T){In(t,i,T)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var h=t.return;try{o.componentDidMount()}catch(T){In(t,h,T)}}var f=t.return;try{E1(t)}catch(T){In(t,f,T)}break;case 5:var g=t.return;try{E1(t)}catch(T){In(t,g,T)}}}catch(T){In(t,t.return,T)}if(t===e){Lt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Lt=c;break}Lt=t.return}}var ER=Math.ceil,iy=Ra.ReactCurrentDispatcher,nw=Ra.ReactCurrentOwner,Qs=Ra.ReactCurrentBatchConfig,Pr=0,ti=null,Fn=null,ci=0,Ms=0,uh=Hl(0),Un=0,ep=null,Wu=0,jy=0,iw=0,Mf=null,as=null,sw=0,Ih=1/0,ga=null,sy=!1,P1=null,Fl=null,Zm=!1,El=null,oy=0,Af=0,M1=null,gg=-1,yg=0;function Hi(){return Pr&6?An():gg!==-1?gg:gg=An()}function Bl(e){return e.mode&1?Pr&2&&ci!==0?ci&-ci:uR.transition!==null?(yg===0&&(yg=LE()),yg):(e=jr,e!==0||(e=window.event,e=e===void 0?16:UE(e.type)),e):1}function xo(e,t,i,o){if(50<Af)throw Af=0,M1=null,Error(lt(185));pp(e,i,o),(!(Pr&2)||e!==ti)&&(e===ti&&(!(Pr&2)&&(jy|=i),Un===4&&kl(e,ci)),ds(e,o),i===1&&Pr===0&&!(t.mode&1)&&(Ih=An()+500,Fy&&Wl()))}function ds(e,t){var i=e.callbackNode;uz(e,t);var o=Vg(e,e===ti?ci:0);if(o===0)i!==null&&dS(i),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(i!=null&&dS(i),t===1)e.tag===0?lR(ik.bind(null,e)):aC(ik.bind(null,e)),iR(function(){!(Pr&6)&&Wl()}),i=null;else{switch(OE(o)){case 1:i=Ax;break;case 4:i=zE;break;case 16:i=Ug;break;case 536870912:i=RE;break;default:i=Ug}i=sI(i,JC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function JC(e,t){if(gg=-1,yg=0,Pr&6)throw Error(lt(327));var i=e.callbackNode;if(_h()&&e.callbackNode!==i)return null;var o=Vg(e,e===ti?ci:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=ay(e,o);else{t=o;var h=Pr;Pr|=2;var f=eI();(ti!==e||ci!==t)&&(ga=null,Ih=An()+500,Ru(e,t));do try{PR();break}catch(c){QC(e,c)}while(!0);Hx(),iy.current=f,Pr=h,Fn!==null?t=0:(ti=null,ci=0,t=Un)}if(t!==0){if(t===2&&(h=n1(e),h!==0&&(o=h,t=A1(e,h))),t===1)throw i=ep,Ru(e,0),kl(e,o),ds(e,An()),i;if(t===6)kl(e,o);else{if(h=e.current.alternate,!(o&30)&&!CR(h)&&(t=ay(e,o),t===2&&(f=n1(e),f!==0&&(o=f,t=A1(e,f))),t===1))throw i=ep,Ru(e,0),kl(e,o),ds(e,An()),i;switch(e.finishedWork=h,e.finishedLanes=o,t){case 0:case 1:throw Error(lt(345));case 2:bu(e,as,ga);break;case 3:if(kl(e,o),(o&130023424)===o&&(t=sw+500-An(),10<t)){if(Vg(e,0)!==0)break;if(h=e.suspendedLanes,(h&o)!==o){Hi(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=h1(bu.bind(null,e,as,ga),t);break}bu(e,as,ga);break;case 4:if(kl(e,o),(o&4194240)===o)break;for(t=e.eventTimes,h=-1;0<o;){var g=31-vo(o);f=1<<g,g=t[g],g>h&&(h=g),o&=~f}if(o=h,o=An()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*ER(o/1960))-o,10<o){e.timeoutHandle=h1(bu.bind(null,e,as,ga),o);break}bu(e,as,ga);break;case 5:bu(e,as,ga);break;default:throw Error(lt(329))}}}return ds(e,An()),e.callbackNode===i?JC.bind(null,e):null}function A1(e,t){var i=Mf;return e.current.memoizedState.isDehydrated&&(Ru(e,t).flags|=256),e=ay(e,t),e!==2&&(t=as,as=i,t!==null&&D1(t)),e}function D1(e){as===null?as=e:as.push.apply(as,e)}function CR(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var h=i[o],f=h.getSnapshot;h=h.value;try{if(!So(f(),h))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kl(e,t){for(t&=~iw,t&=~jy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-vo(t),o=1<<i;e[i]=-1,t&=~o}}function ik(e){if(Pr&6)throw Error(lt(327));_h();var t=Vg(e,0);if(!(t&1))return ds(e,An()),null;var i=ay(e,t);if(e.tag!==0&&i===2){var o=n1(e);o!==0&&(t=o,i=A1(e,o))}if(i===1)throw i=ep,Ru(e,0),kl(e,t),ds(e,An()),i;if(i===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,as,ga),ds(e,An()),null}function ow(e,t){var i=Pr;Pr|=1;try{return e(t)}finally{Pr=i,Pr===0&&(Ih=An()+500,Fy&&Wl())}}function Gu(e){El!==null&&El.tag===0&&!(Pr&6)&&_h();var t=Pr;Pr|=1;var i=Qs.transition,o=jr;try{if(Qs.transition=null,jr=1,e)return e()}finally{jr=o,Qs.transition=i,Pr=t,!(Pr&6)&&Wl()}}function aw(){Ms=uh.current,cn(uh)}function Ru(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,nR(i)),Fn!==null)for(i=Fn.return;i!==null;){var o=i;switch(jx(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&qg();break;case 3:Eh(),cn(cs),cn(Pi),Xx();break;case 5:Yx(o);break;case 4:Eh();break;case 13:cn(bn);break;case 19:cn(bn);break;case 10:Wx(o.type._context);break;case 22:case 23:aw()}i=i.return}if(ti=e,Fn=e=Nl(e.current,null),ci=Ms=t,Un=0,ep=null,iw=jy=Wu=0,as=Mf=null,Iu!==null){for(t=0;t<Iu.length;t++)if(i=Iu[t],o=i.interleaved,o!==null){i.interleaved=null;var h=o.next,f=i.pending;if(f!==null){var g=f.next;f.next=h,o.next=g}i.pending=o}Iu=null}return e}function QC(e,t){do{var i=Fn;try{if(Hx(),fg.current=ny,ry){for(var o=Sn.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}ry=!1}if(Hu=0,Qn=jn=Sn=null,If=!1,Kf=0,nw.current=null,i===null||i.return===null){Un=1,ep=t,Fn=null;break}e:{var f=e,g=i.return,c=i,T=t;if(t=ci,c.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var P=T,R=c,A=R.tag;if(!(R.mode&1)&&(A===0||A===11||A===15)){var M=R.alternate;M?(R.updateQueue=M.updateQueue,R.memoizedState=M.memoizedState,R.lanes=M.lanes):(R.updateQueue=null,R.memoizedState=null)}var N=WS(g);if(N!==null){N.flags&=-257,GS(N,g,c,f,t),N.mode&1&&HS(f,P,t),t=N,T=P;var Y=t.updateQueue;if(Y===null){var U=new Set;U.add(T),t.updateQueue=U}else Y.add(T);break e}else{if(!(t&1)){HS(f,P,t),lw();break e}T=Error(lt(426))}}else if(yn&&c.mode&1){var te=WS(g);if(te!==null){!(te.flags&65536)&&(te.flags|=256),GS(te,g,c,f,t),Ux(Ch(T,c));break e}}f=T=Ch(T,c),Un!==4&&(Un=2),Mf===null?Mf=[f]:Mf.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var O=OC(f,T,t);BS(f,O);break e;case 1:c=T;var $=f.type,q=f.stateNode;if(!(f.flags&128)&&(typeof $.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Fl===null||!Fl.has(q)))){f.flags|=65536,t&=-t,f.lanes|=t;var ne=FC(f,c,t);BS(f,ne);break e}}f=f.return}while(f!==null)}rI(i)}catch(oe){t=oe,Fn===i&&i!==null&&(Fn=i=i.return);continue}break}while(!0)}function eI(){var e=iy.current;return iy.current=ny,e===null?ny:e}function lw(){(Un===0||Un===3||Un===2)&&(Un=4),ti===null||!(Wu&268435455)&&!(jy&268435455)||kl(ti,ci)}function ay(e,t){var i=Pr;Pr|=2;var o=eI();(ti!==e||ci!==t)&&(ga=null,Ru(e,t));do try{IR();break}catch(h){QC(e,h)}while(!0);if(Hx(),Pr=i,iy.current=o,Fn!==null)throw Error(lt(261));return ti=null,ci=0,Un}function IR(){for(;Fn!==null;)tI(Fn)}function PR(){for(;Fn!==null&&!ez();)tI(Fn)}function tI(e){var t=iI(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,t===null?rI(e):Fn=t,nw.current=null}function rI(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=bR(i,t),i!==null){i.flags&=32767,Fn=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Un=6,Fn=null;return}}else if(i=wR(i,t,Ms),i!==null){Fn=i;return}if(t=t.sibling,t!==null){Fn=t;return}Fn=t=e}while(t!==null);Un===0&&(Un=5)}function bu(e,t,i){var o=jr,h=Qs.transition;try{Qs.transition=null,jr=1,MR(e,t,i,o)}finally{Qs.transition=h,jr=o}return null}function MR(e,t,i,o){do _h();while(El!==null);if(Pr&6)throw Error(lt(327));i=e.finishedWork;var h=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(cz(e,f),e===ti&&(Fn=ti=null,ci=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Zm||(Zm=!0,sI(Ug,function(){return _h(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=Qs.transition,Qs.transition=null;var g=jr;jr=1;var c=Pr;Pr|=4,nw.current=null,kR(e,i),XC(i,e),Xz(u1),Hg=!!l1,u1=l1=null,e.current=i,TR(i),tz(),Pr=c,jr=g,Qs.transition=f}else e.current=i;if(Zm&&(Zm=!1,El=e,oy=h),f=e.pendingLanes,f===0&&(Fl=null),iz(i.stateNode),ds(e,An()),t!==null)for(o=e.onRecoverableError,i=0;i<t.length;i++)h=t[i],o(h.value,{componentStack:h.stack,digest:h.digest});if(sy)throw sy=!1,e=P1,P1=null,e;return oy&1&&e.tag!==0&&_h(),f=e.pendingLanes,f&1?e===M1?Af++:(Af=0,M1=e):Af=0,Wl(),null}function _h(){if(El!==null){var e=OE(oy),t=Qs.transition,i=jr;try{if(Qs.transition=null,jr=16>e?16:e,El===null)var o=!1;else{if(e=El,El=null,oy=0,Pr&6)throw Error(lt(331));var h=Pr;for(Pr|=4,Lt=e.current;Lt!==null;){var f=Lt,g=f.child;if(Lt.flags&16){var c=f.deletions;if(c!==null){for(var T=0;T<c.length;T++){var P=c[T];for(Lt=P;Lt!==null;){var R=Lt;switch(R.tag){case 0:case 11:case 15:Pf(8,R,f)}var A=R.child;if(A!==null)A.return=R,Lt=A;else for(;Lt!==null;){R=Lt;var M=R.sibling,N=R.return;if(ZC(R),R===P){Lt=null;break}if(M!==null){M.return=N,Lt=M;break}Lt=N}}}var Y=f.alternate;if(Y!==null){var U=Y.child;if(U!==null){Y.child=null;do{var te=U.sibling;U.sibling=null,U=te}while(U!==null)}}Lt=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,Lt=g;else e:for(;Lt!==null;){if(f=Lt,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Pf(9,f,f.return)}var O=f.sibling;if(O!==null){O.return=f.return,Lt=O;break e}Lt=f.return}}var $=e.current;for(Lt=$;Lt!==null;){g=Lt;var q=g.child;if(g.subtreeFlags&2064&&q!==null)q.return=g,Lt=q;else e:for(g=$;Lt!==null;){if(c=Lt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:$y(9,c)}}catch(oe){In(c,c.return,oe)}if(c===g){Lt=null;break e}var ne=c.sibling;if(ne!==null){ne.return=c.return,Lt=ne;break e}Lt=c.return}}if(Pr=h,Wl(),Wo&&typeof Wo.onPostCommitFiberRoot=="function")try{Wo.onPostCommitFiberRoot(Dy,e)}catch{}o=!0}return o}finally{jr=i,Qs.transition=t}}return!1}function sk(e,t,i){t=Ch(i,t),t=OC(e,t,1),e=Ol(e,t,1),t=Hi(),e!==null&&(pp(e,1,t),ds(e,t))}function In(e,t,i){if(e.tag===3)sk(e,e,i);else for(;t!==null;){if(t.tag===3){sk(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Fl===null||!Fl.has(o))){e=Ch(i,e),e=FC(t,e,1),t=Ol(t,e,1),e=Hi(),t!==null&&(pp(t,1,e),ds(t,e));break}}t=t.return}}function AR(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=Hi(),e.pingedLanes|=e.suspendedLanes&i,ti===e&&(ci&i)===i&&(Un===4||Un===3&&(ci&130023424)===ci&&500>An()-sw?Ru(e,0):iw|=i),ds(e,t)}function nI(e,t){t===0&&(e.mode&1?(t=Fm,Fm<<=1,!(Fm&130023424)&&(Fm=4194304)):t=1);var i=Hi();e=Pa(e,t),e!==null&&(pp(e,t,i),ds(e,i))}function DR(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),nI(e,i)}function zR(e,t){var i=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(lt(314))}o!==null&&o.delete(t),nI(e,i)}var iI;iI=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||cs.current)ls=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return ls=!1,xR(e,t,i);ls=!!(e.flags&131072)}else ls=!1,yn&&t.flags&1048576&&lC(t,Kg,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;mg(e,t),e=t.pendingProps;var h=Sh(t,Pi.current);yh(t,i),h=Jx(null,t,o,e,h,i);var f=Qx();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hs(o)?(f=!0,Yg(t)):f=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Zx(t),h.updater=Ny,t.stateNode=h,h._reactInternals=t,_1(t,o,e,i),t=w1(null,t,o,!0,f,i)):(t.tag=0,yn&&f&&$x(t),Ni(null,t,h,i),t=t.child),t;case 16:o=t.elementType;e:{switch(mg(e,t),e=t.pendingProps,h=o._init,o=h(o._payload),t.type=o,h=t.tag=LR(o),e=po(o,e),h){case 0:t=x1(null,t,o,e,i);break e;case 1:t=YS(null,t,o,e,i);break e;case 11:t=ZS(null,t,o,e,i);break e;case 14:t=qS(null,t,o,po(o.type,e),i);break e}throw Error(lt(306,o,""))}return t;case 0:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:po(o,h),x1(e,t,o,h,i);case 1:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:po(o,h),YS(e,t,o,h,i);case 3:e:{if(jC(t),e===null)throw Error(lt(387));o=t.pendingProps,f=t.memoizedState,h=f.element,pC(e,t),ey(t,o,null,i);var g=t.memoizedState;if(o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){h=Ch(Error(lt(423)),t),t=XS(e,t,o,i,h);break e}else if(o!==h){h=Ch(Error(lt(424)),t),t=XS(e,t,o,i,h);break e}else for(Ls=Ll(t.stateNode.containerInfo.firstChild),Os=t,yn=!0,yo=null,i=dC(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(kh(),o===h){t=Ma(e,t,i);break e}Ni(e,t,o,i)}t=t.child}return t;case 5:return mC(t),e===null&&m1(t),o=t.type,h=t.pendingProps,f=e!==null?e.memoizedProps:null,g=h.children,c1(o,h)?g=null:f!==null&&c1(o,f)&&(t.flags|=32),$C(e,t),Ni(e,t,g,i),t.child;case 6:return e===null&&m1(t),null;case 13:return UC(e,t,i);case 4:return qx(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Th(t,null,o,i):Ni(e,t,o,i),t.child;case 11:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:po(o,h),ZS(e,t,o,h,i);case 7:return Ni(e,t,t.pendingProps,i),t.child;case 8:return Ni(e,t,t.pendingProps.children,i),t.child;case 12:return Ni(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(o=t.type._context,h=t.pendingProps,f=t.memoizedProps,g=h.value,en(Jg,o._currentValue),o._currentValue=g,f!==null)if(So(f.value,g)){if(f.children===h.children&&!cs.current){t=Ma(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var c=f.dependencies;if(c!==null){g=f.child;for(var T=c.firstContext;T!==null;){if(T.context===o){if(f.tag===1){T=ka(-1,i&-i),T.tag=2;var P=f.updateQueue;if(P!==null){P=P.shared;var R=P.pending;R===null?T.next=T:(T.next=R.next,R.next=T),P.pending=T}}f.lanes|=i,T=f.alternate,T!==null&&(T.lanes|=i),g1(f.return,i,t),c.lanes|=i;break}T=T.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(lt(341));g.lanes|=i,c=g.alternate,c!==null&&(c.lanes|=i),g1(g,i,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Ni(e,t,h.children,i),t=t.child}return t;case 9:return h=t.type,o=t.pendingProps.children,yh(t,i),h=eo(h),o=o(h),t.flags|=1,Ni(e,t,o,i),t.child;case 14:return o=t.type,h=po(o,t.pendingProps),h=po(o.type,h),qS(e,t,o,h,i);case 15:return BC(e,t,t.type,t.pendingProps,i);case 17:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:po(o,h),mg(e,t),t.tag=1,hs(o)?(e=!0,Yg(t)):e=!1,yh(t,i),LC(t,o,h),_1(t,o,h,i),w1(null,t,o,!0,e,i);case 19:return VC(e,t,i);case 22:return NC(e,t,i)}throw Error(lt(156,t.tag))};function sI(e,t){return DE(e,t)}function RR(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(e,t,i,o){return new RR(e,t,i,o)}function uw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LR(e){if(typeof e=="function")return uw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ix)return 11;if(e===Px)return 14}return 2}function Nl(e,t){var i=e.alternate;return i===null?(i=Js(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function _g(e,t,i,o,h,f){var g=2;if(o=e,typeof e=="function")uw(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Qc:return Lu(i.children,h,f,t);case Cx:g=8,h|=8;break;case Uv:return e=Js(12,i,t,h|2),e.elementType=Uv,e.lanes=f,e;case Vv:return e=Js(13,i,t,h),e.elementType=Vv,e.lanes=f,e;case Hv:return e=Js(19,i,t,h),e.elementType=Hv,e.lanes=f,e;case mE:return Uy(i,h,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fE:g=10;break e;case pE:g=9;break e;case Ix:g=11;break e;case Px:g=14;break e;case wl:g=16,o=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=Js(g,i,t,h),t.elementType=e,t.type=o,t.lanes=f,t}function Lu(e,t,i,o){return e=Js(7,e,o,t),e.lanes=i,e}function Uy(e,t,i,o){return e=Js(22,e,o,t),e.elementType=mE,e.lanes=i,e.stateNode={isHidden:!1},e}function pv(e,t,i){return e=Js(6,e,null,t),e.lanes=i,e}function mv(e,t,i){return t=Js(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OR(e,t,i,o,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y0(0),this.expirationTimes=Y0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y0(0),this.identifierPrefix=o,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function cw(e,t,i,o,h,f,g,c,T){return e=new OR(e,t,i,c,T),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Js(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zx(f),e}function FR(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jc,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function oI(e){if(!e)return Ul;e=e._reactInternals;e:{if(Xu(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var i=e.type;if(hs(i))return oC(e,i,t)}return t}function aI(e,t,i,o,h,f,g,c,T){return e=cw(i,o,!0,e,h,f,g,c,T),e.context=oI(null),i=e.current,o=Hi(),h=Bl(i),f=ka(o,h),f.callback=t??null,Ol(i,f,h),e.current.lanes=h,pp(e,h,o),ds(e,o),e}function Vy(e,t,i,o){var h=t.current,f=Hi(),g=Bl(h);return i=oI(i),t.context===null?t.context=i:t.pendingContext=i,t=ka(f,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Ol(h,t,g),e!==null&&(xo(e,h,g,f),dg(e,h,g)),g}function ly(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ok(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function hw(e,t){ok(e,t),(e=e.alternate)&&ok(e,t)}function BR(){return null}var lI=typeof reportError=="function"?reportError:function(e){console.error(e)};function dw(e){this._internalRoot=e}Hy.prototype.render=dw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));Vy(e,t,null,null)};Hy.prototype.unmount=dw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gu(function(){Vy(null,e,null,null)}),t[Ia]=null}};function Hy(e){this._internalRoot=e}Hy.prototype.unstable_scheduleHydration=function(e){if(e){var t=NE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Sl.length&&t!==0&&t<Sl[i].priority;i++);Sl.splice(i,0,e),i===0&&jE(e)}};function fw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ak(){}function NR(e,t,i,o,h){if(h){if(typeof o=="function"){var f=o;o=function(){var P=ly(g);f.call(P)}}var g=aI(t,o,e,0,null,!1,!1,"",ak);return e._reactRootContainer=g,e[Ia]=g.current,Gf(e.nodeType===8?e.parentNode:e),Gu(),g}for(;h=e.lastChild;)e.removeChild(h);if(typeof o=="function"){var c=o;o=function(){var P=ly(T);c.call(P)}}var T=cw(e,0,!1,null,null,!1,!1,"",ak);return e._reactRootContainer=T,e[Ia]=T.current,Gf(e.nodeType===8?e.parentNode:e),Gu(function(){Vy(t,T,i,o)}),T}function Gy(e,t,i,o,h){var f=i._reactRootContainer;if(f){var g=f;if(typeof h=="function"){var c=h;h=function(){var T=ly(g);c.call(T)}}Vy(t,g,e,h)}else g=NR(i,t,e,h,o);return ly(g)}FE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=gf(t.pendingLanes);i!==0&&(Dx(t,i|1),ds(t,An()),!(Pr&6)&&(Ih=An()+500,Wl()))}break;case 13:Gu(function(){var o=Pa(e,1);if(o!==null){var h=Hi();xo(o,e,1,h)}}),hw(e,1)}};zx=function(e){if(e.tag===13){var t=Pa(e,134217728);if(t!==null){var i=Hi();xo(t,e,134217728,i)}hw(e,134217728)}};BE=function(e){if(e.tag===13){var t=Bl(e),i=Pa(e,t);if(i!==null){var o=Hi();xo(i,e,t,o)}hw(e,t)}};NE=function(){return jr};$E=function(e,t){var i=jr;try{return jr=e,t()}finally{jr=i}};e1=function(e,t,i){switch(t){case"input":if(Zv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var h=Oy(o);if(!h)throw Error(lt(90));yE(o),Zv(o,h)}}}break;case"textarea":vE(e,i);break;case"select":t=i.value,t!=null&&fh(e,!!i.multiple,t,!1)}};EE=ow;CE=Gu;var $R={usingClientEntryPoint:!1,Events:[gp,nh,Oy,kE,TE,ow]},cf={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jR={bundleType:cf.bundleType,version:cf.version,rendererPackageName:cf.rendererPackageName,rendererConfig:cf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ME(e),e===null?null:e.stateNode},findFiberByHostInstance:cf.findFiberByHostInstance||BR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qm.isDisabled&&qm.supportsFiber)try{Dy=qm.inject(jR),Wo=qm}catch{}}Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$R;Bs.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fw(t))throw Error(lt(200));return FR(e,t,null,i)};Bs.createRoot=function(e,t){if(!fw(e))throw Error(lt(299));var i=!1,o="",h=lI;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=cw(e,1,!1,null,null,i,!1,o,h),e[Ia]=t.current,Gf(e.nodeType===8?e.parentNode:e),new dw(t)};Bs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=ME(t),e=e===null?null:e.stateNode,e};Bs.flushSync=function(e){return Gu(e)};Bs.hydrate=function(e,t,i){if(!Wy(t))throw Error(lt(200));return Gy(null,e,t,!0,i)};Bs.hydrateRoot=function(e,t,i){if(!fw(e))throw Error(lt(405));var o=i!=null&&i.hydratedSources||null,h=!1,f="",g=lI;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=aI(t,null,e,1,i??null,h,!1,f,g),e[Ia]=t.current,Gf(e),o)for(e=0;e<o.length;e++)i=o[e],h=i._getVersion,h=h(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,h]:t.mutableSourceEagerHydrationData.push(i,h);return new Hy(t)};Bs.render=function(e,t,i){if(!Wy(t))throw Error(lt(200));return Gy(null,e,t,!1,i)};Bs.unmountComponentAtNode=function(e){if(!Wy(e))throw Error(lt(40));return e._reactRootContainer?(Gu(function(){Gy(null,null,e,!1,function(){e._reactRootContainer=null,e[Ia]=null})}),!0):!1};Bs.unstable_batchedUpdates=ow;Bs.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!Wy(i))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return Gy(e,t,i,!1,o)};Bs.version="18.3.1-next-f1338f8080-20240426";function uI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uI)}catch(e){console.error(e)}}uI(),uE.exports=Bs;var cI=uE.exports,lk=cI;$v.createRoot=lk.createRoot,$v.hydrateRoot=lk.hydrateRoot;const hI="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='80'%20height='48'%20viewBox='0%200%2080%2048'%3e%3cg%20fill='%23D73F3F'%20fill-rule='evenodd'%3e%3cpath%20d='M37.02656,20.77496%20C37.02656,20.29096%2037.12976,19.85896%2037.33616,19.48616%20C37.54096,19.11176%2037.81296,18.80696%2038.15056,18.56376%20C38.48656,18.32136%2038.86496,18.13736%2039.28576,18.01336%20C39.70496,17.89016%2040.12736,17.82776%2040.55376,17.82776%20C40.97856,17.82776%2041.40256,17.89016%2041.82336,18.01336%20C42.24176,18.13736%2042.62016,18.32136%2042.95616,18.56376%20C43.29456,18.80696%2043.56576,19.11176%2043.77216,19.48616%20C43.97856,19.85896%2044.08096,20.29096%2044.08096,20.77496%20L44.08096,27.14696%20C44.08096,27.64136%2043.97856,28.07496%2043.77216,28.44216%20C43.56576,28.81096%2043.29456,29.11416%2042.95616,29.35736%20C42.62016,29.60136%2042.24176,29.78616%2041.82336,29.90856%20C41.40256,30.03176%2040.97856,30.09336%2040.55376,30.09336%20C40.12736,30.09336%2039.70496,30.03176%2039.28576,29.90856%20C38.86496,29.78616%2038.48656,29.60136%2038.15056,29.35736%20C37.81296,29.11416%2037.54096,28.81096%2037.33616,28.44216%20C37.12976,28.07496%2037.02656,27.64136%2037.02656,27.14696%20L37.02656,20.77496%20Z%20M39.05136,27.15016%20C39.05136,27.56536%2039.28256,27.87496%2039.56576,28.07176%20C39.84736,28.27016%2040.18096,28.37496%2040.56576,28.37496%20C40.94896,28.37496%2041.28416,28.27016%2041.56656,28.07176%20C41.84736,27.87496%2042.00816,27.56536%2042.00816,27.15016%20L42.00816,20.77816%20C42.00816,20.36136%2041.84736,20.05256%2041.56656,19.85576%20C41.28416,19.65816%2040.94896,19.52536%2040.56576,19.52536%20C40.18096,19.52536%2039.84736,19.65816%2039.56576,19.85576%20C39.28256,20.05256%2039.05136,20.36136%2039.05136,20.77816%20L39.05136,27.15016%20Z'/%3e%3cpolygon%20points='33.379%2017.815%2033.379%2022.99%2030.152%2022.99%2030.152%2017.815%2028.387%2017.815%2028.387%2030.1%2030.152%2030.1%2030.152%2024.923%2033.379%2024.923%2033.379%2030.1%2035.278%2030.1%2035.278%2017.815'/%3e%3cpolygon%20points='52.431%2017.815%2045.426%2017.815%2045.426%2019.622%2048.015%2019.622%2047.985%2030.1%2049.847%2030.1%2049.847%2019.622%2052.431%2019.622'/%3e%3cpath%20d='M65.42344,28.7668%20L79.67944,28.7668%20L71.15544,19.1684%20L62.66904,9.57%20L54.18104,0.000400000001%20L11.53944,0.000400000001%20L20.02584,9.57%20L5.73784,9.57%20L14.22584,19.1684%20L14.29144,19.2332%20L0.000239999999,19.2332%20L8.52184,28.8316%20L17.01304,38.43%20L25.50024,48.0004%20L68.14184,48.0004%20L59.65064,38.43%20L59.58824,38.3364%20L73.87864,38.3364%20L65.42344,28.7668%20Z%20M39.83944,39.9492%20C30.31864,39.9492%2022.60104,32.8084%2022.60104,24.0012%20C22.60104,15.1908%2030.31864,8.05%2039.83944,8.05%20C49.36104,8.05%2057.07944,15.1908%2057.07944,24.0012%20C57.07944,32.8084%2049.36104,39.9492%2039.83944,39.9492%20Z'/%3e%3c/g%3e%3c/svg%3e";var us=function(){return us=Object.assign||function(t){for(var i,o=1,h=arguments.length;o<h;o++){i=arguments[o];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},us.apply(this,arguments)};function uy(e,t,i){if(i||arguments.length===2)for(var o=0,h=t.length,f;o<h;o++)(f||!(o in t))&&(f||(f=Array.prototype.slice.call(t,0,o)),f[o]=t[o]);return e.concat(f||Array.prototype.slice.call(t))}var on="-ms-",Df="-moz-",Br="-webkit-",dI="comm",Zy="rule",pw="decl",UR="@import",fI="@keyframes",VR="@layer",pI=Math.abs,mw=String.fromCharCode,z1=Object.assign;function HR(e,t){return ei(e,0)^45?(((t<<2^ei(e,0))<<2^ei(e,1))<<2^ei(e,2))<<2^ei(e,3):0}function mI(e){return e.trim()}function ya(e,t){return(e=t.exec(e))?e[0]:e}function hr(e,t,i){return e.replace(t,i)}function vg(e,t,i){return e.indexOf(t,i)}function ei(e,t){return e.charCodeAt(t)|0}function Ph(e,t,i){return e.slice(t,i)}function Uo(e){return e.length}function gI(e){return e.length}function _f(e,t){return t.push(e),e}function WR(e,t){return e.map(t).join("")}function uk(e,t){return e.filter(function(i){return!ya(i,t)})}var qy=1,Mh=1,yI=0,ro=0,On=0,$h="";function Yy(e,t,i,o,h,f,g,c){return{value:e,root:t,parent:i,type:o,props:h,children:f,line:qy,column:Mh,length:g,return:"",siblings:c}}function _l(e,t){return z1(Yy("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function qc(e){for(;e.root;)e=_l(e.root,{children:[e]});_f(e,e.siblings)}function GR(){return On}function ZR(){return On=ro>0?ei($h,--ro):0,Mh--,On===10&&(Mh=1,qy--),On}function wo(){return On=ro<yI?ei($h,ro++):0,Mh++,On===10&&(Mh=1,qy++),On}function Ou(){return ei($h,ro)}function xg(){return ro}function Xy(e,t){return Ph($h,e,t)}function R1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qR(e){return qy=Mh=1,yI=Uo($h=e),ro=0,[]}function YR(e){return $h="",e}function gv(e){return mI(Xy(ro-1,L1(e===91?e+2:e===40?e+1:e)))}function XR(e){for(;(On=Ou())&&On<33;)wo();return R1(e)>2||R1(On)>3?"":" "}function KR(e,t){for(;--t&&wo()&&!(On<48||On>102||On>57&&On<65||On>70&&On<97););return Xy(e,xg()+(t<6&&Ou()==32&&wo()==32))}function L1(e){for(;wo();)switch(On){case e:return ro;case 34:case 39:e!==34&&e!==39&&L1(On);break;case 40:e===41&&L1(e);break;case 92:wo();break}return ro}function JR(e,t){for(;wo()&&e+On!==57;)if(e+On===84&&Ou()===47)break;return"/*"+Xy(t,ro-1)+"*"+mw(e===47?e:wo())}function QR(e){for(;!R1(Ou());)wo();return Xy(e,ro)}function e5(e){return YR(wg("",null,null,null,[""],e=qR(e),0,[0],e))}function wg(e,t,i,o,h,f,g,c,T){for(var P=0,R=0,A=g,M=0,N=0,Y=0,U=1,te=1,O=1,$=0,q="",ne=h,oe=f,ke=o,ge=q;te;)switch(Y=$,$=wo()){case 40:if(Y!=108&&ei(ge,A-1)==58){vg(ge+=hr(gv($),"&","&\f"),"&\f",pI(P?c[P-1]:0))!=-1&&(O=-1);break}case 34:case 39:case 91:ge+=gv($);break;case 9:case 10:case 13:case 32:ge+=XR(Y);break;case 92:ge+=KR(xg()-1,7);continue;case 47:switch(Ou()){case 42:case 47:_f(t5(JR(wo(),xg()),t,i,T),T);break;default:ge+="/"}break;case 123*U:c[P++]=Uo(ge)*O;case 125*U:case 59:case 0:switch($){case 0:case 125:te=0;case 59+R:O==-1&&(ge=hr(ge,/\f/g,"")),N>0&&Uo(ge)-A&&_f(N>32?hk(ge+";",o,i,A-1,T):hk(hr(ge," ","")+";",o,i,A-2,T),T);break;case 59:ge+=";";default:if(_f(ke=ck(ge,t,i,P,R,h,c,q,ne=[],oe=[],A,f),f),$===123)if(R===0)wg(ge,t,ke,ke,ne,f,A,c,oe);else switch(M===99&&ei(ge,3)===110?100:M){case 100:case 108:case 109:case 115:wg(e,ke,ke,o&&_f(ck(e,ke,ke,0,0,h,c,q,h,ne=[],A,oe),oe),h,oe,A,c,o?ne:oe);break;default:wg(ge,ke,ke,ke,[""],oe,0,c,oe)}}P=R=N=0,U=O=1,q=ge="",A=g;break;case 58:A=1+Uo(ge),N=Y;default:if(U<1){if($==123)--U;else if($==125&&U++==0&&ZR()==125)continue}switch(ge+=mw($),$*U){case 38:O=R>0?1:(ge+="\f",-1);break;case 44:c[P++]=(Uo(ge)-1)*O,O=1;break;case 64:Ou()===45&&(ge+=gv(wo())),M=Ou(),R=A=Uo(q=ge+=QR(xg())),$++;break;case 45:Y===45&&Uo(ge)==2&&(U=0)}}return f}function ck(e,t,i,o,h,f,g,c,T,P,R,A){for(var M=h-1,N=h===0?f:[""],Y=gI(N),U=0,te=0,O=0;U<o;++U)for(var $=0,q=Ph(e,M+1,M=pI(te=g[U])),ne=e;$<Y;++$)(ne=mI(te>0?N[$]+" "+q:hr(q,/&\f/g,N[$])))&&(T[O++]=ne);return Yy(e,t,i,h===0?Zy:c,T,P,R,A)}function t5(e,t,i,o){return Yy(e,t,i,dI,mw(GR()),Ph(e,2,-2),0,o)}function hk(e,t,i,o,h){return Yy(e,t,i,pw,Ph(e,0,o),Ph(e,o+1,-1),o,h)}function _I(e,t,i){switch(HR(e,t)){case 5103:return Br+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Br+e+e;case 4789:return Df+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Br+e+Df+e+on+e+e;case 5936:switch(ei(e,t+11)){case 114:return Br+e+on+hr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Br+e+on+hr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Br+e+on+hr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Br+e+on+e+e;case 6165:return Br+e+on+"flex-"+e+e;case 5187:return Br+e+hr(e,/(\w+).+(:[^]+)/,Br+"box-$1$2"+on+"flex-$1$2")+e;case 5443:return Br+e+on+"flex-item-"+hr(e,/flex-|-self/g,"")+(ya(e,/flex-|baseline/)?"":on+"grid-row-"+hr(e,/flex-|-self/g,""))+e;case 4675:return Br+e+on+"flex-line-pack"+hr(e,/align-content|flex-|-self/g,"")+e;case 5548:return Br+e+on+hr(e,"shrink","negative")+e;case 5292:return Br+e+on+hr(e,"basis","preferred-size")+e;case 6060:return Br+"box-"+hr(e,"-grow","")+Br+e+on+hr(e,"grow","positive")+e;case 4554:return Br+hr(e,/([^-])(transform)/g,"$1"+Br+"$2")+e;case 6187:return hr(hr(hr(e,/(zoom-|grab)/,Br+"$1"),/(image-set)/,Br+"$1"),e,"")+e;case 5495:case 3959:return hr(e,/(image-set\([^]*)/,Br+"$1$`$1");case 4968:return hr(hr(e,/(.+:)(flex-)?(.*)/,Br+"box-pack:$3"+on+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Br+e+e;case 4200:if(!ya(e,/flex-|baseline/))return on+"grid-column-align"+Ph(e,t)+e;break;case 2592:case 3360:return on+hr(e,"template-","")+e;case 4384:case 3616:return i&&i.some(function(o,h){return t=h,ya(o.props,/grid-\w+-end/)})?~vg(e+(i=i[t].value),"span",0)?e:on+hr(e,"-start","")+e+on+"grid-row-span:"+(~vg(i,"span",0)?ya(i,/\d+/):+ya(i,/\d+/)-+ya(e,/\d+/))+";":on+hr(e,"-start","")+e;case 4896:case 4128:return i&&i.some(function(o){return ya(o.props,/grid-\w+-start/)})?e:on+hr(hr(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return hr(e,/(.+)-inline(.+)/,Br+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uo(e)-1-t>6)switch(ei(e,t+1)){case 109:if(ei(e,t+4)!==45)break;case 102:return hr(e,/(.+:)(.+)-([^]+)/,"$1"+Br+"$2-$3$1"+Df+(ei(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~vg(e,"stretch",0)?_I(hr(e,"stretch","fill-available"),t,i)+e:e}break;case 5152:case 5920:return hr(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,h,f,g,c,T,P){return on+h+":"+f+P+(g?on+h+"-span:"+(c?T:+T-+f)+P:"")+e});case 4949:if(ei(e,t+6)===121)return hr(e,":",":"+Br)+e;break;case 6444:switch(ei(e,ei(e,14)===45?18:11)){case 120:return hr(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Br+(ei(e,14)===45?"inline-":"")+"box$3$1"+Br+"$2$3$1"+on+"$2box$3")+e;case 100:return hr(e,":",":"+on)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return hr(e,"scroll-","scroll-snap-")+e}return e}function cy(e,t){for(var i="",o=0;o<e.length;o++)i+=t(e[o],o,e,t)||"";return i}function r5(e,t,i,o){switch(e.type){case VR:if(e.children.length)break;case UR:case pw:return e.return=e.return||e.value;case dI:return"";case fI:return e.return=e.value+"{"+cy(e.children,o)+"}";case Zy:if(!Uo(e.value=e.props.join(",")))return""}return Uo(i=cy(e.children,o))?e.return=e.value+"{"+i+"}":""}function n5(e){var t=gI(e);return function(i,o,h,f){for(var g="",c=0;c<t;c++)g+=e[c](i,o,h,f)||"";return g}}function i5(e){return function(t){t.root||(t=t.return)&&e(t)}}function s5(e,t,i,o){if(e.length>-1&&!e.return)switch(e.type){case pw:e.return=_I(e.value,e.length,i);return;case fI:return cy([_l(e,{value:hr(e.value,"@","@"+Br)})],o);case Zy:if(e.length)return WR(i=e.props,function(h){switch(ya(h,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":qc(_l(e,{props:[hr(h,/:(read-\w+)/,":"+Df+"$1")]})),qc(_l(e,{props:[h]})),z1(e,{props:uk(i,o)});break;case"::placeholder":qc(_l(e,{props:[hr(h,/:(plac\w+)/,":"+Br+"input-$1")]})),qc(_l(e,{props:[hr(h,/:(plac\w+)/,":"+Df+"$1")]})),qc(_l(e,{props:[hr(h,/:(plac\w+)/,on+"input-$1")]})),qc(_l(e,{props:[h]})),z1(e,{props:uk(i,o)});break}return""})}}var o5={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ps={},Ah=typeof process<"u"&&Ps!==void 0&&(Ps.REACT_APP_SC_ATTR||Ps.SC_ATTR)||"data-styled",vI="active",xI="data-styled-version",Ky="6.1.13",gw=`/*!sc*/
`,hy=typeof window<"u"&&"HTMLElement"in window,a5=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ps!==void 0&&Ps.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ps.REACT_APP_SC_DISABLE_SPEEDY!==""?Ps.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ps.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ps!==void 0&&Ps.SC_DISABLE_SPEEDY!==void 0&&Ps.SC_DISABLE_SPEEDY!==""&&Ps.SC_DISABLE_SPEEDY!=="false"&&Ps.SC_DISABLE_SPEEDY),Jy=Object.freeze([]),Dh=Object.freeze({});function l5(e,t,i){return i===void 0&&(i=Dh),e.theme!==i.theme&&e.theme||t||i.theme}var wI=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),u5=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,c5=/(^-|-$)/g;function dk(e){return e.replace(u5,"-").replace(c5,"")}var h5=/(a)(d)/gi,Ym=52,fk=function(e){return String.fromCharCode(e+(e>25?39:97))};function O1(e){var t,i="";for(t=Math.abs(e);t>Ym;t=t/Ym|0)i=fk(t%Ym)+i;return(fk(t%Ym)+i).replace(h5,"$1-$2")}var yv,bI=5381,ch=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},SI=function(e){return ch(bI,e)};function d5(e){return O1(SI(e)>>>0)}function f5(e){return e.displayName||e.name||"Component"}function _v(e){return typeof e=="string"&&!0}var kI=typeof Symbol=="function"&&Symbol.for,TI=kI?Symbol.for("react.memo"):60115,p5=kI?Symbol.for("react.forward_ref"):60112,m5={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},g5={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},EI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},y5=((yv={})[p5]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yv[TI]=EI,yv);function pk(e){return("type"in(t=e)&&t.type.$$typeof)===TI?EI:"$$typeof"in e?y5[e.$$typeof]:m5;var t}var _5=Object.defineProperty,v5=Object.getOwnPropertyNames,mk=Object.getOwnPropertySymbols,x5=Object.getOwnPropertyDescriptor,w5=Object.getPrototypeOf,gk=Object.prototype;function CI(e,t,i){if(typeof t!="string"){if(gk){var o=w5(t);o&&o!==gk&&CI(e,o,i)}var h=v5(t);mk&&(h=h.concat(mk(t)));for(var f=pk(e),g=pk(t),c=0;c<h.length;++c){var T=h[c];if(!(T in g5||i&&i[T]||g&&T in g||f&&T in f)){var P=x5(t,T);try{_5(e,T,P)}catch{}}}}return e}function zh(e){return typeof e=="function"}function yw(e){return typeof e=="object"&&"styledComponentId"in e}function Mu(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function yk(e,t){if(e.length===0)return"";for(var i=e[0],o=1;o<e.length;o++)i+=e[o];return i}function tp(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function F1(e,t,i){if(i===void 0&&(i=!1),!i&&!tp(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var o=0;o<t.length;o++)e[o]=F1(e[o],t[o]);else if(tp(t))for(var o in t)e[o]=F1(e[o],t[o]);return e}function _w(e,t){Object.defineProperty(e,"toString",{value:t})}function _p(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var b5=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var i=0,o=0;o<t;o++)i+=this.groupSizes[o];return i},e.prototype.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var o=this.groupSizes,h=o.length,f=h;t>=f;)if((f<<=1)<0)throw _p(16,"".concat(t));this.groupSizes=new Uint32Array(f),this.groupSizes.set(o),this.length=f;for(var g=h;g<f;g++)this.groupSizes[g]=0}for(var c=this.indexOfGroup(t+1),T=(g=0,i.length);g<T;g++)this.tag.insertRule(c,i[g])&&(this.groupSizes[t]++,c++)},e.prototype.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],o=this.indexOfGroup(t),h=o+i;this.groupSizes[t]=0;for(var f=o;f<h;f++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var o=this.groupSizes[t],h=this.indexOfGroup(t),f=h+o,g=h;g<f;g++)i+="".concat(this.tag.getRule(g)).concat(gw);return i},e}(),bg=new Map,dy=new Map,Sg=1,Xm=function(e){if(bg.has(e))return bg.get(e);for(;dy.has(Sg);)Sg++;var t=Sg++;return bg.set(e,t),dy.set(t,e),t},S5=function(e,t){Sg=t+1,bg.set(e,t),dy.set(t,e)},k5="style[".concat(Ah,"][").concat(xI,'="').concat(Ky,'"]'),T5=new RegExp("^".concat(Ah,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),E5=function(e,t,i){for(var o,h=i.split(","),f=0,g=h.length;f<g;f++)(o=h[f])&&e.registerName(t,o)},C5=function(e,t){for(var i,o=((i=t.textContent)!==null&&i!==void 0?i:"").split(gw),h=[],f=0,g=o.length;f<g;f++){var c=o[f].trim();if(c){var T=c.match(T5);if(T){var P=0|parseInt(T[1],10),R=T[2];P!==0&&(S5(R,P),E5(e,R,T[3]),e.getTag().insertRules(P,h)),h.length=0}else h.push(c)}}},_k=function(e){for(var t=document.querySelectorAll(k5),i=0,o=t.length;i<o;i++){var h=t[i];h&&h.getAttribute(Ah)!==vI&&(C5(e,h),h.parentNode&&h.parentNode.removeChild(h))}};function I5(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var II=function(e){var t=document.head,i=e||t,o=document.createElement("style"),h=function(c){var T=Array.from(c.querySelectorAll("style[".concat(Ah,"]")));return T[T.length-1]}(i),f=h!==void 0?h.nextSibling:null;o.setAttribute(Ah,vI),o.setAttribute(xI,Ky);var g=I5();return g&&o.setAttribute("nonce",g),i.insertBefore(o,f),o},P5=function(){function e(t){this.element=II(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var o=document.styleSheets,h=0,f=o.length;h<f;h++){var g=o[h];if(g.ownerNode===i)return g}throw _p(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var i=this.sheet.cssRules[t];return i&&i.cssText?i.cssText:""},e}(),M5=function(){function e(t){this.element=II(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,i){if(t<=this.length&&t>=0){var o=document.createTextNode(i);return this.element.insertBefore(o,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),A5=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),vk=hy,D5={isServer:!hy,useCSSOMInjection:!a5},PI=function(){function e(t,i,o){t===void 0&&(t=Dh),i===void 0&&(i={});var h=this;this.options=us(us({},D5),t),this.gs=i,this.names=new Map(o),this.server=!!t.isServer,!this.server&&hy&&vk&&(vk=!1,_k(this)),_w(this,function(){return function(f){for(var g=f.getTag(),c=g.length,T="",P=function(A){var M=function(O){return dy.get(O)}(A);if(M===void 0)return"continue";var N=f.names.get(M),Y=g.getGroup(A);if(N===void 0||!N.size||Y.length===0)return"continue";var U="".concat(Ah,".g").concat(A,'[id="').concat(M,'"]'),te="";N!==void 0&&N.forEach(function(O){O.length>0&&(te+="".concat(O,","))}),T+="".concat(Y).concat(U,'{content:"').concat(te,'"}').concat(gw)},R=0;R<c;R++)P(R);return T}(h)})}return e.registerId=function(t){return Xm(t)},e.prototype.rehydrate=function(){!this.server&&hy&&_k(this)},e.prototype.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new e(us(us({},this.options),t),this.gs,i&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(i){var o=i.useCSSOMInjection,h=i.target;return i.isServer?new A5(h):o?new P5(h):new M5(h)}(this.options),new b5(t)));var t},e.prototype.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},e.prototype.registerName=function(t,i){if(Xm(t),this.names.has(t))this.names.get(t).add(i);else{var o=new Set;o.add(i),this.names.set(t,o)}},e.prototype.insertRules=function(t,i,o){this.registerName(t,i),this.getTag().insertRules(Xm(t),o)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(Xm(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),z5=/&/g,R5=/^\s*\/\/.*$/gm;function MI(e,t){return e.map(function(i){return i.type==="rule"&&(i.value="".concat(t," ").concat(i.value),i.value=i.value.replaceAll(",",",".concat(t," ")),i.props=i.props.map(function(o){return"".concat(t," ").concat(o)})),Array.isArray(i.children)&&i.type!=="@keyframes"&&(i.children=MI(i.children,t)),i})}function L5(e){var t,i,o,h=Dh,f=h.options,g=f===void 0?Dh:f,c=h.plugins,T=c===void 0?Jy:c,P=function(M,N,Y){return Y.startsWith(i)&&Y.endsWith(i)&&Y.replaceAll(i,"").length>0?".".concat(t):M},R=T.slice();R.push(function(M){M.type===Zy&&M.value.includes("&")&&(M.props[0]=M.props[0].replace(z5,i).replace(o,P))}),g.prefix&&R.push(s5),R.push(r5);var A=function(M,N,Y,U){N===void 0&&(N=""),Y===void 0&&(Y=""),U===void 0&&(U="&"),t=U,i=N,o=new RegExp("\\".concat(i,"\\b"),"g");var te=M.replace(R5,""),O=e5(Y||N?"".concat(Y," ").concat(N," { ").concat(te," }"):te);g.namespace&&(O=MI(O,g.namespace));var $=[];return cy(O,n5(R.concat(i5(function(q){return $.push(q)})))),$};return A.hash=T.length?T.reduce(function(M,N){return N.name||_p(15),ch(M,N.name)},bI).toString():"",A}var O5=new PI,B1=L5(),AI=ju.createContext({shouldForwardProp:void 0,styleSheet:O5,stylis:B1});AI.Consumer;ju.createContext(void 0);function xk(){return Ht.useContext(AI)}var F5=function(){function e(t,i){var o=this;this.inject=function(h,f){f===void 0&&(f=B1);var g=o.name+f.hash;h.hasNameForId(o.id,g)||h.insertRules(o.id,g,f(o.rules,g,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=i,_w(this,function(){throw _p(12,String(o.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=B1),this.name+t.hash},e}(),B5=function(e){return e>="A"&&e<="Z"};function wk(e){for(var t="",i=0;i<e.length;i++){var o=e[i];if(i===1&&o==="-"&&e[0]==="-")return e;B5(o)?t+="-"+o.toLowerCase():t+=o}return t.startsWith("ms-")?"-"+t:t}var DI=function(e){return e==null||e===!1||e===""},zI=function(e){var t,i,o=[];for(var h in e){var f=e[h];e.hasOwnProperty(h)&&!DI(f)&&(Array.isArray(f)&&f.isCss||zh(f)?o.push("".concat(wk(h),":"),f,";"):tp(f)?o.push.apply(o,uy(uy(["".concat(h," {")],zI(f),!1),["}"],!1)):o.push("".concat(wk(h),": ").concat((t=h,(i=f)==null||typeof i=="boolean"||i===""?"":typeof i!="number"||i===0||t in o5||t.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return o};function Fu(e,t,i,o){if(DI(e))return[];if(yw(e))return[".".concat(e.styledComponentId)];if(zh(e)){if(!zh(f=e)||f.prototype&&f.prototype.isReactComponent||!t)return[e];var h=e(t);return Fu(h,t,i,o)}var f;return e instanceof F5?i?(e.inject(i,o),[e.getName(o)]):[e]:tp(e)?zI(e):Array.isArray(e)?Array.prototype.concat.apply(Jy,e.map(function(g){return Fu(g,t,i,o)})):[e.toString()]}function N5(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(zh(i)&&!yw(i))return!1}return!0}var $5=SI(Ky),j5=function(){function e(t,i,o){this.rules=t,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&N5(t),this.componentId=i,this.baseHash=ch($5,i),this.baseStyle=o,PI.registerId(i)}return e.prototype.generateAndInjectStyles=function(t,i,o){var h=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,i,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&i.hasNameForId(this.componentId,this.staticRulesId))h=Mu(h,this.staticRulesId);else{var f=yk(Fu(this.rules,t,i,o)),g=O1(ch(this.baseHash,f)>>>0);if(!i.hasNameForId(this.componentId,g)){var c=o(f,".".concat(g),void 0,this.componentId);i.insertRules(this.componentId,g,c)}h=Mu(h,g),this.staticRulesId=g}else{for(var T=ch(this.baseHash,o.hash),P="",R=0;R<this.rules.length;R++){var A=this.rules[R];if(typeof A=="string")P+=A;else if(A){var M=yk(Fu(A,t,i,o));T=ch(T,M+R),P+=M}}if(P){var N=O1(T>>>0);i.hasNameForId(this.componentId,N)||i.insertRules(this.componentId,N,o(P,".".concat(N),void 0,this.componentId)),h=Mu(h,N)}}return h},e}(),RI=ju.createContext(void 0);RI.Consumer;var vv={};function U5(e,t,i){var o=yw(e),h=e,f=!_v(e),g=t.attrs,c=g===void 0?Jy:g,T=t.componentId,P=T===void 0?function(ne,oe){var ke=typeof ne!="string"?"sc":dk(ne);vv[ke]=(vv[ke]||0)+1;var ge="".concat(ke,"-").concat(d5(Ky+ke+vv[ke]));return oe?"".concat(oe,"-").concat(ge):ge}(t.displayName,t.parentComponentId):T,R=t.displayName,A=R===void 0?function(ne){return _v(ne)?"styled.".concat(ne):"Styled(".concat(f5(ne),")")}(e):R,M=t.displayName&&t.componentId?"".concat(dk(t.displayName),"-").concat(t.componentId):t.componentId||P,N=o&&h.attrs?h.attrs.concat(c).filter(Boolean):c,Y=t.shouldForwardProp;if(o&&h.shouldForwardProp){var U=h.shouldForwardProp;if(t.shouldForwardProp){var te=t.shouldForwardProp;Y=function(ne,oe){return U(ne,oe)&&te(ne,oe)}}else Y=U}var O=new j5(i,M,o?h.componentStyle:void 0);function $(ne,oe){return function(ke,ge,Fe){var Oe=ke.attrs,Ge=ke.componentStyle,it=ke.defaultProps,ve=ke.foldedComponentIds,je=ke.styledComponentId,H=ke.target,Re=ju.useContext(RI),vt=xk(),ye=ke.shouldForwardProp||vt.shouldForwardProp,Be=l5(ge,Re,it)||Dh,Le=function(rt,Jt,er){for(var Vt,Yt=us(us({},Jt),{className:void 0,theme:er}),_r=0;_r<rt.length;_r+=1){var fr=zh(Vt=rt[_r])?Vt(Yt):Vt;for(var br in fr)Yt[br]=br==="className"?Mu(Yt[br],fr[br]):br==="style"?us(us({},Yt[br]),fr[br]):fr[br]}return Jt.className&&(Yt.className=Mu(Yt.className,Jt.className)),Yt}(Oe,ge,Be),Ke=Le.as||H,xe={};for(var Ee in Le)Le[Ee]===void 0||Ee[0]==="$"||Ee==="as"||Ee==="theme"&&Le.theme===Be||(Ee==="forwardedAs"?xe.as=Le.forwardedAs:ye&&!ye(Ee,Ke)||(xe[Ee]=Le[Ee]));var mt=function(rt,Jt){var er=xk(),Vt=rt.generateAndInjectStyles(Jt,er.styleSheet,er.stylis);return Vt}(Ge,Le),nt=Mu(ve,je);return mt&&(nt+=" "+mt),Le.className&&(nt+=" "+Le.className),xe[_v(Ke)&&!wI.has(Ke)?"class":"className"]=nt,xe.ref=Fe,Ht.createElement(Ke,xe)}(q,ne,oe)}$.displayName=A;var q=ju.forwardRef($);return q.attrs=N,q.componentStyle=O,q.displayName=A,q.shouldForwardProp=Y,q.foldedComponentIds=o?Mu(h.foldedComponentIds,h.styledComponentId):"",q.styledComponentId=M,q.target=o?h.target:e,Object.defineProperty(q,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(ne){this._foldedDefaultProps=o?function(oe){for(var ke=[],ge=1;ge<arguments.length;ge++)ke[ge-1]=arguments[ge];for(var Fe=0,Oe=ke;Fe<Oe.length;Fe++)F1(oe,Oe[Fe],!0);return oe}({},h.defaultProps,ne):ne}}),_w(q,function(){return".".concat(q.styledComponentId)}),f&&CI(q,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),q}function bk(e,t){for(var i=[e[0]],o=0,h=t.length;o<h;o+=1)i.push(t[o],e[o+1]);return i}var Sk=function(e){return Object.assign(e,{isCss:!0})};function LI(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(zh(e)||tp(e))return Sk(Fu(bk(Jy,uy([e],t,!0))));var o=e;return t.length===0&&o.length===1&&typeof o[0]=="string"?Fu(o):Sk(Fu(bk(o,t)))}function N1(e,t,i){if(i===void 0&&(i=Dh),!t)throw _p(1,t);var o=function(h){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];return e(t,i,LI.apply(void 0,uy([h],f,!1)))};return o.attrs=function(h){return N1(e,t,us(us({},i),{attrs:Array.prototype.concat(i.attrs,h).filter(Boolean)}))},o.withConfig=function(h){return N1(e,t,us(us({},i),h))},o}var OI=function(e){return N1(U5,e)},vp=OI;wI.forEach(function(e){vp[e]=OI(e)});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bu=function(){return Bu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var h in t=arguments[i])Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h]);return e},Bu.apply(this,arguments)};function xp(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var kk,Tk,Ek,Ck,Ik,V5=LI(kk||(kk=xp([`
  display: flex;
  align-items: center;
  min-width: 322px;
  max-width: 508px;
  height: 48px;
  border: dashed 2px `,`;
  padding: 8px 16px 8px 8px;
  border-radius: 5px;
  cursor: pointer;
  flex-grow: 0;

  &.is-disabled {
    border: dashed 2px `,`;
    cursor: no-drop;
    svg {
      fill: `,`;
      color: `,`;
      path {
        fill: `,`;
        color: `,`;
      }
    }
  }
`],[`
  display: flex;
  align-items: center;
  min-width: 322px;
  max-width: 508px;
  height: 48px;
  border: dashed 2px `,`;
  padding: 8px 16px 8px 8px;
  border-radius: 5px;
  cursor: pointer;
  flex-grow: 0;

  &.is-disabled {
    border: dashed 2px `,`;
    cursor: no-drop;
    svg {
      fill: `,`;
      color: `,`;
      path {
        fill: `,`;
        color: `,`;
      }
    }
  }
`])),"#0658c2","#666","#666","#666","#666","#666"),H5=vp.label(Tk||(Tk=xp([`
  position: relative;
  `,`;
  &:focus-within {
    outline: 2px solid black;
  }
  & > input {
    display: block;
    opacity: 0;
    position: absolute;
    pointer-events: none;
  }
`],[`
  position: relative;
  `,`;
  &:focus-within {
    outline: 2px solid black;
  }
  & > input {
    display: block;
    opacity: 0;
    position: absolute;
    pointer-events: none;
  }
`])),function(e){return e.overRide?"":V5}),W5=vp.div(Ek||(Ek=xp([`
  border: dashed 2px `,`;
  border-radius: 5px;
  background-color: `,`;
  opacity: 0.9;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 999;
  & > span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
  }
`],[`
  border: dashed 2px `,`;
  border-radius: 5px;
  background-color: `,`;
  opacity: 0.9;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 999;
  & > span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
  }
`])),"#666","#999"),G5=vp.div(Ck||(Ck=xp([`
  display: flex;
  justify-content: space-between;
  flex-grow: 1;
  & > span {
    font-size: 12px;
    color: `,`;
  }
  .file-types {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 100px;
  }
`],[`
  display: flex;
  justify-content: space-between;
  flex-grow: 1;
  & > span {
    font-size: 12px;
    color: `,`;
  }
  .file-types {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 100px;
  }
`])),function(e){return e.error?"red":"#666"}),Z5=vp.span(Ik||(Ik=xp([`
  font-size: 14px;
  color: `,`;
  span {
    text-decoration: underline;
  }
`],[`
  font-size: 14px;
  color: `,`;
  span {
    text-decoration: underline;
  }
`])),"#666"),Pk=function(e){return e/1024/1024},q5=function(e){return e===void 0?"":e.map(function(t){return".".concat(t.toLowerCase())}).join(",")};function Y5(e){var t=e.types,i=e.minSize,o=e.maxSize;if(t){var h=t.toString(),f="";return o&&(f+="size >= ".concat(o,", ")),i&&(f+="size <= ".concat(i,", ")),We.jsx("span",Bu({title:"".concat(f,"types: ").concat(h),className:"file-types"},{children:h}),void 0)}return null}function X5(){return We.jsxs("svg",Bu({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[We.jsx("path",{d:"M5.33317 6.66667H22.6665V16H25.3332V6.66667C25.3332 5.196 24.1372 4 22.6665 4H5.33317C3.8625 4 2.6665 5.196 2.6665 6.66667V22.6667C2.6665 24.1373 3.8625 25.3333 5.33317 25.3333H15.9998V22.6667H5.33317V6.66667Z",fill:"#0658C2"},void 0),We.jsx("path",{d:"M10.6665 14.6667L6.6665 20H21.3332L15.9998 12L11.9998 17.3333L10.6665 14.6667Z",fill:"#0658C2"},void 0),We.jsx("path",{d:"M25.3332 18.6667H22.6665V22.6667H18.6665V25.3333H22.6665V29.3333H25.3332V25.3333H29.3332V22.6667H25.3332V18.6667Z",fill:"#0658C2"},void 0)]}),void 0)}var xv=0,K5=function(e,t,i,o,h,f){return i?We.jsx("span",{children:"File type/size error, Hovered on types!"},void 0):We.jsx(Z5,{children:o?We.jsx("span",{children:"Upload disabled"},void 0):We.jsx(We.Fragment,e||t?{children:f?We.jsx(We.Fragment,{children:We.jsx("span",{children:f},void 0)},void 0):We.jsxs(We.Fragment,{children:[We.jsx("span",{children:"Uploaded Successfully!"},void 0)," Upload another?"]},void 0)}:{children:We.jsxs(We.Fragment,h?{children:[We.jsx("span",{children:h.split(" ")[0]},void 0)," ",h.substr(h.indexOf(" ")+1)]}:{children:[We.jsx("span",{children:"Upload"},void 0)," or drop a file right here"]},void 0)},void 0)},void 0)},J5=function(e){var t=e.name,i=e.hoverTitle,o=e.types,h=e.handleChange,f=e.classes,g=e.children,c=e.maxSize,T=e.minSize,P=e.fileOrFiles,R=e.onSizeError,A=e.onTypeError,M=e.onSelect,N=e.onDrop,Y=e.disabled,U=e.label,te=e.uploadedLabel,O=e.multiple,$=e.required,q=e.onDraggingStateChange,ne=e.dropMessageStyle,oe=e.ariaLabel,ke=e.ariaDescribedby,ge=Ht.useRef(null),Fe=Ht.useRef(null),Oe=Ht.useState(!1),Ge=Oe[0],it=Oe[1],ve=Ht.useState(null),je=ve[0],H=ve[1],Re=Ht.useState(!1),vt=Re[0],ye=Re[1],Be=function(xe){return o&&!function(Ee,mt){var nt=Ee.name.split(".").pop();return mt.map(function(rt){return rt.toLowerCase()}).includes(nt.toLowerCase())}(xe,o)?(ye(!0),A&&A("File type is not supported"),!1):c&&Pk(xe.size)>c?(ye(!0),R&&R("File size is too big"),!1):!(T&&Pk(xe.size)<T)||(ye(!0),R&&R("File size is too small"),!1)},Le=function(xe){var Ee=!1;if(xe){if(xe instanceof File)Ee=!Be(xe);else for(var mt=0;mt<xe.length;mt++){var nt=xe[mt];Ee=!Be(nt)||Ee}return!Ee&&(h&&h(xe),H(xe),it(!0),ye(!1),!0)}return!1},Ke=function(xe){var Ee=xe.labelRef,mt=xe.inputRef,nt=xe.multiple,rt=xe.handleChanges,Jt=xe.onDrop,er=Ht.useState(!1),Vt=er[0],Yt=er[1],_r=Ht.useCallback(function(){mt.current.click()},[mt]),fr=Ht.useCallback(function(Ue){Ue.preventDefault(),Ue.stopPropagation(),xv++,Ue.dataTransfer.items&&Ue.dataTransfer.items.length!==0&&Yt(!0)},[]),br=Ht.useCallback(function(Ue){Ue.preventDefault(),Ue.stopPropagation(),--xv>0||Yt(!1)},[]),Xr=Ht.useCallback(function(Ue){Ue.preventDefault(),Ue.stopPropagation()},[]),V=Ht.useCallback(function(Ue){Ue.preventDefault(),Ue.stopPropagation(),Yt(!1),xv=0;var ie=Ue.dataTransfer.files;if(ie&&ie.length>0){var de=nt?ie:ie[0],se=rt(de);Jt&&se&&Jt(de)}},[rt]);return Ht.useEffect(function(){var Ue=Ee.current;return Ue.addEventListener("click",_r),Ue.addEventListener("dragenter",fr),Ue.addEventListener("dragleave",br),Ue.addEventListener("dragover",Xr),Ue.addEventListener("drop",V),function(){Ue.removeEventListener("click",_r),Ue.removeEventListener("dragenter",fr),Ue.removeEventListener("dragleave",br),Ue.removeEventListener("dragover",Xr),Ue.removeEventListener("drop",V)}},[_r,fr,br,Xr,V,Ee]),Vt}({labelRef:ge,inputRef:Fe,multiple:O,handleChanges:Le,onDrop:N});return Ht.useEffect(function(){q==null||q(Ke)},[Ke]),Ht.useEffect(function(){P?(it(!0),H(P)):(Fe.current&&(Fe.current.value=""),it(!1),H(null))},[P]),We.jsxs(H5,Bu({overRide:g,className:"".concat(f||""," ").concat(Y?"is-disabled":""),ref:ge,htmlFor:t,onClick:function(xe){xe.preventDefault(),xe.stopPropagation()},"aria-describedby":ke,role:"button","aria-label":oe},{children:[We.jsx("input",{onClick:function(xe){xe.stopPropagation(),Fe&&Fe.current&&(Fe.current.value="",Fe.current.click())},onChange:function(xe){var Ee=xe.target.files,mt=O?Ee:Ee[0],nt=Le(mt);M&&nt&&M(mt)},accept:q5(o),ref:Fe,type:"file",id:t,name:t,disabled:Y,multiple:O,required:$},void 0),Ke&&We.jsx(W5,Bu({style:ne},{children:We.jsx("span",{children:i||"Drop Here"},void 0)}),void 0),!g&&We.jsxs(We.Fragment,{children:[We.jsx(X5,{},void 0),We.jsxs(G5,Bu({error:vt},{children:[K5(je,Ge,vt,Y,U,te),We.jsx(Y5,{types:o,minSize:T,maxSize:c},void 0)]}),void 0)]},void 0),g]}),void 0)};function Km(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var FI={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(i){e.exports=i()})(function(){return function i(o,h,f){function g(P,R){if(!h[P]){if(!o[P]){var A=typeof Km=="function"&&Km;if(!R&&A)return A(P,!0);if(c)return c(P,!0);var M=new Error("Cannot find module '"+P+"'");throw M.code="MODULE_NOT_FOUND",M}var N=h[P]={exports:{}};o[P][0].call(N.exports,function(Y){var U=o[P][1][Y];return g(U||Y)},N,N.exports,i,o,h,f)}return h[P].exports}for(var c=typeof Km=="function"&&Km,T=0;T<f.length;T++)g(f[T]);return g}({1:[function(i,o,h){var f=i("./utils"),g=i("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(T){for(var P,R,A,M,N,Y,U,te=[],O=0,$=T.length,q=$,ne=f.getTypeOf(T)!=="string";O<T.length;)q=$-O,A=ne?(P=T[O++],R=O<$?T[O++]:0,O<$?T[O++]:0):(P=T.charCodeAt(O++),R=O<$?T.charCodeAt(O++):0,O<$?T.charCodeAt(O++):0),M=P>>2,N=(3&P)<<4|R>>4,Y=1<q?(15&R)<<2|A>>6:64,U=2<q?63&A:64,te.push(c.charAt(M)+c.charAt(N)+c.charAt(Y)+c.charAt(U));return te.join("")},h.decode=function(T){var P,R,A,M,N,Y,U=0,te=0,O="data:";if(T.substr(0,O.length)===O)throw new Error("Invalid base64 input, it looks like a data url.");var $,q=3*(T=T.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(T.charAt(T.length-1)===c.charAt(64)&&q--,T.charAt(T.length-2)===c.charAt(64)&&q--,q%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=g.uint8array?new Uint8Array(0|q):new Array(0|q);U<T.length;)P=c.indexOf(T.charAt(U++))<<2|(M=c.indexOf(T.charAt(U++)))>>4,R=(15&M)<<4|(N=c.indexOf(T.charAt(U++)))>>2,A=(3&N)<<6|(Y=c.indexOf(T.charAt(U++))),$[te++]=P,N!==64&&($[te++]=R),Y!==64&&($[te++]=A);return $}},{"./support":30,"./utils":32}],2:[function(i,o,h){var f=i("./external"),g=i("./stream/DataWorker"),c=i("./stream/Crc32Probe"),T=i("./stream/DataLengthProbe");function P(R,A,M,N,Y){this.compressedSize=R,this.uncompressedSize=A,this.crc32=M,this.compression=N,this.compressedContent=Y}P.prototype={getContentWorker:function(){var R=new g(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new T("data_length")),A=this;return R.on("end",function(){if(this.streamInfo.data_length!==A.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),R},getCompressedWorker:function(){return new g(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},P.createWorkerFrom=function(R,A,M){return R.pipe(new c).pipe(new T("uncompressedSize")).pipe(A.compressWorker(M)).pipe(new T("compressedSize")).withStreamInfo("compression",A)},o.exports=P},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,o,h){var f=i("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},h.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,o,h){var f=i("./utils"),g=function(){for(var c,T=[],P=0;P<256;P++){c=P;for(var R=0;R<8;R++)c=1&c?3988292384^c>>>1:c>>>1;T[P]=c}return T}();o.exports=function(c,T){return c!==void 0&&c.length?f.getTypeOf(c)!=="string"?function(P,R,A,M){var N=g,Y=M+A;P^=-1;for(var U=M;U<Y;U++)P=P>>>8^N[255&(P^R[U])];return-1^P}(0|T,c,c.length,0):function(P,R,A,M){var N=g,Y=M+A;P^=-1;for(var U=M;U<Y;U++)P=P>>>8^N[255&(P^R.charCodeAt(U))];return-1^P}(0|T,c,c.length,0):0}},{"./utils":32}],5:[function(i,o,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(i,o,h){var f=null;f=typeof Promise<"u"?Promise:i("lie"),o.exports={Promise:f}},{lie:37}],7:[function(i,o,h){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=i("pako"),c=i("./utils"),T=i("./stream/GenericWorker"),P=f?"uint8array":"array";function R(A,M){T.call(this,"FlateWorker/"+A),this._pako=null,this._pakoAction=A,this._pakoOptions=M,this.meta={}}h.magic="\b\0",c.inherits(R,T),R.prototype.processChunk=function(A){this.meta=A.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(P,A.data),!1)},R.prototype.flush=function(){T.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},R.prototype.cleanUp=function(){T.prototype.cleanUp.call(this),this._pako=null},R.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var A=this;this._pako.onData=function(M){A.push({data:M,meta:A.meta})}},h.compressWorker=function(A){return new R("Deflate",A)},h.uncompressWorker=function(){return new R("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,o,h){function f(N,Y){var U,te="";for(U=0;U<Y;U++)te+=String.fromCharCode(255&N),N>>>=8;return te}function g(N,Y,U,te,O,$){var q,ne,oe=N.file,ke=N.compression,ge=$!==P.utf8encode,Fe=c.transformTo("string",$(oe.name)),Oe=c.transformTo("string",P.utf8encode(oe.name)),Ge=oe.comment,it=c.transformTo("string",$(Ge)),ve=c.transformTo("string",P.utf8encode(Ge)),je=Oe.length!==oe.name.length,H=ve.length!==Ge.length,Re="",vt="",ye="",Be=oe.dir,Le=oe.date,Ke={crc32:0,compressedSize:0,uncompressedSize:0};Y&&!U||(Ke.crc32=N.crc32,Ke.compressedSize=N.compressedSize,Ke.uncompressedSize=N.uncompressedSize);var xe=0;Y&&(xe|=8),ge||!je&&!H||(xe|=2048);var Ee=0,mt=0;Be&&(Ee|=16),O==="UNIX"?(mt=798,Ee|=function(rt,Jt){var er=rt;return rt||(er=Jt?16893:33204),(65535&er)<<16}(oe.unixPermissions,Be)):(mt=20,Ee|=function(rt){return 63&(rt||0)}(oe.dosPermissions)),q=Le.getUTCHours(),q<<=6,q|=Le.getUTCMinutes(),q<<=5,q|=Le.getUTCSeconds()/2,ne=Le.getUTCFullYear()-1980,ne<<=4,ne|=Le.getUTCMonth()+1,ne<<=5,ne|=Le.getUTCDate(),je&&(vt=f(1,1)+f(R(Fe),4)+Oe,Re+="up"+f(vt.length,2)+vt),H&&(ye=f(1,1)+f(R(it),4)+ve,Re+="uc"+f(ye.length,2)+ye);var nt="";return nt+=`
\0`,nt+=f(xe,2),nt+=ke.magic,nt+=f(q,2),nt+=f(ne,2),nt+=f(Ke.crc32,4),nt+=f(Ke.compressedSize,4),nt+=f(Ke.uncompressedSize,4),nt+=f(Fe.length,2),nt+=f(Re.length,2),{fileRecord:A.LOCAL_FILE_HEADER+nt+Fe+Re,dirRecord:A.CENTRAL_FILE_HEADER+f(mt,2)+nt+f(it.length,2)+"\0\0\0\0"+f(Ee,4)+f(te,4)+Fe+Re+it}}var c=i("../utils"),T=i("../stream/GenericWorker"),P=i("../utf8"),R=i("../crc32"),A=i("../signature");function M(N,Y,U,te){T.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Y,this.zipPlatform=U,this.encodeFileName=te,this.streamFiles=N,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(M,T),M.prototype.push=function(N){var Y=N.meta.percent||0,U=this.entriesCount,te=this._sources.length;this.accumulate?this.contentBuffer.push(N):(this.bytesWritten+=N.data.length,T.prototype.push.call(this,{data:N.data,meta:{currentFile:this.currentFile,percent:U?(Y+100*(U-te-1))/U:100}}))},M.prototype.openedSource=function(N){this.currentSourceOffset=this.bytesWritten,this.currentFile=N.file.name;var Y=this.streamFiles&&!N.file.dir;if(Y){var U=g(N,Y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:U.fileRecord,meta:{percent:0}})}else this.accumulate=!0},M.prototype.closedSource=function(N){this.accumulate=!1;var Y=this.streamFiles&&!N.file.dir,U=g(N,Y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(U.dirRecord),Y)this.push({data:function(te){return A.DATA_DESCRIPTOR+f(te.crc32,4)+f(te.compressedSize,4)+f(te.uncompressedSize,4)}(N),meta:{percent:100}});else for(this.push({data:U.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},M.prototype.flush=function(){for(var N=this.bytesWritten,Y=0;Y<this.dirRecords.length;Y++)this.push({data:this.dirRecords[Y],meta:{percent:100}});var U=this.bytesWritten-N,te=function(O,$,q,ne,oe){var ke=c.transformTo("string",oe(ne));return A.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(O,2)+f(O,2)+f($,4)+f(q,4)+f(ke.length,2)+ke}(this.dirRecords.length,U,N,this.zipComment,this.encodeFileName);this.push({data:te,meta:{percent:100}})},M.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},M.prototype.registerPrevious=function(N){this._sources.push(N);var Y=this;return N.on("data",function(U){Y.processChunk(U)}),N.on("end",function(){Y.closedSource(Y.previous.streamInfo),Y._sources.length?Y.prepareNextSource():Y.end()}),N.on("error",function(U){Y.error(U)}),this},M.prototype.resume=function(){return!!T.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},M.prototype.error=function(N){var Y=this._sources;if(!T.prototype.error.call(this,N))return!1;for(var U=0;U<Y.length;U++)try{Y[U].error(N)}catch{}return!0},M.prototype.lock=function(){T.prototype.lock.call(this);for(var N=this._sources,Y=0;Y<N.length;Y++)N[Y].lock()},o.exports=M},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,o,h){var f=i("../compressions"),g=i("./ZipFileWorker");h.generateWorker=function(c,T,P){var R=new g(T.streamFiles,P,T.platform,T.encodeFileName),A=0;try{c.forEach(function(M,N){A++;var Y=function($,q){var ne=$||q,oe=f[ne];if(!oe)throw new Error(ne+" is not a valid compression method !");return oe}(N.options.compression,T.compression),U=N.options.compressionOptions||T.compressionOptions||{},te=N.dir,O=N.date;N._compressWorker(Y,U).withStreamInfo("file",{name:M,dir:te,date:O,comment:N.comment||"",unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions}).pipe(R)}),R.entriesCount=A}catch(M){R.error(M)}return R}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,o,h){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new f;for(var c in this)typeof this[c]!="function"&&(g[c]=this[c]);return g}}(f.prototype=i("./object")).loadAsync=i("./load"),f.support=i("./support"),f.defaults=i("./defaults"),f.version="3.10.1",f.loadAsync=function(g,c){return new f().loadAsync(g,c)},f.external=i("./external"),o.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,o,h){var f=i("./utils"),g=i("./external"),c=i("./utf8"),T=i("./zipEntries"),P=i("./stream/Crc32Probe"),R=i("./nodejsUtils");function A(M){return new g.Promise(function(N,Y){var U=M.decompressed.getContentWorker().pipe(new P);U.on("error",function(te){Y(te)}).on("end",function(){U.streamInfo.crc32!==M.decompressed.crc32?Y(new Error("Corrupted zip : CRC32 mismatch")):N()}).resume()})}o.exports=function(M,N){var Y=this;return N=f.extend(N||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),R.isNode&&R.isStream(M)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",M,!0,N.optimizedBinaryString,N.base64).then(function(U){var te=new T(N);return te.load(U),te}).then(function(U){var te=[g.Promise.resolve(U)],O=U.files;if(N.checkCRC32)for(var $=0;$<O.length;$++)te.push(A(O[$]));return g.Promise.all(te)}).then(function(U){for(var te=U.shift(),O=te.files,$=0;$<O.length;$++){var q=O[$],ne=q.fileNameStr,oe=f.resolve(q.fileNameStr);Y.file(oe,q.decompressed,{binary:!0,optimizedBinaryString:!0,date:q.date,dir:q.dir,comment:q.fileCommentStr.length?q.fileCommentStr:null,unixPermissions:q.unixPermissions,dosPermissions:q.dosPermissions,createFolders:N.createFolders}),q.dir||(Y.file(oe).unsafeOriginalName=ne)}return te.zipComment.length&&(Y.comment=te.zipComment),Y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,o,h){var f=i("../utils"),g=i("../stream/GenericWorker");function c(T,P){g.call(this,"Nodejs stream input adapter for "+T),this._upstreamEnded=!1,this._bindStream(P)}f.inherits(c,g),c.prototype._bindStream=function(T){var P=this;(this._stream=T).pause(),T.on("data",function(R){P.push({data:R,meta:{percent:0}})}).on("error",function(R){P.isPaused?this.generatedError=R:P.error(R)}).on("end",function(){P.isPaused?P._upstreamEnded=!0:P.end()})},c.prototype.pause=function(){return!!g.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,o,h){var f=i("readable-stream").Readable;function g(c,T,P){f.call(this,T),this._helper=c;var R=this;c.on("data",function(A,M){R.push(A)||R._helper.pause(),P&&P(M)}).on("error",function(A){R.emit("error",A)}).on("end",function(){R.push(null)})}i("../utils").inherits(g,f),g.prototype._read=function(){this._helper.resume()},o.exports=g},{"../utils":32,"readable-stream":16}],14:[function(i,o,h){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(f,g){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,g);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,g)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var g=new Buffer(f);return g.fill(0),g},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(i,o,h){function f(oe,ke,ge){var Fe,Oe=c.getTypeOf(ke),Ge=c.extend(ge||{},R);Ge.date=Ge.date||new Date,Ge.compression!==null&&(Ge.compression=Ge.compression.toUpperCase()),typeof Ge.unixPermissions=="string"&&(Ge.unixPermissions=parseInt(Ge.unixPermissions,8)),Ge.unixPermissions&&16384&Ge.unixPermissions&&(Ge.dir=!0),Ge.dosPermissions&&16&Ge.dosPermissions&&(Ge.dir=!0),Ge.dir&&(oe=O(oe)),Ge.createFolders&&(Fe=te(oe))&&$.call(this,Fe,!0);var it=Oe==="string"&&Ge.binary===!1&&Ge.base64===!1;ge&&ge.binary!==void 0||(Ge.binary=!it),(ke instanceof A&&ke.uncompressedSize===0||Ge.dir||!ke||ke.length===0)&&(Ge.base64=!1,Ge.binary=!0,ke="",Ge.compression="STORE",Oe="string");var ve=null;ve=ke instanceof A||ke instanceof T?ke:Y.isNode&&Y.isStream(ke)?new U(oe,ke):c.prepareContent(oe,ke,Ge.binary,Ge.optimizedBinaryString,Ge.base64);var je=new M(oe,ve,Ge);this.files[oe]=je}var g=i("./utf8"),c=i("./utils"),T=i("./stream/GenericWorker"),P=i("./stream/StreamHelper"),R=i("./defaults"),A=i("./compressedObject"),M=i("./zipObject"),N=i("./generate"),Y=i("./nodejsUtils"),U=i("./nodejs/NodejsStreamInputAdapter"),te=function(oe){oe.slice(-1)==="/"&&(oe=oe.substring(0,oe.length-1));var ke=oe.lastIndexOf("/");return 0<ke?oe.substring(0,ke):""},O=function(oe){return oe.slice(-1)!=="/"&&(oe+="/"),oe},$=function(oe,ke){return ke=ke!==void 0?ke:R.createFolders,oe=O(oe),this.files[oe]||f.call(this,oe,null,{dir:!0,createFolders:ke}),this.files[oe]};function q(oe){return Object.prototype.toString.call(oe)==="[object RegExp]"}var ne={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(oe){var ke,ge,Fe;for(ke in this.files)Fe=this.files[ke],(ge=ke.slice(this.root.length,ke.length))&&ke.slice(0,this.root.length)===this.root&&oe(ge,Fe)},filter:function(oe){var ke=[];return this.forEach(function(ge,Fe){oe(ge,Fe)&&ke.push(Fe)}),ke},file:function(oe,ke,ge){if(arguments.length!==1)return oe=this.root+oe,f.call(this,oe,ke,ge),this;if(q(oe)){var Fe=oe;return this.filter(function(Ge,it){return!it.dir&&Fe.test(Ge)})}var Oe=this.files[this.root+oe];return Oe&&!Oe.dir?Oe:null},folder:function(oe){if(!oe)return this;if(q(oe))return this.filter(function(Oe,Ge){return Ge.dir&&oe.test(Oe)});var ke=this.root+oe,ge=$.call(this,ke),Fe=this.clone();return Fe.root=ge.name,Fe},remove:function(oe){oe=this.root+oe;var ke=this.files[oe];if(ke||(oe.slice(-1)!=="/"&&(oe+="/"),ke=this.files[oe]),ke&&!ke.dir)delete this.files[oe];else for(var ge=this.filter(function(Oe,Ge){return Ge.name.slice(0,oe.length)===oe}),Fe=0;Fe<ge.length;Fe++)delete this.files[ge[Fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(oe){var ke,ge={};try{if((ge=c.extend(oe||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode})).type=ge.type.toLowerCase(),ge.compression=ge.compression.toUpperCase(),ge.type==="binarystring"&&(ge.type="string"),!ge.type)throw new Error("No output type specified.");c.checkSupport(ge.type),ge.platform!=="darwin"&&ge.platform!=="freebsd"&&ge.platform!=="linux"&&ge.platform!=="sunos"||(ge.platform="UNIX"),ge.platform==="win32"&&(ge.platform="DOS");var Fe=ge.comment||this.comment||"";ke=N.generateWorker(this,ge,Fe)}catch(Oe){(ke=new T("error")).error(Oe)}return new P(ke,ge.type||"string",ge.mimeType)},generateAsync:function(oe,ke){return this.generateInternalStream(oe).accumulate(ke)},generateNodeStream:function(oe,ke){return(oe=oe||{}).type||(oe.type="nodebuffer"),this.generateInternalStream(oe).toNodejsStream(ke)}};o.exports=ne},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,o,h){o.exports=i("stream")},{stream:void 0}],17:[function(i,o,h){var f=i("./DataReader");function g(c){f.call(this,c);for(var T=0;T<this.data.length;T++)c[T]=255&c[T]}i("../utils").inherits(g,f),g.prototype.byteAt=function(c){return this.data[this.zero+c]},g.prototype.lastIndexOfSignature=function(c){for(var T=c.charCodeAt(0),P=c.charCodeAt(1),R=c.charCodeAt(2),A=c.charCodeAt(3),M=this.length-4;0<=M;--M)if(this.data[M]===T&&this.data[M+1]===P&&this.data[M+2]===R&&this.data[M+3]===A)return M-this.zero;return-1},g.prototype.readAndCheckSignature=function(c){var T=c.charCodeAt(0),P=c.charCodeAt(1),R=c.charCodeAt(2),A=c.charCodeAt(3),M=this.readData(4);return T===M[0]&&P===M[1]&&R===M[2]&&A===M[3]},g.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var T=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,T},o.exports=g},{"../utils":32,"./DataReader":18}],18:[function(i,o,h){var f=i("../utils");function g(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var T,P=0;for(this.checkOffset(c),T=this.index+c-1;T>=this.index;T--)P=(P<<8)+this.byteAt(T);return this.index+=c,P},readString:function(c){return f.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},o.exports=g},{"../utils":32}],19:[function(i,o,h){var f=i("./Uint8ArrayReader");function g(c){f.call(this,c)}i("../utils").inherits(g,f),g.prototype.readData=function(c){this.checkOffset(c);var T=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,T},o.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,o,h){var f=i("./DataReader");function g(c){f.call(this,c)}i("../utils").inherits(g,f),g.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},g.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},g.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},g.prototype.readData=function(c){this.checkOffset(c);var T=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,T},o.exports=g},{"../utils":32,"./DataReader":18}],21:[function(i,o,h){var f=i("./ArrayReader");function g(c){f.call(this,c)}i("../utils").inherits(g,f),g.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var T=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,T},o.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(i,o,h){var f=i("../utils"),g=i("../support"),c=i("./ArrayReader"),T=i("./StringReader"),P=i("./NodeBufferReader"),R=i("./Uint8ArrayReader");o.exports=function(A){var M=f.getTypeOf(A);return f.checkSupport(M),M!=="string"||g.uint8array?M==="nodebuffer"?new P(A):g.uint8array?new R(f.transformTo("uint8array",A)):new c(f.transformTo("array",A)):new T(A)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,o,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,o,h){var f=i("./GenericWorker"),g=i("../utils");function c(T){f.call(this,"ConvertWorker to "+T),this.destType=T}g.inherits(c,f),c.prototype.processChunk=function(T){this.push({data:g.transformTo(this.destType,T.data),meta:T.meta})},o.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(i,o,h){var f=i("./GenericWorker"),g=i("../crc32");function c(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(c,f),c.prototype.processChunk=function(T){this.streamInfo.crc32=g(T.data,this.streamInfo.crc32||0),this.push(T)},o.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,o,h){var f=i("../utils"),g=i("./GenericWorker");function c(T){g.call(this,"DataLengthProbe for "+T),this.propName=T,this.withStreamInfo(T,0)}f.inherits(c,g),c.prototype.processChunk=function(T){if(T){var P=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=P+T.data.length}g.prototype.processChunk.call(this,T)},o.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(i,o,h){var f=i("../utils"),g=i("./GenericWorker");function c(T){g.call(this,"DataWorker");var P=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,T.then(function(R){P.dataIsReady=!0,P.data=R,P.max=R&&R.length||0,P.type=f.getTypeOf(R),P.isPaused||P._tickAndRepeat()},function(R){P.error(R)})}f.inherits(c,g),c.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var T=null,P=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":T=this.data.substring(this.index,P);break;case"uint8array":T=this.data.subarray(this.index,P);break;case"array":case"nodebuffer":T=this.data.slice(this.index,P)}return this.index=P,this.push({data:T,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(i,o,h){function f(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return!this.isFinished&&(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,c){return this._listeners[g].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,c){if(this._listeners[g])for(var T=0;T<this._listeners[g].length;T++)this._listeners[g][T].call(this,c)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var c=this;return g.on("data",function(T){c.processChunk(T)}),g.on("end",function(){c.end()}),g.on("error",function(T){c.error(T)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var g=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,c){return this.extraStreamInfo[g]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},o.exports=f},{}],29:[function(i,o,h){var f=i("../utils"),g=i("./ConvertWorker"),c=i("./GenericWorker"),T=i("../base64"),P=i("../support"),R=i("../external"),A=null;if(P.nodestream)try{A=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function M(Y,U){return new R.Promise(function(te,O){var $=[],q=Y._internalType,ne=Y._outputType,oe=Y._mimeType;Y.on("data",function(ke,ge){$.push(ke),U&&U(ge)}).on("error",function(ke){$=[],O(ke)}).on("end",function(){try{var ke=function(ge,Fe,Oe){switch(ge){case"blob":return f.newBlob(f.transformTo("arraybuffer",Fe),Oe);case"base64":return T.encode(Fe);default:return f.transformTo(ge,Fe)}}(ne,function(ge,Fe){var Oe,Ge=0,it=null,ve=0;for(Oe=0;Oe<Fe.length;Oe++)ve+=Fe[Oe].length;switch(ge){case"string":return Fe.join("");case"array":return Array.prototype.concat.apply([],Fe);case"uint8array":for(it=new Uint8Array(ve),Oe=0;Oe<Fe.length;Oe++)it.set(Fe[Oe],Ge),Ge+=Fe[Oe].length;return it;case"nodebuffer":return Buffer.concat(Fe);default:throw new Error("concat : unsupported type '"+ge+"'")}}(q,$),oe);te(ke)}catch(ge){O(ge)}$=[]}).resume()})}function N(Y,U,te){var O=U;switch(U){case"blob":case"arraybuffer":O="uint8array";break;case"base64":O="string"}try{this._internalType=O,this._outputType=U,this._mimeType=te,f.checkSupport(O),this._worker=Y.pipe(new g(O)),Y.lock()}catch($){this._worker=new c("error"),this._worker.error($)}}N.prototype={accumulate:function(Y){return M(this,Y)},on:function(Y,U){var te=this;return Y==="data"?this._worker.on(Y,function(O){U.call(te,O.data,O.meta)}):this._worker.on(Y,function(){f.delay(U,arguments,te)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Y){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new A(this,{objectMode:this._outputType!=="nodebuffer"},Y)}},o.exports=N},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,o,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var f=new ArrayBuffer(0);try{h.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(f),h.blob=g.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!i("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(i,o,h){for(var f=i("./utils"),g=i("./support"),c=i("./nodejsUtils"),T=i("./stream/GenericWorker"),P=new Array(256),R=0;R<256;R++)P[R]=252<=R?6:248<=R?5:240<=R?4:224<=R?3:192<=R?2:1;P[254]=P[254]=1;function A(){T.call(this,"utf-8 decode"),this.leftOver=null}function M(){T.call(this,"utf-8 encode")}h.utf8encode=function(N){return g.nodebuffer?c.newBufferFrom(N,"utf-8"):function(Y){var U,te,O,$,q,ne=Y.length,oe=0;for($=0;$<ne;$++)(64512&(te=Y.charCodeAt($)))==55296&&$+1<ne&&(64512&(O=Y.charCodeAt($+1)))==56320&&(te=65536+(te-55296<<10)+(O-56320),$++),oe+=te<128?1:te<2048?2:te<65536?3:4;for(U=g.uint8array?new Uint8Array(oe):new Array(oe),$=q=0;q<oe;$++)(64512&(te=Y.charCodeAt($)))==55296&&$+1<ne&&(64512&(O=Y.charCodeAt($+1)))==56320&&(te=65536+(te-55296<<10)+(O-56320),$++),te<128?U[q++]=te:(te<2048?U[q++]=192|te>>>6:(te<65536?U[q++]=224|te>>>12:(U[q++]=240|te>>>18,U[q++]=128|te>>>12&63),U[q++]=128|te>>>6&63),U[q++]=128|63&te);return U}(N)},h.utf8decode=function(N){return g.nodebuffer?f.transformTo("nodebuffer",N).toString("utf-8"):function(Y){var U,te,O,$,q=Y.length,ne=new Array(2*q);for(U=te=0;U<q;)if((O=Y[U++])<128)ne[te++]=O;else if(4<($=P[O]))ne[te++]=65533,U+=$-1;else{for(O&=$===2?31:$===3?15:7;1<$&&U<q;)O=O<<6|63&Y[U++],$--;1<$?ne[te++]=65533:O<65536?ne[te++]=O:(O-=65536,ne[te++]=55296|O>>10&1023,ne[te++]=56320|1023&O)}return ne.length!==te&&(ne.subarray?ne=ne.subarray(0,te):ne.length=te),f.applyFromCharCode(ne)}(N=f.transformTo(g.uint8array?"uint8array":"array",N))},f.inherits(A,T),A.prototype.processChunk=function(N){var Y=f.transformTo(g.uint8array?"uint8array":"array",N.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var U=Y;(Y=new Uint8Array(U.length+this.leftOver.length)).set(this.leftOver,0),Y.set(U,this.leftOver.length)}else Y=this.leftOver.concat(Y);this.leftOver=null}var te=function($,q){var ne;for((q=q||$.length)>$.length&&(q=$.length),ne=q-1;0<=ne&&(192&$[ne])==128;)ne--;return ne<0||ne===0?q:ne+P[$[ne]]>q?ne:q}(Y),O=Y;te!==Y.length&&(g.uint8array?(O=Y.subarray(0,te),this.leftOver=Y.subarray(te,Y.length)):(O=Y.slice(0,te),this.leftOver=Y.slice(te,Y.length))),this.push({data:h.utf8decode(O),meta:N.meta})},A.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=A,f.inherits(M,T),M.prototype.processChunk=function(N){this.push({data:h.utf8encode(N.data),meta:N.meta})},h.Utf8EncodeWorker=M},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,o,h){var f=i("./support"),g=i("./base64"),c=i("./nodejsUtils"),T=i("./external");function P(U){return U}function R(U,te){for(var O=0;O<U.length;++O)te[O]=255&U.charCodeAt(O);return te}i("setimmediate"),h.newBlob=function(U,te){h.checkSupport("blob");try{return new Blob([U],{type:te})}catch{try{var O=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return O.append(U),O.getBlob(te)}catch{throw new Error("Bug : can't construct the Blob.")}}};var A={stringifyByChunk:function(U,te,O){var $=[],q=0,ne=U.length;if(ne<=O)return String.fromCharCode.apply(null,U);for(;q<ne;)te==="array"||te==="nodebuffer"?$.push(String.fromCharCode.apply(null,U.slice(q,Math.min(q+O,ne)))):$.push(String.fromCharCode.apply(null,U.subarray(q,Math.min(q+O,ne)))),q+=O;return $.join("")},stringifyByChar:function(U){for(var te="",O=0;O<U.length;O++)te+=String.fromCharCode(U[O]);return te},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}}()}};function M(U){var te=65536,O=h.getTypeOf(U),$=!0;if(O==="uint8array"?$=A.applyCanBeUsed.uint8array:O==="nodebuffer"&&($=A.applyCanBeUsed.nodebuffer),$)for(;1<te;)try{return A.stringifyByChunk(U,O,te)}catch{te=Math.floor(te/2)}return A.stringifyByChar(U)}function N(U,te){for(var O=0;O<U.length;O++)te[O]=U[O];return te}h.applyFromCharCode=M;var Y={};Y.string={string:P,array:function(U){return R(U,new Array(U.length))},arraybuffer:function(U){return Y.string.uint8array(U).buffer},uint8array:function(U){return R(U,new Uint8Array(U.length))},nodebuffer:function(U){return R(U,c.allocBuffer(U.length))}},Y.array={string:M,array:P,arraybuffer:function(U){return new Uint8Array(U).buffer},uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return c.newBufferFrom(U)}},Y.arraybuffer={string:function(U){return M(new Uint8Array(U))},array:function(U){return N(new Uint8Array(U),new Array(U.byteLength))},arraybuffer:P,uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return c.newBufferFrom(new Uint8Array(U))}},Y.uint8array={string:M,array:function(U){return N(U,new Array(U.length))},arraybuffer:function(U){return U.buffer},uint8array:P,nodebuffer:function(U){return c.newBufferFrom(U)}},Y.nodebuffer={string:M,array:function(U){return N(U,new Array(U.length))},arraybuffer:function(U){return Y.nodebuffer.uint8array(U).buffer},uint8array:function(U){return N(U,new Uint8Array(U.length))},nodebuffer:P},h.transformTo=function(U,te){if(te=te||"",!U)return te;h.checkSupport(U);var O=h.getTypeOf(te);return Y[O][U](te)},h.resolve=function(U){for(var te=U.split("/"),O=[],$=0;$<te.length;$++){var q=te[$];q==="."||q===""&&$!==0&&$!==te.length-1||(q===".."?O.pop():O.push(q))}return O.join("/")},h.getTypeOf=function(U){return typeof U=="string"?"string":Object.prototype.toString.call(U)==="[object Array]"?"array":f.nodebuffer&&c.isBuffer(U)?"nodebuffer":f.uint8array&&U instanceof Uint8Array?"uint8array":f.arraybuffer&&U instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(U){if(!f[U.toLowerCase()])throw new Error(U+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(U){var te,O,$="";for(O=0;O<(U||"").length;O++)$+="\\x"+((te=U.charCodeAt(O))<16?"0":"")+te.toString(16).toUpperCase();return $},h.delay=function(U,te,O){setImmediate(function(){U.apply(O||null,te||[])})},h.inherits=function(U,te){function O(){}O.prototype=te.prototype,U.prototype=new O},h.extend=function(){var U,te,O={};for(U=0;U<arguments.length;U++)for(te in arguments[U])Object.prototype.hasOwnProperty.call(arguments[U],te)&&O[te]===void 0&&(O[te]=arguments[U][te]);return O},h.prepareContent=function(U,te,O,$,q){return T.Promise.resolve(te).then(function(ne){return f.blob&&(ne instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ne))!==-1)&&typeof FileReader<"u"?new T.Promise(function(oe,ke){var ge=new FileReader;ge.onload=function(Fe){oe(Fe.target.result)},ge.onerror=function(Fe){ke(Fe.target.error)},ge.readAsArrayBuffer(ne)}):ne}).then(function(ne){var oe=h.getTypeOf(ne);return oe?(oe==="arraybuffer"?ne=h.transformTo("uint8array",ne):oe==="string"&&(q?ne=g.decode(ne):O&&$!==!0&&(ne=function(ke){return R(ke,f.uint8array?new Uint8Array(ke.length):new Array(ke.length))}(ne))),ne):T.Promise.reject(new Error("Can't read the data of '"+U+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,o,h){var f=i("./reader/readerFor"),g=i("./utils"),c=i("./signature"),T=i("./zipEntry"),P=i("./support");function R(A){this.files=[],this.loadOptions=A}R.prototype={checkSignature:function(A){if(!this.reader.readAndCheckSignature(A)){this.reader.index-=4;var M=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(M)+", expected "+g.pretty(A)+")")}},isSignature:function(A,M){var N=this.reader.index;this.reader.setIndex(A);var Y=this.reader.readString(4)===M;return this.reader.setIndex(N),Y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var A=this.reader.readData(this.zipCommentLength),M=P.uint8array?"uint8array":"array",N=g.transformTo(M,A);this.zipComment=this.loadOptions.decodeFileName(N)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var A,M,N,Y=this.zip64EndOfCentralSize-44;0<Y;)A=this.reader.readInt(2),M=this.reader.readInt(4),N=this.reader.readData(M),this.zip64ExtensibleData[A]={id:A,length:M,value:N}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var A,M;for(A=0;A<this.files.length;A++)M=this.files[A],this.reader.setIndex(M.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),M.readLocalPart(this.reader),M.handleUTF8(),M.processAttributes()},readCentralDir:function(){var A;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(A=new T({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(A);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var A=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(A<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(A);var M=A;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,(A=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(A),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var N=this.centralDirOffset+this.centralDirSize;this.zip64&&(N+=20,N+=12+this.zip64EndOfCentralSize);var Y=M-N;if(0<Y)this.isSignature(M,c.CENTRAL_FILE_HEADER)||(this.reader.zero=Y);else if(Y<0)throw new Error("Corrupted zip: missing "+Math.abs(Y)+" bytes.")},prepareReader:function(A){this.reader=f(A)},load:function(A){this.prepareReader(A),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=R},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,o,h){var f=i("./reader/readerFor"),g=i("./utils"),c=i("./compressedObject"),T=i("./crc32"),P=i("./utf8"),R=i("./compressions"),A=i("./support");function M(N,Y){this.options=N,this.loadOptions=Y}M.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(N){var Y,U;if(N.skip(22),this.fileNameLength=N.readInt(2),U=N.readInt(2),this.fileName=N.readData(this.fileNameLength),N.skip(U),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((Y=function(te){for(var O in R)if(Object.prototype.hasOwnProperty.call(R,O)&&R[O].magic===te)return R[O];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,Y,N.readData(this.compressedSize))},readCentralPart:function(N){this.versionMadeBy=N.readInt(2),N.skip(2),this.bitFlag=N.readInt(2),this.compressionMethod=N.readString(2),this.date=N.readDate(),this.crc32=N.readInt(4),this.compressedSize=N.readInt(4),this.uncompressedSize=N.readInt(4);var Y=N.readInt(2);if(this.extraFieldsLength=N.readInt(2),this.fileCommentLength=N.readInt(2),this.diskNumberStart=N.readInt(2),this.internalFileAttributes=N.readInt(2),this.externalFileAttributes=N.readInt(4),this.localHeaderOffset=N.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");N.skip(Y),this.readExtraFields(N),this.parseZIP64ExtraField(N),this.fileComment=N.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var N=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),N==0&&(this.dosPermissions=63&this.externalFileAttributes),N==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var N=f(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=N.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=N.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=N.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=N.readInt(4))}},readExtraFields:function(N){var Y,U,te,O=N.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});N.index+4<O;)Y=N.readInt(2),U=N.readInt(2),te=N.readData(U),this.extraFields[Y]={id:Y,length:U,value:te};N.setIndex(O)},handleUTF8:function(){var N=A.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=P.utf8decode(this.fileName),this.fileCommentStr=P.utf8decode(this.fileComment);else{var Y=this.findExtraFieldUnicodePath();if(Y!==null)this.fileNameStr=Y;else{var U=g.transformTo(N,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(U)}var te=this.findExtraFieldUnicodeComment();if(te!==null)this.fileCommentStr=te;else{var O=g.transformTo(N,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(O)}}},findExtraFieldUnicodePath:function(){var N=this.extraFields[28789];if(N){var Y=f(N.value);return Y.readInt(1)!==1||T(this.fileName)!==Y.readInt(4)?null:P.utf8decode(Y.readData(N.length-5))}return null},findExtraFieldUnicodeComment:function(){var N=this.extraFields[25461];if(N){var Y=f(N.value);return Y.readInt(1)!==1||T(this.fileComment)!==Y.readInt(4)?null:P.utf8decode(Y.readData(N.length-5))}return null}},o.exports=M},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,o,h){function f(Y,U,te){this.name=Y,this.dir=te.dir,this.date=te.date,this.comment=te.comment,this.unixPermissions=te.unixPermissions,this.dosPermissions=te.dosPermissions,this._data=U,this._dataBinary=te.binary,this.options={compression:te.compression,compressionOptions:te.compressionOptions}}var g=i("./stream/StreamHelper"),c=i("./stream/DataWorker"),T=i("./utf8"),P=i("./compressedObject"),R=i("./stream/GenericWorker");f.prototype={internalStream:function(Y){var U=null,te="string";try{if(!Y)throw new Error("No output type specified.");var O=(te=Y.toLowerCase())==="string"||te==="text";te!=="binarystring"&&te!=="text"||(te="string"),U=this._decompressWorker();var $=!this._dataBinary;$&&!O&&(U=U.pipe(new T.Utf8EncodeWorker)),!$&&O&&(U=U.pipe(new T.Utf8DecodeWorker))}catch(q){(U=new R("error")).error(q)}return new g(U,te,"")},async:function(Y,U){return this.internalStream(Y).accumulate(U)},nodeStream:function(Y,U){return this.internalStream(Y||"nodebuffer").toNodejsStream(U)},_compressWorker:function(Y,U){if(this._data instanceof P&&this._data.compression.magic===Y.magic)return this._data.getCompressedWorker();var te=this._decompressWorker();return this._dataBinary||(te=te.pipe(new T.Utf8EncodeWorker)),P.createWorkerFrom(te,Y,U)},_decompressWorker:function(){return this._data instanceof P?this._data.getContentWorker():this._data instanceof R?this._data:new c(this._data)}};for(var A=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},N=0;N<A.length;N++)f.prototype[A[N]]=M;o.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,o,h){(function(f){var g,c,T=f.MutationObserver||f.WebKitMutationObserver;if(T){var P=0,R=new T(Y),A=f.document.createTextNode("");R.observe(A,{characterData:!0}),g=function(){A.data=P=++P%2}}else if(f.setImmediate||f.MessageChannel===void 0)g="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var U=f.document.createElement("script");U.onreadystatechange=function(){Y(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},f.document.documentElement.appendChild(U)}:function(){setTimeout(Y,0)};else{var M=new f.MessageChannel;M.port1.onmessage=Y,g=function(){M.port2.postMessage(0)}}var N=[];function Y(){var U,te;c=!0;for(var O=N.length;O;){for(te=N,N=[],U=-1;++U<O;)te[U]();O=N.length}c=!1}o.exports=function(U){N.push(U)!==1||c||g()}}).call(this,typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,o,h){var f=i("immediate");function g(){}var c={},T=["REJECTED"],P=["FULFILLED"],R=["PENDING"];function A(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=R,this.queue=[],this.outcome=void 0,O!==g&&U(this,O)}function M(O,$,q){this.promise=O,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof q=="function"&&(this.onRejected=q,this.callRejected=this.otherCallRejected)}function N(O,$,q){f(function(){var ne;try{ne=$(q)}catch(oe){return c.reject(O,oe)}ne===O?c.reject(O,new TypeError("Cannot resolve promise with itself")):c.resolve(O,ne)})}function Y(O){var $=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof $=="function")return function(){$.apply(O,arguments)}}function U(O,$){var q=!1;function ne(ge){q||(q=!0,c.reject(O,ge))}function oe(ge){q||(q=!0,c.resolve(O,ge))}var ke=te(function(){$(oe,ne)});ke.status==="error"&&ne(ke.value)}function te(O,$){var q={};try{q.value=O($),q.status="success"}catch(ne){q.status="error",q.value=ne}return q}(o.exports=A).prototype.finally=function(O){if(typeof O!="function")return this;var $=this.constructor;return this.then(function(q){return $.resolve(O()).then(function(){return q})},function(q){return $.resolve(O()).then(function(){throw q})})},A.prototype.catch=function(O){return this.then(null,O)},A.prototype.then=function(O,$){if(typeof O!="function"&&this.state===P||typeof $!="function"&&this.state===T)return this;var q=new this.constructor(g);return this.state!==R?N(q,this.state===P?O:$,this.outcome):this.queue.push(new M(q,O,$)),q},M.prototype.callFulfilled=function(O){c.resolve(this.promise,O)},M.prototype.otherCallFulfilled=function(O){N(this.promise,this.onFulfilled,O)},M.prototype.callRejected=function(O){c.reject(this.promise,O)},M.prototype.otherCallRejected=function(O){N(this.promise,this.onRejected,O)},c.resolve=function(O,$){var q=te(Y,$);if(q.status==="error")return c.reject(O,q.value);var ne=q.value;if(ne)U(O,ne);else{O.state=P,O.outcome=$;for(var oe=-1,ke=O.queue.length;++oe<ke;)O.queue[oe].callFulfilled($)}return O},c.reject=function(O,$){O.state=T,O.outcome=$;for(var q=-1,ne=O.queue.length;++q<ne;)O.queue[q].callRejected($);return O},A.resolve=function(O){return O instanceof this?O:c.resolve(new this(g),O)},A.reject=function(O){var $=new this(g);return c.reject($,O)},A.all=function(O){var $=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var q=O.length,ne=!1;if(!q)return this.resolve([]);for(var oe=new Array(q),ke=0,ge=-1,Fe=new this(g);++ge<q;)Oe(O[ge],ge);return Fe;function Oe(Ge,it){$.resolve(Ge).then(function(ve){oe[it]=ve,++ke!==q||ne||(ne=!0,c.resolve(Fe,oe))},function(ve){ne||(ne=!0,c.reject(Fe,ve))})}},A.race=function(O){var $=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var q=O.length,ne=!1;if(!q)return this.resolve([]);for(var oe=-1,ke=new this(g);++oe<q;)ge=O[oe],$.resolve(ge).then(function(Fe){ne||(ne=!0,c.resolve(ke,Fe))},function(Fe){ne||(ne=!0,c.reject(ke,Fe))});var ge;return ke}},{immediate:36}],38:[function(i,o,h){var f={};(0,i("./lib/utils/common").assign)(f,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),o.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,o,h){var f=i("./zlib/deflate"),g=i("./utils/common"),c=i("./utils/strings"),T=i("./zlib/messages"),P=i("./zlib/zstream"),R=Object.prototype.toString,A=0,M=-1,N=0,Y=8;function U(O){if(!(this instanceof U))return new U(O);this.options=g.assign({level:M,method:Y,chunkSize:16384,windowBits:15,memLevel:8,strategy:N,to:""},O||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P,this.strm.avail_out=0;var q=f.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(q!==A)throw new Error(T[q]);if($.header&&f.deflateSetHeader(this.strm,$.header),$.dictionary){var ne;if(ne=typeof $.dictionary=="string"?c.string2buf($.dictionary):R.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(q=f.deflateSetDictionary(this.strm,ne))!==A)throw new Error(T[q]);this._dict_set=!0}}function te(O,$){var q=new U($);if(q.push(O,!0),q.err)throw q.msg||T[q.err];return q.result}U.prototype.push=function(O,$){var q,ne,oe=this.strm,ke=this.options.chunkSize;if(this.ended)return!1;ne=$===~~$?$:$===!0?4:0,typeof O=="string"?oe.input=c.string2buf(O):R.call(O)==="[object ArrayBuffer]"?oe.input=new Uint8Array(O):oe.input=O,oe.next_in=0,oe.avail_in=oe.input.length;do{if(oe.avail_out===0&&(oe.output=new g.Buf8(ke),oe.next_out=0,oe.avail_out=ke),(q=f.deflate(oe,ne))!==1&&q!==A)return this.onEnd(q),!(this.ended=!0);oe.avail_out!==0&&(oe.avail_in!==0||ne!==4&&ne!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(g.shrinkBuf(oe.output,oe.next_out))):this.onData(g.shrinkBuf(oe.output,oe.next_out)))}while((0<oe.avail_in||oe.avail_out===0)&&q!==1);return ne===4?(q=f.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===A):ne!==2||(this.onEnd(A),!(oe.avail_out=0))},U.prototype.onData=function(O){this.chunks.push(O)},U.prototype.onEnd=function(O){O===A&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},h.Deflate=U,h.deflate=te,h.deflateRaw=function(O,$){return($=$||{}).raw=!0,te(O,$)},h.gzip=function(O,$){return($=$||{}).gzip=!0,te(O,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,o,h){var f=i("./zlib/inflate"),g=i("./utils/common"),c=i("./utils/strings"),T=i("./zlib/constants"),P=i("./zlib/messages"),R=i("./zlib/zstream"),A=i("./zlib/gzheader"),M=Object.prototype.toString;function N(U){if(!(this instanceof N))return new N(U);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},U||{});var te=this.options;te.raw&&0<=te.windowBits&&te.windowBits<16&&(te.windowBits=-te.windowBits,te.windowBits===0&&(te.windowBits=-15)),!(0<=te.windowBits&&te.windowBits<16)||U&&U.windowBits||(te.windowBits+=32),15<te.windowBits&&te.windowBits<48&&!(15&te.windowBits)&&(te.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R,this.strm.avail_out=0;var O=f.inflateInit2(this.strm,te.windowBits);if(O!==T.Z_OK)throw new Error(P[O]);this.header=new A,f.inflateGetHeader(this.strm,this.header)}function Y(U,te){var O=new N(te);if(O.push(U,!0),O.err)throw O.msg||P[O.err];return O.result}N.prototype.push=function(U,te){var O,$,q,ne,oe,ke,ge=this.strm,Fe=this.options.chunkSize,Oe=this.options.dictionary,Ge=!1;if(this.ended)return!1;$=te===~~te?te:te===!0?T.Z_FINISH:T.Z_NO_FLUSH,typeof U=="string"?ge.input=c.binstring2buf(U):M.call(U)==="[object ArrayBuffer]"?ge.input=new Uint8Array(U):ge.input=U,ge.next_in=0,ge.avail_in=ge.input.length;do{if(ge.avail_out===0&&(ge.output=new g.Buf8(Fe),ge.next_out=0,ge.avail_out=Fe),(O=f.inflate(ge,T.Z_NO_FLUSH))===T.Z_NEED_DICT&&Oe&&(ke=typeof Oe=="string"?c.string2buf(Oe):M.call(Oe)==="[object ArrayBuffer]"?new Uint8Array(Oe):Oe,O=f.inflateSetDictionary(this.strm,ke)),O===T.Z_BUF_ERROR&&Ge===!0&&(O=T.Z_OK,Ge=!1),O!==T.Z_STREAM_END&&O!==T.Z_OK)return this.onEnd(O),!(this.ended=!0);ge.next_out&&(ge.avail_out!==0&&O!==T.Z_STREAM_END&&(ge.avail_in!==0||$!==T.Z_FINISH&&$!==T.Z_SYNC_FLUSH)||(this.options.to==="string"?(q=c.utf8border(ge.output,ge.next_out),ne=ge.next_out-q,oe=c.buf2string(ge.output,q),ge.next_out=ne,ge.avail_out=Fe-ne,ne&&g.arraySet(ge.output,ge.output,q,ne,0),this.onData(oe)):this.onData(g.shrinkBuf(ge.output,ge.next_out)))),ge.avail_in===0&&ge.avail_out===0&&(Ge=!0)}while((0<ge.avail_in||ge.avail_out===0)&&O!==T.Z_STREAM_END);return O===T.Z_STREAM_END&&($=T.Z_FINISH),$===T.Z_FINISH?(O=f.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===T.Z_OK):$!==T.Z_SYNC_FLUSH||(this.onEnd(T.Z_OK),!(ge.avail_out=0))},N.prototype.onData=function(U){this.chunks.push(U)},N.prototype.onEnd=function(U){U===T.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},h.Inflate=N,h.inflate=Y,h.inflateRaw=function(U,te){return(te=te||{}).raw=!0,Y(U,te)},h.ungzip=Y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,o,h){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(T){for(var P=Array.prototype.slice.call(arguments,1);P.length;){var R=P.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(var A in R)R.hasOwnProperty(A)&&(T[A]=R[A])}}return T},h.shrinkBuf=function(T,P){return T.length===P?T:T.subarray?T.subarray(0,P):(T.length=P,T)};var g={arraySet:function(T,P,R,A,M){if(P.subarray&&T.subarray)T.set(P.subarray(R,R+A),M);else for(var N=0;N<A;N++)T[M+N]=P[R+N]},flattenChunks:function(T){var P,R,A,M,N,Y;for(P=A=0,R=T.length;P<R;P++)A+=T[P].length;for(Y=new Uint8Array(A),P=M=0,R=T.length;P<R;P++)N=T[P],Y.set(N,M),M+=N.length;return Y}},c={arraySet:function(T,P,R,A,M){for(var N=0;N<A;N++)T[M+N]=P[R+N]},flattenChunks:function(T){return[].concat.apply([],T)}};h.setTyped=function(T){T?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,g)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,c))},h.setTyped(f)},{}],42:[function(i,o,h){var f=i("./common"),g=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var T=new f.Buf8(256),P=0;P<256;P++)T[P]=252<=P?6:248<=P?5:240<=P?4:224<=P?3:192<=P?2:1;function R(A,M){if(M<65537&&(A.subarray&&c||!A.subarray&&g))return String.fromCharCode.apply(null,f.shrinkBuf(A,M));for(var N="",Y=0;Y<M;Y++)N+=String.fromCharCode(A[Y]);return N}T[254]=T[254]=1,h.string2buf=function(A){var M,N,Y,U,te,O=A.length,$=0;for(U=0;U<O;U++)(64512&(N=A.charCodeAt(U)))==55296&&U+1<O&&(64512&(Y=A.charCodeAt(U+1)))==56320&&(N=65536+(N-55296<<10)+(Y-56320),U++),$+=N<128?1:N<2048?2:N<65536?3:4;for(M=new f.Buf8($),U=te=0;te<$;U++)(64512&(N=A.charCodeAt(U)))==55296&&U+1<O&&(64512&(Y=A.charCodeAt(U+1)))==56320&&(N=65536+(N-55296<<10)+(Y-56320),U++),N<128?M[te++]=N:(N<2048?M[te++]=192|N>>>6:(N<65536?M[te++]=224|N>>>12:(M[te++]=240|N>>>18,M[te++]=128|N>>>12&63),M[te++]=128|N>>>6&63),M[te++]=128|63&N);return M},h.buf2binstring=function(A){return R(A,A.length)},h.binstring2buf=function(A){for(var M=new f.Buf8(A.length),N=0,Y=M.length;N<Y;N++)M[N]=A.charCodeAt(N);return M},h.buf2string=function(A,M){var N,Y,U,te,O=M||A.length,$=new Array(2*O);for(N=Y=0;N<O;)if((U=A[N++])<128)$[Y++]=U;else if(4<(te=T[U]))$[Y++]=65533,N+=te-1;else{for(U&=te===2?31:te===3?15:7;1<te&&N<O;)U=U<<6|63&A[N++],te--;1<te?$[Y++]=65533:U<65536?$[Y++]=U:(U-=65536,$[Y++]=55296|U>>10&1023,$[Y++]=56320|1023&U)}return R($,Y)},h.utf8border=function(A,M){var N;for((M=M||A.length)>A.length&&(M=A.length),N=M-1;0<=N&&(192&A[N])==128;)N--;return N<0||N===0?M:N+T[A[N]]>M?N:M}},{"./common":41}],43:[function(i,o,h){o.exports=function(f,g,c,T){for(var P=65535&f|0,R=f>>>16&65535|0,A=0;c!==0;){for(c-=A=2e3<c?2e3:c;R=R+(P=P+g[T++]|0)|0,--A;);P%=65521,R%=65521}return P|R<<16|0}},{}],44:[function(i,o,h){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,o,h){var f=function(){for(var g,c=[],T=0;T<256;T++){g=T;for(var P=0;P<8;P++)g=1&g?3988292384^g>>>1:g>>>1;c[T]=g}return c}();o.exports=function(g,c,T,P){var R=f,A=P+T;g^=-1;for(var M=P;M<A;M++)g=g>>>8^R[255&(g^c[M])];return-1^g}},{}],46:[function(i,o,h){var f,g=i("../utils/common"),c=i("./trees"),T=i("./adler32"),P=i("./crc32"),R=i("./messages"),A=0,M=4,N=0,Y=-2,U=-1,te=4,O=2,$=8,q=9,ne=286,oe=30,ke=19,ge=2*ne+1,Fe=15,Oe=3,Ge=258,it=Ge+Oe+1,ve=42,je=113,H=1,Re=2,vt=3,ye=4;function Be(V,Ue){return V.msg=R[Ue],Ue}function Le(V){return(V<<1)-(4<V?9:0)}function Ke(V){for(var Ue=V.length;0<=--Ue;)V[Ue]=0}function xe(V){var Ue=V.state,ie=Ue.pending;ie>V.avail_out&&(ie=V.avail_out),ie!==0&&(g.arraySet(V.output,Ue.pending_buf,Ue.pending_out,ie,V.next_out),V.next_out+=ie,Ue.pending_out+=ie,V.total_out+=ie,V.avail_out-=ie,Ue.pending-=ie,Ue.pending===0&&(Ue.pending_out=0))}function Ee(V,Ue){c._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,Ue),V.block_start=V.strstart,xe(V.strm)}function mt(V,Ue){V.pending_buf[V.pending++]=Ue}function nt(V,Ue){V.pending_buf[V.pending++]=Ue>>>8&255,V.pending_buf[V.pending++]=255&Ue}function rt(V,Ue){var ie,de,se=V.max_chain_length,Te=V.strstart,Ze=V.prev_length,tt=V.nice_match,Ne=V.strstart>V.w_size-it?V.strstart-(V.w_size-it):0,ot=V.window,kt=V.w_mask,at=V.prev,Bt=V.strstart+Ge,Tr=ot[Te+Ze-1],qe=ot[Te+Ze];V.prev_length>=V.good_match&&(se>>=2),tt>V.lookahead&&(tt=V.lookahead);do if(ot[(ie=Ue)+Ze]===qe&&ot[ie+Ze-1]===Tr&&ot[ie]===ot[Te]&&ot[++ie]===ot[Te+1]){Te+=2,ie++;do;while(ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&ot[++Te]===ot[++ie]&&Te<Bt);if(de=Ge-(Bt-Te),Te=Bt-Ge,Ze<de){if(V.match_start=Ue,tt<=(Ze=de))break;Tr=ot[Te+Ze-1],qe=ot[Te+Ze]}}while((Ue=at[Ue&kt])>Ne&&--se!=0);return Ze<=V.lookahead?Ze:V.lookahead}function Jt(V){var Ue,ie,de,se,Te,Ze,tt,Ne,ot,kt,at=V.w_size;do{if(se=V.window_size-V.lookahead-V.strstart,V.strstart>=at+(at-it)){for(g.arraySet(V.window,V.window,at,at,0),V.match_start-=at,V.strstart-=at,V.block_start-=at,Ue=ie=V.hash_size;de=V.head[--Ue],V.head[Ue]=at<=de?de-at:0,--ie;);for(Ue=ie=at;de=V.prev[--Ue],V.prev[Ue]=at<=de?de-at:0,--ie;);se+=at}if(V.strm.avail_in===0)break;if(Ze=V.strm,tt=V.window,Ne=V.strstart+V.lookahead,ot=se,kt=void 0,kt=Ze.avail_in,ot<kt&&(kt=ot),ie=kt===0?0:(Ze.avail_in-=kt,g.arraySet(tt,Ze.input,Ze.next_in,kt,Ne),Ze.state.wrap===1?Ze.adler=T(Ze.adler,tt,kt,Ne):Ze.state.wrap===2&&(Ze.adler=P(Ze.adler,tt,kt,Ne)),Ze.next_in+=kt,Ze.total_in+=kt,kt),V.lookahead+=ie,V.lookahead+V.insert>=Oe)for(Te=V.strstart-V.insert,V.ins_h=V.window[Te],V.ins_h=(V.ins_h<<V.hash_shift^V.window[Te+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[Te+Oe-1])&V.hash_mask,V.prev[Te&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=Te,Te++,V.insert--,!(V.lookahead+V.insert<Oe)););}while(V.lookahead<it&&V.strm.avail_in!==0)}function er(V,Ue){for(var ie,de;;){if(V.lookahead<it){if(Jt(V),V.lookahead<it&&Ue===A)return H;if(V.lookahead===0)break}if(ie=0,V.lookahead>=Oe&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+Oe-1])&V.hash_mask,ie=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),ie!==0&&V.strstart-ie<=V.w_size-it&&(V.match_length=rt(V,ie)),V.match_length>=Oe)if(de=c._tr_tally(V,V.strstart-V.match_start,V.match_length-Oe),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=Oe){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+Oe-1])&V.hash_mask,ie=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else de=c._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(de&&(Ee(V,!1),V.strm.avail_out===0))return H}return V.insert=V.strstart<Oe-1?V.strstart:Oe-1,Ue===M?(Ee(V,!0),V.strm.avail_out===0?vt:ye):V.last_lit&&(Ee(V,!1),V.strm.avail_out===0)?H:Re}function Vt(V,Ue){for(var ie,de,se;;){if(V.lookahead<it){if(Jt(V),V.lookahead<it&&Ue===A)return H;if(V.lookahead===0)break}if(ie=0,V.lookahead>=Oe&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+Oe-1])&V.hash_mask,ie=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=Oe-1,ie!==0&&V.prev_length<V.max_lazy_match&&V.strstart-ie<=V.w_size-it&&(V.match_length=rt(V,ie),V.match_length<=5&&(V.strategy===1||V.match_length===Oe&&4096<V.strstart-V.match_start)&&(V.match_length=Oe-1)),V.prev_length>=Oe&&V.match_length<=V.prev_length){for(se=V.strstart+V.lookahead-Oe,de=c._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-Oe),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=se&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+Oe-1])&V.hash_mask,ie=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=Oe-1,V.strstart++,de&&(Ee(V,!1),V.strm.avail_out===0))return H}else if(V.match_available){if((de=c._tr_tally(V,0,V.window[V.strstart-1]))&&Ee(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return H}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(de=c._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<Oe-1?V.strstart:Oe-1,Ue===M?(Ee(V,!0),V.strm.avail_out===0?vt:ye):V.last_lit&&(Ee(V,!1),V.strm.avail_out===0)?H:Re}function Yt(V,Ue,ie,de,se){this.good_length=V,this.max_lazy=Ue,this.nice_length=ie,this.max_chain=de,this.func=se}function _r(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(2*ge),this.dyn_dtree=new g.Buf16(2*(2*oe+1)),this.bl_tree=new g.Buf16(2*(2*ke+1)),Ke(this.dyn_ltree),Ke(this.dyn_dtree),Ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(Fe+1),this.heap=new g.Buf16(2*ne+1),Ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*ne+1),Ke(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fr(V){var Ue;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=O,(Ue=V.state).pending=0,Ue.pending_out=0,Ue.wrap<0&&(Ue.wrap=-Ue.wrap),Ue.status=Ue.wrap?ve:je,V.adler=Ue.wrap===2?0:1,Ue.last_flush=A,c._tr_init(Ue),N):Be(V,Y)}function br(V){var Ue=fr(V);return Ue===N&&function(ie){ie.window_size=2*ie.w_size,Ke(ie.head),ie.max_lazy_match=f[ie.level].max_lazy,ie.good_match=f[ie.level].good_length,ie.nice_match=f[ie.level].nice_length,ie.max_chain_length=f[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=Oe-1,ie.match_available=0,ie.ins_h=0}(V.state),Ue}function Xr(V,Ue,ie,de,se,Te){if(!V)return Y;var Ze=1;if(Ue===U&&(Ue=6),de<0?(Ze=0,de=-de):15<de&&(Ze=2,de-=16),se<1||q<se||ie!==$||de<8||15<de||Ue<0||9<Ue||Te<0||te<Te)return Be(V,Y);de===8&&(de=9);var tt=new _r;return(V.state=tt).strm=V,tt.wrap=Ze,tt.gzhead=null,tt.w_bits=de,tt.w_size=1<<tt.w_bits,tt.w_mask=tt.w_size-1,tt.hash_bits=se+7,tt.hash_size=1<<tt.hash_bits,tt.hash_mask=tt.hash_size-1,tt.hash_shift=~~((tt.hash_bits+Oe-1)/Oe),tt.window=new g.Buf8(2*tt.w_size),tt.head=new g.Buf16(tt.hash_size),tt.prev=new g.Buf16(tt.w_size),tt.lit_bufsize=1<<se+6,tt.pending_buf_size=4*tt.lit_bufsize,tt.pending_buf=new g.Buf8(tt.pending_buf_size),tt.d_buf=1*tt.lit_bufsize,tt.l_buf=3*tt.lit_bufsize,tt.level=Ue,tt.strategy=Te,tt.method=ie,br(V)}f=[new Yt(0,0,0,0,function(V,Ue){var ie=65535;for(ie>V.pending_buf_size-5&&(ie=V.pending_buf_size-5);;){if(V.lookahead<=1){if(Jt(V),V.lookahead===0&&Ue===A)return H;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var de=V.block_start+ie;if((V.strstart===0||V.strstart>=de)&&(V.lookahead=V.strstart-de,V.strstart=de,Ee(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-it&&(Ee(V,!1),V.strm.avail_out===0))return H}return V.insert=0,Ue===M?(Ee(V,!0),V.strm.avail_out===0?vt:ye):(V.strstart>V.block_start&&(Ee(V,!1),V.strm.avail_out),H)}),new Yt(4,4,8,4,er),new Yt(4,5,16,8,er),new Yt(4,6,32,32,er),new Yt(4,4,16,16,Vt),new Yt(8,16,32,32,Vt),new Yt(8,16,128,128,Vt),new Yt(8,32,128,256,Vt),new Yt(32,128,258,1024,Vt),new Yt(32,258,258,4096,Vt)],h.deflateInit=function(V,Ue){return Xr(V,Ue,$,15,8,0)},h.deflateInit2=Xr,h.deflateReset=br,h.deflateResetKeep=fr,h.deflateSetHeader=function(V,Ue){return V&&V.state?V.state.wrap!==2?Y:(V.state.gzhead=Ue,N):Y},h.deflate=function(V,Ue){var ie,de,se,Te;if(!V||!V.state||5<Ue||Ue<0)return V?Be(V,Y):Y;if(de=V.state,!V.output||!V.input&&V.avail_in!==0||de.status===666&&Ue!==M)return Be(V,V.avail_out===0?-5:Y);if(de.strm=V,ie=de.last_flush,de.last_flush=Ue,de.status===ve)if(de.wrap===2)V.adler=0,mt(de,31),mt(de,139),mt(de,8),de.gzhead?(mt(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),mt(de,255&de.gzhead.time),mt(de,de.gzhead.time>>8&255),mt(de,de.gzhead.time>>16&255),mt(de,de.gzhead.time>>24&255),mt(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),mt(de,255&de.gzhead.os),de.gzhead.extra&&de.gzhead.extra.length&&(mt(de,255&de.gzhead.extra.length),mt(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(V.adler=P(V.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=69):(mt(de,0),mt(de,0),mt(de,0),mt(de,0),mt(de,0),mt(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),mt(de,3),de.status=je);else{var Ze=$+(de.w_bits-8<<4)<<8;Ze|=(2<=de.strategy||de.level<2?0:de.level<6?1:de.level===6?2:3)<<6,de.strstart!==0&&(Ze|=32),Ze+=31-Ze%31,de.status=je,nt(de,Ze),de.strstart!==0&&(nt(de,V.adler>>>16),nt(de,65535&V.adler)),V.adler=1}if(de.status===69)if(de.gzhead.extra){for(se=de.pending;de.gzindex<(65535&de.gzhead.extra.length)&&(de.pending!==de.pending_buf_size||(de.gzhead.hcrc&&de.pending>se&&(V.adler=P(V.adler,de.pending_buf,de.pending-se,se)),xe(V),se=de.pending,de.pending!==de.pending_buf_size));)mt(de,255&de.gzhead.extra[de.gzindex]),de.gzindex++;de.gzhead.hcrc&&de.pending>se&&(V.adler=P(V.adler,de.pending_buf,de.pending-se,se)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=73)}else de.status=73;if(de.status===73)if(de.gzhead.name){se=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>se&&(V.adler=P(V.adler,de.pending_buf,de.pending-se,se)),xe(V),se=de.pending,de.pending===de.pending_buf_size)){Te=1;break}Te=de.gzindex<de.gzhead.name.length?255&de.gzhead.name.charCodeAt(de.gzindex++):0,mt(de,Te)}while(Te!==0);de.gzhead.hcrc&&de.pending>se&&(V.adler=P(V.adler,de.pending_buf,de.pending-se,se)),Te===0&&(de.gzindex=0,de.status=91)}else de.status=91;if(de.status===91)if(de.gzhead.comment){se=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>se&&(V.adler=P(V.adler,de.pending_buf,de.pending-se,se)),xe(V),se=de.pending,de.pending===de.pending_buf_size)){Te=1;break}Te=de.gzindex<de.gzhead.comment.length?255&de.gzhead.comment.charCodeAt(de.gzindex++):0,mt(de,Te)}while(Te!==0);de.gzhead.hcrc&&de.pending>se&&(V.adler=P(V.adler,de.pending_buf,de.pending-se,se)),Te===0&&(de.status=103)}else de.status=103;if(de.status===103&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&xe(V),de.pending+2<=de.pending_buf_size&&(mt(de,255&V.adler),mt(de,V.adler>>8&255),V.adler=0,de.status=je)):de.status=je),de.pending!==0){if(xe(V),V.avail_out===0)return de.last_flush=-1,N}else if(V.avail_in===0&&Le(Ue)<=Le(ie)&&Ue!==M)return Be(V,-5);if(de.status===666&&V.avail_in!==0)return Be(V,-5);if(V.avail_in!==0||de.lookahead!==0||Ue!==A&&de.status!==666){var tt=de.strategy===2?function(Ne,ot){for(var kt;;){if(Ne.lookahead===0&&(Jt(Ne),Ne.lookahead===0)){if(ot===A)return H;break}if(Ne.match_length=0,kt=c._tr_tally(Ne,0,Ne.window[Ne.strstart]),Ne.lookahead--,Ne.strstart++,kt&&(Ee(Ne,!1),Ne.strm.avail_out===0))return H}return Ne.insert=0,ot===M?(Ee(Ne,!0),Ne.strm.avail_out===0?vt:ye):Ne.last_lit&&(Ee(Ne,!1),Ne.strm.avail_out===0)?H:Re}(de,Ue):de.strategy===3?function(Ne,ot){for(var kt,at,Bt,Tr,qe=Ne.window;;){if(Ne.lookahead<=Ge){if(Jt(Ne),Ne.lookahead<=Ge&&ot===A)return H;if(Ne.lookahead===0)break}if(Ne.match_length=0,Ne.lookahead>=Oe&&0<Ne.strstart&&(at=qe[Bt=Ne.strstart-1])===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]){Tr=Ne.strstart+Ge;do;while(at===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]&&at===qe[++Bt]&&Bt<Tr);Ne.match_length=Ge-(Tr-Bt),Ne.match_length>Ne.lookahead&&(Ne.match_length=Ne.lookahead)}if(Ne.match_length>=Oe?(kt=c._tr_tally(Ne,1,Ne.match_length-Oe),Ne.lookahead-=Ne.match_length,Ne.strstart+=Ne.match_length,Ne.match_length=0):(kt=c._tr_tally(Ne,0,Ne.window[Ne.strstart]),Ne.lookahead--,Ne.strstart++),kt&&(Ee(Ne,!1),Ne.strm.avail_out===0))return H}return Ne.insert=0,ot===M?(Ee(Ne,!0),Ne.strm.avail_out===0?vt:ye):Ne.last_lit&&(Ee(Ne,!1),Ne.strm.avail_out===0)?H:Re}(de,Ue):f[de.level].func(de,Ue);if(tt!==vt&&tt!==ye||(de.status=666),tt===H||tt===vt)return V.avail_out===0&&(de.last_flush=-1),N;if(tt===Re&&(Ue===1?c._tr_align(de):Ue!==5&&(c._tr_stored_block(de,0,0,!1),Ue===3&&(Ke(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),xe(V),V.avail_out===0))return de.last_flush=-1,N}return Ue!==M?N:de.wrap<=0?1:(de.wrap===2?(mt(de,255&V.adler),mt(de,V.adler>>8&255),mt(de,V.adler>>16&255),mt(de,V.adler>>24&255),mt(de,255&V.total_in),mt(de,V.total_in>>8&255),mt(de,V.total_in>>16&255),mt(de,V.total_in>>24&255)):(nt(de,V.adler>>>16),nt(de,65535&V.adler)),xe(V),0<de.wrap&&(de.wrap=-de.wrap),de.pending!==0?N:1)},h.deflateEnd=function(V){var Ue;return V&&V.state?(Ue=V.state.status)!==ve&&Ue!==69&&Ue!==73&&Ue!==91&&Ue!==103&&Ue!==je&&Ue!==666?Be(V,Y):(V.state=null,Ue===je?Be(V,-3):N):Y},h.deflateSetDictionary=function(V,Ue){var ie,de,se,Te,Ze,tt,Ne,ot,kt=Ue.length;if(!V||!V.state||(Te=(ie=V.state).wrap)===2||Te===1&&ie.status!==ve||ie.lookahead)return Y;for(Te===1&&(V.adler=T(V.adler,Ue,kt,0)),ie.wrap=0,kt>=ie.w_size&&(Te===0&&(Ke(ie.head),ie.strstart=0,ie.block_start=0,ie.insert=0),ot=new g.Buf8(ie.w_size),g.arraySet(ot,Ue,kt-ie.w_size,ie.w_size,0),Ue=ot,kt=ie.w_size),Ze=V.avail_in,tt=V.next_in,Ne=V.input,V.avail_in=kt,V.next_in=0,V.input=Ue,Jt(ie);ie.lookahead>=Oe;){for(de=ie.strstart,se=ie.lookahead-(Oe-1);ie.ins_h=(ie.ins_h<<ie.hash_shift^ie.window[de+Oe-1])&ie.hash_mask,ie.prev[de&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=de,de++,--se;);ie.strstart=de,ie.lookahead=Oe-1,Jt(ie)}return ie.strstart+=ie.lookahead,ie.block_start=ie.strstart,ie.insert=ie.lookahead,ie.lookahead=0,ie.match_length=ie.prev_length=Oe-1,ie.match_available=0,V.next_in=tt,V.input=Ne,V.avail_in=Ze,ie.wrap=Te,N},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,o,h){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,o,h){o.exports=function(f,g){var c,T,P,R,A,M,N,Y,U,te,O,$,q,ne,oe,ke,ge,Fe,Oe,Ge,it,ve,je,H,Re;c=f.state,T=f.next_in,H=f.input,P=T+(f.avail_in-5),R=f.next_out,Re=f.output,A=R-(g-f.avail_out),M=R+(f.avail_out-257),N=c.dmax,Y=c.wsize,U=c.whave,te=c.wnext,O=c.window,$=c.hold,q=c.bits,ne=c.lencode,oe=c.distcode,ke=(1<<c.lenbits)-1,ge=(1<<c.distbits)-1;e:do{q<15&&($+=H[T++]<<q,q+=8,$+=H[T++]<<q,q+=8),Fe=ne[$&ke];t:for(;;){if($>>>=Oe=Fe>>>24,q-=Oe,(Oe=Fe>>>16&255)===0)Re[R++]=65535&Fe;else{if(!(16&Oe)){if(!(64&Oe)){Fe=ne[(65535&Fe)+($&(1<<Oe)-1)];continue t}if(32&Oe){c.mode=12;break e}f.msg="invalid literal/length code",c.mode=30;break e}Ge=65535&Fe,(Oe&=15)&&(q<Oe&&($+=H[T++]<<q,q+=8),Ge+=$&(1<<Oe)-1,$>>>=Oe,q-=Oe),q<15&&($+=H[T++]<<q,q+=8,$+=H[T++]<<q,q+=8),Fe=oe[$&ge];r:for(;;){if($>>>=Oe=Fe>>>24,q-=Oe,!(16&(Oe=Fe>>>16&255))){if(!(64&Oe)){Fe=oe[(65535&Fe)+($&(1<<Oe)-1)];continue r}f.msg="invalid distance code",c.mode=30;break e}if(it=65535&Fe,q<(Oe&=15)&&($+=H[T++]<<q,(q+=8)<Oe&&($+=H[T++]<<q,q+=8)),N<(it+=$&(1<<Oe)-1)){f.msg="invalid distance too far back",c.mode=30;break e}if($>>>=Oe,q-=Oe,(Oe=R-A)<it){if(U<(Oe=it-Oe)&&c.sane){f.msg="invalid distance too far back",c.mode=30;break e}if(je=O,(ve=0)===te){if(ve+=Y-Oe,Oe<Ge){for(Ge-=Oe;Re[R++]=O[ve++],--Oe;);ve=R-it,je=Re}}else if(te<Oe){if(ve+=Y+te-Oe,(Oe-=te)<Ge){for(Ge-=Oe;Re[R++]=O[ve++],--Oe;);if(ve=0,te<Ge){for(Ge-=Oe=te;Re[R++]=O[ve++],--Oe;);ve=R-it,je=Re}}}else if(ve+=te-Oe,Oe<Ge){for(Ge-=Oe;Re[R++]=O[ve++],--Oe;);ve=R-it,je=Re}for(;2<Ge;)Re[R++]=je[ve++],Re[R++]=je[ve++],Re[R++]=je[ve++],Ge-=3;Ge&&(Re[R++]=je[ve++],1<Ge&&(Re[R++]=je[ve++]))}else{for(ve=R-it;Re[R++]=Re[ve++],Re[R++]=Re[ve++],Re[R++]=Re[ve++],2<(Ge-=3););Ge&&(Re[R++]=Re[ve++],1<Ge&&(Re[R++]=Re[ve++]))}break}}break}}while(T<P&&R<M);T-=Ge=q>>3,$&=(1<<(q-=Ge<<3))-1,f.next_in=T,f.next_out=R,f.avail_in=T<P?P-T+5:5-(T-P),f.avail_out=R<M?M-R+257:257-(R-M),c.hold=$,c.bits=q}},{}],49:[function(i,o,h){var f=i("../utils/common"),g=i("./adler32"),c=i("./crc32"),T=i("./inffast"),P=i("./inftrees"),R=1,A=2,M=0,N=-2,Y=1,U=852,te=592;function O(ve){return(ve>>>24&255)+(ve>>>8&65280)+((65280&ve)<<8)+((255&ve)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function q(ve){var je;return ve&&ve.state?(je=ve.state,ve.total_in=ve.total_out=je.total=0,ve.msg="",je.wrap&&(ve.adler=1&je.wrap),je.mode=Y,je.last=0,je.havedict=0,je.dmax=32768,je.head=null,je.hold=0,je.bits=0,je.lencode=je.lendyn=new f.Buf32(U),je.distcode=je.distdyn=new f.Buf32(te),je.sane=1,je.back=-1,M):N}function ne(ve){var je;return ve&&ve.state?((je=ve.state).wsize=0,je.whave=0,je.wnext=0,q(ve)):N}function oe(ve,je){var H,Re;return ve&&ve.state?(Re=ve.state,je<0?(H=0,je=-je):(H=1+(je>>4),je<48&&(je&=15)),je&&(je<8||15<je)?N:(Re.window!==null&&Re.wbits!==je&&(Re.window=null),Re.wrap=H,Re.wbits=je,ne(ve))):N}function ke(ve,je){var H,Re;return ve?(Re=new $,(ve.state=Re).window=null,(H=oe(ve,je))!==M&&(ve.state=null),H):N}var ge,Fe,Oe=!0;function Ge(ve){if(Oe){var je;for(ge=new f.Buf32(512),Fe=new f.Buf32(32),je=0;je<144;)ve.lens[je++]=8;for(;je<256;)ve.lens[je++]=9;for(;je<280;)ve.lens[je++]=7;for(;je<288;)ve.lens[je++]=8;for(P(R,ve.lens,0,288,ge,0,ve.work,{bits:9}),je=0;je<32;)ve.lens[je++]=5;P(A,ve.lens,0,32,Fe,0,ve.work,{bits:5}),Oe=!1}ve.lencode=ge,ve.lenbits=9,ve.distcode=Fe,ve.distbits=5}function it(ve,je,H,Re){var vt,ye=ve.state;return ye.window===null&&(ye.wsize=1<<ye.wbits,ye.wnext=0,ye.whave=0,ye.window=new f.Buf8(ye.wsize)),Re>=ye.wsize?(f.arraySet(ye.window,je,H-ye.wsize,ye.wsize,0),ye.wnext=0,ye.whave=ye.wsize):(Re<(vt=ye.wsize-ye.wnext)&&(vt=Re),f.arraySet(ye.window,je,H-Re,vt,ye.wnext),(Re-=vt)?(f.arraySet(ye.window,je,H-Re,Re,0),ye.wnext=Re,ye.whave=ye.wsize):(ye.wnext+=vt,ye.wnext===ye.wsize&&(ye.wnext=0),ye.whave<ye.wsize&&(ye.whave+=vt))),0}h.inflateReset=ne,h.inflateReset2=oe,h.inflateResetKeep=q,h.inflateInit=function(ve){return ke(ve,15)},h.inflateInit2=ke,h.inflate=function(ve,je){var H,Re,vt,ye,Be,Le,Ke,xe,Ee,mt,nt,rt,Jt,er,Vt,Yt,_r,fr,br,Xr,V,Ue,ie,de,se=0,Te=new f.Buf8(4),Ze=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return N;(H=ve.state).mode===12&&(H.mode=13),Be=ve.next_out,vt=ve.output,Ke=ve.avail_out,ye=ve.next_in,Re=ve.input,Le=ve.avail_in,xe=H.hold,Ee=H.bits,mt=Le,nt=Ke,Ue=M;e:for(;;)switch(H.mode){case Y:if(H.wrap===0){H.mode=13;break}for(;Ee<16;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(2&H.wrap&&xe===35615){Te[H.check=0]=255&xe,Te[1]=xe>>>8&255,H.check=c(H.check,Te,2,0),Ee=xe=0,H.mode=2;break}if(H.flags=0,H.head&&(H.head.done=!1),!(1&H.wrap)||(((255&xe)<<8)+(xe>>8))%31){ve.msg="incorrect header check",H.mode=30;break}if((15&xe)!=8){ve.msg="unknown compression method",H.mode=30;break}if(Ee-=4,V=8+(15&(xe>>>=4)),H.wbits===0)H.wbits=V;else if(V>H.wbits){ve.msg="invalid window size",H.mode=30;break}H.dmax=1<<V,ve.adler=H.check=1,H.mode=512&xe?10:12,Ee=xe=0;break;case 2:for(;Ee<16;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(H.flags=xe,(255&H.flags)!=8){ve.msg="unknown compression method",H.mode=30;break}if(57344&H.flags){ve.msg="unknown header flags set",H.mode=30;break}H.head&&(H.head.text=xe>>8&1),512&H.flags&&(Te[0]=255&xe,Te[1]=xe>>>8&255,H.check=c(H.check,Te,2,0)),Ee=xe=0,H.mode=3;case 3:for(;Ee<32;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}H.head&&(H.head.time=xe),512&H.flags&&(Te[0]=255&xe,Te[1]=xe>>>8&255,Te[2]=xe>>>16&255,Te[3]=xe>>>24&255,H.check=c(H.check,Te,4,0)),Ee=xe=0,H.mode=4;case 4:for(;Ee<16;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}H.head&&(H.head.xflags=255&xe,H.head.os=xe>>8),512&H.flags&&(Te[0]=255&xe,Te[1]=xe>>>8&255,H.check=c(H.check,Te,2,0)),Ee=xe=0,H.mode=5;case 5:if(1024&H.flags){for(;Ee<16;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}H.length=xe,H.head&&(H.head.extra_len=xe),512&H.flags&&(Te[0]=255&xe,Te[1]=xe>>>8&255,H.check=c(H.check,Te,2,0)),Ee=xe=0}else H.head&&(H.head.extra=null);H.mode=6;case 6:if(1024&H.flags&&(Le<(rt=H.length)&&(rt=Le),rt&&(H.head&&(V=H.head.extra_len-H.length,H.head.extra||(H.head.extra=new Array(H.head.extra_len)),f.arraySet(H.head.extra,Re,ye,rt,V)),512&H.flags&&(H.check=c(H.check,Re,rt,ye)),Le-=rt,ye+=rt,H.length-=rt),H.length))break e;H.length=0,H.mode=7;case 7:if(2048&H.flags){if(Le===0)break e;for(rt=0;V=Re[ye+rt++],H.head&&V&&H.length<65536&&(H.head.name+=String.fromCharCode(V)),V&&rt<Le;);if(512&H.flags&&(H.check=c(H.check,Re,rt,ye)),Le-=rt,ye+=rt,V)break e}else H.head&&(H.head.name=null);H.length=0,H.mode=8;case 8:if(4096&H.flags){if(Le===0)break e;for(rt=0;V=Re[ye+rt++],H.head&&V&&H.length<65536&&(H.head.comment+=String.fromCharCode(V)),V&&rt<Le;);if(512&H.flags&&(H.check=c(H.check,Re,rt,ye)),Le-=rt,ye+=rt,V)break e}else H.head&&(H.head.comment=null);H.mode=9;case 9:if(512&H.flags){for(;Ee<16;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(xe!==(65535&H.check)){ve.msg="header crc mismatch",H.mode=30;break}Ee=xe=0}H.head&&(H.head.hcrc=H.flags>>9&1,H.head.done=!0),ve.adler=H.check=0,H.mode=12;break;case 10:for(;Ee<32;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}ve.adler=H.check=O(xe),Ee=xe=0,H.mode=11;case 11:if(H.havedict===0)return ve.next_out=Be,ve.avail_out=Ke,ve.next_in=ye,ve.avail_in=Le,H.hold=xe,H.bits=Ee,2;ve.adler=H.check=1,H.mode=12;case 12:if(je===5||je===6)break e;case 13:if(H.last){xe>>>=7&Ee,Ee-=7&Ee,H.mode=27;break}for(;Ee<3;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}switch(H.last=1&xe,Ee-=1,3&(xe>>>=1)){case 0:H.mode=14;break;case 1:if(Ge(H),H.mode=20,je!==6)break;xe>>>=2,Ee-=2;break e;case 2:H.mode=17;break;case 3:ve.msg="invalid block type",H.mode=30}xe>>>=2,Ee-=2;break;case 14:for(xe>>>=7&Ee,Ee-=7&Ee;Ee<32;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if((65535&xe)!=(xe>>>16^65535)){ve.msg="invalid stored block lengths",H.mode=30;break}if(H.length=65535&xe,Ee=xe=0,H.mode=15,je===6)break e;case 15:H.mode=16;case 16:if(rt=H.length){if(Le<rt&&(rt=Le),Ke<rt&&(rt=Ke),rt===0)break e;f.arraySet(vt,Re,ye,rt,Be),Le-=rt,ye+=rt,Ke-=rt,Be+=rt,H.length-=rt;break}H.mode=12;break;case 17:for(;Ee<14;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(H.nlen=257+(31&xe),xe>>>=5,Ee-=5,H.ndist=1+(31&xe),xe>>>=5,Ee-=5,H.ncode=4+(15&xe),xe>>>=4,Ee-=4,286<H.nlen||30<H.ndist){ve.msg="too many length or distance symbols",H.mode=30;break}H.have=0,H.mode=18;case 18:for(;H.have<H.ncode;){for(;Ee<3;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}H.lens[Ze[H.have++]]=7&xe,xe>>>=3,Ee-=3}for(;H.have<19;)H.lens[Ze[H.have++]]=0;if(H.lencode=H.lendyn,H.lenbits=7,ie={bits:H.lenbits},Ue=P(0,H.lens,0,19,H.lencode,0,H.work,ie),H.lenbits=ie.bits,Ue){ve.msg="invalid code lengths set",H.mode=30;break}H.have=0,H.mode=19;case 19:for(;H.have<H.nlen+H.ndist;){for(;Yt=(se=H.lencode[xe&(1<<H.lenbits)-1])>>>16&255,_r=65535&se,!((Vt=se>>>24)<=Ee);){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(_r<16)xe>>>=Vt,Ee-=Vt,H.lens[H.have++]=_r;else{if(_r===16){for(de=Vt+2;Ee<de;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(xe>>>=Vt,Ee-=Vt,H.have===0){ve.msg="invalid bit length repeat",H.mode=30;break}V=H.lens[H.have-1],rt=3+(3&xe),xe>>>=2,Ee-=2}else if(_r===17){for(de=Vt+3;Ee<de;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}Ee-=Vt,V=0,rt=3+(7&(xe>>>=Vt)),xe>>>=3,Ee-=3}else{for(de=Vt+7;Ee<de;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}Ee-=Vt,V=0,rt=11+(127&(xe>>>=Vt)),xe>>>=7,Ee-=7}if(H.have+rt>H.nlen+H.ndist){ve.msg="invalid bit length repeat",H.mode=30;break}for(;rt--;)H.lens[H.have++]=V}}if(H.mode===30)break;if(H.lens[256]===0){ve.msg="invalid code -- missing end-of-block",H.mode=30;break}if(H.lenbits=9,ie={bits:H.lenbits},Ue=P(R,H.lens,0,H.nlen,H.lencode,0,H.work,ie),H.lenbits=ie.bits,Ue){ve.msg="invalid literal/lengths set",H.mode=30;break}if(H.distbits=6,H.distcode=H.distdyn,ie={bits:H.distbits},Ue=P(A,H.lens,H.nlen,H.ndist,H.distcode,0,H.work,ie),H.distbits=ie.bits,Ue){ve.msg="invalid distances set",H.mode=30;break}if(H.mode=20,je===6)break e;case 20:H.mode=21;case 21:if(6<=Le&&258<=Ke){ve.next_out=Be,ve.avail_out=Ke,ve.next_in=ye,ve.avail_in=Le,H.hold=xe,H.bits=Ee,T(ve,nt),Be=ve.next_out,vt=ve.output,Ke=ve.avail_out,ye=ve.next_in,Re=ve.input,Le=ve.avail_in,xe=H.hold,Ee=H.bits,H.mode===12&&(H.back=-1);break}for(H.back=0;Yt=(se=H.lencode[xe&(1<<H.lenbits)-1])>>>16&255,_r=65535&se,!((Vt=se>>>24)<=Ee);){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(Yt&&!(240&Yt)){for(fr=Vt,br=Yt,Xr=_r;Yt=(se=H.lencode[Xr+((xe&(1<<fr+br)-1)>>fr)])>>>16&255,_r=65535&se,!(fr+(Vt=se>>>24)<=Ee);){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}xe>>>=fr,Ee-=fr,H.back+=fr}if(xe>>>=Vt,Ee-=Vt,H.back+=Vt,H.length=_r,Yt===0){H.mode=26;break}if(32&Yt){H.back=-1,H.mode=12;break}if(64&Yt){ve.msg="invalid literal/length code",H.mode=30;break}H.extra=15&Yt,H.mode=22;case 22:if(H.extra){for(de=H.extra;Ee<de;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}H.length+=xe&(1<<H.extra)-1,xe>>>=H.extra,Ee-=H.extra,H.back+=H.extra}H.was=H.length,H.mode=23;case 23:for(;Yt=(se=H.distcode[xe&(1<<H.distbits)-1])>>>16&255,_r=65535&se,!((Vt=se>>>24)<=Ee);){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(!(240&Yt)){for(fr=Vt,br=Yt,Xr=_r;Yt=(se=H.distcode[Xr+((xe&(1<<fr+br)-1)>>fr)])>>>16&255,_r=65535&se,!(fr+(Vt=se>>>24)<=Ee);){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}xe>>>=fr,Ee-=fr,H.back+=fr}if(xe>>>=Vt,Ee-=Vt,H.back+=Vt,64&Yt){ve.msg="invalid distance code",H.mode=30;break}H.offset=_r,H.extra=15&Yt,H.mode=24;case 24:if(H.extra){for(de=H.extra;Ee<de;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}H.offset+=xe&(1<<H.extra)-1,xe>>>=H.extra,Ee-=H.extra,H.back+=H.extra}if(H.offset>H.dmax){ve.msg="invalid distance too far back",H.mode=30;break}H.mode=25;case 25:if(Ke===0)break e;if(rt=nt-Ke,H.offset>rt){if((rt=H.offset-rt)>H.whave&&H.sane){ve.msg="invalid distance too far back",H.mode=30;break}Jt=rt>H.wnext?(rt-=H.wnext,H.wsize-rt):H.wnext-rt,rt>H.length&&(rt=H.length),er=H.window}else er=vt,Jt=Be-H.offset,rt=H.length;for(Ke<rt&&(rt=Ke),Ke-=rt,H.length-=rt;vt[Be++]=er[Jt++],--rt;);H.length===0&&(H.mode=21);break;case 26:if(Ke===0)break e;vt[Be++]=H.length,Ke--,H.mode=21;break;case 27:if(H.wrap){for(;Ee<32;){if(Le===0)break e;Le--,xe|=Re[ye++]<<Ee,Ee+=8}if(nt-=Ke,ve.total_out+=nt,H.total+=nt,nt&&(ve.adler=H.check=H.flags?c(H.check,vt,nt,Be-nt):g(H.check,vt,nt,Be-nt)),nt=Ke,(H.flags?xe:O(xe))!==H.check){ve.msg="incorrect data check",H.mode=30;break}Ee=xe=0}H.mode=28;case 28:if(H.wrap&&H.flags){for(;Ee<32;){if(Le===0)break e;Le--,xe+=Re[ye++]<<Ee,Ee+=8}if(xe!==(4294967295&H.total)){ve.msg="incorrect length check",H.mode=30;break}Ee=xe=0}H.mode=29;case 29:Ue=1;break e;case 30:Ue=-3;break e;case 31:return-4;case 32:default:return N}return ve.next_out=Be,ve.avail_out=Ke,ve.next_in=ye,ve.avail_in=Le,H.hold=xe,H.bits=Ee,(H.wsize||nt!==ve.avail_out&&H.mode<30&&(H.mode<27||je!==4))&&it(ve,ve.output,ve.next_out,nt-ve.avail_out)?(H.mode=31,-4):(mt-=ve.avail_in,nt-=ve.avail_out,ve.total_in+=mt,ve.total_out+=nt,H.total+=nt,H.wrap&&nt&&(ve.adler=H.check=H.flags?c(H.check,vt,nt,ve.next_out-nt):g(H.check,vt,nt,ve.next_out-nt)),ve.data_type=H.bits+(H.last?64:0)+(H.mode===12?128:0)+(H.mode===20||H.mode===15?256:0),(mt==0&&nt===0||je===4)&&Ue===M&&(Ue=-5),Ue)},h.inflateEnd=function(ve){if(!ve||!ve.state)return N;var je=ve.state;return je.window&&(je.window=null),ve.state=null,M},h.inflateGetHeader=function(ve,je){var H;return ve&&ve.state&&2&(H=ve.state).wrap?((H.head=je).done=!1,M):N},h.inflateSetDictionary=function(ve,je){var H,Re=je.length;return ve&&ve.state?(H=ve.state).wrap!==0&&H.mode!==11?N:H.mode===11&&g(1,je,Re,0)!==H.check?-3:it(ve,je,Re,Re)?(H.mode=31,-4):(H.havedict=1,M):N},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,o,h){var f=i("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(R,A,M,N,Y,U,te,O){var $,q,ne,oe,ke,ge,Fe,Oe,Ge,it=O.bits,ve=0,je=0,H=0,Re=0,vt=0,ye=0,Be=0,Le=0,Ke=0,xe=0,Ee=null,mt=0,nt=new f.Buf16(16),rt=new f.Buf16(16),Jt=null,er=0;for(ve=0;ve<=15;ve++)nt[ve]=0;for(je=0;je<N;je++)nt[A[M+je]]++;for(vt=it,Re=15;1<=Re&&nt[Re]===0;Re--);if(Re<vt&&(vt=Re),Re===0)return Y[U++]=20971520,Y[U++]=20971520,O.bits=1,0;for(H=1;H<Re&&nt[H]===0;H++);for(vt<H&&(vt=H),ve=Le=1;ve<=15;ve++)if(Le<<=1,(Le-=nt[ve])<0)return-1;if(0<Le&&(R===0||Re!==1))return-1;for(rt[1]=0,ve=1;ve<15;ve++)rt[ve+1]=rt[ve]+nt[ve];for(je=0;je<N;je++)A[M+je]!==0&&(te[rt[A[M+je]]++]=je);if(ge=R===0?(Ee=Jt=te,19):R===1?(Ee=g,mt-=257,Jt=c,er-=257,256):(Ee=T,Jt=P,-1),ve=H,ke=U,Be=je=xe=0,ne=-1,oe=(Ke=1<<(ye=vt))-1,R===1&&852<Ke||R===2&&592<Ke)return 1;for(;;){for(Fe=ve-Be,Ge=te[je]<ge?(Oe=0,te[je]):te[je]>ge?(Oe=Jt[er+te[je]],Ee[mt+te[je]]):(Oe=96,0),$=1<<ve-Be,H=q=1<<ye;Y[ke+(xe>>Be)+(q-=$)]=Fe<<24|Oe<<16|Ge|0,q!==0;);for($=1<<ve-1;xe&$;)$>>=1;if($!==0?(xe&=$-1,xe+=$):xe=0,je++,--nt[ve]==0){if(ve===Re)break;ve=A[M+te[je]]}if(vt<ve&&(xe&oe)!==ne){for(Be===0&&(Be=vt),ke+=H,Le=1<<(ye=ve-Be);ye+Be<Re&&!((Le-=nt[ye+Be])<=0);)ye++,Le<<=1;if(Ke+=1<<ye,R===1&&852<Ke||R===2&&592<Ke)return 1;Y[ne=xe&oe]=vt<<24|ye<<16|ke-U|0}}return xe!==0&&(Y[ke+xe]=ve-Be<<24|64<<16|0),O.bits=vt,0}},{"../utils/common":41}],51:[function(i,o,h){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,o,h){var f=i("../utils/common"),g=0,c=1;function T(se){for(var Te=se.length;0<=--Te;)se[Te]=0}var P=0,R=29,A=256,M=A+1+R,N=30,Y=19,U=2*M+1,te=15,O=16,$=7,q=256,ne=16,oe=17,ke=18,ge=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ge=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=new Array(2*(M+2));T(it);var ve=new Array(2*N);T(ve);var je=new Array(512);T(je);var H=new Array(256);T(H);var Re=new Array(R);T(Re);var vt,ye,Be,Le=new Array(N);function Ke(se,Te,Ze,tt,Ne){this.static_tree=se,this.extra_bits=Te,this.extra_base=Ze,this.elems=tt,this.max_length=Ne,this.has_stree=se&&se.length}function xe(se,Te){this.dyn_tree=se,this.max_code=0,this.stat_desc=Te}function Ee(se){return se<256?je[se]:je[256+(se>>>7)]}function mt(se,Te){se.pending_buf[se.pending++]=255&Te,se.pending_buf[se.pending++]=Te>>>8&255}function nt(se,Te,Ze){se.bi_valid>O-Ze?(se.bi_buf|=Te<<se.bi_valid&65535,mt(se,se.bi_buf),se.bi_buf=Te>>O-se.bi_valid,se.bi_valid+=Ze-O):(se.bi_buf|=Te<<se.bi_valid&65535,se.bi_valid+=Ze)}function rt(se,Te,Ze){nt(se,Ze[2*Te],Ze[2*Te+1])}function Jt(se,Te){for(var Ze=0;Ze|=1&se,se>>>=1,Ze<<=1,0<--Te;);return Ze>>>1}function er(se,Te,Ze){var tt,Ne,ot=new Array(te+1),kt=0;for(tt=1;tt<=te;tt++)ot[tt]=kt=kt+Ze[tt-1]<<1;for(Ne=0;Ne<=Te;Ne++){var at=se[2*Ne+1];at!==0&&(se[2*Ne]=Jt(ot[at]++,at))}}function Vt(se){var Te;for(Te=0;Te<M;Te++)se.dyn_ltree[2*Te]=0;for(Te=0;Te<N;Te++)se.dyn_dtree[2*Te]=0;for(Te=0;Te<Y;Te++)se.bl_tree[2*Te]=0;se.dyn_ltree[2*q]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function Yt(se){8<se.bi_valid?mt(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function _r(se,Te,Ze,tt){var Ne=2*Te,ot=2*Ze;return se[Ne]<se[ot]||se[Ne]===se[ot]&&tt[Te]<=tt[Ze]}function fr(se,Te,Ze){for(var tt=se.heap[Ze],Ne=Ze<<1;Ne<=se.heap_len&&(Ne<se.heap_len&&_r(Te,se.heap[Ne+1],se.heap[Ne],se.depth)&&Ne++,!_r(Te,tt,se.heap[Ne],se.depth));)se.heap[Ze]=se.heap[Ne],Ze=Ne,Ne<<=1;se.heap[Ze]=tt}function br(se,Te,Ze){var tt,Ne,ot,kt,at=0;if(se.last_lit!==0)for(;tt=se.pending_buf[se.d_buf+2*at]<<8|se.pending_buf[se.d_buf+2*at+1],Ne=se.pending_buf[se.l_buf+at],at++,tt===0?rt(se,Ne,Te):(rt(se,(ot=H[Ne])+A+1,Te),(kt=ge[ot])!==0&&nt(se,Ne-=Re[ot],kt),rt(se,ot=Ee(--tt),Ze),(kt=Fe[ot])!==0&&nt(se,tt-=Le[ot],kt)),at<se.last_lit;);rt(se,q,Te)}function Xr(se,Te){var Ze,tt,Ne,ot=Te.dyn_tree,kt=Te.stat_desc.static_tree,at=Te.stat_desc.has_stree,Bt=Te.stat_desc.elems,Tr=-1;for(se.heap_len=0,se.heap_max=U,Ze=0;Ze<Bt;Ze++)ot[2*Ze]!==0?(se.heap[++se.heap_len]=Tr=Ze,se.depth[Ze]=0):ot[2*Ze+1]=0;for(;se.heap_len<2;)ot[2*(Ne=se.heap[++se.heap_len]=Tr<2?++Tr:0)]=1,se.depth[Ne]=0,se.opt_len--,at&&(se.static_len-=kt[2*Ne+1]);for(Te.max_code=Tr,Ze=se.heap_len>>1;1<=Ze;Ze--)fr(se,ot,Ze);for(Ne=Bt;Ze=se.heap[1],se.heap[1]=se.heap[se.heap_len--],fr(se,ot,1),tt=se.heap[1],se.heap[--se.heap_max]=Ze,se.heap[--se.heap_max]=tt,ot[2*Ne]=ot[2*Ze]+ot[2*tt],se.depth[Ne]=(se.depth[Ze]>=se.depth[tt]?se.depth[Ze]:se.depth[tt])+1,ot[2*Ze+1]=ot[2*tt+1]=Ne,se.heap[1]=Ne++,fr(se,ot,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(qe,tn){var _n,vn,pi,Qe,Kt,jt,Kr=tn.dyn_tree,mi=tn.max_code,Xt=tn.stat_desc.static_tree,Yi=tn.stat_desc.has_stree,fs=tn.stat_desc.extra_bits,ps=tn.stat_desc.extra_base,Hn=tn.stat_desc.max_length,he=0;for(Qe=0;Qe<=te;Qe++)qe.bl_count[Qe]=0;for(Kr[2*qe.heap[qe.heap_max]+1]=0,_n=qe.heap_max+1;_n<U;_n++)Hn<(Qe=Kr[2*Kr[2*(vn=qe.heap[_n])+1]+1]+1)&&(Qe=Hn,he++),Kr[2*vn+1]=Qe,mi<vn||(qe.bl_count[Qe]++,Kt=0,ps<=vn&&(Kt=fs[vn-ps]),jt=Kr[2*vn],qe.opt_len+=jt*(Qe+Kt),Yi&&(qe.static_len+=jt*(Xt[2*vn+1]+Kt)));if(he!==0){do{for(Qe=Hn-1;qe.bl_count[Qe]===0;)Qe--;qe.bl_count[Qe]--,qe.bl_count[Qe+1]+=2,qe.bl_count[Hn]--,he-=2}while(0<he);for(Qe=Hn;Qe!==0;Qe--)for(vn=qe.bl_count[Qe];vn!==0;)mi<(pi=qe.heap[--_n])||(Kr[2*pi+1]!==Qe&&(qe.opt_len+=(Qe-Kr[2*pi+1])*Kr[2*pi],Kr[2*pi+1]=Qe),vn--)}}(se,Te),er(ot,Tr,se.bl_count)}function V(se,Te,Ze){var tt,Ne,ot=-1,kt=Te[1],at=0,Bt=7,Tr=4;for(kt===0&&(Bt=138,Tr=3),Te[2*(Ze+1)+1]=65535,tt=0;tt<=Ze;tt++)Ne=kt,kt=Te[2*(tt+1)+1],++at<Bt&&Ne===kt||(at<Tr?se.bl_tree[2*Ne]+=at:Ne!==0?(Ne!==ot&&se.bl_tree[2*Ne]++,se.bl_tree[2*ne]++):at<=10?se.bl_tree[2*oe]++:se.bl_tree[2*ke]++,ot=Ne,Tr=(at=0)===kt?(Bt=138,3):Ne===kt?(Bt=6,3):(Bt=7,4))}function Ue(se,Te,Ze){var tt,Ne,ot=-1,kt=Te[1],at=0,Bt=7,Tr=4;for(kt===0&&(Bt=138,Tr=3),tt=0;tt<=Ze;tt++)if(Ne=kt,kt=Te[2*(tt+1)+1],!(++at<Bt&&Ne===kt)){if(at<Tr)for(;rt(se,Ne,se.bl_tree),--at!=0;);else Ne!==0?(Ne!==ot&&(rt(se,Ne,se.bl_tree),at--),rt(se,ne,se.bl_tree),nt(se,at-3,2)):at<=10?(rt(se,oe,se.bl_tree),nt(se,at-3,3)):(rt(se,ke,se.bl_tree),nt(se,at-11,7));ot=Ne,Tr=(at=0)===kt?(Bt=138,3):Ne===kt?(Bt=6,3):(Bt=7,4)}}T(Le);var ie=!1;function de(se,Te,Ze,tt){nt(se,(P<<1)+(tt?1:0),3),function(Ne,ot,kt,at){Yt(Ne),mt(Ne,kt),mt(Ne,~kt),f.arraySet(Ne.pending_buf,Ne.window,ot,kt,Ne.pending),Ne.pending+=kt}(se,Te,Ze)}h._tr_init=function(se){ie||(function(){var Te,Ze,tt,Ne,ot,kt=new Array(te+1);for(Ne=tt=0;Ne<R-1;Ne++)for(Re[Ne]=tt,Te=0;Te<1<<ge[Ne];Te++)H[tt++]=Ne;for(H[tt-1]=Ne,Ne=ot=0;Ne<16;Ne++)for(Le[Ne]=ot,Te=0;Te<1<<Fe[Ne];Te++)je[ot++]=Ne;for(ot>>=7;Ne<N;Ne++)for(Le[Ne]=ot<<7,Te=0;Te<1<<Fe[Ne]-7;Te++)je[256+ot++]=Ne;for(Ze=0;Ze<=te;Ze++)kt[Ze]=0;for(Te=0;Te<=143;)it[2*Te+1]=8,Te++,kt[8]++;for(;Te<=255;)it[2*Te+1]=9,Te++,kt[9]++;for(;Te<=279;)it[2*Te+1]=7,Te++,kt[7]++;for(;Te<=287;)it[2*Te+1]=8,Te++,kt[8]++;for(er(it,M+1,kt),Te=0;Te<N;Te++)ve[2*Te+1]=5,ve[2*Te]=Jt(Te,5);vt=new Ke(it,ge,A+1,M,te),ye=new Ke(ve,Fe,0,N,te),Be=new Ke(new Array(0),Oe,0,Y,$)}(),ie=!0),se.l_desc=new xe(se.dyn_ltree,vt),se.d_desc=new xe(se.dyn_dtree,ye),se.bl_desc=new xe(se.bl_tree,Be),se.bi_buf=0,se.bi_valid=0,Vt(se)},h._tr_stored_block=de,h._tr_flush_block=function(se,Te,Ze,tt){var Ne,ot,kt=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(at){var Bt,Tr=4093624447;for(Bt=0;Bt<=31;Bt++,Tr>>>=1)if(1&Tr&&at.dyn_ltree[2*Bt]!==0)return g;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return c;for(Bt=32;Bt<A;Bt++)if(at.dyn_ltree[2*Bt]!==0)return c;return g}(se)),Xr(se,se.l_desc),Xr(se,se.d_desc),kt=function(at){var Bt;for(V(at,at.dyn_ltree,at.l_desc.max_code),V(at,at.dyn_dtree,at.d_desc.max_code),Xr(at,at.bl_desc),Bt=Y-1;3<=Bt&&at.bl_tree[2*Ge[Bt]+1]===0;Bt--);return at.opt_len+=3*(Bt+1)+5+5+4,Bt}(se),Ne=se.opt_len+3+7>>>3,(ot=se.static_len+3+7>>>3)<=Ne&&(Ne=ot)):Ne=ot=Ze+5,Ze+4<=Ne&&Te!==-1?de(se,Te,Ze,tt):se.strategy===4||ot===Ne?(nt(se,2+(tt?1:0),3),br(se,it,ve)):(nt(se,4+(tt?1:0),3),function(at,Bt,Tr,qe){var tn;for(nt(at,Bt-257,5),nt(at,Tr-1,5),nt(at,qe-4,4),tn=0;tn<qe;tn++)nt(at,at.bl_tree[2*Ge[tn]+1],3);Ue(at,at.dyn_ltree,Bt-1),Ue(at,at.dyn_dtree,Tr-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,kt+1),br(se,se.dyn_ltree,se.dyn_dtree)),Vt(se),tt&&Yt(se)},h._tr_tally=function(se,Te,Ze){return se.pending_buf[se.d_buf+2*se.last_lit]=Te>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&Te,se.pending_buf[se.l_buf+se.last_lit]=255&Ze,se.last_lit++,Te===0?se.dyn_ltree[2*Ze]++:(se.matches++,Te--,se.dyn_ltree[2*(H[Ze]+A+1)]++,se.dyn_dtree[2*Ee(Te)]++),se.last_lit===se.lit_bufsize-1},h._tr_align=function(se){nt(se,2,3),rt(se,q,it),function(Te){Te.bi_valid===16?(mt(Te,Te.bi_buf),Te.bi_buf=0,Te.bi_valid=0):8<=Te.bi_valid&&(Te.pending_buf[Te.pending++]=255&Te.bi_buf,Te.bi_buf>>=8,Te.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(i,o,h){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,o,h){(function(f){(function(g,c){if(!g.setImmediate){var T,P,R,A,M=1,N={},Y=!1,U=g.document,te=Object.getPrototypeOf&&Object.getPrototypeOf(g);te=te&&te.setTimeout?te:g,T={}.toString.call(g.process)==="[object process]"?function(ne){process.nextTick(function(){$(ne)})}:function(){if(g.postMessage&&!g.importScripts){var ne=!0,oe=g.onmessage;return g.onmessage=function(){ne=!1},g.postMessage("","*"),g.onmessage=oe,ne}}()?(A="setImmediate$"+Math.random()+"$",g.addEventListener?g.addEventListener("message",q,!1):g.attachEvent("onmessage",q),function(ne){g.postMessage(A+ne,"*")}):g.MessageChannel?((R=new MessageChannel).port1.onmessage=function(ne){$(ne.data)},function(ne){R.port2.postMessage(ne)}):U&&"onreadystatechange"in U.createElement("script")?(P=U.documentElement,function(ne){var oe=U.createElement("script");oe.onreadystatechange=function(){$(ne),oe.onreadystatechange=null,P.removeChild(oe),oe=null},P.appendChild(oe)}):function(ne){setTimeout($,0,ne)},te.setImmediate=function(ne){typeof ne!="function"&&(ne=new Function(""+ne));for(var oe=new Array(arguments.length-1),ke=0;ke<oe.length;ke++)oe[ke]=arguments[ke+1];var ge={callback:ne,args:oe};return N[M]=ge,T(M),M++},te.clearImmediate=O}function O(ne){delete N[ne]}function $(ne){if(Y)setTimeout($,0,ne);else{var oe=N[ne];if(oe){Y=!0;try{(function(ke){var ge=ke.callback,Fe=ke.args;switch(Fe.length){case 0:ge();break;case 1:ge(Fe[0]);break;case 2:ge(Fe[0],Fe[1]);break;case 3:ge(Fe[0],Fe[1],Fe[2]);break;default:ge.apply(c,Fe)}})(oe)}finally{O(ne),Y=!1}}}}function q(ne){ne.source===g&&typeof ne.data=="string"&&ne.data.indexOf(A)===0&&$(+ne.data.slice(A.length))}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(FI);var Q5=FI.exports;const eL=dp(Q5);var $1=function(e,t){return $1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h])},$1(e,t)};function no(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$1(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var Ft=function(){return Ft=Object.assign||function(t){for(var i,o=1,h=arguments.length;o<h;o++){i=arguments[o];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},Ft.apply(this,arguments)};function Rh(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,o=Object.getOwnPropertySymbols(e);h<o.length;h++)t.indexOf(o[h])<0&&Object.prototype.propertyIsEnumerable.call(e,o[h])&&(i[o[h]]=e[o[h]]);return i}function Ui(e,t,i){if(i||arguments.length===2)for(var o=0,h=t.length,f;o<h;o++)(f||!(o in t))&&(f||(f=Array.prototype.slice.call(t,0,o)),f[o]=t[o]);return e.concat(f||Array.prototype.slice.call(t))}function $i(e,t){var i=t&&t.cache?t.cache:oL,o=t&&t.serializer?t.serializer:sL,h=t&&t.strategy?t.strategy:rL;return h(e,{cache:i,serializer:o})}function tL(e){return e==null||typeof e=="number"||typeof e=="boolean"}function BI(e,t,i,o){var h=tL(o)?o:i(o),f=t.get(h);return typeof f>"u"&&(f=e.call(this,o),t.set(h,f)),f}function NI(e,t,i){var o=Array.prototype.slice.call(arguments,3),h=i(o),f=t.get(h);return typeof f>"u"&&(f=e.apply(this,o),t.set(h,f)),f}function vw(e,t,i,o,h){return i.bind(t,e,o,h)}function rL(e,t){var i=e.length===1?BI:NI;return vw(e,this,i,t.cache.create(),t.serializer)}function nL(e,t){return vw(e,this,NI,t.cache.create(),t.serializer)}function iL(e,t){return vw(e,this,BI,t.cache.create(),t.serializer)}var sL=function(){return JSON.stringify(arguments)};function xw(){this.cache=Object.create(null)}xw.prototype.get=function(e){return this.cache[e]};xw.prototype.set=function(e,t){this.cache[e]=t};var oL={create:function(){return new xw}},ji={variadic:nL,monadic:iL};function $I(e,t,i){if(i===void 0&&(i=Error),!e)throw new i(t)}$i(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,Ui([void 0],t,!1)))},{strategy:ji.variadic});$i(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,Ui([void 0],t,!1)))},{strategy:ji.variadic});$i(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,Ui([void 0],t,!1)))},{strategy:ji.variadic});$i(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.Locale).bind.apply(e,Ui([void 0],t,!1)))},{strategy:ji.variadic});$i(function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.ListFormat).bind.apply(e,Ui([void 0],t,!1)))},{strategy:ji.variadic});var kr;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(kr||(kr={}));var an;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(an||(an={}));var Lh;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(Lh||(Lh={}));function Mk(e){return e.type===an.literal}function aL(e){return e.type===an.argument}function jI(e){return e.type===an.number}function UI(e){return e.type===an.date}function VI(e){return e.type===an.time}function HI(e){return e.type===an.select}function WI(e){return e.type===an.plural}function lL(e){return e.type===an.pound}function GI(e){return e.type===an.tag}function ZI(e){return!!(e&&typeof e=="object"&&e.type===Lh.number)}function j1(e){return!!(e&&typeof e=="object"&&e.type===Lh.dateTime)}var qI=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,uL=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function cL(e){var t={};return e.replace(uL,function(i){var o=i.length;switch(i[0]){case"G":t.era=o===4?"long":o===5?"narrow":"short";break;case"y":t.year=o===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][o-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][o-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=o===4?"long":o===5?"narrow":"short";break;case"e":if(o<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][o-4];break;case"c":if(o<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][o-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][o-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][o-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][o-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][o-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][o-1];break;case"s":t.second=["numeric","2-digit"][o-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=o<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var hL=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function dL(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var t=e.split(hL).filter(function(M){return M.length>0}),i=[],o=0,h=t;o<h.length;o++){var f=h[o],g=f.split("/");if(g.length===0)throw new Error("Invalid number skeleton");for(var c=g[0],T=g.slice(1),P=0,R=T;P<R.length;P++){var A=R[P];if(A.length===0)throw new Error("Invalid number skeleton")}i.push({stem:c,options:T})}return i}function fL(e){return e.replace(/^(.*?)-/,"")}var Ak=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,YI=/^(@+)?(\+|#+)?[rs]?$/g,pL=/(\*)(0+)|(#+)(0+)|(0+)/g,XI=/^(0+)$/;function Dk(e){var t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(YI,function(i,o,h){return typeof h!="string"?(t.minimumSignificantDigits=o.length,t.maximumSignificantDigits=o.length):h==="+"?t.minimumSignificantDigits=o.length:o[0]==="#"?t.maximumSignificantDigits=o.length:(t.minimumSignificantDigits=o.length,t.maximumSignificantDigits=o.length+(typeof h=="string"?h.length:0)),""}),t}function KI(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function mL(e){var t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){var i=e.slice(0,2);if(i==="+!"?(t.signDisplay="always",e=e.slice(2)):i==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!XI.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function zk(e){var t={},i=KI(e);return i||t}function gL(e){for(var t={},i=0,o=e;i<o.length;i++){var h=o[i];switch(h.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=h.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=fL(h.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=Ft(Ft(Ft({},t),{notation:"scientific"}),h.options.reduce(function(T,P){return Ft(Ft({},T),zk(P))},{}));continue;case"engineering":t=Ft(Ft(Ft({},t),{notation:"engineering"}),h.options.reduce(function(T,P){return Ft(Ft({},T),zk(P))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(h.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(h.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");h.options[0].replace(pL,function(T,P,R,A,M,N){if(P)t.minimumIntegerDigits=R.length;else{if(A&&M)throw new Error("We currently do not support maximum integer digits");if(N)throw new Error("We currently do not support exact integer digits")}return""});continue}if(XI.test(h.stem)){t.minimumIntegerDigits=h.stem.length;continue}if(Ak.test(h.stem)){if(h.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");h.stem.replace(Ak,function(T,P,R,A,M,N){return R==="*"?t.minimumFractionDigits=P.length:A&&A[0]==="#"?t.maximumFractionDigits=A.length:M&&N?(t.minimumFractionDigits=M.length,t.maximumFractionDigits=M.length+N.length):(t.minimumFractionDigits=P.length,t.maximumFractionDigits=P.length),""});var f=h.options[0];f==="w"?t=Ft(Ft({},t),{trailingZeroDisplay:"stripIfInteger"}):f&&(t=Ft(Ft({},t),Dk(f)));continue}if(YI.test(h.stem)){t=Ft(Ft({},t),Dk(h.stem));continue}var g=KI(h.stem);g&&(t=Ft(Ft({},t),g));var c=mL(h.stem);c&&(t=Ft(Ft({},t),c))}return t}var Jm={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function yL(e,t){for(var i="",o=0;o<e.length;o++){var h=e.charAt(o);if(h==="j"){for(var f=0;o+1<e.length&&e.charAt(o+1)===h;)f++,o++;var g=1+(f&1),c=f<2?1:3+(f>>1),T="a",P=_L(t);for((P=="H"||P=="k")&&(c=0);c-- >0;)i+=T;for(;g-- >0;)i=P+i}else h==="J"?i+="H":i+=h}return i}function _L(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var i=e.language,o;i!=="root"&&(o=e.maximize().region);var h=Jm[o||""]||Jm[i||""]||Jm["".concat(i,"-001")]||Jm["001"];return h[0]}var wv,vL=new RegExp("^".concat(qI.source,"*")),xL=new RegExp("".concat(qI.source,"*$"));function Cr(e,t){return{start:e,end:t}}var wL=!!String.prototype.startsWith&&"_a".startsWith("a",1),bL=!!String.fromCodePoint,SL=!!Object.fromEntries,kL=!!String.prototype.codePointAt,TL=!!String.prototype.trimStart,EL=!!String.prototype.trimEnd,CL=!!Number.isSafeInteger,IL=CL?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},U1=!0;try{var PL=QI("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");U1=((wv=PL.exec("a"))===null||wv===void 0?void 0:wv[0])==="a"}catch{U1=!1}var Rk=wL?function(t,i,o){return t.startsWith(i,o)}:function(t,i,o){return t.slice(o,o+i.length)===i},V1=bL?String.fromCodePoint:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var o="",h=t.length,f=0,g;h>f;){if(g=t[f++],g>1114111)throw RangeError(g+" is not a valid code point");o+=g<65536?String.fromCharCode(g):String.fromCharCode(((g-=65536)>>10)+55296,g%1024+56320)}return o},Lk=SL?Object.fromEntries:function(t){for(var i={},o=0,h=t;o<h.length;o++){var f=h[o],g=f[0],c=f[1];i[g]=c}return i},JI=kL?function(t,i){return t.codePointAt(i)}:function(t,i){var o=t.length;if(!(i<0||i>=o)){var h=t.charCodeAt(i),f;return h<55296||h>56319||i+1===o||(f=t.charCodeAt(i+1))<56320||f>57343?h:(h-55296<<10)+(f-56320)+65536}},ML=TL?function(t){return t.trimStart()}:function(t){return t.replace(vL,"")},AL=EL?function(t){return t.trimEnd()}:function(t){return t.replace(xL,"")};function QI(e,t){return new RegExp(e,t)}var H1;if(U1){var Ok=QI("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");H1=function(t,i){var o;Ok.lastIndex=i;var h=Ok.exec(t);return(o=h[1])!==null&&o!==void 0?o:""}}else H1=function(t,i){for(var o=[];;){var h=JI(t,i);if(h===void 0||eP(h)||LL(h))break;o.push(h),i+=h>=65536?2:1}return V1.apply(void 0,o)};var DL=function(){function e(t,i){i===void 0&&(i={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!i.ignoreTag,this.locale=i.locale,this.requiresOtherClause=!!i.requiresOtherClause,this.shouldParseSkeletons=!!i.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(t,i,o){for(var h=[];!this.isEOF();){var f=this.char();if(f===123){var g=this.parseArgument(t,o);if(g.err)return g;h.push(g.val)}else{if(f===125&&t>0)break;if(f===35&&(i==="plural"||i==="selectordinal")){var c=this.clonePosition();this.bump(),h.push({type:an.pound,location:Cr(c,this.clonePosition())})}else if(f===60&&!this.ignoreTag&&this.peek()===47){if(o)break;return this.error(kr.UNMATCHED_CLOSING_TAG,Cr(this.clonePosition(),this.clonePosition()))}else if(f===60&&!this.ignoreTag&&W1(this.peek()||0)){var g=this.parseTag(t,i);if(g.err)return g;h.push(g.val)}else{var g=this.parseLiteral(t,i);if(g.err)return g;h.push(g.val)}}}return{val:h,err:null}},e.prototype.parseTag=function(t,i){var o=this.clonePosition();this.bump();var h=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:an.literal,value:"<".concat(h,"/>"),location:Cr(o,this.clonePosition())},err:null};if(this.bumpIf(">")){var f=this.parseMessage(t+1,i,!0);if(f.err)return f;var g=f.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!W1(this.char()))return this.error(kr.INVALID_TAG,Cr(c,this.clonePosition()));var T=this.clonePosition(),P=this.parseTagName();return h!==P?this.error(kr.UNMATCHED_CLOSING_TAG,Cr(T,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:an.tag,value:h,children:g,location:Cr(o,this.clonePosition())},err:null}:this.error(kr.INVALID_TAG,Cr(c,this.clonePosition())))}else return this.error(kr.UNCLOSED_TAG,Cr(o,this.clonePosition()))}else return this.error(kr.INVALID_TAG,Cr(o,this.clonePosition()))},e.prototype.parseTagName=function(){var t=this.offset();for(this.bump();!this.isEOF()&&RL(this.char());)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(t,i){for(var o=this.clonePosition(),h="";;){var f=this.tryParseQuote(i);if(f){h+=f;continue}var g=this.tryParseUnquoted(t,i);if(g){h+=g;continue}var c=this.tryParseLeftAngleBracket();if(c){h+=c;continue}break}var T=Cr(o,this.clonePosition());return{val:{type:an.literal,value:h,location:T},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!zL(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();var i=[this.char()];for(this.bump();!this.isEOF();){var o=this.char();if(o===39)if(this.peek()===39)i.push(39),this.bump();else{this.bump();break}else i.push(o);this.bump()}return V1.apply(void 0,i)},e.prototype.tryParseUnquoted=function(t,i){if(this.isEOF())return null;var o=this.char();return o===60||o===123||o===35&&(i==="plural"||i==="selectordinal")||o===125&&t>0?null:(this.bump(),V1(o))},e.prototype.parseArgument=function(t,i){var o=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(kr.EXPECT_ARGUMENT_CLOSING_BRACE,Cr(o,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(kr.EMPTY_ARGUMENT,Cr(o,this.clonePosition()));var h=this.parseIdentifierIfPossible().value;if(!h)return this.error(kr.MALFORMED_ARGUMENT,Cr(o,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(kr.EXPECT_ARGUMENT_CLOSING_BRACE,Cr(o,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:an.argument,value:h,location:Cr(o,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(kr.EXPECT_ARGUMENT_CLOSING_BRACE,Cr(o,this.clonePosition())):this.parseArgumentOptions(t,i,h,o);default:return this.error(kr.MALFORMED_ARGUMENT,Cr(o,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),i=this.offset(),o=H1(this.message,i),h=i+o.length;this.bumpTo(h);var f=this.clonePosition(),g=Cr(t,f);return{value:o,location:g}},e.prototype.parseArgumentOptions=function(t,i,o,h){var f,g=this.clonePosition(),c=this.parseIdentifierIfPossible().value,T=this.clonePosition();switch(c){case"":return this.error(kr.EXPECT_ARGUMENT_TYPE,Cr(g,T));case"number":case"date":case"time":{this.bumpSpace();var P=null;if(this.bumpIf(",")){this.bumpSpace();var R=this.clonePosition(),A=this.parseSimpleArgStyleIfPossible();if(A.err)return A;var M=AL(A.val);if(M.length===0)return this.error(kr.EXPECT_ARGUMENT_STYLE,Cr(this.clonePosition(),this.clonePosition()));var N=Cr(R,this.clonePosition());P={style:M,styleLocation:N}}var Y=this.tryParseArgumentClose(h);if(Y.err)return Y;var U=Cr(h,this.clonePosition());if(P&&Rk(P==null?void 0:P.style,"::",0)){var te=ML(P.style.slice(2));if(c==="number"){var A=this.parseNumberSkeletonFromString(te,P.styleLocation);return A.err?A:{val:{type:an.number,value:o,location:U,style:A.val},err:null}}else{if(te.length===0)return this.error(kr.EXPECT_DATE_TIME_SKELETON,U);var O=te;this.locale&&(O=yL(te,this.locale));var M={type:Lh.dateTime,pattern:O,location:P.styleLocation,parsedOptions:this.shouldParseSkeletons?cL(O):{}},$=c==="date"?an.date:an.time;return{val:{type:$,value:o,location:U,style:M},err:null}}}return{val:{type:c==="number"?an.number:c==="date"?an.date:an.time,value:o,location:U,style:(f=P==null?void 0:P.style)!==null&&f!==void 0?f:null},err:null}}case"plural":case"selectordinal":case"select":{var q=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(kr.EXPECT_SELECT_ARGUMENT_OPTIONS,Cr(q,Ft({},q)));this.bumpSpace();var ne=this.parseIdentifierIfPossible(),oe=0;if(c!=="select"&&ne.value==="offset"){if(!this.bumpIf(":"))return this.error(kr.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Cr(this.clonePosition(),this.clonePosition()));this.bumpSpace();var A=this.tryParseDecimalInteger(kr.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,kr.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(A.err)return A;this.bumpSpace(),ne=this.parseIdentifierIfPossible(),oe=A.val}var ke=this.tryParsePluralOrSelectOptions(t,c,i,ne);if(ke.err)return ke;var Y=this.tryParseArgumentClose(h);if(Y.err)return Y;var ge=Cr(h,this.clonePosition());return c==="select"?{val:{type:an.select,value:o,options:Lk(ke.val),location:ge},err:null}:{val:{type:an.plural,value:o,options:Lk(ke.val),offset:oe,pluralType:c==="plural"?"cardinal":"ordinal",location:ge},err:null}}default:return this.error(kr.INVALID_ARGUMENT_TYPE,Cr(g,T))}},e.prototype.tryParseArgumentClose=function(t){return this.isEOF()||this.char()!==125?this.error(kr.EXPECT_ARGUMENT_CLOSING_BRACE,Cr(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,i=this.clonePosition();!this.isEOF();){var o=this.char();switch(o){case 39:{this.bump();var h=this.clonePosition();if(!this.bumpUntil("'"))return this.error(kr.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Cr(h,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(i.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(i.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(t,i){var o=[];try{o=dL(t)}catch{return this.error(kr.INVALID_NUMBER_SKELETON,i)}return{val:{type:Lh.number,tokens:o,location:i,parsedOptions:this.shouldParseSkeletons?gL(o):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(t,i,o,h){for(var f,g=!1,c=[],T=new Set,P=h.value,R=h.location;;){if(P.length===0){var A=this.clonePosition();if(i!=="select"&&this.bumpIf("=")){var M=this.tryParseDecimalInteger(kr.EXPECT_PLURAL_ARGUMENT_SELECTOR,kr.INVALID_PLURAL_ARGUMENT_SELECTOR);if(M.err)return M;R=Cr(A,this.clonePosition()),P=this.message.slice(A.offset,this.offset())}else break}if(T.has(P))return this.error(i==="select"?kr.DUPLICATE_SELECT_ARGUMENT_SELECTOR:kr.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,R);P==="other"&&(g=!0),this.bumpSpace();var N=this.clonePosition();if(!this.bumpIf("{"))return this.error(i==="select"?kr.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:kr.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Cr(this.clonePosition(),this.clonePosition()));var Y=this.parseMessage(t+1,i,o);if(Y.err)return Y;var U=this.tryParseArgumentClose(N);if(U.err)return U;c.push([P,{value:Y.val,location:Cr(N,this.clonePosition())}]),T.add(P),this.bumpSpace(),f=this.parseIdentifierIfPossible(),P=f.value,R=f.location}return c.length===0?this.error(i==="select"?kr.EXPECT_SELECT_ARGUMENT_SELECTOR:kr.EXPECT_PLURAL_ARGUMENT_SELECTOR,Cr(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!g?this.error(kr.MISSING_OTHER_CLAUSE,Cr(this.clonePosition(),this.clonePosition())):{val:c,err:null}},e.prototype.tryParseDecimalInteger=function(t,i){var o=1,h=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(o=-1);for(var f=!1,g=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)f=!0,g=g*10+(c-48),this.bump();else break}var T=Cr(h,this.clonePosition());return f?(g*=o,IL(g)?{val:g,err:null}:this.error(i,T)):this.error(t,T)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var i=JI(this.message,t);if(i===void 0)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return i},e.prototype.error=function(t,i){return{val:null,err:{kind:t,message:this.message,location:i}}},e.prototype.bump=function(){if(!this.isEOF()){var t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},e.prototype.bumpIf=function(t){if(Rk(this.message,t,this.offset())){for(var i=0;i<t.length;i++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(t){var i=this.offset(),o=this.message.indexOf(t,i);return o>=0?(this.bumpTo(o),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var i=this.offset();if(i===t)break;if(i>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&eP(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),i=this.offset(),o=this.message.charCodeAt(i+(t>=65536?2:1));return o??null},e}();function W1(e){return e>=97&&e<=122||e>=65&&e<=90}function zL(e){return W1(e)||e===47}function RL(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function eP(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function LL(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function G1(e){e.forEach(function(t){if(delete t.location,HI(t)||WI(t))for(var i in t.options)delete t.options[i].location,G1(t.options[i].value);else jI(t)&&ZI(t.style)||(UI(t)||VI(t))&&j1(t.style)?delete t.style.location:GI(t)&&G1(t.children)})}function OL(e,t){t===void 0&&(t={}),t=Ft({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var i=new DL(e,t).parse();if(i.err){var o=SyntaxError(kr[i.err.kind]);throw o.location=i.err.location,o.originalMessage=i.err.message,o}return t!=null&&t.captureLocation||G1(i.val),i.val}var Zo;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(Zo||(Zo={}));var Gl=function(e){no(t,e);function t(i,o,h){var f=e.call(this,i)||this;return f.code=o,f.originalMessage=h,f}return t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),Fk=function(e){no(t,e);function t(i,o,h,f){return e.call(this,'Invalid values for "'.concat(i,'": "').concat(o,'". Options are "').concat(Object.keys(h).join('", "'),'"'),Zo.INVALID_VALUE,f)||this}return t}(Gl),FL=function(e){no(t,e);function t(i,o,h){return e.call(this,'Value for "'.concat(i,'" must be of type ').concat(o),Zo.INVALID_VALUE,h)||this}return t}(Gl),BL=function(e){no(t,e);function t(i,o){return e.call(this,'The intl string context variable "'.concat(i,'" was not provided to the string "').concat(o,'"'),Zo.MISSING_VALUE,o)||this}return t}(Gl),Bi;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(Bi||(Bi={}));function NL(e){return e.length<2?e:e.reduce(function(t,i){var o=t[t.length-1];return!o||o.type!==Bi.literal||i.type!==Bi.literal?t.push(i):o.value+=i.value,t},[])}function tP(e){return typeof e=="function"}function kg(e,t,i,o,h,f,g){if(e.length===1&&Mk(e[0]))return[{type:Bi.literal,value:e[0].value}];for(var c=[],T=0,P=e;T<P.length;T++){var R=P[T];if(Mk(R)){c.push({type:Bi.literal,value:R.value});continue}if(lL(R)){typeof f=="number"&&c.push({type:Bi.literal,value:i.getNumberFormat(t).format(f)});continue}var A=R.value;if(!(h&&A in h))throw new BL(A,g);var M=h[A];if(aL(R)){(!M||typeof M=="string"||typeof M=="number")&&(M=typeof M=="string"||typeof M=="number"?String(M):""),c.push({type:typeof M=="string"?Bi.literal:Bi.object,value:M});continue}if(UI(R)){var N=typeof R.style=="string"?o.date[R.style]:j1(R.style)?R.style.parsedOptions:void 0;c.push({type:Bi.literal,value:i.getDateTimeFormat(t,N).format(M)});continue}if(VI(R)){var N=typeof R.style=="string"?o.time[R.style]:j1(R.style)?R.style.parsedOptions:o.time.medium;c.push({type:Bi.literal,value:i.getDateTimeFormat(t,N).format(M)});continue}if(jI(R)){var N=typeof R.style=="string"?o.number[R.style]:ZI(R.style)?R.style.parsedOptions:void 0;N&&N.scale&&(M=M*(N.scale||1)),c.push({type:Bi.literal,value:i.getNumberFormat(t,N).format(M)});continue}if(GI(R)){var Y=R.children,U=R.value,te=h[U];if(!tP(te))throw new FL(U,"function",g);var O=kg(Y,t,i,o,h,f),$=te(O.map(function(oe){return oe.value}));Array.isArray($)||($=[$]),c.push.apply(c,$.map(function(oe){return{type:typeof oe=="string"?Bi.literal:Bi.object,value:oe}}))}if(HI(R)){var q=R.options[M]||R.options.other;if(!q)throw new Fk(R.value,M,Object.keys(R.options),g);c.push.apply(c,kg(q.value,t,i,o,h));continue}if(WI(R)){var q=R.options["=".concat(M)];if(!q){if(!Intl.PluralRules)throw new Gl(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Zo.MISSING_INTL_API,g);var ne=i.getPluralRules(t,{type:R.pluralType}).select(M-(R.offset||0));q=R.options[ne]||R.options.other}if(!q)throw new Fk(R.value,M,Object.keys(R.options),g);c.push.apply(c,kg(q.value,t,i,o,h,M-(R.offset||0)));continue}}return NL(c)}function $L(e,t){return t?Ft(Ft(Ft({},e||{}),t||{}),Object.keys(e).reduce(function(i,o){return i[o]=Ft(Ft({},e[o]),t[o]||{}),i},{})):e}function jL(e,t){return t?Object.keys(e).reduce(function(i,o){return i[o]=$L(e[o],t[o]),i},Ft({},e)):e}function bv(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,i){e[t]=i}}}}}function UL(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:$i(function(){for(var t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new((t=Intl.NumberFormat).bind.apply(t,Ui([void 0],i,!1)))},{cache:bv(e.number),strategy:ji.variadic}),getDateTimeFormat:$i(function(){for(var t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new((t=Intl.DateTimeFormat).bind.apply(t,Ui([void 0],i,!1)))},{cache:bv(e.dateTime),strategy:ji.variadic}),getPluralRules:$i(function(){for(var t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new((t=Intl.PluralRules).bind.apply(t,Ui([void 0],i,!1)))},{cache:bv(e.pluralRules),strategy:ji.variadic})}}var rP=function(){function e(t,i,o,h){i===void 0&&(i=e.defaultLocale);var f=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(T){var P=f.formatToParts(T);if(P.length===1)return P[0].value;var R=P.reduce(function(A,M){return!A.length||M.type!==Bi.literal||typeof A[A.length-1]!="string"?A.push(M.value):A[A.length-1]+=M.value,A},[]);return R.length<=1?R[0]||"":R},this.formatToParts=function(T){return kg(f.ast,f.locales,f.formatters,f.formats,T,void 0,f.message)},this.resolvedOptions=function(){var T;return{locale:((T=f.resolvedLocale)===null||T===void 0?void 0:T.toString())||Intl.NumberFormat.supportedLocalesOf(f.locales)[0]}},this.getAst=function(){return f.ast},this.locales=i,this.resolvedLocale=e.resolveLocale(i),typeof t=="string"){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var g=h||{};g.formatters;var c=Rh(g,["formatters"]);this.ast=e.__parse(t,Ft(Ft({},c),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=jL(e.formats,o),this.formatters=h&&h.formatters||UL(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(t){if(!(typeof Intl.Locale>"u")){var i=Intl.NumberFormat.supportedLocalesOf(t);return i.length>0?new Intl.Locale(i[0]):new Intl.Locale(typeof t=="string"?t:t[0])}},e.__parse=OL,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),Zu;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(Zu||(Zu={}));var wp=function(e){no(t,e);function t(i,o,h){var f=this,g=h?h instanceof Error?h:new Error(String(h)):void 0;return f=e.call(this,"[@formatjs/intl Error ".concat(i,"] ").concat(o,`
`).concat(g?`
`.concat(g.message,`
`).concat(g.stack):""))||this,f.code=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(f,t),f}return t}(Error),VL=function(e){no(t,e);function t(i,o){return e.call(this,Zu.UNSUPPORTED_FORMATTER,i,o)||this}return t}(wp),HL=function(e){no(t,e);function t(i,o){return e.call(this,Zu.INVALID_CONFIG,i,o)||this}return t}(wp),Bk=function(e){no(t,e);function t(i,o){return e.call(this,Zu.MISSING_DATA,i,o)||this}return t}(wp),io=function(e){no(t,e);function t(i,o,h){var f=e.call(this,Zu.FORMAT_ERROR,"".concat(i,`
Locale: `).concat(o,`
`),h)||this;return f.locale=o,f}return t}(wp),Sv=function(e){no(t,e);function t(i,o,h,f){var g=e.call(this,"".concat(i,`
MessageID: `).concat(h==null?void 0:h.id,`
Default Message: `).concat(h==null?void 0:h.defaultMessage,`
Description: `).concat(h==null?void 0:h.description,`
`),o,f)||this;return g.descriptor=h,g.locale=o,g}return t}(io),WL=function(e){no(t,e);function t(i,o){var h=e.call(this,Zu.MISSING_TRANSLATION,'Missing message: "'.concat(i.id,'" for locale "').concat(o,'", using ').concat(i.defaultMessage?"default message (".concat(typeof i.defaultMessage=="string"?i.defaultMessage:i.defaultMessage.map(function(f){var g;return(g=f.value)!==null&&g!==void 0?g:JSON.stringify(f)}).join(),")"):"id"," as fallback."))||this;return h.descriptor=i,h}return t}(wp);function Ku(e,t,i){return i===void 0&&(i={}),t.reduce(function(o,h){return h in e?o[h]=e[h]:h in i&&(o[h]=i[h]),o},{})}var GL=function(e){},ZL=function(e){},nP={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:GL,onWarn:ZL};function iP(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function vu(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,i){e[t]=i}}}}}function qL(e){e===void 0&&(e=iP());var t=Intl.RelativeTimeFormat,i=Intl.ListFormat,o=Intl.DisplayNames,h=$i(function(){for(var c,T=[],P=0;P<arguments.length;P++)T[P]=arguments[P];return new((c=Intl.DateTimeFormat).bind.apply(c,Ui([void 0],T,!1)))},{cache:vu(e.dateTime),strategy:ji.variadic}),f=$i(function(){for(var c,T=[],P=0;P<arguments.length;P++)T[P]=arguments[P];return new((c=Intl.NumberFormat).bind.apply(c,Ui([void 0],T,!1)))},{cache:vu(e.number),strategy:ji.variadic}),g=$i(function(){for(var c,T=[],P=0;P<arguments.length;P++)T[P]=arguments[P];return new((c=Intl.PluralRules).bind.apply(c,Ui([void 0],T,!1)))},{cache:vu(e.pluralRules),strategy:ji.variadic});return{getDateTimeFormat:h,getNumberFormat:f,getMessageFormat:$i(function(c,T,P,R){return new rP(c,T,P,Ft({formatters:{getNumberFormat:f,getDateTimeFormat:h,getPluralRules:g}},R||{}))},{cache:vu(e.message),strategy:ji.variadic}),getRelativeTimeFormat:$i(function(){for(var c=[],T=0;T<arguments.length;T++)c[T]=arguments[T];return new(t.bind.apply(t,Ui([void 0],c,!1)))},{cache:vu(e.relativeTime),strategy:ji.variadic}),getPluralRules:g,getListFormat:$i(function(){for(var c=[],T=0;T<arguments.length;T++)c[T]=arguments[T];return new(i.bind.apply(i,Ui([void 0],c,!1)))},{cache:vu(e.list),strategy:ji.variadic}),getDisplayNames:$i(function(){for(var c=[],T=0;T<arguments.length;T++)c[T]=arguments[T];return new(o.bind.apply(o,Ui([void 0],c,!1)))},{cache:vu(e.displayNames),strategy:ji.variadic})}}function ww(e,t,i,o){var h=e&&e[t],f;if(h&&(f=h[i]),f)return f;o(new VL("No ".concat(t," format named: ").concat(i)))}function Qm(e,t){return Object.keys(e).reduce(function(i,o){return i[o]=Ft({timeZone:t},e[o]),i},{})}function Nk(e,t){var i=Object.keys(Ft(Ft({},e),t));return i.reduce(function(o,h){return o[h]=Ft(Ft({},e[h]||{}),t[h]||{}),o},{})}function $k(e,t){if(!t)return e;var i=rP.formats;return Ft(Ft(Ft({},i),e),{date:Nk(Qm(i.date,t),Qm(e.date||{},t)),time:Nk(Qm(i.time,t),Qm(e.time||{},t))})}var Z1=function(e,t,i,o,h){var f=e.locale,g=e.formats,c=e.messages,T=e.defaultLocale,P=e.defaultFormats,R=e.fallbackOnEmptyString,A=e.onError,M=e.timeZone,N=e.defaultRichTextElements;i===void 0&&(i={id:""});var Y=i.id,U=i.defaultMessage;$I(!!Y,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var te=String(Y),O=c&&Object.prototype.hasOwnProperty.call(c,te)&&c[te];if(Array.isArray(O)&&O.length===1&&O[0].type===an.literal)return O[0].value;if(!o&&O&&typeof O=="string"&&!N)return O.replace(/'\{(.*?)\}'/gi,"{$1}");if(o=Ft(Ft({},N),o||{}),g=$k(g,M),P=$k(P,M),!O){if(R===!1&&O==="")return O;if((!U||f&&f.toLowerCase()!==T.toLowerCase())&&A(new WL(i,f)),U)try{var $=t.getMessageFormat(U,T,P,h);return $.format(o)}catch(q){return A(new Sv('Error formatting default message for: "'.concat(te,'", rendering default message verbatim'),f,i,q)),typeof U=="string"?U:te}return te}try{var $=t.getMessageFormat(O,f,g,Ft({formatters:t},h||{}));return $.format(o)}catch(q){A(new Sv('Error formatting message: "'.concat(te,'", using ').concat(U?"default message":"id"," as fallback."),f,i,q))}if(U)try{var $=t.getMessageFormat(U,T,P,h);return $.format(o)}catch(q){A(new Sv('Error formatting the default message for: "'.concat(te,'", rendering message verbatim'),f,i,q))}return typeof O=="string"?O:typeof U=="string"?U:te},sP=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Qy(e,t,i,o){var h=e.locale,f=e.formats,g=e.onError,c=e.timeZone;o===void 0&&(o={});var T=o.format,P=Ft(Ft({},c&&{timeZone:c}),T&&ww(f,t,T,g)),R=Ku(o,sP,P);return t==="time"&&!R.hour&&!R.minute&&!R.second&&!R.timeStyle&&!R.dateStyle&&(R=Ft(Ft({},R),{hour:"numeric",minute:"numeric"})),i(h,R)}function YL(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var h=i[0],f=i[1],g=f===void 0?{}:f,c=typeof h=="string"?new Date(h||0):h;try{return Qy(e,"date",t,g).format(c)}catch(T){e.onError(new io("Error formatting date.",e.locale,T))}return String(c)}function XL(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var h=i[0],f=i[1],g=f===void 0?{}:f,c=typeof h=="string"?new Date(h||0):h;try{return Qy(e,"time",t,g).format(c)}catch(T){e.onError(new io("Error formatting time.",e.locale,T))}return String(c)}function KL(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var h=i[0],f=i[1],g=i[2],c=g===void 0?{}:g,T=e.timeZone,P=e.locale,R=e.onError,A=Ku(c,sP,T?{timeZone:T}:{});try{return t(P,A).formatRange(h,f)}catch(M){R(new io("Error formatting date time range.",e.locale,M))}return String(h)}function JL(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var h=i[0],f=i[1],g=f===void 0?{}:f,c=typeof h=="string"?new Date(h||0):h;try{return Qy(e,"date",t,g).formatToParts(c)}catch(T){e.onError(new io("Error formatting date.",e.locale,T))}return[]}function QL(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var h=i[0],f=i[1],g=f===void 0?{}:f,c=typeof h=="string"?new Date(h||0):h;try{return Qy(e,"time",t,g).formatToParts(c)}catch(T){e.onError(new io("Error formatting time.",e.locale,T))}return[]}var e4=["style","type","fallback","languageDisplay"];function t4(e,t,i,o){var h=e.locale,f=e.onError,g=Intl.DisplayNames;g||f(new Gl(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Zo.MISSING_INTL_API));var c=Ku(o,e4);try{return t(h,c).of(i)}catch(T){f(new io("Error formatting display name.",h,T))}}var r4=["type","style"],jk=Date.now();function n4(e){return"".concat(jk,"_").concat(e,"_").concat(jk)}function i4(e,t,i,o){o===void 0&&(o={});var h=oP(e,t,i,o).reduce(function(f,g){var c=g.value;return typeof c!="string"?f.push(c):typeof f[f.length-1]=="string"?f[f.length-1]+=c:f.push(c),f},[]);return h.length===1?h[0]:h.length===0?"":h}function oP(e,t,i,o){var h=e.locale,f=e.onError;o===void 0&&(o={});var g=Intl.ListFormat;g||f(new Gl(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Zo.MISSING_INTL_API));var c=Ku(o,r4);try{var T={},P=i.map(function(R,A){if(typeof R=="object"){var M=n4(A);return T[M]=R,M}return String(R)});return t(h,c).formatToParts(P).map(function(R){return R.type==="literal"?R:Ft(Ft({},R),{value:T[R.value]||R.value})})}catch(R){f(new io("Error formatting list.",h,R))}return i}var s4=["type"];function o4(e,t,i,o){var h=e.locale,f=e.onError;o===void 0&&(o={}),Intl.PluralRules||f(new Gl(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Zo.MISSING_INTL_API));var g=Ku(o,s4);try{return t(h,g).select(i)}catch(c){f(new io("Error formatting plural.",h,c))}return"other"}var a4=["numeric","style"];function l4(e,t,i){var o=e.locale,h=e.formats,f=e.onError;i===void 0&&(i={});var g=i.format,c=!!g&&ww(h,"relative",g,f)||{},T=Ku(i,a4,c);return t(o,T)}function u4(e,t,i,o,h){h===void 0&&(h={}),o||(o="second");var f=Intl.RelativeTimeFormat;f||e.onError(new Gl(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Zo.MISSING_INTL_API));try{return l4(e,t,h).format(i,o)}catch(g){e.onError(new io("Error formatting relative time.",e.locale,g))}return String(i)}var c4=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function aP(e,t,i){var o=e.locale,h=e.formats,f=e.onError;i===void 0&&(i={});var g=i.format,c=g&&ww(h,"number",g,f)||{},T=Ku(i,c4,c);return t(o,T)}function h4(e,t,i,o){o===void 0&&(o={});try{return aP(e,t,o).format(i)}catch(h){e.onError(new io("Error formatting number.",e.locale,h))}return String(i)}function d4(e,t,i,o){o===void 0&&(o={});try{return aP(e,t,o).formatToParts(i)}catch(h){e.onError(new io("Error formatting number.",e.locale,h))}return[]}function f4(e){var t=e?e[Object.keys(e)[0]]:void 0;return typeof t=="string"}function p4(e){e.onWarn&&e.defaultRichTextElements&&f4(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function m4(e,t){var i=qL(t),o=Ft(Ft({},nP),e),h=o.locale,f=o.defaultLocale,g=o.onError;return h?!Intl.NumberFormat.supportedLocalesOf(h).length&&g?g(new Bk('Missing locale data for locale: "'.concat(h,'" in Intl.NumberFormat. Using default locale: "').concat(f,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(h).length&&g&&g(new Bk('Missing locale data for locale: "'.concat(h,'" in Intl.DateTimeFormat. Using default locale: "').concat(f,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(g&&g(new HL('"locale" was not configured, using "'.concat(f,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),o.locale=o.defaultLocale||"en"),p4(o),Ft(Ft({},o),{formatters:i,formatNumber:h4.bind(null,o,i.getNumberFormat),formatNumberToParts:d4.bind(null,o,i.getNumberFormat),formatRelativeTime:u4.bind(null,o,i.getRelativeTimeFormat),formatDate:YL.bind(null,o,i.getDateTimeFormat),formatDateToParts:JL.bind(null,o,i.getDateTimeFormat),formatTime:XL.bind(null,o,i.getDateTimeFormat),formatDateTimeRange:KL.bind(null,o,i.getDateTimeFormat),formatTimeToParts:QL.bind(null,o,i.getDateTimeFormat),formatPlural:o4.bind(null,o,i.getPluralRules),formatMessage:Z1.bind(null,o,i),$t:Z1.bind(null,o,i),formatList:i4.bind(null,o,i.getListFormat),formatListToParts:oP.bind(null,o,i.getListFormat),formatDisplayName:t4.bind(null,o,i.getDisplayNames)})}function lP(e){$I(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var uP=Ft(Ft({},nP),{textComponent:Ht.Fragment});function g4(e){return function(t){return e(Ht.Children.toArray(t))}}function q1(e,t){if(e===t)return!0;if(!e||!t)return!1;var i=Object.keys(e),o=Object.keys(t),h=i.length;if(o.length!==h)return!1;for(var f=0;f<h;f++){var g=i[f];if(e[g]!==t[g]||!Object.prototype.hasOwnProperty.call(t,g))return!1}return!0}var cP={exports:{}},Ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=typeof Symbol=="function"&&Symbol.for,bw=ri?Symbol.for("react.element"):60103,Sw=ri?Symbol.for("react.portal"):60106,e_=ri?Symbol.for("react.fragment"):60107,t_=ri?Symbol.for("react.strict_mode"):60108,r_=ri?Symbol.for("react.profiler"):60114,n_=ri?Symbol.for("react.provider"):60109,i_=ri?Symbol.for("react.context"):60110,kw=ri?Symbol.for("react.async_mode"):60111,s_=ri?Symbol.for("react.concurrent_mode"):60111,o_=ri?Symbol.for("react.forward_ref"):60112,a_=ri?Symbol.for("react.suspense"):60113,y4=ri?Symbol.for("react.suspense_list"):60120,l_=ri?Symbol.for("react.memo"):60115,u_=ri?Symbol.for("react.lazy"):60116,_4=ri?Symbol.for("react.block"):60121,v4=ri?Symbol.for("react.fundamental"):60117,x4=ri?Symbol.for("react.responder"):60118,w4=ri?Symbol.for("react.scope"):60119;function $s(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bw:switch(e=e.type,e){case kw:case s_:case e_:case r_:case t_:case a_:return e;default:switch(e=e&&e.$$typeof,e){case i_:case o_:case u_:case l_:case n_:return e;default:return t}}case Sw:return t}}}function hP(e){return $s(e)===s_}Ur.AsyncMode=kw;Ur.ConcurrentMode=s_;Ur.ContextConsumer=i_;Ur.ContextProvider=n_;Ur.Element=bw;Ur.ForwardRef=o_;Ur.Fragment=e_;Ur.Lazy=u_;Ur.Memo=l_;Ur.Portal=Sw;Ur.Profiler=r_;Ur.StrictMode=t_;Ur.Suspense=a_;Ur.isAsyncMode=function(e){return hP(e)||$s(e)===kw};Ur.isConcurrentMode=hP;Ur.isContextConsumer=function(e){return $s(e)===i_};Ur.isContextProvider=function(e){return $s(e)===n_};Ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bw};Ur.isForwardRef=function(e){return $s(e)===o_};Ur.isFragment=function(e){return $s(e)===e_};Ur.isLazy=function(e){return $s(e)===u_};Ur.isMemo=function(e){return $s(e)===l_};Ur.isPortal=function(e){return $s(e)===Sw};Ur.isProfiler=function(e){return $s(e)===r_};Ur.isStrictMode=function(e){return $s(e)===t_};Ur.isSuspense=function(e){return $s(e)===a_};Ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===e_||e===s_||e===r_||e===t_||e===a_||e===y4||typeof e=="object"&&e!==null&&(e.$$typeof===u_||e.$$typeof===l_||e.$$typeof===n_||e.$$typeof===i_||e.$$typeof===o_||e.$$typeof===v4||e.$$typeof===x4||e.$$typeof===w4||e.$$typeof===_4)};Ur.typeOf=$s;cP.exports=Ur;var b4=cP.exports,dP=b4,S4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},k4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fP={};fP[dP.ForwardRef]=S4;fP[dP.Memo]=k4;var Tw=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=Ht.createContext(null)):Ht.createContext(null);Tw.Consumer;var T4=Tw.Provider,E4=T4,C4=Tw;function c_(){var e=Ht.useContext(C4);return lP(e),e}var Y1;(function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"})(Y1||(Y1={}));var X1;(function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"})(X1||(X1={}));function pP(e){var t=function(i){var o=c_(),h=i.value,f=i.children,g=Rh(i,["value","children"]),c=typeof h=="string"?new Date(h||0):h,T=e==="formatDate"?o.formatDateToParts(c,g):o.formatTimeToParts(c,g);return f(T)};return t.displayName=X1[e],t}function bp(e){var t=function(i){var o=c_(),h=i.value,f=i.children,g=Rh(i,["value","children"]),c=o[e](h,g);if(typeof f=="function")return f(c);var T=o.textComponent||Ht.Fragment;return Ht.createElement(T,null,c)};return t.displayName=Y1[e],t}function mP(e){return e&&Object.keys(e).reduce(function(t,i){var o=e[i];return t[i]=tP(o)?g4(o):o,t},{})}var Uk=function(e,t,i,o){for(var h=[],f=4;f<arguments.length;f++)h[f-4]=arguments[f];var g=mP(o),c=Z1.apply(void 0,Ui([e,t,i,g],h,!1));return Array.isArray(c)?Ht.Children.toArray(c):c},Vk=function(e,t){var i=e.defaultRichTextElements,o=Rh(e,["defaultRichTextElements"]),h=mP(i),f=m4(Ft(Ft(Ft({},uP),o),{defaultRichTextElements:h}),t),g={locale:f.locale,timeZone:f.timeZone,fallbackOnEmptyString:f.fallbackOnEmptyString,formats:f.formats,defaultLocale:f.defaultLocale,defaultFormats:f.defaultFormats,messages:f.messages,onError:f.onError,defaultRichTextElements:h};return Ft(Ft({},f),{formatMessage:Uk.bind(null,g,f.formatters),$t:Uk.bind(null,g,f.formatters)})};function kv(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}var I4=function(e){no(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.cache=iP(),i.state={cache:i.cache,intl:Vk(kv(i.props),i.cache),prevConfig:kv(i.props)},i}return t.getDerivedStateFromProps=function(i,o){var h=o.prevConfig,f=o.cache,g=kv(i);return q1(h,g)?null:{intl:Vk(g,f),prevConfig:g}},t.prototype.render=function(){return lP(this.state.intl),Ht.createElement(E4,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=uP,t}(Ht.PureComponent);function P4(e,t){var i=e.values,o=Rh(e,["values"]),h=t.values,f=Rh(t,["values"]);return q1(h,i)&&q1(o,f)}function gP(e){var t=c_(),i=t.formatMessage,o=t.textComponent,h=o===void 0?Ht.Fragment:o,f=e.id,g=e.description,c=e.defaultMessage,T=e.values,P=e.children,R=e.tagName,A=R===void 0?h:R,M=e.ignoreTag,N={id:f,description:g,defaultMessage:c},Y=i(N,T,{ignoreTag:M});return typeof P=="function"?P(Array.isArray(Y)?Y:[Y]):A?Ht.createElement(A,null,Ht.Children.toArray(Y)):Ht.createElement(Ht.Fragment,null,Y)}gP.displayName="FormattedMessage";var ln=Ht.memo(gP,P4);ln.displayName="MemoizedFormattedMessage";bp("formatDate");bp("formatTime");bp("formatNumber");bp("formatList");bp("formatDisplayName");pP("formatDate");pP("formatTime");const M4=["txt","zip","json"],Hk=e=>{if(e.substring(0,8)==="__MACOSX")return;const t=e.toLowerCase();if(t.endsWith(".txt")||t.endsWith(".json"))return"chat";if(t.endsWith(".zip"))return"zip";if(t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".mp4"))return"media"},A4=({onFilesLoad:e,onDataFileLoad:t,onError:i})=>{const[o,h]=Ht.useState(),[f,g]=Ht.useState(),c=c_(),T=R=>{g(R.length);for(let M=0;M<R.length;M++){const N=R[M],Y=Hk(N.name);if(Y==="chat"){var A=new FileReader;A.readAsText(N,"UTF-8"),A.onload=function(U){h(te=>({...te,[N.name]:U.target.result}))},A.onerror=function(U){i(N.name)}}else Y==="zip"&&new eL().loadAsync(N).then(function(U){Object.keys(U.files).forEach(te=>{const O=Hk(te);O==="chat"?U.files[te].async("string").then(function($){h(q=>({...q,[N.name]:$}))}):O==="media"&&U.files[te].async("arraybuffer").then(function($){const q=new Uint8Array($),ne=new Blob([q.buffer]);t(te,ne)})})})}};Ht.useEffect(()=>{o&&Object.keys(o).length===f&&e(o)},[o,e]);const P=o&&Object.keys(o).length!==f;return We.jsxs(We.Fragment,{children:[P?We.jsxs("p",{style:{textAlign:"center"},children:[c.formatMessage({id:"app.loading",defaultMessage:"Loading"})," ..."]}):"",We.jsx("div",{style:P?{display:"none"}:null,children:We.jsx(J5,{classes:"fileUploadDropArea",handleChange:T,multiple:!0,name:"file",types:M4,label:c.formatMessage({id:"app.uploadLabel",defaultMessage:"Upload or drag a file right here"})})})]})};var yP={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(i,o){e.exports=o()})(ff,function(){var i={},o={};function h(g,c,T){if(o[g]=T,g==="index"){var P="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",R={};return o.shared(R),o.index(i,R),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}h("shared",["exports"],function(g){function c(s,n,a,d){return new(a||(a=Promise))(function(y,x){function w(I){try{k(d.next(I))}catch(D){x(D)}}function b(I){try{k(d.throw(I))}catch(D){x(D)}}function k(I){var D;I.done?y(I.value):(D=I.value,D instanceof a?D:new a(function(L){L(D)})).then(w,b)}k((d=d.apply(s,n||[])).next())})}function T(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var P=R;function R(s,n){this.x=s,this.y=n}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,a=s.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),a=Math.sin(s),d=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=d,this},_rotateAround:function(s,n){var a=Math.cos(s),d=Math.sin(s),y=n.y+d*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-d*(this.y-n.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},R.convert=function(s){return s instanceof R?s:Array.isArray(s)?new R(s[0],s[1]):s};var A=T(P),M=N;function N(s,n,a,d){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=a,this.p2y=d}N.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,d=0;d<8;d++){var y=this.sampleCurveX(a)-s;if(Math.abs(y)<n)return a;var x=this.sampleCurveDerivativeX(a);if(Math.abs(x)<1e-6)break;a-=y/x}var w=0,b=1;for(a=s,d=0;d<20&&(y=this.sampleCurveX(a),!(Math.abs(y-s)<n));d++)s>y?w=a:b=a,a=.5*(b-w)+w;return a},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var Y=T(M);let U,te;function O(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function $(){if(te==null&&(te=!1,O())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){const y=4*d;n.fillStyle=`rgb(${y},${y+1},${y+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const a=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&a[d]!==d){te=!0;break}}}return te||!1}function q(s,n,a,d){const y=new Y(s,n,a,d);return x=>y.solve(x)}const ne=q(.25,.1,.25,1);function oe(s,n,a){return Math.min(a,Math.max(n,s))}function ke(s,n,a){const d=a-n,y=((s-n)%d+d)%d+n;return y===n?a:y}function ge(s,...n){for(const a of n)for(const d in a)s[d]=a[d];return s}let Fe=1;function Oe(s,n,a){const d={};for(const y in s)d[y]=n.call(this,s[y],y,s);return d}function Ge(s,n,a){const d={};for(const y in s)n.call(this,s[y],y,s)&&(d[y]=s[y]);return d}function it(s){return Array.isArray(s)?s.map(it):typeof s=="object"&&s?Oe(s,it):s}const ve={};function je(s){ve[s]||(typeof console<"u"&&console.warn(s),ve[s]=!0)}function H(s,n,a){return(a.y-s.y)*(n.x-s.x)>(n.y-s.y)*(a.x-s.x)}function Re(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let vt=null;function ye(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Le(s,n,a,d,y){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(s,{timestamp:0});try{const w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const b=w.startsWith("BGR"),k=new Uint8ClampedArray(d*y*4);if(yield x.copyTo(k,function(I,D,L,j,Z){const K=4*Math.max(-D,0),J=(Math.max(0,L)-L)*j*4+K,le=4*j,fe=Math.max(0,D),De=Math.max(0,L);return{rect:{x:fe,y:De,width:Math.min(I.width,D+j)-fe,height:Math.min(I.height,L+Z)-De},layout:[{offset:J,stride:le}]}}(s,n,a,d,y)),b)for(let I=0;I<k.length;I+=4){const D=k[I];k[I]=k[I+2],k[I+2]=D}return k}finally{x.close()}})}let Ke,xe;const Ee="AbortError";function mt(){return new Error(Ee)}const nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function rt(s){return nt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const Jt="global-dispatcher";class er extends Error{constructor(n,a,d,y){super(`AJAXError: ${a} (${n}): ${d}`),this.status=n,this.statusText=a,this.url=d,this.body=y}}const Vt=()=>Re(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Yt=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const d=rt(s.url);if(d)return d(s,n);if(Re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:Jt},n)}if(!(/^file:/.test(a=s.url)||/^file:/.test(Vt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,y){return c(this,void 0,void 0,function*(){const x=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Vt(),signal:y.signal});d.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");const w=yield fetch(x);if(!w.ok){const I=yield w.blob();throw new er(w.status,w.statusText,d.url,I)}let b;b=d.type==="arrayBuffer"||d.type==="image"?w.arrayBuffer():d.type==="json"?w.json():w.text();const k=yield b;if(y.signal.aborted)throw mt();return{data:k,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(s,n);if(Re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:Jt},n)}var a;return function(d,y){return new Promise((x,w)=>{var b;const k=new XMLHttpRequest;k.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(k.responseType="arraybuffer");for(const I in d.headers)k.setRequestHeader(I,d.headers[I]);d.type==="json"&&(k.responseType="text",!((b=d.headers)===null||b===void 0)&&b.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=d.credentials==="include",k.onerror=()=>{w(new Error(k.statusText))},k.onload=()=>{if(!y.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let I=k.response;if(d.type==="json")try{I=JSON.parse(k.response)}catch(D){return void w(D)}x({data:I,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const I=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});w(new er(k.status,k.statusText,d.url,I))}},y.signal.addEventListener("abort",()=>{k.abort(),w(mt())}),k.send(d.body)})}(s,n)};function _r(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),a=window.location;return n.protocol===a.protocol&&n.host===a.host}function fr(s,n,a){a[s]&&a[s].indexOf(n)!==-1||(a[s]=a[s]||[],a[s].push(n))}function br(s,n,a){if(a&&a[s]){const d=a[s].indexOf(n);d!==-1&&a[s].splice(d,1)}}class Xr{constructor(n,a={}){ge(this,a),this.type=n}}class V extends Xr{constructor(n,a={}){super("error",ge({error:n},a))}}class Ue{on(n,a){return this._listeners=this._listeners||{},fr(n,a,this._listeners),this}off(n,a){return br(n,a,this._listeners),br(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},fr(n,a,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,a){typeof n=="string"&&(n=new Xr(n,a||{}));const d=n.type;if(this.listens(d)){n.target=this;const y=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const b of y)b.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const b of x)br(d,b,this._oneTimeListeners),b.call(this,n);const w=this._eventedParent;w&&(ge(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(n))}else n instanceof V&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const de=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function se(s,n){const a={};for(const d in s)d!=="ref"&&(a[d]=s[d]);return de.forEach(d=>{d in n&&(a[d]=n[d])}),a}function Te(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!Te(s[a],n[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const a in s)if(!Te(s[a],n[a]))return!1;return!0}return s===n}function Ze(s,n){s.push(n)}function tt(s,n,a){Ze(a,{command:"addSource",args:[s,n[s]]})}function Ne(s,n,a){Ze(n,{command:"removeSource",args:[s]}),a[s]=!0}function ot(s,n,a,d){Ne(s,a,d),tt(s,n,a)}function kt(s,n,a){let d;for(d in s[a])if(Object.prototype.hasOwnProperty.call(s[a],d)&&d!=="data"&&!Te(s[a][d],n[a][d]))return!1;for(d in n[a])if(Object.prototype.hasOwnProperty.call(n[a],d)&&d!=="data"&&!Te(s[a][d],n[a][d]))return!1;return!0}function at(s,n,a,d,y,x){s=s||{},n=n||{};for(const w in s)Object.prototype.hasOwnProperty.call(s,w)&&(Te(s[w],n[w])||a.push({command:x,args:[d,w,n[w],y]}));for(const w in n)Object.prototype.hasOwnProperty.call(n,w)&&!Object.prototype.hasOwnProperty.call(s,w)&&(Te(s[w],n[w])||a.push({command:x,args:[d,w,n[w],y]}))}function Bt(s){return s.id}function Tr(s,n){return s[n.id]=n,s}class qe{constructor(n,a,d,y){this.message=(n?`${n}: `:"")+d,y&&(this.identifier=y),a!=null&&a.__line__&&(this.line=a.__line__)}}function tn(s,...n){for(const a of n)for(const d in a)s[d]=a[d];return s}class _n extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class vn{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[d,y]of a)this.bindings[d]=y}concat(n){return new vn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const pi={kind:"null"},Qe={kind:"number"},Kt={kind:"string"},jt={kind:"boolean"},Kr={kind:"color"},mi={kind:"object"},Xt={kind:"value"},Yi={kind:"collator"},fs={kind:"formatted"},ps={kind:"padding"},Hn={kind:"resolvedImage"},he={kind:"variableAnchorOffsetCollection"};function G(s,n){return{kind:"array",itemType:s,N:n}}function W(s){if(s.kind==="array"){const n=W(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const ee=[pi,Qe,Kt,jt,Kr,fs,mi,G(Xt),ps,Hn,he];function ue(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!ue(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const a of ee)if(!ue(a,n))return null}}return`Expected ${W(s)} but found ${W(n)} instead.`}function Se(s,n){return n.some(a=>a.kind===s.kind)}function Ie(s,n){return n.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function Ae(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const _e=.96422,He=.82521,Je=4/29,$e=6/29,ut=3*$e*$e,Rt=$e*$e*$e,Ot=Math.PI/180,mr=180/Math.PI;function Qt(s){return(s%=360)<0&&(s+=360),s}function gr([s,n,a,d]){let y,x;const w=Tn((.2225045*(s=or(s))+.7168786*(n=or(n))+.0606169*(a=or(a)))/1);s===n&&n===a?y=x=w:(y=Tn((.4360747*s+.3850649*n+.1430804*a)/_e),x=Tn((.0139322*s+.0971045*n+.7141733*a)/He));const b=116*w-16;return[b<0?0:b,500*(y-w),200*(w-x),d]}function or(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Tn(s){return s>Rt?Math.pow(s,1/3):s/ut+Je}function rn([s,n,a,d]){let y=(s+16)/116,x=isNaN(n)?y:y+n/500,w=isNaN(a)?y:y-a/200;return y=1*Mr(y),x=_e*Mr(x),w=He*Mr(w),[rr(3.1338561*x-1.6168667*y-.4906146*w),rr(-.9787684*x+1.9161415*y+.033454*w),rr(.0719453*x-.2289914*y+1.4052427*w),d]}function rr(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Mr(s){return s>$e?s*s*s:ut*(s-Je)}function Yr(s){return parseInt(s.padEnd(2,s),16)/255}function Dn(s,n){return Bn(n?s/100:s,0,1)}function Bn(s,n,a){return Math.min(Math.max(n,s),a)}function ni(s){return!s.some(Number.isNaN)}const Fa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Ar{constructor(n,a,d,y=1,x=!0){this.r=n,this.g=a,this.b=d,this.a=y,x||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[n,a,d,y]))}static parse(n){if(n instanceof Ar)return n;if(typeof n!="string")return;const a=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=Fa[d];if(y){const[w,b,k]=y;return[w/255,b/255,k/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const w=d.length<6?1:2;let b=1;return[Yr(d.slice(b,b+=w)),Yr(d.slice(b,b+=w)),Yr(d.slice(b,b+=w)),Yr(d.slice(b,b+w)||"ff")]}if(d.startsWith("rgb")){const w=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[b,k,I,D,L,j,Z,K,J,le,fe,De]=w,be=[D||" ",Z||" ",le].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Me=[I,j,J].join(""),Ve=Me==="%%%"?100:Me===""?255:0;if(Ve){const et=[Bn(+k/Ve,0,1),Bn(+L/Ve,0,1),Bn(+K/Ve,0,1),fe?Dn(+fe,De):1];if(ni(et))return et}}return}}const x=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,b,k,I,D,L,j,Z,K]=x,J=[k||" ",D||" ",j].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const le=[+b,Bn(+I,0,100),Bn(+L,0,100),Z?Dn(+Z,K):1];if(ni(le))return function([fe,De,be,Me]){function Ve(et){const xt=(et+fe/30)%12,Nt=De*Math.min(be,1-be);return be-Nt*Math.max(-1,Math.min(xt-3,9-xt,1))}return fe=Qt(fe),De/=100,be/=100,[Ve(0),Ve(8),Ve(4),Me]}(le)}}}(n);return a?new Ar(...a,!1):void 0}get rgb(){const{r:n,g:a,b:d,a:y}=this,x=y||1/0;return this.overwriteGetter("rgb",[n/x,a/x,d/x,y])}get hcl(){return this.overwriteGetter("hcl",function(n){const[a,d,y,x]=gr(n),w=Math.sqrt(d*d+y*y);return[Math.round(1e4*w)?Qt(Math.atan2(y,d)*mr):NaN,w,a,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",gr(this.rgb))}overwriteGetter(n,a){return Object.defineProperty(this,n,{value:a}),a}toString(){const[n,a,d,y]=this.rgb;return`rgba(${[n,a,d].map(x=>Math.round(255*x)).join(",")},${y})`}}Ar.black=new Ar(0,0,0,1),Ar.white=new Ar(1,1,1,1),Ar.transparent=new Ar(0,0,0,0),Ar.red=new Ar(1,0,0,1);class qh{constructor(n,a,d){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Yh{constructor(n,a,d,y,x){this.text=n,this.image=a,this.scale=d,this.fontStack=y,this.textColor=x}}class Mi{constructor(n){this.sections=n}static fromString(n){return new Mi([new Yh(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Mi?n:Mi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Ai{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Ai)return n;if(typeof n=="number")return new Ai([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Ai(n)}}toString(){return JSON.stringify(this.values)}}const P_=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Xi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Xi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let a=0;a<n.length;a+=2){const d=n[a],y=n[a+1];if(typeof d!="string"||!P_.has(d)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new Xi(n)}}toString(){return JSON.stringify(this.values)}}class Di{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Di({name:n,available:!1}):null}}function Ba(s,n,a,d){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,n,a,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,n,a,d]:[s,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ko(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Ar||s instanceof qh||s instanceof Mi||s instanceof Ai||s instanceof Xi||s instanceof Di)return!0;if(Array.isArray(s)){for(const n of s)if(!Ko(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Ko(s[n]))return!1;return!0}return!1}function En(s){if(s===null)return pi;if(typeof s=="string")return Kt;if(typeof s=="boolean")return jt;if(typeof s=="number")return Qe;if(s instanceof Ar)return Kr;if(s instanceof qh)return Yi;if(s instanceof Mi)return fs;if(s instanceof Ai)return ps;if(s instanceof Xi)return he;if(s instanceof Di)return Hn;if(Array.isArray(s)){const n=s.length;let a;for(const d of s){const y=En(d);if(a){if(a===y)continue;a=Xt;break}a=y}return G(a||Xt,n)}return mi}function Zl(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof Ar||s instanceof Mi||s instanceof Ai||s instanceof Xi||s instanceof Di?s.toString():JSON.stringify(s)}class ms{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ko(n[1]))return a.error("invalid value");const d=n[1];let y=En(d);const x=a.expectedType;return y.kind!=="array"||y.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(y=x),new ms(y,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Qu={string:Kt,number:Qe,boolean:jt,object:mi};class gs{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let d,y=1;const x=n[0];if(x==="array"){let b,k;if(n.length>2){const I=n[1];if(typeof I!="string"||!(I in Qu)||I==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=Qu[I],y++}else b=Xt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);k=n[2],y++}d=G(b,k)}else{if(!Qu[x])throw new Error(`Types doesn't contain name = ${x}`);d=Qu[x]}const w=[];for(;y<n.length;y++){const b=a.parse(n[y],y,Xt);if(!b)return null;w.push(b)}return new gs(d,w)}evaluate(n){for(let a=0;a<this.args.length;a++){const d=this.args[a].evaluate(n);if(!ue(this.type,En(d)))return d;if(a===this.args.length-1)throw new xn(`Expected value to be of type ${W(this.type)}, but found ${W(En(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Xh={"to-boolean":jt,"to-color":Kr,"to-number":Qe,"to-string":Kt};class ys{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const d=n[0];if(!Xh[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return a.error("Expected one argument.");const y=Xh[d],x=[];for(let w=1;w<n.length;w++){const b=a.parse(n[w],w,Xt);if(!b)return null;x.push(b)}return new ys(y,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let a,d;for(const y of this.args){if(a=y.evaluate(n),d=null,a instanceof Ar)return a;if(typeof a=="string"){const x=n.parseColor(a);if(x)return x}else if(Array.isArray(a)&&(d=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Ba(a[0],a[1],a[2],a[3]),!d))return new Ar(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new xn(d||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const d of this.args){a=d.evaluate(n);const y=Ai.parse(a);if(y)return y}throw new xn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const d of this.args){a=d.evaluate(n);const y=Xi.parse(a);if(y)return y}throw new xn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const d of this.args){if(a=d.evaluate(n),a===null)return 0;const y=Number(a);if(!isNaN(y))return y}throw new xn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Mi.fromString(Zl(this.args[0].evaluate(n)));case"resolvedImage":return Di.fromString(Zl(this.args[0].evaluate(n)));default:return Zl(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const M_=["Unknown","Point","LineString","Polygon"];class ec{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?M_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=Ar.parse(n)),a}}class Jo{constructor(n,a,d=[],y,x=new vn,w=[]){this.registry=n,this.path=d,this.key=d.map(b=>`[${b}]`).join(""),this.scope=x,this.errors=w,this.expectedType=y,this._isConstant=a}parse(n,a,d,y,x={}){return a?this.concat(a,d,y)._parse(n,x):this._parse(n,x)}_parse(n,a){function d(y,x,w){return w==="assert"?new gs(x,[y]):w==="coerce"?new ys(x,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[y];if(x){let w=x.parse(n,this);if(!w)return null;if(this.expectedType){const b=this.expectedType,k=w.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||k.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(b.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||k.kind!=="value"&&k.kind!=="array"){if(this.checkSubtype(b,k))return null}else w=d(w,b,a.typeAnnotation||"coerce");else w=d(w,b,a.typeAnnotation||"coerce");else w=d(w,b,a.typeAnnotation||"coerce");else w=d(w,b,a.typeAnnotation||"assert")}if(!(w instanceof ms)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const b=new ec;try{w=new ms(w.type,w.evaluate(b))}catch(k){return this.error(k.message),null}}return w}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,d){const y=typeof n=="number"?this.path.concat(n):this.path,x=d?this.scope.concat(d):this.scope;return new Jo(this.registry,this._isConstant,y,a||null,x,this.errors)}error(n,...a){const d=`${this.key}${a.map(y=>`[${y}]`).join("")}`;this.errors.push(new _n(d,n))}checkSubtype(n,a){const d=ue(n,a);return d&&this.error(d),d}}class Po{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let x=1;x<n.length-1;x+=2){const w=n[x];if(typeof w!="string")return a.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return a.error("Variable names must contain only alphanumeric characters or '_'.",x);const b=a.parse(n[x+1],x+1);if(!b)return null;d.push([w,b])}const y=a.parse(n[n.length-1],n.length-1,a.expectedType,d);return y?new Po(d,y):null}outputDefined(){return this.result.outputDefined()}}class Sr{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const d=n[1];return a.scope.has(d)?new Sr(d,a.scope.get(d)):a.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Kh{constructor(n,a,d){this.type=n,this.index=a,this.input=d}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Qe),y=a.parse(n[2],2,G(a.expectedType||Xt));return d&&y?new Kh(y.type.itemType,d,y):null}evaluate(n){const a=this.index.evaluate(n),d=this.input.evaluate(n);if(a<0)throw new xn(`Array index out of bounds: ${a} < 0.`);if(a>=d.length)throw new xn(`Array index out of bounds: ${a} > ${d.length-1}.`);if(a!==Math.floor(a))throw new xn(`Array index must be an integer, but found ${a} instead.`);return d[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Jh{constructor(n,a){this.type=jt,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Xt),y=a.parse(n[2],2,Xt);return d&&y?Se(d.type,[jt,Kt,Qe,pi,Xt])?new Jh(d,y):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(d.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!Ie(a,["boolean","string","number","null"]))throw new xn(`Expected first argument to be of type boolean, string, number or null, but found ${W(En(a))} instead.`);if(!Ie(d,["string","array"]))throw new xn(`Expected second argument to be of type array or string, but found ${W(En(d))} instead.`);return d.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Na{constructor(n,a,d){this.type=Qe,this.needle=n,this.haystack=a,this.fromIndex=d}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Xt),y=a.parse(n[2],2,Xt);if(!d||!y)return null;if(!Se(d.type,[jt,Kt,Qe,pi,Xt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(d.type)} instead`);if(n.length===4){const x=a.parse(n[3],3,Qe);return x?new Na(d,y,x):null}return new Na(d,y)}evaluate(n){const a=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!Ie(a,["boolean","string","number","null"]))throw new xn(`Expected first argument to be of type boolean, string, number or null, but found ${W(En(a))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(n)),Ie(d,["string"])){const x=d.indexOf(a,y);return x===-1?-1:[...d.slice(0,x)].length}if(Ie(d,["array"]))return d.indexOf(a,y);throw new xn(`Expected second argument to be of type array or string, but found ${W(En(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Qh{constructor(n,a,d,y,x,w){this.inputType=n,this.type=a,this.input=d,this.cases=y,this.outputs=x,this.otherwise=w}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let d,y;a.expectedType&&a.expectedType.kind!=="value"&&(y=a.expectedType);const x={},w=[];for(let I=2;I<n.length-1;I+=2){let D=n[I];const L=n[I+1];Array.isArray(D)||(D=[D]);const j=a.concat(I);if(D.length===0)return j.error("Expected at least one branch label.");for(const K of D){if(typeof K!="number"&&typeof K!="string")return j.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return j.error("Numeric branch labels must be integer values.");if(d){if(j.checkSubtype(d,En(K)))return null}else d=En(K);if(x[String(K)]!==void 0)return j.error("Branch labels must be unique.");x[String(K)]=w.length}const Z=a.parse(L,I,y);if(!Z)return null;y=y||Z.type,w.push(Z)}const b=a.parse(n[1],1,Xt);if(!b)return null;const k=a.parse(n[n.length-1],n.length-1,y);return k?b.type.kind!=="value"&&a.concat(1).checkSubtype(d,b.type)?null:new Qh(d,y,b,x,w,k):null}evaluate(n){const a=this.input.evaluate(n);return(En(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class tc{constructor(n,a,d){this.type=n,this.branches=a,this.otherwise=d}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const y=[];for(let w=1;w<n.length-1;w+=2){const b=a.parse(n[w],w,jt);if(!b)return null;const k=a.parse(n[w+1],w+1,d);if(!k)return null;y.push([b,k]),d=d||k.type}const x=a.parse(n[n.length-1],n.length-1,d);if(!x)return null;if(!d)throw new Error("Can't infer output type");return new tc(d,y,x)}evaluate(n){for(const[a,d]of this.branches)if(a.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,d]of this.branches)n(a),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class ql{constructor(n,a,d,y){this.type=n,this.input=a,this.beginIndex=d,this.endIndex=y}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Xt),y=a.parse(n[2],2,Qe);if(!d||!y)return null;if(!Se(d.type,[G(Xt),Kt,Xt]))return a.error(`Expected first argument to be of type array or string, but found ${W(d.type)} instead`);if(n.length===4){const x=a.parse(n[3],3,Qe);return x?new ql(d.type,d,y,x):null}return new ql(d.type,d,y)}evaluate(n){const a=this.input.evaluate(n),d=this.beginIndex.evaluate(n);let y;if(this.endIndex&&(y=this.endIndex.evaluate(n)),Ie(a,["string"]))return[...a].slice(d,y).join("");if(Ie(a,["array"]))return a.slice(d,y);throw new xn(`Expected first argument to be of type array or string, but found ${W(En(a))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function rc(s,n){const a=s.length-1;let d,y,x=0,w=a,b=0;for(;x<=w;)if(b=Math.floor((x+w)/2),d=s[b],y=s[b+1],d<=n){if(b===a||n<y)return b;x=b+1}else{if(!(d>n))throw new xn("Input is not a number.");w=b-1}return 0}class $a{constructor(n,a,d){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[y,x]of d)this.labels.push(y),this.outputs.push(x)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const d=a.parse(n[1],1,Qe);if(!d)return null;const y=[];let x=null;a.expectedType&&a.expectedType.kind!=="value"&&(x=a.expectedType);for(let w=1;w<n.length;w+=2){const b=w===1?-1/0:n[w],k=n[w+1],I=w,D=w+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(y.length&&y[y.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const L=a.parse(k,D,x);if(!L)return null;x=x||L.type,y.push([b,L])}return new $a(x,d,y)}evaluate(n){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(n);const y=this.input.evaluate(n);if(y<=a[0])return d[0].evaluate(n);const x=a.length;return y>=a[x-1]?d[x-1].evaluate(n):d[rc(a,y)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Mp(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var A_=Ap;function Ap(s,n,a,d){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=a,this.p2y=d}Ap.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,d=0;d<8;d++){var y=this.sampleCurveX(a)-s;if(Math.abs(y)<n)return a;var x=this.sampleCurveDerivativeX(a);if(Math.abs(x)<1e-6)break;a-=y/x}var w=0,b=1;for(a=s,d=0;d<20&&(y=this.sampleCurveX(a),!(Math.abs(y-s)<n));d++)s>y?w=a:b=a,a=.5*(b-w)+w;return a},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var D_=Mp(A_);function Qo(s,n,a){return s+a*(n-s)}function Yl(s,n,a){return s.map((d,y)=>Qo(d,n[y],a))}const gi={number:Qo,color:function(s,n,a,d="rgb"){switch(d){case"rgb":{const[y,x,w,b]=Yl(s.rgb,n.rgb,a);return new Ar(y,x,w,b,!1)}case"hcl":{const[y,x,w,b]=s.hcl,[k,I,D,L]=n.hcl;let j,Z;if(isNaN(y)||isNaN(k))isNaN(y)?isNaN(k)?j=NaN:(j=k,w!==1&&w!==0||(Z=I)):(j=y,D!==1&&D!==0||(Z=x));else{let De=k-y;k>y&&De>180?De-=360:k<y&&y-k>180&&(De+=360),j=y+a*De}const[K,J,le,fe]=function([De,be,Me,Ve]){return De=isNaN(De)?0:De*Ot,rn([Me,Math.cos(De)*be,Math.sin(De)*be,Ve])}([j,Z??Qo(x,I,a),Qo(w,D,a),Qo(b,L,a)]);return new Ar(K,J,le,fe,!1)}case"lab":{const[y,x,w,b]=rn(Yl(s.lab,n.lab,a));return new Ar(y,x,w,b,!1)}}},array:Yl,padding:function(s,n,a){return new Ai(Yl(s.values,n.values,a))},variableAnchorOffsetCollection:function(s,n,a){const d=s.values,y=n.values;if(d.length!==y.length)throw new xn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const x=[];for(let w=0;w<d.length;w+=2){if(d[w]!==y[w])throw new xn(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${d[w]}, to[${w}]: ${y[w]}`);x.push(d[w]);const[b,k]=d[w+1],[I,D]=y[w+1];x.push([Qo(b,I,a),Qo(k,D,a)])}return new Xi(x)}};class yi{constructor(n,a,d,y,x){this.type=n,this.operator=a,this.interpolation=d,this.input=y,this.labels=[],this.outputs=[];for(const[w,b]of x)this.labels.push(w),this.outputs.push(b)}static interpolationFactor(n,a,d,y){let x=0;if(n.name==="exponential")x=nc(a,n.base,d,y);else if(n.name==="linear")x=nc(a,1,d,y);else if(n.name==="cubic-bezier"){const w=n.controlPoints;x=new D_(w[0],w[1],w[2],w[3]).solve(nc(a,1,d,y))}return x}static parse(n,a){let[d,y,x,...w]=n;if(!Array.isArray(y)||y.length===0)return a.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const I=y[1];if(typeof I!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:I}}else{if(y[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const I=y.slice(1);if(I.length!==4||I.some(D=>typeof D!="number"||D<0||D>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:I}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(x=a.parse(x,2,Qe),!x)return null;const b=[];let k=null;d==="interpolate-hcl"||d==="interpolate-lab"?k=Kr:a.expectedType&&a.expectedType.kind!=="value"&&(k=a.expectedType);for(let I=0;I<w.length;I+=2){const D=w[I],L=w[I+1],j=I+3,Z=I+4;if(typeof D!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(b.length&&b[b.length-1][0]>=D)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const K=a.parse(L,Z,k);if(!K)return null;k=k||K.type,b.push([D,K])}return Ae(k,Qe)||Ae(k,Kr)||Ae(k,ps)||Ae(k,he)||Ae(k,G(Qe))?new yi(k,d,y,x,b):a.error(`Type ${W(k)} is not interpolatable.`)}evaluate(n){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(n);const y=this.input.evaluate(n);if(y<=a[0])return d[0].evaluate(n);const x=a.length;if(y>=a[x-1])return d[x-1].evaluate(n);const w=rc(a,y),b=yi.interpolationFactor(this.interpolation,y,a[w],a[w+1]),k=d[w].evaluate(n),I=d[w+1].evaluate(n);switch(this.operator){case"interpolate":return gi[this.type.kind](k,I,b);case"interpolate-hcl":return gi.color(k,I,b,"hcl");case"interpolate-lab":return gi.color(k,I,b,"lab")}}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function nc(s,n,a,d){const y=d-a,x=s-a;return y===0?0:n===1?x/y:(Math.pow(n,x)-1)/(Math.pow(n,y)-1)}class ic{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let d=null;const y=a.expectedType;y&&y.kind!=="value"&&(d=y);const x=[];for(const b of n.slice(1)){const k=a.parse(b,1+x.length,d,void 0,{typeAnnotation:"omit"});if(!k)return null;d=d||k.type,x.push(k)}if(!d)throw new Error("No output type");const w=y&&x.some(b=>ue(y,b.type));return new ic(w?Xt:d,x)}evaluate(n){let a,d=null,y=0;for(const x of this.args)if(y++,d=x.evaluate(n),d&&d instanceof Di&&!d.available&&(a||(a=d.name),d=null,y===this.args.length&&(d=a)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function sc(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Dp(s,n,a,d){return d.compare(n,a)===0}function ja(s,n,a){const d=s!=="=="&&s!=="!=";return class _P{constructor(x,w,b){this.type=jt,this.lhs=x,this.rhs=w,this.collator=b,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const b=x[0];let k=w.parse(x[1],1,Xt);if(!k)return null;if(!sc(b,k.type))return w.concat(1).error(`"${b}" comparisons are not supported for type '${W(k.type)}'.`);let I=w.parse(x[2],2,Xt);if(!I)return null;if(!sc(b,I.type))return w.concat(2).error(`"${b}" comparisons are not supported for type '${W(I.type)}'.`);if(k.type.kind!==I.type.kind&&k.type.kind!=="value"&&I.type.kind!=="value")return w.error(`Cannot compare types '${W(k.type)}' and '${W(I.type)}'.`);d&&(k.type.kind==="value"&&I.type.kind!=="value"?k=new gs(I.type,[k]):k.type.kind!=="value"&&I.type.kind==="value"&&(I=new gs(k.type,[I])));let D=null;if(x.length===4){if(k.type.kind!=="string"&&I.type.kind!=="string"&&k.type.kind!=="value"&&I.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(D=w.parse(x[3],3,Yi),!D)return null}return new _P(k,I,D)}evaluate(x){const w=this.lhs.evaluate(x),b=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){const k=En(w),I=En(b);if(k.kind!==I.kind||k.kind!=="string"&&k.kind!=="number")throw new xn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${k.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const k=En(w),I=En(b);if(k.kind!=="string"||I.kind!=="string")return n(x,w,b)}return this.collator?a(x,w,b,this.collator.evaluate(x)):n(x,w,b)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const z_=ja("==",function(s,n,a){return n===a},Dp),zp=ja("!=",function(s,n,a){return n!==a},function(s,n,a,d){return!Dp(0,n,a,d)}),Rp=ja("<",function(s,n,a){return n<a},function(s,n,a,d){return d.compare(n,a)<0}),R_=ja(">",function(s,n,a){return n>a},function(s,n,a,d){return d.compare(n,a)>0}),L_=ja("<=",function(s,n,a){return n<=a},function(s,n,a,d){return d.compare(n,a)<=0}),Lp=ja(">=",function(s,n,a){return n>=a},function(s,n,a,d){return d.compare(n,a)>=0});class Xl{constructor(n,a,d){this.type=Yi,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return a.error("Collator options argument must be an object.");const y=a.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,jt);if(!y)return null;const x=a.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,jt);if(!x)return null;let w=null;return d.locale&&(w=a.parse(d.locale,1,Kt),!w)?null:new Xl(y,x,w)}evaluate(n){return new qh(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class ed{constructor(n,a,d,y,x){this.type=Kt,this.number=n,this.locale=a,this.currency=d,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const d=a.parse(n[1],1,Qe);if(!d)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return a.error("NumberFormat options argument must be an object.");let x=null;if(y.locale&&(x=a.parse(y.locale,1,Kt),!x))return null;let w=null;if(y.currency&&(w=a.parse(y.currency,1,Kt),!w))return null;let b=null;if(y["min-fraction-digits"]&&(b=a.parse(y["min-fraction-digits"],1,Qe),!b))return null;let k=null;return y["max-fraction-digits"]&&(k=a.parse(y["max-fraction-digits"],1,Qe),!k)?null:new ed(d,x,w,b,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class oc{constructor(n){this.type=fs,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return a.error("First argument must be an image or text section.");const y=[];let x=!1;for(let w=1;w<=n.length-1;++w){const b=n[w];if(x&&typeof b=="object"&&!Array.isArray(b)){x=!1;let k=null;if(b["font-scale"]&&(k=a.parse(b["font-scale"],1,Qe),!k))return null;let I=null;if(b["text-font"]&&(I=a.parse(b["text-font"],1,G(Kt)),!I))return null;let D=null;if(b["text-color"]&&(D=a.parse(b["text-color"],1,Kr),!D))return null;const L=y[y.length-1];L.scale=k,L.font=I,L.textColor=D}else{const k=a.parse(n[w],1,Xt);if(!k)return null;const I=k.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,y.push({content:k,scale:null,font:null,textColor:null})}}return new oc(y)}evaluate(n){return new Mi(this.sections.map(a=>{const d=a.content.evaluate(n);return En(d)===Hn?new Yh("",d,null,null,null):new Yh(Zl(d),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}}class td{constructor(n){this.type=Hn,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const d=a.parse(n[1],1,Kt);return d?new td(d):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),d=Di.fromString(a);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(a)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class rd{constructor(n){this.type=Qe,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=a.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${W(d.type)} instead.`):new rd(d):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new xn(`Expected value to be of type string or array, but found ${W(En(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Us=8192;function O_(s,n){const a=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(a*y*Us),Math.round(d*y*Us)]}function nd(s,n){const a=Math.pow(2,n.z);return[(y=(s[0]/Us+n.x)/a,360*y-180),(d=(s[1]/Us+n.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,y}function ea(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function Mo(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function Er(s,n,a){const d=s[0]-n[0],y=s[1]-n[1],x=s[0]-a[0],w=s[1]-a[1];return d*w-x*y==0&&d*x<=0&&y*w<=0}function ac(s,n,a,d){return(y=[d[0]-a[0],d[1]-a[1]])[0]*(x=[n[0]-s[0],n[1]-s[1]])[1]-y[1]*x[0]!=0&&!(!Fp(s,n,a,d)||!Fp(a,d,s,n));var y,x}function F_(s,n,a){for(const d of a)for(let y=0;y<d.length-1;++y)if(ac(s,n,d[y],d[y+1]))return!0;return!1}function Ua(s,n,a=!1){let d=!1;for(const b of n)for(let k=0;k<b.length-1;k++){if(Er(s,b[k],b[k+1]))return a;(x=b[k])[1]>(y=s)[1]!=(w=b[k+1])[1]>y[1]&&y[0]<(w[0]-x[0])*(y[1]-x[1])/(w[1]-x[1])+x[0]&&(d=!d)}var y,x,w;return d}function B_(s,n){for(const a of n)if(Ua(s,a))return!0;return!1}function Op(s,n){for(const a of s)if(!Ua(a,n))return!1;for(let a=0;a<s.length-1;++a)if(F_(s[a],s[a+1],n))return!1;return!0}function N_(s,n){for(const a of n)if(Op(s,a))return!0;return!1}function Fp(s,n,a,d){const y=d[0]-a[0],x=d[1]-a[1],w=(s[0]-a[0])*x-y*(s[1]-a[1]),b=(n[0]-a[0])*x-y*(n[1]-a[1]);return w>0&&b<0||w<0&&b>0}function id(s,n,a){const d=[];for(let y=0;y<s.length;y++){const x=[];for(let w=0;w<s[y].length;w++){const b=O_(s[y][w],a);ea(n,b),x.push(b)}d.push(x)}return d}function Bp(s,n,a){const d=[];for(let y=0;y<s.length;y++){const x=id(s[y],n,a);d.push(x)}return d}function Np(s,n,a,d){if(s[0]<a[0]||s[0]>a[2]){const y=.5*d;let x=s[0]-a[0]>y?-d:a[0]-s[0]>y?d:0;x===0&&(x=s[0]-a[2]>y?-d:a[2]-s[0]>y?d:0),s[0]+=x}ea(n,s)}function $p(s,n,a,d){const y=Math.pow(2,d.z)*Us,x=[d.x*Us,d.y*Us],w=[];for(const b of s)for(const k of b){const I=[k.x+x[0],k.y+x[1]];Np(I,n,a,y),w.push(I)}return w}function jp(s,n,a,d){const y=Math.pow(2,d.z)*Us,x=[d.x*Us,d.y*Us],w=[];for(const k of s){const I=[];for(const D of k){const L=[D.x+x[0],D.y+x[1]];ea(n,L),I.push(L)}w.push(I)}if(n[2]-n[0]<=y/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const k of w)for(const I of k)Np(I,n,a,y)}var b;return w}class ta{constructor(n,a){this.type=jt,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ko(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const y=[];for(const x of d.features){const{type:w,coordinates:b}=x.geometry;w==="Polygon"&&y.push(b),w==="MultiPolygon"&&y.push(...b)}if(y.length)return new ta(d,{type:"MultiPolygon",coordinates:y})}else if(d.type==="Feature"){const y=d.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new ta(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ta(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,d){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=a.canonicalID();if(d.type==="Polygon"){const b=id(d.coordinates,x,w),k=$p(a.geometry(),y,x,w);if(!Mo(y,x))return!1;for(const I of k)if(!Ua(I,b))return!1}if(d.type==="MultiPolygon"){const b=Bp(d.coordinates,x,w),k=$p(a.geometry(),y,x,w);if(!Mo(y,x))return!1;for(const I of k)if(!B_(I,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,d){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=a.canonicalID();if(d.type==="Polygon"){const b=id(d.coordinates,x,w),k=jp(a.geometry(),y,x,w);if(!Mo(y,x))return!1;for(const I of k)if(!Op(I,b))return!1}if(d.type==="MultiPolygon"){const b=Bp(d.coordinates,x,w),k=jp(a.geometry(),y,x,w);if(!Mo(y,x))return!1;for(const I of k)if(!N_(I,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Up=class{constructor(s=[],n=(a,d)=>a<d?-1:a>d?1:0){if(this.data=s,this.length=this.data.length,this.compare=n,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:n,compare:a}=this,d=n[s];for(;s>0;){const y=s-1>>1,x=n[y];if(a(d,x)>=0)break;n[s]=x,s=y}n[s]=d}_down(s){const{data:n,compare:a}=this,d=this.length>>1,y=n[s];for(;s<d;){let x=1+(s<<1);const w=x+1;if(w<this.length&&a(n[w],n[x])<0&&(x=w),a(n[x],y)>=0)break;n[s]=n[x],s=x}n[s]=y}};function $_(s,n,a,d,y){Vp(s,n,a,d||s.length-1,y||j_)}function Vp(s,n,a,d,y){for(;d>a;){if(d-a>600){var x=d-a+1,w=n-a+1,b=Math.log(x),k=.5*Math.exp(2*b/3),I=.5*Math.sqrt(b*k*(x-k)/x)*(w-x/2<0?-1:1);Vp(s,n,Math.max(a,Math.floor(n-w*k/x+I)),Math.min(d,Math.floor(n+(x-w)*k/x+I)),y)}var D=s[n],L=a,j=d;for(Kl(s,a,n),y(s[d],D)>0&&Kl(s,a,d);L<j;){for(Kl(s,L,j),L++,j--;y(s[L],D)<0;)L++;for(;y(s[j],D)>0;)j--}y(s[a],D)===0?Kl(s,a,j):Kl(s,++j,d),j<=n&&(a=j+1),n<=j&&(d=j-1)}}function Kl(s,n,a){var d=s[n];s[n]=s[a],s[a]=d}function j_(s,n){return s<n?-1:s>n?1:0}function lc(s,n){if(s.length<=1)return[s];const a=[];let d,y;for(const x of s){const w=V_(x);w!==0&&(x.area=Math.abs(w),y===void 0&&(y=w<0),y===w<0?(d&&a.push(d),d=[x]):d.push(x))}if(d&&a.push(d),n>1)for(let x=0;x<a.length;x++)a[x].length<=n||($_(a[x],n,1,a[x].length-1,U_),a[x]=a[x].slice(0,n));return a}function U_(s,n){return n.area-s.area}function V_(s){let n=0;for(let a,d,y=0,x=s.length,w=x-1;y<x;w=y++)a=s[y],d=s[w],n+=(d.x-a.x)*(a.y+d.y);return n}const Hp=1/298.257223563,Wp=Hp*(2-Hp),Gp=Math.PI/180;class sd{constructor(n){const a=6378.137*Gp*1e3,d=Math.cos(n*Gp),y=1/(1-Wp*(1-d*d)),x=Math.sqrt(y);this.kx=a*x*d,this.ky=a*x*y*(1-Wp)}distance(n,a){const d=this.wrap(n[0]-a[0])*this.kx,y=(n[1]-a[1])*this.ky;return Math.sqrt(d*d+y*y)}pointOnLine(n,a){let d,y,x,w,b=1/0;for(let k=0;k<n.length-1;k++){let I=n[k][0],D=n[k][1],L=this.wrap(n[k+1][0]-I)*this.kx,j=(n[k+1][1]-D)*this.ky,Z=0;L===0&&j===0||(Z=(this.wrap(a[0]-I)*this.kx*L+(a[1]-D)*this.ky*j)/(L*L+j*j),Z>1?(I=n[k+1][0],D=n[k+1][1]):Z>0&&(I+=L/this.kx*Z,D+=j/this.ky*Z)),L=this.wrap(a[0]-I)*this.kx,j=(a[1]-D)*this.ky;const K=L*L+j*j;K<b&&(b=K,d=I,y=D,x=k,w=Z)}return{point:[d,y],index:x,t:Math.max(0,Math.min(1,w))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Zp(s,n){return n[0]-s[0]}function uc(s){return s[1]-s[0]+1}function ao(s,n){return s[1]>=s[0]&&s[1]<n}function od(s,n){if(s[0]>s[1])return[null,null];const a=uc(s);if(n){if(a===2)return[s,null];const y=Math.floor(a/2);return[[s[0],s[0]+y],[s[0]+y,s[1]]]}if(a===1)return[s,null];const d=Math.floor(a/2)-1;return[[s[0],s[0]+d],[s[0]+d+1,s[1]]]}function ad(s,n){if(!ao(n,s.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)ea(a,s[d]);return a}function ld(s){const n=[1/0,1/0,-1/0,-1/0];for(const a of s)for(const d of a)ea(n,d);return n}function cc(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function ud(s,n,a){if(!cc(s)||!cc(n))return NaN;let d=0,y=0;return s[2]<n[0]&&(d=n[0]-s[2]),s[0]>n[2]&&(d=s[0]-n[2]),s[1]>n[3]&&(y=s[1]-n[3]),s[3]<n[1]&&(y=n[1]-s[3]),a.distance([0,0],[d,y])}function ra(s,n,a){const d=a.pointOnLine(n,s);return a.distance(s,d.point)}function cd(s,n,a,d,y){const x=Math.min(ra(s,[a,d],y),ra(n,[a,d],y)),w=Math.min(ra(a,[s,n],y),ra(d,[s,n],y));return Math.min(x,w)}function H_(s,n,a,d,y){if(!ao(n,s.length)||!ao(d,a.length))return 1/0;let x=1/0;for(let w=n[0];w<n[1];++w){const b=s[w],k=s[w+1];for(let I=d[0];I<d[1];++I){const D=a[I],L=a[I+1];if(ac(b,k,D,L))return 0;x=Math.min(x,cd(b,k,D,L,y))}}return x}function fn(s,n,a,d,y){if(!ao(n,s.length)||!ao(d,a.length))return NaN;let x=1/0;for(let w=n[0];w<=n[1];++w)for(let b=d[0];b<=d[1];++b)if(x=Math.min(x,y.distance(s[w],a[b])),x===0)return x;return x}function W_(s,n,a){if(Ua(s,n,!0))return 0;let d=1/0;for(const y of n){const x=y[0],w=y[y.length-1];if(x!==w&&(d=Math.min(d,ra(s,[w,x],a)),d===0))return d;const b=a.pointOnLine(y,s);if(d=Math.min(d,a.distance(s,b.point)),d===0)return d}return d}function ir(s,n,a,d){if(!ao(n,s.length))return NaN;for(let x=n[0];x<=n[1];++x)if(Ua(s[x],a,!0))return 0;let y=1/0;for(let x=n[0];x<n[1];++x){const w=s[x],b=s[x+1];for(const k of a)for(let I=0,D=k.length,L=D-1;I<D;L=I++){const j=k[L],Z=k[I];if(ac(w,b,j,Z))return 0;y=Math.min(y,cd(w,b,j,Z,d))}}return y}function hc(s,n){for(const a of s)for(const d of a)if(Ua(d,n,!0))return!0;return!1}function Nr(s,n,a,d=1/0){const y=ld(s),x=ld(n);if(d!==1/0&&ud(y,x,a)>=d)return d;if(Mo(y,x)){if(hc(s,n))return 0}else if(hc(n,s))return 0;let w=1/0;for(const b of s)for(let k=0,I=b.length,D=I-1;k<I;D=k++){const L=b[D],j=b[k];for(const Z of n)for(let K=0,J=Z.length,le=J-1;K<J;le=K++){const fe=Z[le],De=Z[K];if(ac(L,j,fe,De))return 0;w=Math.min(w,cd(L,j,fe,De,a))}}return w}function Rr(s,n,a,d,y,x){if(!x)return;const w=ud(ad(d,x),y,a);w<n&&s.push([w,x,[0,0]])}function na(s,n,a,d,y,x,w){if(!x||!w)return;const b=ud(ad(d,x),ad(y,w),a);b<n&&s.push([b,x,w])}function Jl(s,n,a,d,y=1/0){let x=Math.min(d.distance(s[0],a[0][0]),y);if(x===0)return x;const w=new Up([[0,[0,s.length-1],[0,0]]],Zp),b=ld(a);for(;w.length>0;){const k=w.pop();if(k[0]>=x)continue;const I=k[1],D=n?50:100;if(uc(I)<=D){if(!ao(I,s.length))return NaN;if(n){const L=ir(s,I,a,d);if(isNaN(L)||L===0)return L;x=Math.min(x,L)}else for(let L=I[0];L<=I[1];++L){const j=W_(s[L],a,d);if(x=Math.min(x,j),x===0)return 0}}else{const L=od(I,n);Rr(w,x,d,s,b,L[0]),Rr(w,x,d,s,b,L[1])}}return x}function Ql(s,n,a,d,y,x=1/0){let w=Math.min(x,y.distance(s[0],a[0]));if(w===0)return w;const b=new Up([[0,[0,s.length-1],[0,a.length-1]]],Zp);for(;b.length>0;){const k=b.pop();if(k[0]>=w)continue;const I=k[1],D=k[2],L=n?50:100,j=d?50:100;if(uc(I)<=L&&uc(D)<=j){if(!ao(I,s.length)&&ao(D,a.length))return NaN;let Z;if(n&&d)Z=H_(s,I,a,D,y),w=Math.min(w,Z);else if(n&&!d){const K=s.slice(I[0],I[1]+1);for(let J=D[0];J<=D[1];++J)if(Z=ra(a[J],K,y),w=Math.min(w,Z),w===0)return w}else if(!n&&d){const K=a.slice(D[0],D[1]+1);for(let J=I[0];J<=I[1];++J)if(Z=ra(s[J],K,y),w=Math.min(w,Z),w===0)return w}else Z=fn(s,I,a,D,y),w=Math.min(w,Z)}else{const Z=od(I,n),K=od(D,d);na(b,w,y,s,a,Z[0],K[0]),na(b,w,y,s,a,Z[0],K[1]),na(b,w,y,s,a,Z[1],K[0]),na(b,w,y,s,a,Z[1],K[1])}}return w}function hd(s){return s.type==="MultiPolygon"?s.coordinates.map(n=>({type:"Polygon",coordinates:n})):s.type==="MultiLineString"?s.coordinates.map(n=>({type:"LineString",coordinates:n})):s.type==="MultiPoint"?s.coordinates.map(n=>({type:"Point",coordinates:n})):[s]}class ia{constructor(n,a){this.type=Qe,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ko(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new ia(d,d.features.map(y=>hd(y.geometry)).flat());if(d.type==="Feature")return new ia(d,hd(d.geometry));if("type"in d&&"coordinates"in d)return new ia(d,hd(d))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,d){const y=a.geometry(),x=y.flat().map(k=>nd([k.x,k.y],a.canonical));if(y.length===0)return NaN;const w=new sd(x[0][1]);let b=1/0;for(const k of d){switch(k.type){case"Point":b=Math.min(b,Ql(x,!1,[k.coordinates],!1,w,b));break;case"LineString":b=Math.min(b,Ql(x,!1,k.coordinates,!0,w,b));break;case"Polygon":b=Math.min(b,Jl(x,!1,k.coordinates,w,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,d){const y=a.geometry(),x=y.flat().map(k=>nd([k.x,k.y],a.canonical));if(y.length===0)return NaN;const w=new sd(x[0][1]);let b=1/0;for(const k of d){switch(k.type){case"Point":b=Math.min(b,Ql(x,!0,[k.coordinates],!1,w,b));break;case"LineString":b=Math.min(b,Ql(x,!0,k.coordinates,!0,w,b));break;case"Polygon":b=Math.min(b,Jl(x,!0,k.coordinates,w,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(a,d){const y=a.geometry();if(y.length===0||y[0].length===0)return NaN;const x=lc(y,0).map(k=>k.map(I=>I.map(D=>nd([D.x,D.y],a.canonical)))),w=new sd(x[0][0][0][1]);let b=1/0;for(const k of d)for(const I of x){switch(k.type){case"Point":b=Math.min(b,Jl([k.coordinates],!1,I,w,b));break;case"LineString":b=Math.min(b,Jl(k.coordinates,!0,I,w,b));break;case"Polygon":b=Math.min(b,Nr(I,k.coordinates,w,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Va={"==":z_,"!=":zp,">":R_,"<":Rp,">=":Lp,"<=":L_,array:gs,at:Kh,boolean:gs,case:tc,coalesce:ic,collator:Xl,format:oc,image:td,in:Jh,"index-of":Na,interpolate:yi,"interpolate-hcl":yi,"interpolate-lab":yi,length:rd,let:Po,literal:ms,match:Qh,number:gs,"number-format":ed,object:gs,slice:ql,step:$a,string:gs,"to-boolean":ys,"to-color":ys,"to-number":ys,"to-string":ys,var:Sr,within:ta,distance:ia};class Ki{constructor(n,a,d,y){this.name=n,this.type=a,this._evaluate=d,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const d=n[0],y=Ki.definitions[d];if(!y)return a.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(y)?y[0]:y.type,w=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,b=w.filter(([I])=>!Array.isArray(I)||I.length===n.length-1);let k=null;for(const[I,D]of b){k=new Jo(a.registry,eu,a.path,null,a.scope);const L=[];let j=!1;for(let Z=1;Z<n.length;Z++){const K=n[Z],J=Array.isArray(I)?I[Z-1]:I.type,le=k.parse(K,1+L.length,J);if(!le){j=!0;break}L.push(le)}if(!j)if(Array.isArray(I)&&I.length!==L.length)k.error(`Expected ${I.length} arguments, but found ${L.length} instead.`);else{for(let Z=0;Z<L.length;Z++){const K=Array.isArray(I)?I[Z]:I.type,J=L[Z];k.concat(Z+1).checkSubtype(K,J.type)}if(k.errors.length===0)return new Ki(d,x,D,L)}}if(b.length===1)a.errors.push(...k.errors);else{const I=(b.length?b:w).map(([L])=>{return j=L,Array.isArray(j)?`(${j.map(W).join(", ")})`:`(${W(j.type)}...)`;var j}).join(" | "),D=[];for(let L=1;L<n.length;L++){const j=a.parse(n[L],1+D.length);if(!j)return null;D.push(W(j.type))}a.error(`Expected arguments of type ${I}, but found (${D.join(", ")}) instead.`)}return null}static register(n,a){Ki.definitions=a;for(const d in a)n[d]=Ki}}function dd(s,[n,a,d,y]){n=n.evaluate(s),a=a.evaluate(s),d=d.evaluate(s);const x=y?y.evaluate(s):1,w=Ba(n,a,d,x);if(w)throw new xn(w);return new Ar(n/255,a/255,d/255,x,!1)}function fd(s,n){return s in n}function pd(s,n){const a=n[s];return a===void 0?null:a}function sa(s){return{type:s}}function eu(s){if(s instanceof Sr)return eu(s.boundExpression);if(s instanceof Ki&&s.name==="error"||s instanceof Xl||s instanceof ta||s instanceof ia)return!1;const n=s instanceof ys||s instanceof gs;let a=!0;return s.eachChild(d=>{a=n?a&&eu(d):a&&d instanceof ms}),!!a&&tu(s)&&ru(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tu(s){if(s instanceof Ki&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ta||s instanceof ia)return!1;let n=!0;return s.eachChild(a=>{n&&!tu(a)&&(n=!1)}),n}function Ha(s){if(s instanceof Ki&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(a=>{n&&!Ha(a)&&(n=!1)}),n}function ru(s,n){if(s instanceof Ki&&n.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(d=>{a&&!ru(d,n)&&(a=!1)}),a}function dc(s){return{result:"success",value:s}}function Wa(s){return{result:"error",value:s}}function Ga(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function qp(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function md(s){return!!s.expression&&s.expression.interpolated}function vr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function fc(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function G_(s){return s}function Yp(s,n){const a=n.type==="color",d=s.stops&&typeof s.stops[0][0]=="object",y=d||!(d||s.property!==void 0),x=s.type||(md(n)?"exponential":"interval");if(a||n.type==="padding"){const D=a?Ar.parse:Ai.parse;(s=tn({},s)).stops&&(s.stops=s.stops.map(L=>[L[0],D(L[1])])),s.default=D(s.default?s.default:n.default)}if(s.colorSpace&&(w=s.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var w;let b,k,I;if(x==="exponential")b=Kp;else if(x==="interval")b=pc;else if(x==="categorical"){b=Xp,k=Object.create(null);for(const D of s.stops)k[D[0]]=D[1];I=typeof s.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);b=Jp}if(d){const D={},L=[];for(let K=0;K<s.stops.length;K++){const J=s.stops[K],le=J[0].zoom;D[le]===void 0&&(D[le]={zoom:le,type:s.type,property:s.property,default:s.default,stops:[]},L.push(le)),D[le].stops.push([J[0].value,J[1]])}const j=[];for(const K of L)j.push([D[K].zoom,Yp(D[K],n)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:yi.interpolationFactor.bind(void 0,Z),zoomStops:j.map(K=>K[0]),evaluate:({zoom:K},J)=>Kp({stops:j,base:s.base},n,K).evaluate(K,J)}}if(y){const D=x==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:yi.interpolationFactor.bind(void 0,D),zoomStops:s.stops.map(L=>L[0]),evaluate:({zoom:L})=>b(s,n,L,k,I)}}return{kind:"source",evaluate(D,L){const j=L&&L.properties?L.properties[s.property]:void 0;return j===void 0?Za(s.default,n.default):b(s,n,j,k,I)}}}function Za(s,n,a){return s!==void 0?s:n!==void 0?n:a!==void 0?a:void 0}function Xp(s,n,a,d,y){return Za(typeof a===y?d[a]:void 0,s.default,n.default)}function pc(s,n,a){if(vr(a)!=="number")return Za(s.default,n.default);const d=s.stops.length;if(d===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[d-1][0])return s.stops[d-1][1];const y=rc(s.stops.map(x=>x[0]),a);return s.stops[y][1]}function Kp(s,n,a){const d=s.base!==void 0?s.base:1;if(vr(a)!=="number")return Za(s.default,n.default);const y=s.stops.length;if(y===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[y-1][0])return s.stops[y-1][1];const x=rc(s.stops.map(D=>D[0]),a),w=function(D,L,j,Z){const K=Z-j,J=D-j;return K===0?0:L===1?J/K:(Math.pow(L,J)-1)/(Math.pow(L,K)-1)}(a,d,s.stops[x][0],s.stops[x+1][0]),b=s.stops[x][1],k=s.stops[x+1][1],I=gi[n.type]||G_;return typeof b.evaluate=="function"?{evaluate(...D){const L=b.evaluate.apply(void 0,D),j=k.evaluate.apply(void 0,D);if(L!==void 0&&j!==void 0)return I(L,j,w,s.colorSpace)}}:I(b,k,w,s.colorSpace)}function Jp(s,n,a){switch(n.type){case"color":a=Ar.parse(a);break;case"formatted":a=Mi.fromString(a.toString());break;case"resolvedImage":a=Di.fromString(a.toString());break;case"padding":a=Ai.parse(a);break;default:vr(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return Za(a,s.default,n.default)}Ki.register(Va,{error:[{kind:"error"},[Kt],(s,[n])=>{throw new xn(n.evaluate(s))}],typeof:[Kt,[Xt],(s,[n])=>W(En(n.evaluate(s)))],"to-rgba":[G(Qe,4),[Kr],(s,[n])=>{const[a,d,y,x]=n.evaluate(s).rgb;return[255*a,255*d,255*y,x]}],rgb:[Kr,[Qe,Qe,Qe],dd],rgba:[Kr,[Qe,Qe,Qe,Qe],dd],has:{type:jt,overloads:[[[Kt],(s,[n])=>fd(n.evaluate(s),s.properties())],[[Kt,mi],(s,[n,a])=>fd(n.evaluate(s),a.evaluate(s))]]},get:{type:Xt,overloads:[[[Kt],(s,[n])=>pd(n.evaluate(s),s.properties())],[[Kt,mi],(s,[n,a])=>pd(n.evaluate(s),a.evaluate(s))]]},"feature-state":[Xt,[Kt],(s,[n])=>pd(n.evaluate(s),s.featureState||{})],properties:[mi,[],s=>s.properties()],"geometry-type":[Kt,[],s=>s.geometryType()],id:[Xt,[],s=>s.id()],zoom:[Qe,[],s=>s.globals.zoom],"heatmap-density":[Qe,[],s=>s.globals.heatmapDensity||0],"line-progress":[Qe,[],s=>s.globals.lineProgress||0],accumulated:[Xt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Qe,sa(Qe),(s,n)=>{let a=0;for(const d of n)a+=d.evaluate(s);return a}],"*":[Qe,sa(Qe),(s,n)=>{let a=1;for(const d of n)a*=d.evaluate(s);return a}],"-":{type:Qe,overloads:[[[Qe,Qe],(s,[n,a])=>n.evaluate(s)-a.evaluate(s)],[[Qe],(s,[n])=>-n.evaluate(s)]]},"/":[Qe,[Qe,Qe],(s,[n,a])=>n.evaluate(s)/a.evaluate(s)],"%":[Qe,[Qe,Qe],(s,[n,a])=>n.evaluate(s)%a.evaluate(s)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(s,[n,a])=>Math.pow(n.evaluate(s),a.evaluate(s))],sqrt:[Qe,[Qe],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[Qe,[Qe],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[Qe,[Qe],(s,[n])=>Math.log(n.evaluate(s))],log2:[Qe,[Qe],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[Qe,[Qe],(s,[n])=>Math.sin(n.evaluate(s))],cos:[Qe,[Qe],(s,[n])=>Math.cos(n.evaluate(s))],tan:[Qe,[Qe],(s,[n])=>Math.tan(n.evaluate(s))],asin:[Qe,[Qe],(s,[n])=>Math.asin(n.evaluate(s))],acos:[Qe,[Qe],(s,[n])=>Math.acos(n.evaluate(s))],atan:[Qe,[Qe],(s,[n])=>Math.atan(n.evaluate(s))],min:[Qe,sa(Qe),(s,n)=>Math.min(...n.map(a=>a.evaluate(s)))],max:[Qe,sa(Qe),(s,n)=>Math.max(...n.map(a=>a.evaluate(s)))],abs:[Qe,[Qe],(s,[n])=>Math.abs(n.evaluate(s))],round:[Qe,[Qe],(s,[n])=>{const a=n.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[Qe,[Qe],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[Qe,[Qe],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[jt,[Kt,Xt],(s,[n,a])=>s.properties()[n.value]===a.value],"filter-id-==":[jt,[Xt],(s,[n])=>s.id()===n.value],"filter-type-==":[jt,[Kt],(s,[n])=>s.geometryType()===n.value],"filter-<":[jt,[Kt,Xt],(s,[n,a])=>{const d=s.properties()[n.value],y=a.value;return typeof d==typeof y&&d<y}],"filter-id-<":[jt,[Xt],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a<d}],"filter->":[jt,[Kt,Xt],(s,[n,a])=>{const d=s.properties()[n.value],y=a.value;return typeof d==typeof y&&d>y}],"filter-id->":[jt,[Xt],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a>d}],"filter-<=":[jt,[Kt,Xt],(s,[n,a])=>{const d=s.properties()[n.value],y=a.value;return typeof d==typeof y&&d<=y}],"filter-id-<=":[jt,[Xt],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a<=d}],"filter->=":[jt,[Kt,Xt],(s,[n,a])=>{const d=s.properties()[n.value],y=a.value;return typeof d==typeof y&&d>=y}],"filter-id->=":[jt,[Xt],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a>=d}],"filter-has":[jt,[Xt],(s,[n])=>n.value in s.properties()],"filter-has-id":[jt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[jt,[G(Kt)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[jt,[G(Xt)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[jt,[Kt,G(Xt)],(s,[n,a])=>a.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[jt,[Kt,G(Xt)],(s,[n,a])=>function(d,y,x,w){for(;x<=w;){const b=x+w>>1;if(y[b]===d)return!0;y[b]>d?w=b-1:x=b+1}return!1}(s.properties()[n.value],a.value,0,a.value.length-1)],all:{type:jt,overloads:[[[jt,jt],(s,[n,a])=>n.evaluate(s)&&a.evaluate(s)],[sa(jt),(s,n)=>{for(const a of n)if(!a.evaluate(s))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],(s,[n,a])=>n.evaluate(s)||a.evaluate(s)],[sa(jt),(s,n)=>{for(const a of n)if(a.evaluate(s))return!0;return!1}]]},"!":[jt,[jt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[jt,[Kt],(s,[n])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(n.evaluate(s))}],upcase:[Kt,[Kt],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Kt,[Kt],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Kt,sa(Xt),(s,n)=>n.map(a=>Zl(a.evaluate(s))).join("")],"resolved-locale":[Kt,[Yi],(s,[n])=>n.evaluate(s).resolvedLocale()]});class mc{constructor(n,a){var d;this.expression=n,this._warningHistory={},this._evaluator=new ec,this._defaultValue=a?(d=a).type==="color"&&fc(d.default)?new Ar(0,0,0,0):d.type==="color"?Ar.parse(d.default)||null:d.type==="padding"?Ai.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?Xi.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,d,y,x,w){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(n,a,d,y,x,w){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new xn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function gc(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Va}function qa(s,n){const a=new Jo(Va,eu,[],n?function(y){const x={color:Kr,string:Kt,number:Qe,enum:Kt,boolean:jt,formatted:fs,padding:ps,resolvedImage:Hn,variableAnchorOffsetCollection:he};return y.type==="array"?G(x[y.value]||Xt,y.length):x[y.type]}(n):void 0),d=a.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?dc(new mc(d,n)):Wa(a.errors)}class Ya{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Ha(a.expression)}evaluateWithoutErrorHandling(n,a,d,y,x,w){return this._styleExpression.evaluateWithoutErrorHandling(n,a,d,y,x,w)}evaluate(n,a,d,y,x,w){return this._styleExpression.evaluate(n,a,d,y,x,w)}}class Xa{constructor(n,a,d,y){this.kind=n,this.zoomStops=d,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Ha(a.expression),this.interpolationType=y}evaluateWithoutErrorHandling(n,a,d,y,x,w){return this._styleExpression.evaluateWithoutErrorHandling(n,a,d,y,x,w)}evaluate(n,a,d,y,x,w){return this._styleExpression.evaluate(n,a,d,y,x,w)}interpolationFactor(n,a,d){return this.interpolationType?yi.interpolationFactor(this.interpolationType,n,a,d):0}}function gd(s,n){const a=qa(s,n);if(a.result==="error")return a;const d=a.value.expression,y=tu(d);if(!y&&!Ga(n))return Wa([new _n("","data expressions not supported")]);const x=ru(d,["zoom"]);if(!x&&!qp(n))return Wa([new _n("","zoom expressions not supported")]);const w=nu(d);return w||x?w instanceof _n?Wa([w]):w instanceof yi&&!md(n)?Wa([new _n("",'"interpolate" expressions cannot be used with this property')]):dc(w?new Xa(y?"camera":"composite",a.value,w.labels,w instanceof yi?w.interpolation:void 0):new Ya(y?"constant":"source",a.value)):Wa([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ka{constructor(n,a){this._parameters=n,this._specification=a,tn(this,Yp(this._parameters,this._specification))}static deserialize(n){return new Ka(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function nu(s){let n=null;if(s instanceof Po)n=nu(s.result);else if(s instanceof ic){for(const a of s.args)if(n=nu(a),n)break}else(s instanceof $a||s instanceof yi)&&s.input instanceof Ki&&s.input.name==="zoom"&&(n=s);return n instanceof _n||s.eachChild(a=>{const d=nu(a);d instanceof _n?n=d:!n&&d?n=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function yc(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!yc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const _c={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yd(s){if(s==null)return{filter:()=>!0,needGeometry:!1};yc(s)||(s=vc(s));const n=qa(s,_c);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,d,y)=>n.value.evaluate(a,d,{},y),needGeometry:Qp(s)}}function Z_(s,n){return s<n?-1:s>n?1:0}function Qp(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let n=1;n<s.length;n++)if(Qp(s[n]))return!0;return!1}function vc(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?_d(s[1],s[2],"=="):n==="!="?Wn(_d(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?_d(s[1],s[2],n):n==="any"?(a=s.slice(1),["any"].concat(a.map(vc))):n==="all"?["all"].concat(s.slice(1).map(vc)):n==="none"?["all"].concat(s.slice(1).map(vc).map(Wn)):n==="in"?iu(s[1],s.slice(2)):n==="!in"?Wn(iu(s[1],s.slice(2))):n==="has"?su(s[1]):n!=="!has"||Wn(su(s[1]));var a}function _d(s,n,a){switch(s){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,s,n]}}function iu(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",s,["literal",n.sort(Z_)]]:["filter-in-small",s,["literal",n]]}}function su(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Wn(s){return["!",s]}function oa(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let y="[";for(const x of s)y+=`${oa(x)},`;return`${y}]`}const a=Object.keys(s).sort();let d="{";for(let y=0;y<a.length;y++)d+=`${JSON.stringify(a[y])}:${oa(s[a[y]])},`;return`${d}}`}function em(s){let n="";for(const a of de)n+=`/${oa(s[a])}`;return n}function tm(s){const n=s.value;return n?[new qe(s.key,n,"constants have been deprecated as of v8")]:[]}function pn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function _s(s){if(Array.isArray(s))return s.map(_s);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const a in s)n[a]=_s(s[a]);return n}return pn(s)}function zi(s){const n=s.key,a=s.value,d=s.valueSpec||{},y=s.objectElementValidators||{},x=s.style,w=s.styleSpec,b=s.validateSpec;let k=[];const I=vr(a);if(I!=="object")return[new qe(n,a,`object expected, ${I} found`)];for(const D in a){const L=D.split(".")[0],j=d[L]||d["*"];let Z;if(y[L])Z=y[L];else if(d[L])Z=b;else if(y["*"])Z=y["*"];else{if(!d["*"]){k.push(new qe(n,a[D],`unknown property "${D}"`));continue}Z=b}k=k.concat(Z({key:(n&&`${n}.`)+D,value:a[D],valueSpec:j,style:x,styleSpec:w,object:a,objectKey:D,validateSpec:b},a))}for(const D in d)y[D]||d[D].required&&d[D].default===void 0&&a[D]===void 0&&k.push(new qe(n,a,`missing required property "${D}"`));return k}function ou(s){const n=s.value,a=s.valueSpec,d=s.style,y=s.styleSpec,x=s.key,w=s.arrayElementValidator||s.validateSpec;if(vr(n)!=="array")return[new qe(x,n,`array expected, ${vr(n)} found`)];if(a.length&&n.length!==a.length)return[new qe(x,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new qe(x,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let b={type:a.value,values:a.values};y.$version<7&&(b.function=a.function),vr(a.value)==="object"&&(b=a.value);let k=[];for(let I=0;I<n.length;I++)k=k.concat(w({array:n,arrayIndex:I,value:n[I],valueSpec:b,validateSpec:s.validateSpec,style:d,styleSpec:y,key:`${x}[${I}]`}));return k}function vd(s){const n=s.key,a=s.value,d=s.valueSpec;let y=vr(a);return y==="number"&&a!=a&&(y="NaN"),y!=="number"?[new qe(n,a,`number expected, ${y} found`)]:"minimum"in d&&a<d.minimum?[new qe(n,a,`${a} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&a>d.maximum?[new qe(n,a,`${a} is greater than the maximum value ${d.maximum}`)]:[]}function xc(s){const n=s.valueSpec,a=pn(s.value.type);let d,y,x,w={};const b=a!=="categorical"&&s.value.property===void 0,k=!b,I=vr(s.value.stops)==="array"&&vr(s.value.stops[0])==="array"&&vr(s.value.stops[0][0])==="object",D=zi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Z){if(a==="identity")return[new qe(Z.key,Z.value,'identity function may not have a "stops" property')];let K=[];const J=Z.value;return K=K.concat(ou({key:Z.key,value:J,valueSpec:Z.valueSpec,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:L})),vr(J)==="array"&&J.length===0&&K.push(new qe(Z.key,J,"array must have at least one stop")),K},default:function(Z){return Z.validateSpec({key:Z.key,value:Z.value,valueSpec:n,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec})}}});return a==="identity"&&b&&D.push(new qe(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||D.push(new qe(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!md(s.valueSpec)&&D.push(new qe(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(k&&!Ga(s.valueSpec)?D.push(new qe(s.key,s.value,"property functions not supported")):b&&!qp(s.valueSpec)&&D.push(new qe(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!I||s.value.property!==void 0||D.push(new qe(s.key,s.value,'"property" property is required')),D;function L(Z){let K=[];const J=Z.value,le=Z.key;if(vr(J)!=="array")return[new qe(le,J,`array expected, ${vr(J)} found`)];if(J.length!==2)return[new qe(le,J,`array length 2 expected, length ${J.length} found`)];if(I){if(vr(J[0])!=="object")return[new qe(le,J,`object expected, ${vr(J[0])} found`)];if(J[0].zoom===void 0)return[new qe(le,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new qe(le,J,"object stop key must have value")];if(x&&x>pn(J[0].zoom))return[new qe(le,J[0].zoom,"stop zoom values must appear in ascending order")];pn(J[0].zoom)!==x&&(x=pn(J[0].zoom),y=void 0,w={}),K=K.concat(zi({key:`${le}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:vd,value:j}}))}else K=K.concat(j({key:`${le}[0]`,value:J[0],valueSpec:{},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec},J));return gc(_s(J[1]))?K.concat([new qe(`${le}[1]`,J[1],"expressions are not allowed in function stops.")]):K.concat(Z.validateSpec({key:`${le}[1]`,value:J[1],valueSpec:n,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec}))}function j(Z,K){const J=vr(Z.value),le=pn(Z.value),fe=Z.value!==null?Z.value:K;if(d){if(J!==d)return[new qe(Z.key,fe,`${J} stop domain type must match previous stop domain type ${d}`)]}else d=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new qe(Z.key,fe,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&a!=="categorical"){let De=`number expected, ${J} found`;return Ga(n)&&a===void 0&&(De+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(Z.key,fe,De)]}return a!=="categorical"||J!=="number"||isFinite(le)&&Math.floor(le)===le?a!=="categorical"&&J==="number"&&y!==void 0&&le<y?[new qe(Z.key,fe,"stop domain values must appear in ascending order")]:(y=le,a==="categorical"&&le in w?[new qe(Z.key,fe,"stop domain values must be unique")]:(w[le]=!0,[])):[new qe(Z.key,fe,`integer expected, found ${le}`)]}}function Ja(s){const n=(s.expressionContext==="property"?gd:qa)(_s(s.value),s.valueSpec);if(n.result==="error")return n.value.map(d=>new qe(`${s.key}${d.key}`,s.value,d.message));const a=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new qe(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Ha(a))return[new qe(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Ha(a))return[new qe(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!ru(a,["zoom","feature-state"]))return[new qe(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!tu(a))return[new qe(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lo(s){const n=s.key,a=s.value,d=s.valueSpec,y=[];return Array.isArray(d.values)?d.values.indexOf(pn(a))===-1&&y.push(new qe(n,a,`expected one of [${d.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(d.values).indexOf(pn(a))===-1&&y.push(new qe(n,a,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(a)} found`)),y}function xd(s){return yc(_s(s.value))?Ja(tn({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):wc(s)}function wc(s){const n=s.value,a=s.key;if(vr(n)!=="array")return[new qe(a,n,`array expected, ${vr(n)} found`)];const d=s.styleSpec;let y,x=[];if(n.length<1)return[new qe(a,n,"filter array must have at least 1 element")];switch(x=x.concat(lo({key:`${a}[0]`,value:n[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),pn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&pn(n[1])==="$type"&&x.push(new qe(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new qe(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=vr(n[1]),y!=="string"&&x.push(new qe(`${a}[1]`,n[1],`string expected, ${y} found`)));for(let w=2;w<n.length;w++)y=vr(n[w]),pn(n[1])==="$type"?x=x.concat(lo({key:`${a}[${w}]`,value:n[w],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&x.push(new qe(`${a}[${w}]`,n[w],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let w=1;w<n.length;w++)x=x.concat(wc({key:`${a}[${w}]`,value:n[w],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":y=vr(n[1]),n.length!==2?x.push(new qe(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&x.push(new qe(`${a}[1]`,n[1],`string expected, ${y} found`))}return x}function wd(s,n){const a=s.key,d=s.validateSpec,y=s.style,x=s.styleSpec,w=s.value,b=s.objectKey,k=x[`${n}_${s.layerType}`];if(!k)return[];const I=b.match(/^(.*)-transition$/);if(n==="paint"&&I&&k[I[1]]&&k[I[1]].transition)return d({key:a,value:w,valueSpec:x.transition,style:y,styleSpec:x});const D=s.valueSpec||k[b];if(!D)return[new qe(a,w,`unknown property "${b}"`)];let L;if(vr(w)==="string"&&Ga(D)&&!D.tokens&&(L=/^{([^}]+)}$/.exec(w)))return[new qe(a,w,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const j=[];return s.layerType==="symbol"&&(b==="text-field"&&y&&!y.glyphs&&j.push(new qe(a,w,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&fc(_s(w))&&pn(w.type)==="identity"&&j.push(new qe(a,w,'"text-font" does not support identity functions'))),j.concat(d({key:s.key,value:w,valueSpec:D,style:y,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:b}))}function bc(s){return wd(s,"paint")}function bd(s){return wd(s,"layout")}function Sd(s){let n=[];const a=s.value,d=s.key,y=s.style,x=s.styleSpec;a.type||a.ref||n.push(new qe(d,a,'either "type" or "ref" is required'));let w=pn(a.type);const b=pn(a.ref);if(a.id){const k=pn(a.id);for(let I=0;I<s.arrayIndex;I++){const D=y.layers[I];pn(D.id)===k&&n.push(new qe(d,a.id,`duplicate layer id "${a.id}", previously used at line ${D.id.__line__}`))}}if("ref"in a){let k;["type","source","source-layer","filter","layout"].forEach(I=>{I in a&&n.push(new qe(d,a[I],`"${I}" is prohibited for ref layers`))}),y.layers.forEach(I=>{pn(I.id)===b&&(k=I)}),k?k.ref?n.push(new qe(d,a.ref,"ref cannot reference another ref layer")):w=pn(k.type):n.push(new qe(d,a.ref,`ref layer "${b}" not found`))}else if(w!=="background")if(a.source){const k=y.sources&&y.sources[a.source],I=k&&pn(k.type);k?I==="vector"&&w==="raster"?n.push(new qe(d,a.source,`layer "${a.id}" requires a raster source`)):I!=="raster-dem"&&w==="hillshade"?n.push(new qe(d,a.source,`layer "${a.id}" requires a raster-dem source`)):I==="raster"&&w!=="raster"?n.push(new qe(d,a.source,`layer "${a.id}" requires a vector source`)):I!=="vector"||a["source-layer"]?I==="raster-dem"&&w!=="hillshade"?n.push(new qe(d,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!a.paint||!a.paint["line-gradient"]||I==="geojson"&&k.lineMetrics||n.push(new qe(d,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new qe(d,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new qe(d,a.source,`source "${a.source}" not found`))}else n.push(new qe(d,a,'missing required property "source"'));return n=n.concat(zi({key:d,value:a,valueSpec:x.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${d}.type`,value:a.type,valueSpec:x.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:xd,layout:k=>zi({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":I=>bd(tn({layerType:w},I))}}),paint:k=>zi({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":I=>bc(tn({layerType:w},I))}})}})),n}function aa(s){const n=s.value,a=s.key,d=vr(n);return d!=="string"?[new qe(a,n,`string expected, ${d} found`)]:[]}const Sc={promoteId:function({key:s,value:n}){if(vr(n)==="string")return aa({key:s,value:n});{const a=[];for(const d in n)a.push(...aa({key:`${s}.${d}`,value:n[d]}));return a}}};function au(s){const n=s.value,a=s.key,d=s.styleSpec,y=s.style,x=s.validateSpec;if(!n.type)return[new qe(a,n,'"type" is required')];const w=pn(n.type);let b;switch(w){case"vector":case"raster":return b=zi({key:a,value:n,valueSpec:d[`source_${w.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:Sc,validateSpec:x}),b;case"raster-dem":return b=function(k){var I;const D=(I=k.sourceName)!==null&&I!==void 0?I:"",L=k.value,j=k.styleSpec,Z=j.source_raster_dem,K=k.style;let J=[];const le=vr(L);if(L===void 0)return J;if(le!=="object")return J.push(new qe("source_raster_dem",L,`object expected, ${le} found`)),J;const fe=pn(L.encoding)==="custom",De=["redFactor","greenFactor","blueFactor","baseShift"],be=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const Me in L)!fe&&De.includes(Me)?J.push(new qe(Me,L[Me],`In "${D}": "${Me}" is only valid when "encoding" is set to "custom". ${be} encoding found`)):Z[Me]?J=J.concat(k.validateSpec({key:Me,value:L[Me],valueSpec:Z[Me],validateSpec:k.validateSpec,style:K,styleSpec:j})):J.push(new qe(Me,L[Me],`unknown property "${Me}"`));return J}({sourceName:a,value:n,style:s.style,styleSpec:d,validateSpec:x}),b;case"geojson":if(b=zi({key:a,value:n,valueSpec:d.source_geojson,style:y,styleSpec:d,validateSpec:x,objectElementValidators:Sc}),n.cluster)for(const k in n.clusterProperties){const[I,D]=n.clusterProperties[k],L=typeof I=="string"?[I,["accumulated"],["get",k]]:I;b.push(...Ja({key:`${a}.${k}.map`,value:D,validateSpec:x,expressionContext:"cluster-map"})),b.push(...Ja({key:`${a}.${k}.reduce`,value:L,validateSpec:x,expressionContext:"cluster-reduce"}))}return b;case"video":return zi({key:a,value:n,valueSpec:d.source_video,style:y,validateSpec:x,styleSpec:d});case"image":return zi({key:a,value:n,valueSpec:d.source_image,style:y,validateSpec:x,styleSpec:d});case"canvas":return[new qe(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return lo({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:x,styleSpec:d})}}function kd(s){const n=s.value,a=s.styleSpec,d=a.light,y=s.style;let x=[];const w=vr(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new qe("light",n,`object expected, ${w} found`)]),x;for(const b in n){const k=b.match(/^(.*)-transition$/);x=x.concat(k&&d[k[1]]&&d[k[1]].transition?s.validateSpec({key:b,value:n[b],valueSpec:a.transition,validateSpec:s.validateSpec,style:y,styleSpec:a}):d[b]?s.validateSpec({key:b,value:n[b],valueSpec:d[b],validateSpec:s.validateSpec,style:y,styleSpec:a}):[new qe(b,n[b],`unknown property "${b}"`)])}return x}function Td(s){const n=s.value,a=s.styleSpec,d=a.sky,y=s.style,x=vr(n);if(n===void 0)return[];if(x!=="object")return[new qe("sky",n,`object expected, ${x} found`)];let w=[];for(const b in n)w=w.concat(d[b]?s.validateSpec({key:b,value:n[b],valueSpec:d[b],style:y,styleSpec:a}):[new qe(b,n[b],`unknown property "${b}"`)]);return w}function Ed(s){const n=s.value,a=s.styleSpec,d=a.terrain,y=s.style;let x=[];const w=vr(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new qe("terrain",n,`object expected, ${w} found`)]),x;for(const b in n)x=x.concat(d[b]?s.validateSpec({key:b,value:n[b],valueSpec:d[b],validateSpec:s.validateSpec,style:y,styleSpec:a}):[new qe(b,n[b],`unknown property "${b}"`)]);return x}function Cd(s){let n=[];const a=s.value,d=s.key;if(Array.isArray(a)){const y=[],x=[];for(const w in a)a[w].id&&y.includes(a[w].id)&&n.push(new qe(d,a,`all the sprites' ids must be unique, but ${a[w].id} is duplicated`)),y.push(a[w].id),a[w].url&&x.includes(a[w].url)&&n.push(new qe(d,a,`all the sprites' URLs must be unique, but ${a[w].url} is duplicated`)),x.push(a[w].url),n=n.concat(zi({key:`${d}[${w}]`,value:a[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return aa({key:d,value:a})}const kc={"*":()=>[],array:ou,boolean:function(s){const n=s.value,a=s.key,d=vr(n);return d!=="boolean"?[new qe(a,n,`boolean expected, ${d} found`)]:[]},number:vd,color:function(s){const n=s.key,a=s.value,d=vr(a);return d!=="string"?[new qe(n,a,`color expected, ${d} found`)]:Ar.parse(String(a))?[]:[new qe(n,a,`color expected, "${a}" found`)]},constants:tm,enum:lo,filter:xd,function:xc,layer:Sd,object:zi,source:au,light:kd,sky:Td,terrain:Ed,projection:function(s){const n=s.value,a=s.styleSpec,d=a.projection,y=s.style,x=vr(n);if(n===void 0)return[];if(x!=="object")return[new qe("projection",n,`object expected, ${x} found`)];let w=[];for(const b in n)w=w.concat(d[b]?s.validateSpec({key:b,value:n[b],valueSpec:d[b],style:y,styleSpec:a}):[new qe(b,n[b],`unknown property "${b}"`)]);return w},string:aa,formatted:function(s){return aa(s).length===0?[]:Ja(s)},resolvedImage:function(s){return aa(s).length===0?[]:Ja(s)},padding:function(s){const n=s.key,a=s.value;if(vr(a)==="array"){if(a.length<1||a.length>4)return[new qe(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const d={type:"number"};let y=[];for(let x=0;x<a.length;x++)y=y.concat(s.validateSpec({key:`${n}[${x}]`,value:a[x],validateSpec:s.validateSpec,valueSpec:d}));return y}return vd({key:n,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,a=s.value,d=vr(a),y=s.styleSpec;if(d!=="array"||a.length<1||a.length%2!=0)return[new qe(n,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<a.length;w+=2)x=x.concat(lo({key:`${n}[${w}]`,value:a[w],valueSpec:y.layout_symbol["text-anchor"]})),x=x.concat(ou({key:`${n}[${w+1}]`,value:a[w+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:y}));return x},sprite:Cd};function Qa(s){const n=s.value,a=s.valueSpec,d=s.styleSpec;return s.validateSpec=Qa,a.expression&&fc(pn(n))?xc(s):a.expression&&gc(_s(n))?Ja(s):a.type&&kc[a.type]?kc[a.type](s):zi(tn({},s,{valueSpec:a.type?d[a.type]:a}))}function rm(s){const n=s.value,a=s.key,d=aa(s);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new qe(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new qe(a,n,'"glyphs" url must include a "{range}" token'))),d}function Ji(s,n=ie){let a=[];return a=a.concat(Qa({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:Qa,objectElementValidators:{glyphs:rm,"*":()=>[]}})),s.constants&&(a=a.concat(tm({key:"constants",value:s.constants,style:s,styleSpec:n,validateSpec:Qa}))),Id(a)}function Vs(s){return function(n){return s({...n,validateSpec:Qa})}}function Id(s){return[].concat(s).sort((n,a)=>n.line-a.line)}function vs(s){return function(...n){return Id(s.apply(this,n))}}Ji.source=vs(Vs(au)),Ji.sprite=vs(Vs(Cd)),Ji.glyphs=vs(Vs(rm)),Ji.light=vs(Vs(kd)),Ji.sky=vs(Vs(Td)),Ji.terrain=vs(Vs(Ed)),Ji.layer=vs(Vs(Sd)),Ji.filter=vs(Vs(xd)),Ji.paintProperty=vs(Vs(bc)),Ji.layoutProperty=vs(Vs(bd));const la=Ji,q_=la.light,Y_=la.sky,nm=la.paintProperty,im=la.layoutProperty;function Pd(s,n){let a=!1;if(n&&n.length)for(const d of n)s.fire(new V(new Error(d.message))),a=!0;return a}class el{constructor(n,a,d){const y=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const w=new Int32Array(this.arrayBuffer);n=w[0],this.d=(a=w[1])+2*(d=w[2]);for(let k=0;k<this.d*this.d;k++){const I=w[3+k],D=w[3+k+1];y.push(I===D?null:w.subarray(I,D))}const b=w[3+y.length+1];this.keys=w.subarray(w[3+y.length],b),this.bboxes=w.subarray(b),this.insert=this._insertReadonly}else{this.d=a+2*d;for(let w=0;w<this.d*this.d;w++)y.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=d,this.scale=a/n,this.uid=0;const x=d/a*n;this.min=-x,this.max=n+x}insert(n,a,d,y,x){this._forEachCell(a,d,y,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,d,y,x,w){this.cells[x].push(w)}query(n,a,d,y,x){const w=this.min,b=this.max;if(n<=w&&a<=w&&b<=d&&b<=y&&!x)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,a,d,y,this._queryCell,k,{},x),k}}_queryCell(n,a,d,y,x,w,b,k){const I=this.cells[x];if(I!==null){const D=this.keys,L=this.bboxes;for(let j=0;j<I.length;j++){const Z=I[j];if(b[Z]===void 0){const K=4*Z;(k?k(L[K+0],L[K+1],L[K+2],L[K+3]):n<=L[K+2]&&a<=L[K+3]&&d>=L[K+0]&&y>=L[K+1])?(b[Z]=!0,w.push(D[Z])):b[Z]=!1}}}}_forEachCell(n,a,d,y,x,w,b,k){const I=this._convertToCellCoord(n),D=this._convertToCellCoord(a),L=this._convertToCellCoord(d),j=this._convertToCellCoord(y);for(let Z=I;Z<=L;Z++)for(let K=D;K<=j;K++){const J=this.d*K+Z;if((!k||k(this._convertFromCellCoord(Z),this._convertFromCellCoord(K),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(K+1)))&&x.call(this,n,a,d,y,J,w,b,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let d=0;for(let w=0;w<this.cells.length;w++)d+=this.cells[w].length;const y=new Int32Array(a+d+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let x=a;for(let w=0;w<n.length;w++){const b=n[w];y[3+w]=x,y.set(b,x),x+=b.length}return y[3+n.length]=x,y.set(this.keys,x),x+=this.keys.length,y[3+n.length+1]=x,y.set(this.bboxes,x),x+=this.bboxes.length,y.buffer}static serialize(n,a){const d=n.toArrayBuffer();return a&&a.push(d),{buffer:d}}static deserialize(n){return new el(n.buffer)}}const Qi={};function St(s,n,a={}){if(Qi[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),Qi[s]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}St("Object",Object),St("TransferableGridIndex",el),St("Color",Ar),St("Error",Error),St("AJAXError",er),St("ResolvedImage",Di),St("StylePropertyFunction",Ka),St("StyleExpression",mc,{omit:["_evaluator"]}),St("ZoomDependentExpression",Xa),St("ZoomConstantExpression",Ya),St("CompoundExpression",Ki,{omit:["_evaluate"]});for(const s in Va)Va[s]._classRegistryKey||St(`Expression_${s}`,Va[s]);function Tc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Md(s){return s.$name||s.constructor._classRegistryKey}function sm(s){return!function(n){if(n===null||typeof n!="object")return!1;const a=Md(n);return!(!a||a==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Tc(s)||ye(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function tl(s,n){if(sm(s))return(Tc(s)||ye(s))&&n&&n.push(s),ArrayBuffer.isView(s)&&n&&n.push(s.buffer),s instanceof ImageData&&n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const x=[];for(const w of s)x.push(tl(w,n));return x}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const a=Md(s);if(!a)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Qi[a])throw new Error(`${a} is not registered.`);const{klass:d}=Qi[a],y=d.serialize?d.serialize(s,n):{};if(d.serialize){if(n&&y===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in s){if(!s.hasOwnProperty(x)||Qi[a].omit.indexOf(x)>=0)continue;const w=s[x];y[x]=Qi[a].shallow.indexOf(x)>=0?w:tl(w,n)}s instanceof Error&&(y.message=s.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(y.$name=a),y}function rl(s){if(sm(s))return s;if(Array.isArray(s))return s.map(rl);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const n=Md(s)||"Object";if(!Qi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=Qi[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(s);const d=Object.create(a.prototype);for(const y of Object.keys(s)){if(y==="$name")continue;const x=s[y];d[y]=Qi[n].shallow.indexOf(y)>=0?x:rl(x)}return d}class Ad{constructor(){this.first=!0}update(n,a){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const ur={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Dd(s){for(const n of s)if(Rd(n.charCodeAt(0)))return!0;return!1}function X_(s){for(const n of s)if(!nl(n.charCodeAt(0)))return!1;return!0}function zd(s){const n=s.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(n.join("|"),"u")}const K_=zd(["Arab","Dupl","Mong","Ougr","Syrc"]);function nl(s){return!K_.test(String.fromCodePoint(s))}const om=zd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Rd(s){return!(s!==746&&s!==747&&(s<4352||!(ur["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||ur["CJK Compatibility"](s)||ur["CJK Strokes"](s)||!(!ur["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||ur["Enclosed CJK Letters and Months"](s)||ur["Ideographic Description Characters"](s)||ur.Kanbun(s)||ur.Katakana(s)&&s!==12540||!(!ur["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!ur["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||ur["Vertical Forms"](s)||ur["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||om.test(String.fromCodePoint(s)))))}function am(s){return!(Rd(s)||function(n){return!!(ur["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||ur["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||ur["Letterlike Symbols"](n)||ur["Number Forms"](n)||ur["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||ur["Control Pictures"](n)&&n!==9251||ur["Optical Character Recognition"](n)||ur["Enclosed Alphanumerics"](n)||ur["Geometric Shapes"](n)||ur["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||ur["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||ur["CJK Symbols and Punctuation"](n)||ur.Katakana(n)||ur["Private Use Area"](n)||ur["CJK Compatibility Forms"](n)||ur["Small Form Variants"](n)||ur["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}const J_=zd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ld(s){return J_.test(String.fromCodePoint(s))}function Q_(s,n){return!(!n&&Ld(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||ur.Khmer(s))}function e0(s){for(const n of s)if(Ld(n.charCodeAt(0)))return!0;return!1}const Ri=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Vr{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ad,this.transition={})}isSupportedScript(n){return function(a,d){for(const y of a)if(!Q_(y.charCodeAt(0),d))return!1;return!0}(n,Ri.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}}}class il{constructor(n,a){this.property=n,this.value=a,this.expression=function(d,y){if(fc(d))return new Ka(d,y);if(gc(d)){const x=gd(d,y);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=d;return y.type==="color"&&typeof d=="string"?x=Ar.parse(d):y.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(x=Xi.parse(d)):x=Ai.parse(d),{kind:"constant",evaluate:()=>x}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,d){return this.property.possiblyEvaluate(this,n,a,d)}}class Ec{constructor(n){this.property=n,this.value=new il(n,void 0)}transitioned(n,a){return new lm(this.property,this.value,a,ge({},n.transition,this.transition),n.now)}untransitioned(){return new lm(this.property,this.value,null,{},0)}}class Cc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return it(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ec(this._values[n].property)),this._values[n].value=new il(this._values[n].property,a===null?void 0:it(a))}getTransition(n){return it(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ec(this._values[n].property)),this._values[n].transition=it(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(n[a]=d);const y=this.getTransition(a);y!==void 0&&(n[`${a}-transition`]=y)}return n}transitioned(n,a){const d=new lu(this._properties);for(const y of Object.keys(this._values))d._values[y]=this._values[y].transitioned(n,a._values[y]);return d}untransitioned(){const n=new lu(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class lm{constructor(n,a,d,y,x){this.property=n,this.value=a,this.begin=x+y.delay||0,this.end=this.begin+y.duration||0,n.specification.transition&&(y.delay||y.duration)&&(this.prior=d)}possiblyEvaluate(n,a,d){const y=n.now||0,x=this.value.possiblyEvaluate(n,a,d),w=this.prior;if(w){if(y>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(y<this.begin)return w.possiblyEvaluate(n,a,d);{const b=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(n,a,d),x,function(k){if(k<=0)return 0;if(k>=1)return 1;const I=k*k,D=I*k;return 4*(k<.5?D:3*(k-I)+D-.75)}(b))}}return x}}class lu{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,d){const y=new cu(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(n,a,d);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class uu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return it(this._values[n].value)}setValue(n,a){this._values[n]=new il(this._values[n].property,a===null?void 0:it(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(n[a]=d)}return n}possiblyEvaluate(n,a,d){const y=new cu(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(n,a,d);return y}}class Hs{constructor(n,a,d){this.property=n,this.value=a,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,d,y){return this.property.evaluate(this.value,this.parameters,n,a,d,y)}}class cu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class It{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,d){const y=gi[this.specification.type];return y?y(n,a,d):n}}class Ut{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,d,y){return new Hs(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},d,y)}:n.expression,a)}interpolate(n,a,d){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Hs(this,{kind:"constant",value:void 0},n.parameters);const y=gi[this.specification.type];if(y){const x=y(n.value.value,a.value.value,d);return new Hs(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,a,d,y,x,w){return n.kind==="constant"?n.value:n.evaluate(a,d,y,x,w)}}class Ic extends Ut{possiblyEvaluate(n,a,d,y){if(n.value===void 0)return new Hs(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const x=n.expression.evaluate(a,null,{},d,y),w=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,b=this._calculate(w,w,w,a);return new Hs(this,{kind:"constant",value:b},a)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Hs(this,{kind:"constant",value:x},a)}return new Hs(this,n.expression,a)}evaluate(n,a,d,y,x,w){if(n.kind==="source"){const b=n.evaluate(a,d,y,x,w);return this._calculate(b,b,b,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},d,y),n.evaluate({zoom:Math.floor(a.zoom)},d,y),n.evaluate({zoom:Math.floor(a.zoom)+1},d,y),a):n.value}_calculate(n,a,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:d,to:a}}interpolate(n){return n}}class Pc{constructor(n){this.specification=n}possiblyEvaluate(n,a,d,y){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(a,null,{},d,y);return this._calculate(x,x,x,a)}return this._calculate(n.expression.evaluate(new Vr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new Vr(Math.floor(a.zoom),a)),n.expression.evaluate(new Vr(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:d,to:a}}interpolate(n){return n}}class Od{constructor(n){this.specification=n}possiblyEvaluate(n,a,d,y){return!!n.expression.evaluate(a,null,{},d,y)}interpolate(){return!1}}class v{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const d=n[a];d.specification.overridable&&this.overridableProperties.push(a);const y=this.defaultPropertyValues[a]=new il(d,void 0),x=this.defaultTransitionablePropertyValues[a]=new Ec(d);this.defaultTransitioningPropertyValues[a]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=y.possiblyEvaluate({})}}}St("DataDrivenProperty",Ut),St("DataConstantProperty",It),St("CrossFadedDataDrivenProperty",Ic),St("CrossFadedProperty",Pc),St("ColorRampProperty",Od);const r="-transition";class u extends Ue{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new uu(a.layout)),a.paint)){this._transitionablePaint=new Cc(a.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new cu(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,d={}){a!=null&&this._validate(im,`layers.${this.id}.layout.${n}`,n,a,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(r)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,d={}){if(a!=null&&this._validate(nm,`layers.${this.id}.paint.${n}`,n,a,d))return!1;if(n.endsWith(r))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const y=this._transitionablePaint._values[n],x=y.property.specification["property-type"]==="cross-faded-data-driven",w=y.value.isDataDriven(),b=y.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(n,b,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Ge(n,(a,d)=>!(a===void 0||d==="layout"&&!Object.keys(a).length||d==="paint"&&!Object.keys(a).length))}_validate(n,a,d,y,x={}){return(!x||x.validate!==!1)&&Pd(this,n.call(la,{key:a,layerType:this.type,objectKey:d,value:y,styleSpec:ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Hs&&Ga(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(s,n=1){let a=0,d=0;return{members:s.map(y=>{const x=p[y.type].BYTES_PER_ELEMENT,w=a=E(a,Math.max(n,x)),b=y.components||1;return d=Math.max(d,x),a+=x*b,{name:y.name,type:y.type,components:b,offset:w}}),size:E(a,Math.max(d,n)),alignment:n}}function E(s,n){return Math.ceil(s/n)*n}class C extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const d=this.length;return this.resize(d+1),this.emplace(d,n,a)}emplace(n,a,d){const y=2*n;return this.int16[y+0]=a,this.int16[y+1]=d,n}}C.prototype.bytesPerElement=4,St("StructArrayLayout2i4",C);class z extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,d)}emplace(n,a,d,y){const x=3*n;return this.int16[x+0]=a,this.int16[x+1]=d,this.int16[x+2]=y,n}}z.prototype.bytesPerElement=6,St("StructArrayLayout3i6",z);class F extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,d,y)}emplace(n,a,d,y,x){const w=4*n;return this.int16[w+0]=a,this.int16[w+1]=d,this.int16[w+2]=y,this.int16[w+3]=x,n}}F.prototype.bytesPerElement=8,St("StructArrayLayout4i8",F);class B extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,d,y,x,w)}emplace(n,a,d,y,x,w,b){const k=6*n;return this.int16[k+0]=a,this.int16[k+1]=d,this.int16[k+2]=y,this.int16[k+3]=x,this.int16[k+4]=w,this.int16[k+5]=b,n}}B.prototype.bytesPerElement=12,St("StructArrayLayout2i4i12",B);class X extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,d,y,x,w)}emplace(n,a,d,y,x,w,b){const k=4*n,I=8*n;return this.int16[k+0]=a,this.int16[k+1]=d,this.uint8[I+4]=y,this.uint8[I+5]=x,this.uint8[I+6]=w,this.uint8[I+7]=b,n}}X.prototype.bytesPerElement=8,St("StructArrayLayout2i4ub8",X);class Q extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const d=this.length;return this.resize(d+1),this.emplace(d,n,a)}emplace(n,a,d){const y=2*n;return this.float32[y+0]=a,this.float32[y+1]=d,n}}Q.prototype.bytesPerElement=8,St("StructArrayLayout2f8",Q);class re extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w,b,k,I,D){const L=this.length;return this.resize(L+1),this.emplace(L,n,a,d,y,x,w,b,k,I,D)}emplace(n,a,d,y,x,w,b,k,I,D,L){const j=10*n;return this.uint16[j+0]=a,this.uint16[j+1]=d,this.uint16[j+2]=y,this.uint16[j+3]=x,this.uint16[j+4]=w,this.uint16[j+5]=b,this.uint16[j+6]=k,this.uint16[j+7]=I,this.uint16[j+8]=D,this.uint16[j+9]=L,n}}re.prototype.bytesPerElement=20,St("StructArrayLayout10ui20",re);class ce extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w,b,k,I,D,L,j){const Z=this.length;return this.resize(Z+1),this.emplace(Z,n,a,d,y,x,w,b,k,I,D,L,j)}emplace(n,a,d,y,x,w,b,k,I,D,L,j,Z){const K=12*n;return this.int16[K+0]=a,this.int16[K+1]=d,this.int16[K+2]=y,this.int16[K+3]=x,this.uint16[K+4]=w,this.uint16[K+5]=b,this.uint16[K+6]=k,this.uint16[K+7]=I,this.int16[K+8]=D,this.int16[K+9]=L,this.int16[K+10]=j,this.int16[K+11]=Z,n}}ce.prototype.bytesPerElement=24,St("StructArrayLayout4i4ui4i24",ce);class pe extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,d)}emplace(n,a,d,y){const x=3*n;return this.float32[x+0]=a,this.float32[x+1]=d,this.float32[x+2]=y,n}}pe.prototype.bytesPerElement=12,St("StructArrayLayout3f12",pe);class me extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}me.prototype.bytesPerElement=4,St("StructArrayLayout1ul4",me);class we extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w,b,k,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,a,d,y,x,w,b,k,I)}emplace(n,a,d,y,x,w,b,k,I,D){const L=10*n,j=5*n;return this.int16[L+0]=a,this.int16[L+1]=d,this.int16[L+2]=y,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=b,this.uint32[j+3]=k,this.uint16[L+8]=I,this.uint16[L+9]=D,n}}we.prototype.bytesPerElement=20,St("StructArrayLayout6i1ul2ui20",we);class ae extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,d,y,x,w)}emplace(n,a,d,y,x,w,b){const k=6*n;return this.int16[k+0]=a,this.int16[k+1]=d,this.int16[k+2]=y,this.int16[k+3]=x,this.int16[k+4]=w,this.int16[k+5]=b,n}}ae.prototype.bytesPerElement=12,St("StructArrayLayout2i2i2i12",ae);class Ce extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,d,y,x)}emplace(n,a,d,y,x,w){const b=4*n,k=8*n;return this.float32[b+0]=a,this.float32[b+1]=d,this.float32[b+2]=y,this.int16[k+6]=x,this.int16[k+7]=w,n}}Ce.prototype.bytesPerElement=16,St("StructArrayLayout2f1f2i16",Ce);class Pe extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,d,y,x,w)}emplace(n,a,d,y,x,w,b){const k=16*n,I=4*n,D=8*n;return this.uint8[k+0]=a,this.uint8[k+1]=d,this.float32[I+1]=y,this.float32[I+2]=x,this.int16[D+6]=w,this.int16[D+7]=b,n}}Pe.prototype.bytesPerElement=16,St("StructArrayLayout2ub2f2i16",Pe);class ze extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,d)}emplace(n,a,d,y){const x=3*n;return this.uint16[x+0]=a,this.uint16[x+1]=d,this.uint16[x+2]=y,n}}ze.prototype.bytesPerElement=6,St("StructArrayLayout3ui6",ze);class Xe extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w,b,k,I,D,L,j,Z,K,J,le,fe){const De=this.length;return this.resize(De+1),this.emplace(De,n,a,d,y,x,w,b,k,I,D,L,j,Z,K,J,le,fe)}emplace(n,a,d,y,x,w,b,k,I,D,L,j,Z,K,J,le,fe,De){const be=24*n,Me=12*n,Ve=48*n;return this.int16[be+0]=a,this.int16[be+1]=d,this.uint16[be+2]=y,this.uint16[be+3]=x,this.uint32[Me+2]=w,this.uint32[Me+3]=b,this.uint32[Me+4]=k,this.uint16[be+10]=I,this.uint16[be+11]=D,this.uint16[be+12]=L,this.float32[Me+7]=j,this.float32[Me+8]=Z,this.uint8[Ve+36]=K,this.uint8[Ve+37]=J,this.uint8[Ve+38]=le,this.uint32[Me+10]=fe,this.int16[be+22]=De,n}}Xe.prototype.bytesPerElement=48,St("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Xe);class st extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,y,x,w,b,k,I,D,L,j,Z,K,J,le,fe,De,be,Me,Ve,et,xt,Nt,yt,pt,At,Tt){const bt=this.length;return this.resize(bt+1),this.emplace(bt,n,a,d,y,x,w,b,k,I,D,L,j,Z,K,J,le,fe,De,be,Me,Ve,et,xt,Nt,yt,pt,At,Tt)}emplace(n,a,d,y,x,w,b,k,I,D,L,j,Z,K,J,le,fe,De,be,Me,Ve,et,xt,Nt,yt,pt,At,Tt,bt){const Ye=32*n,Dt=16*n;return this.int16[Ye+0]=a,this.int16[Ye+1]=d,this.int16[Ye+2]=y,this.int16[Ye+3]=x,this.int16[Ye+4]=w,this.int16[Ye+5]=b,this.int16[Ye+6]=k,this.int16[Ye+7]=I,this.uint16[Ye+8]=D,this.uint16[Ye+9]=L,this.uint16[Ye+10]=j,this.uint16[Ye+11]=Z,this.uint16[Ye+12]=K,this.uint16[Ye+13]=J,this.uint16[Ye+14]=le,this.uint16[Ye+15]=fe,this.uint16[Ye+16]=De,this.uint16[Ye+17]=be,this.uint16[Ye+18]=Me,this.uint16[Ye+19]=Ve,this.uint16[Ye+20]=et,this.uint16[Ye+21]=xt,this.uint16[Ye+22]=Nt,this.uint32[Dt+12]=yt,this.float32[Dt+13]=pt,this.float32[Dt+14]=At,this.uint16[Ye+30]=Tt,this.uint16[Ye+31]=bt,n}}st.prototype.bytesPerElement=64,St("StructArrayLayout8i15ui1ul2f2ui64",st);class gt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}gt.prototype.bytesPerElement=4,St("StructArrayLayout1f4",gt);class wt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,d)}emplace(n,a,d,y){const x=3*n;return this.uint16[6*n+0]=a,this.float32[x+1]=d,this.float32[x+2]=y,n}}wt.prototype.bytesPerElement=12,St("StructArrayLayout1ui2f12",wt);class dt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,d)}emplace(n,a,d,y){const x=4*n;return this.uint32[2*n+0]=a,this.uint16[x+2]=d,this.uint16[x+3]=y,n}}dt.prototype.bytesPerElement=8,St("StructArrayLayout1ul2ui8",dt);class ct extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const d=this.length;return this.resize(d+1),this.emplace(d,n,a)}emplace(n,a,d){const y=2*n;return this.uint16[y+0]=a,this.uint16[y+1]=d,n}}ct.prototype.bytesPerElement=4,St("StructArrayLayout2ui4",ct);class Pt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}Pt.prototype.bytesPerElement=2,St("StructArrayLayout1ui2",Pt);class qt extends _{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,d,y)}emplace(n,a,d,y,x){const w=4*n;return this.float32[w+0]=a,this.float32[w+1]=d,this.float32[w+2]=y,this.float32[w+3]=x,n}}qt.prototype.bytesPerElement=16,St("StructArrayLayout4f16",qt);class ft extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}ft.prototype.size=20;class _t extends we{get(n){return new ft(this,n)}}St("CollisionBoxArray",_t);class Gt extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Gt.prototype.size=48;class Hr extends Xe{get(n){return new Gt(this,n)}}St("PlacedSymbolArray",Hr);class tr extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}tr.prototype.size=64;class ar extends st{get(n){return new tr(this,n)}}St("SymbolInstanceArray",ar);class Wr extends gt{getoffsetX(n){return this.float32[1*n+0]}}St("GlyphOffsetArray",Wr);class Gn extends z{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}St("SymbolLineVertexArray",Gn);class xs extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}xs.prototype.size=12;class Gr extends wt{get(n){return new xs(this,n)}}St("TextAnchorOffsetArray",Gr);class _i extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}_i.prototype.size=8;class ii extends dt{get(n){return new _i(this,n)}}St("FeatureIndexArray",ii);class Zn extends C{}class si extends C{}class Ws extends C{}class sl extends B{}class Mc extends X{}class ol extends Q{}class es extends re{}class Ac extends ce{}class Fd extends pe{}class ts extends me{}class rs extends ae{}class Ao extends Pe{}class ws extends ze{}class Nn extends ct{}const qn=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:Li}=qn;class cr{constructor(n=[]){this.segments=n}prepareSegment(n,a,d,y){let x=this.segments[this.segments.length-1];return n>cr.MAX_VERTEX_ARRAY_LENGTH&&je(`Max vertices per segment is ${cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!x||x.vertexLength+n>cr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==y)&&(x={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},y!==void 0&&(x.sortKey=y),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,d,y){return new cr([{vertexOffset:n,primitiveOffset:a,vertexLength:d,primitiveLength:y,vaos:{},sortKey:0}])}}function ua(s,n){return 256*(s=oe(Math.floor(s),0,255))+oe(Math.floor(n),0,255)}cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,St("SegmentVector",cr);const al=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ll={exports:{}},um={exports:{}};um.exports=function(s,n){var a,d,y,x,w,b,k,I;for(d=s.length-(a=3&s.length),y=n,w=3432918353,b=461845907,I=0;I<d;)k=255&s.charCodeAt(I)|(255&s.charCodeAt(++I))<<8|(255&s.charCodeAt(++I))<<16|(255&s.charCodeAt(++I))<<24,++I,y=27492+(65535&(x=5*(65535&(y=(y^=k=(65535&(k=(k=(65535&k)*w+(((k>>>16)*w&65535)<<16)&4294967295)<<15|k>>>17))*b+(((k>>>16)*b&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(k=0,a){case 3:k^=(255&s.charCodeAt(I+2))<<16;case 2:k^=(255&s.charCodeAt(I+1))<<8;case 1:y^=k=(65535&(k=(k=(65535&(k^=255&s.charCodeAt(I)))*w+(((k>>>16)*w&65535)<<16)&4294967295)<<15|k>>>17))*b+(((k>>>16)*b&65535)<<16)&4294967295}return y^=s.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var t0=um.exports,cm={exports:{}};cm.exports=function(s,n){for(var a,d=s.length,y=n^d,x=0;d>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(x)|(255&s.charCodeAt(++x))<<8|(255&s.charCodeAt(++x))<<16|(255&s.charCodeAt(++x))<<24))+((1540483477*(a>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),d-=4,++x;switch(d){case 3:y^=(255&s.charCodeAt(x+2))<<16;case 2:y^=(255&s.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&s.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Do=t0,hm=cm.exports;ll.exports=Do,ll.exports.murmur3=Do,ll.exports.murmur2=hm;var Dc=T(ll.exports);class hu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,d,y){this.ids.push(zc(n)),this.positions.push(a,d,y)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=zc(n);let d=0,y=this.ids.length-1;for(;d<y;){const w=d+y>>1;this.ids[w]>=a?y=w:d=w+1}const x=[];for(;this.ids[d]===a;)x.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return x}static serialize(n,a){const d=new Float64Array(n.ids),y=new Uint32Array(n.positions);return Rc(d,y,0,d.length-1),a&&a.push(d.buffer,y.buffer),{ids:d,positions:y}}static deserialize(n){const a=new hu;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function zc(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Dc(String(s))}function Rc(s,n,a,d){for(;a<d;){const y=s[a+d>>1];let x=a-1,w=d+1;for(;;){do x++;while(s[x]<y);do w--;while(s[w]>y);if(x>=w)break;ul(s,x,w),ul(n,3*x,3*w),ul(n,3*x+1,3*w+1),ul(n,3*x+2,3*w+2)}w-a<d-w?(Rc(s,n,a,w),a=w+1):(Rc(s,n,w+1,d),d=w)}}function ul(s,n,a){const d=s[n];s[n]=s[a],s[a]=d}St("FeaturePositionMap",hu);class du{constructor(n,a){this.gl=n.gl,this.location=a}}class dm extends du{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class yb extends du{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class _b extends du{constructor(n,a){super(n,a),this.current=Ar.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const SA=new Float32Array(16);function r0(s){return[ua(255*s.r,255*s.g),ua(255*s.b,255*s.a)]}class Bd{constructor(n,a,d){this.value=n,this.uniformNames=a.map(y=>`u_${y}`),this.type=d}setUniform(n,a,d){n.set(d.constantOr(this.value))}getBinding(n,a,d){return this.type==="color"?new _b(n,a):new dm(n,a)}}class Lc{constructor(n,a){this.uniformNames=a.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,d,y){const x=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&n.set(x)}getBinding(n,a,d){return d.substr(0,9)==="u_pattern"?new yb(n,a):new dm(n,a)}}class ca{constructor(n,a,d,y){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,a,d,y,x){const w=this.paintVertexArray.length,b=this.expression.evaluate(new Vr(0),a,{},y,[],x);this.paintVertexArray.resize(n),this._setPaintValue(w,n,b)}updatePaintArray(n,a,d,y){const x=this.expression.evaluate({zoom:0},d,y);this._setPaintValue(n,a,x)}_setPaintValue(n,a,d){if(this.type==="color"){const y=r0(d);for(let x=n;x<a;x++)this.paintVertexArray.emplace(x,y[0],y[1])}else{for(let y=n;y<a;y++)this.paintVertexArray.emplace(y,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class uo{constructor(n,a,d,y,x,w){this.expression=n,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=d,this.useIntegerZoom=y,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(n,a,d,y,x){const w=this.expression.evaluate(new Vr(this.zoom),a,{},y,[],x),b=this.expression.evaluate(new Vr(this.zoom+1),a,{},y,[],x),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,w,b)}updatePaintArray(n,a,d,y){const x=this.expression.evaluate({zoom:this.zoom},d,y),w=this.expression.evaluate({zoom:this.zoom+1},d,y);this._setPaintValue(n,a,x,w)}_setPaintValue(n,a,d,y){if(this.type==="color"){const x=r0(d),w=r0(y);for(let b=n;b<a;b++)this.paintVertexArray.emplace(b,x[0],x[1],w[0],w[1])}else{for(let x=n;x<a;x++)this.paintVertexArray.emplace(x,d,y);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const d=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,y=oe(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(y)}getBinding(n,a,d){return new dm(n,a)}}class cl{constructor(n,a,d,y,x,w){this.expression=n,this.type=a,this.useIntegerZoom=d,this.zoom=y,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,a,d){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(y,n,a.patterns&&a.patterns[this.layerId],d)}updatePaintArray(n,a,d,y,x){this._setPaintValues(n,a,d.patterns&&d.patterns[this.layerId],x)}_setPaintValues(n,a,d,y){if(!y||!d)return;const{min:x,mid:w,max:b}=d,k=y[x],I=y[w],D=y[b];if(k&&I&&D)for(let L=n;L<a;L++)this.zoomInPaintVertexArray.emplace(L,I.tl[0],I.tl[1],I.br[0],I.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],I.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,I.tl[0],I.tl[1],I.br[0],I.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],I.pixelRatio,D.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,al.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,al.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class vb{constructor(n,a,d){this.binders={},this._buffers=[];const y=[];for(const x in n.paint._values){if(!d(x))continue;const w=n.paint.get(x);if(!(w instanceof Hs&&Ga(w.property.specification)))continue;const b=kA(x,n.type),k=w.value,I=w.property.specification.type,D=w.property.useIntegerZoom,L=w.property.specification["property-type"],j=L==="cross-faded"||L==="cross-faded-data-driven";if(k.kind==="constant")this.binders[x]=j?new Lc(k.value,b):new Bd(k.value,b,I),y.push(`/u_${x}`);else if(k.kind==="source"||j){const Z=xb(x,I,"source");this.binders[x]=j?new cl(k,I,D,a,Z,n.id):new ca(k,b,I,Z),y.push(`/a_${x}`)}else{const Z=xb(x,I,"composite");this.binders[x]=new uo(k,b,I,D,a,Z),y.push(`/z_${x}`)}}this.cacheKey=y.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof ca||a instanceof uo?a.maxValue:0}populatePaintArrays(n,a,d,y,x){for(const w in this.binders){const b=this.binders[w];(b instanceof ca||b instanceof uo||b instanceof cl)&&b.populatePaintArray(n,a,d,y,x)}}setConstantPatternPositions(n,a){for(const d in this.binders){const y=this.binders[d];y instanceof Lc&&y.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,d,y,x){let w=!1;for(const b in n){const k=a.getPositions(b);for(const I of k){const D=d.feature(I.index);for(const L in this.binders){const j=this.binders[L];if((j instanceof ca||j instanceof uo||j instanceof cl)&&j.expression.isStateDependent===!0){const Z=y.paint.get(L);j.expression=Z.value,j.updatePaintArray(I.start,I.end,D,n[b],x),w=!0}}}}return w}defines(){const n=[];for(const a in this.binders){const d=this.binders[a];(d instanceof Bd||d instanceof Lc)&&n.push(...d.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof ca||d instanceof uo)for(let y=0;y<d.paintVertexAttributes.length;y++)n.push(d.paintVertexAttributes[y].name);else if(d instanceof cl)for(let y=0;y<al.members.length;y++)n.push(al.members[y].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof Bd||d instanceof Lc||d instanceof uo)for(const y of d.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const d=[];for(const y in this.binders){const x=this.binders[y];if(x instanceof Bd||x instanceof Lc||x instanceof uo){for(const w of x.uniformNames)if(a[w]){const b=x.getBinding(n,a[w],w);d.push({name:w,property:y,binding:b})}}}return d}setUniforms(n,a,d,y){for(const{name:x,property:w,binding:b}of a)this.binders[w].setUniform(b,y,d.get(w),x)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const d=this.binders[a];if(n&&d instanceof cl){const y=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(d instanceof ca||d instanceof uo)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const a in this.binders){const d=this.binders[a];(d instanceof ca||d instanceof uo||d instanceof cl)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof ca||a instanceof uo||a instanceof cl)&&a.destroy()}}}class fu{constructor(n,a,d=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new vb(y,a,d);this.needsUpload=!1,this._featureMap=new hu,this._bufferOffset=0}populatePaintArrays(n,a,d,y,x,w){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,a,y,x,w);a.id!==void 0&&this._featureMap.add(a.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,d,y){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,a,x,y)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function kA(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function xb(s,n,a){const d={color:{source:Q,composite:qt},number:{source:gt,composite:Q}},y=function(x){return{"line-pattern":{source:es,composite:es},"fill-pattern":{source:es,composite:es},"fill-extrusion-pattern":{source:es,composite:es}}[x]}(s);return y&&y[a]||d[n][a]}St("ConstantBinder",Bd),St("CrossFadedConstantBinder",Lc),St("SourceExpressionBinder",ca),St("CrossFadedCompositeBinder",cl),St("CompositeExpressionBinder",uo),St("ProgramConfiguration",vb,{omit:["_buffers"]}),St("ProgramConfigurationSet",fu);const Cn=8192,n0=Math.pow(2,14)-1,wb=-n0-1;function pu(s){const n=Cn/s.extent,a=s.loadGeometry();for(let d=0;d<a.length;d++){const y=a[d];for(let x=0;x<y.length;x++){const w=y[x],b=Math.round(w.x*n),k=Math.round(w.y*n);w.x=oe(b,wb,n0),w.y=oe(k,wb,n0),(b<w.x||b>w.x+1||k<w.y||k>w.y+1)&&je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function mu(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?pu(s):[]}}function fm(s,n,a,d,y){s.emplaceBack(2*n+(d+1)/2,2*a+(y+1)/2)}class i0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new si,this.indexArray=new ws,this.segments=new cr,this.programConfigurations=new fu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){const y=this.layers[0],x=[];let w=null,b=!1;y.type==="circle"&&(w=y.layout.get("circle-sort-key"),b=!w.isConstant());for(const{feature:k,id:I,index:D,sourceLayerIndex:L}of n){const j=this.layers[0]._featureFilter.needGeometry,Z=mu(k,j);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),Z,d))continue;const K=b?w.evaluate(Z,{},d):void 0,J={id:I,properties:k.properties,type:k.type,sourceLayerIndex:L,index:D,geometry:j?Z.geometry:pu(k),patterns:{},sortKey:K};x.push(J)}b&&x.sort((k,I)=>k.sortKey-I.sortKey);for(const k of x){const{geometry:I,index:D,sourceLayerIndex:L}=k,j=n[D].feature;this.addFeature(k,I,D,d),a.featureIndex.insert(j,I,D,L,this.index)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Li),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,d,y){for(const x of a)for(const w of x){const b=w.x,k=w.y;if(b<0||b>=Cn||k<0||k>=Cn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),D=I.vertexLength;fm(this.layoutVertexArray,b,k,-1,-1),fm(this.layoutVertexArray,b,k,1,-1),fm(this.layoutVertexArray,b,k,1,1),fm(this.layoutVertexArray,b,k,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},y)}}function bb(s,n){for(let a=0;a<s.length;a++)if(Oc(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(Oc(s,n[a]))return!0;return!!s0(s,n)}function TA(s,n,a){return!!Oc(s,n)||!!o0(n,s,a)}function Sb(s,n){if(s.length===1)return Tb(n,s[0]);for(let a=0;a<n.length;a++){const d=n[a];for(let y=0;y<d.length;y++)if(Oc(s,d[y]))return!0}for(let a=0;a<s.length;a++)if(Tb(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(s0(s,n[a]))return!0;return!1}function EA(s,n,a){if(s.length>1){if(s0(s,n))return!0;for(let d=0;d<n.length;d++)if(o0(n[d],s,a))return!0}for(let d=0;d<s.length;d++)if(o0(s[d],n,a))return!0;return!1}function s0(s,n){if(s.length===0||n.length===0)return!1;for(let a=0;a<s.length-1;a++){const d=s[a],y=s[a+1];for(let x=0;x<n.length-1;x++)if(CA(d,y,n[x],n[x+1]))return!0}return!1}function CA(s,n,a,d){return H(s,a,d)!==H(n,a,d)&&H(s,n,a)!==H(s,n,d)}function o0(s,n,a){const d=a*a;if(n.length===1)return s.distSqr(n[0])<d;for(let y=1;y<n.length;y++)if(kb(s,n[y-1],n[y])<d)return!0;return!1}function kb(s,n,a){const d=n.distSqr(a);if(d===0)return s.distSqr(n);const y=((s.x-n.x)*(a.x-n.x)+(s.y-n.y)*(a.y-n.y))/d;return s.distSqr(y<0?n:y>1?a:a.sub(n)._mult(y)._add(n))}function Tb(s,n){let a,d,y,x=!1;for(let w=0;w<s.length;w++){a=s[w];for(let b=0,k=a.length-1;b<a.length;k=b++)d=a[b],y=a[k],d.y>n.y!=y.y>n.y&&n.x<(y.x-d.x)*(n.y-d.y)/(y.y-d.y)+d.x&&(x=!x)}return x}function Oc(s,n){let a=!1;for(let d=0,y=s.length-1;d<s.length;y=d++){const x=s[d],w=s[y];x.y>n.y!=w.y>n.y&&n.x<(w.x-x.x)*(n.y-x.y)/(w.y-x.y)+x.x&&(a=!a)}return a}function IA(s,n,a){const d=a[0],y=a[2];if(s.x<d.x&&n.x<d.x||s.x>y.x&&n.x>y.x||s.y<d.y&&n.y<d.y||s.y>y.y&&n.y>y.y)return!1;const x=H(s,n,a[0]);return x!==H(s,n,a[1])||x!==H(s,n,a[2])||x!==H(s,n,a[3])}function Nd(s,n,a){const d=n.paint.get(s).value;return d.kind==="constant"?d.value:a.programConfigurations.get(n.id).getMaxValue(s)}function pm(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function mm(s,n,a,d,y){if(!n[0]&&!n[1])return s;const x=A.convert(n)._mult(y);a==="viewport"&&x._rotate(-d);const w=[];for(let b=0;b<s.length;b++)w.push(s[b].sub(x));return w}let Eb,Cb;St("CircleBucket",i0,{omit:["layers"]});var PA={get paint(){return Cb=Cb||new v({"circle-radius":new Ut(ie.paint_circle["circle-radius"]),"circle-color":new Ut(ie.paint_circle["circle-color"]),"circle-blur":new Ut(ie.paint_circle["circle-blur"]),"circle-opacity":new Ut(ie.paint_circle["circle-opacity"]),"circle-translate":new It(ie.paint_circle["circle-translate"]),"circle-translate-anchor":new It(ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new It(ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new It(ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ut(ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ut(ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ut(ie.paint_circle["circle-stroke-opacity"])})},get layout(){return Eb=Eb||new v({"circle-sort-key":new Ut(ie.layout_circle["circle-sort-key"])})}},vi=1e-6,Fc=typeof Float32Array<"u"?Float32Array:Array;function a0(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ib(s,n,a){var d=n[0],y=n[1],x=n[2],w=n[3],b=n[4],k=n[5],I=n[6],D=n[7],L=n[8],j=n[9],Z=n[10],K=n[11],J=n[12],le=n[13],fe=n[14],De=n[15],be=a[0],Me=a[1],Ve=a[2],et=a[3];return s[0]=be*d+Me*b+Ve*L+et*J,s[1]=be*y+Me*k+Ve*j+et*le,s[2]=be*x+Me*I+Ve*Z+et*fe,s[3]=be*w+Me*D+Ve*K+et*De,s[4]=(be=a[4])*d+(Me=a[5])*b+(Ve=a[6])*L+(et=a[7])*J,s[5]=be*y+Me*k+Ve*j+et*le,s[6]=be*x+Me*I+Ve*Z+et*fe,s[7]=be*w+Me*D+Ve*K+et*De,s[8]=(be=a[8])*d+(Me=a[9])*b+(Ve=a[10])*L+(et=a[11])*J,s[9]=be*y+Me*k+Ve*j+et*le,s[10]=be*x+Me*I+Ve*Z+et*fe,s[11]=be*w+Me*D+Ve*K+et*De,s[12]=(be=a[12])*d+(Me=a[13])*b+(Ve=a[14])*L+(et=a[15])*J,s[13]=be*y+Me*k+Ve*j+et*le,s[14]=be*x+Me*I+Ve*Z+et*fe,s[15]=be*w+Me*D+Ve*K+et*De,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var $d,MA=Ib;function gm(s,n,a){var d=n[0],y=n[1],x=n[2],w=n[3];return s[0]=a[0]*d+a[4]*y+a[8]*x+a[12]*w,s[1]=a[1]*d+a[5]*y+a[9]*x+a[13]*w,s[2]=a[2]*d+a[6]*y+a[10]*x+a[14]*w,s[3]=a[3]*d+a[7]*y+a[11]*x+a[15]*w,s}$d=new Fc(4),Fc!=Float32Array&&($d[0]=0,$d[1]=0,$d[2]=0,$d[3]=0);class AA extends u{constructor(n){super(n,PA)}createBucket(n){return new i0(n)}queryRadius(n){const a=n;return Nd("circle-radius",this,a)+Nd("circle-stroke-width",this,a)+pm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,a,d,y,x,w,b,k){const I=mm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,b),D=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d),L=this.paint.get("circle-pitch-alignment")==="map",j=L?I:function(K,J){return K.map(le=>Pb(le,J))}(I,k),Z=L?D*b:D;for(const K of y)for(const J of K){const le=L?J:Pb(J,k);let fe=Z;const De=gm([],[J.x,J.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?fe*=De[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(fe*=w.cameraToCenterDistance/De[3]),TA(j,le,fe))return!0}return!1}}function Pb(s,n){const a=gm([],[s.x,s.y,0,1],n);return new A(a[0]/a[3],a[1]/a[3])}class Mb extends i0{}let Ab;St("HeatmapBucket",Mb,{omit:["layers"]});var DA={get paint(){return Ab=Ab||new v({"heatmap-radius":new Ut(ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ut(ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new It(ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Od(ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new It(ie.paint_heatmap["heatmap-opacity"])})}};function l0(s,{width:n,height:a},d,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*a*d)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${n*a*d}`)}else y=new Uint8Array(n*a*d);return s.width=n,s.height=a,s.data=y,s}function Db(s,{width:n,height:a},d){if(n===s.width&&a===s.height)return;const y=l0({},{width:n,height:a},d);u0(s,y,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,a)},d),s.width=n,s.height=a,s.data=y.data}function u0(s,n,a,d,y,x){if(y.width===0||y.height===0)return n;if(y.width>s.width||y.height>s.height||a.x>s.width-y.width||a.y>s.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||d.x>n.width-y.width||d.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const w=s.data,b=n.data;if(w===b)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<y.height;k++){const I=((a.y+k)*s.width+a.x)*x,D=((d.y+k)*n.width+d.x)*x;for(let L=0;L<y.width*x;L++)b[D+L]=w[I+L]}return n}class jd{constructor(n,a){l0(this,n,1,a)}resize(n){Db(this,n,1)}clone(){return new jd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,d,y,x){u0(n,a,d,y,x,1)}}class bs{constructor(n,a){l0(this,n,4,a)}resize(n){Db(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new bs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,d,y,x){u0(n,a,d,y,x,4)}}function zb(s){const n={},a=s.resolution||256,d=s.clips?s.clips.length:1,y=s.image||new bs({width:a,height:d});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const x=(w,b,k)=>{n[s.evaluationKey]=k;const I=s.expression.evaluate(n);y.data[w+b+0]=Math.floor(255*I.r/I.a),y.data[w+b+1]=Math.floor(255*I.g/I.a),y.data[w+b+2]=Math.floor(255*I.b/I.a),y.data[w+b+3]=Math.floor(255*I.a)};if(s.clips)for(let w=0,b=0;w<d;++w,b+=4*a)for(let k=0,I=0;k<a;k++,I+=4){const D=k/(a-1),{start:L,end:j}=s.clips[w];x(b,I,L*(1-D)+j*D)}else for(let w=0,b=0;w<a;w++,b+=4)x(0,b,w/(a-1));return y}St("AlphaImage",jd),St("RGBAImage",bs);const c0="big-fb";class zA extends u{createBucket(n){return new Mb(n)}constructor(n){super(n,DA),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=zb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(c0)&&this.heatmapFbos.delete(c0)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Rb;var RA={get paint(){return Rb=Rb||new v({"hillshade-illumination-direction":new It(ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new It(ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new It(ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new It(ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new It(ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new It(ie.paint_hillshade["hillshade-accent-color"])})}};class LA extends u{constructor(n){super(n,RA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const OA=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:FA}=OA;function Lb(s,n,a=2){const d=n&&n.length,y=d?n[0]*a:s.length;let x=Ob(s,0,y,a,!0);const w=[];if(!x||x.next===x.prev)return w;let b,k,I;if(d&&(x=function(D,L,j,Z){const K=[];for(let J=0,le=L.length;J<le;J++){const fe=Ob(D,L[J]*Z,J<le-1?L[J+1]*Z:D.length,Z,!1);fe===fe.next&&(fe.steiner=!0),K.push(WA(fe))}K.sort(UA);for(let J=0;J<K.length;J++)j=VA(K[J],j);return j}(s,n,x,a)),s.length>80*a){b=1/0,k=1/0;let D=-1/0,L=-1/0;for(let j=a;j<y;j+=a){const Z=s[j],K=s[j+1];Z<b&&(b=Z),K<k&&(k=K),Z>D&&(D=Z),K>L&&(L=K)}I=Math.max(D-b,L-k),I=I!==0?32767/I:0}return Ud(x,w,a,b,k,I,0),w}function Ob(s,n,a,d,y){let x;if(y===function(w,b,k,I){let D=0;for(let L=b,j=k-I;L<k;L+=I)D+=(w[j]-w[L])*(w[L+1]+w[j+1]),j=L;return D}(s,n,a,d)>0)for(let w=n;w<a;w+=d)x=Nb(w/d|0,s[w],s[w+1],x);else for(let w=a-d;w>=n;w-=d)x=Nb(w/d|0,s[w],s[w+1],x);return x&&ym(x,x.next)&&(Hd(x),x=x.next),x}function gu(s,n){if(!s)return s;n||(n=s);let a,d=s;do if(a=!1,d.steiner||!ym(d,d.next)&&wn(d.prev,d,d.next)!==0)d=d.next;else{if(Hd(d),d=n=d.prev,d===d.next)break;a=!0}while(a||d!==n);return n}function Ud(s,n,a,d,y,x,w){if(!s)return;!w&&x&&function(k,I,D,L){let j=k;do j.z===0&&(j.z=h0(j.x,j.y,I,D,L)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==k);j.prevZ.nextZ=null,j.prevZ=null,function(Z){let K,J=1;do{let le,fe=Z;Z=null;let De=null;for(K=0;fe;){K++;let be=fe,Me=0;for(let et=0;et<J&&(Me++,be=be.nextZ,be);et++);let Ve=J;for(;Me>0||Ve>0&&be;)Me!==0&&(Ve===0||!be||fe.z<=be.z)?(le=fe,fe=fe.nextZ,Me--):(le=be,be=be.nextZ,Ve--),De?De.nextZ=le:Z=le,le.prevZ=De,De=le;fe=be}De.nextZ=null,J*=2}while(K>1)}(j)}(s,d,y,x);let b=s;for(;s.prev!==s.next;){const k=s.prev,I=s.next;if(x?NA(s,d,y,x):BA(s))n.push(k.i,s.i,I.i),Hd(s),s=I.next,b=I.next;else if((s=I)===b){w?w===1?Ud(s=$A(gu(s),n),n,a,d,y,x,2):w===2&&jA(s,n,a,d,y,x):Ud(gu(s),n,a,d,y,x,1);break}}}function BA(s){const n=s.prev,a=s,d=s.next;if(wn(n,a,d)>=0)return!1;const y=n.x,x=a.x,w=d.x,b=n.y,k=a.y,I=d.y,D=y<x?y<w?y:w:x<w?x:w,L=b<k?b<I?b:I:k<I?k:I,j=y>x?y>w?y:w:x>w?x:w,Z=b>k?b>I?b:I:k>I?k:I;let K=d.next;for(;K!==n;){if(K.x>=D&&K.x<=j&&K.y>=L&&K.y<=Z&&Bc(y,b,x,k,w,I,K.x,K.y)&&wn(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function NA(s,n,a,d){const y=s.prev,x=s,w=s.next;if(wn(y,x,w)>=0)return!1;const b=y.x,k=x.x,I=w.x,D=y.y,L=x.y,j=w.y,Z=b<k?b<I?b:I:k<I?k:I,K=D<L?D<j?D:j:L<j?L:j,J=b>k?b>I?b:I:k>I?k:I,le=D>L?D>j?D:j:L>j?L:j,fe=h0(Z,K,n,a,d),De=h0(J,le,n,a,d);let be=s.prevZ,Me=s.nextZ;for(;be&&be.z>=fe&&Me&&Me.z<=De;){if(be.x>=Z&&be.x<=J&&be.y>=K&&be.y<=le&&be!==y&&be!==w&&Bc(b,D,k,L,I,j,be.x,be.y)&&wn(be.prev,be,be.next)>=0||(be=be.prevZ,Me.x>=Z&&Me.x<=J&&Me.y>=K&&Me.y<=le&&Me!==y&&Me!==w&&Bc(b,D,k,L,I,j,Me.x,Me.y)&&wn(Me.prev,Me,Me.next)>=0))return!1;Me=Me.nextZ}for(;be&&be.z>=fe;){if(be.x>=Z&&be.x<=J&&be.y>=K&&be.y<=le&&be!==y&&be!==w&&Bc(b,D,k,L,I,j,be.x,be.y)&&wn(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Me&&Me.z<=De;){if(Me.x>=Z&&Me.x<=J&&Me.y>=K&&Me.y<=le&&Me!==y&&Me!==w&&Bc(b,D,k,L,I,j,Me.x,Me.y)&&wn(Me.prev,Me,Me.next)>=0)return!1;Me=Me.nextZ}return!0}function $A(s,n){let a=s;do{const d=a.prev,y=a.next.next;!ym(d,y)&&Fb(d,a,a.next,y)&&Vd(d,y)&&Vd(y,d)&&(n.push(d.i,a.i,y.i),Hd(a),Hd(a.next),a=s=y),a=a.next}while(a!==s);return gu(a)}function jA(s,n,a,d,y,x){let w=s;do{let b=w.next.next;for(;b!==w.prev;){if(w.i!==b.i&&GA(w,b)){let k=Bb(w,b);return w=gu(w,w.next),k=gu(k,k.next),Ud(w,n,a,d,y,x,0),void Ud(k,n,a,d,y,x,0)}b=b.next}w=w.next}while(w!==s)}function UA(s,n){return s.x-n.x}function VA(s,n){const a=function(y,x){let w=x;const b=y.x,k=y.y;let I,D=-1/0;do{if(k<=w.y&&k>=w.next.y&&w.next.y!==w.y){const J=w.x+(k-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(J<=b&&J>D&&(D=J,I=w.x<w.next.x?w:w.next,J===b))return I}w=w.next}while(w!==x);if(!I)return null;const L=I,j=I.x,Z=I.y;let K=1/0;w=I;do{if(b>=w.x&&w.x>=j&&b!==w.x&&Bc(k<Z?b:D,k,j,Z,k<Z?D:b,k,w.x,w.y)){const J=Math.abs(k-w.y)/(b-w.x);Vd(w,y)&&(J<K||J===K&&(w.x>I.x||w.x===I.x&&HA(I,w)))&&(I=w,K=J)}w=w.next}while(w!==L);return I}(s,n);if(!a)return n;const d=Bb(a,s);return gu(d,d.next),gu(a,a.next)}function HA(s,n){return wn(s.prev,s,n.prev)<0&&wn(n.next,s,s.next)<0}function h0(s,n,a,d,y){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function WA(s){let n=s,a=s;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==s);return a}function Bc(s,n,a,d,y,x,w,b){return(y-w)*(n-b)>=(s-w)*(x-b)&&(s-w)*(d-b)>=(a-w)*(n-b)&&(a-w)*(x-b)>=(y-w)*(d-b)}function GA(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(a,d){let y=a;do{if(y.i!==a.i&&y.next.i!==a.i&&y.i!==d.i&&y.next.i!==d.i&&Fb(y,y.next,a,d))return!0;y=y.next}while(y!==a);return!1}(s,n)&&(Vd(s,n)&&Vd(n,s)&&function(a,d){let y=a,x=!1;const w=(a.x+d.x)/2,b=(a.y+d.y)/2;do y.y>b!=y.next.y>b&&y.next.y!==y.y&&w<(y.next.x-y.x)*(b-y.y)/(y.next.y-y.y)+y.x&&(x=!x),y=y.next;while(y!==a);return x}(s,n)&&(wn(s.prev,s,n.prev)||wn(s,n.prev,n))||ym(s,n)&&wn(s.prev,s,s.next)>0&&wn(n.prev,n,n.next)>0)}function wn(s,n,a){return(n.y-s.y)*(a.x-n.x)-(n.x-s.x)*(a.y-n.y)}function ym(s,n){return s.x===n.x&&s.y===n.y}function Fb(s,n,a,d){const y=vm(wn(s,n,a)),x=vm(wn(s,n,d)),w=vm(wn(a,d,s)),b=vm(wn(a,d,n));return y!==x&&w!==b||!(y!==0||!_m(s,a,n))||!(x!==0||!_m(s,d,n))||!(w!==0||!_m(a,s,d))||!(b!==0||!_m(a,n,d))}function _m(s,n,a){return n.x<=Math.max(s.x,a.x)&&n.x>=Math.min(s.x,a.x)&&n.y<=Math.max(s.y,a.y)&&n.y>=Math.min(s.y,a.y)}function vm(s){return s>0?1:s<0?-1:0}function Vd(s,n){return wn(s.prev,s,s.next)<0?wn(s,n,s.next)>=0&&wn(s,s.prev,n)>=0:wn(s,n,s.prev)<0||wn(s,s.next,n)<0}function Bb(s,n){const a=d0(s.i,s.x,s.y),d=d0(n.i,n.x,n.y),y=s.next,x=n.prev;return s.next=n,n.prev=s,a.next=y,y.prev=a,d.next=a,a.prev=d,x.next=d,d.prev=x,d}function Nb(s,n,a,d){const y=d0(s,n,a);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function Hd(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function d0(s,n,a){return{i:s,x:n,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function f0(s,n,a){const d=a.patternDependencies;let y=!1;for(const x of n){const w=x.paint.get(`${s}-pattern`);w.isConstant()||(y=!0);const b=w.constantOr(null);b&&(y=!0,d[b.to]=!0,d[b.from]=!0)}return y}function p0(s,n,a,d,y){const x=y.patternDependencies;for(const w of n){const b=w.paint.get(`${s}-pattern`).value;if(b.kind!=="constant"){let k=b.evaluate({zoom:d-1},a,{},y.availableImages),I=b.evaluate({zoom:d},a,{},y.availableImages),D=b.evaluate({zoom:d+1},a,{},y.availableImages);k=k&&k.name?k.name:k,I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,x[k]=!0,x[I]=!0,x[D]=!0,a.patterns[w.id]={min:k,mid:I,max:D}}}return a}class m0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ws,this.indexArray=new ws,this.indexArray2=new Nn,this.programConfigurations=new fu(n.layers,n.zoom),this.segments=new cr,this.segments2=new cr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){this.hasPattern=f0("fill",this.layers,a);const y=this.layers[0].layout.get("fill-sort-key"),x=!y.isConstant(),w=[];for(const{feature:b,id:k,index:I,sourceLayerIndex:D}of n){const L=this.layers[0]._featureFilter.needGeometry,j=mu(b,L);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),j,d))continue;const Z=x?y.evaluate(j,{},d,a.availableImages):void 0,K={id:k,properties:b.properties,type:b.type,sourceLayerIndex:D,index:I,geometry:L?j.geometry:pu(b),patterns:{},sortKey:Z};w.push(K)}x&&w.sort((b,k)=>b.sortKey-k.sortKey);for(const b of w){const{geometry:k,index:I,sourceLayerIndex:D}=b;if(this.hasPattern){const L=p0("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(b,k,I,d,{});a.featureIndex.insert(n[I].feature,k,I,D,this.index)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}addFeatures(n,a,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,FA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,d,y,x){for(const w of lc(a,500)){let b=0;for(const Z of w)b+=Z.length;const k=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),I=k.vertexLength,D=[],L=[];for(const Z of w){if(Z.length===0)continue;Z!==w[0]&&L.push(D.length/2);const K=this.segments2.prepareSegment(Z.length,this.layoutVertexArray,this.indexArray2),J=K.vertexLength;this.layoutVertexArray.emplaceBack(Z[0].x,Z[0].y),this.indexArray2.emplaceBack(J+Z.length-1,J),D.push(Z[0].x),D.push(Z[0].y);for(let le=1;le<Z.length;le++)this.layoutVertexArray.emplaceBack(Z[le].x,Z[le].y),this.indexArray2.emplaceBack(J+le-1,J+le),D.push(Z[le].x),D.push(Z[le].y);K.vertexLength+=Z.length,K.primitiveLength+=Z.length}const j=Lb(D,L);for(let Z=0;Z<j.length;Z+=3)this.indexArray.emplaceBack(I+j[Z],I+j[Z+1],I+j[Z+2]);k.vertexLength+=b,k.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,x,y)}}let $b,jb;St("FillBucket",m0,{omit:["layers","patternFeatures"]});var ZA={get paint(){return jb=jb||new v({"fill-antialias":new It(ie.paint_fill["fill-antialias"]),"fill-opacity":new Ut(ie.paint_fill["fill-opacity"]),"fill-color":new Ut(ie.paint_fill["fill-color"]),"fill-outline-color":new Ut(ie.paint_fill["fill-outline-color"]),"fill-translate":new It(ie.paint_fill["fill-translate"]),"fill-translate-anchor":new It(ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ic(ie.paint_fill["fill-pattern"])})},get layout(){return $b=$b||new v({"fill-sort-key":new Ut(ie.layout_fill["fill-sort-key"])})}};class qA extends u{constructor(n){super(n,ZA)}recalculate(n,a){super.recalculate(n,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new m0(n)}queryRadius(){return pm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,a,d,y,x,w,b){return Sb(mm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,b),y)}isTileClipped(){return!0}}const YA=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),XA=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:KA}=YA;var hl={},JA=P,Ub=Nc;function Nc(s,n,a,d,y){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=d,this._values=y,s.readFields(QA,this,n)}function QA(s,n,a){s==1?n.id=a.readVarint():s==2?function(d,y){for(var x=d.readVarint()+d.pos;d.pos<x;){var w=y._keys[d.readVarint()],b=y._values[d.readVarint()];y.properties[w]=b}}(a,n):s==3?n.type=a.readVarint():s==4&&(n._geometry=a.pos)}function e3(s){for(var n,a,d=0,y=0,x=s.length,w=x-1;y<x;w=y++)d+=((a=s[w]).x-(n=s[y]).x)*(n.y+a.y);return d}Nc.types=["Unknown","Point","LineString","Polygon"],Nc.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,a=s.readVarint()+s.pos,d=1,y=0,x=0,w=0,b=[];s.pos<a;){if(y<=0){var k=s.readVarint();d=7&k,y=k>>3}if(y--,d===1||d===2)x+=s.readSVarint(),w+=s.readSVarint(),d===1&&(n&&b.push(n),n=[]),n.push(new JA(x,w));else{if(d!==7)throw new Error("unknown command "+d);n&&n.push(n[0].clone())}}return n&&b.push(n),b},Nc.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,a=1,d=0,y=0,x=0,w=1/0,b=-1/0,k=1/0,I=-1/0;s.pos<n;){if(d<=0){var D=s.readVarint();a=7&D,d=D>>3}if(d--,a===1||a===2)(y+=s.readSVarint())<w&&(w=y),y>b&&(b=y),(x+=s.readSVarint())<k&&(k=x),x>I&&(I=x);else if(a!==7)throw new Error("unknown command "+a)}return[w,k,b,I]},Nc.prototype.toGeoJSON=function(s,n,a){var d,y,x=this.extent*Math.pow(2,a),w=this.extent*s,b=this.extent*n,k=this.loadGeometry(),I=Nc.types[this.type];function D(Z){for(var K=0;K<Z.length;K++){var J=Z[K];Z[K]=[360*(J.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+b)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(d=0;d<k.length;d++)L[d]=k[d][0];D(k=L);break;case 2:for(d=0;d<k.length;d++)D(k[d]);break;case 3:for(k=function(Z){var K=Z.length;if(K<=1)return[Z];for(var J,le,fe=[],De=0;De<K;De++){var be=e3(Z[De]);be!==0&&(le===void 0&&(le=be<0),le===be<0?(J&&fe.push(J),J=[Z[De]]):J.push(Z[De]))}return J&&fe.push(J),fe}(k),d=0;d<k.length;d++)for(y=0;y<k[d].length;y++)D(k[d][y])}k.length===1?k=k[0]:I="Multi"+I;var j={type:"Feature",geometry:{type:I,coordinates:k},properties:this.properties};return"id"in this&&(j.id=this.id),j};var t3=Ub,Vb=Hb;function Hb(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(r3,this,n),this.length=this._features.length}function r3(s,n,a){s===15?n.version=a.readVarint():s===1?n.name=a.readString():s===5?n.extent=a.readVarint():s===2?n._features.push(a.pos):s===3?n._keys.push(a.readString()):s===4&&n._values.push(function(d){for(var y=null,x=d.readVarint()+d.pos;d.pos<x;){var w=d.readVarint()>>3;y=w===1?d.readString():w===2?d.readFloat():w===3?d.readDouble():w===4?d.readVarint64():w===5?d.readVarint():w===6?d.readSVarint():w===7?d.readBoolean():null}return y}(a))}Hb.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new t3(this._pbf,n,this.extent,this._keys,this._values)};var n3=Vb;function i3(s,n,a){if(s===3){var d=new n3(a,a.readVarint()+a.pos);d.length&&(n[d.name]=d)}}hl.VectorTile=function(s,n){this.layers=s.readFields(i3,{},n)},hl.VectorTileFeature=Ub,hl.VectorTileLayer=Vb;const s3=hl.VectorTileFeature.types,g0=Math.pow(2,13);function Wd(s,n,a,d,y,x,w,b){s.emplaceBack(n,a,2*Math.floor(d*g0)+w,y*g0*2,x*g0*2,Math.round(b))}class y0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new sl,this.centroidVertexArray=new Zn,this.indexArray=new ws,this.programConfigurations=new fu(n.layers,n.zoom),this.segments=new cr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){this.features=[],this.hasPattern=f0("fill-extrusion",this.layers,a);for(const{feature:y,id:x,index:w,sourceLayerIndex:b}of n){const k=this.layers[0]._featureFilter.needGeometry,I=mu(y,k);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),I,d))continue;const D={id:x,sourceLayerIndex:b,index:w,geometry:k?I.geometry:pu(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(p0("fill-extrusion",this.layers,D,this.zoom,a)):this.addFeature(D,D.geometry,w,d,{}),a.featureIndex.insert(y,D.geometry,w,b,this.index,!0)}}addFeatures(n,a,d){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,a,d)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,KA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,XA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,d,y,x){for(const w of lc(a,500)){const b={x:0,y:0,vertexCount:0};let k=0;for(const K of w)k+=K.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const K of w){if(K.length===0||a3(K))continue;let J=0;for(let le=0;le<K.length;le++){const fe=K[le];if(le>=1){const De=K[le-1];if(!o3(fe,De)){I.vertexLength+4>cr.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const be=fe.sub(De)._perp()._unit(),Me=De.dist(fe);J+Me>32768&&(J=0),Wd(this.layoutVertexArray,fe.x,fe.y,be.x,be.y,0,0,J),Wd(this.layoutVertexArray,fe.x,fe.y,be.x,be.y,0,1,J),b.x+=2*fe.x,b.y+=2*fe.y,b.vertexCount+=2,J+=Me,Wd(this.layoutVertexArray,De.x,De.y,be.x,be.y,0,0,J),Wd(this.layoutVertexArray,De.x,De.y,be.x,be.y,0,1,J),b.x+=2*De.x,b.y+=2*De.y,b.vertexCount+=2;const Ve=I.vertexLength;this.indexArray.emplaceBack(Ve,Ve+2,Ve+1),this.indexArray.emplaceBack(Ve+1,Ve+2,Ve+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+k>cr.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),s3[n.type]!=="Polygon")continue;const D=[],L=[],j=I.vertexLength;for(const K of w)if(K.length!==0){K!==w[0]&&L.push(D.length/2);for(let J=0;J<K.length;J++){const le=K[J];Wd(this.layoutVertexArray,le.x,le.y,0,0,1,1,0),b.x+=le.x,b.y+=le.y,b.vertexCount+=1,D.push(le.x),D.push(le.y)}}const Z=Lb(D,L);for(let K=0;K<Z.length;K+=3)this.indexArray.emplaceBack(j+Z[K],j+Z[K+2],j+Z[K+1]);I.primitiveLength+=Z.length/3,I.vertexLength+=k;for(let K=0;K<b.vertexCount;K++){const J=Math.floor(b.x/b.vertexCount),le=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(J,le)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,x,y)}}function o3(s,n){return s.x===n.x&&(s.x<0||s.x>Cn)||s.y===n.y&&(s.y<0||s.y>Cn)}function a3(s){return s.every(n=>n.x<0)||s.every(n=>n.x>Cn)||s.every(n=>n.y<0)||s.every(n=>n.y>Cn)}let Wb;St("FillExtrusionBucket",y0,{omit:["layers","features"]});var l3={get paint(){return Wb=Wb||new v({"fill-extrusion-opacity":new It(ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ut(ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new It(ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new It(ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ic(ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ut(ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ut(ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new It(ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class u3 extends u{constructor(n){super(n,l3)}createBucket(n){return new y0(n)}queryRadius(){return pm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,a,d,y,x,w,b,k){const I=mm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,b),D=this.paint.get("fill-extrusion-height").evaluate(a,d),L=this.paint.get("fill-extrusion-base").evaluate(a,d),j=function(K,J,le,fe){const De=[];for(const be of K){const Me=[be.x,be.y,0,1];gm(Me,Me,J),De.push(new A(Me[0]/Me[3],Me[1]/Me[3]))}return De}(I,k),Z=function(K,J,le,fe){const De=[],be=[],Me=fe[8]*J,Ve=fe[9]*J,et=fe[10]*J,xt=fe[11]*J,Nt=fe[8]*le,yt=fe[9]*le,pt=fe[10]*le,At=fe[11]*le;for(const Tt of K){const bt=[],Ye=[];for(const Dt of Tt){const Mt=Dt.x,Zt=Dt.y,Fr=fe[0]*Mt+fe[4]*Zt+fe[12],Or=fe[1]*Mt+fe[5]*Zt+fe[13],zn=fe[2]*Mt+fe[6]*Zt+fe[14],Gs=fe[3]*Mt+fe[7]*Zt+fe[15],Xn=zn+et,Rn=Gs+xt,xi=Fr+Nt,wi=Or+yt,bi=zn+pt,mn=Gs+At,Ln=new A((Fr+Me)/Rn,(Or+Ve)/Rn);Ln.z=Xn/Rn,bt.push(Ln);const oi=new A(xi/mn,wi/mn);oi.z=bi/mn,Ye.push(oi)}De.push(bt),be.push(Ye)}return[De,be]}(y,L,D,k);return function(K,J,le){let fe=1/0;Sb(le,J)&&(fe=Gb(le,J[0]));for(let De=0;De<J.length;De++){const be=J[De],Me=K[De];for(let Ve=0;Ve<be.length-1;Ve++){const et=be[Ve],xt=[et,be[Ve+1],Me[Ve+1],Me[Ve],et];bb(le,xt)&&(fe=Math.min(fe,Gb(le,xt)))}}return fe!==1/0&&fe}(Z[0],Z[1],j)}}function Gd(s,n){return s.x*n.x+s.y*n.y}function Gb(s,n){if(s.length===1){let a=0;const d=n[a++];let y;for(;!y||d.equals(y);)if(y=n[a++],!y)return 1/0;for(;a<n.length;a++){const x=n[a],w=s[0],b=y.sub(d),k=x.sub(d),I=w.sub(d),D=Gd(b,b),L=Gd(b,k),j=Gd(k,k),Z=Gd(I,b),K=Gd(I,k),J=D*j-L*L,le=(j*Z-L*K)/J,fe=(D*K-L*Z)/J,De=d.z*(1-le-fe)+y.z*le+x.z*fe;if(isFinite(De))return De}return 1/0}{let a=1/0;for(const d of n)a=Math.min(a,d.z);return a}}const c3=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:h3}=c3,d3=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:f3}=d3,p3=hl.VectorTileFeature.types,m3=Math.cos(Math.PI/180*37.5),Zb=Math.pow(2,14)/.5;class _0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Mc,this.layoutVertexArray2=new ol,this.indexArray=new ws,this.programConfigurations=new fu(n.layers,n.zoom),this.segments=new cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){this.hasPattern=f0("line",this.layers,a);const y=this.layers[0].layout.get("line-sort-key"),x=!y.isConstant(),w=[];for(const{feature:b,id:k,index:I,sourceLayerIndex:D}of n){const L=this.layers[0]._featureFilter.needGeometry,j=mu(b,L);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),j,d))continue;const Z=x?y.evaluate(j,{},d):void 0,K={id:k,properties:b.properties,type:b.type,sourceLayerIndex:D,index:I,geometry:L?j.geometry:pu(b),patterns:{},sortKey:Z};w.push(K)}x&&w.sort((b,k)=>b.sortKey-k.sortKey);for(const b of w){const{geometry:k,index:I,sourceLayerIndex:D}=b;if(this.hasPattern){const L=p0("line",this.layers,b,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(b,k,I,d,{});a.featureIndex.insert(n[I].feature,k,I,D,this.index)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}addFeatures(n,a,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,f3)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,h3),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,d,y,x){const w=this.layers[0].layout,b=w.get("line-join").evaluate(n,{}),k=w.get("line-cap"),I=w.get("line-miter-limit"),D=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const L of a)this.addLine(L,n,b,k,I,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,x,y)}addLine(n,a,d,y,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<n.length-1;fe++)this.totalDistance+=n[fe].dist(n[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=p3[a.type]==="Polygon";let k=n.length;for(;k>=2&&n[k-1].equals(n[k-2]);)k--;let I=0;for(;I<k-1&&n[I].equals(n[I+1]);)I++;if(k<(b?3:2))return;d==="bevel"&&(x=1.05);const D=this.overscaling<=16?15*Cn/(512*this.overscaling):0,L=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let j,Z,K,J,le;this.e1=this.e2=-1,b&&(j=n[k-2],le=n[I].sub(j)._unit()._perp());for(let fe=I;fe<k;fe++){if(K=fe===k-1?b?n[I+1]:void 0:n[fe+1],K&&n[fe].equals(K))continue;le&&(J=le),j&&(Z=j),j=n[fe],le=K?K.sub(j)._unit()._perp():J,J=J||le;let De=J.add(le);De.x===0&&De.y===0||De._unit();const be=J.x*le.x+J.y*le.y,Me=De.x*le.x+De.y*le.y,Ve=Me!==0?1/Me:1/0,et=2*Math.sqrt(2-2*Me),xt=Me<m3&&Z&&K,Nt=J.x*le.y-J.y*le.x>0;if(xt&&fe>I){const At=j.dist(Z);if(At>2*D){const Tt=j.sub(j.sub(Z)._mult(D/At)._round());this.updateDistance(Z,Tt),this.addCurrentVertex(Tt,J,0,0,L),Z=Tt}}const yt=Z&&K;let pt=yt?d:b?"butt":y;if(yt&&pt==="round"&&(Ve<w?pt="miter":Ve<=2&&(pt="fakeround")),pt==="miter"&&Ve>x&&(pt="bevel"),pt==="bevel"&&(Ve>2&&(pt="flipbevel"),Ve<x&&(pt="miter")),Z&&this.updateDistance(Z,j),pt==="miter")De._mult(Ve),this.addCurrentVertex(j,De,0,0,L);else if(pt==="flipbevel"){if(Ve>100)De=le.mult(-1);else{const At=Ve*J.add(le).mag()/J.sub(le).mag();De._perp()._mult(At*(Nt?-1:1))}this.addCurrentVertex(j,De,0,0,L),this.addCurrentVertex(j,De.mult(-1),0,0,L)}else if(pt==="bevel"||pt==="fakeround"){const At=-Math.sqrt(Ve*Ve-1),Tt=Nt?At:0,bt=Nt?0:At;if(Z&&this.addCurrentVertex(j,J,Tt,bt,L),pt==="fakeround"){const Ye=Math.round(180*et/Math.PI/20);for(let Dt=1;Dt<Ye;Dt++){let Mt=Dt/Ye;if(Mt!==.5){const Fr=Mt-.5;Mt+=Mt*Fr*(Mt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*Fr*Fr+(.848013+be*(.215638*be-1.06021)))}const Zt=le.sub(J)._mult(Mt)._add(J)._unit()._mult(Nt?-1:1);this.addHalfVertex(j,Zt.x,Zt.y,!1,Nt,0,L)}}K&&this.addCurrentVertex(j,le,-Tt,-bt,L)}else if(pt==="butt")this.addCurrentVertex(j,De,0,0,L);else if(pt==="square"){const At=Z?1:-1;this.addCurrentVertex(j,De,At,At,L)}else pt==="round"&&(Z&&(this.addCurrentVertex(j,J,0,0,L),this.addCurrentVertex(j,J,1,1,L,!0)),K&&(this.addCurrentVertex(j,le,-1,-1,L,!0),this.addCurrentVertex(j,le,0,0,L)));if(xt&&fe<k-1){const At=j.dist(K);if(At>2*D){const Tt=j.add(K.sub(j)._mult(D/At)._round());this.updateDistance(j,Tt),this.addCurrentVertex(Tt,le,0,0,L),j=Tt}}}}addCurrentVertex(n,a,d,y,x,w=!1){const b=a.y*y-a.x,k=-a.y-a.x*y;this.addHalfVertex(n,a.x+a.y*d,a.y-a.x*d,w,!1,d,x),this.addHalfVertex(n,b,k,w,!0,-y,x),this.distance>Zb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,a,d,y,x,w))}addHalfVertex({x:n,y:a},d,y,x,w,b,k){const I=.5*(this.lineClips?this.scaledDistance*(Zb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(a<<1)+(w?1:0),Math.round(63*d)+128,Math.round(63*y)+128,1+(b===0?0:b<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),k.primitiveLength++),w?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}let qb,Yb;St("LineBucket",_0,{omit:["layers","patternFeatures"]});var Xb={get paint(){return Yb=Yb||new v({"line-opacity":new Ut(ie.paint_line["line-opacity"]),"line-color":new Ut(ie.paint_line["line-color"]),"line-translate":new It(ie.paint_line["line-translate"]),"line-translate-anchor":new It(ie.paint_line["line-translate-anchor"]),"line-width":new Ut(ie.paint_line["line-width"]),"line-gap-width":new Ut(ie.paint_line["line-gap-width"]),"line-offset":new Ut(ie.paint_line["line-offset"]),"line-blur":new Ut(ie.paint_line["line-blur"]),"line-dasharray":new Pc(ie.paint_line["line-dasharray"]),"line-pattern":new Ic(ie.paint_line["line-pattern"]),"line-gradient":new Od(ie.paint_line["line-gradient"])})},get layout(){return qb=qb||new v({"line-cap":new It(ie.layout_line["line-cap"]),"line-join":new Ut(ie.layout_line["line-join"]),"line-miter-limit":new It(ie.layout_line["line-miter-limit"]),"line-round-limit":new It(ie.layout_line["line-round-limit"]),"line-sort-key":new Ut(ie.layout_line["line-sort-key"])})}};class g3 extends Ut{possiblyEvaluate(n,a){return a=new Vr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(n,a)}evaluate(n,a,d,y){return a=ge({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(n,a,d,y)}}let xm;class y3 extends u{constructor(n){super(n,Xb),this.gradientVersion=0,xm||(xm=new g3(Xb.paint.properties["line-width"].specification),xm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof $a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,a){super.recalculate(n,a),this.paint._values["line-floorwidth"]=xm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new _0(n)}queryRadius(n){const a=n,d=Kb(Nd("line-width",this,a),Nd("line-gap-width",this,a)),y=Nd("line-offset",this,a);return d/2+Math.abs(y)+pm(this.paint.get("line-translate"))}queryIntersectsFeature(n,a,d,y,x,w,b){const k=mm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,b),I=b/2*Kb(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),D=this.paint.get("line-offset").evaluate(a,d);return D&&(y=function(L,j){const Z=[];for(let K=0;K<L.length;K++){const J=L[K],le=[];for(let fe=0;fe<J.length;fe++){const De=J[fe-1],be=J[fe],Me=J[fe+1],Ve=fe===0?new A(0,0):be.sub(De)._unit()._perp(),et=fe===J.length-1?new A(0,0):Me.sub(be)._unit()._perp(),xt=Ve._add(et)._unit(),Nt=xt.x*et.x+xt.y*et.y;Nt!==0&&xt._mult(1/Nt),le.push(xt._mult(j)._add(be))}Z.push(le)}return Z}(y,D*b)),function(L,j,Z){for(let K=0;K<j.length;K++){const J=j[K];if(L.length>=3){for(let le=0;le<J.length;le++)if(Oc(L,J[le]))return!0}if(EA(L,J,Z))return!0}return!1}(k,y,I)}isTileClipped(){return!0}}function Kb(s,n){return n>0?n+2*s:s}const _3=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),v3=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const x3=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Jb=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),w3=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function b3(s,n,a){return s.sections.forEach(d=>{d.text=function(y,x,w){const b=x.layout.get("text-transform").evaluate(w,{});return b==="uppercase"?y=y.toLocaleUpperCase():b==="lowercase"&&(y=y.toLocaleLowerCase()),Ri.applyArabicShaping&&(y=Ri.applyArabicShaping(y)),y}(d.text,n,a)}),s}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Zd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Pn=24,Qb=Lr,e2=function(s,n,a,d,y){var x,w,b=8*y-d-1,k=(1<<b)-1,I=k>>1,D=-7,L=y-1,j=-1,Z=s[n+L];for(L+=j,x=Z&(1<<-D)-1,Z>>=-D,D+=b;D>0;x=256*x+s[n+L],L+=j,D-=8);for(w=x&(1<<-D)-1,x>>=-D,D+=d;D>0;w=256*w+s[n+L],L+=j,D-=8);if(x===0)x=1-I;else{if(x===k)return w?NaN:1/0*(Z?-1:1);w+=Math.pow(2,d),x-=I}return(Z?-1:1)*w*Math.pow(2,x-d)},t2=function(s,n,a,d,y,x){var w,b,k,I=8*x-y-1,D=(1<<I)-1,L=D>>1,j=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=0,K=1,J=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,w=D):(w=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-w))<1&&(w--,k*=2),(n+=w+L>=1?j/k:j*Math.pow(2,1-L))*k>=2&&(w++,k/=2),w+L>=D?(b=0,w=D):w+L>=1?(b=(n*k-1)*Math.pow(2,y),w+=L):(b=n*Math.pow(2,L-1)*Math.pow(2,y),w=0));y>=8;s[a+Z]=255&b,Z+=K,b/=256,y-=8);for(w=w<<y|b,I+=y;I>0;s[a+Z]=255&w,Z+=K,w/=256,I-=8);s[a+Z-K]|=128*J};function Lr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Lr.Varint=0,Lr.Fixed64=1,Lr.Bytes=2,Lr.Fixed32=5;var v0=4294967296,r2=1/v0,n2=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function ha(s){return s.type===Lr.Bytes?s.readVarint()+s.pos:s.pos+1}function $c(s,n,a){return a?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function i2(s,n,a){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(d);for(var y=a.pos-1;y>=s;y--)a.buf[y+d]=a.buf[y]}function S3(s,n){for(var a=0;a<s.length;a++)n.writeVarint(s[a])}function k3(s,n){for(var a=0;a<s.length;a++)n.writeSVarint(s[a])}function T3(s,n){for(var a=0;a<s.length;a++)n.writeFloat(s[a])}function E3(s,n){for(var a=0;a<s.length;a++)n.writeDouble(s[a])}function C3(s,n){for(var a=0;a<s.length;a++)n.writeBoolean(s[a])}function I3(s,n){for(var a=0;a<s.length;a++)n.writeFixed32(s[a])}function P3(s,n){for(var a=0;a<s.length;a++)n.writeSFixed32(s[a])}function M3(s,n){for(var a=0;a<s.length;a++)n.writeFixed64(s[a])}function A3(s,n){for(var a=0;a<s.length;a++)n.writeSFixed64(s[a])}function wm(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function jc(s,n,a){s[a]=n,s[a+1]=n>>>8,s[a+2]=n>>>16,s[a+3]=n>>>24}function s2(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}Lr.prototype={destroy:function(){this.buf=null},readFields:function(s,n,a){for(a=a||this.length;this.pos<a;){var d=this.readVarint(),y=d>>3,x=this.pos;this.type=7&d,s(y,n,this),this.pos===x&&this.skip(d)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=wm(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=s2(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=wm(this.buf,this.pos)+wm(this.buf,this.pos+4)*v0;return this.pos+=8,s},readSFixed64:function(){var s=wm(this.buf,this.pos)+s2(this.buf,this.pos+4)*v0;return this.pos+=8,s},readFloat:function(){var s=e2(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=e2(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,a,d=this.buf;return n=127&(a=d[this.pos++]),a<128?n:(n|=(127&(a=d[this.pos++]))<<7,a<128?n:(n|=(127&(a=d[this.pos++]))<<14,a<128?n:(n|=(127&(a=d[this.pos++]))<<21,a<128?n:function(y,x,w){var b,k,I=w.buf;if(b=(112&(k=I[w.pos++]))>>4,k<128||(b|=(127&(k=I[w.pos++]))<<3,k<128)||(b|=(127&(k=I[w.pos++]))<<10,k<128)||(b|=(127&(k=I[w.pos++]))<<17,k<128)||(b|=(127&(k=I[w.pos++]))<<24,k<128)||(b|=(1&(k=I[w.pos++]))<<31,k<128))return $c(y,b,x);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=d[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&n2?function(a,d,y){return n2.decode(a.subarray(d,y))}(this.buf,n,s):function(a,d,y){for(var x="",w=d;w<y;){var b,k,I,D=a[w],L=null,j=D>239?4:D>223?3:D>191?2:1;if(w+j>y)break;j===1?D<128&&(L=D):j===2?(192&(b=a[w+1]))==128&&(L=(31&D)<<6|63&b)<=127&&(L=null):j===3?(k=a[w+2],(192&(b=a[w+1]))==128&&(192&k)==128&&((L=(15&D)<<12|(63&b)<<6|63&k)<=2047||L>=55296&&L<=57343)&&(L=null)):j===4&&(k=a[w+2],I=a[w+3],(192&(b=a[w+1]))==128&&(192&k)==128&&(192&I)==128&&((L=(15&D)<<18|(63&b)<<12|(63&k)<<6|63&I)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,j=1):L>65535&&(L-=65536,x+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),x+=String.fromCharCode(L),w+=j}return x}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==Lr.Bytes)return s.push(this.readVarint(n));var a=ha(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSVarint());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Lr.Bytes)return s.push(this.readBoolean());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFloat());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Lr.Bytes)return s.push(this.readDouble());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFixed32());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSFixed32());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFixed64());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSFixed64());var n=ha(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===Lr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Lr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Lr.Fixed32)this.pos+=4;else{if(n!==Lr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),jc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),jc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),jc(this.buf,-1&s,this.pos),jc(this.buf,Math.floor(s*r2),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),jc(this.buf,-1&s,this.pos),jc(this.buf,Math.floor(s*r2),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,a){var d,y;if(n>=0?(d=n%4294967296|0,y=n/4294967296|0):(y=~(-n/4294967296),4294967295^(d=~(-n%4294967296))?d=d+1|0:(d=0,y=y+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(x,w,b){b.buf[b.pos++]=127&x|128,x>>>=7,b.buf[b.pos++]=127&x|128,x>>>=7,b.buf[b.pos++]=127&x|128,x>>>=7,b.buf[b.pos++]=127&x|128,b.buf[b.pos]=127&(x>>>=7)}(d,0,a),function(x,w){var b=(7&x)<<4;w.buf[w.pos++]|=b|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(y,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(d,y,x){for(var w,b,k=0;k<y.length;k++){if((w=y.charCodeAt(k))>55295&&w<57344){if(!b){w>56319||k+1===y.length?(d[x++]=239,d[x++]=191,d[x++]=189):b=w;continue}if(w<56320){d[x++]=239,d[x++]=191,d[x++]=189,b=w;continue}w=b-55296<<10|w-56320|65536,b=null}else b&&(d[x++]=239,d[x++]=191,d[x++]=189,b=null);w<128?d[x++]=w:(w<2048?d[x++]=w>>6|192:(w<65536?d[x++]=w>>12|224:(d[x++]=w>>18|240,d[x++]=w>>12&63|128),d[x++]=w>>6&63|128),d[x++]=63&w|128)}return x}(this.buf,s,this.pos);var a=this.pos-n;a>=128&&i2(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),t2(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),t2(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,n){this.pos++;var a=this.pos;s(n,this);var d=this.pos-a;d>=128&&i2(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,n,a){this.writeTag(s,Lr.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,S3,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,k3,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,C3,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,T3,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,E3,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,I3,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,P3,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,M3,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,A3,n)},writeBytesField:function(s,n){this.writeTag(s,Lr.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,Lr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,Lr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,Lr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,Lr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,Lr.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,Lr.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,Lr.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,Lr.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,Lr.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var x0=T(Qb);const w0=3;function D3(s,n,a){s===1&&a.readMessage(z3,n)}function z3(s,n,a){if(s===3){const{id:d,bitmap:y,width:x,height:w,left:b,top:k,advance:I}=a.readMessage(R3,{});n.push({id:d,bitmap:new jd({width:x+2*w0,height:w+2*w0},y),metrics:{width:x,height:w,left:b,top:k,advance:I}})}}function R3(s,n,a){s===1?n.id=a.readVarint():s===2?n.bitmap=a.readBytes():s===3?n.width=a.readVarint():s===4?n.height=a.readVarint():s===5?n.left=a.readSVarint():s===6?n.top=a.readSVarint():s===7&&(n.advance=a.readVarint())}const o2=w0;function a2(s){let n=0,a=0;for(const w of s)n+=w.w*w.h,a=Math.max(a,w.w);s.sort((w,b)=>b.h-w.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let y=0,x=0;for(const w of s)for(let b=d.length-1;b>=0;b--){const k=d[b];if(!(w.w>k.w||w.h>k.h)){if(w.x=k.x,w.y=k.y,x=Math.max(x,w.y+w.h),y=Math.max(y,w.x+w.w),w.w===k.w&&w.h===k.h){const I=d.pop();b<d.length&&(d[b]=I)}else w.h===k.h?(k.x+=w.w,k.w-=w.w):w.w===k.w?(k.y+=w.h,k.h-=w.h):(d.push({x:k.x+w.w,y:k.y,w:k.w-w.w,h:w.h}),k.y+=w.h,k.h-=w.h);break}}return{w:y,h:x,fill:n/(y*x)||0}}const Oi=1;class b0{constructor(n,{pixelRatio:a,version:d,stretchX:y,stretchY:x,content:w,textFitWidth:b,textFitHeight:k}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=y,this.stretchY=x,this.content=w,this.version=d,this.textFitWidth=b,this.textFitHeight=k}get tl(){return[this.paddedRect.x+Oi,this.paddedRect.y+Oi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Oi,this.paddedRect.y+this.paddedRect.h-Oi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Oi)/this.pixelRatio,(this.paddedRect.h-2*Oi)/this.pixelRatio]}}class l2{constructor(n,a){const d={},y={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,d,x),this.addImages(a,y,x);const{w,h:b}=a2(x),k=new bs({width:w||1,height:b||1});for(const I in n){const D=n[I],L=d[I].paddedRect;bs.copy(D.data,k,{x:0,y:0},{x:L.x+Oi,y:L.y+Oi},D.data)}for(const I in a){const D=a[I],L=y[I].paddedRect,j=L.x+Oi,Z=L.y+Oi,K=D.data.width,J=D.data.height;bs.copy(D.data,k,{x:0,y:0},{x:j,y:Z},D.data),bs.copy(D.data,k,{x:0,y:J-1},{x:j,y:Z-1},{width:K,height:1}),bs.copy(D.data,k,{x:0,y:0},{x:j,y:Z+J},{width:K,height:1}),bs.copy(D.data,k,{x:K-1,y:0},{x:j-1,y:Z},{width:1,height:J}),bs.copy(D.data,k,{x:0,y:0},{x:j+K,y:Z},{width:1,height:J})}this.image=k,this.iconPositions=d,this.patternPositions=y}addImages(n,a,d){for(const y in n){const x=n[y],w={x:0,y:0,w:x.data.width+2*Oi,h:x.data.height+2*Oi};d.push(w),a[y]=new b0(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),a)}patchUpdatedImage(n,a,d){if(!n||!a||n.version===a.version)return;n.version=a.version;const[y,x]=n.tl;d.update(a.data,void 0,{x:y,y:x})}}var dl;St("ImagePosition",b0),St("ImageAtlas",l2),g.ah=void 0,(dl=g.ah||(g.ah={}))[dl.none=0]="none",dl[dl.horizontal=1]="horizontal",dl[dl.vertical=2]="vertical",dl[dl.horizontalOnly=3]="horizontalOnly";const qd=-17;class Yd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const d=new Yd;return d.scale=n||1,d.fontStack=a,d}static forImage(n){const a=new Yd;return a.imageName=n,a}}class Uc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const d=new Uc;for(let y=0;y<n.sections.length;y++){const x=n.sections[y];x.image?d.addImageSection(x):d.addTextSection(x,a)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let d=0;d<n.length;d++){const y=n.charCodeAt(d+1)||null,x=n.charCodeAt(d-1)||null;a+=y&&am(y)&&!Zd[n[d+1]]||x&&am(x)&&!Zd[n[d-1]]||!Zd[n[d]]?n[d]:Zd[n[d]]}return a}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&Sm[this.text.charCodeAt(d)];d++)n++;let a=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&Sm[this.text.charCodeAt(d)];d--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const d=new Uc;return d.text=this.text.substring(n,a),d.sectionIndex=this.sectionIndex.slice(n,a),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Yd.forText(n.scale,n.fontStack||a));const d=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(d)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void je("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Yd.forImage(a)),this.sectionIndex.push(this.sections.length-1)):je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bm(s,n,a,d,y,x,w,b,k,I,D,L,j,Z,K){const J=Uc.fromFeature(s,y);let le;L===g.ah.vertical&&J.verticalizePunctuation();const{processBidirectionalText:fe,processStyledBidirectionalText:De}=Ri;if(fe&&J.sections.length===1){le=[];const Ve=fe(J.toString(),S0(J,I,x,n,d,Z));for(const et of Ve){const xt=new Uc;xt.text=et,xt.sections=J.sections;for(let Nt=0;Nt<et.length;Nt++)xt.sectionIndex.push(0);le.push(xt)}}else if(De){le=[];const Ve=De(J.text,J.sectionIndex,S0(J,I,x,n,d,Z));for(const et of Ve){const xt=new Uc;xt.text=et[0],xt.sectionIndex=et[1],xt.sections=J.sections,le.push(xt)}}else le=function(Ve,et){const xt=[],Nt=Ve.text;let yt=0;for(const pt of et)xt.push(Ve.substring(yt,pt)),yt=pt;return yt<Nt.length&&xt.push(Ve.substring(yt,Nt.length)),xt}(J,S0(J,I,x,n,d,Z));const be=[],Me={positionedLines:be,text:J.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(Ve,et,xt,Nt,yt,pt,At,Tt,bt,Ye,Dt,Mt){let Zt=0,Fr=qd,Or=0,zn=0;const Gs=Tt==="right"?1:Tt==="left"?0:.5;let Xn=0;for(const mn of yt){mn.trim();const Ln=mn.getMaxScale(),oi=(Ln-1)*Pn,Kn={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[Xn]=Kn;const Si=Kn.positionedGlyphs;let Jn=0;if(!mn.length()){Fr+=pt,++Xn;continue}for(let Fi=0;Fi<mn.length();Fi++){const xr=mn.getSection(Fi),$r=mn.getSectionIndex(Fi),Zr=mn.getCharCode(Fi);let ns=0,nn=null,Gc=null,Ro=null,Lo=Pn;const Zs=!(bt===g.ah.horizontal||!Dt&&!Rd(Zr)||Dt&&(Sm[Zr]||(Rn=Zr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Rn)))));if(xr.imageName){const Ts=Nt[xr.imageName];if(!Ts)continue;Ro=xr.imageName,Ve.iconsInText=Ve.iconsInText||!0,Gc=Ts.paddedRect;const $n=Ts.displaySize;xr.scale=xr.scale*Pn/Mt,nn={width:$n[0],height:$n[1],left:Oi,top:-o2,advance:Zs?$n[1]:$n[0]},ns=oi+(Pn-$n[1]*xr.scale),Lo=nn.advance;const da=Zs?$n[0]*xr.scale-Pn*Ln:$n[1]*xr.scale-Pn*Ln;da>0&&da>Jn&&(Jn=da)}else{const Ts=xt[xr.fontStack],$n=Ts&&Ts[Zr];if($n&&$n.rect)Gc=$n.rect,nn=$n.metrics;else{const da=et[xr.fontStack],tf=da&&da[Zr];if(!tf)continue;nn=tf.metrics}ns=(Ln-xr.scale)*Pn}Zs?(Ve.verticalizable=!0,Si.push({glyph:Zr,imageName:Ro,x:Zt,y:Fr+ns,vertical:Zs,scale:xr.scale,fontStack:xr.fontStack,sectionIndex:$r,metrics:nn,rect:Gc}),Zt+=Lo*xr.scale+Ye):(Si.push({glyph:Zr,imageName:Ro,x:Zt,y:Fr+ns,vertical:Zs,scale:xr.scale,fontStack:xr.fontStack,sectionIndex:$r,metrics:nn,rect:Gc}),Zt+=nn.advance*xr.scale+Ye)}Si.length!==0&&(Or=Math.max(Zt-Ye,Or),B3(Si,0,Si.length-1,Gs,Jn)),Zt=0;const ks=pt*Ln+Jn;Kn.lineOffset=Math.max(Jn,oi),Fr+=ks,zn=Math.max(ks,zn),++Xn}var Rn;const xi=Fr-qd,{horizontalAlign:wi,verticalAlign:bi}=k0(At);(function(mn,Ln,oi,Kn,Si,Jn,ks,Fi,xr){const $r=(Ln-oi)*Si;let Zr=0;Zr=Jn!==ks?-Fi*Kn-qd:(-Kn*xr+.5)*ks;for(const ns of mn)for(const nn of ns.positionedGlyphs)nn.x+=$r,nn.y+=Zr})(Ve.positionedLines,Gs,wi,bi,Or,zn,pt,xi,yt.length),Ve.top+=-bi*xi,Ve.bottom=Ve.top+xi,Ve.left+=-wi*Or,Ve.right=Ve.left+Or}(Me,n,a,d,le,w,b,k,L,I,j,K),!function(Ve){for(const et of Ve)if(et.positionedGlyphs.length!==0)return!1;return!0}(be)&&Me}const Sm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},L3={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},O3={40:!0};function u2(s,n,a,d,y,x){if(n.imageName){const w=d[n.imageName];return w?w.displaySize[0]*n.scale*Pn/x+y:0}{const w=a[n.fontStack],b=w&&w[s];return b?b.metrics.advance*n.scale+y:0}}function c2(s,n,a,d){const y=Math.pow(s-n,2);return d?s<n?y/2:2*y:y+Math.abs(a)*a}function F3(s,n,a){let d=0;return s===10&&(d-=1e4),a&&(d+=150),s!==40&&s!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function h2(s,n,a,d,y,x){let w=null,b=c2(n,a,y,x);for(const k of d){const I=c2(n-k.x,a,y,x)+k.badness;I<=b&&(w=k,b=I)}return{index:s,x:n,priorBreak:w,badness:b}}function d2(s){return s?d2(s.priorBreak).concat(s.index):[]}function S0(s,n,a,d,y,x){if(!s)return[];const w=[],b=function(L,j,Z,K,J,le){let fe=0;for(let De=0;De<L.length();De++){const be=L.getSection(De);fe+=u2(L.getCharCode(De),be,K,J,j,le)}return fe/Math.max(1,Math.ceil(fe/Z))}(s,n,a,d,y,x),k=s.text.indexOf("​")>=0;let I=0;for(let L=0;L<s.length();L++){const j=s.getSection(L),Z=s.getCharCode(L);if(Sm[Z]||(I+=u2(Z,j,d,y,n,x)),L<s.length()-1){const K=!((D=Z)<11904)&&(!!ur["CJK Compatibility Forms"](D)||!!ur["CJK Compatibility"](D)||!!ur["CJK Strokes"](D)||!!ur["CJK Symbols and Punctuation"](D)||!!ur["Enclosed CJK Letters and Months"](D)||!!ur["Halfwidth and Fullwidth Forms"](D)||!!ur["Ideographic Description Characters"](D)||!!ur["Vertical Forms"](D)||om.test(String.fromCodePoint(D)));(L3[Z]||K||j.imageName||L!==s.length()-2&&O3[s.getCharCode(L+1)])&&w.push(h2(L+1,I,b,w,F3(Z,s.getCharCode(L+1),K&&k),!1))}}var D;return d2(h2(s.length(),I,b,w,0,!0))}function k0(s){let n=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function B3(s,n,a,d,y){if(!d&&!y)return;const x=s[a],w=(s[a].x+x.metrics.advance*x.scale)*d;for(let b=n;b<=a;b++)s[b].x-=w,s[b].y+=y}function N3(s,n,a){const{horizontalAlign:d,verticalAlign:y}=k0(a),x=n[0]-s.displaySize[0]*d,w=n[1]-s.displaySize[1]*y;return{image:s,top:w,bottom:w+s.displaySize[1],left:x,right:x+s.displaySize[0]}}function f2(s){var n,a;let d=s.left,y=s.top,x=s.right-d,w=s.bottom-y;const b=(n=s.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",k=(a=s.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",I=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(k==="proportional"){if(b==="stretchOnly"&&x/w<I||b==="proportional"){const D=Math.ceil(w*I);d*=D/x,x=D}}else if(b==="proportional"&&k==="stretchOnly"&&I!==0&&x/w>I){const D=Math.ceil(x/I);y*=D/w,w=D}return{x1:d,y1:y,x2:d+x,y2:y+w}}function p2(s,n,a,d,y,x){const w=s.image;let b;if(w.content){const le=w.content,fe=w.pixelRatio||1;b=[le[0]/fe,le[1]/fe,w.displaySize[0]-le[2]/fe,w.displaySize[1]-le[3]/fe]}const k=n.left*x,I=n.right*x;let D,L,j,Z;a==="width"||a==="both"?(Z=y[0]+k-d[3],L=y[0]+I+d[1]):(Z=y[0]+(k+I-w.displaySize[0])/2,L=Z+w.displaySize[0]);const K=n.top*x,J=n.bottom*x;return a==="height"||a==="both"?(D=y[1]+K-d[0],j=y[1]+J+d[2]):(D=y[1]+(K+J-w.displaySize[1])/2,j=D+w.displaySize[1]),{image:w,top:D,right:L,bottom:j,left:Z,collisionPadding:b}}const Xd=255,zo=128,fl=Xd*zo;function m2(s,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Vr(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:y}=a;let x=0;for(;x<d.length&&d[x]<=s;)x++;x=Math.max(0,x-1);let w=x;for(;w<d.length&&d[w]<s+1;)w++;w=Math.min(d.length-1,w);const b=d[x],k=d[w];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:k,interpolationType:y}:{kind:"camera",minZoom:b,maxZoom:k,minSize:a.evaluate(new Vr(b)),maxSize:a.evaluate(new Vr(k)),interpolationType:y}}}function T0(s,n,a){let d="never";const y=s.get(n);return y?d=y:s.get(a)&&(d="always"),d}const $3=hl.VectorTileFeature.types,j3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function km(s,n,a,d,y,x,w,b,k,I,D,L,j){const Z=b?Math.min(fl,Math.round(b[0])):0,K=b?Math.min(fl,Math.round(b[1])):0;s.emplaceBack(n,a,Math.round(32*d),Math.round(32*y),x,w,(Z<<1)+(k?1:0),K,16*I,16*D,256*L,256*j)}function E0(s,n,a){s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a)}function U3(s){for(const n of s.sections)if(e0(n.text))return!0;return!1}class C0{constructor(n){this.layoutVertexArray=new Ac,this.indexArray=new ws,this.programConfigurations=n,this.segments=new cr,this.dynamicLayoutVertexArray=new Fd,this.opacityVertexArray=new ts,this.hasVisibleVertices=!1,this.placedSymbolArray=new Hr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,d,y){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_3.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,v3.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,j3,!0),this.opacityVertexBuffer.itemSize=1),(d||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}St("SymbolBuffers",C0);class I0{constructor(n,a,d){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new d,this.segments=new cr,this.collisionVertexArray=new Ao}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,x3.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}St("CollisionBuffers",I0);class Vc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(w=>w.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=a0([]),this.placementViewportMatrix=a0([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=m2(this.zoom,a["text-size"]),this.iconSizeData=m2(this.zoom,a["icon-size"]);const d=this.layers[0].layout,y=d.get("symbol-sort-key"),x=d.get("symbol-z-order");this.canOverlap=T0(d,"text-overlap","text-allow-overlap")!=="never"||T0(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(w=>g.ah[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=n.sourceID}createArrays(){this.text=new C0(new fu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new C0(new fu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Wr,this.lineVertexArray=new Gn,this.symbolInstances=new ar,this.textAnchorOffsets=new Gr}calculateGlyphDependencies(n,a,d,y,x){for(let w=0;w<n.length;w++)if(a[n.charCodeAt(w)]=!0,(d||y)&&x){const b=Zd[n.charAt(w)];b&&(a[b.charCodeAt(0)]=!0)}}populate(n,a,d){const y=this.layers[0],x=y.layout,w=x.get("text-font"),b=x.get("text-field"),k=x.get("icon-image"),I=(b.value.kind!=="constant"||b.value.value instanceof Mi&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),D=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,L=x.get("symbol-sort-key");if(this.features=[],!I&&!D)return;const j=a.iconDependencies,Z=a.glyphDependencies,K=a.availableImages,J=new Vr(this.zoom);for(const{feature:le,id:fe,index:De,sourceLayerIndex:be}of n){const Me=y._featureFilter.needGeometry,Ve=mu(le,Me);if(!y._featureFilter.filter(J,Ve,d))continue;let et,xt;if(Me||(Ve.geometry=pu(le)),I){const yt=y.getValueAndResolveTokens("text-field",Ve,d,K),pt=Mi.factory(yt),At=this.hasRTLText=this.hasRTLText||U3(pt);(!At||Ri.getRTLTextPluginStatus()==="unavailable"||At&&Ri.isParsed())&&(et=b3(pt,y,Ve))}if(D){const yt=y.getValueAndResolveTokens("icon-image",Ve,d,K);xt=yt instanceof Di?yt:Di.fromString(yt)}if(!et&&!xt)continue;const Nt=this.sortFeaturesByKey?L.evaluate(Ve,{},d):void 0;if(this.features.push({id:fe,text:et,icon:xt,index:De,sourceLayerIndex:be,geometry:Ve.geometry,properties:le.properties,type:$3[le.type],sortKey:Nt}),xt&&(j[xt.name]=!0),et){const yt=w.evaluate(Ve,{},d).join(","),pt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ah.vertical)>=0;for(const At of et.sections)if(At.image)j[At.image.name]=!0;else{const Tt=Dd(et.toString()),bt=At.fontStack||yt,Ye=Z[bt]=Z[bt]||{};this.calculateGlyphDependencies(At.text,Ye,pt,this.allowVerticalPlacement,Tt)}}}x.get("symbol-placement")==="line"&&(this.features=function(le){const fe={},De={},be=[];let Me=0;function Ve(yt){be.push(le[yt]),Me++}function et(yt,pt,At){const Tt=De[yt];return delete De[yt],De[pt]=Tt,be[Tt].geometry[0].pop(),be[Tt].geometry[0]=be[Tt].geometry[0].concat(At[0]),Tt}function xt(yt,pt,At){const Tt=fe[pt];return delete fe[pt],fe[yt]=Tt,be[Tt].geometry[0].shift(),be[Tt].geometry[0]=At[0].concat(be[Tt].geometry[0]),Tt}function Nt(yt,pt,At){const Tt=At?pt[0][pt[0].length-1]:pt[0][0];return`${yt}:${Tt.x}:${Tt.y}`}for(let yt=0;yt<le.length;yt++){const pt=le[yt],At=pt.geometry,Tt=pt.text?pt.text.toString():null;if(!Tt){Ve(yt);continue}const bt=Nt(Tt,At),Ye=Nt(Tt,At,!0);if(bt in De&&Ye in fe&&De[bt]!==fe[Ye]){const Dt=xt(bt,Ye,At),Mt=et(bt,Ye,be[Dt].geometry);delete fe[bt],delete De[Ye],De[Nt(Tt,be[Mt].geometry,!0)]=Mt,be[Dt].geometry=null}else bt in De?et(bt,Ye,At):Ye in fe?xt(bt,Ye,At):(Ve(yt),fe[bt]=Me-1,De[Ye]=Me-1)}return be.filter(yt=>yt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,fe)=>le.sortKey-fe.sortKey)}update(n,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const d=this.lineVertexArray.length;if(n.segment!==void 0){let y=n.dist(a[n.segment+1]),x=n.dist(a[n.segment]);const w={};for(let b=n.segment+1;b<a.length;b++)w[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:y},b<a.length-1&&(y+=a[b+1].dist(a[b]));for(let b=n.segment||0;b>=0;b--)w[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:x},b>0&&(x+=a[b-1].dist(a[b]));for(let b=0;b<a.length;b++){const k=w[b];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,a,d,y,x,w,b,k,I,D,L,j){const Z=n.indexArray,K=n.layoutVertexArray,J=n.segments.prepareSegment(4*a.length,K,Z,this.canOverlap?w.sortKey:void 0),le=this.glyphOffsetArray.length,fe=J.vertexLength,De=this.allowVerticalPlacement&&b===g.ah.vertical?Math.PI/2:0,be=w.text&&w.text.sections;for(let Me=0;Me<a.length;Me++){const{tl:Ve,tr:et,bl:xt,br:Nt,tex:yt,pixelOffsetTL:pt,pixelOffsetBR:At,minFontScaleX:Tt,minFontScaleY:bt,glyphOffset:Ye,isSDF:Dt,sectionIndex:Mt}=a[Me],Zt=J.vertexLength,Fr=Ye[1];km(K,k.x,k.y,Ve.x,Fr+Ve.y,yt.x,yt.y,d,Dt,pt.x,pt.y,Tt,bt),km(K,k.x,k.y,et.x,Fr+et.y,yt.x+yt.w,yt.y,d,Dt,At.x,pt.y,Tt,bt),km(K,k.x,k.y,xt.x,Fr+xt.y,yt.x,yt.y+yt.h,d,Dt,pt.x,At.y,Tt,bt),km(K,k.x,k.y,Nt.x,Fr+Nt.y,yt.x+yt.w,yt.y+yt.h,d,Dt,At.x,At.y,Tt,bt),E0(n.dynamicLayoutVertexArray,k,De),Z.emplaceBack(Zt,Zt+1,Zt+2),Z.emplaceBack(Zt+1,Zt+2,Zt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ye[0]),Me!==a.length-1&&Mt===a[Me+1].sectionIndex||n.programConfigurations.populatePaintArrays(K.length,w,w.index,{},j,be&&be[Mt])}n.placedSymbolArray.emplaceBack(k.x,k.y,le,this.glyphOffsetArray.length-le,fe,I,D,k.segment,d?d[0]:0,d?d[1]:0,y[0],y[1],b,0,!1,0,L)}_addCollisionDebugVertex(n,a,d,y,x,w){return a.emplaceBack(0,0),n.emplaceBack(d.x,d.y,y,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(n,a,d,y,x,w,b){const k=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),I=k.vertexLength,D=x.layoutVertexArray,L=x.collisionVertexArray,j=b.anchorX,Z=b.anchorY;this._addCollisionDebugVertex(D,L,w,j,Z,new A(n,a)),this._addCollisionDebugVertex(D,L,w,j,Z,new A(d,a)),this._addCollisionDebugVertex(D,L,w,j,Z,new A(d,y)),this._addCollisionDebugVertex(D,L,w,j,Z,new A(n,y)),k.vertexLength+=4;const K=x.indexArray;K.emplaceBack(I,I+1),K.emplaceBack(I+1,I+2),K.emplaceBack(I+2,I+3),K.emplaceBack(I+3,I),k.primitiveLength+=4}addDebugCollisionBoxes(n,a,d,y){for(let x=n;x<a;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,y?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new I0(rs,Jb.members,Nn),this.iconCollisionBox=new I0(rs,Jb.members,Nn);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,d,y,x,w,b,k,I){const D={};for(let L=a;L<d;L++){const j=n.get(L);D.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.textFeatureIndex=j.featureIndex;break}for(let L=y;L<x;L++){const j=n.get(L);D.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.verticalTextFeatureIndex=j.featureIndex;break}for(let L=w;L<b;L++){const j=n.get(L);D.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.iconFeatureIndex=j.featureIndex;break}for(let L=k;L<I;L++){const j=n.get(L);D.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.verticalIconFeatureIndex=j.featureIndex;break}return D}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const d=n.placedSymbolArray.get(a),y=d.vertexStartIndex+4*d.numGlyphs;for(let x=d.vertexStartIndex;x<y;x+=4)n.indexArray.emplaceBack(x,x+1,x+2),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),d=Math.cos(n),y=[],x=[],w=[];for(let b=0;b<this.symbolInstances.length;++b){w.push(b);const k=this.symbolInstances.get(b);y.push(0|Math.round(a*k.anchorX+d*k.anchorY)),x.push(k.featureIndex)}return w.sort((b,k)=>y[b]-y[k]||x[k]-x[b]),w}addToSortKeyRanges(n,a){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const d=this.symbolInstances.get(a);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((y,x,w)=>{y>=0&&w.indexOf(y)===x&&this.addIndicesForPlacedSymbol(this.text,y)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let g2,y2;St("SymbolBucket",Vc,{omit:["layers","collisionBoxArray","features","compareText"]}),Vc.MAX_GLYPHS=65535,Vc.addDynamicAttributes=E0;var P0={get paint(){return y2=y2||new v({"icon-opacity":new Ut(ie.paint_symbol["icon-opacity"]),"icon-color":new Ut(ie.paint_symbol["icon-color"]),"icon-halo-color":new Ut(ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ut(ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ut(ie.paint_symbol["icon-halo-blur"]),"icon-translate":new It(ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new It(ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ut(ie.paint_symbol["text-opacity"]),"text-color":new Ut(ie.paint_symbol["text-color"],{runtimeType:Kr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Ut(ie.paint_symbol["text-halo-color"]),"text-halo-width":new Ut(ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Ut(ie.paint_symbol["text-halo-blur"]),"text-translate":new It(ie.paint_symbol["text-translate"]),"text-translate-anchor":new It(ie.paint_symbol["text-translate-anchor"])})},get layout(){return g2=g2||new v({"symbol-placement":new It(ie.layout_symbol["symbol-placement"]),"symbol-spacing":new It(ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new It(ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ut(ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new It(ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new It(ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new It(ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new It(ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new It(ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new It(ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ut(ie.layout_symbol["icon-size"]),"icon-text-fit":new It(ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new It(ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ut(ie.layout_symbol["icon-image"]),"icon-rotate":new Ut(ie.layout_symbol["icon-rotate"]),"icon-padding":new Ut(ie.layout_symbol["icon-padding"]),"icon-keep-upright":new It(ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Ut(ie.layout_symbol["icon-offset"]),"icon-anchor":new Ut(ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new It(ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new It(ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new It(ie.layout_symbol["text-rotation-alignment"]),"text-field":new Ut(ie.layout_symbol["text-field"]),"text-font":new Ut(ie.layout_symbol["text-font"]),"text-size":new Ut(ie.layout_symbol["text-size"]),"text-max-width":new Ut(ie.layout_symbol["text-max-width"]),"text-line-height":new It(ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Ut(ie.layout_symbol["text-letter-spacing"]),"text-justify":new Ut(ie.layout_symbol["text-justify"]),"text-radial-offset":new Ut(ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new It(ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ut(ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ut(ie.layout_symbol["text-anchor"]),"text-max-angle":new It(ie.layout_symbol["text-max-angle"]),"text-writing-mode":new It(ie.layout_symbol["text-writing-mode"]),"text-rotate":new Ut(ie.layout_symbol["text-rotate"]),"text-padding":new It(ie.layout_symbol["text-padding"]),"text-keep-upright":new It(ie.layout_symbol["text-keep-upright"]),"text-transform":new Ut(ie.layout_symbol["text-transform"]),"text-offset":new Ut(ie.layout_symbol["text-offset"]),"text-allow-overlap":new It(ie.layout_symbol["text-allow-overlap"]),"text-overlap":new It(ie.layout_symbol["text-overlap"]),"text-ignore-placement":new It(ie.layout_symbol["text-ignore-placement"]),"text-optional":new It(ie.layout_symbol["text-optional"])})}};class _2{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:pi,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}St("FormatSectionOverride",_2,{omit:["defaultValue"]});class Tm extends u{constructor(n){super(n,P0)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const y=[];for(const x of d)y.indexOf(x)<0&&y.push(x);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,d,y){const x=this.layout.get(n).evaluate(a,{},d,y),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||gc(w.value)||!x?x:function(b,k){return k.replace(/{([^{}]+)}/g,(I,D)=>b&&D in b?String(b[D]):"")}(a.properties,x)}createBucket(n){return new Vc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of P0.paint.overridableProperties){if(!Tm.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),d=new _2(a),y=new mc(d,a.property.specification);let x=null;x=a.value.kind==="constant"||a.value.kind==="source"?new Ya("source",y):new Xa("composite",y,a.value.zoomStops),this.paint._values[n]=new Hs(a.property,x,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,d){return!(!this.layout||a.isDataDriven()||d.isDataDriven())&&Tm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const d=n.get("text-field"),y=P0.paint.properties[a];let x=!1;const w=b=>{for(const k of b)if(y.overrides&&y.overrides.hasOverride(k))return void(x=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Mi)w(d.value.value.sections);else if(d.value.kind==="source"){const b=I=>{x||(I instanceof ms&&En(I.value)===fs?w(I.value.sections):I instanceof oc?w(I.sections):I.eachChild(b))},k=d.value;k._styleExpression&&b(k._styleExpression.expression)}return x}}let v2;var V3={get paint(){return v2=v2||new v({"background-color":new It(ie.paint_background["background-color"]),"background-pattern":new Pc(ie.paint_background["background-pattern"]),"background-opacity":new It(ie.paint_background["background-opacity"])})}};class H3 extends u{constructor(n){super(n,V3)}}let x2;var W3={get paint(){return x2=x2||new v({"raster-opacity":new It(ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new It(ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new It(ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new It(ie.paint_raster["raster-brightness-max"]),"raster-saturation":new It(ie.paint_raster["raster-saturation"]),"raster-contrast":new It(ie.paint_raster["raster-contrast"]),"raster-resampling":new It(ie.paint_raster["raster-resampling"]),"raster-fade-duration":new It(ie.paint_raster["raster-fade-duration"])})}};class G3 extends u{constructor(n){super(n,W3)}}class Z3 extends u{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class q3{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const M0=63710088e-1;class pl{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new pl(ke(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,d=this.lat*a,y=n.lat*a,x=Math.sin(d)*Math.sin(y)+Math.cos(d)*Math.cos(y)*Math.cos((n.lng-this.lng)*a);return M0*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof pl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new pl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new pl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const w2=2*Math.PI*M0;function b2(s){return w2*Math.cos(s*Math.PI/180)}function S2(s){return(180+s)/360}function k2(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function T2(s,n){return s/b2(n)}function A0(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Kd{constructor(n,a,d=0){this.x=+n,this.y=+a,this.z=+d}static fromLngLat(n,a=0){const d=pl.convert(n);return new Kd(S2(d.lng),k2(d.lat),T2(a,d.lat))}toLngLat(){return new pl(360*this.x-180,A0(this.y))}toAltitude(){return this.z*b2(A0(this.y))}meterInMercatorCoordinateUnits(){return 1/w2*(n=A0(this.y),1/Math.cos(n*Math.PI/180));var n}}function E2(s,n,a){var d=2*Math.PI*6378137/256/Math.pow(2,a);return[s*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class D0{constructor(n,a,d){if(!function(y,x,w){return!(y<0||y>25||w<0||w>=Math.pow(2,y)||x<0||x>=Math.pow(2,y))}(n,a,d))throw new Error(`x=${a}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=d,this.key=Jd(0,n,n,a,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,d){const y=(w=this.y,b=this.z,k=E2(256*(x=this.x),256*(w=Math.pow(2,b)-w-1),b),I=E2(256*(x+1),256*(w+1),b),k[0]+","+k[1]+","+I[0]+","+I[1]);var x,w,b,k,I;const D=function(L,j,Z){let K,J="";for(let le=L;le>0;le--)K=1<<le-1,J+=(j&K?1:0)+(Z&K?2:0);return J}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,y)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new A((n.x*a-this.x)*Cn,(n.y*a-this.y)*Cn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class C2{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Jd(n,a.z,a.z,a.x,a.y)}}class Ss{constructor(n,a,d,y,x){if(n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=a,this.canonical=new D0(d,+y,+x),this.key=Jd(a,n,d,y,x)}clone(){return new Ss(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new Ss(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ss(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?Jd(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Jd(this.wrap*+a,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Ss(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,d=2*this.canonical.x,y=2*this.canonical.y;return[new Ss(a,this.wrap,a,d,y),new Ss(a,this.wrap,a,d+1,y),new Ss(a,this.wrap,a,d,y+1),new Ss(a,this.wrap,a,d+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Ss(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Ss(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new C2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Kd(n.x-this.wrap,n.y))}}function Jd(s,n,a,d,y){(s*=2)<0&&(s=-1*s-1);const x=1<<a;return(x*x*s+x*y+d).toString(36)+a.toString(36)+n.toString(36)}St("CanonicalTileID",D0),St("OverscaledTileID",Ss,{omit:["posMatrix"]});class I2{constructor(n,a,d,y=1,x=1,w=1,b=0){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void je(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const k=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=x,this.blueFactor=w,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<k;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(k,I)]=this.data[this._idx(k-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,k)]=this.data[this._idx(I,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<k;I++)for(let D=0;D<k;D++){const L=this.get(I,D);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(n,a){const d=new Uint8Array(this.data.buffer),y=4*this._idx(n,a);return this.unpack(d[y],d[y+1],d[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}unpack(n,a,d){return n*this.redFactor+a*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new bs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=a*this.dim,x=a*this.dim+this.dim,w=d*this.dim,b=d*this.dim+this.dim;switch(a){case-1:y=x-1;break;case 1:x=y+1}switch(d){case-1:w=b-1;break;case 1:b=w+1}const k=-a*this.dim,I=-d*this.dim;for(let D=w;D<b;D++)for(let L=y;L<x;L++)this.data[this._idx(L,D)]=n.data[this._idx(L+k,D+I)]}}St("DEMData",I2);class P2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const d=n[a];this._stringToNumber[d]=a,this._numberToString[a]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class M2{constructor(n,a,d,y,x){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=d,n._y=y,this.properties=n.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class A2{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new el(Cn,16,0),this.grid3D=new el(Cn,16,0),this.featureIndexArray=new ii,this.promoteId=a}insert(n,a,d,y,x,w){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,y,x);const k=w?this.grid3D:this.grid;for(let I=0;I<a.length;I++){const D=a[I],L=[1/0,1/0,-1/0,-1/0];for(let j=0;j<D.length;j++){const Z=D[j];L[0]=Math.min(L[0],Z.x),L[1]=Math.min(L[1],Z.y),L[2]=Math.max(L[2],Z.x),L[3]=Math.max(L[3],Z.y)}L[0]<Cn&&L[1]<Cn&&L[2]>=0&&L[3]>=0&&k.insert(b,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new hl.VectorTile(new x0(this.rawTileData)).layers,this.sourceLayerCoder=new P2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,d,y){this.loadVTLayers();const x=n.params||{},w=Cn/n.tileSize/n.scale,b=yd(x.filter),k=n.queryGeometry,I=n.queryPadding*w,D=z2(k),L=this.grid.query(D.minX-I,D.minY-I,D.maxX+I,D.maxY+I),j=z2(n.cameraQueryGeometry),Z=this.grid3D.query(j.minX-I,j.minY-I,j.maxX+I,j.maxY+I,(le,fe,De,be)=>function(Me,Ve,et,xt,Nt){for(const pt of Me)if(Ve<=pt.x&&et<=pt.y&&xt>=pt.x&&Nt>=pt.y)return!0;const yt=[new A(Ve,et),new A(Ve,Nt),new A(xt,Nt),new A(xt,et)];if(Me.length>2){for(const pt of yt)if(Oc(Me,pt))return!0}for(let pt=0;pt<Me.length-1;pt++)if(IA(Me[pt],Me[pt+1],yt))return!0;return!1}(n.cameraQueryGeometry,le-I,fe-I,De+I,be+I));for(const le of Z)L.push(le);L.sort(Y3);const K={};let J;for(let le=0;le<L.length;le++){const fe=L[le];if(fe===J)continue;J=fe;const De=this.featureIndexArray.get(fe);let be=null;this.loadMatchingFeature(K,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,b,x.layers,x.availableImages,a,d,y,(Me,Ve,et)=>(be||(be=pu(Me)),Ve.queryIntersectsFeature(k,Me,et,be,this.z,n.transform,w,n.pixelPosMatrix)))}return K}loadMatchingFeature(n,a,d,y,x,w,b,k,I,D,L){const j=this.bucketLayerIDs[a];if(w&&!function(le,fe){for(let De=0;De<le.length;De++)if(fe.indexOf(le[De])>=0)return!0;return!1}(w,j))return;const Z=this.sourceLayerCoder.decode(d),K=this.vtLayers[Z].feature(y);if(x.needGeometry){const le=mu(K,!0);if(!x.filter(new Vr(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!x.filter(new Vr(this.tileID.overscaledZ),K))return;const J=this.getId(K,Z);for(let le=0;le<j.length;le++){const fe=j[le];if(w&&w.indexOf(fe)<0)continue;const De=k[fe];if(!De)continue;let be={};J&&D&&(be=D.getState(De.sourceLayer||"_geojsonTileLayer",J));const Me=ge({},I[fe]);Me.paint=D2(Me.paint,De.paint,K,be,b),Me.layout=D2(Me.layout,De.layout,K,be,b);const Ve=!L||L(K,De,be);if(!Ve)continue;const et=new M2(K,this.z,this.x,this.y,J);et.layer=Me;let xt=n[fe];xt===void 0&&(xt=n[fe]=[]),xt.push({featureIndex:y,feature:et,intersectionZ:Ve})}}lookupSymbolFeatures(n,a,d,y,x,w,b,k){const I={};this.loadVTLayers();const D=yd(x);for(const L of n)this.loadMatchingFeature(I,d,y,L,D,w,b,k,a);return I}hasLayer(n){for(const a of this.bucketLayerIDs)for(const d of a)if(n===d)return!0;return!1}getId(n,a){let d=n.id;return this.promoteId&&(d=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof d=="boolean"&&(d=Number(d))),d}}function D2(s,n,a,d,y){return Oe(s,(x,w)=>{const b=n instanceof cu?n.get(w):null;return b&&b.evaluate?b.evaluate(a,d,y):b})}function z2(s){let n=1/0,a=1/0,d=-1/0,y=-1/0;for(const x of s)n=Math.min(n,x.x),a=Math.min(a,x.y),d=Math.max(d,x.x),y=Math.max(y,x.y);return{minX:n,minY:a,maxX:d,maxY:y}}function Y3(s,n){return n-s}function R2(s,n,a,d,y){const x=[];for(let w=0;w<s.length;w++){const b=s[w];let k;for(let I=0;I<b.length-1;I++){let D=b[I],L=b[I+1];D.x<n&&L.x<n||(D.x<n?D=new A(n,D.y+(n-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x<n&&(L=new A(n,D.y+(n-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y<a&&L.y<a||(D.y<a?D=new A(D.x+(a-D.y)/(L.y-D.y)*(L.x-D.x),a)._round():L.y<a&&(L=new A(D.x+(a-D.y)/(L.y-D.y)*(L.x-D.x),a)._round()),D.x>=d&&L.x>=d||(D.x>=d?D=new A(d,D.y+(d-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x>=d&&(L=new A(d,D.y+(d-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y>=y&&L.y>=y||(D.y>=y?D=new A(D.x+(y-D.y)/(L.y-D.y)*(L.x-D.x),y)._round():L.y>=y&&(L=new A(D.x+(y-D.y)/(L.y-D.y)*(L.x-D.x),y)._round()),k&&D.equals(k[k.length-1])||(k=[D],x.push(k)),k.push(L)))))}}return x}St("FeatureIndex",A2,{omit:["rawTileData","sourceLayerCoder"]});class ml extends A{constructor(n,a,d,y){super(n,a),this.angle=d,y!==void 0&&(this.segment=y)}clone(){return new ml(this.x,this.y,this.angle,this.segment)}}function L2(s,n,a,d,y){if(n.segment===void 0||a===0)return!0;let x=n,w=n.segment+1,b=0;for(;b>-a/2;){if(w--,w<0)return!1;b-=s[w].dist(x),x=s[w]}b+=s[w].dist(s[w+1]),w++;const k=[];let I=0;for(;b<a/2;){const D=s[w],L=s[w+1];if(!L)return!1;let j=s[w-1].angleTo(D)-D.angleTo(L);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:b,angleDelta:j}),I+=j;b-k[0].distance>d;)I-=k.shift().angleDelta;if(I>y)return!1;w++,b+=D.dist(L)}return!0}function O2(s){let n=0;for(let a=0;a<s.length-1;a++)n+=s[a].dist(s[a+1]);return n}function F2(s,n,a){return s?.6*n*a:0}function B2(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function X3(s,n,a,d,y,x){const w=F2(a,y,x),b=B2(a,d)*x;let k=0;const I=O2(s)/2;for(let D=0;D<s.length-1;D++){const L=s[D],j=s[D+1],Z=L.dist(j);if(k+Z>I){const K=(I-k)/Z,J=gi.number(L.x,j.x,K),le=gi.number(L.y,j.y,K),fe=new ml(J,le,j.angleTo(L),D);return fe._round(),!w||L2(s,fe,b,w,n)?fe:void 0}k+=Z}}function K3(s,n,a,d,y,x,w,b,k){const I=F2(d,x,w),D=B2(d,y),L=D*w,j=s[0].x===0||s[0].x===k||s[0].y===0||s[0].y===k;return n-L<n/4&&(n=L+n/4),N2(s,j?n/2*b%n:(D/2+2*x)*w*b%n,n,I,a,L,j,!1,k)}function N2(s,n,a,d,y,x,w,b,k){const I=x/2,D=O2(s);let L=0,j=n-a,Z=[];for(let K=0;K<s.length-1;K++){const J=s[K],le=s[K+1],fe=J.dist(le),De=le.angleTo(J);for(;j+a<L+fe;){j+=a;const be=(j-L)/fe,Me=gi.number(J.x,le.x,be),Ve=gi.number(J.y,le.y,be);if(Me>=0&&Me<k&&Ve>=0&&Ve<k&&j-I>=0&&j+I<=D){const et=new ml(Me,Ve,De,K);et._round(),d&&!L2(s,et,x,d,y)||Z.push(et)}}L+=fe}return b||Z.length||w||(Z=N2(s,L/2,a,d,y,x,w,!0,k)),Z}St("Anchor",ml);const Hc=Oi;function $2(s,n,a,d){const y=[],x=s.image,w=x.pixelRatio,b=x.paddedRect.w-2*Hc,k=x.paddedRect.h-2*Hc;let I={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const D=x.stretchX||[[0,b]],L=x.stretchY||[[0,k]],j=(Ye,Dt)=>Ye+Dt[1]-Dt[0],Z=D.reduce(j,0),K=L.reduce(j,0),J=b-Z,le=k-K;let fe=0,De=Z,be=0,Me=K,Ve=0,et=J,xt=0,Nt=le;if(x.content&&d){const Ye=x.content,Dt=Ye[2]-Ye[0],Mt=Ye[3]-Ye[1];(x.textFitWidth||x.textFitHeight)&&(I=f2(s)),fe=Em(D,0,Ye[0]),be=Em(L,0,Ye[1]),De=Em(D,Ye[0],Ye[2]),Me=Em(L,Ye[1],Ye[3]),Ve=Ye[0]-fe,xt=Ye[1]-be,et=Dt-De,Nt=Mt-Me}const yt=I.x1,pt=I.y1,At=I.x2-yt,Tt=I.y2-pt,bt=(Ye,Dt,Mt,Zt)=>{const Fr=Cm(Ye.stretch-fe,De,At,yt),Or=Im(Ye.fixed-Ve,et,Ye.stretch,Z),zn=Cm(Dt.stretch-be,Me,Tt,pt),Gs=Im(Dt.fixed-xt,Nt,Dt.stretch,K),Xn=Cm(Mt.stretch-fe,De,At,yt),Rn=Im(Mt.fixed-Ve,et,Mt.stretch,Z),xi=Cm(Zt.stretch-be,Me,Tt,pt),wi=Im(Zt.fixed-xt,Nt,Zt.stretch,K),bi=new A(Fr,zn),mn=new A(Xn,zn),Ln=new A(Xn,xi),oi=new A(Fr,xi),Kn=new A(Or/w,Gs/w),Si=new A(Rn/w,wi/w),Jn=n*Math.PI/180;if(Jn){const xr=Math.sin(Jn),$r=Math.cos(Jn),Zr=[$r,-xr,xr,$r];bi._matMult(Zr),mn._matMult(Zr),oi._matMult(Zr),Ln._matMult(Zr)}const ks=Ye.stretch+Ye.fixed,Fi=Dt.stretch+Dt.fixed;return{tl:bi,tr:mn,bl:oi,br:Ln,tex:{x:x.paddedRect.x+Hc+ks,y:x.paddedRect.y+Hc+Fi,w:Mt.stretch+Mt.fixed-ks,h:Zt.stretch+Zt.fixed-Fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kn,pixelOffsetBR:Si,minFontScaleX:et/w/At,minFontScaleY:Nt/w/Tt,isSDF:a}};if(d&&(x.stretchX||x.stretchY)){const Ye=j2(D,J,Z),Dt=j2(L,le,K);for(let Mt=0;Mt<Ye.length-1;Mt++){const Zt=Ye[Mt],Fr=Ye[Mt+1];for(let Or=0;Or<Dt.length-1;Or++)y.push(bt(Zt,Dt[Or],Fr,Dt[Or+1]))}}else y.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:k+1}));return y}function Em(s,n,a){let d=0;for(const y of s)d+=Math.max(n,Math.min(a,y[1]))-Math.max(n,Math.min(a,y[0]));return d}function j2(s,n,a){const d=[{fixed:-Hc,stretch:0}];for(const[y,x]of s){const w=d[d.length-1];d.push({fixed:y-w.stretch,stretch:w.stretch}),d.push({fixed:y-w.stretch,stretch:w.stretch+(x-y)})}return d.push({fixed:n+Hc,stretch:a}),d}function Cm(s,n,a,d){return s/n*a+d}function Im(s,n,a,d){return s-n*a/d}class Pm{constructor(n,a,d,y,x,w,b,k,I,D){var L;if(this.boxStartIndex=n.length,I){let j=w.top,Z=w.bottom;const K=w.collisionPadding;K&&(j-=K[1],Z+=K[3]);let J=Z-j;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{const j=!((L=w.image)===null||L===void 0)&&L.content&&(w.image.textFitWidth||w.image.textFitHeight)?f2(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};j.y1=j.y1*b-k[0],j.y2=j.y2*b+k[2],j.x1=j.x1*b-k[3],j.x2=j.x2*b+k[1];const Z=w.collisionPadding;if(Z&&(j.x1-=Z[0]*b,j.y1-=Z[1]*b,j.x2+=Z[2]*b,j.y2+=Z[3]*b),D){const K=new A(j.x1,j.y1),J=new A(j.x2,j.y1),le=new A(j.x1,j.y2),fe=new A(j.x2,j.y2),De=D*Math.PI/180;K._rotate(De),J._rotate(De),le._rotate(De),fe._rotate(De),j.x1=Math.min(K.x,J.x,le.x,fe.x),j.x2=Math.max(K.x,J.x,le.x,fe.x),j.y1=Math.min(K.y,J.y,le.y,fe.y),j.y2=Math.max(K.y,J.y,le.y,fe.y)}n.emplaceBack(a.x,a.y,j.x1,j.y1,j.x2,j.y2,d,y,x)}this.boxEndIndex=n.length}}class J3{constructor(n=[],a=(d,y)=>d<y?-1:d>y?1:0){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:d}=this,y=a[n];for(;n>0;){const x=n-1>>1,w=a[x];if(d(y,w)>=0)break;a[n]=w,n=x}a[n]=y}_down(n){const{data:a,compare:d}=this,y=this.length>>1,x=a[n];for(;n<y;){let w=1+(n<<1);const b=w+1;if(b<this.length&&d(a[b],a[w])<0&&(w=b),d(a[w],x)>=0)break;a[n]=a[w],n=w}a[n]=x}}function Q3(s,n=1,a=!1){let d=1/0,y=1/0,x=-1/0,w=-1/0;const b=s[0];for(let Z=0;Z<b.length;Z++){const K=b[Z];(!Z||K.x<d)&&(d=K.x),(!Z||K.y<y)&&(y=K.y),(!Z||K.x>x)&&(x=K.x),(!Z||K.y>w)&&(w=K.y)}const k=Math.min(x-d,w-y);let I=k/2;const D=new J3([],eD);if(k===0)return new A(d,y);for(let Z=d;Z<x;Z+=k)for(let K=y;K<w;K+=k)D.push(new Wc(Z+I,K+I,I,s));let L=function(Z){let K=0,J=0,le=0;const fe=Z[0];for(let De=0,be=fe.length,Me=be-1;De<be;Me=De++){const Ve=fe[De],et=fe[Me],xt=Ve.x*et.y-et.x*Ve.y;J+=(Ve.x+et.x)*xt,le+=(Ve.y+et.y)*xt,K+=3*xt}return new Wc(J/K,le/K,0,Z)}(s),j=D.length;for(;D.length;){const Z=D.pop();(Z.d>L.d||!L.d)&&(L=Z,a&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,j)),Z.max-L.d<=n||(I=Z.h/2,D.push(new Wc(Z.p.x-I,Z.p.y-I,I,s)),D.push(new Wc(Z.p.x+I,Z.p.y-I,I,s)),D.push(new Wc(Z.p.x-I,Z.p.y+I,I,s)),D.push(new Wc(Z.p.x+I,Z.p.y+I,I,s)),j+=4)}return a&&(console.log(`num probes: ${j}`),console.log(`best distance: ${L.d}`)),L.p}function eD(s,n){return n.max-s.max}function Wc(s,n,a,d){this.p=new A(s,n),this.h=a,this.d=function(y,x){let w=!1,b=1/0;for(let k=0;k<x.length;k++){const I=x[k];for(let D=0,L=I.length,j=L-1;D<L;j=D++){const Z=I[D],K=I[j];Z.y>y.y!=K.y>y.y&&y.x<(K.x-Z.x)*(y.y-Z.y)/(K.y-Z.y)+Z.x&&(w=!w),b=Math.min(b,kb(y,Z,K))}}return(w?1:-1)*Math.sqrt(b)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Yn;g.aq=void 0,(Yn=g.aq||(g.aq={}))[Yn.center=1]="center",Yn[Yn.left=2]="left",Yn[Yn.right=3]="right",Yn[Yn.top=4]="top",Yn[Yn.bottom=5]="bottom",Yn[Yn["top-left"]=6]="top-left",Yn[Yn["top-right"]=7]="top-right",Yn[Yn["bottom-left"]=8]="bottom-left",Yn[Yn["bottom-right"]=9]="bottom-right";const gl=7,z0=Number.POSITIVE_INFINITY;function U2(s,n){return n[1]!==z0?function(a,d,y){let x=0,w=0;switch(d=Math.abs(d),y=Math.abs(y),a){case"top-right":case"top-left":case"top":w=y-gl;break;case"bottom-right":case"bottom-left":case"bottom":w=-y+gl}switch(a){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,w]}(s,n[0],n[1]):function(a,d){let y=0,x=0;d<0&&(d=0);const w=d/Math.SQRT2;switch(a){case"top-right":case"top-left":x=w-gl;break;case"bottom-right":case"bottom-left":x=-w+gl;break;case"bottom":x=-d+gl;break;case"top":x=d-gl}switch(a){case"top-right":case"bottom-right":y=-w;break;case"top-left":case"bottom-left":y=w;break;case"left":y=d;break;case"right":y=-d}return[y,x]}(s,n[0])}function V2(s,n,a){var d;const y=s.layout,x=(d=y.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},a);if(x){const b=x.values,k=[];for(let I=0;I<b.length;I+=2){const D=k[I]=b[I],L=b[I+1].map(j=>j*Pn);D.startsWith("top")?L[1]-=gl:D.startsWith("bottom")&&(L[1]+=gl),k[I+1]=L}return new Xi(k)}const w=y.get("text-variable-anchor");if(w){let b;b=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(n,{},a)*Pn,z0]:y.get("text-offset").evaluate(n,{},a).map(I=>I*Pn);const k=[];for(const I of w)k.push(I,U2(I,b));return new Xi(k)}return null}function R0(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tD(s,n,a,d,y,x,w,b,k,I,D){let L=x.textMaxSize.evaluate(n,{});L===void 0&&(L=w);const j=s.layers[0].layout,Z=j.get("icon-offset").evaluate(n,{},D),K=W2(a.horizontal),J=w/24,le=s.tilePixelRatio*J,fe=s.tilePixelRatio*L/24,De=s.tilePixelRatio*b,be=s.tilePixelRatio*j.get("symbol-spacing"),Me=j.get("text-padding")*s.tilePixelRatio,Ve=function(Ye,Dt,Mt,Zt=1){const Fr=Ye.get("icon-padding").evaluate(Dt,{},Mt),Or=Fr&&Fr.values;return[Or[0]*Zt,Or[1]*Zt,Or[2]*Zt,Or[3]*Zt]}(j,n,D,s.tilePixelRatio),et=j.get("text-max-angle")/180*Math.PI,xt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Nt=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",yt=j.get("symbol-placement"),pt=be/2,At=j.get("icon-text-fit");let Tt;d&&At!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(Tt=p2(d,a.vertical,At,j.get("icon-text-fit-padding"),Z,J)),K&&(d=p2(d,K,At,j.get("icon-text-fit-padding"),Z,J)));const bt=(Ye,Dt)=>{Dt.x<0||Dt.x>=Cn||Dt.y<0||Dt.y>=Cn||function(Mt,Zt,Fr,Or,zn,Gs,Xn,Rn,xi,wi,bi,mn,Ln,oi,Kn,Si,Jn,ks,Fi,xr,$r,Zr,ns,nn,Gc){const Ro=Mt.addToLineVertexArray(Zt,Fr);let Lo,Zs,Ts,$n,da=0,tf=0,Y2=0,X2=0,U0=-1,V0=-1;const fa={};let K2=Dc("");if(Mt.allowVerticalPlacement&&Or.vertical){const ai=Rn.layout.get("text-rotate").evaluate($r,{},nn)+90;Ts=new Pm(xi,Zt,wi,bi,mn,Or.vertical,Ln,oi,Kn,ai),Xn&&($n=new Pm(xi,Zt,wi,bi,mn,Xn,Jn,ks,Kn,ai))}if(zn){const ai=Rn.layout.get("icon-rotate").evaluate($r,{}),Es=Rn.layout.get("icon-text-fit")!=="none",yu=$2(zn,ai,ns,Es),ho=Xn?$2(Xn,ai,ns,Es):void 0;Zs=new Pm(xi,Zt,wi,bi,mn,zn,Jn,ks,!1,ai),da=4*yu.length;const _u=Mt.iconSizeData;let Oo=null;_u.kind==="source"?(Oo=[zo*Rn.layout.get("icon-size").evaluate($r,{})],Oo[0]>fl&&je(`${Mt.layerIds[0]}: Value for "icon-size" is >= ${Xd}. Reduce your "icon-size".`)):_u.kind==="composite"&&(Oo=[zo*Zr.compositeIconSizes[0].evaluate($r,{},nn),zo*Zr.compositeIconSizes[1].evaluate($r,{},nn)],(Oo[0]>fl||Oo[1]>fl)&&je(`${Mt.layerIds[0]}: Value for "icon-size" is >= ${Xd}. Reduce your "icon-size".`)),Mt.addSymbols(Mt.icon,yu,Oo,xr,Fi,$r,g.ah.none,Zt,Ro.lineStartIndex,Ro.lineLength,-1,nn),U0=Mt.icon.placedSymbolArray.length-1,ho&&(tf=4*ho.length,Mt.addSymbols(Mt.icon,ho,Oo,xr,Fi,$r,g.ah.vertical,Zt,Ro.lineStartIndex,Ro.lineLength,-1,nn),V0=Mt.icon.placedSymbolArray.length-1)}const J2=Object.keys(Or.horizontal);for(const ai of J2){const Es=Or.horizontal[ai];if(!Lo){K2=Dc(Es.text);const ho=Rn.layout.get("text-rotate").evaluate($r,{},nn);Lo=new Pm(xi,Zt,wi,bi,mn,Es,Ln,oi,Kn,ho)}const yu=Es.positionedLines.length===1;if(Y2+=H2(Mt,Zt,Es,Gs,Rn,Kn,$r,Si,Ro,Or.vertical?g.ah.horizontal:g.ah.horizontalOnly,yu?J2:[ai],fa,U0,Zr,nn),yu)break}Or.vertical&&(X2+=H2(Mt,Zt,Or.vertical,Gs,Rn,Kn,$r,Si,Ro,g.ah.vertical,["vertical"],fa,V0,Zr,nn));const iD=Lo?Lo.boxStartIndex:Mt.collisionBoxArray.length,sD=Lo?Lo.boxEndIndex:Mt.collisionBoxArray.length,oD=Ts?Ts.boxStartIndex:Mt.collisionBoxArray.length,aD=Ts?Ts.boxEndIndex:Mt.collisionBoxArray.length,lD=Zs?Zs.boxStartIndex:Mt.collisionBoxArray.length,uD=Zs?Zs.boxEndIndex:Mt.collisionBoxArray.length,cD=$n?$n.boxStartIndex:Mt.collisionBoxArray.length,hD=$n?$n.boxEndIndex:Mt.collisionBoxArray.length;let co=-1;const Am=(ai,Es)=>ai&&ai.circleDiameter?Math.max(ai.circleDiameter,Es):Es;co=Am(Lo,co),co=Am(Ts,co),co=Am(Zs,co),co=Am($n,co);const Q2=co>-1?1:0;Q2&&(co*=Gc/Pn),Mt.glyphOffsetArray.length>=Vc.MAX_GLYPHS&&je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$r.sortKey!==void 0&&Mt.addToSortKeyRanges(Mt.symbolInstances.length,$r.sortKey);const dD=V2(Rn,$r,nn),[fD,pD]=function(ai,Es){const yu=ai.length,ho=Es==null?void 0:Es.values;if((ho==null?void 0:ho.length)>0)for(let _u=0;_u<ho.length;_u+=2){const Oo=ho[_u+1];ai.emplaceBack(g.aq[ho[_u]],Oo[0],Oo[1])}return[yu,ai.length]}(Mt.textAnchorOffsets,dD);Mt.symbolInstances.emplaceBack(Zt.x,Zt.y,fa.right>=0?fa.right:-1,fa.center>=0?fa.center:-1,fa.left>=0?fa.left:-1,fa.vertical||-1,U0,V0,K2,iD,sD,oD,aD,lD,uD,cD,hD,wi,Y2,X2,da,tf,Q2,0,Ln,co,fD,pD)}(s,Dt,Ye,a,d,y,Tt,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,le,[Me,Me,Me,Me],xt,k,De,Ve,Nt,Z,n,x,I,D,w)};if(yt==="line")for(const Ye of R2(n.geometry,0,0,Cn,Cn)){const Dt=K3(Ye,be,et,a.vertical||K,d,24,fe,s.overscaling,Cn);for(const Mt of Dt)K&&rD(s,K.text,pt,Mt)||bt(Ye,Mt)}else if(yt==="line-center"){for(const Ye of n.geometry)if(Ye.length>1){const Dt=X3(Ye,et,a.vertical||K,d,24,fe);Dt&&bt(Ye,Dt)}}else if(n.type==="Polygon")for(const Ye of lc(n.geometry,0)){const Dt=Q3(Ye,16);bt(Ye[0],new ml(Dt.x,Dt.y,0))}else if(n.type==="LineString")for(const Ye of n.geometry)bt(Ye,new ml(Ye[0].x,Ye[0].y,0));else if(n.type==="Point")for(const Ye of n.geometry)for(const Dt of Ye)bt([Dt],new ml(Dt.x,Dt.y,0))}function H2(s,n,a,d,y,x,w,b,k,I,D,L,j,Z,K){const J=function(De,be,Me,Ve,et,xt,Nt,yt){const pt=Ve.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,At=[];for(const Tt of be.positionedLines)for(const bt of Tt.positionedGlyphs){if(!bt.rect)continue;const Ye=bt.rect||{};let Dt=o2+1,Mt=!0,Zt=1,Fr=0;const Or=(et||yt)&&bt.vertical,zn=bt.metrics.advance*bt.scale/2;if(yt&&be.verticalizable&&(Fr=Tt.lineOffset/2-(bt.imageName?-(Pn-bt.metrics.width*bt.scale)/2:(bt.scale-1)*Pn)),bt.imageName){const xr=Nt[bt.imageName];Mt=xr.sdf,Zt=xr.pixelRatio,Dt=Oi/Zt}const Gs=et?[bt.x+zn,bt.y]:[0,0];let Xn=et?[0,0]:[bt.x+zn+Me[0],bt.y+Me[1]-Fr],Rn=[0,0];Or&&(Rn=Xn,Xn=[0,0]);const xi=bt.metrics.isDoubleResolution?2:1,wi=(bt.metrics.left-Dt)*bt.scale-zn+Xn[0],bi=(-bt.metrics.top-Dt)*bt.scale+Xn[1],mn=wi+Ye.w/xi*bt.scale/Zt,Ln=bi+Ye.h/xi*bt.scale/Zt,oi=new A(wi,bi),Kn=new A(mn,bi),Si=new A(wi,Ln),Jn=new A(mn,Ln);if(Or){const xr=new A(-zn,zn-qd),$r=-Math.PI/2,Zr=Pn/2-zn,ns=new A(5-qd-Zr,-(bt.imageName?Zr:0)),nn=new A(...Rn);oi._rotateAround($r,xr)._add(ns)._add(nn),Kn._rotateAround($r,xr)._add(ns)._add(nn),Si._rotateAround($r,xr)._add(ns)._add(nn),Jn._rotateAround($r,xr)._add(ns)._add(nn)}if(pt){const xr=Math.sin(pt),$r=Math.cos(pt),Zr=[$r,-xr,xr,$r];oi._matMult(Zr),Kn._matMult(Zr),Si._matMult(Zr),Jn._matMult(Zr)}const ks=new A(0,0),Fi=new A(0,0);At.push({tl:oi,tr:Kn,bl:Si,br:Jn,tex:Ye,writingMode:be.writingMode,glyphOffset:Gs,sectionIndex:bt.sectionIndex,isSDF:Mt,pixelOffsetTL:ks,pixelOffsetBR:Fi,minFontScaleX:0,minFontScaleY:0})}return At}(0,a,b,y,x,w,d,s.allowVerticalPlacement),le=s.textSizeData;let fe=null;le.kind==="source"?(fe=[zo*y.layout.get("text-size").evaluate(w,{})],fe[0]>fl&&je(`${s.layerIds[0]}: Value for "text-size" is >= ${Xd}. Reduce your "text-size".`)):le.kind==="composite"&&(fe=[zo*Z.compositeTextSizes[0].evaluate(w,{},K),zo*Z.compositeTextSizes[1].evaluate(w,{},K)],(fe[0]>fl||fe[1]>fl)&&je(`${s.layerIds[0]}: Value for "text-size" is >= ${Xd}. Reduce your "text-size".`)),s.addSymbols(s.text,J,fe,b,x,w,I,n,k.lineStartIndex,k.lineLength,j,K);for(const De of D)L[De]=s.text.placedSymbolArray.length-1;return 4*J.length}function W2(s){for(const n in s)return s[n];return null}function rD(s,n,a,d){const y=s.compareText;if(n in y){const x=y[n];for(let w=x.length-1;w>=0;w--)if(d.dist(x[w])<a)return!0}else y[n]=[];return y[n].push(d),!1}const G2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class L0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,d]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=d>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const x=G2[15&d];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new L0(b,w,x,n)}constructor(n,a=64,d=Float64Array,y){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=G2.indexOf(this.ArrayType),w=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-b%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${d}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+k,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+w+b+k),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+k,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=a,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return O0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:b}=this,k=[0,x.length-1,0],I=[];for(;k.length;){const D=k.pop()||0,L=k.pop()||0,j=k.pop()||0;if(L-j<=b){for(let le=j;le<=L;le++){const fe=w[2*le],De=w[2*le+1];fe>=n&&fe<=d&&De>=a&&De<=y&&I.push(x[le])}continue}const Z=j+L>>1,K=w[2*Z],J=w[2*Z+1];K>=n&&K<=d&&J>=a&&J<=y&&I.push(x[Z]),(D===0?n<=K:a<=J)&&(k.push(j),k.push(Z-1),k.push(1-D)),(D===0?d>=K:y>=J)&&(k.push(Z+1),k.push(L),k.push(1-D))}return I}within(n,a,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:w}=this,b=[0,y.length-1,0],k=[],I=d*d;for(;b.length;){const D=b.pop()||0,L=b.pop()||0,j=b.pop()||0;if(L-j<=w){for(let le=j;le<=L;le++)q2(x[2*le],x[2*le+1],n,a)<=I&&k.push(y[le]);continue}const Z=j+L>>1,K=x[2*Z],J=x[2*Z+1];q2(K,J,n,a)<=I&&k.push(y[Z]),(D===0?n-d<=K:a-d<=J)&&(b.push(j),b.push(Z-1),b.push(1-D)),(D===0?n+d>=K:a+d>=J)&&(b.push(Z+1),b.push(L),b.push(1-D))}return k}}function O0(s,n,a,d,y,x){if(y-d<=a)return;const w=d+y>>1;Z2(s,n,w,d,y,x),O0(s,n,a,d,w-1,1-x),O0(s,n,a,w+1,y,1-x)}function Z2(s,n,a,d,y,x){for(;y>d;){if(y-d>600){const I=y-d+1,D=a-d+1,L=Math.log(I),j=.5*Math.exp(2*L/3),Z=.5*Math.sqrt(L*j*(I-j)/I)*(D-I/2<0?-1:1);Z2(s,n,a,Math.max(d,Math.floor(a-D*j/I+Z)),Math.min(y,Math.floor(a+(I-D)*j/I+Z)),x)}const w=n[2*a+x];let b=d,k=y;for(Qd(s,n,d,a),n[2*y+x]>w&&Qd(s,n,d,y);b<k;){for(Qd(s,n,b,k),b++,k--;n[2*b+x]<w;)b++;for(;n[2*k+x]>w;)k--}n[2*d+x]===w?Qd(s,n,d,k):(k++,Qd(s,n,k,y)),k<=a&&(d=k+1),a<=k&&(y=k-1)}}function Qd(s,n,a,d){F0(s,a,d),F0(n,2*a,2*d),F0(n,2*a+1,2*d+1)}function F0(s,n,a){const d=s[n];s[n]=s[a],s[a]=d}function q2(s,n,a,d){const y=s-a,x=n-d;return y*y+x*x}var B0;g.bg=void 0,(B0=g.bg||(g.bg={})).create="create",B0.load="load",B0.fullLoad="fullLoad";let Mm=null,ef=[];const N0=1e3/60,$0="loadTime",j0="fullLoadTime",nD={mark(s){performance.mark(s)},frame(s){const n=s;Mm!=null&&ef.push(n-Mm),Mm=n},clearMetrics(){Mm=null,ef=[],performance.clearMeasures($0),performance.clearMeasures(j0);for(const s in g.bg)performance.clearMarks(g.bg[s])},getPerformanceMetrics(){performance.measure($0,g.bg.create,g.bg.load),performance.measure(j0,g.bg.create,g.bg.fullLoad);const s=performance.getEntriesByName($0)[0].duration,n=performance.getEntriesByName(j0)[0].duration,a=ef.length,d=1/(ef.reduce((x,w)=>x+w,0)/a/1e3),y=ef.filter(x=>x>N0).reduce((x,w)=>x+(w-N0)/N0,0);return{loadTime:s,fullLoadTime:n,fps:d,percentDroppedFrames:y/(a+y)*100,totalFrames:a}}};g.$=class extends F{},g.A=Fc,g.B=Y_,g.C=function(s){if(vt==null){const n=s.navigator?s.navigator.userAgent:null;vt=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return vt},g.D=It,g.E=Ue,g.F=class{constructor(s,n){this.target=s,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new q3(()=>this.process()),this.subscription=function(a,d,y,x){return a.addEventListener(d,y,!1),{unsubscribe:()=>{a.removeEventListener(d,y,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=Re(self)?s:window}registerMessageHandler(s,n){this.messageHandlers[s]=n}sendAsync(s,n){return new Promise((a,d)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:a,reject:d},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];const b={id:y,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const x=[],w=Object.assign(Object.assign({},s),{id:y,sourceMapId:this.mapId,origin:location.origin,data:tl(s.data,x)});this.target.postMessage(w,{transfer:x})})}receive(s){const n=s.data,a=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[a];const d=this.abortControllers[a];return delete this.abortControllers[a],void(d&&d.abort())}if(Re(self)||n.mustQueue)return this.tasks[a]=n,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,n)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),n=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(s,n)}processTask(s,n){return c(this,void 0,void 0,function*(){if(n.type==="<response>"){const y=this.resolveRejects[s];return delete this.resolveRejects[s],y?void(n.error?y.reject(rl(n.error)):y.resolve(rl(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=rl(n.data),d=new AbortController;this.abortControllers[s]=d;try{const y=yield this.messageHandlers[n.type](n.sourceMapId,a,d);this.completeTask(s,null,y)}catch(y){this.completeTask(s,y)}})}completeTask(s,n,a){const d=[];delete this.abortControllers[s];const y={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?tl(n):null,data:tl(a,d)};this.target.postMessage(y,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.G=Jt,g.H=function(){var s=new Fc(16);return Fc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},g.I=b0,g.J=function(s,n,a){var d,y,x,w,b,k,I,D,L,j,Z,K,J=a[0],le=a[1],fe=a[2];return n===s?(s[12]=n[0]*J+n[4]*le+n[8]*fe+n[12],s[13]=n[1]*J+n[5]*le+n[9]*fe+n[13],s[14]=n[2]*J+n[6]*le+n[10]*fe+n[14],s[15]=n[3]*J+n[7]*le+n[11]*fe+n[15]):(y=n[1],x=n[2],w=n[3],b=n[4],k=n[5],I=n[6],D=n[7],L=n[8],j=n[9],Z=n[10],K=n[11],s[0]=d=n[0],s[1]=y,s[2]=x,s[3]=w,s[4]=b,s[5]=k,s[6]=I,s[7]=D,s[8]=L,s[9]=j,s[10]=Z,s[11]=K,s[12]=d*J+b*le+L*fe+n[12],s[13]=y*J+k*le+j*fe+n[13],s[14]=x*J+I*le+Z*fe+n[14],s[15]=w*J+D*le+K*fe+n[15]),s},g.K=function(s,n,a){var d=a[0],y=a[1],x=a[2];return s[0]=n[0]*d,s[1]=n[1]*d,s[2]=n[2]*d,s[3]=n[3]*d,s[4]=n[4]*y,s[5]=n[5]*y,s[6]=n[6]*y,s[7]=n[7]*y,s[8]=n[8]*x,s[9]=n[9]*x,s[10]=n[10]*x,s[11]=n[11]*x,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},g.L=Ib,g.M=function(s,n){const a={};for(let d=0;d<n.length;d++){const y=n[d];y in s&&(a[y]=s[y])}return a},g.N=pl,g.O=S2,g.P=A,g.Q=k2,g.R=bs,g.S=Ss,g.T=Cc,g.U=O,g.V=$,g.W=Le,g.X=Cn,g.Y=S,g.Z=Kd,g._=c,g.a=nt,g.a$=function(s,n){var a=s[0],d=s[1],y=s[2],x=s[3],w=s[4],b=s[5],k=s[6],I=s[7],D=s[8],L=s[9],j=s[10],Z=s[11],K=s[12],J=s[13],le=s[14],fe=s[15],De=n[0],be=n[1],Me=n[2],Ve=n[3],et=n[4],xt=n[5],Nt=n[6],yt=n[7],pt=n[8],At=n[9],Tt=n[10],bt=n[11],Ye=n[12],Dt=n[13],Mt=n[14],Zt=n[15];return Math.abs(a-De)<=vi*Math.max(1,Math.abs(a),Math.abs(De))&&Math.abs(d-be)<=vi*Math.max(1,Math.abs(d),Math.abs(be))&&Math.abs(y-Me)<=vi*Math.max(1,Math.abs(y),Math.abs(Me))&&Math.abs(x-Ve)<=vi*Math.max(1,Math.abs(x),Math.abs(Ve))&&Math.abs(w-et)<=vi*Math.max(1,Math.abs(w),Math.abs(et))&&Math.abs(b-xt)<=vi*Math.max(1,Math.abs(b),Math.abs(xt))&&Math.abs(k-Nt)<=vi*Math.max(1,Math.abs(k),Math.abs(Nt))&&Math.abs(I-yt)<=vi*Math.max(1,Math.abs(I),Math.abs(yt))&&Math.abs(D-pt)<=vi*Math.max(1,Math.abs(D),Math.abs(pt))&&Math.abs(L-At)<=vi*Math.max(1,Math.abs(L),Math.abs(At))&&Math.abs(j-Tt)<=vi*Math.max(1,Math.abs(j),Math.abs(Tt))&&Math.abs(Z-bt)<=vi*Math.max(1,Math.abs(Z),Math.abs(bt))&&Math.abs(K-Ye)<=vi*Math.max(1,Math.abs(K),Math.abs(Ye))&&Math.abs(J-Dt)<=vi*Math.max(1,Math.abs(J),Math.abs(Dt))&&Math.abs(le-Mt)<=vi*Math.max(1,Math.abs(le),Math.abs(Mt))&&Math.abs(fe-Zt)<=vi*Math.max(1,Math.abs(fe),Math.abs(Zt))},g.a0=cr,g.a1=D0,g.a2=qe,g.a3=s=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(a=>{n.onloadstart=()=>{a(n)};for(const d of s){const y=window.document.createElement("source");_r(d)||(n.crossOrigin="Anonymous"),y.src=d,n.appendChild(y)}})},g.a4=function(){return Fe++},g.a5=_t,g.a6=Vc,g.a7=yd,g.a8=mu,g.a9=M2,g.aA=function(s){if(s.type==="custom")return new Z3(s);switch(s.type){case"background":return new H3(s);case"circle":return new AA(s);case"fill":return new qA(s);case"fill-extrusion":return new u3(s);case"heatmap":return new zA(s);case"hillshade":return new LA(s);case"line":return new y3(s);case"raster":return new G3(s);case"symbol":return new Tm(s)}},g.aB=it,g.aC=function(s,n){if(!s)return[{command:"setStyle",args:[n]}];let a=[];try{if(!Te(s.version,n.version))return[{command:"setStyle",args:[n]}];Te(s.center,n.center)||a.push({command:"setCenter",args:[n.center]}),Te(s.zoom,n.zoom)||a.push({command:"setZoom",args:[n.zoom]}),Te(s.bearing,n.bearing)||a.push({command:"setBearing",args:[n.bearing]}),Te(s.pitch,n.pitch)||a.push({command:"setPitch",args:[n.pitch]}),Te(s.sprite,n.sprite)||a.push({command:"setSprite",args:[n.sprite]}),Te(s.glyphs,n.glyphs)||a.push({command:"setGlyphs",args:[n.glyphs]}),Te(s.transition,n.transition)||a.push({command:"setTransition",args:[n.transition]}),Te(s.light,n.light)||a.push({command:"setLight",args:[n.light]}),Te(s.terrain,n.terrain)||a.push({command:"setTerrain",args:[n.terrain]}),Te(s.sky,n.sky)||a.push({command:"setSky",args:[n.sky]}),Te(s.projection,n.projection)||a.push({command:"setProjection",args:[n.projection]});const d={},y=[];(function(w,b,k,I){let D;for(D in b=b||{},w=w||{})Object.prototype.hasOwnProperty.call(w,D)&&(Object.prototype.hasOwnProperty.call(b,D)||Ne(D,k,I));for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&(Object.prototype.hasOwnProperty.call(w,D)?Te(w[D],b[D])||(w[D].type==="geojson"&&b[D].type==="geojson"&&kt(w,b,D)?Ze(k,{command:"setGeoJSONSourceData",args:[D,b[D].data]}):ot(D,b,k,I)):tt(D,b,k))})(s.sources,n.sources,y,d);const x=[];s.layers&&s.layers.forEach(w=>{"source"in w&&d[w.source]?a.push({command:"removeLayer",args:[w.id]}):x.push(w)}),a=a.concat(y),function(w,b,k){b=b||[];const I=(w=w||[]).map(Bt),D=b.map(Bt),L=w.reduce(Tr,{}),j=b.reduce(Tr,{}),Z=I.slice(),K=Object.create(null);let J,le,fe,De,be;for(let Me=0,Ve=0;Me<I.length;Me++)J=I[Me],Object.prototype.hasOwnProperty.call(j,J)?Ve++:(Ze(k,{command:"removeLayer",args:[J]}),Z.splice(Z.indexOf(J,Ve),1));for(let Me=0,Ve=0;Me<D.length;Me++)J=D[D.length-1-Me],Z[Z.length-1-Me]!==J&&(Object.prototype.hasOwnProperty.call(L,J)?(Ze(k,{command:"removeLayer",args:[J]}),Z.splice(Z.lastIndexOf(J,Z.length-Ve),1)):Ve++,De=Z[Z.length-Me],Ze(k,{command:"addLayer",args:[j[J],De]}),Z.splice(Z.length-Me,0,J),K[J]=!0);for(let Me=0;Me<D.length;Me++)if(J=D[Me],le=L[J],fe=j[J],!K[J]&&!Te(le,fe))if(Te(le.source,fe.source)&&Te(le["source-layer"],fe["source-layer"])&&Te(le.type,fe.type)){for(be in at(le.layout,fe.layout,k,J,null,"setLayoutProperty"),at(le.paint,fe.paint,k,J,null,"setPaintProperty"),Te(le.filter,fe.filter)||Ze(k,{command:"setFilter",args:[J,fe.filter]}),Te(le.minzoom,fe.minzoom)&&Te(le.maxzoom,fe.maxzoom)||Ze(k,{command:"setLayerZoomRange",args:[J,fe.minzoom,fe.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,be)&&be!=="layout"&&be!=="paint"&&be!=="filter"&&be!=="metadata"&&be!=="minzoom"&&be!=="maxzoom"&&(be.indexOf("paint.")===0?at(le[be],fe[be],k,J,be.slice(6),"setPaintProperty"):Te(le[be],fe[be])||Ze(k,{command:"setLayerProperty",args:[J,be,fe[be]]}));for(be in fe)Object.prototype.hasOwnProperty.call(fe,be)&&!Object.prototype.hasOwnProperty.call(le,be)&&be!=="layout"&&be!=="paint"&&be!=="filter"&&be!=="metadata"&&be!=="minzoom"&&be!=="maxzoom"&&(be.indexOf("paint.")===0?at(le[be],fe[be],k,J,be.slice(6),"setPaintProperty"):Te(le[be],fe[be])||Ze(k,{command:"setLayerProperty",args:[J,be,fe[be]]}))}else Ze(k,{command:"removeLayer",args:[J]}),De=Z[Z.lastIndexOf(J)+1],Ze(k,{command:"addLayer",args:[fe,De]})}(x,n.layers,a)}catch(d){console.warn("Unable to compute style diff:",d),a=[{command:"setStyle",args:[n]}]}return a},g.aD=function(s){const n=[],a=s.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},g.aE=function s(n,a){if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let d=0;d<n.length;d++)if(!s(n[d],a[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&a!==null){if(typeof a!="object"||Object.keys(n).length!==Object.keys(a).length)return!1;for(const d in n)if(!s(n[d],a[d]))return!1;return!0}return n===a},g.aF=Oe,g.aG=Ge,g.aH=class extends du{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},g.aI=dm,g.aJ=class extends du{constructor(s,n){super(s,n),this.current=SA}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},g.aK=yb,g.aL=_b,g.aM=Ar,g.aN=class extends du{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},g.aO=class extends du{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},g.aP=function(s,n,a,d,y,x,w){var b=1/(n-a),k=1/(d-y),I=1/(x-w);return s[0]=-2*b,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*I,s[11]=0,s[12]=(n+a)*b,s[13]=(y+d)*k,s[14]=(w+x)*I,s[15]=1,s},g.aQ=MA,g.aR=class extends Ce{},g.aS=w3,g.aT=class extends ze{},g.aU=c0,g.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},g.aW=zb,g.aX=Zn,g.aY=ws,g.aZ=class extends Pt{},g.a_=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]&&s[3]===n[3]&&s[4]===n[4]&&s[5]===n[5]&&s[6]===n[6]&&s[7]===n[7]&&s[8]===n[8]&&s[9]===n[9]&&s[10]===n[10]&&s[11]===n[11]&&s[12]===n[12]&&s[13]===n[13]&&s[14]===n[14]&&s[15]===n[15]},g.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,d,y,x)=>{const w=y||x;return n[d]=!w||w.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n},g.ab=function(s,n){const a=[];for(const d in s)d in n||a.push(d);return a},g.ac=oe,g.ad=function(s,n,a){var d=Math.sin(a),y=Math.cos(a),x=n[0],w=n[1],b=n[2],k=n[3],I=n[4],D=n[5],L=n[6],j=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=x*y+I*d,s[1]=w*y+D*d,s[2]=b*y+L*d,s[3]=k*y+j*d,s[4]=I*y-x*d,s[5]=D*y-w*d,s[6]=L*y-b*d,s[7]=j*y-k*d,s},g.ae=function(s){var n=new Fc(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},g.af=gm,g.ag=function(s,n){let a=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:y,minZoom:x,maxZoom:w}=s,b=y?oe(yi.interpolationFactor(y,n,x,w),0,1):0;s.kind==="camera"?d=gi.number(s.minSize,s.maxSize,b):a=b}return{uSizeT:a,uSize:d}},g.ai=function(s,{uSize:n,uSizeT:a},{lowerSize:d,upperSize:y}){return s.kind==="source"?d/zo:s.kind==="composite"?gi.number(d/zo,y/zo,a):n},g.aj=E0,g.ak=function(s,n,a,d){const y=n.y-s.y,x=n.x-s.x,w=d.y-a.y,b=d.x-a.x,k=w*x-b*y;if(k===0)return null;const I=(b*(s.y-a.y)-w*(s.x-a.x))/k;return new A(s.x+I*x,s.y+I*y)},g.al=R2,g.am=bb,g.an=a0,g.ao=function(s){let n=1/0,a=1/0,d=-1/0,y=-1/0;for(const x of s)n=Math.min(n,x.x),a=Math.min(a,x.y),d=Math.max(d,x.x),y=Math.max(y,x.y);return[n,a,d,y]},g.ap=Pn,g.ar=T0,g.as=function(s,n){var a=n[0],d=n[1],y=n[2],x=n[3],w=n[4],b=n[5],k=n[6],I=n[7],D=n[8],L=n[9],j=n[10],Z=n[11],K=n[12],J=n[13],le=n[14],fe=n[15],De=a*b-d*w,be=a*k-y*w,Me=a*I-x*w,Ve=d*k-y*b,et=d*I-x*b,xt=y*I-x*k,Nt=D*J-L*K,yt=D*le-j*K,pt=D*fe-Z*K,At=L*le-j*J,Tt=L*fe-Z*J,bt=j*fe-Z*le,Ye=De*bt-be*Tt+Me*At+Ve*pt-et*yt+xt*Nt;return Ye?(s[0]=(b*bt-k*Tt+I*At)*(Ye=1/Ye),s[1]=(y*Tt-d*bt-x*At)*Ye,s[2]=(J*xt-le*et+fe*Ve)*Ye,s[3]=(j*et-L*xt-Z*Ve)*Ye,s[4]=(k*pt-w*bt-I*yt)*Ye,s[5]=(a*bt-y*pt+x*yt)*Ye,s[6]=(le*Me-K*xt-fe*be)*Ye,s[7]=(D*xt-j*Me+Z*be)*Ye,s[8]=(w*Tt-b*pt+I*Nt)*Ye,s[9]=(d*pt-a*Tt-x*Nt)*Ye,s[10]=(K*et-J*Me+fe*De)*Ye,s[11]=(L*Me-D*et-Z*De)*Ye,s[12]=(b*yt-w*At-k*Nt)*Ye,s[13]=(a*At-d*yt+y*Nt)*Ye,s[14]=(J*be-K*Ve-le*De)*Ye,s[15]=(D*Ve-L*be+j*De)*Ye,s):null},g.at=R0,g.au=k0,g.av=L0,g.aw=function(){const s={},n=ie.$version;for(const a in ie.$root){const d=ie.$root[a];if(d.required){let y=null;y=a==="version"?n:d.type==="array"?[]:{},y!=null&&(s[a]=y)}}return s},g.ax=Ad,g.ay=Vt,g.az=function(s){s=s.slice();const n=Object.create(null);for(let a=0;a<s.length;a++)n[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=se(s[a],n[s[a].ref]));return s},g.b=ye,g.b0=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},g.b1=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s[3]=n[3]*a[3],s},g.b2=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},g.b3=ke,g.b4=C2,g.b5=T2,g.b6=function(s,n,a,d,y){var x,w=1/Math.tan(n/2);return s[0]=w/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=w,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,y!=null&&y!==1/0?(s[10]=(y+d)*(x=1/(d-y)),s[14]=2*y*d*x):(s[10]=-1,s[14]=-2*d),s},g.b7=function(s,n,a){var d=Math.sin(a),y=Math.cos(a),x=n[4],w=n[5],b=n[6],k=n[7],I=n[8],D=n[9],L=n[10],j=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=x*y+I*d,s[5]=w*y+D*d,s[6]=b*y+L*d,s[7]=k*y+j*d,s[8]=I*y-x*d,s[9]=D*y-w*d,s[10]=L*y-b*d,s[11]=j*y-k*d,s},g.b8=q,g.b9=ne,g.bA=Qb,g.bB=function(s){return s.message===Ee},g.bC=qa,g.bD=Ri,g.ba=function(s){return s*Math.PI/180},g.bb=function(s,n){const{x:a,y:d}=Kd.fromLngLat(n);return!(s<0||s>25||d<0||d>=1||a<0||a>=1)},g.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},g.bd=class extends z{},g.be=M0,g.bf=nD,g.bh=er,g.bi=function(s,n){nt.REGISTERED_PROTOCOLS[s]=n},g.bj=function(s){delete nt.REGISTERED_PROTOCOLS[s]},g.bk=function(s,n){const a={};for(let y=0;y<s.length;y++){const x=n&&n[s[y].id]||em(s[y]);n&&(n[s[y].id]=x);let w=a[x];w||(w=a[x]=[]),w.push(s[y])}const d=[];for(const y in a)d.push(a[y]);return d},g.bl=St,g.bm=P2,g.bn=A2,g.bo=l2,g.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Cn/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],a=n.layout,d=n._unevaluatedLayout._values,y={layoutIconSize:d["icon-size"].possiblyEvaluate(new Vr(s.bucket.zoom+1),s.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Vr(s.bucket.zoom+1),s.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Vr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=s.bucket.textSizeData;y.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Vr(I),s.canonical),d["text-size"].possiblyEvaluate(new Vr(D),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=s.bucket.iconSizeData;y.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Vr(I),s.canonical),d["icon-size"].possiblyEvaluate(new Vr(D),s.canonical)]}const x=a.get("text-line-height")*Pn,w=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",b=a.get("text-keep-upright"),k=a.get("text-size");for(const I of s.bucket.features){const D=a.get("text-font").evaluate(I,{},s.canonical).join(","),L=k.evaluate(I,{},s.canonical),j=y.layoutTextSize.evaluate(I,{},s.canonical),Z=y.layoutIconSize.evaluate(I,{},s.canonical),K={horizontal:{},vertical:void 0},J=I.text;let le,fe=[0,0];if(J){const Me=J.toString(),Ve=a.get("text-letter-spacing").evaluate(I,{},s.canonical)*Pn,et=X_(Me)?Ve:0,xt=a.get("text-anchor").evaluate(I,{},s.canonical),Nt=V2(n,I,s.canonical);if(!Nt){const Tt=a.get("text-radial-offset").evaluate(I,{},s.canonical);fe=Tt?U2(xt,[Tt*Pn,z0]):a.get("text-offset").evaluate(I,{},s.canonical).map(bt=>bt*Pn)}let yt=w?"center":a.get("text-justify").evaluate(I,{},s.canonical);const pt=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(I,{},s.canonical)*Pn:1/0,At=()=>{s.bucket.allowVerticalPlacement&&Dd(Me)&&(K.vertical=bm(J,s.glyphMap,s.glyphPositions,s.imagePositions,D,pt,x,xt,"left",et,fe,g.ah.vertical,!0,j,L))};if(!w&&Nt){const Tt=new Set;if(yt==="auto")for(let Ye=0;Ye<Nt.values.length;Ye+=2)Tt.add(R0(Nt.values[Ye]));else Tt.add(yt);let bt=!1;for(const Ye of Tt)if(!K.horizontal[Ye])if(bt)K.horizontal[Ye]=K.horizontal[0];else{const Dt=bm(J,s.glyphMap,s.glyphPositions,s.imagePositions,D,pt,x,"center",Ye,et,fe,g.ah.horizontal,!1,j,L);Dt&&(K.horizontal[Ye]=Dt,bt=Dt.positionedLines.length===1)}At()}else{yt==="auto"&&(yt=R0(xt));const Tt=bm(J,s.glyphMap,s.glyphPositions,s.imagePositions,D,pt,x,xt,yt,et,fe,g.ah.horizontal,!1,j,L);Tt&&(K.horizontal[yt]=Tt),At(),Dd(Me)&&w&&b&&(K.vertical=bm(J,s.glyphMap,s.glyphPositions,s.imagePositions,D,pt,x,xt,yt,et,fe,g.ah.vertical,!1,j,L))}}let De=!1;if(I.icon&&I.icon.name){const Me=s.imageMap[I.icon.name];Me&&(le=N3(s.imagePositions[I.icon.name],a.get("icon-offset").evaluate(I,{},s.canonical),a.get("icon-anchor").evaluate(I,{},s.canonical)),De=!!Me.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=De:s.bucket.sdfIcons!==De&&je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Me.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const be=W2(K.horizontal)||K.vertical;s.bucket.iconsInText=!!be&&be.iconsInText,(be||le)&&tD(s.bucket,I,K,le,s.imageMap,y,j,Z,fe,De,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},g.bq=_0,g.br=m0,g.bs=y0,g.bt=hl,g.bu=x0,g.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},g.bw=function(s,n,a,d,y){return c(this,void 0,void 0,function*(){if($())try{return yield Le(s,n,a,d,y)}catch{}return function(x,w,b,k,I){const D=x.width,L=x.height;Ke&&xe||(Ke=new OffscreenCanvas(D,L),xe=Ke.getContext("2d",{willReadFrequently:!0})),Ke.width=D,Ke.height=L,xe.drawImage(x,0,0,D,L);const j=xe.getImageData(w,b,k,I);return xe.clearRect(0,0,D,L),j.data}(s,n,a,d,y)})},g.bx=I2,g.by=T,g.bz=P,g.c=mt,g.d=s=>c(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(n)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.e=ge,g.f=s=>new Promise((n,a)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Be})},d.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(s)],{type:"image/png"});d.src=s.byteLength?URL.createObjectURL(y):Be}),g.g=rt,g.h=(s,n)=>Yt(ge(s,{type:"json"}),n),g.i=Re,g.j=V,g.k=Xr,g.l=(s,n)=>Yt(ge(s,{type:"arrayBuffer"}),n),g.m=Yt,g.n=function(s){return new x0(s).readFields(D3,[])},g.o=jd,g.p=a2,g.q=v,g.r=q_,g.s=_r,g.t=Pd,g.u=la,g.v=ie,g.w=je,g.x=function([s,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(a),y:s*Math.sin(n)*Math.sin(a),z:s*Math.cos(a)}},g.y=gi,g.z=Vr}),h("worker",["./shared"],function(g){class c{constructor(G){this.keyCache={},G&&this.replace(G)}replace(G){this._layerConfigs={},this._layers={},this.update(G,[])}update(G,W){for(const ue of G){this._layerConfigs[ue.id]=ue;const Se=this._layers[ue.id]=g.aA(ue);Se._featureFilter=g.a7(Se.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(const ue of W)delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue];this.familiesBySource={};const ee=g.bk(Object.values(this._layerConfigs),this.keyCache);for(const ue of ee){const Se=ue.map($e=>this._layers[$e.id]),Ie=Se[0];if(Ie.visibility==="none")continue;const Ae=Ie.source||"";let _e=this.familiesBySource[Ae];_e||(_e=this.familiesBySource[Ae]={});const He=Ie.sourceLayer||"_geojsonTileLayer";let Je=_e[He];Je||(Je=_e[He]=[]),Je.push(Se)}}}class T{constructor(G){const W={},ee=[];for(const Ae in G){const _e=G[Ae],He=W[Ae]={};for(const Je in _e){const $e=_e[+Je];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;const ut={x:0,y:0,w:$e.bitmap.width+2,h:$e.bitmap.height+2};ee.push(ut),He[Je]={rect:ut,metrics:$e.metrics}}}const{w:ue,h:Se}=g.p(ee),Ie=new g.o({width:ue||1,height:Se||1});for(const Ae in G){const _e=G[Ae];for(const He in _e){const Je=_e[+He];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;const $e=W[Ae][He].rect;g.o.copy(Je.bitmap,Ie,{x:0,y:0},{x:$e.x+1,y:$e.y+1},Je.bitmap)}}this.image=Ie,this.positions=W}}g.bl("GlyphAtlas",T);class P{constructor(G){this.tileID=new g.S(G.tileID.overscaledZ,G.tileID.wrap,G.tileID.canonical.z,G.tileID.canonical.x,G.tileID.canonical.y),this.uid=G.uid,this.zoom=G.zoom,this.pixelRatio=G.pixelRatio,this.tileSize=G.tileSize,this.source=G.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=G.showCollisionBoxes,this.collectResourceTiming=!!G.collectResourceTiming,this.returnDependencies=!!G.returnDependencies,this.promoteId=G.promoteId,this.inFlightDependencies=[]}parse(G,W,ee,ue){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=G,this.collisionBoxArray=new g.a5;const Se=new g.bm(Object.keys(G.layers).sort()),Ie=new g.bn(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];const Ae={},_e={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ee},He=W.familiesBySource[this.source];for(const rr in He){const Mr=G.layers[rr];if(!Mr)continue;Mr.version===1&&g.w(`Vector tile source "${this.source}" layer "${rr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yr=Se.encode(rr),Dn=[];for(let Bn=0;Bn<Mr.length;Bn++){const ni=Mr.feature(Bn),Fa=Ie.getId(ni,rr);Dn.push({feature:ni,id:Fa,index:Bn,sourceLayerIndex:Yr})}for(const Bn of He[rr]){const ni=Bn[0];ni.source!==this.source&&g.w(`layer.source = ${ni.source} does not equal this.source = ${this.source}`),ni.minzoom&&this.zoom<Math.floor(ni.minzoom)||ni.maxzoom&&this.zoom>=ni.maxzoom||ni.visibility!=="none"&&(R(Bn,this.zoom,ee),(Ae[ni.id]=ni.createBucket({index:Ie.bucketLayerIDs.length,layers:Bn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yr,sourceID:this.source})).populate(Dn,_e,this.tileID.canonical),Ie.bucketLayerIDs.push(Bn.map(Fa=>Fa.id)))}}const Je=g.aF(_e.glyphDependencies,rr=>Object.keys(rr).map(Number));this.inFlightDependencies.forEach(rr=>rr==null?void 0:rr.abort()),this.inFlightDependencies=[];let $e=Promise.resolve({});if(Object.keys(Je).length){const rr=new AbortController;this.inFlightDependencies.push(rr),$e=ue.sendAsync({type:"GG",data:{stacks:Je,source:this.source,tileID:this.tileID,type:"glyphs"}},rr)}const ut=Object.keys(_e.iconDependencies);let Rt=Promise.resolve({});if(ut.length){const rr=new AbortController;this.inFlightDependencies.push(rr),Rt=ue.sendAsync({type:"GI",data:{icons:ut,source:this.source,tileID:this.tileID,type:"icons"}},rr)}const Ot=Object.keys(_e.patternDependencies);let mr=Promise.resolve({});if(Ot.length){const rr=new AbortController;this.inFlightDependencies.push(rr),mr=ue.sendAsync({type:"GI",data:{icons:Ot,source:this.source,tileID:this.tileID,type:"patterns"}},rr)}const[Qt,gr,or]=yield Promise.all([$e,Rt,mr]),Tn=new T(Qt),rn=new g.bo(gr,or);for(const rr in Ae){const Mr=Ae[rr];Mr instanceof g.a6?(R(Mr.layers,this.zoom,ee),g.bp({bucket:Mr,glyphMap:Qt,glyphPositions:Tn.positions,imageMap:gr,imagePositions:rn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Mr.hasPattern&&(Mr instanceof g.bq||Mr instanceof g.br||Mr instanceof g.bs)&&(R(Mr.layers,this.zoom,ee),Mr.addFeatures(_e,this.tileID.canonical,rn.patternPositions))}return this.status="done",{buckets:Object.values(Ae).filter(rr=>!rr.isEmpty()),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tn.image,imageAtlas:rn,glyphMap:this.returnDependencies?Qt:null,iconMap:this.returnDependencies?gr:null,glyphPositions:this.returnDependencies?Tn.positions:null}})}}function R(he,G,W){const ee=new g.z(G);for(const ue of he)ue.recalculate(ee,W)}class A{constructor(G,W,ee){this.actor=G,this.layerIndex=W,this.availableImages=ee,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(G,W){return g._(this,void 0,void 0,function*(){const ee=yield g.l(G.request,W);try{return{vectorTile:new g.bt.VectorTile(new g.bu(ee.data)),rawData:ee.data,cacheControl:ee.cacheControl,expires:ee.expires}}catch(ue){const Se=new Uint8Array(ee.data);let Ie=`Unable to parse the tile at ${G.request.url}, `;throw Ie+=Se[0]===31&&Se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ue.message}`,new Error(Ie)}})}loadTile(G){return g._(this,void 0,void 0,function*(){const W=G.uid,ee=!!(G&&G.request&&G.request.collectResourceTiming)&&new g.bv(G.request),ue=new P(G);this.loading[W]=ue;const Se=new AbortController;ue.abort=Se;try{const Ie=yield this.loadVectorTile(G,Se);if(delete this.loading[W],!Ie)return null;const Ae=Ie.rawData,_e={};Ie.expires&&(_e.expires=Ie.expires),Ie.cacheControl&&(_e.cacheControl=Ie.cacheControl);const He={};if(ee){const $e=ee.finish();$e&&(He.resourceTiming=JSON.parse(JSON.stringify($e)))}ue.vectorTile=Ie.vectorTile;const Je=ue.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[W]=ue,this.fetching[W]={rawTileData:Ae,cacheControl:_e,resourceTiming:He};try{const $e=yield Je;return g.e({rawTileData:Ae.slice(0)},$e,_e,He)}finally{delete this.fetching[W]}}catch(Ie){throw delete this.loading[W],ue.status="done",this.loaded[W]=ue,Ie}})}reloadTile(G){return g._(this,void 0,void 0,function*(){const W=G.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ee=this.loaded[W];if(ee.showCollisionBoxes=G.showCollisionBoxes,ee.status==="parsing"){const ue=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor);let Se;if(this.fetching[W]){const{rawTileData:Ie,cacheControl:Ae,resourceTiming:_e}=this.fetching[W];delete this.fetching[W],Se=g.e({rawTileData:Ie.slice(0)},ue,Ae,_e)}else Se=ue;return Se}if(ee.status==="done"&&ee.vectorTile)return ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(G){return g._(this,void 0,void 0,function*(){const W=this.loading,ee=G.uid;W&&W[ee]&&W[ee].abort&&(W[ee].abort.abort(),delete W[ee])})}removeTile(G){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[G.uid]&&delete this.loaded[G.uid]})}}class M{constructor(){this.loaded={}}loadTile(G){return g._(this,void 0,void 0,function*(){const{uid:W,encoding:ee,rawImageData:ue,redFactor:Se,greenFactor:Ie,blueFactor:Ae,baseShift:_e}=G,He=ue.width+2,Je=ue.height+2,$e=g.b(ue)?new g.R({width:He,height:Je},yield g.bw(ue,-1,-1,He,Je)):ue,ut=new g.bx(W,$e,ee,Se,Ie,Ae,_e);return this.loaded=this.loaded||{},this.loaded[W]=ut,ut})}removeTile(G){const W=this.loaded,ee=G.uid;W&&W[ee]&&delete W[ee]}}function N(he,G){if(he.length!==0){Y(he[0],G);for(var W=1;W<he.length;W++)Y(he[W],!G)}}function Y(he,G){for(var W=0,ee=0,ue=0,Se=he.length,Ie=Se-1;ue<Se;Ie=ue++){var Ae=(he[ue][0]-he[Ie][0])*(he[Ie][1]+he[ue][1]),_e=W+Ae;ee+=Math.abs(W)>=Math.abs(Ae)?W-_e+Ae:Ae-_e+W,W=_e}W+ee>=0!=!!G&&he.reverse()}var U=g.by(function he(G,W){var ee,ue=G&&G.type;if(ue==="FeatureCollection")for(ee=0;ee<G.features.length;ee++)he(G.features[ee],W);else if(ue==="GeometryCollection")for(ee=0;ee<G.geometries.length;ee++)he(G.geometries[ee],W);else if(ue==="Feature")he(G.geometry,W);else if(ue==="Polygon")N(G.coordinates,W);else if(ue==="MultiPolygon")for(ee=0;ee<G.coordinates.length;ee++)N(G.coordinates[ee],W);return G});const te=g.bt.VectorTileFeature.prototype.toGeoJSON;var O={exports:{}},$=g.bz,q=g.bt.VectorTileFeature,ne=oe;function oe(he,G){this.options=G||{},this.features=he,this.length=he.length}function ke(he,G){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=G||4096}oe.prototype.feature=function(he){return new ke(this.features[he],this.options.extent)},ke.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var G=0;G<he.length;G++){for(var W=he[G],ee=[],ue=0;ue<W.length;ue++)ee.push(new $(W[ue][0],W[ue][1]));this.geometry.push(ee)}return this.geometry},ke.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,G=1/0,W=-1/0,ee=1/0,ue=-1/0,Se=0;Se<he.length;Se++)for(var Ie=he[Se],Ae=0;Ae<Ie.length;Ae++){var _e=Ie[Ae];G=Math.min(G,_e.x),W=Math.max(W,_e.x),ee=Math.min(ee,_e.y),ue=Math.max(ue,_e.y)}return[G,ee,W,ue]},ke.prototype.toGeoJSON=q.prototype.toGeoJSON;var ge=g.bA,Fe=ne;function Oe(he){var G=new ge;return function(W,ee){for(var ue in W.layers)ee.writeMessage(3,Ge,W.layers[ue])}(he,G),G.finish()}function Ge(he,G){var W;G.writeVarintField(15,he.version||1),G.writeStringField(1,he.name||""),G.writeVarintField(5,he.extent||4096);var ee={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<he.length;W++)ee.feature=he.feature(W),G.writeMessage(2,it,ee);var ue=ee.keys;for(W=0;W<ue.length;W++)G.writeStringField(3,ue[W]);var Se=ee.values;for(W=0;W<Se.length;W++)G.writeMessage(4,vt,Se[W])}function it(he,G){var W=he.feature;W.id!==void 0&&G.writeVarintField(1,W.id),G.writeMessage(2,ve,he),G.writeVarintField(3,W.type),G.writeMessage(4,Re,W)}function ve(he,G){var W=he.feature,ee=he.keys,ue=he.values,Se=he.keycache,Ie=he.valuecache;for(var Ae in W.properties){var _e=W.properties[Ae],He=Se[Ae];if(_e!==null){He===void 0&&(ee.push(Ae),Se[Ae]=He=ee.length-1),G.writeVarint(He);var Je=typeof _e;Je!=="string"&&Je!=="boolean"&&Je!=="number"&&(_e=JSON.stringify(_e));var $e=Je+":"+_e,ut=Ie[$e];ut===void 0&&(ue.push(_e),Ie[$e]=ut=ue.length-1),G.writeVarint(ut)}}}function je(he,G){return(G<<3)+(7&he)}function H(he){return he<<1^he>>31}function Re(he,G){for(var W=he.loadGeometry(),ee=he.type,ue=0,Se=0,Ie=W.length,Ae=0;Ae<Ie;Ae++){var _e=W[Ae],He=1;ee===1&&(He=_e.length),G.writeVarint(je(1,He));for(var Je=ee===3?_e.length-1:_e.length,$e=0;$e<Je;$e++){$e===1&&ee!==1&&G.writeVarint(je(2,Je-1));var ut=_e[$e].x-ue,Rt=_e[$e].y-Se;G.writeVarint(H(ut)),G.writeVarint(H(Rt)),ue+=ut,Se+=Rt}ee===3&&G.writeVarint(je(7,1))}}function vt(he,G){var W=typeof he;W==="string"?G.writeStringField(1,he):W==="boolean"?G.writeBooleanField(7,he):W==="number"&&(he%1!=0?G.writeDoubleField(3,he):he<0?G.writeSVarintField(6,he):G.writeVarintField(5,he))}O.exports=Oe,O.exports.fromVectorTileJs=Oe,O.exports.fromGeojsonVt=function(he,G){G=G||{};var W={};for(var ee in he)W[ee]=new Fe(he[ee].features,G),W[ee].name=ee,W[ee].version=G.version,W[ee].extent=G.extent;return Oe({layers:W})},O.exports.GeoJSONWrapper=Fe;var ye=g.by(O.exports);const Be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Le=Math.fround||(Ke=new Float32Array(1),he=>(Ke[0]=+he,Ke[0]));var Ke;const xe=3,Ee=5,mt=6;class nt{constructor(G){this.options=Object.assign(Object.create(Be),G),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(G){const{log:W,minZoom:ee,maxZoom:ue}=this.options;W&&console.time("total time");const Se=`prepare ${G.length} points`;W&&console.time(Se),this.points=G;const Ie=[];for(let _e=0;_e<G.length;_e++){const He=G[_e];if(!He.geometry)continue;const[Je,$e]=He.geometry.coordinates,ut=Le(er(Je)),Rt=Le(Vt($e));Ie.push(ut,Rt,1/0,_e,-1,1),this.options.reduce&&Ie.push(0)}let Ae=this.trees[ue+1]=this._createTree(Ie);W&&console.timeEnd(Se);for(let _e=ue;_e>=ee;_e--){const He=+Date.now();Ae=this.trees[_e]=this._createTree(this._cluster(Ae,_e)),W&&console.log("z%d: %d clusters in %dms",_e,Ae.numItems,+Date.now()-He)}return W&&console.timeEnd("total time"),this}getClusters(G,W){let ee=((G[0]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,G[1]));let Se=G[2]===180?180:((G[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,G[3]));if(G[2]-G[0]>=360)ee=-180,Se=180;else if(ee>Se){const $e=this.getClusters([ee,ue,180,Ie],W),ut=this.getClusters([-180,ue,Se,Ie],W);return $e.concat(ut)}const Ae=this.trees[this._limitZoom(W)],_e=Ae.range(er(ee),Vt(Ie),er(Se),Vt(ue)),He=Ae.data,Je=[];for(const $e of _e){const ut=this.stride*$e;Je.push(He[ut+Ee]>1?rt(He,ut,this.clusterProps):this.points[He[ut+xe]])}return Je}getChildren(G){const W=this._getOriginId(G),ee=this._getOriginZoom(G),ue="No cluster with the specified id.",Se=this.trees[ee];if(!Se)throw new Error(ue);const Ie=Se.data;if(W*this.stride>=Ie.length)throw new Error(ue);const Ae=this.options.radius/(this.options.extent*Math.pow(2,ee-1)),_e=Se.within(Ie[W*this.stride],Ie[W*this.stride+1],Ae),He=[];for(const Je of _e){const $e=Je*this.stride;Ie[$e+4]===G&&He.push(Ie[$e+Ee]>1?rt(Ie,$e,this.clusterProps):this.points[Ie[$e+xe]])}if(He.length===0)throw new Error(ue);return He}getLeaves(G,W,ee){const ue=[];return this._appendLeaves(ue,G,W=W||10,ee=ee||0,0),ue}getTile(G,W,ee){const ue=this.trees[this._limitZoom(G)],Se=Math.pow(2,G),{extent:Ie,radius:Ae}=this.options,_e=Ae/Ie,He=(ee-_e)/Se,Je=(ee+1+_e)/Se,$e={features:[]};return this._addTileFeatures(ue.range((W-_e)/Se,He,(W+1+_e)/Se,Je),ue.data,W,ee,Se,$e),W===0&&this._addTileFeatures(ue.range(1-_e/Se,He,1,Je),ue.data,Se,ee,Se,$e),W===Se-1&&this._addTileFeatures(ue.range(0,He,_e/Se,Je),ue.data,-1,ee,Se,$e),$e.features.length?$e:null}getClusterExpansionZoom(G){let W=this._getOriginZoom(G)-1;for(;W<=this.options.maxZoom;){const ee=this.getChildren(G);if(W++,ee.length!==1)break;G=ee[0].properties.cluster_id}return W}_appendLeaves(G,W,ee,ue,Se){const Ie=this.getChildren(W);for(const Ae of Ie){const _e=Ae.properties;if(_e&&_e.cluster?Se+_e.point_count<=ue?Se+=_e.point_count:Se=this._appendLeaves(G,_e.cluster_id,ee,ue,Se):Se<ue?Se++:G.push(Ae),G.length===ee)break}return Se}_createTree(G){const W=new g.av(G.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ee=0;ee<G.length;ee+=this.stride)W.add(G[ee],G[ee+1]);return W.finish(),W.data=G,W}_addTileFeatures(G,W,ee,ue,Se,Ie){for(const Ae of G){const _e=Ae*this.stride,He=W[_e+Ee]>1;let Je,$e,ut;if(He)Je=Jt(W,_e,this.clusterProps),$e=W[_e],ut=W[_e+1];else{const mr=this.points[W[_e+xe]];Je=mr.properties;const[Qt,gr]=mr.geometry.coordinates;$e=er(Qt),ut=Vt(gr)}const Rt={type:1,geometry:[[Math.round(this.options.extent*($e*Se-ee)),Math.round(this.options.extent*(ut*Se-ue))]],tags:Je};let Ot;Ot=He||this.options.generateId?W[_e+xe]:this.points[W[_e+xe]].id,Ot!==void 0&&(Rt.id=Ot),Ie.features.push(Rt)}}_limitZoom(G){return Math.max(this.options.minZoom,Math.min(Math.floor(+G),this.options.maxZoom+1))}_cluster(G,W){const{radius:ee,extent:ue,reduce:Se,minPoints:Ie}=this.options,Ae=ee/(ue*Math.pow(2,W)),_e=G.data,He=[],Je=this.stride;for(let $e=0;$e<_e.length;$e+=Je){if(_e[$e+2]<=W)continue;_e[$e+2]=W;const ut=_e[$e],Rt=_e[$e+1],Ot=G.within(_e[$e],_e[$e+1],Ae),mr=_e[$e+Ee];let Qt=mr;for(const gr of Ot){const or=gr*Je;_e[or+2]>W&&(Qt+=_e[or+Ee])}if(Qt>mr&&Qt>=Ie){let gr,or=ut*mr,Tn=Rt*mr,rn=-1;const rr=(($e/Je|0)<<5)+(W+1)+this.points.length;for(const Mr of Ot){const Yr=Mr*Je;if(_e[Yr+2]<=W)continue;_e[Yr+2]=W;const Dn=_e[Yr+Ee];or+=_e[Yr]*Dn,Tn+=_e[Yr+1]*Dn,_e[Yr+4]=rr,Se&&(gr||(gr=this._map(_e,$e,!0),rn=this.clusterProps.length,this.clusterProps.push(gr)),Se(gr,this._map(_e,Yr)))}_e[$e+4]=rr,He.push(or/Qt,Tn/Qt,1/0,rr,-1,Qt),Se&&He.push(rn)}else{for(let gr=0;gr<Je;gr++)He.push(_e[$e+gr]);if(Qt>1)for(const gr of Ot){const or=gr*Je;if(!(_e[or+2]<=W)){_e[or+2]=W;for(let Tn=0;Tn<Je;Tn++)He.push(_e[or+Tn])}}}}return He}_getOriginId(G){return G-this.points.length>>5}_getOriginZoom(G){return(G-this.points.length)%32}_map(G,W,ee){if(G[W+Ee]>1){const Ie=this.clusterProps[G[W+mt]];return ee?Object.assign({},Ie):Ie}const ue=this.points[G[W+xe]].properties,Se=this.options.map(ue);return ee&&Se===ue?Object.assign({},Se):Se}}function rt(he,G,W){return{type:"Feature",id:he[G+xe],properties:Jt(he,G,W),geometry:{type:"Point",coordinates:[(ee=he[G],360*(ee-.5)),Yt(he[G+1])]}};var ee}function Jt(he,G,W){const ee=he[G+Ee],ue=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee,Se=he[G+mt],Ie=Se===-1?{}:Object.assign({},W[Se]);return Object.assign(Ie,{cluster:!0,cluster_id:he[G+xe],point_count:ee,point_count_abbreviated:ue})}function er(he){return he/360+.5}function Vt(he){const G=Math.sin(he*Math.PI/180),W=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return W<0?0:W>1?1:W}function Yt(he){const G=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(G))/Math.PI-90}function _r(he,G,W,ee){let ue=ee;const Se=G+(W-G>>1);let Ie,Ae=W-G;const _e=he[G],He=he[G+1],Je=he[W],$e=he[W+1];for(let ut=G+3;ut<W;ut+=3){const Rt=fr(he[ut],he[ut+1],_e,He,Je,$e);if(Rt>ue)Ie=ut,ue=Rt;else if(Rt===ue){const Ot=Math.abs(ut-Se);Ot<Ae&&(Ie=ut,Ae=Ot)}}ue>ee&&(Ie-G>3&&_r(he,G,Ie,ee),he[Ie+2]=ue,W-Ie>3&&_r(he,Ie,W,ee))}function fr(he,G,W,ee,ue,Se){let Ie=ue-W,Ae=Se-ee;if(Ie!==0||Ae!==0){const _e=((he-W)*Ie+(G-ee)*Ae)/(Ie*Ie+Ae*Ae);_e>1?(W=ue,ee=Se):_e>0&&(W+=Ie*_e,ee+=Ae*_e)}return Ie=he-W,Ae=G-ee,Ie*Ie+Ae*Ae}function br(he,G,W,ee){const ue={id:he??null,type:G,geometry:W,tags:ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(G==="Point"||G==="MultiPoint"||G==="LineString")Xr(ue,W);else if(G==="Polygon")Xr(ue,W[0]);else if(G==="MultiLineString")for(const Se of W)Xr(ue,Se);else if(G==="MultiPolygon")for(const Se of W)Xr(ue,Se[0]);return ue}function Xr(he,G){for(let W=0;W<G.length;W+=3)he.minX=Math.min(he.minX,G[W]),he.minY=Math.min(he.minY,G[W+1]),he.maxX=Math.max(he.maxX,G[W]),he.maxY=Math.max(he.maxY,G[W+1])}function V(he,G,W,ee){if(!G.geometry)return;const ue=G.geometry.coordinates;if(ue&&ue.length===0)return;const Se=G.geometry.type,Ie=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2);let Ae=[],_e=G.id;if(W.promoteId?_e=G.properties[W.promoteId]:W.generateId&&(_e=ee||0),Se==="Point")Ue(ue,Ae);else if(Se==="MultiPoint")for(const He of ue)Ue(He,Ae);else if(Se==="LineString")ie(ue,Ae,Ie,!1);else if(Se==="MultiLineString"){if(W.lineMetrics){for(const He of ue)Ae=[],ie(He,Ae,Ie,!1),he.push(br(_e,"LineString",Ae,G.properties));return}de(ue,Ae,Ie,!1)}else if(Se==="Polygon")de(ue,Ae,Ie,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(const He of G.geometry.geometries)V(he,{id:_e,geometry:He,properties:G.properties},W,ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const He of ue){const Je=[];de(He,Je,Ie,!0),Ae.push(Je)}}he.push(br(_e,Se,Ae,G.properties))}function Ue(he,G){G.push(se(he[0]),Te(he[1]),0)}function ie(he,G,W,ee){let ue,Se,Ie=0;for(let _e=0;_e<he.length;_e++){const He=se(he[_e][0]),Je=Te(he[_e][1]);G.push(He,Je,0),_e>0&&(Ie+=ee?(ue*Je-He*Se)/2:Math.sqrt(Math.pow(He-ue,2)+Math.pow(Je-Se,2))),ue=He,Se=Je}const Ae=G.length-3;G[2]=1,_r(G,0,Ae,W),G[Ae+2]=1,G.size=Math.abs(Ie),G.start=0,G.end=G.size}function de(he,G,W,ee){for(let ue=0;ue<he.length;ue++){const Se=[];ie(he[ue],Se,W,ee),G.push(Se)}}function se(he){return he/360+.5}function Te(he){const G=Math.sin(he*Math.PI/180),W=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return W<0?0:W>1?1:W}function Ze(he,G,W,ee,ue,Se,Ie,Ae){if(ee/=G,Se>=(W/=G)&&Ie<ee)return he;if(Ie<W||Se>=ee)return null;const _e=[];for(const He of he){const Je=He.geometry;let $e=He.type;const ut=ue===0?He.minX:He.minY,Rt=ue===0?He.maxX:He.maxY;if(ut>=W&&Rt<ee){_e.push(He);continue}if(Rt<W||ut>=ee)continue;let Ot=[];if($e==="Point"||$e==="MultiPoint")tt(Je,Ot,W,ee,ue);else if($e==="LineString")Ne(Je,Ot,W,ee,ue,!1,Ae.lineMetrics);else if($e==="MultiLineString")kt(Je,Ot,W,ee,ue,!1);else if($e==="Polygon")kt(Je,Ot,W,ee,ue,!0);else if($e==="MultiPolygon")for(const mr of Je){const Qt=[];kt(mr,Qt,W,ee,ue,!0),Qt.length&&Ot.push(Qt)}if(Ot.length){if(Ae.lineMetrics&&$e==="LineString"){for(const mr of Ot)_e.push(br(He.id,$e,mr,He.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(Ot.length===1?($e="LineString",Ot=Ot[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=Ot.length===3?"Point":"MultiPoint"),_e.push(br(He.id,$e,Ot,He.tags))}}return _e.length?_e:null}function tt(he,G,W,ee,ue){for(let Se=0;Se<he.length;Se+=3){const Ie=he[Se+ue];Ie>=W&&Ie<=ee&&at(G,he[Se],he[Se+1],he[Se+2])}}function Ne(he,G,W,ee,ue,Se,Ie){let Ae=ot(he);const _e=ue===0?Bt:Tr;let He,Je,$e=he.start;for(let Qt=0;Qt<he.length-3;Qt+=3){const gr=he[Qt],or=he[Qt+1],Tn=he[Qt+2],rn=he[Qt+3],rr=he[Qt+4],Mr=ue===0?gr:or,Yr=ue===0?rn:rr;let Dn=!1;Ie&&(He=Math.sqrt(Math.pow(gr-rn,2)+Math.pow(or-rr,2))),Mr<W?Yr>W&&(Je=_e(Ae,gr,or,rn,rr,W),Ie&&(Ae.start=$e+He*Je)):Mr>ee?Yr<ee&&(Je=_e(Ae,gr,or,rn,rr,ee),Ie&&(Ae.start=$e+He*Je)):at(Ae,gr,or,Tn),Yr<W&&Mr>=W&&(Je=_e(Ae,gr,or,rn,rr,W),Dn=!0),Yr>ee&&Mr<=ee&&(Je=_e(Ae,gr,or,rn,rr,ee),Dn=!0),!Se&&Dn&&(Ie&&(Ae.end=$e+He*Je),G.push(Ae),Ae=ot(he)),Ie&&($e+=He)}let ut=he.length-3;const Rt=he[ut],Ot=he[ut+1],mr=ue===0?Rt:Ot;mr>=W&&mr<=ee&&at(Ae,Rt,Ot,he[ut+2]),ut=Ae.length-3,Se&&ut>=3&&(Ae[ut]!==Ae[0]||Ae[ut+1]!==Ae[1])&&at(Ae,Ae[0],Ae[1],Ae[2]),Ae.length&&G.push(Ae)}function ot(he){const G=[];return G.size=he.size,G.start=he.start,G.end=he.end,G}function kt(he,G,W,ee,ue,Se){for(const Ie of he)Ne(Ie,G,W,ee,ue,Se,!1)}function at(he,G,W,ee){he.push(G,W,ee)}function Bt(he,G,W,ee,ue,Se){const Ie=(Se-G)/(ee-G);return at(he,Se,W+(ue-W)*Ie,1),Ie}function Tr(he,G,W,ee,ue,Se){const Ie=(Se-W)/(ue-W);return at(he,G+(ee-G)*Ie,Se,1),Ie}function qe(he,G){const W=[];for(let ee=0;ee<he.length;ee++){const ue=he[ee],Se=ue.type;let Ie;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Ie=tn(ue.geometry,G);else if(Se==="MultiLineString"||Se==="Polygon"){Ie=[];for(const Ae of ue.geometry)Ie.push(tn(Ae,G))}else if(Se==="MultiPolygon"){Ie=[];for(const Ae of ue.geometry){const _e=[];for(const He of Ae)_e.push(tn(He,G));Ie.push(_e)}}W.push(br(ue.id,Se,Ie,ue.tags))}return W}function tn(he,G){const W=[];W.size=he.size,he.start!==void 0&&(W.start=he.start,W.end=he.end);for(let ee=0;ee<he.length;ee+=3)W.push(he[ee]+G,he[ee+1],he[ee+2]);return W}function _n(he,G){if(he.transformed)return he;const W=1<<he.z,ee=he.x,ue=he.y;for(const Se of he.features){const Ie=Se.geometry,Ae=Se.type;if(Se.geometry=[],Ae===1)for(let _e=0;_e<Ie.length;_e+=2)Se.geometry.push(vn(Ie[_e],Ie[_e+1],G,W,ee,ue));else for(let _e=0;_e<Ie.length;_e++){const He=[];for(let Je=0;Je<Ie[_e].length;Je+=2)He.push(vn(Ie[_e][Je],Ie[_e][Je+1],G,W,ee,ue));Se.geometry.push(He)}}return he.transformed=!0,he}function vn(he,G,W,ee,ue,Se){return[Math.round(W*(he*ee-ue)),Math.round(W*(G*ee-Se))]}function pi(he,G,W,ee,ue){const Se=G===ue.maxZoom?0:ue.tolerance/((1<<G)*ue.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:he.length,source:null,x:W,y:ee,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ae of he)Qe(Ie,Ae,Se,ue);return Ie}function Qe(he,G,W,ee){const ue=G.geometry,Se=G.type,Ie=[];if(he.minX=Math.min(he.minX,G.minX),he.minY=Math.min(he.minY,G.minY),he.maxX=Math.max(he.maxX,G.maxX),he.maxY=Math.max(he.maxY,G.maxY),Se==="Point"||Se==="MultiPoint")for(let Ae=0;Ae<ue.length;Ae+=3)Ie.push(ue[Ae],ue[Ae+1]),he.numPoints++,he.numSimplified++;else if(Se==="LineString")Kt(Ie,ue,he,W,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(let Ae=0;Ae<ue.length;Ae++)Kt(Ie,ue[Ae],he,W,Se==="Polygon",Ae===0);else if(Se==="MultiPolygon")for(let Ae=0;Ae<ue.length;Ae++){const _e=ue[Ae];for(let He=0;He<_e.length;He++)Kt(Ie,_e[He],he,W,!0,He===0)}if(Ie.length){let Ae=G.tags||null;if(Se==="LineString"&&ee.lineMetrics){Ae={};for(const He in G.tags)Ae[He]=G.tags[He];Ae.mapbox_clip_start=ue.start/ue.size,Ae.mapbox_clip_end=ue.end/ue.size}const _e={geometry:Ie,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:Ae};G.id!==null&&(_e.id=G.id),he.features.push(_e)}}function Kt(he,G,W,ee,ue,Se){const Ie=ee*ee;if(ee>0&&G.size<(ue?Ie:ee))return void(W.numPoints+=G.length/3);const Ae=[];for(let _e=0;_e<G.length;_e+=3)(ee===0||G[_e+2]>Ie)&&(W.numSimplified++,Ae.push(G[_e],G[_e+1])),W.numPoints++;ue&&function(_e,He){let Je=0;for(let $e=0,ut=_e.length,Rt=ut-2;$e<ut;Rt=$e,$e+=2)Je+=(_e[$e]-_e[Rt])*(_e[$e+1]+_e[Rt+1]);if(Je>0===He)for(let $e=0,ut=_e.length;$e<ut/2;$e+=2){const Rt=_e[$e],Ot=_e[$e+1];_e[$e]=_e[ut-2-$e],_e[$e+1]=_e[ut-1-$e],_e[ut-2-$e]=Rt,_e[ut-1-$e]=Ot}}(Ae,Se),he.push(Ae)}const jt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Kr{constructor(G,W){const ee=(W=this.options=function(Se,Ie){for(const Ae in Ie)Se[Ae]=Ie[Ae];return Se}(Object.create(jt),W)).debug;if(ee&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let ue=function(Se,Ie){const Ae=[];if(Se.type==="FeatureCollection")for(let _e=0;_e<Se.features.length;_e++)V(Ae,Se.features[_e],Ie,_e);else V(Ae,Se.type==="Feature"?Se:{geometry:Se},Ie);return Ae}(G,W);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ue=function(Se,Ie){const Ae=Ie.buffer/Ie.extent;let _e=Se;const He=Ze(Se,1,-1-Ae,Ae,0,-1,2,Ie),Je=Ze(Se,1,1-Ae,2+Ae,0,-1,2,Ie);return(He||Je)&&(_e=Ze(Se,1,-Ae,1+Ae,0,-1,2,Ie)||[],He&&(_e=qe(He,1).concat(_e)),Je&&(_e=_e.concat(qe(Je,-1)))),_e}(ue,W),ue.length&&this.splitTile(ue,0,0,0),ee&&(ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(G,W,ee,ue,Se,Ie,Ae){const _e=[G,W,ee,ue],He=this.options,Je=He.debug;for(;_e.length;){ue=_e.pop(),ee=_e.pop(),W=_e.pop(),G=_e.pop();const $e=1<<W,ut=mi(W,ee,ue);let Rt=this.tiles[ut];if(!Rt&&(Je>1&&console.time("creation"),Rt=this.tiles[ut]=pi(G,W,ee,ue,He),this.tileCoords.push({z:W,x:ee,y:ue}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,ee,ue,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));const Dn=`z${W}`;this.stats[Dn]=(this.stats[Dn]||0)+1,this.total++}if(Rt.source=G,Se==null){if(W===He.indexMaxZoom||Rt.numPoints<=He.indexMaxPoints)continue}else{if(W===He.maxZoom||W===Se)continue;if(Se!=null){const Dn=Se-W;if(ee!==Ie>>Dn||ue!==Ae>>Dn)continue}}if(Rt.source=null,G.length===0)continue;Je>1&&console.time("clipping");const Ot=.5*He.buffer/He.extent,mr=.5-Ot,Qt=.5+Ot,gr=1+Ot;let or=null,Tn=null,rn=null,rr=null,Mr=Ze(G,$e,ee-Ot,ee+Qt,0,Rt.minX,Rt.maxX,He),Yr=Ze(G,$e,ee+mr,ee+gr,0,Rt.minX,Rt.maxX,He);G=null,Mr&&(or=Ze(Mr,$e,ue-Ot,ue+Qt,1,Rt.minY,Rt.maxY,He),Tn=Ze(Mr,$e,ue+mr,ue+gr,1,Rt.minY,Rt.maxY,He),Mr=null),Yr&&(rn=Ze(Yr,$e,ue-Ot,ue+Qt,1,Rt.minY,Rt.maxY,He),rr=Ze(Yr,$e,ue+mr,ue+gr,1,Rt.minY,Rt.maxY,He),Yr=null),Je>1&&console.timeEnd("clipping"),_e.push(or||[],W+1,2*ee,2*ue),_e.push(Tn||[],W+1,2*ee,2*ue+1),_e.push(rn||[],W+1,2*ee+1,2*ue),_e.push(rr||[],W+1,2*ee+1,2*ue+1)}}getTile(G,W,ee){G=+G,W=+W,ee=+ee;const ue=this.options,{extent:Se,debug:Ie}=ue;if(G<0||G>24)return null;const Ae=1<<G,_e=mi(G,W=W+Ae&Ae-1,ee);if(this.tiles[_e])return _n(this.tiles[_e],Se);Ie>1&&console.log("drilling down to z%d-%d-%d",G,W,ee);let He,Je=G,$e=W,ut=ee;for(;!He&&Je>0;)Je--,$e>>=1,ut>>=1,He=this.tiles[mi(Je,$e,ut)];return He&&He.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",Je,$e,ut),console.time("drilling down")),this.splitTile(He.source,Je,$e,ut,G,W,ee),Ie>1&&console.timeEnd("drilling down"),this.tiles[_e]?_n(this.tiles[_e],Se):null):null}}function mi(he,G,W){return 32*((1<<he)*W+G)+he}function Xt(he,G){return G?he.properties[G]:he.id}function Yi(he,G){if(he==null)return!0;if(he.type==="Feature")return Xt(he,G)!=null;if(he.type==="FeatureCollection"){const W=new Set;for(const ee of he.features){const ue=Xt(ee,G);if(ue==null||W.has(ue))return!1;W.add(ue)}return!0}return!1}function fs(he,G){const W=new Map;if(he!=null)if(he.type==="Feature")W.set(Xt(he,G),he);else for(const ee of he.features)W.set(Xt(ee,G),ee);return W}class ps extends A{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(G,W){return g._(this,void 0,void 0,function*(){const ee=G.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ue=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!ue)return null;const Se=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.X,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(_e){this._feature=_e,this.extent=g.X,this.type=_e.type,this.properties=_e.tags,"id"in _e&&!isNaN(_e.id)&&(this.id=parseInt(_e.id,10))}loadGeometry(){if(this._feature.type===1){const _e=[];for(const He of this._feature.geometry)_e.push([new g.P(He[0],He[1])]);return _e}{const _e=[];for(const He of this._feature.geometry){const Je=[];for(const $e of He)Je.push(new g.P($e[0],$e[1]));_e.push(Je)}return _e}}toGeoJSON(_e,He,Je){return te.call(this,_e,He,Je)}}(this._features[Ae])}}(ue.features);let Ie=ye(Se);return Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),{vectorTile:Se,rawData:Ie.buffer}})}loadData(G){return g._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();const ee=!!(G&&G.request&&G.request.collectResourceTiming)&&new g.bv(G.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(G,this._pendingRequest),this._geoJSONIndex=G.cluster?new nt(function({superclusterOptions:Ie,clusterProperties:Ae}){if(!Ae||!Ie)return Ie;const _e={},He={},Je={accumulated:null,zoom:0},$e={properties:null},ut=Object.keys(Ae);for(const Rt of ut){const[Ot,mr]=Ae[Rt],Qt=g.bC(mr),gr=g.bC(typeof Ot=="string"?[Ot,["accumulated"],["get",Rt]]:Ot);_e[Rt]=Qt.value,He[Rt]=gr.value}return Ie.map=Rt=>{$e.properties=Rt;const Ot={};for(const mr of ut)Ot[mr]=_e[mr].evaluate(Je,$e);return Ot},Ie.reduce=(Rt,Ot)=>{$e.properties=Ot;for(const mr of ut)Je.accumulated=Rt[mr],Rt[mr]=He[mr].evaluate(Je,$e)},Ie}(G)).load((yield this._pendingData).features):(ue=yield this._pendingData,new Kr(ue,G.geojsonVtOptions)),this.loaded={};const Se={};if(ee){const Ie=ee.finish();Ie&&(Se.resourceTiming={},Se.resourceTiming[G.source]=JSON.parse(JSON.stringify(Ie)))}return Se}catch(Se){if(delete this._pendingRequest,g.bB(Se))return{abandoned:!0};throw Se}var ue})}getData(){return g._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(G){const W=this.loaded;return W&&W[G.uid]?super.reloadTile(G):this.loadTile(G)}loadAndProcessGeoJSON(G,W){return g._(this,void 0,void 0,function*(){let ee=yield this.loadGeoJSON(G,W);if(delete this._pendingRequest,typeof ee!="object")throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(U(ee,!0),G.filter){const ue=g.bC(G.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(Ie=>`${Ie.key}: ${Ie.message}`).join(", "));ee={type:"FeatureCollection",features:ee.features.filter(Ie=>ue.value.evaluate({zoom:0},Ie))}}return ee})}loadGeoJSON(G,W){return g._(this,void 0,void 0,function*(){const{promoteId:ee}=G;if(G.request){const ue=yield g.h(G.request,W);return this._dataUpdateable=Yi(ue.data,ee)?fs(ue.data,ee):void 0,ue.data}if(typeof G.data=="string")try{const ue=JSON.parse(G.data);return this._dataUpdateable=Yi(ue,ee)?fs(ue,ee):void 0,ue}catch{throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`)}if(!G.dataDiff)throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${G.source}`);return function(ue,Se,Ie){var Ae,_e,He,Je;if(Se.removeAll&&ue.clear(),Se.remove)for(const $e of Se.remove)ue.delete($e);if(Se.add)for(const $e of Se.add){const ut=Xt($e,Ie);ut!=null&&ue.set(ut,$e)}if(Se.update)for(const $e of Se.update){let ut=ue.get($e.id);if(ut==null)continue;const Rt=!$e.removeAllProperties&&(((Ae=$e.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0||((_e=$e.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if(($e.newGeometry||$e.removeAllProperties||Rt)&&(ut=Object.assign({},ut),ue.set($e.id,ut),Rt&&(ut.properties=Object.assign({},ut.properties))),$e.newGeometry&&(ut.geometry=$e.newGeometry),$e.removeAllProperties)ut.properties={};else if(((He=$e.removeProperties)===null||He===void 0?void 0:He.length)>0)for(const Ot of $e.removeProperties)Object.prototype.hasOwnProperty.call(ut.properties,Ot)&&delete ut.properties[Ot];if(((Je=$e.addOrUpdateProperties)===null||Je===void 0?void 0:Je.length)>0)for(const{key:Ot,value:mr}of $e.addOrUpdateProperties)ut.properties[Ot]=mr}}(this._dataUpdateable,G.dataDiff,ee),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(G){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(G){return this._geoJSONIndex.getClusterExpansionZoom(G.clusterId)}getClusterChildren(G){return this._geoJSONIndex.getChildren(G.clusterId)}getClusterLeaves(G){return this._geoJSONIndex.getLeaves(G.clusterId,G.limit,G.offset)}}class Hn{constructor(G){this.self=G,this.actor=new g.F(G),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,ee)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=ee},this.self.addProtocol=g.bi,this.self.removeProtocol=g.bj,this.self.registerRTLTextPlugin=W=>{if(g.bD.isParsed())throw new Error("RTL text plugin already registered.");g.bD.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,ee)=>this._getDEMWorkerSource(W,ee.source).loadTile(ee)),this.actor.registerMessageHandler("RDT",(W,ee)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,ee.source).removeTile(ee)})),this.actor.registerMessageHandler("GCEZ",(W,ee)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(W,ee.type,ee.source).getClusterExpansionZoom(ee)})),this.actor.registerMessageHandler("GCC",(W,ee)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(W,ee.type,ee.source).getClusterChildren(ee)})),this.actor.registerMessageHandler("GCL",(W,ee)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(W,ee.type,ee.source).getClusterLeaves(ee)})),this.actor.registerMessageHandler("LD",(W,ee)=>this._getWorkerSource(W,ee.type,ee.source).loadData(ee)),this.actor.registerMessageHandler("GD",(W,ee)=>this._getWorkerSource(W,ee.type,ee.source).getData()),this.actor.registerMessageHandler("LT",(W,ee)=>this._getWorkerSource(W,ee.type,ee.source).loadTile(ee)),this.actor.registerMessageHandler("RT",(W,ee)=>this._getWorkerSource(W,ee.type,ee.source).reloadTile(ee)),this.actor.registerMessageHandler("AT",(W,ee)=>this._getWorkerSource(W,ee.type,ee.source).abortTile(ee)),this.actor.registerMessageHandler("RMT",(W,ee)=>this._getWorkerSource(W,ee.type,ee.source).removeTile(ee)),this.actor.registerMessageHandler("RS",(W,ee)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][ee.type]||!this.workerSources[W][ee.type][ee.source])return;const ue=this.workerSources[W][ee.type][ee.source];delete this.workerSources[W][ee.type][ee.source],ue.removeSource!==void 0&&ue.removeSource(ee)})),this.actor.registerMessageHandler("RM",W=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,ee)=>g._(this,void 0,void 0,function*(){this.referrer=ee})),this.actor.registerMessageHandler("SRPS",(W,ee)=>this._syncRTLPluginState(W,ee)),this.actor.registerMessageHandler("IS",(W,ee)=>g._(this,void 0,void 0,function*(){this.self.importScripts(ee)})),this.actor.registerMessageHandler("SI",(W,ee)=>this._setImages(W,ee)),this.actor.registerMessageHandler("UL",(W,ee)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(ee.layers,ee.removedIds)})),this.actor.registerMessageHandler("SL",(W,ee)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(ee)}))}_setImages(G,W){return g._(this,void 0,void 0,function*(){this.availableImages[G]=W;for(const ee in this.workerSources[G]){const ue=this.workerSources[G][ee];for(const Se in ue)ue[Se].availableImages=W}})}_syncRTLPluginState(G,W){return g._(this,void 0,void 0,function*(){if(g.bD.isParsed())return g.bD.getState();if(W.pluginStatus!=="loading")return g.bD.setState(W),W;const ee=W.pluginURL;if(this.self.importScripts(ee),g.bD.isParsed()){const ue={pluginStatus:"loaded",pluginURL:ee};return g.bD.setState(ue),ue}throw g.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ee}`)})}_getAvailableImages(G){let W=this.availableImages[G];return W||(W=[]),W}_getLayerIndex(G){let W=this.layerIndexes[G];return W||(W=this.layerIndexes[G]=new c),W}_getWorkerSource(G,W,ee){if(this.workerSources[G]||(this.workerSources[G]={}),this.workerSources[G][W]||(this.workerSources[G][W]={}),!this.workerSources[G][W][ee]){const ue={sendAsync:(Se,Ie)=>(Se.targetMapId=G,this.actor.sendAsync(Se,Ie))};switch(W){case"vector":this.workerSources[G][W][ee]=new A(ue,this._getLayerIndex(G),this._getAvailableImages(G));break;case"geojson":this.workerSources[G][W][ee]=new ps(ue,this._getLayerIndex(G),this._getAvailableImages(G));break;default:this.workerSources[G][W][ee]=new this.externalWorkerSourceTypes[W](ue,this._getLayerIndex(G),this._getAvailableImages(G))}}return this.workerSources[G][W][ee]}_getDEMWorkerSource(G,W){return this.demWorkerSources[G]||(this.demWorkerSources[G]={}),this.demWorkerSources[G][W]||(this.demWorkerSources[G][W]=new M),this.demWorkerSources[G][W]}}return g.i(self)&&(self.worker=new Hn(self)),Hn}),h("index",["exports","./shared"],function(g,c){var T="4.7.1";let P,R;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,u)=>{const p=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),u(c.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,u.drawImage(v,0,0,v.width,v.height),u},resolveURL:v=>(P||(P=document.createElement("a")),P.href=v,P.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(R==null&&(R=matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}};class M{static testProp(r){if(!M.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in M.docStyle)return r[u];return r[0]}static create(r,u,p){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),p&&p.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(r,u){r.style[M.transformProp]=u}static addEventListener(r,u,p,m={}){r.addEventListener(u,p,"passive"in m?m:m.capture)}static removeEventListener(r,u,p,m={}){r.removeEventListener(u,p,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",M.suppressClickInternal,!0)},0)}static getScale(r){const u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}static getPoint(r,u,p){const m=u.boundingClientRect;return new c.P((p.clientX-m.left)/u.x-r.clientLeft,(p.clientY-m.top)/u.y-r.clientTop)}static mousePos(r,u){const p=M.getScale(r);return M.getPoint(r,p,u)}static touchPos(r,u){const p=[],m=M.getScale(r);for(let _=0;_<u.length;_++)p.push(M.getPoint(r,m,u[_]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const N={supported:!1,testSupport:function(v){!te&&U&&(O?$(v):Y=v)}};let Y,U,te=!1,O=!1;function $(v){const r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,U),v.isContextLost())return;N.supported=!0}catch{}v.deleteTexture(r),te=!0}var q;typeof document<"u"&&(U=document.createElement("img"),U.onload=()=>{Y&&$(Y),Y=null,O=!0},U.onerror=()=>{te=!0,Y=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,u,p,m;v.resetRequestQueue=()=>{r=[],u=0,p=0,m={}},v.addThrottleControl=C=>{const z=p++;return m[z]=C,z},v.removeThrottleControl=C=>{delete m[C],S()},v.getImage=(C,z,F=!0)=>new Promise((B,X)=>{N.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),c.e(C,{type:"image"}),r.push({abortController:z,requestParameters:C,supportImageRefresh:F,state:"queued",onError:Q=>{X(Q)},onSuccess:Q=>{B(Q)}}),S()});const _=C=>c._(this,void 0,void 0,function*(){C.state="running";const{requestParameters:z,supportImageRefresh:F,onError:B,onSuccess:X,abortController:Q}=C,re=F===!1&&!c.i(self)&&!c.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((me,we)=>me&&we==="accept",!0));u++;const ce=re?E(z,Q):c.m(z,Q);try{const me=yield ce;delete C.abortController,C.state="completed",me.data instanceof HTMLImageElement||c.b(me.data)?X(me):me.data&&X({data:yield(pe=me.data,typeof createImageBitmap=="function"?c.d(pe):c.f(pe)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete C.abortController,B(me)}finally{u--,S()}var pe}),S=()=>{const C=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=u;z<C&&r.length>0;z++){const F=r.shift();F.abortController.signal.aborted?z--:_(F)}},E=(C,z)=>new Promise((F,B)=>{const X=new Image,Q=C.url,re=C.credentials;re&&re==="include"?X.crossOrigin="use-credentials":(re&&re==="same-origin"||!c.s(Q))&&(X.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{X.src="",B(c.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,F({data:X})},X.onerror=()=>{X.onerror=X.onload=null,z.signal.aborted||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=Q})}(q||(q={})),q.resetRequestQueue();class ne{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function oe(v){var r=new c.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var ke,ge=function(v,r,u){return v[0]=r[0]-u[0],v[1]=r[1]-u[1],v[2]=r[2]-u[2],v};ke=new c.A(3),c.A!=Float32Array&&(ke[0]=0,ke[1]=0,ke[2]=0);var Fe=function(v){var r=v[0],u=v[1];return r*r+u*u};function Oe(v){const r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){const u=[];for(const{id:p,url:m}of v){const _=`${p}${m}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:p,url:m}))}}return r}function Ge(v,r,u){const p=v.split("?");return p[0]+=`${r}${u}`,p.join("?")}(function(){var v=new c.A(2);c.A!=Float32Array&&(v[0]=0,v[1]=0)})();class it{constructor(r,u,p,m){this.context=r,this.format=p,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,p){const{width:m,height:_}=r,S=!(this.size&&this.size[0]===m&&this.size[1]===_||p),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(u&&u.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||c.b(r)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,r):C.texImage2D(C.TEXTURE_2D,0,this.format,m,_,0,this.format,C.UNSIGNED_BYTE,r.data);else{const{x:z,y:F}=p||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||c.b(r)?C.texSubImage2D(C.TEXTURE_2D,0,z,F,C.RGBA,C.UNSIGNED_BYTE,r):C.texSubImage2D(C.TEXTURE_2D,0,z,F,m,_,C.RGBA,C.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(r,u,p){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class je extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let p=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new c.j(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new c.j(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,u){if(!r)return!0;let p=0;for(const m of r){if(m[0]<p||m[1]<m[0]||u<m[1])return!1;p=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const p=u.spriteData,m=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,p=!0){const m=this.getImage(r);if(p&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((u,p)=>{let m=!0;if(!this.isLoaded())for(const _ of r)this.images[_]||(m=!1);this.isLoaded()||m?u(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:u})})}_getImagesForIds(r){const u={};for(const p of r){let m=this.getImage(p);m||(this.fire(new c.k("styleimagemissing",{id:p})),m=this.getImage(p)),m?u[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:c.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],p=this.getImage(r);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new c.I(m,p);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new it(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:p}=c.p(r),m=this.atlasImage;m.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:S}=this.patterns[_],E=S.x+1,C=S.y+1,z=this.getImage(_).data,F=z.width,B=z.height;c.R.copy(z,m,{x:0,y:0},{x:E,y:C},{width:F,height:B}),c.R.copy(z,m,{x:0,y:B-1},{x:E,y:C-1},{width:F,height:1}),c.R.copy(z,m,{x:0,y:0},{x:E,y:C+B},{width:F,height:1}),c.R.copy(z,m,{x:F-1,y:0},{x:E-1,y:C},{width:1,height:B}),c.R.copy(z,m,{x:0,y:0},{x:E+F,y:C},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||c.w(`Image with ID: "${u}" was not found`),ve(p)&&this.updateImage(u,p)}}}const H=1e20;function Re(v,r,u,p,m,_,S,E,C){for(let z=r;z<r+p;z++)vt(v,u*_+z,_,m,S,E,C);for(let z=u;z<u+m;z++)vt(v,z*_+r,1,p,S,E,C)}function vt(v,r,u,p,m,_,S){_[0]=0,S[0]=-H,S[1]=H,m[0]=v[r];for(let E=1,C=0,z=0;E<p;E++){m[E]=v[r+E*u];const F=E*E;do{const B=_[C];z=(m[E]-m[B]+F-B*B)/(E-B)/2}while(z<=S[C]&&--C>-1);C++,_[C]=E,S[C]=z,S[C+1]=H}for(let E=0,C=0;E<p;E++){for(;S[C+1]<E;)C++;const z=_[C],F=E-z;v[r+E*u]=m[z]+F*F}}class ye{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return c._(this,void 0,void 0,function*(){const u=[];for(const _ in r)for(const S of r[_])u.push(this._getAndCacheGlyphsPromise(_,S));const p=yield Promise.all(u),m={};for(const{stack:_,id:S,glyph:E}of p)m[_]||(m[_]={}),m[_][S]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return m})}_getAndCacheGlyphsPromise(r,u){return c._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[u];if(m!==void 0)return{stack:r,id:u,glyph:m};if(m=this._tinySDF(p,r,u),m)return p.glyphs[u]=m,{stack:r,id:u,glyph:m};const _=Math.floor(u/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[_])return{stack:r,id:u,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[_]){const E=ye.loadGlyphRange(r,_,this.url,this.requestManager);p.requests[_]=E}const S=yield p.requests[_];for(const E in S)this._doesCharSupportLocalGlyph(+E)||(p.glyphs[+E]=S[+E]);return p.ranges[_]=!0,{stack:r,id:u,glyph:S[u]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,u,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let _=r.tinySDF;if(!_){let E="400";/bold/i.test(u)?E="900":/medium/i.test(u)?E="500":/light/i.test(u)&&(E="200"),_=r.tinySDF=new ye.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:E})}const S=_.draw(String.fromCharCode(p));return{id:p,bitmap:new c.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}ye.loadGlyphRange=function(v,r,u,p){return c._(this,void 0,void 0,function*(){const m=256*r,_=m+255,S=p.transformRequest(u.replace("{fontstack}",v).replace("{range}",`${m}-${_}`),"Glyphs"),E=yield c.l(S,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${_}`);const C={};for(const z of c.n(E.data))C[z.id]=z;return C})},ye.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:u=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:S="normal"}={}){this.buffer=r,this.cutoff=p,this.radius=u;const E=this.size=v+4*r,C=this._createCanvas(E),z=this.ctx=C.getContext("2d",{willReadFrequently:!0});z.font=`${S} ${_} ${v}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(v){const r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(v),S=Math.ceil(u),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),C=Math.min(this.size-this.buffer,S+Math.ceil(p)),z=E+2*this.buffer,F=C+2*this.buffer,B=Math.max(z*F,0),X=new Uint8ClampedArray(B),Q={data:X,width:z,height:F,glyphWidth:E,glyphHeight:C,glyphTop:S,glyphLeft:0,glyphAdvance:r};if(E===0||C===0)return Q;const{ctx:re,buffer:ce,gridInner:pe,gridOuter:me}=this;re.clearRect(ce,ce,E,C),re.fillText(v,ce,ce+S);const we=re.getImageData(ce,ce,E,C);me.fill(H,0,B),pe.fill(0,0,B);for(let ae=0;ae<C;ae++)for(let Ce=0;Ce<E;Ce++){const Pe=we.data[4*(ae*E+Ce)+3]/255;if(Pe===0)continue;const ze=(ae+ce)*z+Ce+ce;if(Pe===1)me[ze]=0,pe[ze]=H;else{const Xe=.5-Pe;me[ze]=Xe>0?Xe*Xe:0,pe[ze]=Xe<0?Xe*Xe:0}}Re(me,0,0,z,F,z,this.f,this.v,this.z),Re(pe,ce,ce,E,C,z,this.f,this.v,this.z);for(let ae=0;ae<B;ae++){const Ce=Math.sqrt(me[ae])-Math.sqrt(pe[ae]);X[ae]=Math.round(255-255*(Ce/this.radius+this.cutoff))}return Q}};class Be{constructor(){this.specification=c.v.light.position}possiblyEvaluate(r,u){return c.x(r.expression.evaluate(u))}interpolate(r,u,p){return{x:c.y.number(r.x,u.x,p),y:c.y.number(r.y,u.y,p),z:c.y.number(r.z,u.z,p)}}}let Le;class Ke extends c.E{constructor(r){super(),Le=Le||new c.q({anchor:new c.D(c.v.light.anchor),position:new Be,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Le),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(c.r,r,u))for(const p in r){const m=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p){return(!p||p.validate!==!1)&&c.t(this,r.call(c.u,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const xe=new c.q({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class Ee extends c.E{constructor(r){super(),this._transitionable=new c.T(xe),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.z(0))}setSky(r,u={}){if(!this._validate(c.B,r,u)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const m=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,p={}){return(p==null?void 0:p.validate)!==!1&&c.t(this,r.call(c.u,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class mt{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const p=r.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,u)),this.dashEntry[p]}getDashRanges(r,u,p){const m=[];let _=r.length%2==1?-r[r.length-1]*p:0,S=r[0]*p,E=!0;m.push({left:_,right:S,isDash:E,zeroLength:r[0]===0});let C=r[0];for(let z=1;z<r.length;z++){E=!E;const F=r[z];_=C*p,C+=F,S=C*p,m.push({left:_,right:S,isDash:E,zeroLength:F===0})}return m}addRoundDash(r,u,p){const m=u/2;for(let _=-p;_<=p;_++){const S=this.width*(this.nextRow+p+_);let E=0,C=r[E];for(let z=0;z<this.width;z++){z/C.right>1&&(C=r[++E]);const F=Math.abs(z-C.left),B=Math.abs(z-C.right),X=Math.min(F,B);let Q;const re=_/p*(m+1);if(C.isDash){const ce=m-Math.abs(re);Q=Math.sqrt(X*X+ce*ce)}else Q=m-Math.sqrt(X*X+re*re);this.data[S+z]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(r){for(let E=r.length-1;E>=0;--E){const C=r[E],z=r[E+1];C.zeroLength?r.splice(E,1):z&&z.isDash===C.isDash&&(z.left=C.left,r.splice(E,1))}const u=r[0],p=r[r.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,S=r[_];for(let E=0;E<this.width;E++){E/S.right>1&&(S=r[++_]);const C=Math.abs(E-S.left),z=Math.abs(E-S.right),F=Math.min(C,z);this.data[m+E]=Math.max(0,Math.min(255,(S.isDash?F:-F)+128))}}addDash(r,u){const p=u?7:0,m=2*p+1;if(this.nextRow+m>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let E=0;E<r.length;E++)_+=r[E];if(_!==0){const E=this.width/_,C=this.getDashRanges(r,this.width,E);u?this.addRoundDash(C,E,p):this.addRegularDash(C)}const S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=m,this.dirty=!0,S}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const nt="maplibre_preloaded_worker_pool";class rt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<rt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nt]}numActive(){return Object.keys(this.active).length}}const Jt=Math.floor(A.hardwareConcurrency/2);let er,Vt;function Yt(){return er||(er=new rt),er}rt.workerCount=c.C(globalThis)?Math.max(Math.min(Jt,3),1):1;class _r{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let m=0;m<p.length;m++){const _=new c.F(p[m],u);_.name=`Worker ${m}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:r,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,u){for(const p of this.actors)p.registerMessageHandler(r,u)}}function fr(){return Vt||(Vt=new _r(Yt(),c.G),Vt.registerMessageHandler("GR",(v,r,u)=>c.m(r,u))),Vt}function br(v,r){const u=c.H();return c.J(u,u,[1,1,0]),c.K(u,u,[.5*v.width,.5*v.height,1]),c.L(u,u,v.calculatePosMatrix(r.toUnwrapped()))}function Xr(v,r,u,p,m,_){const S=function(B,X,Q){if(B)for(const re of B){const ce=X[re];if(ce&&ce.source===Q&&ce.type==="fill-extrusion")return!0}else for(const re in X){const ce=X[re];if(ce.source===Q&&ce.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,v.id),E=_.maxPitchScaleFactor(),C=v.tilesIn(p,E,S);C.sort(V);const z=[];for(const B of C)z.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(r,u,v._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,m,_,E,br(v.transform,B.tileID))});const F=function(B){const X={},Q={};for(const re of B){const ce=re.queryResults,pe=re.wrappedTileID,me=Q[pe]=Q[pe]||{};for(const we in ce){const ae=ce[we],Ce=me[we]=me[we]||{},Pe=X[we]=X[we]||[];for(const ze of ae)Ce[ze.featureIndex]||(Ce[ze.featureIndex]=!0,Pe.push(ze))}}return X}(z);for(const B in F)F[B].forEach(X=>{const Q=X.feature,re=v.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=re});return F}function V(v,r){const u=v.tileID,p=r.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function Ue(v,r,u){return c._(this,void 0,void 0,function*(){let p=v;if(v.url?p=(yield c.h(r.transformRequest(v.url,"Source"),u)).data:yield A.frameAsync(u),!p)return null;const m=c.M(c.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(_=>_.id)),m})}class ie{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof c.N?new c.N(r.lng,r.lat):c.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof c.N?new c.N(r.lng,r.lat):c.N.convert(r),this}extend(r){const u=this._sw,p=this._ne;let m,_;if(r instanceof c.N)m=r,_=r;else{if(!(r instanceof ie))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ie.convert(r)):this.extend(c.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(c.N.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return u||p?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new c.N(m.lng,m.lat),this._ne=new c.N(_.lng,_.lat)),this}getCenter(){return new c.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.N(this.getWest(),this.getNorth())}getSouthEast(){return new c.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:p}=c.N.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(r){return r instanceof ie?r:r&&new ie(r)}static fromLngLat(r,u=0){const p=360*u/40075017,m=p/Math.cos(Math.PI/180*r.lat);return new ie(new c.N(r.lng-m,r.lat-p),new c.N(r.lng+m,r.lat+p))}adjustAntiMeridian(){const r=new c.N(this._sw.lng,this._sw.lat),u=new c.N(this._ne.lng,this._ne.lat);return new ie(r,r.lng>u.lng?new c.N(u.lng+360,u.lat):u)}}class de{constructor(r,u,p){this.bounds=ie.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),p=Math.floor(c.O(this.bounds.getWest())*u),m=Math.floor(c.Q(this.bounds.getNorth())*u),_=Math.ceil(c.O(this.bounds.getEast())*u),S=Math.ceil(c.Q(this.bounds.getSouth())*u);return r.x>=p&&r.x<_&&r.y>=m&&r.y<S}}class se extends c.E{constructor(r,u,p,m){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.M(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ue(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(c.e(this,r),r.bounds&&(this.tileBounds=new de(r.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new c.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((_,S)=>{r.reloadPromise={resolve:_,reject:S}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const _=yield r.actor.sendAsync({type:m,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,_)}catch(_){if(delete r.abortController,r.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,u){if(u&&u.resourceTiming&&(r.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&r.setExpiryData(u),r.loadVectorData(u,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Te extends c.E{constructor(r,u,p,m){super(),this.id=r,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.M(u,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ue(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(c.e(this,r),r.bounds&&(this.tileBounds=new de(r.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new c.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return c.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield q.getImage(this.map._requestManager.transformRequest(u,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,_=m.gl,S=p.data;r.texture=this.map.painter.getTileTexture(S.width),r.texture?r.texture.update(S,{useMipmap:!0}):(r.texture=new it(m,S,_.RGBA,{useMipmap:!0}),r.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Ze extends Te{constructor(r,u,p,m){super(r,u,p,m),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield q.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const _=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const S=c.b(_)&&c.U()?_:yield this.readImageNow(_),E={type:this.type,uid:r.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const C=yield r.actor.sendAsync({type:"LDT",data:E});r.dem=C,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.V()){const u=r.width+2,p=r.height+2;try{return new c.R({width:u,height:p},yield c.W(r,-1,-1,u,p))}catch{}}return A.getImageData(r,1)})}_getNeighboringTiles(r){const u=r.canonical,p=Math.pow(2,u.z),m=(u.x-1+p)%p,_=u.x===0?r.wrap-1:r.wrap,S=(u.x+1+p)%p,E=u.x+1===p?r.wrap+1:r.wrap,C={};return C[new c.S(r.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},C[new c.S(r.overscaledZ,E,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(C[new c.S(r.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},C[new c.S(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},C[new c.S(r.overscaledZ,E,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<p&&(C[new c.S(r.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},C[new c.S(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},C[new c.S(r.overscaledZ,E,u.z,S,u.y+1).key]={backfilled:!1}),C}unloadTile(r){return c._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class tt extends c.E{constructor(r,u,p,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.X/this.tileSize;u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.X,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.X,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return c._(this,void 0,void 0,function*(){const r=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:u,offset:p}})}_updateWorkerData(r){return c._(this,void 0,void 0,function*(){const u=c.e({type:this.type},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&c.e(_,{resourceTiming:m}),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(r){return c._(this,void 0,void 0,function*(){const u=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:u,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,u==="RT")})}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ne=c.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ot extends c.E{constructor(r,u,p,m){super(),this.id=r,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(r){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,r&&(this.coordinates=r),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new c.j(u))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(c.Z.fromLngLat);this.tileID=function(m){let _=1/0,S=1/0,E=-1/0,C=-1/0;for(const X of m)_=Math.min(_,X.x),S=Math.min(S,X.y),E=Math.max(E,X.x),C=Math.max(C,X.y);const z=Math.max(E-_,C-S),F=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,F);return new c.a1(F,Math.floor((_+E)/2*B),Math.floor((S+C)/2*B))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new c.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,c.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,c.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,c.X,c.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new it(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const _=this.tiles[m];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class kt extends ot{constructor(r,u,p,m){super(r,u,p,m),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.a3(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.j(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new c.j(new c.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new it(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const _=this.tiles[m];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class at extends ot{constructor(r,u,p,m){super(r,u,p,m),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(S=>typeof S!="number"))||this.fire(new c.j(new c.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a2(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new it(u,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,m=!0)}m&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Bt={},Tr=v=>{switch(v){case"geojson":return tt;case"image":return ot;case"raster":return Te;case"raster-dem":return Ze;case"vector":return se;case"video":return kt;case"canvas":return at}return Bt[v]},qe="RTLPluginLoaded";class tn extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=fr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return c._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(qe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let _n=null;function vn(){return _n||(_n=new tn),_n}class pi{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=c.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const S={};if(!_)return S;for(const E of m){const C=E.layerIds.map(z=>_.getLayer(z)).filter(Boolean);if(C.length!==0){E.layers=C,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(z=>C.filter(F=>F.id===z)[0]));for(const z of C)S[z.id]=E}}return S}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof c.a6){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof c.a6&&_.hasRTLText){this.hasRTLText=!0,vn().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new c.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new it(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new it(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,p,m,_,S,E,C,z,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:S,tileSize:this.tileSize,pixelPosMatrix:F,transform:C,params:E,queryPadding:this.queryPadding*z},r,u,p):{}}querySourceFeatures(r,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",S=m._geojsonTileLayer||m[_];if(!S)return;const E=c.a7(u&&u.filter),{z:C,x:z,y:F}=this.tileID.canonical,B={z:C,x:z,y:F};for(let X=0;X<S.length;X++){const Q=S.feature(X);if(E.needGeometry){const pe=c.a8(Q,!0);if(!E.filter(new c.z(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!E.filter(new c.z(this.tileID.overscaledZ),Q))continue;const re=p.getId(Q,_),ce=new c.a9(Q,C,z,F,re);ce.tile=B,r.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const p=c.aa(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],S=_.layers[0].sourceLayer||"_geojsonTileLayer",E=p[S],C=r[S];if(!E||!C||Object.keys(C).length===0)continue;_.update(C,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=u&&u.style&&u.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=A.now()+r}setDependencies(r,u){const p={};for(const m of u)p[m]=!0;this.dependencies[r]=p}hasDependency(r,u){for(const p of r){const m=this.dependencies[p];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class Qe{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,p){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},p)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const p=r.wrapped().key,m=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][m];return this.data[p].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const p in this.data)for(const m of this.data[p])r(m.value)||u.push(m);for(const p of u)this.remove(p.value.tileID,p)}}class Kt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,p){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},c.e(this.stateChanges[r][m],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])p[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in p)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,u,p){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][p]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(p in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][p]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const p=String(u),m=c.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const S in _)delete m[S]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const S in this.stateChanges[m])this.state[m][S]||(this.state[m][S]={}),c.e(this.state[m][S],this.stateChanges[m][S]),_[S]=this.state[m][S];p[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const S in this.state[m])_[S]={},this.state[m][S]={};else for(const S in this.deletedStates[m]){if(this.deletedStates[m][S]===null)this.state[m][S]={};else for(const E of Object.keys(this.deletedStates[m][S]))delete this.state[m][S][E];_[S]=this.state[m][S]}p[m]=p[m]||{},c.e(p[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in r)r[m].setFeatureState(p,u)}}class jt extends c.E{constructor(r,u,p){super(),this.id=r,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,S,E)=>{const C=new(Tr(_.type))(m,_,S,E);if(C.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${C.id}`);return C})(r,u,p,this),this._tiles={},this._cache=new Qe(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Kt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u,p){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,u,p)}catch(m){r.state="errored",m.status!==404?this._source.fire(new c.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new c.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Kr).map(r=>r.key)}getRenderableIds(r){const u=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&u.push(this._tiles[p]);return r?u.sort((p,m)=>{const _=p.tileID,S=m.tileID,E=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),C=new c.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-S.overscaledZ||C.y-E.y||C.x-E.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Kr).map(p=>p.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){return c._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,r,u))})}_tileLoaded(r,u,p){r.timeAdded=A.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const S=this.getTileByID(_);p(r,S),p(S,r)}}function p(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let S=_.tileID.canonical.x-m.tileID.canonical.x;const E=_.tileID.canonical.y-m.tileID.canonical.y,C=Math.pow(2,m.tileID.canonical.z),z=_.tileID.key;S===0&&E===0||Math.abs(E)>1||(Math.abs(S)>1&&(Math.abs(S+C)===1?S+=C:Math.abs(S-C)===1&&(S-=C)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,S,E),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,p,m){for(const _ in this._tiles){let S=this._tiles[_];if(m[_]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>p)continue;let E=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const z=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[z.key],S&&S.hasData()&&(E=z)}let C=E;for(;C.overscaledZ>u;)if(C=C.scaledTo(C.overscaledZ-1),r[C.key]){m[E.key]=E;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const p=this._loadedParentTiles[r.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=r.overscaledZ-1;p>=u;p--){const m=r.scaledTo(p),_=this._getLoadedTile(m);if(_)return _}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const p={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,u,p,m,_,S){const E={},C={},z=Object.keys(r),F=A.now();for(const B of z){const X=r[B],Q=this._tiles[B];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=F)continue;const re=this.findLoadedParent(X,u),ce=this.findLoadedSibling(X),pe=re||ce||null;pe&&(this._addTile(pe.tileID),E[pe.tileID.key]=pe.tileID),C[B]=X}this._retainLoadedChildren(C,m,p,r);for(const B in E)r[B]||(this._coveredTiles[B]=!0,r[B]=E[B]);if(S){const B={},X={};for(const Q of _)this._tiles[Q.key].hasData()?B[Q.key]=Q:X[Q.key]=Q;for(const Q in X){const re=X[Q].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(B[re[0].key]=r[re[0].key]=re[0],B[re[1].key]=r[re[1].key]=re[1],B[re[2].key]=r[re[2].key]=re[2],B[re[3].key]=r[re[3].key]=re[3],delete X[Q])}for(const Q in X){const re=X[Q],ce=this.findLoadedParent(re,this._source.minzoom),pe=this.findLoadedSibling(re),me=ce||pe||null;if(me){B[me.tileID.key]=r[me.tileID.key]=me.tileID;for(const we in B)B[we].isChildOf(me.tileID)&&delete B[we]}}for(const Q in this._tiles)B[Q]||(this._coveredTiles[Q]=!0)}}update(r,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=u,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new c.S(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(p=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(F=>this._source.hasTile(F)))):p=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-jt.maxOverzooming,this._source.minzoom),S=Math.max(m+jt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const B of p)if(B.canonical.z>this._source.minzoom){const X=B.scaledTo(B.canonical.z-1);F[X.key]=X;const Q=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));F[Q.key]=Q}p=p.concat(Object.values(F))}const E=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const C=this._updateRetainedTiles(p,m);mi(this._source.type)&&this._updateCoveredAndRetainedTiles(C,_,S,m,p,u);for(const F in C)this._tiles[F].clearFadeHold();const z=c.ab(this._tiles,C);for(const F of z){const B=this._tiles[F];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){var p;const m={},_={},S=Math.max(u-jt.maxOverzooming,this._source.minzoom),E=Math.max(u+jt.maxUnderzooming,this._source.minzoom),C={};for(const z of r){const F=this._addTile(z);m[z.key]=z,F.hasData()||u<this._source.maxzoom&&(C[z.key]=z)}this._retainLoadedChildren(C,u,E,m);for(const z of r){let F=this._tiles[z.key];if(F.hasData())continue;if(u+1>this._source.maxzoom){const X=z.children(this._source.maxzoom)[0],Q=this.getTile(X);if(Q&&Q.hasData()){m[X.key]=X;continue}}else{const X=z.children(this._source.maxzoom);if(m[X[0].key]&&m[X[1].key]&&m[X[2].key]&&m[X[3].key])continue}let B=F.wasRequested();for(let X=z.overscaledZ-1;X>=S;--X){const Q=z.scaledTo(X);if(_[Q.key])break;if(_[Q.key]=!0,F=this.getTile(Q),!F&&B&&(F=this._addTile(Q)),F){const re=F.hasData();if((re||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||B)&&(m[Q.key]=Q),B=F.wasRequested(),re)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let p,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;m=_}for(const _ of u)this._loadedParentTiles[_]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const u=this._tiles[r].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const p=u;return u||(u=new pi(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,r.key,u.state)),u.uses++,this._tiles[r.key]=u,p||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=u.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(r){const u=r.sourceDataType;r.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,p){const m=[],_=this.transform;if(!_)return m;const S=p?_.getCameraQueryGeometry(r):r,E=r.map(re=>_.pointCoordinate(re,this.terrain)),C=S.map(re=>_.pointCoordinate(re,this.terrain)),z=this.getIds();let F=1/0,B=1/0,X=-1/0,Q=-1/0;for(const re of C)F=Math.min(F,re.x),B=Math.min(B,re.y),X=Math.max(X,re.x),Q=Math.max(Q,re.y);for(let re=0;re<z.length;re++){const ce=this._tiles[z[re]];if(ce.holdingForFade())continue;const pe=ce.tileID,me=Math.pow(2,_.zoom-ce.tileID.overscaledZ),we=u*ce.queryPadding*c.X/ce.tileSize/me,ae=[pe.getTilePoint(new c.Z(F,B)),pe.getTilePoint(new c.Z(X,Q))];if(ae[0].x-we<c.X&&ae[0].y-we<c.X&&ae[1].x+we>=0&&ae[1].y+we>=0){const Ce=E.map(ze=>pe.getTilePoint(ze)),Pe=C.map(ze=>pe.getTilePoint(ze));m.push({tile:ce,tileID:pe,queryGeometry:Ce,cameraQueryGeometry:Pe,scale:me})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(mi(this._source.type)){const r=A.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,p){this._state.updateState(r=r||"_geojsonTileLayer",u,p)}removeFeatureState(r,u,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,p)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,p){const m=this._tiles[r];m&&m.setDependencies(u,p)}reloadTilesForDependencies(r,u){for(const p in this._tiles)this._tiles[p].hasDependency(r,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,u))}}function Kr(v,r){const u=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||p-u||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function mi(v){return v==="raster"||v==="image"||v==="video"}jt.maxOverzooming=10,jt.maxUnderzooming=3;class Xt{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=c.ac(r,0,1);let u=1,p=this._distances[u];const m=r*this.paddedLength+this.padding;for(;p<m&&u<this._distances.length;)p=this._distances[++u];const _=u-1,S=this._distances[_],E=p-S,C=E>0?(m-S)/E:0;return this.points[_].mult(1-C).add(this.points[u].mult(C))}}function Yi(v,r){let u=!0;return v==="always"||v!=="never"&&r!=="never"||(u=!1),u}class fs{constructor(r,u,p){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(u/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,p,m,_){this._forEachCell(u,p,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,u,p,m){this._forEachCell(u-m,p-m,u+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(p),this.circles.push(m)}_insertBoxCell(r,u,p,m,_,S){this.boxCells[_].push(S)}_insertCircleCell(r,u,p,m,_,S){this.circleCells[_].push(S)}_query(r,u,p,m,_,S,E){if(p<0||r>this.width||m<0||u>this.height)return[];const C=[];if(r<=0&&u<=0&&this.width<=p&&this.height<=m){if(_)return[{key:null,x1:r,y1:u,x2:p,y2:m}];for(let z=0;z<this.boxKeys.length;z++)C.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const F=this.circles[3*z],B=this.circles[3*z+1],X=this.circles[3*z+2];C.push({key:this.circleKeys[z],x1:F-X,y1:B-X,x2:F+X,y2:B+X})}}else this._forEachCell(r,u,p,m,this._queryCell,C,{hitTest:_,overlapMode:S,seenUids:{box:{},circle:{}}},E);return C}query(r,u,p,m){return this._query(r,u,p,m,!1,null)}hitTest(r,u,p,m,_,S){return this._query(r,u,p,m,!0,_,S).length>0}hitTestCircle(r,u,p,m,_){const S=r-p,E=r+p,C=u-p,z=u+p;if(E<0||S>this.width||z<0||C>this.height)return!1;const F=[];return this._forEachCell(S,C,E,z,this._queryCellCircle,F,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:p},seenUids:{box:{},circle:{}}},_),F.length>0}_queryCell(r,u,p,m,_,S,E,C){const{seenUids:z,hitTest:F,overlapMode:B}=E,X=this.boxCells[_];if(X!==null){const re=this.bboxes;for(const ce of X)if(!z.box[ce]){z.box[ce]=!0;const pe=4*ce,me=this.boxKeys[ce];if(r<=re[pe+2]&&u<=re[pe+3]&&p>=re[pe+0]&&m>=re[pe+1]&&(!C||C(me))&&(!F||!Yi(B,me.overlapMode))&&(S.push({key:me,x1:re[pe],y1:re[pe+1],x2:re[pe+2],y2:re[pe+3]}),F))return!0}}const Q=this.circleCells[_];if(Q!==null){const re=this.circles;for(const ce of Q)if(!z.circle[ce]){z.circle[ce]=!0;const pe=3*ce,me=this.circleKeys[ce];if(this._circleAndRectCollide(re[pe],re[pe+1],re[pe+2],r,u,p,m)&&(!C||C(me))&&(!F||!Yi(B,me.overlapMode))){const we=re[pe],ae=re[pe+1],Ce=re[pe+2];if(S.push({key:me,x1:we-Ce,y1:ae-Ce,x2:we+Ce,y2:ae+Ce}),F)return!0}}}return!1}_queryCellCircle(r,u,p,m,_,S,E,C){const{circle:z,seenUids:F,overlapMode:B}=E,X=this.boxCells[_];if(X!==null){const re=this.bboxes;for(const ce of X)if(!F.box[ce]){F.box[ce]=!0;const pe=4*ce,me=this.boxKeys[ce];if(this._circleAndRectCollide(z.x,z.y,z.radius,re[pe+0],re[pe+1],re[pe+2],re[pe+3])&&(!C||C(me))&&!Yi(B,me.overlapMode))return S.push(!0),!0}}const Q=this.circleCells[_];if(Q!==null){const re=this.circles;for(const ce of Q)if(!F.circle[ce]){F.circle[ce]=!0;const pe=3*ce,me=this.circleKeys[ce];if(this._circlesCollide(re[pe],re[pe+1],re[pe+2],z.x,z.y,z.radius)&&(!C||C(me))&&!Yi(B,me.overlapMode))return S.push(!0),!0}}}_forEachCell(r,u,p,m,_,S,E,C){const z=this._convertToXCellCoord(r),F=this._convertToYCellCoord(u),B=this._convertToXCellCoord(p),X=this._convertToYCellCoord(m);for(let Q=z;Q<=B;Q++)for(let re=F;re<=X;re++)if(_.call(this,r,u,p,m,this.xCellCount*re+Q,S,E,C))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,p,m,_,S){const E=m-r,C=_-u,z=p+S;return z*z>E*E+C*C}_circleAndRectCollide(r,u,p,m,_,S,E){const C=(S-m)/2,z=Math.abs(r-(m+C));if(z>C+p)return!1;const F=(E-_)/2,B=Math.abs(u-(_+F));if(B>F+p)return!1;if(z<=C||B<=F)return!0;const X=z-C,Q=B-F;return X*X+Q*Q<=p*p}}function ps(v,r,u,p,m){const _=c.H();return r?(c.K(_,_,[1/m,1/m,1]),u||c.ad(_,_,p.angle)):c.L(_,p.labelPlaneMatrix,v),_}function Hn(v,r,u,p,m){if(r){const _=c.ae(v);return c.K(_,_,[m,m,1]),u||c.ad(_,_,-p.angle),_}return p.glCoordMatrix}function he(v,r,u,p){let m;p?(m=[v,r,p(v,r),1],c.af(m,m,u)):(m=[v,r,0,1],mr(m,m,u));const _=m[3];return{point:new c.P(m[0]/_,m[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function G(v,r){return .5+v/r*.5}function W(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function ee(v,r,u,p,m,_,S,E,C,z,F,B,X,Q,re){const ce=p?v.textSizeData:v.iconSizeData,pe=c.ag(ce,u.transform.zoom),me=[256/u.width*2+1,256/u.height*2+1],we=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;we.clear();const ae=v.lineVertexArray,Ce=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,Pe=u.transform.width/u.transform.height;let ze=!1;for(let Xe=0;Xe<Ce.length;Xe++){const st=Ce.get(Xe);if(st.hidden||st.writingMode===c.ah.vertical&&!ze){Ot(st.numGlyphs,we);continue}ze=!1;const gt=he(st.anchorX,st.anchorY,r,re);if(!W(gt.point,me)){Ot(st.numGlyphs,we);continue}const wt=G(u.transform.cameraToCenterDistance,gt.signedDistanceFromCamera),dt=c.ai(ce,pe,st),ct=S?dt/wt:dt*wt,Pt={getElevation:re,labelPlaneMatrix:m,lineVertexArray:ae,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new c.P(st.anchorX,st.anchorY),unwrappedTileID:F,width:B,height:X,translation:Q},qt=Ie(Pt,st,ct,!1,E,r,_,v.glyphOffsetArray,we,Pe,C);ze=qt.useVertical,(qt.notEnoughRoom||ze||qt.needsFlipping&&Ie(Pt,st,ct,!0,E,r,_,v.glyphOffsetArray,we,Pe,C).notEnoughRoom)&&Ot(st.numGlyphs,we)}p?v.text.dynamicLayoutVertexBuffer.updateData(we):v.icon.dynamicLayoutVertexBuffer.updateData(we)}function ue(v,r,u,p,m,_,S,E){const C=_.glyphStartIndex+_.numGlyphs,z=_.lineStartIndex,F=_.lineStartIndex+_.lineLength,B=r.getoffsetX(_.glyphStartIndex),X=r.getoffsetX(C-1),Q=ut(v*B,u,p,m,_.segment,z,F,E,S);if(!Q)return null;const re=ut(v*X,u,p,m,_.segment,z,F,E,S);return re?E.projectionCache.anyProjectionOccluded?null:{first:Q,last:re}:null}function Se(v,r,u,p){return v===c.ah.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*p?{useVertical:!0}:(v===c.ah.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function Ie(v,r,u,p,m,_,S,E,C,z,F){const B=u/24,X=r.lineOffsetX*B,Q=r.lineOffsetY*B;let re;if(r.numGlyphs>1){const ce=r.glyphStartIndex+r.numGlyphs,pe=r.lineStartIndex,me=r.lineStartIndex+r.lineLength,we=ue(B,E,X,Q,p,r,F,v);if(!we)return{notEnoughRoom:!0};const ae=he(we.first.point.x,we.first.point.y,S,v.getElevation).point,Ce=he(we.last.point.x,we.last.point.y,S,v.getElevation).point;if(m&&!p){const Pe=Se(r.writingMode,ae,Ce,z);if(Pe)return Pe}re=[we.first];for(let Pe=r.glyphStartIndex+1;Pe<ce-1;Pe++)re.push(ut(B*E.getoffsetX(Pe),X,Q,p,r.segment,pe,me,v,F));re.push(we.last)}else{if(m&&!p){const pe=he(v.tileAnchorPoint.x,v.tileAnchorPoint.y,_,v.getElevation).point,me=r.lineStartIndex+r.segment+1,we=new c.P(v.lineVertexArray.getx(me),v.lineVertexArray.gety(me)),ae=he(we.x,we.y,_,v.getElevation),Ce=ae.signedDistanceFromCamera>0?ae.point:function(ze,Xe,st,gt,wt,dt){return Ae(ze,Xe,st,1,wt,dt)}(v.tileAnchorPoint,we,pe,0,_,v),Pe=Se(r.writingMode,pe,Ce,z);if(Pe)return Pe}const ce=ut(B*E.getoffsetX(r.glyphStartIndex),X,Q,p,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,F);if(!ce||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[ce]}for(const ce of re)c.aj(C,ce.point,ce.angle);return{}}function Ae(v,r,u,p,m,_){const S=v.add(v.sub(r)._unit()),E=m!==void 0?he(S.x,S.y,m,_.getElevation).point:He(S.x,S.y,_).point,C=u.sub(E);return u.add(C._mult(p/C.mag()))}function _e(v,r,u){const p=r.projectionCache;if(p.projections[v])return p.projections[v];const m=new c.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),_=He(m.x,m.y,r);if(_.signedDistanceFromCamera>0)return p.projections[v]=_.point,p.anyProjectionOccluded=p.anyProjectionOccluded||_.isOccluded,_.point;const S=v-u.direction;return function(E,C,z,F,B){return Ae(E,C,z,F,void 0,B)}(u.distanceFromAnchor===0?r.tileAnchorPoint:new c.P(r.lineVertexArray.getx(S),r.lineVertexArray.gety(S)),m,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,r)}function He(v,r,u){const p=v+u.translation[0],m=r+u.translation[1];let _;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(_=u.projection.projectTileCoordinates(p,m,u.unwrappedTileID,u.getElevation),_.point.x=(.5*_.point.x+.5)*u.width,_.point.y=(.5*-_.point.y+.5)*u.height):(_=he(p,m,u.labelPlaneMatrix,u.getElevation),_.isOccluded=!1),_}function Je(v,r,u){return v._unit()._perp()._mult(r*u)}function $e(v,r,u,p,m,_,S,E,C){if(E.projectionCache.offsets[v])return E.projectionCache.offsets[v];const z=u.add(r);if(v+C.direction<p||v+C.direction>=m)return E.projectionCache.offsets[v]=z,z;const F=_e(v+C.direction,E,C),B=Je(F.sub(u),S,C.direction),X=u.add(B),Q=F.add(B);return E.projectionCache.offsets[v]=c.ak(_,z,X,Q)||z,E.projectionCache.offsets[v]}function ut(v,r,u,p,m,_,S,E,C){const z=p?v-r:v+r;let F=z>0?1:-1,B=0;p&&(F*=-1,B=Math.PI),F<0&&(B+=Math.PI);let X,Q=F>0?_+m:_+m+1;E.projectionCache.cachedAnchorPoint?X=E.projectionCache.cachedAnchorPoint:(X=He(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=X);let re,ce,pe=X,me=X,we=0,ae=0;const Ce=Math.abs(z),Pe=[];let ze;for(;we+ae<=Ce;){if(Q+=F,Q<_||Q>=S)return null;we+=ae,me=pe,ce=re;const gt={absOffsetX:Ce,direction:F,distanceFromAnchor:we,previousVertex:me};if(pe=_e(Q,E,gt),u===0)Pe.push(me),ze=pe.sub(me);else{let wt;const dt=pe.sub(me);wt=dt.mag()===0?Je(_e(Q+F,E,gt).sub(pe),u,F):Je(dt,u,F),ce||(ce=me.add(wt)),re=$e(Q,wt,pe,_,S,ce,u,E,gt),Pe.push(ce),ze=re.sub(ce)}ae=ze.mag()}const Xe=ze._mult((Ce-we)/ae)._add(ce||me),st=B+Math.atan2(pe.y-me.y,pe.x-me.x);return Pe.push(Xe),{point:Xe,angle:C?st:0,path:Pe}}const Rt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ot(v,r){for(let u=0;u<v;u++){const p=r.length;r.resize(p+4),r.float32.set(Rt,3*p)}}function mr(v,r,u){const p=r[0],m=r[1];return v[0]=u[0]*p+u[4]*m+u[12],v[1]=u[1]*p+u[5]*m+u[13],v[3]=u[3]*p+u[7]*m+u[15],v}const Qt=100;class gr{constructor(r,u,p=new fs(r.width+200,r.height+200,25),m=new fs(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=u,this.grid=p,this.ignoredGrid=m,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Qt,this.screenBottomBoundary=r.height+Qt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,p,m,_,S,E,C,z,F,B){const X=r.anchorPointX+C[0],Q=r.anchorPointY+C[1],re=this.projectAndGetPerspectiveRatio(m,X,Q,_,F),ce=p*re.perspectiveRatio;let pe;if(S||E)pe=this._projectCollisionBox(r,ce,m,_,S,E,C,re,F,B);else{const Pe=re.point.x+(B?B.x*ce:0),ze=re.point.y+(B?B.y*ce:0);pe={allPointsOccluded:!1,box:[Pe+r.x1*ce,ze+r.y1*ce,Pe+r.x2*ce,ze+r.y2*ce]}}const[me,we,ae,Ce]=pe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?pe.allPointsOccluded:this.mapProjection.isOccluded(X,Q,_))||re.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(me,we,ae,Ce)||u!=="always"&&this.grid.hitTest(me,we,ae,Ce,u,z)?{box:[me,we,ae,Ce],placeable:!1,offscreen:!1}:{box:[me,we,ae,Ce],placeable:!0,offscreen:this.isOffscreen(me,we,ae,Ce)}}placeCollisionCircles(r,u,p,m,_,S,E,C,z,F,B,X,Q,re,ce,pe){const me=[],we=new c.P(u.anchorX,u.anchorY),ae=this.getPerspectiveRatio(S,we.x,we.y,E,pe),Ce=(B?_/ae:_*ae)/c.ap,Pe={getElevation:pe,labelPlaneMatrix:C,lineVertexArray:p,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:we,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:ce},ze=ue(Ce,m,u.lineOffsetX*Ce,u.lineOffsetY*Ce,!1,u,!1,Pe);let Xe=!1,st=!1,gt=!0;if(ze){const wt=.5*Q*ae+re,dt=new c.P(-100,-100),ct=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Pt=new Xt,qt=ze.first,ft=ze.last;let _t=[];for(let tr=qt.path.length-1;tr>=1;tr--)_t.push(qt.path[tr]);for(let tr=1;tr<ft.path.length;tr++)_t.push(ft.path[tr]);const Gt=2.5*wt;if(z){const tr=this.projectPathToScreenSpace(_t,Pe,z);_t=tr.some(ar=>ar.signedDistanceFromCamera<=0)?[]:tr.map(ar=>ar.point)}let Hr=[];if(_t.length>0){const tr=_t[0].clone(),ar=_t[0].clone();for(let Wr=1;Wr<_t.length;Wr++)tr.x=Math.min(tr.x,_t[Wr].x),tr.y=Math.min(tr.y,_t[Wr].y),ar.x=Math.max(ar.x,_t[Wr].x),ar.y=Math.max(ar.y,_t[Wr].y);Hr=tr.x>=dt.x&&ar.x<=ct.x&&tr.y>=dt.y&&ar.y<=ct.y?[_t]:ar.x<dt.x||tr.x>ct.x||ar.y<dt.y||tr.y>ct.y?[]:c.al([_t],dt.x,dt.y,ct.x,ct.y)}for(const tr of Hr){Pt.reset(tr,.25*wt);let ar=0;ar=Pt.length<=.5*wt?1:Math.ceil(Pt.paddedLength/Gt)+1;for(let Wr=0;Wr<ar;Wr++){const Gn=Wr/Math.max(ar-1,1),xs=Pt.lerp(Gn),Gr=xs.x+Qt,_i=xs.y+Qt;me.push(Gr,_i,wt,0);const ii=Gr-wt,Zn=_i-wt,si=Gr+wt,Ws=_i+wt;if(gt=gt&&this.isOffscreen(ii,Zn,si,Ws),st=st||this.isInsideGrid(ii,Zn,si,Ws),r!=="always"&&this.grid.hitTestCircle(Gr,_i,wt,r,X)&&(Xe=!0,!F))return{circles:[],offscreen:!1,collisionDetected:Xe}}}}return{circles:!F&&Xe||!st||ae<this.perspectiveRatioCutoff?[]:me,offscreen:gt,collisionDetected:Xe}}projectPathToScreenSpace(r,u,p){return r.map(m=>he(m.x,m.y,p,u.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,m=1/0,_=-1/0,S=-1/0;for(const F of r){const B=new c.P(F.x+Qt,F.y+Qt);p=Math.min(p,B.x),m=Math.min(m,B.y),_=Math.max(_,B.x),S=Math.max(S,B.y),u.push(B)}const E=this.grid.query(p,m,_,S).concat(this.ignoredGrid.query(p,m,_,S)),C={},z={};for(const F of E){const B=F.key;if(C[B.bucketInstanceId]===void 0&&(C[B.bucketInstanceId]={}),C[B.bucketInstanceId][B.featureIndex])continue;const X=[new c.P(F.x1,F.y1),new c.P(F.x2,F.y1),new c.P(F.x2,F.y2),new c.P(F.x1,F.y2)];c.am(u,X)&&(C[B.bucketInstanceId][B.featureIndex]=!0,z[B.bucketInstanceId]===void 0&&(z[B.bucketInstanceId]=[]),z[B.bucketInstanceId].push(B.featureIndex))}return z}insertCollisionBox(r,u,p,m,_,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:S,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,p,m,_,S){const E=p?this.ignoredGrid:this.grid,C={bucketInstanceId:m,featureIndex:_,collisionGroupID:S,overlapMode:u};for(let z=0;z<r.length;z+=4)E.insertCircle(C,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,u,p,m,_){let S;_?(S=[u,p,_(u,p),1],c.af(S,S,r)):(S=[u,p,0,1],mr(S,S,r));const E=S[3];return{point:new c.P((S[0]/E+1)/2*this.transform.width+Qt,(-S[1]/E+1)/2*this.transform.height+Qt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(r,u,p,m,_){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,m,_):he(u,p,r,_);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(r,u,p,m){return p<Qt||r>=this.screenRightBoundary||m<Qt||u>this.screenBottomBoundary}isInsideGrid(r,u,p,m){return p>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=c.an([]);return c.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,u,p,m,_,S,E,C,z,F){let B=new c.P(1,0),X=new c.P(0,1);const Q=new c.P(r.anchorPointX+E[0],r.anchorPointY+E[1]);if(S&&!_){const gt=this.projectAndGetPerspectiveRatio(p,Q.x+1,Q.y,m,z).point.sub(C.point).unit(),wt=Math.atan(gt.y/gt.x)+(gt.x<0?Math.PI:0),dt=Math.sin(wt),ct=Math.cos(wt);B=new c.P(ct,dt),X=new c.P(-dt,ct)}else if(!S&&_){const gt=-this.transform.angle,wt=Math.sin(gt),dt=Math.cos(gt);B=new c.P(dt,wt),X=new c.P(-wt,dt)}let re=C.point,ce=u;if(_){re=Q;const gt=this.transform.zoom-Math.floor(this.transform.zoom);ce=Math.pow(2,-gt),ce*=this.mapProjection.getPitchedTextCorrection(this.transform,Q,m),F||(ce*=c.ac(.5+C.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}F&&(re=re.add(B.mult(F.x*ce)).add(X.mult(F.y*ce)));const pe=r.x1*ce,me=r.x2*ce,we=(pe+me)/2,ae=r.y1*ce,Ce=r.y2*ce,Pe=(ae+Ce)/2,ze=[{offsetX:pe,offsetY:ae},{offsetX:we,offsetY:ae},{offsetX:me,offsetY:ae},{offsetX:me,offsetY:Pe},{offsetX:me,offsetY:Ce},{offsetX:we,offsetY:Ce},{offsetX:pe,offsetY:Ce},{offsetX:pe,offsetY:Pe}];let Xe=[];for(const{offsetX:gt,offsetY:wt}of ze)Xe.push(new c.P(re.x+B.x*gt+X.x*wt,re.y+B.y*gt+X.y*wt));let st=!1;if(_){const gt=Xe.map(wt=>this.projectAndGetPerspectiveRatio(p,wt.x,wt.y,m,z));st=gt.some(wt=>!wt.isOccluded),Xe=gt.map(wt=>wt.point)}else st=!0;return{box:c.ao(Xe),allPointsOccluded:!st}}}function or(v,r,u){return r*(c.X/(v.tileSize*Math.pow(2,u-v.tileID.overscaledZ)))}class Tn{constructor(r,u,p,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class rn{constructor(r,u,p,m,_){this.text=new Tn(r?r.text:null,u,p,_),this.icon=new Tn(r?r.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class rr{constructor(r,u,p){this.text=r,this.icon=u,this.skipFade=p}}class Mr{constructor(){this.invProjMatrix=c.H(),this.viewportMatrix=c.H(),this.circles=[]}}class Yr{constructor(r,u,p,m,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=_}}class Dn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[r]}}function Bn(v,r,u,p,m){const{horizontalAlign:_,verticalAlign:S}=c.au(v);return new c.P(-(_-.5)*r+p[0]*m,-(S-.5)*u+p[1]*m)}class ni{constructor(r,u,p,m,_,S){this.transform=r.clone(),this.terrain=p,this.collisionIndex=new gr(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Dn(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const u=this.terrain;return u?(p,m)=>u.getElevation(r,p,m):null}getBucketParts(r,u,p,m){const _=p.getBucket(u),S=p.latestFeatureIndex;if(!_||!S||u.id!==_.layerIds[0])return;const E=p.collisionBoxArray,C=_.layers[0].layout,z=_.layers[0].paint,F=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),B=p.tileSize/c.X,X=p.tileID.toUnwrapped(),Q=this.transform.calculatePosMatrix(X),re=C.get("text-pitch-alignment")==="map",ce=C.get("text-rotation-alignment")==="map",pe=or(p,1,this.transform.zoom),me=this.collisionIndex.mapProjection.translatePosition(this.transform,p,z.get("text-translate"),z.get("text-translate-anchor")),we=this.collisionIndex.mapProjection.translatePosition(this.transform,p,z.get("icon-translate"),z.get("icon-translate-anchor")),ae=ps(Q,re,ce,this.transform,pe);let Ce=null;if(re){const ze=Hn(Q,re,ce,this.transform,pe);Ce=c.L([],this.transform.labelPlaneMatrix,ze)}this.retainedQueryData[_.bucketInstanceId]=new Yr(_.bucketInstanceId,S,_.sourceLayerIndex,_.index,p.tileID);const Pe={bucket:_,layout:C,translationText:me,translationIcon:we,posMatrix:Q,unwrappedTileID:X,textLabelPlaneMatrix:ae,labelToScreenMatrix:Ce,scale:F,textPixelRatio:B,holdingForFade:p.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:c.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const ze of _.sortKeyRanges){const{sortKey:Xe,symbolInstanceStart:st,symbolInstanceEnd:gt}=ze;r.push({sortKey:Xe,symbolInstanceStart:st,symbolInstanceEnd:gt,parameters:Pe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Pe})}attemptAnchorPlacement(r,u,p,m,_,S,E,C,z,F,B,X,Q,re,ce,pe,me,we,ae){const Ce=c.aq[r.textAnchor],Pe=[r.textOffset0,r.textOffset1],ze=Bn(Ce,p,m,Pe,_),Xe=this.collisionIndex.placeCollisionBox(u,X,C,z,F,E,S,pe,B.predicate,ae,ze);if((!we||this.collisionIndex.placeCollisionBox(we,X,C,z,F,E,S,me,B.predicate,ae,ze).placeable)&&Xe.placeable){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(st=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Pe,width:p,height:m,anchor:Ce,textBoxScale:_,prevAnchor:st},this.markUsedJustification(re,Ce,Q,ce),re.allowVerticalPlacement&&(this.markUsedOrientation(re,ce,Q),this.placedOrientations[Q.crossTileID]=ce),{shift:ze,placedGlyphBoxes:Xe}}}placeLayerBucketPart(r,u,p){const{bucket:m,layout:_,translationText:S,translationIcon:E,posMatrix:C,unwrappedTileID:z,textLabelPlaneMatrix:F,labelToScreenMatrix:B,textPixelRatio:X,holdingForFade:Q,collisionBoxArray:re,partiallyEvaluatedTextSize:ce,collisionGroup:pe}=r.parameters,me=_.get("text-optional"),we=_.get("icon-optional"),ae=c.ar(_,"text-overlap","text-allow-overlap"),Ce=ae==="always",Pe=c.ar(_,"icon-overlap","icon-allow-overlap"),ze=Pe==="always",Xe=_.get("text-rotation-alignment")==="map",st=_.get("text-pitch-alignment")==="map",gt=_.get("icon-text-fit")!=="none",wt=_.get("symbol-z-order")==="viewport-y",dt=Ce&&(ze||!m.hasIconData()||we),ct=ze&&(Ce||!m.hasTextData()||me);!m.collisionArrays&&re&&m.deserializeCollisionBoxes(re);const Pt=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),qt=(ft,_t,Gt)=>{var Hr,tr;if(u[ft.crossTileID])return;if(Q)return void(this.placements[ft.crossTileID]=new rr(!1,!1,!1));let ar=!1,Wr=!1,Gn=!0,xs=null,Gr={box:null,placeable:!1,offscreen:null},_i={box:null,placeable:!1,offscreen:null},ii=null,Zn=null,si=null,Ws=0,sl=0,Mc=0;_t.textFeatureIndex?Ws=_t.textFeatureIndex:ft.useRuntimeCollisionCircles&&(Ws=ft.featureIndex),_t.verticalTextFeatureIndex&&(sl=_t.verticalTextFeatureIndex);const ol=_t.textBox;if(ol){const ts=Nn=>{let qn=c.ah.horizontal;if(m.allowVerticalPlacement&&!Nn&&this.prevPlacement){const Li=this.prevPlacement.placedOrientations[ft.crossTileID];Li&&(this.placedOrientations[ft.crossTileID]=Li,qn=Li,this.markUsedOrientation(m,qn,ft))}return qn},rs=(Nn,qn)=>{if(m.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const Li of m.writingModes)if(Li===c.ah.vertical?(Gr=qn(),_i=Gr):Gr=Nn(),Gr&&Gr.placeable)break}else Gr=Nn()},Ao=ft.textAnchorOffsetStartIndex,ws=ft.textAnchorOffsetEndIndex;if(ws===Ao){const Nn=(qn,Li)=>{const cr=this.collisionIndex.placeCollisionBox(qn,ae,X,C,z,st,Xe,S,pe.predicate,Pt);return cr&&cr.placeable&&(this.markUsedOrientation(m,Li,ft),this.placedOrientations[ft.crossTileID]=Li),cr};rs(()=>Nn(ol,c.ah.horizontal),()=>{const qn=_t.verticalTextBox;return m.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&qn?Nn(qn,c.ah.vertical):{box:null,offscreen:null}}),ts(Gr&&Gr.placeable)}else{let Nn=c.aq[(tr=(Hr=this.prevPlacement)===null||Hr===void 0?void 0:Hr.variableOffsets[ft.crossTileID])===null||tr===void 0?void 0:tr.anchor];const qn=(cr,ua,al)=>{const ll=cr.x2-cr.x1,um=cr.y2-cr.y1,t0=ft.textBoxScale,cm=gt&&Pe==="never"?ua:null;let Do=null,hm=ae==="never"?1:2,Dc="never";Nn&&hm++;for(let hu=0;hu<hm;hu++){for(let zc=Ao;zc<ws;zc++){const Rc=m.textAnchorOffsets.get(zc);if(Nn&&Rc.textAnchor!==Nn)continue;const ul=this.attemptAnchorPlacement(Rc,cr,ll,um,t0,Xe,st,X,C,z,pe,Dc,ft,m,al,S,E,cm,Pt);if(ul&&(Do=ul.placedGlyphBoxes,Do&&Do.placeable))return ar=!0,xs=ul.shift,Do}Nn?Nn=null:Dc=ae}return p&&!Do&&(Do={box:this.collisionIndex.placeCollisionBox(ol,"always",X,C,z,st,Xe,S,pe.predicate,Pt,new c.P(0,0)).box,offscreen:!1,placeable:!1}),Do};rs(()=>qn(ol,_t.iconBox,c.ah.horizontal),()=>{const cr=_t.verticalTextBox;return m.allowVerticalPlacement&&(!Gr||!Gr.placeable)&&ft.numVerticalGlyphVertices>0&&cr?qn(cr,_t.verticalIconBox,c.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Gr&&(ar=Gr.placeable,Gn=Gr.offscreen);const Li=ts(Gr&&Gr.placeable);if(!ar&&this.prevPlacement){const cr=this.prevPlacement.variableOffsets[ft.crossTileID];cr&&(this.variableOffsets[ft.crossTileID]=cr,this.markUsedJustification(m,cr.anchor,ft,Li))}}}if(ii=Gr,ar=ii&&ii.placeable,Gn=ii&&ii.offscreen,ft.useRuntimeCollisionCircles){const ts=m.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex),rs=c.ai(m.textSizeData,ce,ts),Ao=_.get("text-padding");Zn=this.collisionIndex.placeCollisionCircles(ae,ts,m.lineVertexArray,m.glyphOffsetArray,rs,C,z,F,B,p,st,pe.predicate,ft.collisionCircleDiameter,Ao,S,Pt),Zn.circles.length&&Zn.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),ar=Ce||Zn.circles.length>0&&!Zn.collisionDetected,Gn=Gn&&Zn.offscreen}if(_t.iconFeatureIndex&&(Mc=_t.iconFeatureIndex),_t.iconBox){const ts=rs=>this.collisionIndex.placeCollisionBox(rs,Pe,X,C,z,st,Xe,E,pe.predicate,Pt,gt&&xs?xs:void 0);_i&&_i.placeable&&_t.verticalIconBox?(si=ts(_t.verticalIconBox),Wr=si.placeable):(si=ts(_t.iconBox),Wr=si.placeable),Gn=Gn&&si.offscreen}const es=me||ft.numHorizontalGlyphVertices===0&&ft.numVerticalGlyphVertices===0,Ac=we||ft.numIconVertices===0;es||Ac?Ac?es||(Wr=Wr&&ar):ar=Wr&&ar:Wr=ar=Wr&&ar;const Fd=Wr&&si.placeable;if(ar&&ii.placeable&&this.collisionIndex.insertCollisionBox(ii.box,ae,_.get("text-ignore-placement"),m.bucketInstanceId,_i&&_i.placeable&&sl?sl:Ws,pe.ID),Fd&&this.collisionIndex.insertCollisionBox(si.box,Pe,_.get("icon-ignore-placement"),m.bucketInstanceId,Mc,pe.ID),Zn&&ar&&this.collisionIndex.insertCollisionCircles(Zn.circles,ae,_.get("text-ignore-placement"),m.bucketInstanceId,Ws,pe.ID),p&&this.storeCollisionData(m.bucketInstanceId,Gt,_t,ii,si,Zn),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ft.crossTileID]=new rr(ar||dt,Wr||ct,Gn||m.justReloaded),u[ft.crossTileID]=!0};if(wt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ft=m.getSortedSymbolIndexes(this.transform.angle);for(let _t=ft.length-1;_t>=0;--_t){const Gt=ft[_t];qt(m.symbolInstances.get(Gt),m.collisionArrays[Gt],Gt)}}else for(let ft=r.symbolInstanceStart;ft<r.symbolInstanceEnd;ft++)qt(m.symbolInstances.get(ft),m.collisionArrays[ft],ft);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const ft=this.collisionCircleArrays[m.bucketInstanceId];c.as(ft.invProjMatrix,C),ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(r,u,p,m,_,S){if(p.textBox||p.iconBox){let E,C;this.collisionBoxArrays.has(r)?E=this.collisionBoxArrays.get(r):(E=new Map,this.collisionBoxArrays.set(r,E)),E.has(u)?C=E.get(u):(C={text:null,icon:null},E.set(u,C)),p.textBox&&(C.text=m.box),p.iconBox&&(C.icon=_.box)}if(S){let E=this.collisionCircleArrays[r];E===void 0&&(E=this.collisionCircleArrays[r]=new Mr);for(let C=0;C<S.circles.length;C+=4)E.circles.push(S.circles[C+0]),E.circles.push(S.circles[C+1]),E.circles.push(S.circles[C+2]),E.circles.push(S.collisionDetected?1:0)}}markUsedJustification(r,u,p,m){let _;_=m===c.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.at(u)];const S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const E of S)E>=0&&(r.text.placedSymbolArray.get(E).crossTileID=_>=0&&E!==_?0:p.crossTileID)}markUsedOrientation(r,u,p){const m=u===c.ah.horizontal||u===c.ah.horizontalOnly?u:0,_=u===c.ah.vertical?u:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const E of S)r.text.placedSymbolArray.get(E).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},S=u?u.variableOffsets:{},E=u?u.placedOrientations:{};for(const C in this.placements){const z=this.placements[C],F=_[C];F?(this.opacities[C]=new rn(F,m,z.text,z.icon),p=p||z.text!==F.text.placed||z.icon!==F.icon.placed):(this.opacities[C]=new rn(null,m,z.text,z.icon,z.skipFade),p=p||z.text||z.icon)}for(const C in _){const z=_[C];if(!this.opacities[C]){const F=new rn(z,m,!1,!1);F.isHidden()||(this.opacities[C]=F,p=p||z.text.placed||z.icon.placed)}}for(const C in S)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=S[C]);for(const C in E)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=E[C]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const p={};for(const m of u){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(r,u,p,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const _=r.layers[0],S=_.layout,E=new rn(null,0,!1,!1,!0),C=S.get("text-allow-overlap"),z=S.get("icon-allow-overlap"),F=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=S.get("text-rotation-alignment")==="map",X=S.get("text-pitch-alignment")==="map",Q=S.get("icon-text-fit")!=="none",re=new rn(null,0,C&&(z||!r.hasIconData()||S.get("icon-optional")),z&&(C||!r.hasTextData()||S.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const ce=(me,we,ae)=>{for(let Ce=0;Ce<we/4;Ce++)me.opacityVertexArray.emplaceBack(ae);me.hasVisibleVertices=me.hasVisibleVertices||ae!==Ba},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let me=0;me<r.symbolInstances.length;me++){const we=r.symbolInstances.get(me),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:Ce,crossTileID:Pe}=we;let ze=this.opacities[Pe];p[Pe]?ze=E:ze||(ze=re,this.opacities[Pe]=ze),p[Pe]=!0;const Xe=we.numIconVertices>0,st=this.placedOrientations[we.crossTileID],gt=st===c.ah.vertical,wt=st===c.ah.horizontal||st===c.ah.horizontalOnly;if(ae>0||Ce>0){const ct=Di(ze.text);ce(r.text,ae,gt?Ba:ct),ce(r.text,Ce,wt?Ba:ct);const Pt=ze.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(_t=>{_t>=0&&(r.text.placedSymbolArray.get(_t).hidden=Pt||gt?1:0)}),we.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Pt||wt?1:0);const qt=this.variableOffsets[we.crossTileID];qt&&this.markUsedJustification(r,qt.anchor,we,st);const ft=this.placedOrientations[we.crossTileID];ft&&(this.markUsedJustification(r,"left",we,ft),this.markUsedOrientation(r,ft,we))}if(Xe){const ct=Di(ze.icon),Pt=!(Q&&we.verticalPlacedIconSymbolIndex&&gt);we.placedIconSymbolIndex>=0&&(ce(r.icon,we.numIconVertices,Pt?ct:Ba),r.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=ze.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(ce(r.icon,we.numVerticalIconVertices,Pt?Ba:ct),r.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}const dt=pe&&pe.has(me)?pe.get(me):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const ct=r.collisionArrays[me];if(ct){let Pt=new c.P(0,0);if(ct.textBox||ct.verticalTextBox){let qt=!0;if(F){const ft=this.variableOffsets[Pe];ft?(Pt=Bn(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),B&&Pt._rotate(X?this.transform.angle:-this.transform.angle)):qt=!1}if(ct.textBox||ct.verticalTextBox){let ft;ct.textBox&&(ft=gt),ct.verticalTextBox&&(ft=wt),Fa(r.textCollisionBox.collisionVertexArray,ze.text.placed,!qt||ft,dt.text,Pt.x,Pt.y)}}if(ct.iconBox||ct.verticalIconBox){const qt=!!(!wt&&ct.verticalIconBox);let ft;ct.iconBox&&(ft=qt),ct.verticalIconBox&&(ft=!qt),Fa(r.iconCollisionBox.collisionVertexArray,ze.icon.placed,ft,dt.icon,Q?Pt.x:0,Q?Pt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=me.invProjMatrix,r.placementViewportMatrix=me.viewportMatrix,r.collisionCircleArray=me.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function Fa(v,r,u,p,m,_){p&&p.length!==0||(p=[0,0,0,0]);const S=p[0]-Qt,E=p[1]-Qt,C=p[2]-Qt,z=p[3]-Qt;v.emplaceBack(r?1:0,u?1:0,m||0,_||0,S,E),v.emplaceBack(r?1:0,u?1:0,m||0,_||0,C,E),v.emplaceBack(r?1:0,u?1:0,m||0,_||0,C,z),v.emplaceBack(r?1:0,u?1:0,m||0,_||0,S,z)}const Ar=Math.pow(2,25),qh=Math.pow(2,24),Yh=Math.pow(2,17),Mi=Math.pow(2,16),Ai=Math.pow(2,9),P_=Math.pow(2,8),Xi=Math.pow(2,1);function Di(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const r=v.placed?1:0,u=Math.floor(127*v.opacity);return u*Ar+r*qh+u*Yh+r*Mi+u*Ai+r*P_+u*Xi+r}const Ba=0;function Ko(){return{isOccluded:(v,r,u)=>!1,getPitchedTextCorrection:(v,r,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,u,p){throw new Error("Not implemented.")},translatePosition:(v,r,u,p)=>function(m,_,S,E,C=!1){if(!S[0]&&!S[1])return[0,0];const z=C?E==="map"?m.angle:0:E==="viewport"?-m.angle:0;if(z){const F=Math.sin(z),B=Math.cos(z);S=[S[0]*B-S[1]*F,S[0]*F+S[1]*B]}return[C?S[0]:or(_,S[0],m.zoom),C?S[1]:or(_,S[1],m.zoom)]}(v,r,u,p),getCircleRadiusCorrection:v=>1}}class En{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,p,m,_){const S=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(S,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((E,C)=>E.sortKey-C.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Zl{constructor(r,u,p,m,_,S,E,C){this.placement=new ni(r,Ko(),u,S,E,C),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,p){const m=A.now(),_=()=>!this._forceFullPlacement&&A.now()-m>2;for(;this._currentPlacementIndex>=0;){const S=u[r[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=E)&&(!S.maxzoom||S.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new En(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ms=512/c.X/2;class xn{constructor(r,u,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const S=u.get(_),E=S.key,C=m.get(E);C?C.push(S):m.set(E,[S])}for(const[_,S]of m){const E={positions:S.map(C=>({x:Math.floor(C.anchorX*ms),y:Math.floor(C.anchorY*ms)})),crossTileIDs:S.map(C=>C.crossTileID)};if(E.positions.length>128){const C=new c.av(E.positions.length,16,Uint16Array);for(const{x:z,y:F}of E.positions)C.add(z,F);C.finish(),delete E.positions,E.index=C}this._symbolsByKey[_]=E}}getScaledCoordinates(r,u){const{x:p,y:m,z:_}=this.tileID.canonical,{x:S,y:E,z:C}=u.canonical,z=ms/Math.pow(2,C-_),F=(E*c.X+r.anchorY)*z,B=m*c.X*ms;return{x:Math.floor((S*c.X+r.anchorX)*z-p*c.X*ms),y:Math.floor(F-B)}}findMatches(r,u,p){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const S=r.get(_);if(S.crossTileID)continue;const E=this._symbolsByKey[S.key];if(!E)continue;const C=this.getScaledCoordinates(S,u);if(E.index){const z=E.index.range(C.x-m,C.y-m,C.x+m,C.y+m).sort();for(const F of z){const B=E.crossTileIDs[F];if(!p[B]){p[B]=!0,S.crossTileID=B;break}}}else if(E.positions)for(let z=0;z<E.positions.length;z++){const F=E.positions[z],B=E.crossTileIDs[z];if(Math.abs(F.x-C.x)<=m&&Math.abs(F.y-C.y)<=m&&!p[B]){p[B]=!0,S.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Qu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const p in this.indexes){const m=this.indexes[p],_={};for(const S in m){const E=m[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),_[E.tileID.key]=E}this.indexes[p]=_}this.lng=r}addBucket(r,u,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const S=this.indexes[_];if(Number(_)>r.overscaledZ)for(const E in S){const C=S[E];C.tileID.isChildOf(r)&&C.findMatches(u.symbolInstances,r,m)}else{const E=S[r.scaledTo(Number(_)).key];E&&E.findMatches(u.symbolInstances,r,m)}}for(let _=0;_<u.symbolInstances.length;_++){const S=u.symbolInstances.get(_);S.crossTileID||(S.crossTileID=p.generate(),m[S.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new xn(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const p of u.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const p in this.indexes){const m=this.indexes[p];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[_]),delete m[_],u=!0)}return u}}class Xh{constructor(){this.layerIndexes={},this.crossTileIDs=new Qu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,p){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new gs);let _=!1;const S={};m.handleWrapJump(p);for(const E of u){const C=E.getBucket(r);C&&r.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(E.tileID,C,this.crossTileIDs)&&(_=!0),S[C.bucketInstanceId]=!0)}return m.removeStaleBuckets(S)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const ys=(v,r)=>c.t(v,r&&r.filter(u=>u.identifier!=="source.canvas")),M_=c.aw();class ec extends c.E{constructor(r,u={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=r,this.dispatcher=new _r(Yt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new je,this.imageManager.setEventedParent(this),this.glyphManager=new ye(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new mt(256,512),this.crossTileSymbolIndex=new Xh,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.ay()),vn().on(qe,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const _=m.getSource();if(_&&_.vectorLayerIds)for(const S in this._layers){const E=this._layers[S];E.source===_.id&&this._validateLayer(E)}})}loadURL(r,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;c.h(m,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,u,p)}).catch(S=>{this._loadStyleRequest=null,S&&!_.signal.aborted&&this.fire(new c.j(S))})}loadJSON(r,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(r,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(M_,{validate:!1})}_load(r,u,p){var m;const _=u.transformStyle?u.transformStyle(p,r):r;if(!u.validate||!ys(this,c.u(_))){this._loaded=!0,this.stylesheet=_;for(const S in _.sources)this.addSource(S,_.sources[S],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Ke(this.stylesheet.light),this.sky=new Ee(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const r=c.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const p=c.aA(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(r,u=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,S,E,C){return c._(this,void 0,void 0,function*(){const z=Oe(_),F=E>1?"@2x":"",B={},X={};for(const{id:Q,url:re}of z){const ce=S.transformRequest(Ge(re,F,".json"),"SpriteJSON");B[Q]=c.h(ce,C);const pe=S.transformRequest(Ge(re,F,".png"),"SpriteImage");X[Q]=q.getImage(pe,C)}return yield Promise.all([...Object.values(B),...Object.values(X)]),function(Q,re){return c._(this,void 0,void 0,function*(){const ce={};for(const pe in Q){ce[pe]={};const me=A.getImageCanvasContext((yield re[pe]).data),we=(yield Q[pe]).data;for(const ae in we){const{width:Ce,height:Pe,x:ze,y:Xe,sdf:st,pixelRatio:gt,stretchX:wt,stretchY:dt,content:ct,textFitWidth:Pt,textFitHeight:qt}=we[ae];ce[pe][ae]={data:null,pixelRatio:gt,sdf:st,stretchX:wt,stretchY:dt,content:ct,textFitWidth:Pt,textFitHeight:qt,spriteData:{width:Ce,height:Pe,x:ze,y:Xe,context:me}}}}return ce})}(B,X)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const S in _){this._spritesImagesIds[S]=[];const E=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(C=>!(C in _)):[];for(const C of E)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in _[S]){const z=S==="default"?C:`${S}:${C}`;this._spritesImagesIds[S].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,_[S][C],!1):this.imageManager.addImage(z,_[S][C]),u&&(this._changedImages[z]=!0)}}}).catch(_=>{this._spriteRequest=null,m=_,this.fire(new c.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const p=r.sourceLayer;if(!p)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.j(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,u=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u?c.aB(p):p);const m=[];for(const _ of r)if(p[_]){const S=u?c.aB(p[_]):p[_];m.push(S)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const m=this._layers[p];m.type!=="custom"&&(r[p]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(u){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const S in this._updatedSources){const E=this._updatedSources[S];if(E==="reload")this._reloadSource(S);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];p[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in p){const _=this.sourceCaches[m];!!p[m]!=!!_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){var p;this._checkLoaded();const m=this.serialize();if(r=u.transformStyle?u.transformStyle(m,r):r,((p=u.validate)===null||p===void 0||p)&&ys(this,c.u(r)))return!1;(r=c.aB(r)).layers=c.az(r.layers);const _=c.aC(m,r),S=this._getOperationsToPerform(_);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const E of S.operations)E();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const u=[],p=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":u.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":u.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":u.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":u.push(()=>{});break;default:p.push(m.command)}return{operations:u,unimplemented:p}}addImage(r,u){if(this.getImage(r))return this.fire(new c.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new c.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.u.source,`sources.${r}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new jt(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new c.j(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,p={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new c.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(ys(this,c.aD(r)))return;_=c.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=c.aB(r),r=c.e(r,{source:m})),this._validate(c.u.layer,`layers.${m}`,r,{arrayIndex:-1},p))return;_=c.aA(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new c.j(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const E=this._removedLayers[m];delete this._removedLayers[m],E.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new c.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const p=this._order.indexOf(r);this._order.splice(p,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new c.j(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,p){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===p||(u!=null&&(m.minzoom=u),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,p={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!c.aE(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(c.u.filter,`layers.${m.id}.filter`,u,null,p)||(m.filter=c.aB(u),this._updateLayer(m)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return c.aB(this.getLayer(r).filter)}setLayoutProperty(r,u,p,m={}){this._checkLoaded();const _=this.getLayer(r);_?c.aE(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,m),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const p=this.getLayer(r);if(p)return p.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,p,m={}){this._checkLoaded();const _=this.getLayer(r);_?c.aE(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const p=r.source,m=r.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const S=_.getSource().type;S==="geojson"&&m?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||m?(r.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const p=r.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=m.getSource().type,S=_==="vector"?r.sourceLayer:void 0;_!=="vector"||S?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(S,r.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,p=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,r.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=c.aF(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return c.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=S=>this._layers[S].type==="fill-extrusion",p={},m=[];for(let S=this._order.length-1;S>=0;S--){const E=this._order[S];if(u(E)){p[E]=S;for(const C of r){const z=C[E];if(z)for(const F of z)m.push(F)}}}m.sort((S,E)=>E.intersectionZ-S.intersectionZ);const _=[];for(let S=this._order.length-1;S>=0;S--){const E=this._order[S];if(u(E))for(let C=m.length-1;C>=0;C--){const z=m[C].feature;if(p[z.layer.id]<S)break;_.push(z),m.pop()}else for(const C of r){const z=C[E];if(z)for(const F of z)_.push(F.feature)}}return _}queryRenderedFeatures(r,u,p){u&&u.filter&&this._validate(c.u.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const E of u.layers){const C=this._layers[E];if(!C)return this.fire(new c.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];m[C.source]=!0}}const _=[];u.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const E in this.sourceCaches)u.layers&&!m[E]||_.push(Xr(this.sourceCaches[E],this._layers,S,r,u,p));return this.placement&&_.push(function(E,C,z,F,B,X,Q){const re={},ce=X.queryRenderedSymbols(F),pe=[];for(const me of Object.keys(ce).map(Number))pe.push(Q[me]);pe.sort(V);for(const me of pe){const we=me.featureIndex.lookupSymbolFeatures(ce[me.bucketInstanceId],C,me.bucketIndex,me.sourceLayerIndex,B.filter,B.layers,B.availableImages,E);for(const ae in we){const Ce=re[ae]=re[ae]||[],Pe=we[ae];Pe.sort((ze,Xe)=>{const st=me.featureSortOrder;if(st){const gt=st.indexOf(ze.featureIndex);return st.indexOf(Xe.featureIndex)-gt}return Xe.featureIndex-ze.featureIndex});for(const ze of Pe)Ce.push(ze)}}for(const me in re)re[me].forEach(we=>{const ae=we.feature,Ce=z[E[me].source].getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=Ce});return re}(this._layers,S,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(c.u.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[r];return p?function(m,_){const S=m.getRenderableIds().map(z=>m.getTileByID(z)),E=[],C={};for(let z=0;z<S.length;z++){const F=S[z],B=F.tileID.canonical.key;C[B]||(C[B]=!0,F.querySourceFeatures(E,_))}return E}(p,u):[]}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const S in r)if(!c.aE(r[S],p[S])){m=!0;break}if(!m)return;const _={now:A.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,u={}){const p=this.getSky();let m=!1;if(!r&&!p)return;if(r&&!p)m=!0;else if(!r&&p)m=!0;else for(const S in r)if(!c.aE(r[S],p[S])){m=!0;break}if(!m)return;const _={now:A.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,u),this.sky.updateTransitions(_)}_validate(r,u,p,m,_={}){return(!_||_.validate!==!1)&&ys(this,r.call(c.u,c.e({key:u,style:this.serialize(),value:p,styleSpec:c.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),vn().off(qe,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,p,m,_=!1){let S=!1,E=!1;const C={};for(const z of this._order){const F=this._layers[z];if(F.type!=="symbol")continue;if(!C[F.source]){const X=this.sourceCaches[F.source];C[F.source]=X.getRenderableIds(!0).map(Q=>X.getTileByID(Q)).sort((Q,re)=>re.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(re.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(F,C[F.source],r.center.lng);S=S||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),r.zoom))&&(this.pauseablePlacement=new Zl(r,this.map.terrain,this._order,_,u,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),E=!0),S&&this.pauseablePlacement.placement.setStale()),E||S)for(const z of this._order){const F=this._layers[z];F.type==="symbol"&&this.placement.updateLayerOpacities(F,C[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u){return c._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(r,u){return c._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(c.u.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,p={},m){this._checkLoaded();const _=[{id:r,url:u}],S=[...Oe(this.stylesheet.sprite),..._];this._validate(c.u.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const u=Oe(this.stylesheet.sprite);if(u.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Oe(this.stylesheet.sprite)}setSprite(r,u={},p){this._checkLoaded(),r&&this._validate(c.u.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var Jo=c.Y([{name:"a_pos",type:"Int16",components:2}]);const Po={prelude:Sr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Sr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Sr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Sr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Sr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Sr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Sr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Sr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Sr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Sr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Sr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Sr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Sr(v,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/attribute ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=_?_.concat(m):m,E={};return{fragmentSource:v=v.replace(u,(C,z,F,B,X)=>(E[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${F} ${B} ${X};
#else
uniform ${F} ${B} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${F} ${B} ${X} = u_${X};
#endif
`)),vertexSource:r=r.replace(u,(C,z,F,B,X)=>{const Q=B==="float"?"vec2":"vec4",re=X.match(/color/)?"color":Q;return E[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${F} ${Q} a_${X};
varying ${F} ${B} ${X};
#else
uniform ${F} ${B} u_${X};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${F} ${B} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${re}(a_${X}, u_${X}_t);
#else
    ${F} ${B} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${F} ${Q} a_${X};
#else
uniform ${F} ${B} u_${X};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${F} ${B} ${X} = a_${X};
#else
    ${F} ${B} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${F} ${B} ${X} = unpack_mix_${re}(a_${X}, u_${X}_t);
#else
    ${F} ${B} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:S}}class Kh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,p,m,_,S,E,C,z){this.context=r;let F=this.boundPaintVertexBuffers.length!==m.length;for(let B=0;!F&&B<m.length;B++)this.boundPaintVertexBuffers[B]!==m[B]&&(F=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||F||this.boundIndexBuffer!==_||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==z?this.freshBind(u,p,m,_,S,E,C,z):(r.bindVertexArray.set(this.vao),E&&E.bind(),_&&_.dynamicDraw&&_.bind(),C&&C.bind(),z&&z.bind())}freshBind(r,u,p,m,_,S,E,C){const z=r.numAttributes,F=this.context,B=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=C,u.enableAttributes(B,r);for(const X of p)X.enableAttributes(B,r);S&&S.enableAttributes(B,r),E&&E.enableAttributes(B,r),C&&C.enableAttributes(B,r),u.bind(),u.setVertexAttribPointers(B,r,_);for(const X of p)X.bind(),X.setVertexAttribPointers(B,r,_);S&&(S.bind(),S.setVertexAttribPointers(B,r,_)),m&&m.bind(),E&&(E.bind(),E.setVertexAttribPointers(B,r,_)),C&&(C.bind(),C.setVertexAttribPointers(B,r,_)),F.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Jh=(v,r,u,p,m)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:u,u_fog_color:p?p.properties.get("fog-color"):c.aM.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(m):0,u_horizon_color:p?p.properties.get("horizon-color"):c.aM.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function Na(v){const r=[];for(let u=0;u<v.length;u++){if(v[u]===null)continue;const p=v[u].split(" ");r.push(p.pop())}return r}class Qh{constructor(r,u,p,m,_,S){const E=r.gl;this.program=E.createProgram();const C=Na(u.staticAttributes),z=p?p.getBinderAttributes():[],F=C.concat(z),B=Po.prelude.staticUniforms?Na(Po.prelude.staticUniforms):[],X=u.staticUniforms?Na(u.staticUniforms):[],Q=p?p.getBinderUniforms():[],re=B.concat(X).concat(Q),ce=[];for(const ze of re)ce.indexOf(ze)<0&&ce.push(ze);const pe=p?p.defines():[];_&&pe.push("#define OVERDRAW_INSPECTOR;"),S&&pe.push("#define TERRAIN3D;");const me=pe.concat(Po.prelude.fragmentSource,u.fragmentSource).join(`
`),we=pe.concat(Po.prelude.vertexSource,u.vertexSource).join(`
`),ae=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ae,me),E.compileShader(ae),!E.getShaderParameter(ae,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(ae)}`);E.attachShader(this.program,ae);const Ce=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(Ce,we),E.compileShader(Ce),!E.getShaderParameter(Ce,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(Ce)}`);E.attachShader(this.program,Ce),this.attributes={};const Pe={};this.numAttributes=F.length;for(let ze=0;ze<this.numAttributes;ze++)F[ze]&&(E.bindAttribLocation(this.program,ze,F[ze]),this.attributes[F[ze]]=ze);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(Ce),E.deleteShader(ae);for(let ze=0;ze<ce.length;ze++){const Xe=ce[ze];if(Xe&&!Pe[Xe]){const st=E.getUniformLocation(this.program,Xe);st&&(Pe[Xe]=st)}}this.fixedUniforms=m(r,Pe),this.terrainUniforms=((ze,Xe)=>({u_depth:new c.aH(ze,Xe.u_depth),u_terrain:new c.aH(ze,Xe.u_terrain),u_terrain_dim:new c.aI(ze,Xe.u_terrain_dim),u_terrain_matrix:new c.aJ(ze,Xe.u_terrain_matrix),u_terrain_unpack:new c.aK(ze,Xe.u_terrain_unpack),u_terrain_exaggeration:new c.aI(ze,Xe.u_terrain_exaggeration)}))(r,Pe),this.binderUniforms=p?p.getUniforms(r,Pe):[]}draw(r,u,p,m,_,S,E,C,z,F,B,X,Q,re,ce,pe,me,we){const ae=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(S),C){r.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,C.depthTexture),r.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,C.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(C[Pe])}for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(E[Pe]);ce&&ce.setUniforms(r,this.binderUniforms,Q,{zoom:re});let Ce=0;switch(u){case ae.LINES:Ce=2;break;case ae.TRIANGLES:Ce=3;break;case ae.LINE_STRIP:Ce=1}for(const Pe of X.get()){const ze=Pe.vaos||(Pe.vaos={});(ze[z]||(ze[z]=new Kh)).bind(r,this,F,ce?ce.getPaintVertexBuffers():[],B,Pe.vertexOffset,pe,me,we),ae.drawElements(u,Pe.primitiveLength*Ce,ae.UNSIGNED_SHORT,Pe.primitiveOffset*Ce*2)}}}function tc(v,r,u){const p=1/or(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,S=_*(u.tileID.canonical.x+u.tileID.wrap*m),E=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[S>>16,E>>16],u_pixel_coord_lower:[65535&S,65535&E]}}const ql=(v,r,u,p)=>{const m=r.style.light,_=m.properties.get("position"),S=[_.x,_.y,_.z],E=function(){var z=new c.A(9);return c.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,F){var B=Math.sin(F),X=Math.cos(F);z[0]=X,z[1]=B,z[2]=0,z[3]=-B,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(E,-r.transform.angle),function(z,F,B){var X=F[0],Q=F[1],re=F[2];z[0]=X*B[0]+Q*B[3]+re*B[6],z[1]=X*B[1]+Q*B[4]+re*B[7],z[2]=X*B[2]+Q*B[5]+re*B[8]}(S,S,E);const C=m.properties.get("color");return{u_matrix:v,u_lightpos:S,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+u,u_opacity:p}},rc=(v,r,u,p,m,_,S)=>c.e(ql(v,r,u,p),tc(_,r,S),{u_height_factor:-Math.pow(2,m.overscaledZ)/S.tileSize/8}),$a=v=>({u_matrix:v}),Mp=(v,r,u,p)=>c.e($a(v),tc(u,r,p)),A_=(v,r)=>({u_matrix:v,u_world:r}),Ap=(v,r,u,p,m)=>c.e(Mp(v,r,u,p),{u_world:m}),D_=(v,r,u,p)=>{const m=v.transform;let _,S;if(p.paint.get("circle-pitch-alignment")==="map"){const E=or(u,1,m.zoom);_=!0,S=[E,E]}else _=!1,S=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:S}},Qo=(v,r,u)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),Yl=(v,r,u=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:u}),gi=v=>({u_matrix:v}),yi=(v,r,u,p)=>({u_matrix:v,u_extrude_scale:or(r,1,u),u_intensity:p}),nc=(v,r,u,p)=>{const m=c.H();c.aP(m,0,v.width,v.height,0,0,1);const _=v.context.gl;return{u_matrix:m,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}};function ic(v,r){const u=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new c.Z(0,p/u).toLngLat().lat,new c.Z(0,(p+1)/u).toLngLat().lat]}const sc=(v,r,u,p)=>{const m=v.transform;return{u_matrix:Rp(v,r,u,p),u_ratio:1/or(r,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Dp=(v,r,u,p,m)=>c.e(sc(v,r,u,m),{u_image:0,u_image_height:p}),ja=(v,r,u,p,m)=>{const _=v.transform,S=zp(r,_);return{u_matrix:Rp(v,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/or(r,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},z_=(v,r,u,p,m,_)=>{const S=v.lineAtlas,E=zp(r,v.transform),C=u.layout.get("line-cap")==="round",z=S.getDash(p.from,C),F=S.getDash(p.to,C),B=z.width*m.fromScale,X=F.width*m.toScale;return c.e(sc(v,r,u,_),{u_patternscale_a:[E/B,-z.height/2],u_patternscale_b:[E/X,-F.height/2],u_sdfgamma:S.width/(256*Math.min(B,X)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:F.y,u_mix:m.t})};function zp(v,r){return 1/or(v,1,r.tileZoom)}function Rp(v,r,u,p){return v.translatePosMatrix(p?p.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const R_=(v,r,u,p,m)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:L_(m.paint.get("raster-hue-rotate"))};var _,S};function L_(v){v*=Math.PI/180;const r=Math.sin(v),u=Math.cos(v);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const Lp=(v,r,u,p,m,_,S,E,C,z,F,B,X,Q)=>{const re=S.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:re.width/re.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:C,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:_,u_texsize:X,u_texture:0,u_translation:F,u_pitched_scale:Q}},Xl=(v,r,u,p,m,_,S,E,C,z,F,B,X,Q,re)=>{const ce=S.transform;return c.e(Lp(v,r,u,p,m,_,S,E,C,z,F,B,X,re),{u_gamma_scale:p?Math.cos(ce._pitch)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+Q})},ed=(v,r,u,p,m,_,S,E,C,z,F,B,X,Q)=>c.e(Xl(v,r,u,p,m,_,S,E,C,z,F,!0,B,!0,Q),{u_texsize_icon:X,u_texture_icon:1}),oc=(v,r,u)=>({u_matrix:v,u_opacity:r,u_color:u}),td=(v,r,u,p,m,_)=>c.e(function(S,E,C,z){const F=C.imageManager.getPattern(S.from.toString()),B=C.imageManager.getPattern(S.to.toString()),{width:X,height:Q}=C.imageManager.getPixelSize(),re=Math.pow(2,z.tileID.overscaledZ),ce=z.tileSize*Math.pow(2,C.transform.tileZoom)/re,pe=ce*(z.tileID.canonical.x+z.tileID.wrap*re),me=ce*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[X,Q],u_mix:E.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/or(z,1,C.transform.tileZoom),u_pixel_coord_upper:[pe>>16,me>>16],u_pixel_coord_lower:[65535&pe,65535&me]}}(p,_,u,m),{u_matrix:v,u_opacity:r}),rd={fillExtrusion:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_lightpos:new c.aN(v,r.u_lightpos),u_lightintensity:new c.aI(v,r.u_lightintensity),u_lightcolor:new c.aN(v,r.u_lightcolor),u_vertical_gradient:new c.aI(v,r.u_vertical_gradient),u_opacity:new c.aI(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_lightpos:new c.aN(v,r.u_lightpos),u_lightintensity:new c.aI(v,r.u_lightintensity),u_lightcolor:new c.aN(v,r.u_lightcolor),u_vertical_gradient:new c.aI(v,r.u_vertical_gradient),u_height_factor:new c.aI(v,r.u_height_factor),u_image:new c.aH(v,r.u_image),u_texsize:new c.aO(v,r.u_texsize),u_pixel_coord_upper:new c.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,r.u_pixel_coord_lower),u_scale:new c.aN(v,r.u_scale),u_fade:new c.aI(v,r.u_fade),u_opacity:new c.aI(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_image:new c.aH(v,r.u_image),u_texsize:new c.aO(v,r.u_texsize),u_pixel_coord_upper:new c.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,r.u_pixel_coord_lower),u_scale:new c.aN(v,r.u_scale),u_fade:new c.aI(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_world:new c.aO(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_world:new c.aO(v,r.u_world),u_image:new c.aH(v,r.u_image),u_texsize:new c.aO(v,r.u_texsize),u_pixel_coord_upper:new c.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,r.u_pixel_coord_lower),u_scale:new c.aN(v,r.u_scale),u_fade:new c.aI(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new c.aI(v,r.u_camera_to_center_distance),u_scale_with_map:new c.aH(v,r.u_scale_with_map),u_pitch_with_map:new c.aH(v,r.u_pitch_with_map),u_extrude_scale:new c.aO(v,r.u_extrude_scale),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_matrix:new c.aJ(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_pixel_extrude_scale:new c.aO(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_inv_matrix:new c.aJ(v,r.u_inv_matrix),u_camera_to_center_distance:new c.aI(v,r.u_camera_to_center_distance),u_viewport_size:new c.aO(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new c.aL(v,r.u_color),u_matrix:new c.aJ(v,r.u_matrix),u_overlay:new c.aH(v,r.u_overlay),u_overlay_scale:new c.aI(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new c.aI(v,r.u_extrude_scale),u_intensity:new c.aI(v,r.u_intensity),u_matrix:new c.aJ(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_world:new c.aO(v,r.u_world),u_image:new c.aH(v,r.u_image),u_color_ramp:new c.aH(v,r.u_color_ramp),u_opacity:new c.aI(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_image:new c.aH(v,r.u_image),u_latrange:new c.aO(v,r.u_latrange),u_light:new c.aO(v,r.u_light),u_shadow:new c.aL(v,r.u_shadow),u_highlight:new c.aL(v,r.u_highlight),u_accent:new c.aL(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_image:new c.aH(v,r.u_image),u_dimension:new c.aO(v,r.u_dimension),u_zoom:new c.aI(v,r.u_zoom),u_unpack:new c.aK(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_ratio:new c.aI(v,r.u_ratio),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new c.aO(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_ratio:new c.aI(v,r.u_ratio),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new c.aO(v,r.u_units_to_pixels),u_image:new c.aH(v,r.u_image),u_image_height:new c.aI(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_texsize:new c.aO(v,r.u_texsize),u_ratio:new c.aI(v,r.u_ratio),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_image:new c.aH(v,r.u_image),u_units_to_pixels:new c.aO(v,r.u_units_to_pixels),u_scale:new c.aN(v,r.u_scale),u_fade:new c.aI(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_ratio:new c.aI(v,r.u_ratio),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new c.aO(v,r.u_units_to_pixels),u_patternscale_a:new c.aO(v,r.u_patternscale_a),u_patternscale_b:new c.aO(v,r.u_patternscale_b),u_sdfgamma:new c.aI(v,r.u_sdfgamma),u_image:new c.aH(v,r.u_image),u_tex_y_a:new c.aI(v,r.u_tex_y_a),u_tex_y_b:new c.aI(v,r.u_tex_y_b),u_mix:new c.aI(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_tl_parent:new c.aO(v,r.u_tl_parent),u_scale_parent:new c.aI(v,r.u_scale_parent),u_buffer_scale:new c.aI(v,r.u_buffer_scale),u_fade_t:new c.aI(v,r.u_fade_t),u_opacity:new c.aI(v,r.u_opacity),u_image0:new c.aH(v,r.u_image0),u_image1:new c.aH(v,r.u_image1),u_brightness_low:new c.aI(v,r.u_brightness_low),u_brightness_high:new c.aI(v,r.u_brightness_high),u_saturation_factor:new c.aI(v,r.u_saturation_factor),u_contrast_factor:new c.aI(v,r.u_contrast_factor),u_spin_weights:new c.aN(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new c.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(v,r.u_is_size_feature_constant),u_size_t:new c.aI(v,r.u_size_t),u_size:new c.aI(v,r.u_size),u_camera_to_center_distance:new c.aI(v,r.u_camera_to_center_distance),u_pitch:new c.aI(v,r.u_pitch),u_rotate_symbol:new c.aH(v,r.u_rotate_symbol),u_aspect_ratio:new c.aI(v,r.u_aspect_ratio),u_fade_change:new c.aI(v,r.u_fade_change),u_matrix:new c.aJ(v,r.u_matrix),u_label_plane_matrix:new c.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new c.aJ(v,r.u_coord_matrix),u_is_text:new c.aH(v,r.u_is_text),u_pitch_with_map:new c.aH(v,r.u_pitch_with_map),u_is_along_line:new c.aH(v,r.u_is_along_line),u_is_variable_anchor:new c.aH(v,r.u_is_variable_anchor),u_texsize:new c.aO(v,r.u_texsize),u_texture:new c.aH(v,r.u_texture),u_translation:new c.aO(v,r.u_translation),u_pitched_scale:new c.aI(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new c.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(v,r.u_is_size_feature_constant),u_size_t:new c.aI(v,r.u_size_t),u_size:new c.aI(v,r.u_size),u_camera_to_center_distance:new c.aI(v,r.u_camera_to_center_distance),u_pitch:new c.aI(v,r.u_pitch),u_rotate_symbol:new c.aH(v,r.u_rotate_symbol),u_aspect_ratio:new c.aI(v,r.u_aspect_ratio),u_fade_change:new c.aI(v,r.u_fade_change),u_matrix:new c.aJ(v,r.u_matrix),u_label_plane_matrix:new c.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new c.aJ(v,r.u_coord_matrix),u_is_text:new c.aH(v,r.u_is_text),u_pitch_with_map:new c.aH(v,r.u_pitch_with_map),u_is_along_line:new c.aH(v,r.u_is_along_line),u_is_variable_anchor:new c.aH(v,r.u_is_variable_anchor),u_texsize:new c.aO(v,r.u_texsize),u_texture:new c.aH(v,r.u_texture),u_gamma_scale:new c.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_is_halo:new c.aH(v,r.u_is_halo),u_translation:new c.aO(v,r.u_translation),u_pitched_scale:new c.aI(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new c.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(v,r.u_is_size_feature_constant),u_size_t:new c.aI(v,r.u_size_t),u_size:new c.aI(v,r.u_size),u_camera_to_center_distance:new c.aI(v,r.u_camera_to_center_distance),u_pitch:new c.aI(v,r.u_pitch),u_rotate_symbol:new c.aH(v,r.u_rotate_symbol),u_aspect_ratio:new c.aI(v,r.u_aspect_ratio),u_fade_change:new c.aI(v,r.u_fade_change),u_matrix:new c.aJ(v,r.u_matrix),u_label_plane_matrix:new c.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new c.aJ(v,r.u_coord_matrix),u_is_text:new c.aH(v,r.u_is_text),u_pitch_with_map:new c.aH(v,r.u_pitch_with_map),u_is_along_line:new c.aH(v,r.u_is_along_line),u_is_variable_anchor:new c.aH(v,r.u_is_variable_anchor),u_texsize:new c.aO(v,r.u_texsize),u_texsize_icon:new c.aO(v,r.u_texsize_icon),u_texture:new c.aH(v,r.u_texture),u_texture_icon:new c.aH(v,r.u_texture_icon),u_gamma_scale:new c.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new c.aI(v,r.u_device_pixel_ratio),u_is_halo:new c.aH(v,r.u_is_halo),u_translation:new c.aO(v,r.u_translation),u_pitched_scale:new c.aI(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_opacity:new c.aI(v,r.u_opacity),u_color:new c.aL(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_opacity:new c.aI(v,r.u_opacity),u_image:new c.aH(v,r.u_image),u_pattern_tl_a:new c.aO(v,r.u_pattern_tl_a),u_pattern_br_a:new c.aO(v,r.u_pattern_br_a),u_pattern_tl_b:new c.aO(v,r.u_pattern_tl_b),u_pattern_br_b:new c.aO(v,r.u_pattern_br_b),u_texsize:new c.aO(v,r.u_texsize),u_mix:new c.aI(v,r.u_mix),u_pattern_size_a:new c.aO(v,r.u_pattern_size_a),u_pattern_size_b:new c.aO(v,r.u_pattern_size_b),u_scale_a:new c.aI(v,r.u_scale_a),u_scale_b:new c.aI(v,r.u_scale_b),u_pixel_coord_upper:new c.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aI(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_texture:new c.aH(v,r.u_texture),u_ele_delta:new c.aI(v,r.u_ele_delta),u_fog_matrix:new c.aJ(v,r.u_fog_matrix),u_fog_color:new c.aL(v,r.u_fog_color),u_fog_ground_blend:new c.aI(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.aI(v,r.u_fog_ground_blend_opacity),u_horizon_color:new c.aL(v,r.u_horizon_color),u_horizon_fog_blend:new c.aI(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_ele_delta:new c.aI(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new c.aJ(v,r.u_matrix),u_texture:new c.aH(v,r.u_texture),u_terrain_coords_id:new c.aI(v,r.u_terrain_coords_id),u_ele_delta:new c.aI(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new c.aL(v,r.u_sky_color),u_horizon_color:new c.aL(v,r.u_horizon_color),u_horizon:new c.aI(v,r.u_horizon),u_sky_horizon_blend:new c.aI(v,r.u_sky_horizon_blend)})};class Us{constructor(r,u,p){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const O_={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nd{constructor(r,u,p,m){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let p=0;p<this.attributes.length;p++){const m=u.attributes[this.attributes[p].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,p){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],S=u.attributes[_.name];S!==void 0&&r.vertexAttribPointer(S,_.components,r[O_[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ea=new WeakMap;function Mo(v){var r;if(ea.has(v))return ea.get(v);{const u=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ea.set(v,u),u}}class Er{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ac extends Er{getDefault(){return c.aM.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class F_ extends Er{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Ua extends Er{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class B_ extends Er{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Op extends Er{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class N_ extends Er{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Fp extends Er{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class id extends Er{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Bp extends Er{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Np extends Er{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class $p extends Er{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class jp extends Er{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ta extends Er{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class Up extends Er{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class $_ extends Er{getDefault(){return c.aM.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Vp extends Er{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Kl extends Er{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class j_ extends Er{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class lc extends Er{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class U_ extends Er{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class V_ extends Er{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Hp extends Er{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Wp extends Er{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Gp extends Er{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class sd extends Er{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Zp extends Er{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class uc extends Er{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ao extends Er{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const p=this.gl;Mo(p)?p.bindVertexArray(r):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class od extends Er{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ad extends Er{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ld extends Er{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class cc extends Er{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class ud extends cc{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class ra extends cc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class cd extends cc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class H_{constructor(r,u,p,m,_){this.context=r,this.width=u,this.height=p;const S=r.gl,E=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new ud(r,E),m)this.depthAttachment=_?new cd(r,E):new ra(r,E);else if(_)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class fn{constructor(r,u,p){this.blendFunction=r,this.blendColor=u,this.mask=p}}fn.Replace=[1,0],fn.disabled=new fn(fn.Replace,c.aM.transparent,[!1,!1,!1,!1]),fn.unblended=new fn(fn.Replace,c.aM.transparent,[!0,!0,!0,!0]),fn.alphaBlended=new fn([1,771],c.aM.transparent,[!0,!0,!0,!0]);class W_{constructor(r){var u,p;if(this.gl=r,this.clearColor=new ac(this),this.clearDepth=new F_(this),this.clearStencil=new Ua(this),this.colorMask=new B_(this),this.depthMask=new Op(this),this.stencilMask=new N_(this),this.stencilFunc=new Fp(this),this.stencilOp=new id(this),this.stencilTest=new Bp(this),this.depthRange=new Np(this),this.depthTest=new $p(this),this.depthFunc=new jp(this),this.blend=new ta(this),this.blendFunc=new Up(this),this.blendColor=new $_(this),this.blendEquation=new Vp(this),this.cullFace=new Kl(this),this.cullFaceSide=new j_(this),this.frontFace=new lc(this),this.program=new U_(this),this.activeTexture=new V_(this),this.viewport=new Hp(this),this.bindFramebuffer=new Wp(this),this.bindRenderbuffer=new Gp(this),this.bindTexture=new sd(this),this.bindVertexBuffer=new Zp(this),this.bindElementBuffer=new uc(this),this.bindVertexArray=new ao(this),this.pixelStoreUnpack=new od(this),this.pixelStoreUnpackPremultiplyAlpha=new ad(this),this.pixelStoreUnpackFlipY=new ld(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Mo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Us(this,r,u)}createVertexBuffer(r,u,p){return new nd(this,r,u,p)}createRenderbuffer(r,u,p){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,p,m){return new H_(this,r,u,p,m)}clear({color:r,depth:u,stencil:p}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){c.aE(r.blendFunction,fn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Mo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return Mo(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class ir{constructor(r,u,p){this.func=r,this.mask=u,this.range=p}}ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(519,ir.ReadOnly,[0,1]);const hc=7680;class Nr{constructor(r,u,p,m,_,S){this.test=r,this.ref=u,this.mask=p,this.fail=m,this.depthFail=_,this.pass=S}}Nr.disabled=new Nr({func:519,mask:0},0,0,hc,hc,hc);class Rr{constructor(r,u,p){this.enable=r,this.mode=u,this.frontFace=p}}let na;function Jl(v,r,u,p,m){const _=v.context,S=_.gl,E=v.useProgram("collisionBox"),C=[];let z=0,F=0;for(let me=0;me<p.length;me++){const we=p[me],ae=r.getTile(we).getBucket(u);if(!ae)continue;const Ce=m?ae.textCollisionBox:ae.iconCollisionBox,Pe=ae.collisionCircleArray;if(Pe.length>0){const ze=c.H();c.aQ(ze,ae.placementInvProjMatrix,v.transform.glCoordMatrix),c.aQ(ze,ze,ae.placementViewportMatrix),C.push({circleArray:Pe,circleOffset:F,transform:we.posMatrix,invTransform:ze,coord:we}),z+=Pe.length/4,F=z}Ce&&E.draw(_,S.LINES,ir.disabled,Nr.disabled,v.colorModeForRenderPass(),Rr.disabled,{u_matrix:we.posMatrix,u_pixel_extrude_scale:[1/(B=v.transform).width,1/B.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),u.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,null,v.transform.zoom,null,null,Ce.collisionVertexBuffer)}var B;if(!m||!C.length)return;const X=v.useProgram("collisionCircle"),Q=new c.aR;Q.resize(4*z),Q._trim();let re=0;for(const me of C)for(let we=0;we<me.circleArray.length/4;we++){const ae=4*we,Ce=me.circleArray[ae+0],Pe=me.circleArray[ae+1],ze=me.circleArray[ae+2],Xe=me.circleArray[ae+3];Q.emplace(re++,Ce,Pe,ze,Xe,0),Q.emplace(re++,Ce,Pe,ze,Xe,1),Q.emplace(re++,Ce,Pe,ze,Xe,2),Q.emplace(re++,Ce,Pe,ze,Xe,3)}(!na||na.length<2*z)&&(na=function(me){const we=2*me,ae=new c.aT;ae.resize(we),ae._trim();for(let Ce=0;Ce<we;Ce++){const Pe=6*Ce;ae.uint16[Pe+0]=4*Ce+0,ae.uint16[Pe+1]=4*Ce+1,ae.uint16[Pe+2]=4*Ce+2,ae.uint16[Pe+3]=4*Ce+2,ae.uint16[Pe+4]=4*Ce+3,ae.uint16[Pe+5]=4*Ce+0}return ae}(z));const ce=_.createIndexBuffer(na,!0),pe=_.createVertexBuffer(Q,c.aS.members,!0);for(const me of C){const we=Qo(me.transform,me.invTransform,v.transform);X.draw(_,S.TRIANGLES,ir.disabled,Nr.disabled,v.colorModeForRenderPass(),Rr.disabled,we,v.style.map.terrain&&v.style.map.terrain.getTerrainData(me.coord),u.id,pe,ce,c.a0.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,v.transform.zoom,null,null,null)}pe.destroy(),ce.destroy()}Rr.disabled=new Rr(!1,1029,2305),Rr.backCCW=new Rr(!0,1029,2305);const Ql=c.an(new Float32Array(16));function hd(v,r,u,p,m,_){const{horizontalAlign:S,verticalAlign:E}=c.au(v);return new c.P((-(S-.5)*r/m+p[0])*_,(-(E-.5)*u/m+p[1])*_)}function ia(v,r,u,p,m,_){const S=r.tileAnchorPoint.add(new c.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let E=p.mult(_);u||(E=E.rotate(-m));const C=S.add(E);return he(C.x,C.y,r.labelPlaneMatrix,r.getElevation).point}if(u){const E=He(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),C=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return v.add(p.rotate(C))}return v.add(p)}function Va(v,r,u,p,m,_,S,E,C,z,F,B,X,Q){const re=v.text.placedSymbolArray,ce=v.text.dynamicLayoutVertexArray,pe=v.icon.dynamicLayoutVertexArray,me={};ce.clear();for(let we=0;we<re.length;we++){const ae=re.get(we),Ce=ae.hidden||!ae.crossTileID||v.allowVerticalPlacement&&!ae.placedOrientation?null:p[ae.crossTileID];if(Ce){const Pe=new c.P(ae.anchorX,ae.anchorY),ze={getElevation:Q,width:m.width,height:m.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:u,projection:F,projectionCache:null,tileAnchorPoint:Pe,translation:B,unwrappedTileID:X},Xe=u?he(Pe.x,Pe.y,S,Q):He(Pe.x,Pe.y,ze),st=G(m.cameraToCenterDistance,Xe.signedDistanceFromCamera);let gt=c.ai(v.textSizeData,C,ae)*st/c.ap;u&&(gt*=v.tilePixelRatio/E);const{width:wt,height:dt,anchor:ct,textOffset:Pt,textBoxScale:qt}=Ce,ft=hd(ct,wt,dt,Pt,qt,gt),_t=F.getPitchedTextCorrection(m,Pe.add(new c.P(B[0],B[1])),X),Gt=ia(Xe.point,ze,r,ft,m.angle,_t),Hr=v.allowVerticalPlacement&&ae.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let tr=0;tr<ae.numGlyphs;tr++)c.aj(ce,Gt,Hr);z&&ae.associatedIconIndex>=0&&(me[ae.associatedIconIndex]={shiftedAnchor:Gt,angle:Hr})}else Ot(ae.numGlyphs,ce)}if(z){pe.clear();const we=v.icon.placedSymbolArray;for(let ae=0;ae<we.length;ae++){const Ce=we.get(ae);if(Ce.hidden)Ot(Ce.numGlyphs,pe);else{const Pe=me[ae];if(Pe)for(let ze=0;ze<Ce.numGlyphs;ze++)c.aj(pe,Pe.shiftedAnchor,Pe.angle);else Ot(Ce.numGlyphs,pe)}}v.icon.dynamicLayoutVertexBuffer.updateData(pe)}v.text.dynamicLayoutVertexBuffer.updateData(ce)}function Ki(v,r,u){return u.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function dd(v,r,u,p,m,_,S,E,C,z,F,B){const X=v.context,Q=X.gl,re=v.transform,ce=Ko(),pe=E==="map",me=C==="map",we=E!=="viewport"&&u.layout.get("symbol-placement")!=="point",ae=pe&&!me&&!we,Ce=!me&&we,Pe=!u.layout.get("symbol-sort-key").isConstant();let ze=!1;const Xe=v.depthModeForSublayer(0,ir.ReadOnly),st=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),gt=[],wt=ce.getCircleRadiusCorrection(re);for(const dt of p){const ct=r.getTile(dt),Pt=ct.getBucket(u);if(!Pt)continue;const qt=m?Pt.text:Pt.icon;if(!qt||!qt.segments.get().length||!qt.hasVisibleVertices)continue;const ft=qt.programConfigurations.get(u.id),_t=m||Pt.sdfIcons,Gt=m?Pt.textSizeData:Pt.iconSizeData,Hr=me||re.pitch!==0,tr=v.useProgram(Ki(_t,m,Pt),ft),ar=c.ag(Gt,re.zoom),Wr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(dt);let Gn,xs,Gr,_i,ii=[0,0],Zn=null;if(m)xs=ct.glyphAtlasTexture,Gr=Q.LINEAR,Gn=ct.glyphAtlasTexture.size,Pt.iconsInText&&(ii=ct.imageAtlasTexture.size,Zn=ct.imageAtlasTexture,_i=Hr||v.options.rotating||v.options.zooming||Gt.kind==="composite"||Gt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const cr=u.layout.get("icon-size").constantOr(0)!==1||Pt.iconsNeedLinear;xs=ct.imageAtlasTexture,Gr=_t||v.options.rotating||v.options.zooming||cr||Hr?Q.LINEAR:Q.NEAREST,Gn=ct.imageAtlasTexture.size}const si=or(ct,1,v.transform.zoom),Ws=Ce?dt.posMatrix:Ql,sl=ps(Ws,me,pe,v.transform,si),Mc=Hn(Ws,me,pe,v.transform,si),ol=Hn(dt.posMatrix,me,pe,v.transform,si),es=ce.translatePosition(v.transform,ct,_,S),Ac=st&&Pt.hasTextData(),Fd=u.layout.get("icon-text-fit")!=="none"&&Ac&&Pt.hasIconData();if(we){const cr=v.style.map.terrain?(al,ll)=>v.style.map.terrain.getElevation(dt,al,ll):null,ua=u.layout.get("text-rotation-alignment")==="map";ee(Pt,dt.posMatrix,v,m,sl,ol,me,z,ua,ce,dt.toUnwrapped(),re.width,re.height,es,cr)}const ts=dt.posMatrix,rs=m&&st||Fd,Ao=we||rs?Ql:sl,ws=Mc,Nn=_t&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let qn;qn=_t?Pt.iconsInText?ed(Gt.kind,ar,ae,me,we,rs,v,ts,Ao,ws,es,Gn,ii,wt):Xl(Gt.kind,ar,ae,me,we,rs,v,ts,Ao,ws,es,m,Gn,!0,wt):Lp(Gt.kind,ar,ae,me,we,rs,v,ts,Ao,ws,es,m,Gn,wt);const Li={program:tr,buffers:qt,uniformValues:qn,atlasTexture:xs,atlasTextureIcon:Zn,atlasInterpolation:Gr,atlasInterpolationIcon:_i,isSDF:_t,hasHalo:Nn};if(Pe&&Pt.canOverlap){ze=!0;const cr=qt.segments.get();for(const ua of cr)gt.push({segments:new c.a0([ua]),sortKey:ua.sortKey,state:Li,terrainData:Wr})}else gt.push({segments:qt.segments,sortKey:0,state:Li,terrainData:Wr})}ze&&gt.sort((dt,ct)=>dt.sortKey-ct.sortKey);for(const dt of gt){const ct=dt.state;if(X.activeTexture.set(Q.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,Q.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(X.activeTexture.set(Q.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),ct.isSDF){const Pt=ct.uniformValues;ct.hasHalo&&(Pt.u_is_halo=1,fd(ct.buffers,dt.segments,u,v,ct.program,Xe,F,B,Pt,dt.terrainData)),Pt.u_is_halo=0}fd(ct.buffers,dt.segments,u,v,ct.program,Xe,F,B,ct.uniformValues,dt.terrainData)}}function fd(v,r,u,p,m,_,S,E,C,z){const F=p.context;m.draw(F,F.gl.TRIANGLES,_,S,E,Rr.disabled,C,z,u.id,v.layoutVertexBuffer,v.indexBuffer,r,u.paint,p.transform.zoom,v.programConfigurations.get(u.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function pd(v,r,u,p){const m=v.context,_=m.gl,S=Nr.disabled,E=new fn([_.ONE,_.ONE],c.aM.transparent,[!0,!0,!0,!0]),C=r.getBucket(u);if(!C)return;const z=p.key;let F=u.heatmapFbos.get(z);F||(F=eu(m,r.tileSize,r.tileSize),u.heatmapFbos.set(z,F)),m.bindFramebuffer.set(F.framebuffer),m.viewport.set([0,0,r.tileSize,r.tileSize]),m.clear({color:c.aM.transparent});const B=C.programConfigurations.get(u.id),X=v.useProgram("heatmap",B),Q=v.style.map.terrain.getTerrainData(p);X.draw(m,_.TRIANGLES,ir.disabled,S,E,Rr.disabled,yi(p.posMatrix,r,v.transform.zoom,u.paint.get("heatmap-intensity")),Q,u.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,u.paint,v.transform.zoom,B)}function sa(v,r,u){const p=v.context,m=p.gl;p.setColorMode(v.colorModeForRenderPass());const _=tu(p,r),S=u.key,E=r.heatmapFbos.get(S);E&&(p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,E.colorAttachment.get()),p.activeTexture.set(m.TEXTURE1),_.bind(m.LINEAR,m.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(p,m.TRIANGLES,ir.disabled,Nr.disabled,v.colorModeForRenderPass(),Rr.disabled,nc(v,r,0,1),null,r.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,r.paint,v.transform.zoom),E.destroy(),r.heatmapFbos.delete(S))}function eu(v,r,u){var p,m;const _=v.gl,S=_.createTexture();_.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const E=(p=v.HALF_FLOAT)!==null&&p!==void 0?p:_.UNSIGNED_BYTE,C=(m=v.RGBA16F)!==null&&m!==void 0?m:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,C,r,u,0,_.RGBA,E,null);const z=v.createFramebuffer(r,u,!1,!1);return z.colorAttachment.set(S),z}function tu(v,r){return r.colorRampTexture||(r.colorRampTexture=new it(v,r.colorRamp,v.gl.RGBA)),r.colorRampTexture}function Ha(v,r,u,p,m){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let S=_[u.to.toString()],E=_[u.from.toString()];if(!S&&E&&(S=E),!E&&S&&(E=S),!S||!E){const C=m.getPaintProperty(r);S=_[C],E=_[C]}S&&E&&v.setConstantPatternPositions(S,E)}function ru(v,r,u,p,m,_,S){const E=v.context.gl,C="fill-pattern",z=u.paint.get(C),F=z&&z.constantOr(1),B=u.getCrossfadeParameters();let X,Q,re,ce,pe;S?(Q=F&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=E.LINES):(Q=F?"fillPattern":"fill",X=E.TRIANGLES);const me=z.constantOr(null);for(const we of p){const ae=r.getTile(we);if(F&&!ae.patternsLoaded())continue;const Ce=ae.getBucket(u);if(!Ce)continue;const Pe=Ce.programConfigurations.get(u.id),ze=v.useProgram(Q,Pe),Xe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we);F&&(v.context.activeTexture.set(E.TEXTURE0),ae.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Pe.updatePaintBuffers(B)),Ha(Pe,C,me,ae,u);const st=Xe?we:null,gt=v.translatePosMatrix(st?st.posMatrix:we.posMatrix,ae,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){ce=Ce.indexBuffer2,pe=Ce.segments2;const wt=[E.drawingBufferWidth,E.drawingBufferHeight];re=Q==="fillOutlinePattern"&&F?Ap(gt,v,B,ae,wt):A_(gt,wt)}else ce=Ce.indexBuffer,pe=Ce.segments,re=F?Mp(gt,v,B,ae):$a(gt);ze.draw(v.context,X,m,v.stencilModeForClipping(we),_,Rr.disabled,re,Xe,u.id,Ce.layoutVertexBuffer,ce,pe,u.paint,v.transform.zoom,Pe)}}function dc(v,r,u,p,m,_,S){const E=v.context,C=E.gl,z="fill-extrusion-pattern",F=u.paint.get(z),B=F.constantOr(1),X=u.getCrossfadeParameters(),Q=u.paint.get("fill-extrusion-opacity"),re=F.constantOr(null);for(const ce of p){const pe=r.getTile(ce),me=pe.getBucket(u);if(!me)continue;const we=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ce),ae=me.programConfigurations.get(u.id),Ce=v.useProgram(B?"fillExtrusionPattern":"fillExtrusion",ae);B&&(v.context.activeTexture.set(C.TEXTURE0),pe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ae.updatePaintBuffers(X)),Ha(ae,z,re,pe,u);const Pe=v.translatePosMatrix(ce.posMatrix,pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ze=u.paint.get("fill-extrusion-vertical-gradient"),Xe=B?rc(Pe,v,ze,Q,ce,X,pe):ql(Pe,v,ze,Q);Ce.draw(E,E.gl.TRIANGLES,m,_,S,Rr.backCCW,Xe,we,u.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,u.paint,v.transform.zoom,ae,v.style.map.terrain&&me.centroidVertexBuffer)}}function Wa(v,r,u,p,m,_,S){const E=v.context,C=E.gl,z=u.fbo;if(!z)return;const F=v.useProgram("hillshade"),B=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,z.colorAttachment.get()),F.draw(E,C.TRIANGLES,m,_,S,Rr.disabled,((X,Q,re,ce)=>{const pe=re.paint.get("hillshade-shadow-color"),me=re.paint.get("hillshade-highlight-color"),we=re.paint.get("hillshade-accent-color");let ae=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=X.transform.angle);const Ce=!X.options.moving;return{u_matrix:ce?ce.posMatrix:X.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:ic(0,Q.tileID),u_light:[re.paint.get("hillshade-exaggeration"),ae],u_shadow:pe,u_highlight:me,u_accent:we}})(v,u,p,B?r:null),B,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Ga(v,r,u,p,m,_){const S=v.context,E=S.gl,C=r.dem;if(C&&C.data){const z=C.dim,F=C.stride,B=C.getPixels();if(S.activeTexture.set(E.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(F),r.demTexture){const Q=r.demTexture;Q.update(B,{premultiply:!1}),Q.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else r.demTexture=new it(S,B,E.RGBA,{premultiply:!1}),r.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);S.activeTexture.set(E.TEXTURE0);let X=r.fbo;if(!X){const Q=new it(S,{width:z,height:z,data:null},E.RGBA);Q.bind(E.LINEAR,E.CLAMP_TO_EDGE),X=r.fbo=S.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(Q.texture)}S.bindFramebuffer.set(X.framebuffer),S.viewport.set([0,0,z,z]),v.useProgram("hillshadePrepare").draw(S,E.TRIANGLES,p,m,_,Rr.disabled,((Q,re)=>{const ce=re.stride,pe=c.H();return c.aP(pe,0,c.X,-c.X,0,0,1),c.J(pe,pe,[0,-c.X,0]),{u_matrix:pe,u_image:1,u_dimension:[ce,ce],u_zoom:Q.overscaledZ,u_unpack:re.getUnpackVector()}})(r.tileID,C),null,u.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function qp(v,r,u,p,m,_){const S=p.paint.get("raster-fade-duration");if(!_&&S>0){const E=A.now(),C=(E-v.timeAdded)/S,z=r?(E-r.timeAdded)/S:-1,F=u.getSource(),B=m.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),X=!r||Math.abs(r.tileID.overscaledZ-B)>Math.abs(v.tileID.overscaledZ-B),Q=X&&v.refreshedUponExpiration?1:c.ac(X?C:1-z,0,1);return v.refreshedUponExpiration&&C>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const md=new c.aM(1,0,0,1),vr=new c.aM(0,1,0,1),fc=new c.aM(0,0,1,1),G_=new c.aM(1,0,1,1),Yp=new c.aM(0,1,1,1);function Za(v,r,u,p){pc(v,0,r+u/2,v.transform.width,u,p)}function Xp(v,r,u,p){pc(v,r-u/2,0,u,v.transform.height,p)}function pc(v,r,u,p,m,_){const S=v.context,E=S.gl;E.enable(E.SCISSOR_TEST),E.scissor(r*v.pixelRatio,u*v.pixelRatio,p*v.pixelRatio,m*v.pixelRatio),S.clear({color:_}),E.disable(E.SCISSOR_TEST)}function Kp(v,r,u){const p=v.context,m=p.gl,_=u.posMatrix,S=v.useProgram("debug"),E=ir.disabled,C=Nr.disabled,z=v.colorModeForRenderPass(),F="$debug",B=v.style.map.terrain&&v.style.map.terrain.getTerrainData(u);p.activeTexture.set(m.TEXTURE0);const X=r.getTileByID(u.key).latestRawTileData,Q=Math.floor((X&&X.byteLength||0)/1024),re=r.getTile(u).tileSize,ce=512/Math.min(re,512)*(u.overscaledZ/v.transform.zoom)*.5;let pe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(pe+=` => ${u.overscaledZ}`),function(me,we){me.initDebugOverlayCanvas();const ae=me.debugOverlayCanvas,Ce=me.context.gl,Pe=me.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,ae.width,ae.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(we,5,5),Pe.strokeText(we,5,5),me.debugOverlayTexture.update(ae),me.debugOverlayTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE)}(v,`${pe} ${Q}kB`),S.draw(p,m.TRIANGLES,E,C,fn.alphaBlended,Rr.disabled,Yl(_,c.aM.transparent,ce),null,F,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),S.draw(p,m.LINE_STRIP,E,C,z,Rr.disabled,Yl(_,c.aM.red),B,F,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Jp(v,r,u){const p=v.context,m=p.gl,_=v.colorModeForRenderPass(),S=new ir(m.LEQUAL,ir.ReadWrite,v.depthRangeFor3D),E=v.useProgram("terrain"),C=r.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const z of u){const F=v.renderToTexture.getTexture(z),B=r.getTerrainData(z.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,F.texture);const X=v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),Q=r.getMeshFrameDelta(v.transform.zoom),re=v.transform.calculateFogMatrix(z.tileID.toUnwrapped()),ce=Jh(X,Q,re,v.style.sky,v.transform.pitch);E.draw(p,m.TRIANGLES,S,Nr.disabled,_,Rr.backCCW,ce,B,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}class mc{constructor(r,u,p){this.vertexBuffer=r,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class gc{constructor(r,u){this.context=new W_(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=jt.maxUnderzooming+jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xh}resize(r,u,p){if(this.width=Math.floor(r*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new c.aX;u.emplaceBack(0,0),u.emplaceBack(c.X,0),u.emplaceBack(0,c.X),u.emplaceBack(c.X,c.X),this.tileExtentBuffer=r.createVertexBuffer(u,Jo.members),this.tileExtentSegments=c.a0.simpleSegment(0,0,4,2);const p=new c.aX;p.emplaceBack(0,0),p.emplaceBack(c.X,0),p.emplaceBack(0,c.X),p.emplaceBack(c.X,c.X),this.debugBuffer=r.createVertexBuffer(p,Jo.members),this.debugSegments=c.a0.simpleSegment(0,0,4,5);const m=new c.$;m.emplaceBack(0,0,0,0),m.emplaceBack(c.X,0,c.X,0),m.emplaceBack(0,c.X,0,c.X),m.emplaceBack(c.X,c.X,c.X,c.X),this.rasterBoundsBuffer=r.createVertexBuffer(m,Ne.members),this.rasterBoundsSegments=c.a0.simpleSegment(0,0,4,2);const _=new c.aX;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,Jo.members),this.viewportSegments=c.a0.simpleSegment(0,0,4,2);const S=new c.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(S);const E=new c.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(E);const C=this.context.gl;this.stencilClearMode=new Nr({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.H();c.aP(p,0,this.width,this.height,0,0,1),c.K(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,ir.disabled,this.stencilClearMode,fn.disabled,Rr.disabled,gi(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const p=this.context,m=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(fn.disabled),p.setDepthMode(ir.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const E=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);_.draw(p,m.TRIANGLES,ir.disabled,new Nr({func:m.ALWAYS,mask:0},E,255,m.KEEP,m.KEEP,m.REPLACE),fn.disabled,Rr.disabled,gi(S.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new Nr({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new Nr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,p=r.sort((S,E)=>E.overscaledZ-S.overscaledZ),m=p[p.length-1].overscaledZ,_=p[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const S={};for(let E=0;E<_;E++)S[E+m]=new Nr({func:u.GEQUAL,mask:255},E+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[S,p]}return[{[m]:Nr.disabled},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new fn([r.CONSTANT_COLOR,r.ONE],new c.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fn.unblended:fn.alphaBlended}depthModeForSublayer(r,u,p){if(!this.opaquePassEnabledForLayer())return ir.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new ir(p||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const p=this.style._order,m=this.style.sourceCaches,_={},S={},E={};for(const C in m){const z=m[C];z.used&&z.prepare(this.context),_[C]=z.getVisibleCoordinates(),S[C]=_[C].slice().reverse(),E[C]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<p.length;C++)if(this.style._layers[p[C]].is3D()){this.opaquePassCutoff=C;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const C of p){const z=this.style._layers[C];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const F=S[z.source];(z.type==="custom"||F.length)&&this.renderLayer(this,m[z.source],z,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aM.black:c.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(C,z){const F=C.context,B=F.gl,X=((me,we,ae)=>({u_sky_color:me.properties.get("sky-color"),u_horizon_color:me.properties.get("horizon-color"),u_horizon:(we.height/2+we.getHorizon())*ae,u_sky_horizon_blend:me.properties.get("sky-horizon-blend")*we.height/2*ae}))(z,C.style.map.transform,C.pixelRatio),Q=new ir(B.LEQUAL,ir.ReadWrite,[0,1]),re=Nr.disabled,ce=C.colorModeForRenderPass(),pe=C.useProgram("sky");if(!z.mesh){const me=new c.aX;me.emplaceBack(-1,-1),me.emplaceBack(1,-1),me.emplaceBack(1,1),me.emplaceBack(-1,1);const we=new c.aY;we.emplaceBack(0,1,2),we.emplaceBack(0,2,3),z.mesh=new mc(F.createVertexBuffer(me,Jo.members),F.createIndexBuffer(we),c.a0.simpleSegment(0,0,me.length,we.length))}pe.draw(F,B.TRIANGLES,Q,re,ce,Rr.disabled,X,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[p[this.currentLayer]],z=m[C.source],F=_[C.source];this._renderTileClippingMasks(C,F),this.renderLayer(this,z,C,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const C=this.style._layers[p[this.currentLayer]],z=m[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;const F=(C.type==="symbol"?E:S)[C.source];this._renderTileClippingMasks(C,_[C.source]),this.renderLayer(this,z,C,F)}if(this.options.showTileBoundaries){const C=function(z,F){let B=null;const X=Object.values(z._layers).flatMap(pe=>pe.source&&!pe.isHidden(F)?[z.sourceCaches[pe.source]]:[]),Q=X.filter(pe=>pe.getSource().type==="vector"),re=X.filter(pe=>pe.getSource().type!=="vector"),ce=pe=>{(!B||B.getSource().maxzoom<pe.getSource().maxzoom)&&(B=pe)};return Q.forEach(pe=>ce(pe)),B||re.forEach(pe=>ce(pe)),B}(this.style,this.transform.zoom);C&&function(z,F,B){for(let X=0;X<B.length;X++)Kp(z,F,B[X])}(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const z=C.transform.padding;Za(C,C.transform.height-(z.top||0),3,md),Za(C,z.bottom||0,3,vr),Xp(C,z.left||0,3,fc),Xp(C,C.transform.width-(z.right||0),3,G_);const F=C.transform.centerPoint;(function(B,X,Q,re){pc(B,X-1,Q-10,2,20,re),pc(B,X-10,Q-1,20,2,re)})(C,F.x,C.transform.height-F.y,Yp)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!c.a_(u,p):!c.a$(u,p)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(c.b0(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,S){const E=_.context,C=E.gl,z=fn.unblended,F=new ir(C.LEQUAL,ir.ReadWrite,[0,1]),B=S.getTerrainMesh(),X=S.sourceCache.getRenderableTiles(),Q=_.useProgram("terrainDepth");E.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),E.clear({color:c.aM.transparent,depth:1});for(const re of X){const ce=S.getTerrainData(re.tileID),pe={u_matrix:_.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(_.transform.zoom)};Q.draw(E,C.TRIANGLES,F,Nr.disabled,z,Rr.backCCW,pe,ce,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,S){const E=_.context,C=E.gl,z=fn.unblended,F=new ir(C.LEQUAL,ir.ReadWrite,[0,1]),B=S.getTerrainMesh(),X=S.getCoordsTexture(),Q=S.sourceCache.getRenderableTiles(),re=_.useProgram("terrainCoords");E.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),E.clear({color:c.aM.transparent,depth:1}),S.coordsIndex=[];for(const ce of Q){const pe=S.getTerrainData(ce.tileID);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,X.texture);const me={u_matrix:_.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(_.transform.zoom)};re.draw(E,C.TRIANGLES,F,Nr.disabled,z,Rr.backCCW,me,pe,"terrain",B.vertexBuffer,B.indexBuffer,B.segments),S.coordsIndex.push(ce.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(r,u,p,m){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(m||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,S,E,C,z){if(_.renderPass!=="translucent")return;const F=Nr.disabled,B=_.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,Q,re,ce,pe,me,we,ae,Ce){const Pe=Q.transform,ze=Ko(),Xe=pe==="map",st=me==="map";for(const gt of X){const wt=ce.getTile(gt),dt=wt.getBucket(re);if(!dt||!dt.text||!dt.text.segments.get().length)continue;const ct=c.ag(dt.textSizeData,Pe.zoom),Pt=or(wt,1,Q.transform.zoom),qt=ps(gt.posMatrix,st,Xe,Q.transform,Pt),ft=re.layout.get("icon-text-fit")!=="none"&&dt.hasIconData();if(ct){const _t=Math.pow(2,Pe.zoom-wt.tileID.overscaledZ),Gt=Q.style.map.terrain?(tr,ar)=>Q.style.map.terrain.getElevation(gt,tr,ar):null,Hr=ze.translatePosition(Pe,wt,we,ae);Va(dt,Xe,st,Ce,Pe,qt,gt.posMatrix,_t,ct,ft,ze,Hr,gt.toUnwrapped(),Gt)}}}(C,_,E,S,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),z),E.paint.get("icon-opacity").constantOr(1)!==0&&dd(_,S,E,C,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),F,B),E.paint.get("text-opacity").constantOr(1)!==0&&dd(_,S,E,C,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),F,B),S.map.showCollisionBoxes&&(Jl(_,S,E,C,!0),Jl(_,S,E,C,!1))})(r,u,p,m,this.style.placement.variableOffsets);break;case"circle":(function(_,S,E,C){if(_.renderPass!=="translucent")return;const z=E.paint.get("circle-opacity"),F=E.paint.get("circle-stroke-width"),B=E.paint.get("circle-stroke-opacity"),X=!E.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(F.constantOr(1)===0||B.constantOr(1)===0))return;const Q=_.context,re=Q.gl,ce=_.depthModeForSublayer(0,ir.ReadOnly),pe=Nr.disabled,me=_.colorModeForRenderPass(),we=[];for(let ae=0;ae<C.length;ae++){const Ce=C[ae],Pe=S.getTile(Ce),ze=Pe.getBucket(E);if(!ze)continue;const Xe=ze.programConfigurations.get(E.id),st=_.useProgram("circle",Xe),gt=ze.layoutVertexBuffer,wt=ze.indexBuffer,dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ce),ct={programConfiguration:Xe,program:st,layoutVertexBuffer:gt,indexBuffer:wt,uniformValues:D_(_,Ce,Pe,E),terrainData:dt};if(X){const Pt=ze.segments.get();for(const qt of Pt)we.push({segments:new c.a0([qt]),sortKey:qt.sortKey,state:ct})}else we.push({segments:ze.segments,sortKey:0,state:ct})}X&&we.sort((ae,Ce)=>ae.sortKey-Ce.sortKey);for(const ae of we){const{programConfiguration:Ce,program:Pe,layoutVertexBuffer:ze,indexBuffer:Xe,uniformValues:st,terrainData:gt}=ae.state;Pe.draw(Q,re.TRIANGLES,ce,pe,me,Rr.disabled,st,gt,E.id,ze,Xe,ae.segments,E.paint,_.transform.zoom,Ce)}})(r,u,p,m);break;case"heatmap":(function(_,S,E,C){if(E.paint.get("heatmap-opacity")===0)return;const z=_.context;if(_.style.map.terrain){for(const F of C){const B=S.getTile(F);S.hasRenderableParent(F)||(_.renderPass==="offscreen"?pd(_,B,E,F):_.renderPass==="translucent"&&sa(_,E,F))}z.viewport.set([0,0,_.width,_.height])}else _.renderPass==="offscreen"?function(F,B,X,Q){const re=F.context,ce=re.gl,pe=Nr.disabled,me=new fn([ce.ONE,ce.ONE],c.aM.transparent,[!0,!0,!0,!0]);(function(we,ae,Ce){const Pe=we.gl;we.activeTexture.set(Pe.TEXTURE1),we.viewport.set([0,0,ae.width/4,ae.height/4]);let ze=Ce.heatmapFbos.get(c.aU);ze?(Pe.bindTexture(Pe.TEXTURE_2D,ze.colorAttachment.get()),we.bindFramebuffer.set(ze.framebuffer)):(ze=eu(we,ae.width/4,ae.height/4),Ce.heatmapFbos.set(c.aU,ze))})(re,F,X),re.clear({color:c.aM.transparent});for(let we=0;we<Q.length;we++){const ae=Q[we];if(B.hasRenderableParent(ae))continue;const Ce=B.getTile(ae),Pe=Ce.getBucket(X);if(!Pe)continue;const ze=Pe.programConfigurations.get(X.id),Xe=F.useProgram("heatmap",ze),{zoom:st}=F.transform;Xe.draw(re,ce.TRIANGLES,ir.disabled,pe,me,Rr.disabled,yi(ae.posMatrix,Ce,st,X.paint.get("heatmap-intensity")),null,X.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,X.paint,F.transform.zoom,ze)}re.viewport.set([0,0,F.width,F.height])}(_,S,E,C):_.renderPass==="translucent"&&function(F,B){const X=F.context,Q=X.gl;X.setColorMode(F.colorModeForRenderPass());const re=B.heatmapFbos.get(c.aU);re&&(X.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,re.colorAttachment.get()),X.activeTexture.set(Q.TEXTURE1),tu(X,B).bind(Q.LINEAR,Q.CLAMP_TO_EDGE),F.useProgram("heatmapTexture").draw(X,Q.TRIANGLES,ir.disabled,Nr.disabled,F.colorModeForRenderPass(),Rr.disabled,nc(F,B,0,1),null,B.id,F.viewportBuffer,F.quadTriangleIndexBuffer,F.viewportSegments,B.paint,F.transform.zoom))}(_,E)})(r,u,p,m);break;case"line":(function(_,S,E,C){if(_.renderPass!=="translucent")return;const z=E.paint.get("line-opacity"),F=E.paint.get("line-width");if(z.constantOr(1)===0||F.constantOr(1)===0)return;const B=_.depthModeForSublayer(0,ir.ReadOnly),X=_.colorModeForRenderPass(),Q=E.paint.get("line-dasharray"),re=E.paint.get("line-pattern"),ce=re.constantOr(1),pe=E.paint.get("line-gradient"),me=E.getCrossfadeParameters(),we=ce?"linePattern":Q?"lineSDF":pe?"lineGradient":"line",ae=_.context,Ce=ae.gl;let Pe=!0;for(const ze of C){const Xe=S.getTile(ze);if(ce&&!Xe.patternsLoaded())continue;const st=Xe.getBucket(E);if(!st)continue;const gt=st.programConfigurations.get(E.id),wt=_.context.program.get(),dt=_.useProgram(we,gt),ct=Pe||dt.program!==wt,Pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ze),qt=re.constantOr(null);if(qt&&Xe.imageAtlas){const Gt=Xe.imageAtlas,Hr=Gt.patternPositions[qt.to.toString()],tr=Gt.patternPositions[qt.from.toString()];Hr&&tr&&gt.setConstantPatternPositions(Hr,tr)}const ft=Pt?ze:null,_t=ce?ja(_,Xe,E,me,ft):Q?z_(_,Xe,E,Q,me,ft):pe?Dp(_,Xe,E,st.lineClipsArray.length,ft):sc(_,Xe,E,ft);if(ce)ae.activeTexture.set(Ce.TEXTURE0),Xe.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),gt.updatePaintBuffers(me);else if(Q&&(ct||_.lineAtlas.dirty))ae.activeTexture.set(Ce.TEXTURE0),_.lineAtlas.bind(ae);else if(pe){const Gt=st.gradients[E.id];let Hr=Gt.texture;if(E.gradientVersion!==Gt.version){let tr=256;if(E.stepInterpolant){const ar=S.getSource().maxzoom,Wr=ze.canonical.z===ar?Math.ceil(1<<_.transform.maxZoom-ze.canonical.z):1;tr=c.ac(c.aV(st.maxLineLength/c.X*1024*Wr),256,ae.maxTextureSize)}Gt.gradient=c.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:tr,image:Gt.gradient||void 0,clips:st.lineClipsArray}),Gt.texture?Gt.texture.update(Gt.gradient):Gt.texture=new it(ae,Gt.gradient,Ce.RGBA),Gt.version=E.gradientVersion,Hr=Gt.texture}ae.activeTexture.set(Ce.TEXTURE0),Hr.bind(E.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}dt.draw(ae,Ce.TRIANGLES,B,_.stencilModeForClipping(ze),X,Rr.disabled,_t,Pt,E.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,E.paint,_.transform.zoom,gt,st.layoutVertexBuffer2),Pe=!1}})(r,u,p,m);break;case"fill":(function(_,S,E,C){const z=E.paint.get("fill-color"),F=E.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const B=_.colorModeForRenderPass(),X=E.paint.get("fill-pattern"),Q=_.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(c.aM.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Q){const re=_.depthModeForSublayer(1,_.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly);ru(_,S,E,C,re,B,!1)}if(_.renderPass==="translucent"&&E.paint.get("fill-antialias")){const re=_.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly);ru(_,S,E,C,re,B,!0)}})(r,u,p,m);break;case"fill-extrusion":(function(_,S,E,C){const z=E.paint.get("fill-extrusion-opacity");if(z!==0&&_.renderPass==="translucent"){const F=new ir(_.context.gl.LEQUAL,ir.ReadWrite,_.depthRangeFor3D);if(z!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))dc(_,S,E,C,F,Nr.disabled,fn.disabled),dc(_,S,E,C,F,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const B=_.colorModeForRenderPass();dc(_,S,E,C,F,Nr.disabled,B)}}})(r,u,p,m);break;case"hillshade":(function(_,S,E,C){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const z=_.context,F=_.depthModeForSublayer(0,ir.ReadOnly),B=_.colorModeForRenderPass(),[X,Q]=_.renderPass==="translucent"?_.stencilConfigForOverlap(C):[{},C];for(const re of Q){const ce=S.getTile(re);ce.needsHillshadePrepare!==void 0&&ce.needsHillshadePrepare&&_.renderPass==="offscreen"?Ga(_,ce,E,F,Nr.disabled,B):_.renderPass==="translucent"&&Wa(_,re,ce,E,F,X[re.overscaledZ],B)}z.viewport.set([0,0,_.width,_.height])})(r,u,p,m);break;case"raster":(function(_,S,E,C){if(_.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!C.length)return;const z=_.context,F=z.gl,B=S.getSource(),X=_.useProgram("raster"),Q=_.colorModeForRenderPass(),[re,ce]=B instanceof ot?[{},C]:_.stencilConfigForOverlap(C),pe=ce[ce.length-1].overscaledZ,me=!_.options.moving;for(const we of ce){const ae=_.depthModeForSublayer(we.overscaledZ-pe,E.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,F.LESS),Ce=S.getTile(we);Ce.registerFadeDuration(E.paint.get("raster-fade-duration"));const Pe=S.findLoadedParent(we,0),ze=S.findLoadedSibling(we),Xe=qp(Ce,Pe||ze||null,S,E,_.transform,_.style.map.terrain);let st,gt;const wt=E.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;z.activeTexture.set(F.TEXTURE0),Ce.texture.bind(wt,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(F.TEXTURE1),Pe?(Pe.texture.bind(wt,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),st=Math.pow(2,Pe.tileID.overscaledZ-Ce.tileID.overscaledZ),gt=[Ce.tileID.canonical.x*st%1,Ce.tileID.canonical.y*st%1]):Ce.texture.bind(wt,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Ce.texture.useMipmap&&z.extTextureFilterAnisotropic&&_.transform.pitch>20&&F.texParameterf(F.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(we),ct=dt?we:null,Pt=ct?ct.posMatrix:_.transform.calculatePosMatrix(we.toUnwrapped(),me),qt=R_(Pt,gt||[0,0],st||1,Xe,E);B instanceof ot?X.draw(z,F.TRIANGLES,ae,Nr.disabled,Q,Rr.disabled,qt,dt,E.id,B.boundsBuffer,_.quadTriangleIndexBuffer,B.boundsSegments):X.draw(z,F.TRIANGLES,ae,re[we.overscaledZ],Q,Rr.disabled,qt,dt,E.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,p,m);break;case"background":(function(_,S,E,C){const z=E.paint.get("background-color"),F=E.paint.get("background-opacity");if(F===0)return;const B=_.context,X=B.gl,Q=_.transform,re=Q.tileSize,ce=E.paint.get("background-pattern");if(_.isPatternMissing(ce))return;const pe=!ce&&z.a===1&&F===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==pe)return;const me=Nr.disabled,we=_.depthModeForSublayer(0,pe==="opaque"?ir.ReadWrite:ir.ReadOnly),ae=_.colorModeForRenderPass(),Ce=_.useProgram(ce?"backgroundPattern":"background"),Pe=C||Q.coveringTiles({tileSize:re,terrain:_.style.map.terrain});ce&&(B.activeTexture.set(X.TEXTURE0),_.imageManager.bind(_.context));const ze=E.getCrossfadeParameters();for(const Xe of Pe){const st=C?Xe.posMatrix:_.transform.calculatePosMatrix(Xe.toUnwrapped()),gt=ce?td(st,F,_,ce,{tileID:Xe,tileSize:re},ze):oc(st,F,z),wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Xe);Ce.draw(B,X.TRIANGLES,we,me,ae,Rr.disabled,gt,wt,E.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,p,m);break;case"custom":(function(_,S,E){const C=_.context,z=E.implementation;if(_.renderPass==="offscreen"){const F=z.prerender;F&&(_.setCustomLayerDefaults(),C.setColorMode(_.colorModeForRenderPass()),F.call(z,C.gl,_.transform.customLayerMatrix()),C.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),C.setColorMode(_.colorModeForRenderPass()),C.setStencilMode(Nr.disabled);const F=z.renderingMode==="3d"?new ir(_.context.gl.LEQUAL,ir.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,ir.ReadOnly);C.setDepthMode(F),z.render(C.gl,_.transform.customLayerMatrix(),{farZ:_.transform.farZ,nearZ:_.transform.nearZ,fov:_.transform._fov,modelViewProjectionMatrix:_.transform.modelViewProjectionMatrix,projectionMatrix:_.transform.projectionMatrix}),C.setDirty(),_.setBaseState(),C.bindFramebuffer.set(null)}})(r,0,p)}}translatePosMatrix(r,u,p,m,_){if(!p[0]&&!p[1])return r;const S=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(S){const z=Math.sin(S),F=Math.cos(S);p=[p[0]*F-p[1]*z,p[0]*z+p[1]*F]}const E=[_?p[0]:or(u,p[0],this.transform.zoom),_?p[1]:or(u,p[1],this.transform.zoom),0],C=new Float32Array(16);return c.J(C,r,E),C}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!u||!p}useProgram(r,u){this.cache=this.cache||{};const p=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Qh(this.context,Po[r],u,rd[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new it(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class qa{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,p){const m=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const C=1/(E=c.af([],E,r))[3]/u*m;return c.b1(E,E,[C,C,1/E[3],C])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const C=function(X,Q){var re=Q[0],ce=Q[1],pe=Q[2],me=re*re+ce*ce+pe*pe;return me>0&&(me=1/Math.sqrt(me)),X[0]=Q[0]*me,X[1]=Q[1]*me,X[2]=Q[2]*me,X}([],function(X,Q,re){var ce=Q[0],pe=Q[1],me=Q[2],we=re[0],ae=re[1],Ce=re[2];return X[0]=pe*Ce-me*ae,X[1]=me*we-ce*Ce,X[2]=ce*ae-pe*we,X}([],ge([],_[E[0]],_[E[1]]),ge([],_[E[2]],_[E[1]]))),z=-((F=C)[0]*(B=_[E[1]])[0]+F[1]*B[1]+F[2]*B[2]);var F,B;return C.concat(z)});return new qa(_,S)}}class Ya{constructor(r,u){this.min=r,this.max=u,this.center=function(p,m,_){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p}([],function(p,m,_){return p[0]=m[0]+_[0],p[1]=m[1]+_[1],p[2]=m[2]+_[2],p}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],p=oe(this.min),m=oe(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Ya(p,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let S=0;for(let E=0;E<u.length;E++)c.b2(_,u[E])>=0&&S++;if(S===0)return 0;S!==u.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let E=0;E<r.points.length;E++){const C=r.points[E][m]-this.min[m];_=Math.min(_,C),S=Math.max(S,C)}if(S<0||_>this.max[m]-this.min[m])return 0}return 1}}class Xa{constructor(r=0,u=0,p=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=p,this.right=m}interpolate(r,u,p){return u.top!=null&&r.top!=null&&(this.top=c.y.number(r.top,u.top,p)),u.bottom!=null&&r.bottom!=null&&(this.bottom=c.y.number(r.bottom,u.bottom,p)),u.left!=null&&r.left!=null&&(this.left=c.y.number(r.left,u.left,p)),u.right!=null&&r.right!=null&&(this.right=c.y.number(r.right,u.right,p)),this}getCenter(r,u){const p=c.ac((this.left+r-this.right)/2,0,r),m=c.ac((this.top+u-this.bottom)/2,0,u);return new c.P(p,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Xa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const gd=85.051129;class Ka{constructor(r,u,p,m,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xa,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new Ka(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-c.b3(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new c.A(4);return c.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,m,_){var S=m[0],E=m[1],C=m[2],z=m[3],F=Math.sin(_),B=Math.cos(_);p[0]=S*B+C*F,p[1]=E*B+z*F,p[2]=S*-F+C*B,p[3]=E*-F+z*B}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=c.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,p){this._unmodified=!1,this._edgeInsets.interpolate(r,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new c.b4(0,r)];if(this._renderWorldCopies){const p=this.pointCoordinate(new c.P(0,0)),m=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),S=this.pointCoordinate(new c.P(0,this.height)),E=Math.floor(Math.min(p.x,m.x,_.x,S.x)),C=Math.floor(Math.max(p.x,m.x,_.x,S.x)),z=1;for(let F=E-z;F<=C+z;F++)F!==0&&u.push(new c.b4(F,r))}return u}coveringTiles(r){var u,p;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),E=c.Z.fromLngLat(this.center),C=Math.pow(2,m),z=[C*S.x,C*S.y,0],F=[C*E.x,C*E.y,0],B=qa.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let X=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=m);const Q=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,re=ae=>({aabb:new Ya([ae*C,0,0],[(ae+1)*C,C,0]),zoom:0,x:0,y:0,wrap:ae,fullyVisible:!1}),ce=[],pe=[],me=m,we=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let ae=1;ae<=3;ae++)ce.push(re(-ae)),ce.push(re(ae));for(ce.push(re(0));ce.length>0;){const ae=ce.pop(),Ce=ae.x,Pe=ae.y;let ze=ae.fullyVisible;if(!ze){const dt=ae.aabb.intersects(B);if(dt===0)continue;ze=dt===2}const Xe=r.terrain?z:F,st=ae.aabb.distanceX(Xe),gt=ae.aabb.distanceY(Xe),wt=Math.max(Math.abs(st),Math.abs(gt));if(ae.zoom===me||wt>Q+(1<<me-ae.zoom)-2&&ae.zoom>=X){const dt=me-ae.zoom,ct=z[0]-.5-(Ce<<dt),Pt=z[1]-.5-(Pe<<dt);pe.push({tileID:new c.S(ae.zoom===me?we:ae.zoom,ae.wrap,ae.zoom,Ce,Pe),distanceSq:Fe([F[0]-.5-Ce,F[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(ct*ct+Pt*Pt)})}else for(let dt=0;dt<4;dt++){const ct=(Ce<<1)+dt%2,Pt=(Pe<<1)+(dt>>1),qt=ae.zoom+1;let ft=ae.aabb.quadrant(dt);if(r.terrain){const _t=new c.S(qt,ae.wrap,qt,ct,Pt),Gt=r.terrain.getMinMaxElevation(_t),Hr=(u=Gt.minElevation)!==null&&u!==void 0?u:this.elevation,tr=(p=Gt.maxElevation)!==null&&p!==void 0?p:this.elevation;ft=new Ya([ft.min[0],ft.min[1],Hr],[ft.max[0],ft.max[1],tr])}ce.push({aabb:ft,zoom:qt,x:ct,y:Pt,wrap:ae.wrap,fullyVisible:ze})}}return pe.sort((ae,Ce)=>ae.distanceSq-Ce.distanceSq).map(ae=>ae.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=c.ac(r.lat,-85.051129,gd);return new c.P(c.O(r.lng)*this.worldSize,c.Q(u)*this.worldSize)}unproject(r){return new c.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,r),_=r.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-_))return;const S=p+u-_,E=Math.cos(this._pitch)*this.cameraToCenterDistance/S/c.b5(1,m.lat),C=this.scaleZoom(E/this.tileSize);this._elevation=_,this._center=m,this.zoom=C}setLocationAtPoint(r,u){const p=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),S=new c.Z(_.x-(p.x-m.x),_.y-(p.y-m.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return c.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const X=u.pointCoordinate(r);if(X!=null)return X}const p=[r.x,r.y,0,1],m=[r.x,r.y,1,1];c.af(p,p,this.pixelMatrixInverse),c.af(m,m,this.pixelMatrixInverse);const _=p[3],S=m[3],E=p[1]/_,C=m[1]/S,z=p[2]/_,F=m[2]/S,B=z===F?0:(0-z)/(F-z);return new c.Z(c.y.number(p[0]/_,m[0]/S,B)/this.worldSize,c.y.number(E,C,B)/this.worldSize)}coordinatePoint(r,u=0,p=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return c.af(m,m,p),new c.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new ie().extend(this.pointLocation(new c.P(0,r))).extend(this.pointLocation(new c.P(this.width,r))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ie([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,gd])}calculateTileMatrix(r){const u=r.canonical,p=this.worldSize/this.zoomScale(u.z),m=u.x+Math.pow(2,u.z)*r.wrap,_=c.an(new Float64Array(16));return c.J(_,_,[m*p,u.y*p,0]),c.K(_,_,[p/c.X,p/c.X,1]),_}calculatePosMatrix(r,u=!1){const p=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const _=this.calculateTileMatrix(r);return c.L(_,u?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,_),m[p]=new Float32Array(_),m[p]}calculateFogMatrix(r){const u=r.key,p=this._fogMatrixCache;if(p[u])return p[u];const m=this.calculateTileMatrix(r);return c.L(m,this.fogMatrix,m),p[u]=new Float32Array(m),p[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,u){u=c.ac(+u,this.minZoom,this.maxZoom);const p={center:new c.N(r.lng,r.lat),zoom:u};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const ae=179.9999999999;m=[-ae,ae]}const _=this.tileSize*this.zoomScale(p.zoom);let S=0,E=_,C=0,z=_,F=0,B=0;const{x:X,y:Q}=this.size;if(this.latRange){const ae=this.latRange;S=c.Q(ae[1])*_,E=c.Q(ae[0])*_,E-S<Q&&(F=Q/(E-S))}m&&(C=c.b3(c.O(m[0])*_,0,_),z=c.b3(c.O(m[1])*_,0,_),z<C&&(z+=_),z-C<X&&(B=X/(z-C)));const{x:re,y:ce}=this.project.call({worldSize:_},r);let pe,me;const we=Math.max(B||0,F||0);if(we){const ae=new c.P(B?(z+C)/2:re,F?(E+S)/2:ce);return p.center=this.unproject.call({worldSize:_},ae).wrap(),p.zoom+=this.scaleZoom(we),p}if(this.latRange){const ae=Q/2;ce-ae<S&&(me=S+ae),ce+ae>E&&(me=E-ae)}if(m){const ae=(C+z)/2;let Ce=re;this._renderWorldCopies&&(Ce=c.b3(re,ae-_/2,ae+_/2));const Pe=X/2;Ce-Pe<C&&(pe=C+Pe),Ce+Pe>z&&(pe=z-Pe)}if(pe!==void 0||me!==void 0){const ae=new c.P(pe??re,me??ce);p.center=this.unproject.call({worldSize:_},ae).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=p,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b5(1,this.center.lat)*this.worldSize;let m=c.an(new Float64Array(16));c.K(m,m,[this.width/2,-this.height/2,1]),c.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=c.an(new Float64Array(16)),c.K(m,m,[1,-1,1]),c.J(m,m,[-1,-1,0]),c.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),E=_-S*this._pixelPerMeter/Math.cos(this._pitch),C=S<0?E:_,z=Math.PI/2+this._pitch,F=this._fov*(.5+r.y/this.height),B=Math.sin(F)*C/Math.sin(c.ac(Math.PI-z-F,.01,Math.PI-.01)),X=this.getHorizon(),Q=2*Math.atan(X/this.cameraToCenterDistance)*(.5+r.y/(2*X)),re=Math.sin(Q)*C/Math.sin(c.ac(Math.PI-z-Q,.01,Math.PI-.01)),ce=Math.min(B,re);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ce+C),this.nearZ=this.height/50,m=new Float64Array(16),c.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,this.projectionMatrix=c.ae(m),c.K(m,m,[1,-1,1]),c.J(m,m,[0,0,-this.cameraToCenterDistance]),c.b7(m,m,this._pitch),c.ad(m,m,this.angle),c.J(m,m,[-u,-p,0]),this.mercatorMatrix=c.K([],m,[this.worldSize,this.worldSize,this.worldSize]),c.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.L(new Float64Array(16),this.labelPlaneMatrix,m),c.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=c.as([],m),this.fogMatrix=new Float64Array(16),c.b6(this.fogMatrix,this._fov,this.width/this.height,_,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,c.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),c.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b7(this.fogMatrix,this.fogMatrix,this._pitch),c.ad(this.fogMatrix,this.fogMatrix,this.angle),c.J(this.fogMatrix,this.fogMatrix,[-u,-p,0]),c.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),c.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=c.L(new Float64Array(16),this.labelPlaneMatrix,m);const pe=this.width%2/2,me=this.height%2/2,we=Math.cos(this.angle),ae=Math.sin(this.angle),Ce=u-Math.round(u)+we*pe+ae*me,Pe=p-Math.round(p)+we*me+ae*pe,ze=new Float64Array(m);if(c.J(ze,ze,[Ce>.5?Ce-1:Ce,Pe>.5?Pe-1:Pe,0]),this.alignedModelViewProjectionMatrix=ze,m=c.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new c.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return c.af(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let p=u.x,m=u.y,_=u.x,S=u.y;for(const E of r)p=Math.min(p,E.x),m=Math.min(m,E.y),_=Math.max(_,E.x),S=Math.max(S,E.y);return[new c.P(p,m),new c.P(_,m),new c.P(_,S),new c.P(p,S),new c.P(p,m)]}}lngLatToCameraDepth(r,u){const p=this.locationCoordinate(r),m=[p.x*this.worldSize,p.y*this.worldSize,u,1];return c.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function nu(v,r){let u,p=!1,m=null,_=null;const S=()=>{m=null,p&&(v.apply(_,u),m=setTimeout(S,r),p=!1)};return(...E)=>(p=!0,_=this,u=E,m||S(),m)}class yc{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const p=u.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let _=window.location.hash.replace(m,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let S=window.location.href.replace(/(#.+)?$/,_);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=nu(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),S=Math.round(u.lng*_)/_,E=Math.round(u.lat*_)/_,C=this._map.getBearing(),z=this._map.getPitch();let F="";if(F+=r?`/${S}/${E}/${p}`:`${p}/${E}/${S}`,(C||z)&&(F+="/"+Math.round(10*C)/10),z&&(F+=`/${Math.round(z)}`),this._hashName){const B=this._hashName;let X=!1;const Q=window.location.hash.slice(1).split("&").map(re=>{const ce=re.split("=")[0];return ce===B?(X=!0,`${ce}=${F}`):re}).filter(re=>re);return X||Q.push(`${B}=${F}`),`#${Q.join("&")}`}return`#${F}`}}const _c={linearity:.3,easing:c.b8(0,0,.3,1)},yd=c.e({deceleration:2500,maxSpeed:1400},_c),Z_=c.e({deceleration:20,maxSpeed:1400},_c),Qp=c.e({deceleration:1e3,maxSpeed:360},_c),vc=c.e({deceleration:1e3,maxSpeed:90},_c);class _d{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=A.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=su(u.pan.mag(),p,c.e({},yd,r||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,iu(m,_)}if(u.zoom){const _=su(u.zoom,p,Z_);m.zoom=this._map.transform.zoom+_.amount,iu(m,_)}if(u.bearing){const _=su(u.bearing,p,Qp);m.bearing=this._map.transform.bearing+c.ac(_.amount,-179,179),iu(m,_)}if(u.pitch){const _=su(u.pitch,p,vc);m.pitch=this._map.transform.pitch+_.amount,iu(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(m,{noMoveStart:!0})}}function iu(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function su(v,r,u){const{maxSpeed:p,linearity:m,deceleration:_}=u,S=c.ac(v*m/(r/1e3),-p,p),E=Math.abs(S)/(_*m);return{easing:u.easing,duration:1e3*E,amount:S*(E/2)}}class Wn extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p,m={}){const _=M.mousePos(u.getCanvas(),p),S=u.unproject(_);super(r,c.e({point:_,lngLat:S,originalEvent:p},m)),this._defaultPrevented=!1,this.target=u}}class oa extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){const m=r==="touchend"?p.changedTouches:p.touches,_=M.touchPos(u.getCanvasContainer(),m),S=_.map(C=>u.unproject(C)),E=_.reduce((C,z,F,B)=>C.add(z.div(B.length)),new c.P(0,0));super(r,{points:_,point:E,lngLats:S,lngLat:u.unproject(E),originalEvent:p}),this._defaultPrevented=!1}}class em extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class tm{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new em(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new Wn(r.type,this._map,r))}mouseup(r){this._map.fire(new Wn(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Wn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Wn(r.type,this._map,r))}mouseover(r){this._map.fire(new Wn(r.type,this._map,r))}mouseout(r){this._map.fire(new Wn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new oa(r.type,this._map,r))}touchmove(r){this._map.fire(new oa(r.type,this._map,r))}touchend(r){this._map.fire(new oa(r.type,this._map,r))}touchcancel(r){this._map.fire(new oa(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pn{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Wn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Wn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _s{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(c.P.convert(r),this._map.terrain)}}class zi{constructor(r,u){this._map=r,this._tr=new _s(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(M.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,p.x),S=Math.max(m.x,p.x),E=Math.min(m.y,p.y),C=Math.max(m.y,p.y);M.setTransform(this._box,`translate(${_}px,${E}px)`),this._box.style.width=S-_+"px",this._box.style.height=C-E+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const p=this._startPos,m=u;if(this.reset(),M.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new c.k(r,{originalEvent:u}))}}function ou(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);const u={};for(let p=0;p<v.length;p++)u[v[p].identifier]=r[p];return u}class vd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const _=new c.P(0,0);for(const S of m)_._add(S);return _.div(m.length)}(u),this.touches=ou(p,u)))}touchmove(r,u,p){if(this.aborted||!this.centroid)return;const m=ou(p,u);for(const _ in this.touches){const S=m[_];(!S||S.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class xc{constructor(r){this.singleTap=new vd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,p){this.singleTap.touchstart(r,u,p)}touchmove(r,u,p){this.singleTap.touchmove(r,u,p)}touchend(r,u,p){const m=this.singleTap.touchend(r,u,p);if(m){const _=r.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(m)<30;if(_&&S||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ja{constructor(r){this._tr=new _s(r),this._zoomIn=new xc({numTouches:1,numTaps:2}),this._zoomOut=new xc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,p){this._zoomIn.touchstart(r,u,p),this._zoomOut.touchstart(r,u,p)}touchmove(r,u,p){this._zoomIn.touchmove(r,u,p),this._zoomOut.touchmove(r,u,p)}touchend(r,u,p){const m=this._zoomIn.touchend(r,u,p),_=this._zoomOut.touchend(r,u,p),S=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lo{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&M.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const xd={0:1,2:2};class wc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=M.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,p){const m=xd[p];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return M.mouseButton(r)===this._eventButton}}class wd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const bc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},bd=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const p=new wc({checkCorrectEvent:m=>M.mouseButton(m)===0&&m.ctrlKey||M.mouseButton(m)===2});return new lo({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:p,enable:v,assignEvents:bc})},Sd=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new wc({checkCorrectEvent:m=>M.mouseButton(m)===0&&m.ctrlKey||M.mouseButton(m)===2});return new lo({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:p,enable:v,assignEvents:bc})};class aa{constructor(r,u){this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,u,p){return this._calculateTransform(r,u,p)}touchmove(r,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,u,p){this._calculateTransform(r,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,p){p.length>0&&(this._active=!0);const m=ou(p,u),_=new c.P(0,0),S=new c.P(0,0);let E=0;for(const z in m){const F=m[z],B=this._touches[z];B&&(_._add(F),S._add(F.sub(B)),E++,m[z]=F)}if(this._touches=m,this._shouldBePrevented(E)||!S.mag())return;const C=S.div(E);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(E),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,p){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,S=au(p,u,m),E=au(p,u,_);if(!S||!E)return;const C=this._aroundCenter?null:S.add(E).div(2);return this._move([S,E],C,r)}touchend(r,u,p){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,S=au(p,u,m),E=au(p,u,_);S&&E||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function au(v,r,u){for(let p=0;p<v.length;p++)if(v[p].identifier===u)return r[p]}function kd(v,r){return Math.log(v/r)/Math.LN2}class Td extends Sc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(kd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kd(this._distance,p),pinchAround:u}}}function Ed(v,r){return 180*v.angleWith(r)/Math.PI}class Cd extends Sc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u,p){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ed(this._vector,m),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,p=Ed(r,this._startVector);return Math.abs(p)<u}}function kc(v){return Math.abs(v.y)>Math.abs(v.x)}class Qa extends Sc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,p){super.touchstart(r,u,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,kc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,p){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const S=r.y>0==u.y>0;return kc(r)&&kc(u)&&S}}const rm={panStep:100,bearingStep:15,pitchStep:10};class Ji{constructor(r){this._tr=new _s(r);const u=rm;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,p=0,m=0,_=0,S=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),S=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:E=>{const C=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:Vs,zoom:u?Math.round(C.zoom)+u*(r.shiftKey?2:1):C.zoom,bearing:C.bearing+p*this._bearingStep,pitch:C.pitch+m*this._pitchStep,offset:[-_*this._panStep,-S*this._panStep],center:C.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Vs(v){return v*(2-v)}const Id=4.000244140625;class vs{constructor(r,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new _s(r),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=A.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Id==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=M.mousePos(this._map.getCanvas(),r),p=this._tr;this._around=u.y>p.transform.height/2-p.transform.getHorizon()?c.N.convert(this._aroundCenter?p.center:p.unproject(u)):c.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Id?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&z!==0&&(z=1/z);const F=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(F*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,p=this._startZoom,m=this._easing;let _,S=!1;const E=A.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&m&&E){const C=Math.min(E/200,1),z=m(C);_=c.y.number(p,u,z),C<1?this._frameId||(this._frameId=!0):S=!0}else _=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=c.b9;if(this._prevEase){const p=this._prevEase,m=(A.now()-p.start)/p.duration,_=p.easing(m+.01)-p.easing(m),S=.27/Math.sqrt(_*_+1e-4)*.01,E=Math.sqrt(.0729-S*S);u=c.b8(S,E,.25,1)}return this._prevEase={start:A.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class la{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class q_{constructor(r){this._tr=new _s(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Y_{constructor(){this._tap=new xc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,p){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=r.timeStamp-this._tapTime<500,S=this._tapPoint.dist(m)<30;_&&S?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,u,p)}touchmove(r,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,p)}touchend(r,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(r,u,p);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nm{constructor(r,u,p){this._el=r,this._mousePan=u,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class im{constructor(r,u,p){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Pd{constructor(r,u,p,m){this._el=r,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class el{constructor(r,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",r);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=u,this._container.appendChild(m);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=p,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,u){this._enabled&&(this._map.fire(new c.k("cooperativegestureprevented",{gestureType:r,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Qi=v=>v.zoom||v.drag||v.pitch||v.rotate;class St extends c.k{}function Tc(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Md{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=m.type==="renderFrame"?void 0:m,E={needsRenderFrame:!1},C={},z={},F=m.touches,B=F?this._getMapTouches(F):void 0,X=B?M.touchPos(this._map.getCanvas(),B):M.mousePos(this._map.getCanvas(),m);for(const{handlerName:ce,handler:pe,allowed:me}of this._handlers){if(!pe.isEnabled())continue;let we;this._blockedByActive(z,me,ce)?pe.reset():pe[_||m.type]&&(we=pe[_||m.type](m,X,B),this.mergeHandlerResult(E,C,we,ce,S),we&&we.needsRenderFrame&&this._triggerRenderFrame()),(we||pe.isActive())&&(z[ce]=pe)}const Q={};for(const ce in this._previousActiveHandlers)z[ce]||(Q[ce]=S);this._previousActiveHandlers=z,(Object.keys(Q).length||Tc(E))&&(this._changes.push([E,C,Q]),this._triggerRenderFrame()),(Object.keys(z).length||Tc(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=E;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _d(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,S]of this._listeners)M.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[r,u,p]of this._listeners)M.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new tm(u,r));const m=u.boxZoom=new zi(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=u.cooperativeGestures=new el(u,r.cooperativeGestures);this._add("cooperativeGestures",_),r.cooperativeGestures&&_.enable();const S=new Ja(u),E=new q_(u);u.doubleClickZoom=new la(E,S),this._add("tapZoom",S),this._add("clickZoom",E),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const C=new Y_;this._add("tapDragZoom",C);const z=u.touchPitch=new Qa(u);this._add("touchPitch",z),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const F=bd(r),B=Sd(r);u.dragRotate=new im(r,F,B),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const X=(({enable:we,clickTolerance:ae})=>{const Ce=new wc({checkCorrectEvent:Pe=>M.mouseButton(Pe)===0&&!Pe.ctrlKey});return new lo({clickTolerance:ae,move:(Pe,ze)=>({around:ze,panDelta:ze.sub(Pe)}),activateOnStart:!0,moveStateManager:Ce,enable:we,assignEvents:bc})})(r),Q=new aa(r,u);u.dragPan=new nm(p,X,Q),this._add("mousePan",X),this._add("touchPan",Q,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const re=new Cd,ce=new Td;u.touchZoomRotate=new Pd(p,ce,re,C),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const pe=u.scrollZoom=new vs(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const me=u.keyboard=new Ji(u);this._add("keyboard",me),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new pn(u))}_add(r,u,p){this._handlers.push({handlerName:r,handler:u,allowed:p}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qi(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,p){for(const m in r)if(m!==p&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const p of r)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(r,u,p,m,_){if(!p)return;c.e(r,p);const S={handlerName:m,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=S),p.panDelta!==void 0&&(u.drag=S),p.pitchDelta!==void 0&&(u.pitch=S),p.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const r={},u={},p={};for(const[m,_,S]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new c.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),c.e(u,_),c.e(p,S);this._updateMapTransform(r,u,p),this._changes=[]}_updateMapTransform(r,u,p){const m=this._map,_=m._getTransformForUpdate(),S=m.terrain;if(!(Tc(r)||S&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:E,zoomDelta:C,bearingDelta:z,pitchDelta:F,around:B,pinchAround:X}=r;X!==void 0&&(B=X),m._stop(!0),B=B||m.transform.centerPoint;const Q=_.pointLocation(E?B.sub(E):B);z&&(_.bearing+=z),F&&(_.pitch+=F),C&&(_.zoom+=C),S?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(E)):_.setLocationAtPoint(Q,B):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(Q,B)):_.setLocationAtPoint(Q,B),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,p,!0)}_fireEvents(r,u,p){const m=Qi(this._eventsInProgress),_=Qi(r),S={};for(const B in r){const{originalEvent:X}=r[B];this._eventsInProgress[B]||(S[`${B}start`]=X),this._eventsInProgress[B]=r[B]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const B in S)this._fireEvent(B,S[B]);_&&this._fireEvent("move",_.originalEvent);for(const B in r){const{originalEvent:X}=r[B];this._fireEvent(B,X)}const E={};let C;for(const B in this._eventsInProgress){const{handlerName:X,originalEvent:Q}=this._eventsInProgress[B];this._handlersById[X].isActive()||(delete this._eventsInProgress[B],C=u[X]||Q,E[`${B}end`]=C)}for(const B in E)this._fireEvent(B,E[B]);const z=Qi(this._eventsInProgress),F=(m||_)&&!z;if(F&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const B=this._map._getTransformForUpdate();B.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(B)}if(p&&F){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!B||!B.essential&&A.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:C})),X(this._map.getBearing())&&this._map.resetNorth()):(X(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new c.k(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new St("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sm extends c.E{constructor(r,u){super(),this._renderFrameCallback=()=>{const p=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,p){return r=c.P.convert(r).mult(-1),this.panTo(this.transform.center,c.e({offset:r},u),p)}panTo(r,u,p){return this.easeTo(c.e({center:r},u),p)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,p){return this.easeTo(c.e({zoom:r},u),p)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,p){return this.easeTo(c.e({bearing:r},u),p)}resetNorth(r,u){return this.rotateTo(0,c.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=ie.convert(r).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,u)}_cameraForBoxAndBearing(r,u,p,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const dt=m.padding;m.padding={top:dt,bottom:dt,right:dt,left:dt}}m.padding=c.e(_,m.padding);const S=this.transform,E=S.padding,C=new ie(r,u),z=S.project(C.getNorthWest()),F=S.project(C.getNorthEast()),B=S.project(C.getSouthEast()),X=S.project(C.getSouthWest()),Q=c.ba(-p),re=z.rotate(Q),ce=F.rotate(Q),pe=B.rotate(Q),me=X.rotate(Q),we=new c.P(Math.max(re.x,ce.x,me.x,pe.x),Math.max(re.y,ce.y,me.y,pe.y)),ae=new c.P(Math.min(re.x,ce.x,me.x,pe.x),Math.min(re.y,ce.y,me.y,pe.y)),Ce=we.sub(ae),Pe=(S.width-(E.left+E.right+m.padding.left+m.padding.right))/Ce.x,ze=(S.height-(E.top+E.bottom+m.padding.top+m.padding.bottom))/Ce.y;if(ze<0||Pe<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Xe=Math.min(S.scaleZoom(S.scale*Math.min(Pe,ze)),m.maxZoom),st=c.P.convert(m.offset),gt=new c.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(c.ba(p)),wt=st.add(gt).mult(S.scale/S.zoomScale(Xe));return{center:S.unproject(z.add(B).div(2).sub(wt)),zoom:Xe,bearing:p}}fitBounds(r,u,p){return this._fitInternal(this.cameraForBounds(r,u),u,p)}fitScreenCoordinates(r,u,p,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(r)),this.transform.pointLocation(c.P.convert(u)),p,m),m,_)}_fitInternal(r,u,p){return r?(delete(u=c.e(r,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(r,u){this.stop();const p=this._getTransformForUpdate();let m=!1,_=!1,S=!1;return"zoom"in r&&p.zoom!==+r.zoom&&(m=!0,p.zoom=+r.zoom),r.center!==void 0&&(p.center=c.N.convert(r.center)),"bearing"in r&&p.bearing!==+r.bearing&&(_=!0,p.bearing=+r.bearing),"pitch"in r&&p.pitch!==+r.pitch&&(S=!0,p.pitch=+r.pitch),r.padding==null||p.isPaddingEqual(r.padding)||(p.padding=r.padding),this._applyUpdatedTransform(p),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),m&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),S&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(r,u,p,m=0){const _=c.Z.fromLngLat(r,u),S=c.Z.fromLngLat(p,m),E=S.x-_.x,C=S.y-_.y,z=S.z-_.z,F=Math.hypot(E,C,z);if(F===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(E,C),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),Q=180*Math.atan2(E,-C)/Math.PI;let re=180*Math.acos(B/F)/Math.PI;return re=z<0?90-re:90+re,{center:S.toLngLat(),zoom:X,pitch:re,bearing:Q}}easeTo(r,u){var p;this._stop(!1,r.easeId),((r=c.e({offset:[0,0],duration:500,easing:c.b9},r)).animate===!1||!r.essential&&A.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),_=m.zoom,S=m.bearing,E=m.pitch,C=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,S):S,F="pitch"in r?+r.pitch:E,B="padding"in r?r.padding:m.padding,X=c.P.convert(r.offset);let Q=m.centerPoint.add(X);const re=m.pointLocation(Q),{center:ce,zoom:pe}=m.getConstrained(c.N.convert(r.center||re),(p=r.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ce,m);const me=m.project(re),we=m.project(ce).sub(me),ae=m.zoomScale(pe-_);let Ce,Pe;r.around&&(Ce=c.N.convert(r.around),Pe=m.locationPoint(Ce));const ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pe!==_,this._rotating=this._rotating||S!==z,this._pitching=this._pitching||F!==E,this._padding=!m.isPaddingEqual(B),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,ze),this.terrain&&this._prepareElevation(ce),this._ease(Xe=>{if(this._zooming&&(m.zoom=c.y.number(_,pe,Xe)),this._rotating&&(m.bearing=c.y.number(S,z,Xe)),this._pitching&&(m.pitch=c.y.number(E,F,Xe)),this._padding&&(m.interpolatePadding(C,B,Xe),Q=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(Xe),Ce)m.setLocationAtPoint(Ce,Pe);else{const st=m.zoomScale(m.zoom-_),gt=pe>_?Math.min(2,ae):Math.max(.5,ae),wt=Math.pow(gt,1-Xe),dt=m.unproject(me.add(we.mult(Xe*wt)).mult(st));m.setLocationAtPoint(m.renderWorldCopies?dt.wrap():dt,Q)}this._applyUpdatedTransform(m),this._fireMoveEvents(u)},Xe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u,Xe)},r),this}_prepareEase(r,u,p={}){this._moving=!0,u||p.moving||this.fire(new c.k("movestart",r)),this._zooming&&!p.zooming&&this.fire(new c.k("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new c.k("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new c.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(u-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=c.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const u=r.getCameraPosition(),p=this.terrain.getElevationForLngLatZoom(u.lngLat,r.zoom);if(u.altitude<p){const m=this.calculateCameraOptionsFromTo(u.lngLat,p,r.center,r.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(r){const u=[];if(this.terrain&&u.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&u.push(m=>this.transformCameraUpdate(m)),!u.length)return;const p=r.clone();for(const m of u){const _=p.clone(),{center:S,zoom:E,pitch:C,bearing:z,elevation:F}=m(_);S&&(_.center=S),E!==void 0&&(_.zoom=E),C!==void 0&&(_.pitch=C),z!==void 0&&(_.bearing=z),F!==void 0&&(_.elevation=F),p.apply(_)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new c.k("move",r)),this._zooming&&this.fire(new c.k("zoom",r)),this._rotating&&this.fire(new c.k("rotate",r)),this._pitching&&this.fire(new c.k("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new c.k("zoomend",r)),m&&this.fire(new c.k("rotateend",r)),_&&this.fire(new c.k("pitchend",r)),this.fire(new c.k("moveend",r))}flyTo(r,u){var p;if(!r.essential&&A.prefersReducedMotion){const _t=c.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(_t,u)}this.stop(),r=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b9},r);const m=this._getTransformForUpdate(),_=m.zoom,S=m.bearing,E=m.pitch,C=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,S):S,F="pitch"in r?+r.pitch:E,B="padding"in r?r.padding:m.padding,X=c.P.convert(r.offset);let Q=m.centerPoint.add(X);const re=m.pointLocation(Q),{center:ce,zoom:pe}=m.getConstrained(c.N.convert(r.center||re),(p=r.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ce,m);const me=m.zoomScale(pe-_),we=m.project(re),ae=m.project(ce).sub(we);let Ce=r.curve;const Pe=Math.max(m.width,m.height),ze=Pe/me,Xe=ae.mag();if("minZoom"in r){const _t=c.ac(Math.min(r.minZoom,_,pe),m.minZoom,m.maxZoom),Gt=Pe/m.zoomScale(_t-_);Ce=Math.sqrt(Gt/Xe*2)}const st=Ce*Ce;function gt(_t){const Gt=(ze*ze-Pe*Pe+(_t?-1:1)*st*st*Xe*Xe)/(2*(_t?ze:Pe)*st*Xe);return Math.log(Math.sqrt(Gt*Gt+1)-Gt)}function wt(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function dt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}const ct=gt(!1);let Pt=function(_t){return dt(ct)/dt(ct+Ce*_t)},qt=function(_t){return Pe*((dt(ct)*(wt(Gt=ct+Ce*_t)/dt(Gt))-wt(ct))/st)/Xe;var Gt},ft=(gt(!0)-ct)/Ce;if(Math.abs(Xe)<1e-6||!isFinite(ft)){if(Math.abs(Pe-ze)<1e-6)return this.easeTo(r,u);const _t=ze<Pe?-1:1;ft=Math.abs(Math.log(ze/Pe))/Ce,qt=()=>0,Pt=Gt=>Math.exp(_t*Ce*Gt)}return r.duration="duration"in r?+r.duration:1e3*ft/("screenSpeed"in r?+r.screenSpeed/Ce:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=S!==z,this._pitching=F!==E,this._padding=!m.isPaddingEqual(B),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ce),this._ease(_t=>{const Gt=_t*ft,Hr=1/Pt(Gt);m.zoom=_t===1?pe:_+m.scaleZoom(Hr),this._rotating&&(m.bearing=c.y.number(S,z,_t)),this._pitching&&(m.pitch=c.y.number(E,F,_t)),this._padding&&(m.interpolatePadding(C,B,_t),Q=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(_t);const tr=_t===1?ce:m.unproject(we.add(ae.mult(qt(Gt))).mult(Hr));m.setLocationAtPoint(m.renderWorldCopies?tr.wrap():tr,Q),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,u,p){p.animate===!1||p.duration===0?(r(1),u()):(this._easeStart=A.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=c.b3(r,-180,180);const p=Math.abs(r-u);return Math.abs(r-360-u)<p&&(r-=360),Math.abs(r+360-u)<p&&(r+=360),r}_normalizeCenter(r,u){if(!u.renderWorldCopies||u.lngRange)return;const p=r.lng-u.center.lng;r.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(c.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const tl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class rl{constructor(r=tl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const p=this._map._getUIString(`AttributionControl.${u}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const S=_.getSource();S.attribution&&r.indexOf(S.attribution)<0&&r.push(S.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let S=_+1;S<r.length;S++)if(r[S].indexOf(m)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ad{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const u=M.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ur{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const m of p)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Dd=c.Y([{name:"a_pos3d",type:"Int16",components:3}]);class X_ extends c.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const p={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),c.aP(m.posMatrix,0,c.X,0,c.X,0,1),this._tiles[m.key]=new pi(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const p=this._tiles[u];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),c.aP(_.posMatrix,0,c.X,0,c.X,0,1),u[p]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const S=m.canonical.z-r.canonical.z,E=m.canonical.x-(m.canonical.x>>S<<S),C=m.canonical.y-(m.canonical.y>>S<<S),z=c.X>>S;c.aP(_.posMatrix,0,z,0,z,0,1),c.J(_.posMatrix,_.posMatrix,[-E*z,-C*z,0]),u[p]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const S=r.canonical.z-m.canonical.z,E=r.canonical.x-(r.canonical.x>>S<<S),C=r.canonical.y-(r.canonical.y>>S<<S),z=c.X>>S;c.aP(_.posMatrix,0,c.X,0,c.X,0,1),c.J(_.posMatrix,_.posMatrix,[E*z,C*z,0]),c.K(_.posMatrix,_.posMatrix,[1/2**S,1/2**S,0]),u[p]=_}}return u}getSourceTile(r,u){const p=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;m>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class zd{constructor(r,u,p){this.painter=r,this.sourceCache=new X_(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,p,m=c.X){var _;if(!(u>=0&&u<m&&p>=0&&p<m))return 0;const S=this.getTerrainData(r),E=(_=S.tile)===null||_===void 0?void 0:_.dem;if(!E)return 0;const C=function(re,ce,pe){var me=ce[0],we=ce[1];return re[0]=pe[0]*me+pe[4]*we+pe[12],re[1]=pe[1]*me+pe[5]*we+pe[13],re}([],[u/m*c.X,p/m*c.X],S.u_terrain_matrix),z=[C[0]*E.dim,C[1]*E.dim],F=Math.floor(z[0]),B=Math.floor(z[1]),X=z[0]-F,Q=z[1]-B;return E.get(F,B)*(1-X)*(1-Q)+E.get(F+1,B)*X*(1-Q)+E.get(F,B+1)*(1-X)*Q+E.get(F+1,B+1)*X*Q}getElevationForLngLatZoom(r,u){if(!c.bb(u,r.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(p,m%c.X,_%c.X,c.X)}getElevation(r,u,p,m=c.X){return this.getDEMElevation(r,u,p,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new it(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new it(m,new c.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new it(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=r.canonical.x-(r.canonical.x>>_<<_),E=r.canonical.y-(r.canonical.y>>_<<_),C=c.bc(new Float64Array(16),[1/(c.X<<_),1/(c.X<<_),0]);c.J(C,C,[S*c.X,E*c.X,0]),this._demMatrixCache[r.key]={matrix:C,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,p=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new it(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new it(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,S=0;_<this._coordsTextureSize;_++)for(let E=0;E<this._coordsTextureSize;E++,S+=4)u[S+0]=255&E,u[S+1]=255&_,u[S+2]=E>>8<<4|_>>8,u[S+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new it(r,p,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,m=p.gl,_=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(_,E-S-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const C=u[0]+(u[2]>>4<<8),z=u[1]+((15&u[2])<<8),F=this.coordsIndex[255-u[3]],B=F&&this.sourceCache.getTileByID(F);if(!B)return null;const X=this._coordsTextureSize,Q=(1<<B.tileID.canonical.z)*X;return new c.Z((B.tileID.canonical.x*X+C)/Q+B.tileID.wrap,(B.tileID.canonical.y*X+z)/Q,this.getElevation(B.tileID,C,z,X))}depthAtPoint(r){const u=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new c.bd,p=new c.aY,m=this.meshSize,_=c.X/m,S=m*m;for(let B=0;B<=m;B++)for(let X=0;X<=m;X++)u.emplaceBack(X*_,B*_,0);for(let B=0;B<S;B+=m+1)for(let X=0;X<m;X++)p.emplaceBack(X+B,m+X+B+1,m+X+B+2),p.emplaceBack(X+B,m+X+B+2,X+B+1);const E=u.length,C=E+2*(m+1);for(const B of[0,1])for(let X=0;X<=m;X++)for(const Q of[0,1])u.emplaceBack(X*_,B*c.X,Q);for(let B=0;B<2*m;B+=2)p.emplaceBack(C+B,C+B+1,C+B+3),p.emplaceBack(C+B,C+B+3,C+B+2),p.emplaceBack(E+B,E+B+3,E+B+1),p.emplaceBack(E+B,E+B+2,E+B+3);const z=u.length,F=z+2*(m+1);for(const B of[0,1])for(let X=0;X<=m;X++)for(const Q of[0,1])u.emplaceBack(B*c.X,X*_,Q);for(let B=0;B<2*m;B+=2)p.emplaceBack(z+B,z+B+1,z+B+3),p.emplaceBack(z+B,z+B+3,z+B+2),p.emplaceBack(F+B,F+B+3,F+B+1),p.emplaceBack(F+B,F+B+2,F+B+3);return this._mesh=new mc(r.createVertexBuffer(u,Dd.members),r.createIndexBuffer(p),c.a0.simpleSegment(0,0,u.length,p.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*c.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,u){const p=c.Z.fromLngLat(r.wrap()),m=(1<<u)*c.X,_=p.x*m,S=p.y*m,E=Math.floor(_/c.X),C=Math.floor(S/c.X);return{tileID:new c.S(u,0,u,E,C),mercatorX:_,mercatorY:S}}}class K_{constructor(r,u,p){this._context=r,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new it(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:r,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const nl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class om{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new K_(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in r.sourceCaches){this._coordsDescendingInv[p]={};const m=r.sourceCaches[p].getVisibleCoordinates();for(const _ of m){const S=this.terrain.sourceCache.getTerrainCoords(_);for(const E in S)this._coordsDescendingInv[p][E]||(this._coordsDescendingInv[p][E]=[]),this._coordsDescendingInv[p][E].push(S[E])}}this._coordsDescendingInvStr={};for(const p of r._order){const m=r._layers[p],_=m.source;if(nl[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const S in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][S]=this._coordsDescendingInv[_][S].map(E=>E.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][p.tileID.key];_&&_!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(nl[u]&&(this._prevType&&nl[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(nl[this._prevType]||nl[u]&&m){this._prevType=u;const _=this._stacks.length-1,S=this._stacks[_]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(Jp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[_]){const z=this.pool.getObjectForId(E.rtt[_].id);if(z.stamp===E.rtt[_].stamp){this.pool.useObject(z);continue}}const C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),E.rtt[_]={id:C.id,stamp:C.stamp},p.context.bindFramebuffer.set(C.fbo.framebuffer),p.context.clear({color:c.aM.transparent,stencil:0}),p.currentStencilSource=void 0;for(let z=0;z<S.length;z++){const F=p.style._layers[S[z]],B=F.source?this._coordsDescendingInv[F.source][E.tileID.key]:[E.tileID];p.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),p._renderTileClippingMasks(F,B),p.renderLayer(p,p.style.sourceCaches[F.source],F,B),F.source&&(E.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][E.tileID.key])}}return Jp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),nl[u]}return!1}}const Rd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},am=T,J_={hash:!1,interactive:!0,bearingSnap:7,attributionControl:tl,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Ld=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Q_={showCompass:!0,showZoom:!0,visualizePitch:!1};class e0{constructor(r,u,p=!1){this.mousedown=S=>{this.startMouse(c.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),M.mousePos(this.element,S)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,M.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=bd({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:E,bearingDegreesPerPixelMoved:C=.8})=>{const z=new wd;return new lo({clickTolerance:E,move:(F,B)=>({bearingDelta:(B.x-F.x)*C}),moveStateManager:z,enable:S,assignEvents:Ld})})({clickTolerance:m,enable:!0}),this.map=r,p&&(this.mousePitch=Sd({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:E,pitchDegreesPerPixelMoved:C=-.5})=>{const z=new wd;return new lo({clickTolerance:E,move:(F,B)=>({pitchDelta:(B.y-F.y)*C}),moveStateManager:z,enable:S,assignEvents:Ld})})({clickTolerance:_,enable:!0})),M.addEventListener(u,"mousedown",this.mousedown),M.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),M.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),M.disableDrag()}moveMouse(r,u){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(r,u){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const r=this.element;M.removeEventListener(r,"mousedown",this.mousedown),M.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let Ri;function Vr(v,r,u){const p=new c.N(v.lng,v.lat);if(v=new c.N(v.lng,v.lat),r){const m=new c.N(v.lng-360,v.lat),_=new c.N(v.lng+360,v.lat),S=u.locationPoint(v).distSqr(r);u.locationPoint(m).distSqr(r)<S?v=m:u.locationPoint(_).distSqr(r)<S&&(v=_)}for(;Math.abs(v.lng-u.center.lng)>180;){const m=u.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;v.lng>u.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&u.locationPoint(v).y>u.height/2-u.getHorizon()?v:p}const il={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ec(v,r,u){const p=v.classList;for(const m in il)p.remove(`maplibregl-${u}-anchor-${m}`);p.add(`maplibregl-${u}-anchor-${r}`)}class Cc extends c.E{constructor(r){if(super(),this._onKeyPress=u=>{const p=u.code,m=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=u=>{var p;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Vr(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${il[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${_}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=c.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const u=M.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const _=M.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const S=M.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const E=M.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of C){const we=M.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",me.rx),we.setAttributeNS(null,"ry",me.ry),E.appendChild(we)}const z=M.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const F=M.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(F);const B=M.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const X=M.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(X);const Q=M.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const re=M.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=M.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const pe=M.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),re.appendChild(ce),re.appendChild(pe),S.appendChild(E),S.appendChild(z),S.appendChild(B),S.appendChild(Q),S.appendChild(re),u.appendChild(S),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ec(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=c.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var u,p;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,_=m.terrain.depthAtPoint(this._pos),S=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,S)-_<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/m.transform._pixelPerMeter,C=Math.sin(m.getPitch()*Math.PI/180)*E,z=m.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),F=m.transform.lngLatToCameraDepth(this._lngLat,S+C)-z>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=c.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,u){return r===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const lm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let lu=0,uu=!1;const Hs={maxWidth:100,unit:"metric"};function cu(v,r,u){const p=u&&u.maxWidth||100,m=v._container.clientHeight/2,_=v.unproject([0,m]),S=v.unproject([p,m]),E=_.distanceTo(S);if(u&&u.unit==="imperial"){const C=3.2808*E;C>5280?It(r,p,C/5280,v._getUIString("ScaleControl.Miles")):It(r,p,C,v._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?It(r,p,E/1852,v._getUIString("ScaleControl.NauticalMiles")):E>=1e3?It(r,p,E/1e3,v._getUIString("ScaleControl.Kilometers")):It(r,p,E,v._getUIString("ScaleControl.Meters"))}function It(v,r,u,p){const m=function(_){const S=Math.pow(10,`${Math.floor(_)}`.length-1);let E=_/S;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(C){const z=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*z)/z}(E),S*E}(u);v.style.width=r*(m/u)+"px",v.innerHTML=`${m}&nbsp;${p}`}const Ut={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Ic=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pc(v){if(v){if(typeof v=="number"){const r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,v),"top-left":new c.P(r,r),"top-right":new c.P(-r,r),bottom:new c.P(0,-v),"bottom-left":new c.P(r,-r),"bottom-right":new c.P(-r,-r),left:new c.P(v,0),right:new c.P(-v,0)}}if(v instanceof c.P||Array.isArray(v)){const r=c.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:c.P.convert(v.center||[0,0]),top:c.P.convert(v.top||[0,0]),"top-left":c.P.convert(v["top-left"]||[0,0]),"top-right":c.P.convert(v["top-right"]||[0,0]),bottom:c.P.convert(v.bottom||[0,0]),"bottom-left":c.P.convert(v["bottom-left"]||[0,0]),"bottom-right":c.P.convert(v["bottom-right"]||[0,0]),left:c.P.convert(v.left||[0,0]),right:c.P.convert(v.right||[0,0])}}return Pc(new c.P(0,0))}const Od=T;g.AJAXError=c.bh,g.Evented=c.E,g.LngLat=c.N,g.MercatorCoordinate=c.Z,g.Point=c.P,g.addProtocol=c.bi,g.config=c.a,g.removeProtocol=c.bj,g.AttributionControl=rl,g.BoxZoomHandler=zi,g.CanvasSource=at,g.CooperativeGesturesHandler=el,g.DoubleClickZoomHandler=la,g.DragPanHandler=nm,g.DragRotateHandler=im,g.EdgeInsets=Xa,g.FullscreenControl=class extends c.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=u==null?void 0:u.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=tt,g.GeolocateControl=class extends c.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new c.N(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,m=this._map.getBearing(),_=c.e({bearing:m},this.options.fitBoundsOptions),S=ie.fromLngLat(u,p);this._map.fitBounds(S,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new c.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&uu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Cc({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Cc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")),this.fire(new c.k("userlocationlostfocus")))})}},this.options=c.e({},lm,v)}onAdd(v){return this._map=v,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(r=!1){if(Ri!==void 0&&!r)return Ri;if(window.navigator.permissions===void 0)return Ri=!!window.navigator.geolocation,Ri;try{Ri=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ri=!!window.navigator.geolocation}return Ri})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lu=0,uu=!1}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),u=v.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),r=v.getSouthEast(),u=v.getNorthEast(),p=r.distanceTo(u),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lu--,uu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart")),this.fire(new c.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lu++,lu>1?(v={maximumAge:6e5,timeout:0},uu=!0):(v=this.options.positionOptions,uu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.Hash=yc,g.ImageSource=ot,g.KeyboardHandler=Ji,g.LngLatBounds=ie,g.LogoControl=Ad,g.Map=class extends sm{constructor(v){c.bf.mark(c.bg.create);const r=Object.assign(Object.assign({},J_),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ka(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ur,this._controls=[],this._mapId=c.a4(),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Rd),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=q.addThrottleControl(()=>this.isMoving()),this._requestManager=new ne(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const p=nu(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{u?p(m):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Md(this,r),this._hash=r.hash&&new yc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,c.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new rl(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Ad,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new c.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new c.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new c.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,u,p)}resize(v){var r;const u=this._containerDimensions(),p=u[0],m=u[1],_=this._getClampedPixelRatio(p,m);if(this._resizeCanvas(p,m,_),this.painter.resize(p,m,_),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const C=this._getClampedPixelRatio(p,m);this._resizeCanvas(p,m,C),this.painter.resize(p,m,C)}this.transform.resize(p,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(p,m);const S=!this._moving;return S&&(this.stop(),this.fire(new c.k("movestart",v)).fire(new c.k("move",v))),this.fire(new c.k("resize",v)),S&&this.fire(new c.k("moveend",v)),this}_getClampedPixelRatio(v,r){const{0:u,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),_=v*m,S=r*m;return Math.min(_>u?u/_:1,S>p?p/S:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(ie.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(c.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(c.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,u){if(v==="mouseenter"||v==="mouseover"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:_=>{const S=r.filter(C=>this.getLayer(C)),E=S.length!==0?this.queryRenderedFeatures(_.point,{layers:S}):[];E.length?p||(p=!0,u.call(this,new Wn(v,this,_.originalEvent,{features:E}))):p=!1},mouseout:()=>{p=!1}}}}if(v==="mouseleave"||v==="mouseout"){let p=!1;return{layers:r,listener:u,delegates:{mousemove:S=>{const E=r.filter(C=>this.getLayer(C));(E.length!==0?this.queryRenderedFeatures(S.point,{layers:E}):[]).length?p=!0:p&&(p=!1,u.call(this,new Wn(v,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,u.call(this,new Wn(v,this,S.originalEvent)))}}}}{const p=m=>{const _=r.filter(E=>this.getLayer(E)),S=_.length!==0?this.queryRenderedFeatures(m.point,{layers:_}):[];S.length&&(m.features=S,u.call(this,m),delete m.features)};return{layers:r,listener:u,delegates:{[v]:p}}}}_saveDelegatedListener(v,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(r)}_removeDelegatedListener(v,r,u){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const p=this._delegatedListeners[v];for(let m=0;m<p.length;m++){const _=p[m];if(_.listener===u&&_.layers.length===r.length&&_.layers.every(S=>r.includes(S))){for(const S in _.delegates)this.off(S,_.delegates[S]);return void p.splice(m,1)}}}on(v,r,u){if(u===void 0)return super.on(v,r);const p=this._createDelegatedListener(v,typeof r=="string"?[r]:r,u);this._saveDelegatedListener(v,p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(v,r,u){if(u===void 0)return super.once(v,r);const p=typeof r=="string"?[r]:r,m=this._createDelegatedListener(v,p,u);for(const _ in m.delegates){const S=m.delegates[_];m.delegates[_]=(...E)=>{this._removeDelegatedListener(v,p,u),S(...E)}}this._saveDelegatedListener(v,m);for(const _ in m.delegates)this.once(_,m.delegates[_]);return this}off(v,r,u){return u===void 0?super.off(v,r):(this._removeDelegatedListener(v,typeof r=="string"?[r]:r,u),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let u;const p=v instanceof c.P||Array.isArray(v),m=p?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:v)||{},m instanceof c.P||typeof m[0]=="number")u=[c.P.convert(m)];else{const _=c.P.convert(m[0]),S=c.P.convert(m[1]);u=[_,new c.P(S.x,_.y),S,new c.P(_.x,S.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new ec(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,u):this.style.loadJSON(v,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ec(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){const u=this._requestManager.transformRequest(v,"Style");c.h(u,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new c.j(p))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){const r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new c.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===v.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new zd(this.painter,r,v),this.painter.renderToTexture=new om(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const r in v){const u=v[r]._tiles;for(const p in u){const m=u[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,u={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:_,stretchY:S,content:E,textFitWidth:C,textFitHeight:z}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||c.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:B,data:X}=r,Q=r;return this.style.addImage(v,{data:new c.R({width:F,height:B},new Uint8Array(X)),pixelRatio:p,stretchX:_,stretchY:S,content:E,textFitWidth:C,textFitHeight:z,sdf:m,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,v),this}}{const{width:F,height:B,data:X}=A.getImageData(r);this.style.addImage(v,{data:new c.R({width:F,height:B},X),pixelRatio:p,stretchX:_,stretchY:S,content:E,textFitWidth:C,textFitHeight:z,sdf:m,version:0})}}updateImage(v,r){const u=this.style.getImage(v);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||c.b(r)?A.getImageData(r):r,{width:m,height:_,data:S}=p;if(m===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(r instanceof HTMLImageElement||c.b(r));return u.data.replace(S,E),this.style.updateImage(v,u),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return q.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,u){return this.style.setLayerZoomRange(v,r,u),this._update(!0)}setFilter(v,r,u={}){return this.style.setFilter(v,r,u),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,u,p={}){return this.style.setPaintProperty(v,r,u,p),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,u,p={}){return this.style.setLayoutProperty(v,r,u,p),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,u,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,u=>{u||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const r=this._canvasContainer=M.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const m=this._controlContainer=M.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{_[S]=M.create("div",`maplibregl-ctrl-${S} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,u){this._canvas.width=Math.floor(u*v),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:v},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!u){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new gc(u,this.transform),N.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=A.now();this.style.zoomHistory.update(m,_);const S=new c.z(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=S.crossFadingFactor();E===1&&E===this._crossFadingFactor||(u=!0,this._crossFadingFactor=E),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bf.mark(c.bg.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,c.bf.mark(c.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bf.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(v=>{c.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return am}getCameraTargetElevation(){return this.transform.elevation}},g.MapMouseEvent=Wn,g.MapTouchEvent=oa,g.MapWheelEvent=em,g.Marker=Cc,g.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);r.title=p,r.setAttribute("aria-label",p)},this.options=c.e({},Q_,v),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new e0(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){const u=M.create("button",v,this._container);return u.type="button",u.addEventListener("click",r),u}},g.Popup=class extends c.E{constructor(v){super(),this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Vr(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!r)return;const p=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const _=Pc(this.options.offset);if(!m){const E=this._container.offsetWidth,C=this._container.offsetHeight;let z;z=p.y+_.bottom.y<C?["top"]:p.y>this._map.transform.height-C?["bottom"]:[],p.x<E/2?z.push("left"):p.x>this._map.transform.width-E/2&&z.push("right"),m=z.length===0?"bottom":z.join("-")}let S=p.add(_[m]);this.options.subpixelPositioning||(S=S.round()),M.setTransform(this._container,`${il[m]} translate(${S.x}px,${S.y}px)`),Ec(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Ut),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=c.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=v;p=u.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Ic);v&&v.focus()}},g.RasterDEMTileSource=Ze,g.RasterTileSource=Te,g.ScaleControl=class{constructor(v){this._onMove=()=>{cu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,cu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Hs),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=vs,g.Style=ec,g.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=Qa,g.TwoFingersTouchRotateHandler=Cd,g.TwoFingersTouchZoomHandler=Td,g.TwoFingersTouchZoomRotateHandler=Pd,g.VectorTileSource=se,g.VideoSource=kt,g.addSourceType=(v,r)=>c._(void 0,void 0,void 0,function*(){if(Tr(v))throw new Error(`A source type called "${v}" already exists.`);((u,p)=>{Bt[u]=p})(v,r)}),g.clearPrewarmedResources=function(){const v=er;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(nt),er=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return vn().getRTLTextPluginStatus()},g.getVersion=function(){return Od},g.getWorkerCount=function(){return rt.workerCount},g.getWorkerUrl=function(){return c.a.WORKER_URL},g.importScriptInWorkers=function(v){return fr().broadcast("IS",v)},g.prewarm=function(){Yt().acquire(nt)},g.setMaxParallelImageRequests=function(v){c.a.MAX_PARALLEL_IMAGE_REQUESTS=v},g.setRTLTextPlugin=function(v,r){return vn().setRTLTextPlugin(v,r)},g.setWorkerCount=function(v){rt.workerCount=v},g.setWorkerUrl=function(v){c.a.WORKER_URL=v}});var f=i;return f})})(yP);var D4=yP.exports;const vP=dp(D4),z4={version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"&copy; OpenStreetMap Contributors",maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]};var jh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=Ht;function sr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ss=Object.prototype.hasOwnProperty,R4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wk={},Gk={};function wP(e){return ss.call(Gk,e)?!0:ss.call(Wk,e)?!1:R4.test(e)?Gk[e]=!0:(Wk[e]=!0,!1)}function Zi(e,t,i,o,h,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var di={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){di[e]=new Zi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];di[t]=new Zi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){di[e]=new Zi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){di[e]=new Zi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){di[e]=new Zi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){di[e]=new Zi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){di[e]=new Zi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){di[e]=new Zi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){di[e]=new Zi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ew=/[\-:]([a-z])/g;function Cw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ew,Cw);di[t]=new Zi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ew,Cw);di[t]=new Zi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ew,Cw);di[t]=new Zi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){di[e]=new Zi(e,1,!1,e.toLowerCase(),null,!1,!1)});di.xlinkHref=new Zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){di[e]=new Zi(e,1,!1,e.toLowerCase(),null,!0,!0)});var Tg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L4=["Webkit","ms","Moz","O"];Object.keys(Tg).forEach(function(e){L4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tg[t]=Tg[e]})});var O4=/["'&<>]/;function Vi(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=O4.exec(e);if(t){var i="",o,h=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}h!==o&&(i+=e.substring(h,o)),h=o+1,i+=t}e=h!==o?i+e.substring(h,o):i}return e}var F4=/([A-Z])/g,B4=/^ms-/,K1=Array.isArray;function pa(e,t){return{insertionMode:e,selectedValue:t}}function N4(e,t,i){switch(t){case"select":return pa(1,i.value!=null?i.value:i.defaultValue);case"svg":return pa(2,null);case"math":return pa(3,null);case"foreignObject":return pa(1,null);case"table":return pa(4,null);case"thead":case"tbody":case"tfoot":return pa(5,null);case"colgroup":return pa(7,null);case"tr":return pa(6,null)}return 4<=e.insertionMode||e.insertionMode===0?pa(1,null):e}var Zk=new Map;function bP(e,t,i){if(typeof i!="object")throw Error(sr(62));t=!0;for(var o in i)if(ss.call(i,o)){var h=i[o];if(h!=null&&typeof h!="boolean"&&h!==""){if(o.indexOf("--")===0){var f=Vi(o);h=Vi((""+h).trim())}else{f=o;var g=Zk.get(f);g!==void 0||(g=Vi(f.replace(F4,"-$1").toLowerCase().replace(B4,"-ms-")),Zk.set(f,g)),f=g,h=typeof h=="number"?h===0||ss.call(Tg,o)?""+h:h+"px":Vi((""+h).trim())}t?(t=!1,e.push(' style="',f,":",h)):e.push(";",f,":",h)}}t||e.push('"')}function Cs(e,t,i,o){switch(i){case"style":bP(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N"){if(t=di.hasOwnProperty(i)?di[i]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(i=t.attributeName,t.type){case 3:o&&e.push(" ",i,'=""');break;case 4:o===!0?e.push(" ",i,'=""'):o!==!1&&e.push(" ",i,'="',Vi(o),'"');break;case 5:isNaN(o)||e.push(" ",i,'="',Vi(o),'"');break;case 6:!isNaN(o)&&1<=o&&e.push(" ",i,'="',Vi(o),'"');break;default:t.sanitizeURL&&(o=""+o),e.push(" ",i,'="',Vi(o),'"')}}else if(wP(i)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=i.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",i,'="',Vi(o),'"')}}}function Eg(e,t,i){if(t!=null){if(i!=null)throw Error(sr(60));if(typeof t!="object"||!("__html"in t))throw Error(sr(61));t=t.__html,t!=null&&e.push(""+t)}}function $4(e){var t="";return xP.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function Tv(e,t,i,o){e.push(Bo(i));var h=i=null,f;for(f in t)if(ss.call(t,f)){var g=t[f];if(g!=null)switch(f){case"children":i=g;break;case"dangerouslySetInnerHTML":h=g;break;default:Cs(e,o,f,g)}}return e.push(">"),Eg(e,h,i),typeof i=="string"?(e.push(Vi(i)),null):i}var j4=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,qk=new Map;function Bo(e){var t=qk.get(e);if(t===void 0){if(!j4.test(e))throw Error(sr(65,e));t="<"+e,qk.set(e,t)}return t}function U4(e,t,i,o,h){switch(t){case"select":e.push(Bo("select"));var f=null,g=null;for(R in i)if(ss.call(i,R)){var c=i[R];if(c!=null)switch(R){case"children":f=c;break;case"dangerouslySetInnerHTML":g=c;break;case"defaultValue":case"value":break;default:Cs(e,o,R,c)}}return e.push(">"),Eg(e,g,f),f;case"option":g=h.selectedValue,e.push(Bo("option"));var T=c=null,P=null,R=null;for(f in i)if(ss.call(i,f)){var A=i[f];if(A!=null)switch(f){case"children":c=A;break;case"selected":P=A;break;case"dangerouslySetInnerHTML":R=A;break;case"value":T=A;default:Cs(e,o,f,A)}}if(g!=null)if(i=T!==null?""+T:$4(c),K1(g)){for(o=0;o<g.length;o++)if(""+g[o]===i){e.push(' selected=""');break}}else""+g===i&&e.push(' selected=""');else P&&e.push(' selected=""');return e.push(">"),Eg(e,R,c),c;case"textarea":e.push(Bo("textarea")),R=g=f=null;for(c in i)if(ss.call(i,c)&&(T=i[c],T!=null))switch(c){case"children":R=T;break;case"value":f=T;break;case"defaultValue":g=T;break;case"dangerouslySetInnerHTML":throw Error(sr(91));default:Cs(e,o,c,T)}if(f===null&&g!==null&&(f=g),e.push(">"),R!=null){if(f!=null)throw Error(sr(92));if(K1(R)&&1<R.length)throw Error(sr(93));f=""+R}return typeof f=="string"&&f[0]===`
`&&e.push(`
`),f!==null&&e.push(Vi(""+f)),null;case"input":e.push(Bo("input")),T=R=c=f=null;for(g in i)if(ss.call(i,g)&&(P=i[g],P!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(sr(399,"input"));case"defaultChecked":T=P;break;case"defaultValue":c=P;break;case"checked":R=P;break;case"value":f=P;break;default:Cs(e,o,g,P)}return R!==null?Cs(e,o,"checked",R):T!==null&&Cs(e,o,"checked",T),f!==null?Cs(e,o,"value",f):c!==null&&Cs(e,o,"value",c),e.push("/>"),null;case"menuitem":e.push(Bo("menuitem"));for(var M in i)if(ss.call(i,M)&&(f=i[M],f!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(sr(400));default:Cs(e,o,M,f)}return e.push(">"),null;case"title":e.push(Bo("title")),f=null;for(A in i)if(ss.call(i,A)&&(g=i[A],g!=null))switch(A){case"children":f=g;break;case"dangerouslySetInnerHTML":throw Error(sr(434));default:Cs(e,o,A,g)}return e.push(">"),f;case"listing":case"pre":e.push(Bo(t)),g=f=null;for(T in i)if(ss.call(i,T)&&(c=i[T],c!=null))switch(T){case"children":f=c;break;case"dangerouslySetInnerHTML":g=c;break;default:Cs(e,o,T,c)}if(e.push(">"),g!=null){if(f!=null)throw Error(sr(60));if(typeof g!="object"||!("__html"in g))throw Error(sr(61));i=g.__html,i!=null&&(typeof i=="string"&&0<i.length&&i[0]===`
`?e.push(`
`,i):e.push(""+i))}return typeof f=="string"&&f[0]===`
`&&e.push(`
`),f;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(Bo(t));for(var N in i)if(ss.call(i,N)&&(f=i[N],f!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(sr(399,t));default:Cs(e,o,N,f)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Tv(e,i,t,o);case"html":return h.insertionMode===0&&e.push("<!DOCTYPE html>"),Tv(e,i,t,o);default:if(t.indexOf("-")===-1&&typeof i.is!="string")return Tv(e,i,t,o);e.push(Bo(t)),g=f=null;for(P in i)if(ss.call(i,P)&&(c=i[P],c!=null))switch(P){case"children":f=c;break;case"dangerouslySetInnerHTML":g=c;break;case"style":bP(e,o,c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:wP(P)&&typeof c!="function"&&typeof c!="symbol"&&e.push(" ",P,'="',Vi(c),'"')}return e.push(">"),Eg(e,g,f),f}}function Yk(e,t,i){if(e.push('<!--$?--><template id="'),i===null)throw Error(sr(395));return e.push(i),e.push('"></template>')}function V4(e,t,i,o){switch(i.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');default:throw Error(sr(397))}}function H4(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(sr(397))}}var W4=/[<\u2028\u2029]/g;function Ev(e){return JSON.stringify(e).replace(W4,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function G4(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function Xk(e,t,i,o){return i.generateStaticMarkup?(e.push(Vi(t)),!1):(t===""?e=o:(o&&e.push("<!-- -->"),e.push(Vi(t)),e=!0),e)}var zf=Object.assign,Z4=Symbol.for("react.element"),SP=Symbol.for("react.portal"),kP=Symbol.for("react.fragment"),TP=Symbol.for("react.strict_mode"),EP=Symbol.for("react.profiler"),CP=Symbol.for("react.provider"),IP=Symbol.for("react.context"),PP=Symbol.for("react.forward_ref"),MP=Symbol.for("react.suspense"),AP=Symbol.for("react.suspense_list"),DP=Symbol.for("react.memo"),Iw=Symbol.for("react.lazy"),q4=Symbol.for("react.scope"),Y4=Symbol.for("react.debug_trace_mode"),X4=Symbol.for("react.legacy_hidden"),K4=Symbol.for("react.default_value"),Kk=Symbol.iterator;function J1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kP:return"Fragment";case SP:return"Portal";case EP:return"Profiler";case TP:return"StrictMode";case MP:return"Suspense";case AP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case IP:return(e.displayName||"Context")+".Consumer";case CP:return(e._context.displayName||"Context")+".Provider";case PP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case DP:return t=e.displayName||null,t!==null?t:J1(e.type)||"Memo";case Iw:t=e._payload,e=e._init;try{return J1(e(t))}catch{}}return null}var zP={};function Jk(e,t){if(e=e.contextTypes,!e)return zP;var i={},o;for(o in e)i[o]=t[o];return i}var Au=null;function h_(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var i=t.parent;if(e===null){if(i!==null)throw Error(sr(401))}else{if(i===null)throw Error(sr(401));h_(e,i)}t.context._currentValue2=t.value}}function RP(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&RP(e)}function LP(e){var t=e.parent;t!==null&&LP(t),e.context._currentValue2=e.value}function OP(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(sr(402));e.depth===t.depth?h_(e,t):OP(e,t)}function FP(e,t){var i=t.parent;if(i===null)throw Error(sr(402));e.depth===i.depth?h_(e,i):FP(e,i),t.context._currentValue2=t.value}function fy(e){var t=Au;t!==e&&(t===null?LP(e):e===null?RP(t):t.depth===e.depth?h_(t,e):t.depth>e.depth?OP(t,e):FP(t,e),Au=e)}var Qk={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function eT(e,t,i,o){var h=e.state!==void 0?e.state:null;e.updater=Qk,e.props=i,e.state=h;var f={queue:[],replace:!1};e._reactInternals=f;var g=t.contextType;if(e.context=typeof g=="object"&&g!==null?g._currentValue2:o,g=t.getDerivedStateFromProps,typeof g=="function"&&(g=g(i,h),h=g==null?h:zf({},h,g),e.state=h),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&Qk.enqueueReplaceState(e,e.state,null),f.queue!==null&&0<f.queue.length)if(t=f.queue,g=f.replace,f.queue=null,f.replace=!1,g&&t.length===1)e.state=t[0];else{for(f=g?t[0]:e.state,h=!0,g=g?1:0;g<t.length;g++){var c=t[g];c=typeof c=="function"?c.call(e,f,i,o):c,c!=null&&(h?(h=!1,f=zf({},f,c)):zf(f,c))}e.state=f}else f.queue=null}var J4={id:1,overflow:""};function Q1(e,t,i){var o=e.id;e=e.overflow;var h=32-Cg(o)-1;o&=~(1<<h),i+=1;var f=32-Cg(t)+h;if(30<f){var g=h-h%5;return f=(o&(1<<g)-1).toString(32),o>>=g,h-=g,{id:1<<32-Cg(t)+h|i<<h|o,overflow:f+e}}return{id:1<<f|i<<h|o,overflow:e}}var Cg=Math.clz32?Math.clz32:tO,Q4=Math.log,eO=Math.LN2;function tO(e){return e>>>=0,e===0?32:31-(Q4(e)/eO|0)|0}function rO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nO=typeof Object.is=="function"?Object.is:rO,Aa=null,Pw=null,Ig=null,Jr=null,vf=!1,py=!1,rp=0,Cl=null,d_=0;function ku(){if(Aa===null)throw Error(sr(321));return Aa}function tT(){if(0<d_)throw Error(sr(312));return{memoizedState:null,queue:null,next:null}}function Mw(){return Jr===null?Ig===null?(vf=!1,Ig=Jr=tT()):(vf=!0,Jr=Ig):Jr.next===null?(vf=!1,Jr=Jr.next=tT()):(vf=!0,Jr=Jr.next),Jr}function Aw(){Pw=Aa=null,py=!1,Ig=null,d_=0,Jr=Cl=null}function BP(e,t){return typeof t=="function"?t(e):t}function rT(e,t,i){if(Aa=ku(),Jr=Mw(),vf){var o=Jr.queue;if(t=o.dispatch,Cl!==null&&(i=Cl.get(o),i!==void 0)){Cl.delete(o),o=Jr.memoizedState;do o=e(o,i.action),i=i.next;while(i!==null);return Jr.memoizedState=o,[o,t]}return[Jr.memoizedState,t]}return e=e===BP?typeof t=="function"?t():t:i!==void 0?i(t):t,Jr.memoizedState=e,e=Jr.queue={last:null,dispatch:null},e=e.dispatch=iO.bind(null,Aa,e),[Jr.memoizedState,e]}function nT(e,t){if(Aa=ku(),Jr=Mw(),t=t===void 0?null:t,Jr!==null){var i=Jr.memoizedState;if(i!==null&&t!==null){var o=i[1];e:if(o===null)o=!1;else{for(var h=0;h<o.length&&h<t.length;h++)if(!nO(t[h],o[h])){o=!1;break e}o=!0}if(o)return i[0]}}return e=e(),Jr.memoizedState=[e,t],e}function iO(e,t,i){if(25<=d_)throw Error(sr(301));if(e===Aa)if(py=!0,e={action:i,next:null},Cl===null&&(Cl=new Map),i=Cl.get(t),i===void 0)Cl.set(t,e);else{for(t=i;t.next!==null;)t=t.next;t.next=e}}function sO(){throw Error(sr(394))}function eg(){}var iT={readContext:function(e){return e._currentValue2},useContext:function(e){return ku(),e._currentValue2},useMemo:nT,useReducer:rT,useRef:function(e){Aa=ku(),Jr=Mw();var t=Jr.memoizedState;return t===null?(e={current:e},Jr.memoizedState=e):t},useState:function(e){return rT(BP,e)},useInsertionEffect:eg,useLayoutEffect:function(){},useCallback:function(e,t){return nT(function(){return e},t)},useImperativeHandle:eg,useEffect:eg,useDebugValue:eg,useDeferredValue:function(e){return ku(),e},useTransition:function(){return ku(),[!1,sO]},useId:function(){var e=Pw.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Cg(e)-1)).toString(32)+t;var i=Pg;if(i===null)throw Error(sr(404));return t=rp++,e=":"+i.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return ku(),t(e._source)},useSyncExternalStore:function(e,t,i){if(i===void 0)throw Error(sr(407));return i()}},Pg=null,Cv=xP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function oO(e){return console.error(e),null}function xf(){}function aO(e,t,i,o,h,f,g,c,T){var P=[],R=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:R,pingedTasks:P,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:h===void 0?oO:h,onAllReady:xf,onShellReady:g===void 0?xf:g,onShellError:xf,onFatalError:xf},i=my(t,0,null,i,!1,!1),i.parentFlushed=!0,e=Dw(t,e,null,i,R,zP,null,J4),P.push(e),t}function Dw(e,t,i,o,h,f,g,c){e.allPendingTasks++,i===null?e.pendingRootTasks++:i.pendingTasks++;var T={node:t,ping:function(){var P=e.pingedTasks;P.push(T),P.length===1&&jP(e)},blockedBoundary:i,blockedSegment:o,abortSet:h,legacyContext:f,context:g,treeContext:c};return h.add(T),T}function my(e,t,i,o,h,f){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:i,lastPushedText:h,textEmbedded:f}}function np(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function gy(e,t){var i=e.onShellError;i(t),i=e.onFatalError,i(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function sT(e,t,i,o,h){for(Aa={},Pw=t,rp=0,e=i(o,h);py;)py=!1,rp=0,d_+=1,Jr=null,e=i(o,h);return Aw(),e}function oT(e,t,i,o){var h=i.render(),f=o.childContextTypes;if(f!=null){var g=t.legacyContext;if(typeof i.getChildContext!="function")o=g;else{i=i.getChildContext();for(var c in i)if(!(c in f))throw Error(sr(108,J1(o)||"Unknown",c));o=zf({},g,i)}t.legacyContext=o,As(e,t,h),t.legacyContext=g}else As(e,t,h)}function aT(e,t){if(e&&e.defaultProps){t=zf({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function ex(e,t,i,o,h){if(typeof i=="function")if(i.prototype&&i.prototype.isReactComponent){h=Jk(i,t.legacyContext);var f=i.contextType;f=new i(o,typeof f=="object"&&f!==null?f._currentValue2:h),eT(f,i,o,h),oT(e,t,f,i)}else{f=Jk(i,t.legacyContext),h=sT(e,t,i,o,f);var g=rp!==0;if(typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0)eT(h,i,o,f),oT(e,t,h,i);else if(g){o=t.treeContext,t.treeContext=Q1(o,1,0);try{As(e,t,h)}finally{t.treeContext=o}}else As(e,t,h)}else if(typeof i=="string"){switch(h=t.blockedSegment,f=U4(h.chunks,i,o,e.responseState,h.formatContext),h.lastPushedText=!1,g=h.formatContext,h.formatContext=N4(g,i,o),tx(e,t,f),h.formatContext=g,i){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:h.chunks.push("</",i,">")}h.lastPushedText=!1}else{switch(i){case X4:case Y4:case TP:case EP:case kP:As(e,t,o.children);return;case AP:As(e,t,o.children);return;case q4:throw Error(sr(343));case MP:e:{i=t.blockedBoundary,h=t.blockedSegment,f=o.fallback,o=o.children,g=new Set;var c={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g,errorDigest:null},T=my(e,h.chunks.length,c,h.formatContext,!1,!1);h.children.push(T),h.lastPushedText=!1;var P=my(e,0,null,h.formatContext,!1,!1);P.parentFlushed=!0,t.blockedBoundary=c,t.blockedSegment=P;try{if(tx(e,t,o),e.responseState.generateStaticMarkup||P.lastPushedText&&P.textEmbedded&&P.chunks.push("<!-- -->"),P.status=1,yy(c,P),c.pendingTasks===0)break e}catch(R){P.status=4,c.forceClientRender=!0,c.errorDigest=np(e,R)}finally{t.blockedBoundary=i,t.blockedSegment=h}t=Dw(e,f,i,T,g,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof i=="object"&&i!==null)switch(i.$$typeof){case PP:if(o=sT(e,t,i.render,o,h),rp!==0){i=t.treeContext,t.treeContext=Q1(i,1,0);try{As(e,t,o)}finally{t.treeContext=i}}else As(e,t,o);return;case DP:i=i.type,o=aT(i,o),ex(e,t,i,o,h);return;case CP:if(h=o.children,i=i._context,o=o.value,f=i._currentValue2,i._currentValue2=o,g=Au,Au=o={parent:g,depth:g===null?0:g.depth+1,context:i,parentValue:f,value:o},t.context=o,As(e,t,h),e=Au,e===null)throw Error(sr(403));o=e.parentValue,e.context._currentValue2=o===K4?e.context._defaultValue:o,e=Au=e.parent,t.context=e;return;case IP:o=o.children,o=o(i._currentValue2),As(e,t,o);return;case Iw:h=i._init,i=h(i._payload),o=aT(i,o),ex(e,t,i,o,void 0);return}throw Error(sr(130,i==null?i:typeof i,""))}}function As(e,t,i){if(t.node=i,typeof i=="object"&&i!==null){switch(i.$$typeof){case Z4:ex(e,t,i.type,i.props,i.ref);return;case SP:throw Error(sr(257));case Iw:var o=i._init;i=o(i._payload),As(e,t,i);return}if(K1(i)){lT(e,t,i);return}if(i===null||typeof i!="object"?o=null:(o=Kk&&i[Kk]||i["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(i))){if(i=o.next(),!i.done){var h=[];do h.push(i.value),i=o.next();while(!i.done);lT(e,t,h)}return}throw e=Object.prototype.toString.call(i),Error(sr(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}typeof i=="string"?(o=t.blockedSegment,o.lastPushedText=Xk(t.blockedSegment.chunks,i,e.responseState,o.lastPushedText)):typeof i=="number"&&(o=t.blockedSegment,o.lastPushedText=Xk(t.blockedSegment.chunks,""+i,e.responseState,o.lastPushedText))}function lT(e,t,i){for(var o=i.length,h=0;h<o;h++){var f=t.treeContext;t.treeContext=Q1(f,o,h);try{tx(e,t,i[h])}finally{t.treeContext=f}}}function tx(e,t,i){var o=t.blockedSegment.formatContext,h=t.legacyContext,f=t.context;try{return As(e,t,i)}catch(T){if(Aw(),typeof T=="object"&&T!==null&&typeof T.then=="function"){i=T;var g=t.blockedSegment,c=my(e,g.chunks.length,null,g.formatContext,g.lastPushedText,!0);g.children.push(c),g.lastPushedText=!1,e=Dw(e,t.node,t.blockedBoundary,c,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,i.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=h,t.context=f,fy(f)}else throw t.blockedSegment.formatContext=o,t.legacyContext=h,t.context=f,fy(f),T}}function lO(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,$P(this,t,e)}function NP(e,t,i){var o=e.blockedBoundary;e.blockedSegment.status=3,o===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(o.pendingTasks--,o.forceClientRender||(o.forceClientRender=!0,e=i===void 0?Error(sr(432)):i,o.errorDigest=t.onError(e),o.parentFlushed&&t.clientRenderedBoundaries.push(o)),o.fallbackAbortableTasks.forEach(function(h){return NP(h,t,i)}),o.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(o=t.onAllReady,o()))}function yy(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var i=t.children[0];i.id=t.id,i.parentFlushed=!0,i.status===1&&yy(e,i)}else e.completedSegments.push(t)}function $P(e,t,i){if(t===null){if(i.parentFlushed){if(e.completedRootSegment!==null)throw Error(sr(389));e.completedRootSegment=i}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=xf,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(i.parentFlushed&&i.status===1&&yy(t,i),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(lO,e),t.fallbackAbortableTasks.clear()):i.parentFlushed&&i.status===1&&(yy(t,i),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function jP(e){if(e.status!==2){var t=Au,i=Cv.current;Cv.current=iT;var o=Pg;Pg=e.responseState;try{var h=e.pingedTasks,f;for(f=0;f<h.length;f++){var g=h[f],c=e,T=g.blockedSegment;if(T.status===0){fy(g.context);try{As(c,g,g.node),c.responseState.generateStaticMarkup||T.lastPushedText&&T.textEmbedded&&T.chunks.push("<!-- -->"),g.abortSet.delete(g),T.status=1,$P(c,g.blockedBoundary,T)}catch(Y){if(Aw(),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"){var P=g.ping;Y.then(P,P)}else{g.abortSet.delete(g),T.status=4;var R=g.blockedBoundary,A=Y,M=np(c,A);if(R===null?gy(c,A):(R.pendingTasks--,R.forceClientRender||(R.forceClientRender=!0,R.errorDigest=M,R.parentFlushed&&c.clientRenderedBoundaries.push(R))),c.allPendingTasks--,c.allPendingTasks===0){var N=c.onAllReady;N()}}}finally{}}}h.splice(0,f),e.destination!==null&&zw(e,e.destination)}catch(Y){np(e,Y),gy(e,Y)}finally{Pg=o,Cv.current=i,i===iT&&fy(t)}}}function tg(e,t,i){switch(i.parentFlushed=!0,i.status){case 0:var o=i.id=e.nextSegmentId++;return i.lastPushedText=!1,i.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=o.toString(16),t.push(e),t.push('"></template>');case 1:i.status=2;var h=!0;o=i.chunks;var f=0;i=i.children;for(var g=0;g<i.length;g++){for(h=i[g];f<h.index;f++)t.push(o[f]);h=f_(e,t,h)}for(;f<o.length-1;f++)t.push(o[f]);return f<o.length&&(h=t.push(o[f])),h;default:throw Error(sr(390))}}function f_(e,t,i){var o=i.boundary;if(o===null)return tg(e,t,i);if(o.parentFlushed=!0,o.forceClientRender)return e.responseState.generateStaticMarkup||(o=o.errorDigest,t.push("<!--$!-->"),t.push("<template"),o&&(t.push(' data-dgst="'),o=Vi(o),t.push(o),t.push('"')),t.push("></template>")),tg(e,t,i),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var h=e.responseState,f=h.nextSuspenseID++;return h=h.boundaryPrefix+f.toString(16),o=o.id=h,Yk(t,e.responseState,o),tg(e,t,i),t.push("<!--/$-->")}if(o.byteSize>e.progressiveChunkSize)return o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),Yk(t,e.responseState,o.id),tg(e,t,i),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),i=o.completedSegments,i.length!==1)throw Error(sr(391));return f_(e,t,i[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function uT(e,t,i){return V4(t,e.responseState,i.formatContext,i.id),f_(e,t,i),H4(t,i.formatContext)}function cT(e,t,i){for(var o=i.completedSegments,h=0;h<o.length;h++)UP(e,t,i,o[h]);if(o.length=0,e=e.responseState,o=i.id,i=i.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),o===null)throw Error(sr(395));return i=i.toString(16),t.push(o),t.push('","'),t.push(e.segmentPrefix),t.push(i),t.push('")<\/script>')}function UP(e,t,i,o){if(o.status===2)return!0;var h=o.id;if(h===-1){if((o.id=i.rootSegmentID)===-1)throw Error(sr(392));return uT(e,t,o)}return uT(e,t,o),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),h=h.toString(16),t.push(h),t.push('","'),t.push(e.placeholderPrefix),t.push(h),t.push('")<\/script>')}function zw(e,t){try{var i=e.completedRootSegment;if(i!==null&&e.pendingRootTasks===0){f_(e,t,i),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(i=0;i<o.length-1;i++)t.push(o[i]);i<o.length&&t.push(o[i])}var h=e.clientRenderedBoundaries,f;for(f=0;f<h.length;f++){var g=h[f];o=t;var c=e.responseState,T=g.id,P=g.errorDigest,R=g.errorMessage,A=g.errorComponentStack;if(o.push(c.startInlineScript),c.sentClientRenderFunction?o.push('$RX("'):(c.sentClientRenderFunction=!0,o.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),T===null)throw Error(sr(395));if(o.push(T),o.push('"'),P||R||A){o.push(",");var M=Ev(P||"");o.push(M)}if(R||A){o.push(",");var N=Ev(R||"");o.push(N)}if(A){o.push(",");var Y=Ev(A);o.push(Y)}if(!o.push(")<\/script>")){e.destination=null,f++,h.splice(0,f);return}}h.splice(0,f);var U=e.completedBoundaries;for(f=0;f<U.length;f++)if(!cT(e,t,U[f])){e.destination=null,f++,U.splice(0,f);return}U.splice(0,f);var te=e.partialBoundaries;for(f=0;f<te.length;f++){var O=te[f];e:{h=e,g=t;var $=O.completedSegments;for(c=0;c<$.length;c++)if(!UP(h,g,O,$[c])){c++,$.splice(0,c);var q=!1;break e}$.splice(0,c),q=!0}if(!q){e.destination=null,f++,te.splice(0,f);return}}te.splice(0,f);var ne=e.completedBoundaries;for(f=0;f<ne.length;f++)if(!cT(e,t,ne[f])){e.destination=null,f++,ne.splice(0,f);return}ne.splice(0,f)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function uO(e,t){try{var i=e.abortableTasks;i.forEach(function(o){return NP(o,e,t)}),i.clear(),e.destination!==null&&zw(e,e.destination)}catch(o){np(e,o),gy(e,o)}}function cO(){}function VP(e,t,i,o){var h=!1,f=null,g="",c={push:function(P){return P!==null&&(g+=P),!0},destroy:function(P){h=!0,f=P}},T=!1;if(e=aO(e,G4(i,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,cO,void 0,function(){T=!0}),jP(e),uO(e,o),e.status===1)e.status=2,c.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=c;try{zw(e,c)}catch(P){np(e,P),gy(e,P)}}if(h)throw f;if(!T)throw Error(sr(426));return g}jh.renderToNodeStream=function(){throw Error(sr(207))};jh.renderToStaticMarkup=function(e,t){return VP(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};jh.renderToStaticNodeStream=function(){throw Error(sr(208))};jh.renderToString=function(e,t){return VP(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};jh.version="18.3.1";var Rw={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=Ht;function dr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ds=null,zs=0;function $t(e,t){if(t.length!==0)if(512<t.length)0<zs&&(e.enqueue(new Uint8Array(Ds.buffer,0,zs)),Ds=new Uint8Array(512),zs=0),e.enqueue(t);else{var i=Ds.length-zs;i<t.length&&(i===0?e.enqueue(Ds):(Ds.set(t.subarray(0,i),zs),e.enqueue(Ds),t=t.subarray(i)),Ds=new Uint8Array(512),zs=0),Ds.set(t,zs),zs+=t.length}}function un(e,t){return $t(e,t),!0}function hT(e){Ds&&0<zs&&(e.enqueue(new Uint8Array(Ds.buffer,0,zs)),Ds=null,zs=0)}var WP=new TextEncoder;function pr(e){return WP.encode(e)}function Et(e){return WP.encode(e)}function GP(e,t){typeof e.error=="function"?e.error(t):e.close()}var os=Object.prototype.hasOwnProperty,hO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dT={},fT={};function ZP(e){return os.call(fT,e)?!0:os.call(dT,e)?!1:hO.test(e)?fT[e]=!0:(dT[e]=!0,!1)}function qi(e,t,i,o,h,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fi[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fi[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fi[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fi[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fi[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fi[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fi[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fi[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fi[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lw=/[\-:]([a-z])/g;function Ow(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lw,Ow);fi[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lw,Ow);fi[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lw,Ow);fi[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fi[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});fi.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fi[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});var Mg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dO=["Webkit","ms","Moz","O"];Object.keys(Mg).forEach(function(e){dO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mg[t]=Mg[e]})});var fO=/["'&<>]/;function ui(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=fO.exec(e);if(t){var i="",o,h=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}h!==o&&(i+=e.substring(h,o)),h=o+1,i+=t}e=h!==o?i+e.substring(h,o):i}return e}var pO=/([A-Z])/g,mO=/^ms-/,rx=Array.isArray,gO=Et("<script>"),yO=Et("<\/script>"),_O=Et('<script src="'),vO=Et('<script type="module" src="'),pT=Et('" async=""><\/script>'),xO=/(<\/|<)(s)(cript)/gi;function wO(e,t,i,o){return""+t+(i==="s"?"\\u0073":"\\u0053")+o}function bO(e,t,i,o,h){e=e===void 0?"":e,t=t===void 0?gO:Et('<script nonce="'+ui(t)+'">');var f=[];if(i!==void 0&&f.push(t,pr((""+i).replace(xO,wO)),yO),o!==void 0)for(i=0;i<o.length;i++)f.push(_O,pr(ui(o[i])),pT);if(h!==void 0)for(o=0;o<h.length;o++)f.push(vO,pr(ui(h[o])),pT);return{bootstrapChunks:f,startInlineScript:t,placeholderPrefix:Et(e+"P:"),segmentPrefix:Et(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function No(e,t){return{insertionMode:e,selectedValue:t}}function SO(e){return No(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function kO(e,t,i){switch(t){case"select":return No(1,i.value!=null?i.value:i.defaultValue);case"svg":return No(2,null);case"math":return No(3,null);case"foreignObject":return No(1,null);case"table":return No(4,null);case"thead":case"tbody":case"tfoot":return No(5,null);case"colgroup":return No(7,null);case"tr":return No(6,null)}return 4<=e.insertionMode||e.insertionMode===0?No(1,null):e}var Fw=Et("<!-- -->");function mT(e,t,i,o){return t===""?o:(o&&e.push(Fw),e.push(pr(ui(t))),!0)}var gT=new Map,TO=Et(' style="'),yT=Et(":"),EO=Et(";");function qP(e,t,i){if(typeof i!="object")throw Error(dr(62));t=!0;for(var o in i)if(os.call(i,o)){var h=i[o];if(h!=null&&typeof h!="boolean"&&h!==""){if(o.indexOf("--")===0){var f=pr(ui(o));h=pr(ui((""+h).trim()))}else{f=o;var g=gT.get(f);g!==void 0||(g=Et(ui(f.replace(pO,"-$1").toLowerCase().replace(mO,"-ms-"))),gT.set(f,g)),f=g,h=typeof h=="number"?h===0||os.call(Mg,o)?pr(""+h):pr(h+"px"):pr(ui((""+h).trim()))}t?(t=!1,e.push(TO,f,yT,h)):e.push(EO,f,yT,h)}}t||e.push(Tu)}var vl=Et(" "),Xc=Et('="'),Tu=Et('"'),_T=Et('=""');function Is(e,t,i,o){switch(i){case"style":qP(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N"){if(t=fi.hasOwnProperty(i)?fi[i]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(i=pr(t.attributeName),t.type){case 3:o&&e.push(vl,i,_T);break;case 4:o===!0?e.push(vl,i,_T):o!==!1&&e.push(vl,i,Xc,pr(ui(o)),Tu);break;case 5:isNaN(o)||e.push(vl,i,Xc,pr(ui(o)),Tu);break;case 6:!isNaN(o)&&1<=o&&e.push(vl,i,Xc,pr(ui(o)),Tu);break;default:t.sanitizeURL&&(o=""+o),e.push(vl,i,Xc,pr(ui(o)),Tu)}}else if(ZP(i)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=i.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(vl,pr(i),Xc,pr(ui(o)),Tu)}}}var xl=Et(">"),vT=Et("/>");function Ag(e,t,i){if(t!=null){if(i!=null)throw Error(dr(60));if(typeof t!="object"||!("__html"in t))throw Error(dr(61));t=t.__html,t!=null&&e.push(pr(""+t))}}function CO(e){var t="";return HP.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}var Iv=Et(' selected=""');function Pv(e,t,i,o){e.push($o(i));var h=i=null,f;for(f in t)if(os.call(t,f)){var g=t[f];if(g!=null)switch(f){case"children":i=g;break;case"dangerouslySetInnerHTML":h=g;break;default:Is(e,o,f,g)}}return e.push(xl),Ag(e,h,i),typeof i=="string"?(e.push(pr(ui(i))),null):i}var Mv=Et(`
`),IO=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xT=new Map;function $o(e){var t=xT.get(e);if(t===void 0){if(!IO.test(e))throw Error(dr(65,e));t=Et("<"+e),xT.set(e,t)}return t}var PO=Et("<!DOCTYPE html>");function MO(e,t,i,o,h){switch(t){case"select":e.push($o("select"));var f=null,g=null;for(R in i)if(os.call(i,R)){var c=i[R];if(c!=null)switch(R){case"children":f=c;break;case"dangerouslySetInnerHTML":g=c;break;case"defaultValue":case"value":break;default:Is(e,o,R,c)}}return e.push(xl),Ag(e,g,f),f;case"option":g=h.selectedValue,e.push($o("option"));var T=c=null,P=null,R=null;for(f in i)if(os.call(i,f)){var A=i[f];if(A!=null)switch(f){case"children":c=A;break;case"selected":P=A;break;case"dangerouslySetInnerHTML":R=A;break;case"value":T=A;default:Is(e,o,f,A)}}if(g!=null)if(i=T!==null?""+T:CO(c),rx(g)){for(o=0;o<g.length;o++)if(""+g[o]===i){e.push(Iv);break}}else""+g===i&&e.push(Iv);else P&&e.push(Iv);return e.push(xl),Ag(e,R,c),c;case"textarea":e.push($o("textarea")),R=g=f=null;for(c in i)if(os.call(i,c)&&(T=i[c],T!=null))switch(c){case"children":R=T;break;case"value":f=T;break;case"defaultValue":g=T;break;case"dangerouslySetInnerHTML":throw Error(dr(91));default:Is(e,o,c,T)}if(f===null&&g!==null&&(f=g),e.push(xl),R!=null){if(f!=null)throw Error(dr(92));if(rx(R)&&1<R.length)throw Error(dr(93));f=""+R}return typeof f=="string"&&f[0]===`
`&&e.push(Mv),f!==null&&e.push(pr(ui(""+f))),null;case"input":e.push($o("input")),T=R=c=f=null;for(g in i)if(os.call(i,g)&&(P=i[g],P!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(dr(399,"input"));case"defaultChecked":T=P;break;case"defaultValue":c=P;break;case"checked":R=P;break;case"value":f=P;break;default:Is(e,o,g,P)}return R!==null?Is(e,o,"checked",R):T!==null&&Is(e,o,"checked",T),f!==null?Is(e,o,"value",f):c!==null&&Is(e,o,"value",c),e.push(vT),null;case"menuitem":e.push($o("menuitem"));for(var M in i)if(os.call(i,M)&&(f=i[M],f!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(dr(400));default:Is(e,o,M,f)}return e.push(xl),null;case"title":e.push($o("title")),f=null;for(A in i)if(os.call(i,A)&&(g=i[A],g!=null))switch(A){case"children":f=g;break;case"dangerouslySetInnerHTML":throw Error(dr(434));default:Is(e,o,A,g)}return e.push(xl),f;case"listing":case"pre":e.push($o(t)),g=f=null;for(T in i)if(os.call(i,T)&&(c=i[T],c!=null))switch(T){case"children":f=c;break;case"dangerouslySetInnerHTML":g=c;break;default:Is(e,o,T,c)}if(e.push(xl),g!=null){if(f!=null)throw Error(dr(60));if(typeof g!="object"||!("__html"in g))throw Error(dr(61));i=g.__html,i!=null&&(typeof i=="string"&&0<i.length&&i[0]===`
`?e.push(Mv,pr(i)):e.push(pr(""+i)))}return typeof f=="string"&&f[0]===`
`&&e.push(Mv),f;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push($o(t));for(var N in i)if(os.call(i,N)&&(f=i[N],f!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(dr(399,t));default:Is(e,o,N,f)}return e.push(vT),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Pv(e,i,t,o);case"html":return h.insertionMode===0&&e.push(PO),Pv(e,i,t,o);default:if(t.indexOf("-")===-1&&typeof i.is!="string")return Pv(e,i,t,o);e.push($o(t)),g=f=null;for(P in i)if(os.call(i,P)&&(c=i[P],c!=null))switch(P){case"children":f=c;break;case"dangerouslySetInnerHTML":g=c;break;case"style":qP(e,o,c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:ZP(P)&&typeof c!="function"&&typeof c!="symbol"&&e.push(vl,pr(P),Xc,pr(ui(c)),Tu)}return e.push(xl),Ag(e,g,f),f}}var AO=Et("</"),DO=Et(">"),zO=Et('<template id="'),RO=Et('"></template>'),LO=Et("<!--$-->"),OO=Et('<!--$?--><template id="'),FO=Et('"></template>'),BO=Et("<!--$!-->"),NO=Et("<!--/$-->"),$O=Et("<template"),jO=Et('"'),UO=Et(' data-dgst="');Et(' data-msg="');Et(' data-stck="');var VO=Et("></template>");function wT(e,t,i){if($t(e,OO),i===null)throw Error(dr(395));return $t(e,i),un(e,FO)}var HO=Et('<div hidden id="'),WO=Et('">'),GO=Et("</div>"),ZO=Et('<svg aria-hidden="true" style="display:none" id="'),qO=Et('">'),YO=Et("</svg>"),XO=Et('<math aria-hidden="true" style="display:none" id="'),KO=Et('">'),JO=Et("</math>"),QO=Et('<table hidden id="'),e6=Et('">'),t6=Et("</table>"),r6=Et('<table hidden><tbody id="'),n6=Et('">'),i6=Et("</tbody></table>"),s6=Et('<table hidden><tr id="'),o6=Et('">'),a6=Et("</tr></table>"),l6=Et('<table hidden><colgroup id="'),u6=Et('">'),c6=Et("</colgroup></table>");function h6(e,t,i,o){switch(i.insertionMode){case 0:case 1:return $t(e,HO),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,WO);case 2:return $t(e,ZO),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,qO);case 3:return $t(e,XO),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,KO);case 4:return $t(e,QO),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,e6);case 5:return $t(e,r6),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,n6);case 6:return $t(e,s6),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,o6);case 7:return $t(e,l6),$t(e,t.segmentPrefix),$t(e,pr(o.toString(16))),un(e,u6);default:throw Error(dr(397))}}function d6(e,t){switch(t.insertionMode){case 0:case 1:return un(e,GO);case 2:return un(e,YO);case 3:return un(e,JO);case 4:return un(e,t6);case 5:return un(e,i6);case 6:return un(e,a6);case 7:return un(e,c6);default:throw Error(dr(397))}}var f6=Et('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),p6=Et('$RS("'),m6=Et('","'),g6=Et('")<\/script>'),y6=Et('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),_6=Et('$RC("'),v6=Et('","'),x6=Et('")<\/script>'),w6=Et('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),b6=Et('$RX("'),S6=Et('"'),k6=Et(")<\/script>"),Av=Et(","),T6=/[<\u2028\u2029]/g;function Dv(e){return JSON.stringify(e).replace(T6,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Rf=Object.assign,E6=Symbol.for("react.element"),YP=Symbol.for("react.portal"),XP=Symbol.for("react.fragment"),KP=Symbol.for("react.strict_mode"),JP=Symbol.for("react.profiler"),QP=Symbol.for("react.provider"),eM=Symbol.for("react.context"),tM=Symbol.for("react.forward_ref"),rM=Symbol.for("react.suspense"),nM=Symbol.for("react.suspense_list"),iM=Symbol.for("react.memo"),Bw=Symbol.for("react.lazy"),C6=Symbol.for("react.scope"),I6=Symbol.for("react.debug_trace_mode"),P6=Symbol.for("react.legacy_hidden"),M6=Symbol.for("react.default_value"),bT=Symbol.iterator;function nx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case XP:return"Fragment";case YP:return"Portal";case JP:return"Profiler";case KP:return"StrictMode";case rM:return"Suspense";case nM:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case eM:return(e.displayName||"Context")+".Consumer";case QP:return(e._context.displayName||"Context")+".Provider";case tM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case iM:return t=e.displayName||null,t!==null?t:nx(e.type)||"Memo";case Bw:t=e._payload,e=e._init;try{return nx(e(t))}catch{}}return null}var sM={};function ST(e,t){if(e=e.contextTypes,!e)return sM;var i={},o;for(o in e)i[o]=t[o];return i}var Du=null;function p_(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var i=t.parent;if(e===null){if(i!==null)throw Error(dr(401))}else{if(i===null)throw Error(dr(401));p_(e,i)}t.context._currentValue=t.value}}function oM(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&oM(e)}function aM(e){var t=e.parent;t!==null&&aM(t),e.context._currentValue=e.value}function lM(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(dr(402));e.depth===t.depth?p_(e,t):lM(e,t)}function uM(e,t){var i=t.parent;if(i===null)throw Error(dr(402));e.depth===i.depth?p_(e,i):uM(e,i),t.context._currentValue=t.value}function _y(e){var t=Du;t!==e&&(t===null?aM(e):e===null?oM(t):t.depth===e.depth?p_(t,e):t.depth>e.depth?lM(t,e):uM(t,e),Du=e)}var kT={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function TT(e,t,i,o){var h=e.state!==void 0?e.state:null;e.updater=kT,e.props=i,e.state=h;var f={queue:[],replace:!1};e._reactInternals=f;var g=t.contextType;if(e.context=typeof g=="object"&&g!==null?g._currentValue:o,g=t.getDerivedStateFromProps,typeof g=="function"&&(g=g(i,h),h=g==null?h:Rf({},h,g),e.state=h),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&kT.enqueueReplaceState(e,e.state,null),f.queue!==null&&0<f.queue.length)if(t=f.queue,g=f.replace,f.queue=null,f.replace=!1,g&&t.length===1)e.state=t[0];else{for(f=g?t[0]:e.state,h=!0,g=g?1:0;g<t.length;g++){var c=t[g];c=typeof c=="function"?c.call(e,f,i,o):c,c!=null&&(h?(h=!1,f=Rf({},f,c)):Rf(f,c))}e.state=f}else f.queue=null}var A6={id:1,overflow:""};function ix(e,t,i){var o=e.id;e=e.overflow;var h=32-Dg(o)-1;o&=~(1<<h),i+=1;var f=32-Dg(t)+h;if(30<f){var g=h-h%5;return f=(o&(1<<g)-1).toString(32),o>>=g,h-=g,{id:1<<32-Dg(t)+h|i<<h|o,overflow:f+e}}return{id:1<<f|i<<h|o,overflow:e}}var Dg=Math.clz32?Math.clz32:R6,D6=Math.log,z6=Math.LN2;function R6(e){return e>>>=0,e===0?32:31-(D6(e)/z6|0)|0}function L6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var O6=typeof Object.is=="function"?Object.is:L6,Da=null,Nw=null,zg=null,Qr=null,wf=!1,vy=!1,ip=0,Il=null,m_=0;function Eu(){if(Da===null)throw Error(dr(321));return Da}function ET(){if(0<m_)throw Error(dr(312));return{memoizedState:null,queue:null,next:null}}function $w(){return Qr===null?zg===null?(wf=!1,zg=Qr=ET()):(wf=!0,Qr=zg):Qr.next===null?(wf=!1,Qr=Qr.next=ET()):(wf=!0,Qr=Qr.next),Qr}function jw(){Nw=Da=null,vy=!1,zg=null,m_=0,Qr=Il=null}function cM(e,t){return typeof t=="function"?t(e):t}function CT(e,t,i){if(Da=Eu(),Qr=$w(),wf){var o=Qr.queue;if(t=o.dispatch,Il!==null&&(i=Il.get(o),i!==void 0)){Il.delete(o),o=Qr.memoizedState;do o=e(o,i.action),i=i.next;while(i!==null);return Qr.memoizedState=o,[o,t]}return[Qr.memoizedState,t]}return e=e===cM?typeof t=="function"?t():t:i!==void 0?i(t):t,Qr.memoizedState=e,e=Qr.queue={last:null,dispatch:null},e=e.dispatch=F6.bind(null,Da,e),[Qr.memoizedState,e]}function IT(e,t){if(Da=Eu(),Qr=$w(),t=t===void 0?null:t,Qr!==null){var i=Qr.memoizedState;if(i!==null&&t!==null){var o=i[1];e:if(o===null)o=!1;else{for(var h=0;h<o.length&&h<t.length;h++)if(!O6(t[h],o[h])){o=!1;break e}o=!0}if(o)return i[0]}}return e=e(),Qr.memoizedState=[e,t],e}function F6(e,t,i){if(25<=m_)throw Error(dr(301));if(e===Da)if(vy=!0,e={action:i,next:null},Il===null&&(Il=new Map),i=Il.get(t),i===void 0)Il.set(t,e);else{for(t=i;t.next!==null;)t=t.next;t.next=e}}function B6(){throw Error(dr(394))}function rg(){}var PT={readContext:function(e){return e._currentValue},useContext:function(e){return Eu(),e._currentValue},useMemo:IT,useReducer:CT,useRef:function(e){Da=Eu(),Qr=$w();var t=Qr.memoizedState;return t===null?(e={current:e},Qr.memoizedState=e):t},useState:function(e){return CT(cM,e)},useInsertionEffect:rg,useLayoutEffect:function(){},useCallback:function(e,t){return IT(function(){return e},t)},useImperativeHandle:rg,useEffect:rg,useDebugValue:rg,useDeferredValue:function(e){return Eu(),e},useTransition:function(){return Eu(),[!1,B6]},useId:function(){var e=Nw.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Dg(e)-1)).toString(32)+t;var i=Rg;if(i===null)throw Error(dr(404));return t=ip++,e=":"+i.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Eu(),t(e._source)},useSyncExternalStore:function(e,t,i){if(i===void 0)throw Error(dr(407));return i()}},Rg=null,zv=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function N6(e){return console.error(e),null}function bf(){}function $6(e,t,i,o,h,f,g,c,T){var P=[],R=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:R,pingedTasks:P,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:h===void 0?N6:h,onAllReady:f===void 0?bf:f,onShellReady:g===void 0?bf:g,onShellError:c===void 0?bf:c,onFatalError:T===void 0?bf:T},i=xy(t,0,null,i,!1,!1),i.parentFlushed=!0,e=Uw(t,e,null,i,R,sM,null,A6),P.push(e),t}function Uw(e,t,i,o,h,f,g,c){e.allPendingTasks++,i===null?e.pendingRootTasks++:i.pendingTasks++;var T={node:t,ping:function(){var P=e.pingedTasks;P.push(T),P.length===1&&fM(e)},blockedBoundary:i,blockedSegment:o,abortSet:h,legacyContext:f,context:g,treeContext:c};return h.add(T),T}function xy(e,t,i,o,h,f){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:i,lastPushedText:h,textEmbedded:f}}function sp(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function wy(e,t){var i=e.onShellError;i(t),i=e.onFatalError,i(t),e.destination!==null?(e.status=2,GP(e.destination,t)):(e.status=1,e.fatalError=t)}function MT(e,t,i,o,h){for(Da={},Nw=t,ip=0,e=i(o,h);vy;)vy=!1,ip=0,m_+=1,Qr=null,e=i(o,h);return jw(),e}function AT(e,t,i,o){var h=i.render(),f=o.childContextTypes;if(f!=null){var g=t.legacyContext;if(typeof i.getChildContext!="function")o=g;else{i=i.getChildContext();for(var c in i)if(!(c in f))throw Error(dr(108,nx(o)||"Unknown",c));o=Rf({},g,i)}t.legacyContext=o,Rs(e,t,h),t.legacyContext=g}else Rs(e,t,h)}function DT(e,t){if(e&&e.defaultProps){t=Rf({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function sx(e,t,i,o,h){if(typeof i=="function")if(i.prototype&&i.prototype.isReactComponent){h=ST(i,t.legacyContext);var f=i.contextType;f=new i(o,typeof f=="object"&&f!==null?f._currentValue:h),TT(f,i,o,h),AT(e,t,f,i)}else{f=ST(i,t.legacyContext),h=MT(e,t,i,o,f);var g=ip!==0;if(typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0)TT(h,i,o,f),AT(e,t,h,i);else if(g){o=t.treeContext,t.treeContext=ix(o,1,0);try{Rs(e,t,h)}finally{t.treeContext=o}}else Rs(e,t,h)}else if(typeof i=="string"){switch(h=t.blockedSegment,f=MO(h.chunks,i,o,e.responseState,h.formatContext),h.lastPushedText=!1,g=h.formatContext,h.formatContext=kO(g,i,o),ox(e,t,f),h.formatContext=g,i){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:h.chunks.push(AO,pr(i),DO)}h.lastPushedText=!1}else{switch(i){case P6:case I6:case KP:case JP:case XP:Rs(e,t,o.children);return;case nM:Rs(e,t,o.children);return;case C6:throw Error(dr(343));case rM:e:{i=t.blockedBoundary,h=t.blockedSegment,f=o.fallback,o=o.children,g=new Set;var c={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g,errorDigest:null},T=xy(e,h.chunks.length,c,h.formatContext,!1,!1);h.children.push(T),h.lastPushedText=!1;var P=xy(e,0,null,h.formatContext,!1,!1);P.parentFlushed=!0,t.blockedBoundary=c,t.blockedSegment=P;try{if(ox(e,t,o),P.lastPushedText&&P.textEmbedded&&P.chunks.push(Fw),P.status=1,by(c,P),c.pendingTasks===0)break e}catch(R){P.status=4,c.forceClientRender=!0,c.errorDigest=sp(e,R)}finally{t.blockedBoundary=i,t.blockedSegment=h}t=Uw(e,f,i,T,g,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof i=="object"&&i!==null)switch(i.$$typeof){case tM:if(o=MT(e,t,i.render,o,h),ip!==0){i=t.treeContext,t.treeContext=ix(i,1,0);try{Rs(e,t,o)}finally{t.treeContext=i}}else Rs(e,t,o);return;case iM:i=i.type,o=DT(i,o),sx(e,t,i,o,h);return;case QP:if(h=o.children,i=i._context,o=o.value,f=i._currentValue,i._currentValue=o,g=Du,Du=o={parent:g,depth:g===null?0:g.depth+1,context:i,parentValue:f,value:o},t.context=o,Rs(e,t,h),e=Du,e===null)throw Error(dr(403));o=e.parentValue,e.context._currentValue=o===M6?e.context._defaultValue:o,e=Du=e.parent,t.context=e;return;case eM:o=o.children,o=o(i._currentValue),Rs(e,t,o);return;case Bw:h=i._init,i=h(i._payload),o=DT(i,o),sx(e,t,i,o,void 0);return}throw Error(dr(130,i==null?i:typeof i,""))}}function Rs(e,t,i){if(t.node=i,typeof i=="object"&&i!==null){switch(i.$$typeof){case E6:sx(e,t,i.type,i.props,i.ref);return;case YP:throw Error(dr(257));case Bw:var o=i._init;i=o(i._payload),Rs(e,t,i);return}if(rx(i)){zT(e,t,i);return}if(i===null||typeof i!="object"?o=null:(o=bT&&i[bT]||i["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(i))){if(i=o.next(),!i.done){var h=[];do h.push(i.value),i=o.next();while(!i.done);zT(e,t,h)}return}throw e=Object.prototype.toString.call(i),Error(dr(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}typeof i=="string"?(o=t.blockedSegment,o.lastPushedText=mT(t.blockedSegment.chunks,i,e.responseState,o.lastPushedText)):typeof i=="number"&&(o=t.blockedSegment,o.lastPushedText=mT(t.blockedSegment.chunks,""+i,e.responseState,o.lastPushedText))}function zT(e,t,i){for(var o=i.length,h=0;h<o;h++){var f=t.treeContext;t.treeContext=ix(f,o,h);try{ox(e,t,i[h])}finally{t.treeContext=f}}}function ox(e,t,i){var o=t.blockedSegment.formatContext,h=t.legacyContext,f=t.context;try{return Rs(e,t,i)}catch(T){if(jw(),typeof T=="object"&&T!==null&&typeof T.then=="function"){i=T;var g=t.blockedSegment,c=xy(e,g.chunks.length,null,g.formatContext,g.lastPushedText,!0);g.children.push(c),g.lastPushedText=!1,e=Uw(e,t.node,t.blockedBoundary,c,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,i.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=h,t.context=f,_y(f)}else throw t.blockedSegment.formatContext=o,t.legacyContext=h,t.context=f,_y(f),T}}function j6(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,dM(this,t,e)}function hM(e,t,i){var o=e.blockedBoundary;e.blockedSegment.status=3,o===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(o.pendingTasks--,o.forceClientRender||(o.forceClientRender=!0,e=i===void 0?Error(dr(432)):i,o.errorDigest=t.onError(e),o.parentFlushed&&t.clientRenderedBoundaries.push(o)),o.fallbackAbortableTasks.forEach(function(h){return hM(h,t,i)}),o.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(o=t.onAllReady,o()))}function by(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var i=t.children[0];i.id=t.id,i.parentFlushed=!0,i.status===1&&by(e,i)}else e.completedSegments.push(t)}function dM(e,t,i){if(t===null){if(i.parentFlushed){if(e.completedRootSegment!==null)throw Error(dr(389));e.completedRootSegment=i}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=bf,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(i.parentFlushed&&i.status===1&&by(t,i),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(j6,e),t.fallbackAbortableTasks.clear()):i.parentFlushed&&i.status===1&&(by(t,i),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function fM(e){if(e.status!==2){var t=Du,i=zv.current;zv.current=PT;var o=Rg;Rg=e.responseState;try{var h=e.pingedTasks,f;for(f=0;f<h.length;f++){var g=h[f],c=e,T=g.blockedSegment;if(T.status===0){_y(g.context);try{Rs(c,g,g.node),T.lastPushedText&&T.textEmbedded&&T.chunks.push(Fw),g.abortSet.delete(g),T.status=1,dM(c,g.blockedBoundary,T)}catch(Y){if(jw(),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"){var P=g.ping;Y.then(P,P)}else{g.abortSet.delete(g),T.status=4;var R=g.blockedBoundary,A=Y,M=sp(c,A);if(R===null?wy(c,A):(R.pendingTasks--,R.forceClientRender||(R.forceClientRender=!0,R.errorDigest=M,R.parentFlushed&&c.clientRenderedBoundaries.push(R))),c.allPendingTasks--,c.allPendingTasks===0){var N=c.onAllReady;N()}}}finally{}}}h.splice(0,f),e.destination!==null&&Vw(e,e.destination)}catch(Y){sp(e,Y),wy(e,Y)}finally{Rg=o,zv.current=i,i===PT&&_y(t)}}}function ng(e,t,i){switch(i.parentFlushed=!0,i.status){case 0:var o=i.id=e.nextSegmentId++;return i.lastPushedText=!1,i.textEmbedded=!1,e=e.responseState,$t(t,zO),$t(t,e.placeholderPrefix),e=pr(o.toString(16)),$t(t,e),un(t,RO);case 1:i.status=2;var h=!0;o=i.chunks;var f=0;i=i.children;for(var g=0;g<i.length;g++){for(h=i[g];f<h.index;f++)$t(t,o[f]);h=g_(e,t,h)}for(;f<o.length-1;f++)$t(t,o[f]);return f<o.length&&(h=un(t,o[f])),h;default:throw Error(dr(390))}}function g_(e,t,i){var o=i.boundary;if(o===null)return ng(e,t,i);if(o.parentFlushed=!0,o.forceClientRender)o=o.errorDigest,un(t,BO),$t(t,$O),o&&($t(t,UO),$t(t,pr(ui(o))),$t(t,jO)),un(t,VO),ng(e,t,i);else if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var h=e.responseState,f=h.nextSuspenseID++;h=Et(h.boundaryPrefix+f.toString(16)),o=o.id=h,wT(t,e.responseState,o),ng(e,t,i)}else if(o.byteSize>e.progressiveChunkSize)o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),wT(t,e.responseState,o.id),ng(e,t,i);else{if(un(t,LO),i=o.completedSegments,i.length!==1)throw Error(dr(391));g_(e,t,i[0])}return un(t,NO)}function RT(e,t,i){return h6(t,e.responseState,i.formatContext,i.id),g_(e,t,i),d6(t,i.formatContext)}function LT(e,t,i){for(var o=i.completedSegments,h=0;h<o.length;h++)pM(e,t,i,o[h]);if(o.length=0,e=e.responseState,o=i.id,i=i.rootSegmentID,$t(t,e.startInlineScript),e.sentCompleteBoundaryFunction?$t(t,_6):(e.sentCompleteBoundaryFunction=!0,$t(t,y6)),o===null)throw Error(dr(395));return i=pr(i.toString(16)),$t(t,o),$t(t,v6),$t(t,e.segmentPrefix),$t(t,i),un(t,x6)}function pM(e,t,i,o){if(o.status===2)return!0;var h=o.id;if(h===-1){if((o.id=i.rootSegmentID)===-1)throw Error(dr(392));return RT(e,t,o)}return RT(e,t,o),e=e.responseState,$t(t,e.startInlineScript),e.sentCompleteSegmentFunction?$t(t,p6):(e.sentCompleteSegmentFunction=!0,$t(t,f6)),$t(t,e.segmentPrefix),h=pr(h.toString(16)),$t(t,h),$t(t,m6),$t(t,e.placeholderPrefix),$t(t,h),un(t,g6)}function Vw(e,t){Ds=new Uint8Array(512),zs=0;try{var i=e.completedRootSegment;if(i!==null&&e.pendingRootTasks===0){g_(e,t,i),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(i=0;i<o.length-1;i++)$t(t,o[i]);i<o.length&&un(t,o[i])}var h=e.clientRenderedBoundaries,f;for(f=0;f<h.length;f++){var g=h[f];o=t;var c=e.responseState,T=g.id,P=g.errorDigest,R=g.errorMessage,A=g.errorComponentStack;if($t(o,c.startInlineScript),c.sentClientRenderFunction?$t(o,b6):(c.sentClientRenderFunction=!0,$t(o,w6)),T===null)throw Error(dr(395));$t(o,T),$t(o,S6),(P||R||A)&&($t(o,Av),$t(o,pr(Dv(P||"")))),(R||A)&&($t(o,Av),$t(o,pr(Dv(R||"")))),A&&($t(o,Av),$t(o,pr(Dv(A)))),un(o,k6)}h.splice(0,f);var M=e.completedBoundaries;for(f=0;f<M.length;f++)LT(e,t,M[f]);M.splice(0,f),hT(t),Ds=new Uint8Array(512),zs=0;var N=e.partialBoundaries;for(f=0;f<N.length;f++){var Y=N[f];e:{h=e,g=t;var U=Y.completedSegments;for(c=0;c<U.length;c++)if(!pM(h,g,Y,U[c])){c++,U.splice(0,c);var te=!1;break e}U.splice(0,c),te=!0}if(!te){e.destination=null,f++,N.splice(0,f);return}}N.splice(0,f);var O=e.completedBoundaries;for(f=0;f<O.length;f++)LT(e,t,O[f]);O.splice(0,f)}finally{hT(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function OT(e,t){try{var i=e.abortableTasks;i.forEach(function(o){return hM(o,e,t)}),i.clear(),e.destination!==null&&Vw(e,e.destination)}catch(o){sp(e,o),wy(e,o)}}Rw.renderToReadableStream=function(e,t){return new Promise(function(i,o){var h,f,g=new Promise(function(R,A){f=R,h=A}),c=$6(e,bO(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),SO(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,f,function(){var R=new ReadableStream({type:"bytes",pull:function(A){if(c.status===1)c.status=2,GP(A,c.fatalError);else if(c.status!==2&&c.destination===null){c.destination=A;try{Vw(c,A)}catch(M){sp(c,M),wy(c,M)}}},cancel:function(){OT(c)}},{highWaterMark:0});R.allReady=g,i(R)},function(R){g.catch(function(){}),o(R)},h);if(t&&t.signal){var T=t.signal,P=function(){OT(c,T.reason),T.removeEventListener("abort",P)};T.addEventListener("abort",P)}fM(c)})};Rw.version="18.3.1";var Uh,mM;Uh=jh,mM=Rw;Uh.version;var U6=Uh.renderToString;Uh.renderToStaticMarkup;Uh.renderToNodeStream;Uh.renderToStaticNodeStream;mM.renderToReadableStream;function V6({latitude:e,longitude:t,children:i,closeOnMove:o,closeButton:h,closeOnClick:f,popupRef:g}){return Ht.useEffect(()=>{g.current||(g.current=new vP.Popup({closeOnClick:!1,closeOnMove:o,closeButton:h,className:"popup"})),g.current.setLngLat([t,e]).setHTML(U6(i))},[e,t,i,f,o,h,g]),null}var Sp={};function gM(e,t,i){var o,h,f,g,c,T,P,R,A=0,M,N=e.type==="FeatureCollection",Y=e.type==="Feature",U=N?e.features.length:1;for(o=0;o<U;o++)for(R=N?e.features[o].geometry:Y?e.geometry:e,M=R.type==="GeometryCollection",T=M?R.geometries.length:1,g=0;g<T;g++)if(c=M?R.geometries[g]:R,P=c.coordinates,A=i&&(c.type==="Polygon"||c.type==="MultiPolygon")?1:0,c.type==="Point")t(P);else if(c.type==="LineString"||c.type==="MultiPoint")for(h=0;h<P.length;h++)t(P[h]);else if(c.type==="Polygon"||c.type==="MultiLineString")for(h=0;h<P.length;h++)for(f=0;f<P[h].length-A;f++)t(P[h][f]);else if(c.type==="MultiPolygon")for(h=0;h<P.length;h++)for(f=0;f<P[h].length;f++)for(l=0;l<P[h][f].length-A;l++)t(P[h][f][l]);else throw new Error("Unknown Geometry Type")}Sp.coordEach=gM;function H6(e,t,i,o){return gM(e,function(h){i=t(i,h)},o),i}Sp.coordReduce=H6;function yM(e,t){var i;switch(e.type){case"FeatureCollection":for(features=e.features,i=0;i<e.features.length;i++)t(e.features[i].properties);break;case"Feature":t(e.properties);break}}Sp.propEach=yM;function W6(e,t,i){return yM(e,function(o){i=t(i,o)}),i}Sp.propReduce=W6;var G6=Sp.coordEach,Z6=function(e){var t=[1/0,1/0,-1/0,-1/0];return G6(e,function(i){t[0]>i[0]&&(t[0]=i[0]),t[1]>i[1]&&(t[1]=i[1]),t[2]<i[0]&&(t[2]=i[0]),t[3]<i[1]&&(t[3]=i[1])}),t};const q6=dp(Z6),Y6=(e,t)=>{if(e.file&&t&&e.file in t){if(e.file.endsWith("jpg")||e.file.endsWith("jpeg"))return We.jsx("img",{className:"popupImage",alt:"Message attached file",src:URL.createObjectURL(t[e.file])});if(e.file.endsWith("mp4"))return We.jsx("video",{controls:!0,autoplay:!0,loop:!0,className:"popupImage",alt:"Message attached file",src:URL.createObjectURL(t[e.file])})}return e.message};function X6({data:e,dataFiles:t}){const i=Ht.useRef(null),o=Ht.useRef(null),[h,f]=Ht.useState(null),g=Ht.useRef(null),c=T=>{const P=new Date(T.time);return String(P.getHours()).padStart(2,"0")+":"+String(P.getMinutes()).padStart(2,"0")};return Ht.useEffect(()=>{o.current||(o.current=new vP.Map({container:i.current,center:[0,0],zoom:17,style:z4}),o.current.on("load",()=>{o.current.setCenter(e.features[0].geometry.coordinates),o.current.addSource("locations",{data:e,type:"geojson"});const T=q6(e);o.current.fitBounds(T,{padding:50}),o.current.on("mouseenter","pois",()=>{o.current.getCanvas().style.cursor="pointer"}),o.current.on("mouseleave","pois",()=>{o.current.getCanvas().style.cursor="inherit"}),o.current.addLayer({id:"pois",type:"circle",source:"locations",layout:{},paint:{"circle-color":"#D63F40","circle-radius":10}}),o.current.on("click","pois",P=>{f(P.features[0])})}))},[e,g]),Ht.useEffect(()=>{!o.current||!h||(f(h),g.current.addTo(o.current))},[h]),We.jsxs("div",{className:"map-wrap",children:[We.jsx("div",{ref:i,className:"map"}),o.current&&h&&We.jsx(V6,{longitude:h.geometry.coordinates[0],latitude:h.geometry.coordinates[1],popupRef:g,closeOnMove:!1,closeButton:!0,children:We.jsxs("div",{className:"activePopupFeatureContent",children:[We.jsxs("p",{children:[We.jsx("span",{className:"msgUsername",children:h.properties.username}),We.jsx("span",{className:"msgDatetime",children:c(h.properties)})]}),We.jsx("p",{children:Y6(h.properties,t)})]})})]})}function K6({data:e,filename:t}){const i=o=>"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o));return We.jsx("a",{className:"primaryButton",href:i(e),download:`${t}.geojson`,children:We.jsx(ln,{id:"app.download",defaultMessage:"Download"})})}function J6({onOptionClick:e}){return We.jsx(We.Fragment,{children:We.jsx("div",{className:"appNav",children:We.jsx("button",{className:"textButton",onClick:()=>e("options"),children:We.jsx(ln,{id:"app.options",defaultMessage:"Options"})})})})}var ax={exports:{}},qu={},_M={exports:{}},Q6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eF=Q6,tF=eF;function vM(){}function xM(){}xM.resetWarningCache=vM;var rF=function(){function e(o,h,f,g,c,T){if(T!==tF){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xM,resetWarningCache:vM};return i.PropTypes=i,i};_M.exports=rF();var wM=_M.exports,lx={exports:{}},Eo={},ux={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=R;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var i="none",o="contents",h=/input|select|textarea|button|object|iframe/;function f(A,M){return M.getPropertyValue("overflow")!=="visible"||A.scrollWidth<=0&&A.scrollHeight<=0}function g(A){var M=A.offsetWidth<=0&&A.offsetHeight<=0;if(M&&!A.innerHTML)return!0;try{var N=window.getComputedStyle(A),Y=N.getPropertyValue("display");return M?Y!==o&&f(A,N):Y===i}catch{return console.warn("Failed to inspect element style"),!1}}function c(A){for(var M=A,N=A.getRootNode&&A.getRootNode();M&&M!==document.body;){if(N&&M===N&&(M=N.host.parentNode),g(M))return!1;M=M.parentNode}return!0}function T(A,M){var N=A.nodeName.toLowerCase(),Y=h.test(N)&&!A.disabled||N==="a"&&A.href||M;return Y&&c(A)}function P(A){var M=A.getAttribute("tabindex");M===null&&(M=void 0);var N=isNaN(M);return(N||M>=0)&&T(A,!N)}function R(A){var M=[].slice.call(A.querySelectorAll("*"),0).reduce(function(N,Y){return N.concat(Y.shadowRoot?R(Y.shadowRoot):[Y])},[]);return M.filter(P)}e.exports=t.default})(ux,ux.exports);var bM=ux.exports;Object.defineProperty(Eo,"__esModule",{value:!0});Eo.resetState=oF;Eo.log=aF;Eo.handleBlur=op;Eo.handleFocus=ap;Eo.markForFocusLater=lF;Eo.returnFocus=uF;Eo.popWithoutFocus=cF;Eo.setupScopedFocus=hF;Eo.teardownScopedFocus=dF;var nF=bM,iF=sF(nF);function sF(e){return e&&e.__esModule?e:{default:e}}var Oh=[],hh=null,cx=!1;function oF(){Oh=[]}function aF(){}function op(){cx=!0}function ap(){if(cx){if(cx=!1,!hh)return;setTimeout(function(){if(!hh.contains(document.activeElement)){var e=(0,iF.default)(hh)[0]||hh;e.focus()}},0)}}function lF(){Oh.push(document.activeElement)}function uF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{Oh.length!==0&&(t=Oh.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function cF(){Oh.length>0&&Oh.pop()}function hF(e){hh=e,window.addEventListener?(window.addEventListener("blur",op,!1),document.addEventListener("focus",ap,!0)):(window.attachEvent("onBlur",op),document.attachEvent("onFocus",ap))}function dF(){hh=null,window.addEventListener?(window.removeEventListener("blur",op),document.removeEventListener("focus",ap)):(window.detachEvent("onBlur",op),document.detachEvent("onFocus",ap))}var hx={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var i=bM,o=h(i);function h(c){return c&&c.__esModule?c:{default:c}}function f(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return c.activeElement.shadowRoot?f(c.activeElement.shadowRoot):c.activeElement}function g(c,T){var P=(0,o.default)(c);if(!P.length){T.preventDefault();return}var R=void 0,A=T.shiftKey,M=P[0],N=P[P.length-1],Y=f();if(c===Y){if(!A)return;R=N}if(N===Y&&!A&&(R=M),M===Y&&A&&(R=N),R){T.preventDefault(),R.focus();return}var U=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),te=U!=null&&U[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(te){var O=P.indexOf(Y);if(O>-1&&(O+=A?-1:1),R=P[O],typeof R>"u"){T.preventDefault(),R=A?N:M,R.focus();return}T.preventDefault(),R.focus()}}e.exports=t.default})(hx,hx.exports);var fF=hx.exports,Co={},pF=function(){},mF=pF,bo={},SM={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),i={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=i:window.ExecutionEnvironment=i})()})(SM);var gF=SM.exports;Object.defineProperty(bo,"__esModule",{value:!0});bo.canUseDOM=bo.SafeNodeList=bo.SafeHTMLCollection=void 0;var yF=gF,_F=vF(yF);function vF(e){return e&&e.__esModule?e:{default:e}}var y_=_F.default,xF=y_.canUseDOM?window.HTMLElement:{};bo.SafeHTMLCollection=y_.canUseDOM?window.HTMLCollection:{};bo.SafeNodeList=y_.canUseDOM?window.NodeList:{};bo.canUseDOM=y_.canUseDOM;bo.default=xF;Object.defineProperty(Co,"__esModule",{value:!0});Co.resetState=TF;Co.log=EF;Co.assertNodeList=kM;Co.setElement=CF;Co.validateElement=Hw;Co.hide=IF;Co.show=PF;Co.documentNotReadyOrSSRTesting=MF;var wF=mF,bF=kF(wF),SF=bo;function kF(e){return e&&e.__esModule?e:{default:e}}var qs=null;function TF(){qs&&(qs.removeAttribute?qs.removeAttribute("aria-hidden"):qs.length!=null?qs.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(qs).forEach(function(e){return e.removeAttribute("aria-hidden")})),qs=null}function EF(){}function kM(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function CF(e){var t=e;if(typeof t=="string"&&SF.canUseDOM){var i=document.querySelectorAll(t);kM(i,t),t=i}return qs=t||qs,qs}function Hw(e){var t=e||qs;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,bF.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function IF(e){var t=!0,i=!1,o=void 0;try{for(var h=Hw(e)[Symbol.iterator](),f;!(t=(f=h.next()).done);t=!0){var g=f.value;g.setAttribute("aria-hidden","true")}}catch(c){i=!0,o=c}finally{try{!t&&h.return&&h.return()}finally{if(i)throw o}}}function PF(e){var t=!0,i=!1,o=void 0;try{for(var h=Hw(e)[Symbol.iterator](),f;!(t=(f=h.next()).done);t=!0){var g=f.value;g.removeAttribute("aria-hidden")}}catch(c){i=!0,o=c}finally{try{!t&&h.return&&h.return()}finally{if(i)throw o}}}function MF(){qs=null}var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});Vh.resetState=AF;Vh.log=DF;var Lf={},Of={};function FT(e,t){e.classList.remove(t)}function AF(){var e=document.getElementsByTagName("html")[0];for(var t in Lf)FT(e,Lf[t]);var i=document.body;for(var o in Of)FT(i,Of[o]);Lf={},Of={}}function DF(){}var zF=function(t,i){return t[i]||(t[i]=0),t[i]+=1,i},RF=function(t,i){return t[i]&&(t[i]-=1),i},LF=function(t,i,o){o.forEach(function(h){zF(i,h),t.add(h)})},OF=function(t,i,o){o.forEach(function(h){RF(i,h),i[h]===0&&t.remove(h)})};Vh.add=function(t,i){return LF(t.classList,t.nodeName.toLowerCase()=="html"?Lf:Of,i.split(" "))};Vh.remove=function(t,i){return OF(t.classList,t.nodeName.toLowerCase()=="html"?Lf:Of,i.split(" "))};var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});Hh.log=BF;Hh.resetState=NF;function FF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var TM=function e(){var t=this;FF(this,e),this.register=function(i){t.openInstances.indexOf(i)===-1&&(t.openInstances.push(i),t.emit("register"))},this.deregister=function(i){var o=t.openInstances.indexOf(i);o!==-1&&(t.openInstances.splice(o,1),t.emit("deregister"))},this.subscribe=function(i){t.subscribers.push(i)},this.emit=function(i){t.subscribers.forEach(function(o){return o(i,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},Sy=new TM;function BF(){console.log("portalOpenInstances ----------"),console.log(Sy.openInstances.length),Sy.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function NF(){Sy=new TM}Hh.default=Sy;var Ww={};Object.defineProperty(Ww,"__esModule",{value:!0});Ww.resetState=VF;Ww.log=HF;var $F=Hh,jF=UF($F);function UF(e){return e&&e.__esModule?e:{default:e}}var Ei=void 0,mo=void 0,Nu=[];function VF(){for(var e=[Ei,mo],t=0;t<e.length;t++){var i=e[t];i&&i.parentNode&&i.parentNode.removeChild(i)}Ei=mo=null,Nu=[]}function HF(){console.log("bodyTrap ----------"),console.log(Nu.length);for(var e=[Ei,mo],t=0;t<e.length;t++){var i=e[t],o=i||{};console.log(o.nodeName,o.className,o.id)}console.log("edn bodyTrap ----------")}function BT(){Nu.length!==0&&Nu[Nu.length-1].focusContent()}function WF(e,t){!Ei&&!mo&&(Ei=document.createElement("div"),Ei.setAttribute("data-react-modal-body-trap",""),Ei.style.position="absolute",Ei.style.opacity="0",Ei.setAttribute("tabindex","0"),Ei.addEventListener("focus",BT),mo=Ei.cloneNode(),mo.addEventListener("focus",BT)),Nu=t,Nu.length>0?(document.body.firstChild!==Ei&&document.body.insertBefore(Ei,document.body.firstChild),document.body.lastChild!==mo&&document.body.appendChild(mo)):(Ei.parentElement&&Ei.parentElement.removeChild(Ei),mo.parentElement&&mo.parentElement.removeChild(mo))}jF.default.subscribe(WF);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(H){for(var Re=1;Re<arguments.length;Re++){var vt=arguments[Re];for(var ye in vt)Object.prototype.hasOwnProperty.call(vt,ye)&&(H[ye]=vt[ye])}return H},o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},h=function(){function H(Re,vt){for(var ye=0;ye<vt.length;ye++){var Be=vt[ye];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(Re,Be.key,Be)}}return function(Re,vt,ye){return vt&&H(Re.prototype,vt),ye&&H(Re,ye),Re}}(),f=Ht,g=wM,c=oe(g),T=Eo,P=ne(T),R=fF,A=oe(R),M=Co,N=ne(M),Y=Vh,U=ne(Y),te=bo,O=oe(te),$=Hh,q=oe($);function ne(H){if(H&&H.__esModule)return H;var Re={};if(H!=null)for(var vt in H)Object.prototype.hasOwnProperty.call(H,vt)&&(Re[vt]=H[vt]);return Re.default=H,Re}function oe(H){return H&&H.__esModule?H:{default:H}}function ke(H,Re){if(!(H instanceof Re))throw new TypeError("Cannot call a class as a function")}function ge(H,Re){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Re&&(typeof Re=="object"||typeof Re=="function")?Re:H}function Fe(H,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Re);H.prototype=Object.create(Re&&Re.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),Re&&(Object.setPrototypeOf?Object.setPrototypeOf(H,Re):H.__proto__=Re)}var Oe={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},Ge=function(Re){return Re.code==="Tab"||Re.keyCode===9},it=function(Re){return Re.code==="Escape"||Re.keyCode===27},ve=0,je=function(H){Fe(Re,H);function Re(vt){ke(this,Re);var ye=ge(this,(Re.__proto__||Object.getPrototypeOf(Re)).call(this,vt));return ye.setOverlayRef=function(Be){ye.overlay=Be,ye.props.overlayRef&&ye.props.overlayRef(Be)},ye.setContentRef=function(Be){ye.content=Be,ye.props.contentRef&&ye.props.contentRef(Be)},ye.afterClose=function(){var Be=ye.props,Le=Be.appElement,Ke=Be.ariaHideApp,xe=Be.htmlOpenClassName,Ee=Be.bodyOpenClassName,mt=Be.parentSelector,nt=mt&&mt().ownerDocument||document;Ee&&U.remove(nt.body,Ee),xe&&U.remove(nt.getElementsByTagName("html")[0],xe),Ke&&ve>0&&(ve-=1,ve===0&&N.show(Le)),ye.props.shouldFocusAfterRender&&(ye.props.shouldReturnFocusAfterClose?(P.returnFocus(ye.props.preventScroll),P.teardownScopedFocus()):P.popWithoutFocus()),ye.props.onAfterClose&&ye.props.onAfterClose(),q.default.deregister(ye)},ye.open=function(){ye.beforeOpen(),ye.state.afterOpen&&ye.state.beforeClose?(clearTimeout(ye.closeTimer),ye.setState({beforeClose:!1})):(ye.props.shouldFocusAfterRender&&(P.setupScopedFocus(ye.node),P.markForFocusLater()),ye.setState({isOpen:!0},function(){ye.openAnimationFrame=requestAnimationFrame(function(){ye.setState({afterOpen:!0}),ye.props.isOpen&&ye.props.onAfterOpen&&ye.props.onAfterOpen({overlayEl:ye.overlay,contentEl:ye.content})})}))},ye.close=function(){ye.props.closeTimeoutMS>0?ye.closeWithTimeout():ye.closeWithoutTimeout()},ye.focusContent=function(){return ye.content&&!ye.contentHasFocus()&&ye.content.focus({preventScroll:!0})},ye.closeWithTimeout=function(){var Be=Date.now()+ye.props.closeTimeoutMS;ye.setState({beforeClose:!0,closesAt:Be},function(){ye.closeTimer=setTimeout(ye.closeWithoutTimeout,ye.state.closesAt-Date.now())})},ye.closeWithoutTimeout=function(){ye.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},ye.afterClose)},ye.handleKeyDown=function(Be){Ge(Be)&&(0,A.default)(ye.content,Be),ye.props.shouldCloseOnEsc&&it(Be)&&(Be.stopPropagation(),ye.requestClose(Be))},ye.handleOverlayOnClick=function(Be){ye.shouldClose===null&&(ye.shouldClose=!0),ye.shouldClose&&ye.props.shouldCloseOnOverlayClick&&(ye.ownerHandlesClose()?ye.requestClose(Be):ye.focusContent()),ye.shouldClose=null},ye.handleContentOnMouseUp=function(){ye.shouldClose=!1},ye.handleOverlayOnMouseDown=function(Be){!ye.props.shouldCloseOnOverlayClick&&Be.target==ye.overlay&&Be.preventDefault()},ye.handleContentOnClick=function(){ye.shouldClose=!1},ye.handleContentOnMouseDown=function(){ye.shouldClose=!1},ye.requestClose=function(Be){return ye.ownerHandlesClose()&&ye.props.onRequestClose(Be)},ye.ownerHandlesClose=function(){return ye.props.onRequestClose},ye.shouldBeClosed=function(){return!ye.state.isOpen&&!ye.state.beforeClose},ye.contentHasFocus=function(){return document.activeElement===ye.content||ye.content.contains(document.activeElement)},ye.buildClassName=function(Be,Le){var Ke=(typeof Le>"u"?"undefined":o(Le))==="object"?Le:{base:Oe[Be],afterOpen:Oe[Be]+"--after-open",beforeClose:Oe[Be]+"--before-close"},xe=Ke.base;return ye.state.afterOpen&&(xe=xe+" "+Ke.afterOpen),ye.state.beforeClose&&(xe=xe+" "+Ke.beforeClose),typeof Le=="string"&&Le?xe+" "+Le:xe},ye.attributesFromObject=function(Be,Le){return Object.keys(Le).reduce(function(Ke,xe){return Ke[Be+"-"+xe]=Le[xe],Ke},{})},ye.state={afterOpen:!1,beforeClose:!1},ye.shouldClose=null,ye.moveFromContentToOverlay=null,ye}return h(Re,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(ye,Be){this.props.isOpen&&!ye.isOpen?this.open():!this.props.isOpen&&ye.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!Be.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var ye=this.props,Be=ye.appElement,Le=ye.ariaHideApp,Ke=ye.htmlOpenClassName,xe=ye.bodyOpenClassName,Ee=ye.parentSelector,mt=Ee&&Ee().ownerDocument||document;xe&&U.add(mt.body,xe),Ke&&U.add(mt.getElementsByTagName("html")[0],Ke),Le&&(ve+=1,N.hide(Be)),q.default.register(this)}},{key:"render",value:function(){var ye=this.props,Be=ye.id,Le=ye.className,Ke=ye.overlayClassName,xe=ye.defaultStyles,Ee=ye.children,mt=Le?{}:xe.content,nt=Ke?{}:xe.overlay;if(this.shouldBeClosed())return null;var rt={ref:this.setOverlayRef,className:this.buildClassName("overlay",Ke),style:i({},nt,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},Jt=i({id:Be,ref:this.setContentRef,style:i({},mt,this.props.style.content),className:this.buildClassName("content",Le),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",i({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),er=this.props.contentElement(Jt,Ee);return this.props.overlayElement(rt,er)}}]),Re}(f.Component);je.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},je.propTypes={isOpen:c.default.bool.isRequired,defaultStyles:c.default.shape({content:c.default.object,overlay:c.default.object}),style:c.default.shape({content:c.default.object,overlay:c.default.object}),className:c.default.oneOfType([c.default.string,c.default.object]),overlayClassName:c.default.oneOfType([c.default.string,c.default.object]),parentSelector:c.default.func,bodyOpenClassName:c.default.string,htmlOpenClassName:c.default.string,ariaHideApp:c.default.bool,appElement:c.default.oneOfType([c.default.instanceOf(O.default),c.default.instanceOf(te.SafeHTMLCollection),c.default.instanceOf(te.SafeNodeList),c.default.arrayOf(c.default.instanceOf(O.default))]),onAfterOpen:c.default.func,onAfterClose:c.default.func,onRequestClose:c.default.func,closeTimeoutMS:c.default.number,shouldFocusAfterRender:c.default.bool,shouldCloseOnOverlayClick:c.default.bool,shouldReturnFocusAfterClose:c.default.bool,preventScroll:c.default.bool,role:c.default.string,contentLabel:c.default.string,aria:c.default.object,data:c.default.object,children:c.default.node,shouldCloseOnEsc:c.default.bool,overlayRef:c.default.func,contentRef:c.default.func,id:c.default.string,overlayElement:c.default.func,contentElement:c.default.func,testId:c.default.string},t.default=je,e.exports=t.default})(lx,lx.exports);var GF=lx.exports;function EM(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function CM(e){function t(i){var o=this.constructor.getDerivedStateFromProps(e,i);return o??null}this.setState(t.bind(this))}function IM(e,t){try{var i=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,o)}finally{this.props=i,this.state=o}}EM.__suppressDeprecationWarning=!0;CM.__suppressDeprecationWarning=!0;IM.__suppressDeprecationWarning=!0;function ZF(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var i=null,o=null,h=null;if(typeof t.componentWillMount=="function"?i="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(i="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?o="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(o="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?h="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(h="UNSAFE_componentWillUpdate"),i!==null||o!==null||h!==null){var f=e.displayName||e.name,g=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+f+" uses "+g+" but also contains the following legacy lifecycles:"+(i!==null?`
  `+i:"")+(o!==null?`
  `+o:"")+(h!==null?`
  `+h:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=EM,t.componentWillReceiveProps=CM),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=IM;var c=t.componentDidUpdate;t.componentDidUpdate=function(P,R,A){var M=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:A;c.call(this,P,R,M)}}return e}const qF=Object.freeze(Object.defineProperty({__proto__:null,polyfill:ZF},Symbol.toStringTag,{value:"Module"})),YF=gD(qF);Object.defineProperty(qu,"__esModule",{value:!0});qu.bodyOpenClassName=qu.portalClassName=void 0;var NT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},XF=function(){function e(t,i){for(var o=0;o<i.length;o++){var h=i[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),PM=Ht,ky=kp(PM),KF=cI,Ty=kp(KF),JF=wM,nr=kp(JF),QF=GF,$T=kp(QF),eB=Co,tB=nB(eB),Pl=bo,jT=kp(Pl),rB=YF;function nB(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function kp(e){return e&&e.__esModule?e:{default:e}}function iB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function sB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oB=qu.portalClassName="ReactModalPortal",aB=qu.bodyOpenClassName="ReactModal__Body--open",Su=Pl.canUseDOM&&Ty.default.createPortal!==void 0,VT=function(t){return document.createElement(t)},HT=function(){return Su?Ty.default.createPortal:Ty.default.unstable_renderSubtreeIntoContainer};function ig(e){return e()}var Tp=function(e){sB(t,e);function t(){var i,o,h,f;iB(this,t);for(var g=arguments.length,c=Array(g),T=0;T<g;T++)c[T]=arguments[T];return f=(o=(h=UT(this,(i=t.__proto__||Object.getPrototypeOf(t)).call.apply(i,[this].concat(c))),h),h.removePortal=function(){!Su&&Ty.default.unmountComponentAtNode(h.node);var P=ig(h.props.parentSelector);P&&P.contains(h.node)?P.removeChild(h.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},h.portalRef=function(P){h.portal=P},h.renderPortal=function(P){var R=HT(),A=R(h,ky.default.createElement($T.default,NT({defaultStyles:t.defaultStyles},P)),h.node);h.portalRef(A)},o),UT(h,f)}return XF(t,[{key:"componentDidMount",value:function(){if(Pl.canUseDOM){Su||(this.node=VT("div")),this.node.className=this.props.portalClassName;var o=ig(this.props.parentSelector);o.appendChild(this.node),!Su&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(o){var h=ig(o.parentSelector),f=ig(this.props.parentSelector);return{prevParent:h,nextParent:f}}},{key:"componentDidUpdate",value:function(o,h,f){if(Pl.canUseDOM){var g=this.props,c=g.isOpen,T=g.portalClassName;o.portalClassName!==T&&(this.node.className=T);var P=f.prevParent,R=f.nextParent;R!==P&&(P.removeChild(this.node),R.appendChild(this.node)),!(!o.isOpen&&!c)&&!Su&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Pl.canUseDOM||!this.node||!this.portal)){var o=this.portal.state,h=Date.now(),f=o.isOpen&&this.props.closeTimeoutMS&&(o.closesAt||h+this.props.closeTimeoutMS);f?(o.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,f-h)):this.removePortal()}}},{key:"render",value:function(){if(!Pl.canUseDOM||!Su)return null;!this.node&&Su&&(this.node=VT("div"));var o=HT();return o(ky.default.createElement($T.default,NT({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(o){tB.setElement(o)}}]),t}(PM.Component);Tp.propTypes={isOpen:nr.default.bool.isRequired,style:nr.default.shape({content:nr.default.object,overlay:nr.default.object}),portalClassName:nr.default.string,bodyOpenClassName:nr.default.string,htmlOpenClassName:nr.default.string,className:nr.default.oneOfType([nr.default.string,nr.default.shape({base:nr.default.string.isRequired,afterOpen:nr.default.string.isRequired,beforeClose:nr.default.string.isRequired})]),overlayClassName:nr.default.oneOfType([nr.default.string,nr.default.shape({base:nr.default.string.isRequired,afterOpen:nr.default.string.isRequired,beforeClose:nr.default.string.isRequired})]),appElement:nr.default.oneOfType([nr.default.instanceOf(jT.default),nr.default.instanceOf(Pl.SafeHTMLCollection),nr.default.instanceOf(Pl.SafeNodeList),nr.default.arrayOf(nr.default.instanceOf(jT.default))]),onAfterOpen:nr.default.func,onRequestClose:nr.default.func,closeTimeoutMS:nr.default.number,ariaHideApp:nr.default.bool,shouldFocusAfterRender:nr.default.bool,shouldCloseOnOverlayClick:nr.default.bool,shouldReturnFocusAfterClose:nr.default.bool,preventScroll:nr.default.bool,parentSelector:nr.default.func,aria:nr.default.object,data:nr.default.object,role:nr.default.string,contentLabel:nr.default.string,shouldCloseOnEsc:nr.default.bool,overlayRef:nr.default.func,contentRef:nr.default.func,id:nr.default.string,overlayElement:nr.default.func,contentElement:nr.default.func};Tp.defaultProps={isOpen:!1,portalClassName:oB,bodyOpenClassName:aB,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,i){return ky.default.createElement("div",t,i)},contentElement:function(t,i){return ky.default.createElement("div",t,i)}};Tp.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,rB.polyfill)(Tp);qu.default=Tp;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=qu,o=h(i);function h(f){return f&&f.__esModule?f:{default:f}}t.default=o.default,e.exports=t.default})(ax,ax.exports);var lB=ax.exports;const MM=dp(lB);MM.setAppElement("#root");function uB({isOpen:e,afterOpen:t,onClose:i,content:o}){const h={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",minWidth:"60vw",minHeight:"60vh",textAlign:"center"}};return We.jsx(MM,{isOpen:e,onAfterOpen:t,onRequestClose:i,style:h,contentLabel:"Example Modal",children:o})}function Rv({img:e,title:t,children:i,selected:o,onClick:h,name:f}){return We.jsxs("div",{onClick:()=>h(f),className:["cardOption",o?"cardOptionSelected":""].join(" "),children:[We.jsx("img",{className:"cardOptionImage",src:e,alt:t}),We.jsx("h3",{children:t}),i]})}function cB({settings:e,onChange:t}){const i=o=>{t({...e,msgPosition:o})};return We.jsx("div",{className:"",children:We.jsxs("div",{className:"cardOptions",children:[We.jsxs(Rv,{selected:e.msgPosition==="closest",img:"img/config-closest.png",name:"closest",title:We.jsx(ln,{id:"app.config.closestMsg",defaultMessage:"closest"}),onClick:i,children:[We.jsx(ln,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",We.jsxs("strong",{children:[" ",We.jsx(ln,{id:"app.config.closestMsg",defaultMessage:"closest"})," "]})," ",We.jsx(ln,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]}),We.jsxs(Rv,{selected:e.msgPosition==="after",img:"img/config-after.png",name:"after",title:We.jsx(ln,{id:"app.config.closestNextMsg",defaultMessage:"next"}),onClick:i,children:[We.jsx(ln,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",We.jsx("strong",{children:We.jsx(ln,{id:"app.config.closestNextMsg",defaultMessage:"next"})})," ",We.jsx(ln,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]}),We.jsxs(Rv,{selected:e.msgPosition==="before",img:"img/config-before.png",name:"before",title:We.jsx(ln,{id:"app.config.closestPreviousMsg",defaultMessage:"previous"}),onClick:i,children:[We.jsx(ln,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",We.jsx("strong",{children:We.jsx(ln,{id:"app.config.previousNextMsg",defaultMessage:"next"})})," ",We.jsx(ln,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]})]})})}function hB(e){const[t,i]=Ht.useState(e);return[t,f=>{i(f)},()=>{i(e)}]}function dB(e){return e.substring(e.lastIndexOf("/")+1,e.length)}function fB(){const[e,t]=Ht.useState(),[i,o]=Ht.useState();return[c=>{o(c)},(c,T)=>{t(P=>({...P,[dB(c)]:T}))},()=>{o(null),t()},e,i]}const Gw=(e,t)=>{let i=t-1,o=t+1,h,f,g=e[t];for(;(e[i]||e[o])&&!(f&&h);){if(e[i]&&e[i].username===g.username&&!h){const c=Math.abs(e[t].time-e[i].time);h={index:i,delta:c}}if(e[o]&&e[o].username===g.username&&!f){const c=Math.abs(e[t].time-e[o].time);f={index:o,delta:c}}i--,o++}if(h&&f){if(h.delta===f.delta)return{...e[h.index],message:e[h.index].message+". "+e[f.index].message};if(h.delta<f.delta)return e[h.index];if(h.delta>f.delta)return e[f.index]}else{if(h)return e[h.index];if(f)return e[f.index]}return g},Zw=(e,t)=>AM(e,t,1),qw=(e,t)=>AM(e,t,-1),AM=(e,t,i)=>{let o=t+i,h,f=e[t];for(;e[o]&&!h;){if(e[o]&&e[o].username===f.username&&!h){const g=Math.abs(e[t].time-e[o].time);h={index:o,delta:g}}o+=i}return h?e[h.index]:f},pB=/[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/,dx={IOS:/\[(.*)\] (.*): (.*)/,ANDROID:/(.*) - (.*): (.*)/},mB=e=>{const t=e.match(dx.IOS),i=e.match(dx.ANDROID);return t?"IOS":i?"ANDROID":"UNKNOWN"},gB=e=>{const t=e.message.toLowerCase();let i=t.indexOf(".jpg");if(i<0&&(i=t.indexOf(".mp4")),i>0)return e.message.substring(0,i+4)},yB=e=>{const t=e.match(pB);return t?t[0].split(",").map(i=>parseFloat(i)):null},_B=(e,t)=>{const i=e.match(dx[t]);if(i){let o=i[2];const h=o.indexOf(":");h>-1&&(o=o.substring(0,h));let f={time:vB(i[1]),username:o,message:i[3]};return f.file=gB(f),f.file&&(f.message=""),f}},vB=e=>{let t=e.replace("a. m.","AM").replace("p. m.","PM");t=t.replace("a.m.","AM").replace("p.m.","PM");let i=t.split(" ");const o=new Date;let h=[[o.getFullYear(),o.getMonth()+1,o.getDate()].join("/"),i[1]].join(" ");return new Date(h)},xB=(e,t)=>{let i=0;const o={};return e.forEach(h=>{h=h.replaceAll(/[\u200E\u200F\u202A-\u202E\u200B]/g,"");const f=_B(h,t);f&&(o[i]=f,i++)}),o};function wB({text:e,msgPosition:t}){if(!e)return;const i=e.split(`
`),o={type:"FeatureCollection",features:[]};let h={},f;for(let T=0;T<i.length&&(f=mB(i[T]),f==="UNKNOWN");T++);const g=xB(i,f);return Object.values(g).forEach((T,P)=>{if(T.message){const R=yB(T.message);if(R){h={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[parseFloat(R[1]),parseFloat(R[0])]}};let A;switch(t){case"before":A=qw(g,P);break;case"after":A=Zw(g,P);break;default:A=Gw(g,P);break}h.properties={...A},o.features.push(h)}}}),o}function WT(e){return e.substring(e.lastIndexOf("/")+1,e.length)}const bB=e=>{let t="",i={time:SB(e.date),username:e.from};return Array.isArray(e.text)?e.text.forEach(o=>{o.type==="link"&&(t=o.text)}):e.text!==""&&(t=e.text),i.message=t,e.location_information&&(i.location=[e.location_information.latitude,e.location_information.longitude]),e.photo&&(i.file=WT(e.photo)),e.file&&e.mime_type==="video/mp4"&&(i.file=WT(e.file)),i},SB=e=>new Date(e),kB=e=>{let t=0;const i={};return e.forEach(o=>{const h=bB(o);h&&(i[t]=h,t++)}),i};function TB({text:e,msgPosition:t}){if(!e)return;const i=JSON.parse(e),o={type:"FeatureCollection",features:[]},h=kB(i.messages);return Object.values(h).forEach((g,c)=>{if(g.location){let T={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[g.location[1],g.location[0]]}},P;switch(t){case"before":P=qw(h,c);break;case"after":P=Zw(h,c);break;default:P=Gw(h,c);break}T.properties={...P},o.features.push(T)}}),o}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var DM;function Ct(){return DM.apply(null,arguments)}function EB(e){DM=e}function ko(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function $u(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Dr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yw(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Dr(e,t))return!1;return!0}function is(e){return e===void 0}function za(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Ep(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function zM(e,t){var i=[],o,h=e.length;for(o=0;o<h;++o)i.push(t(e[o],o));return i}function Ml(e,t){for(var i in t)Dr(t,i)&&(e[i]=t[i]);return Dr(t,"toString")&&(e.toString=t.toString),Dr(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Yo(e,t,i,o){return rA(e,t,i,o,!0).utc()}function CB(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function lr(e){return e._pf==null&&(e._pf=CB()),e._pf}var fx;Array.prototype.some?fx=Array.prototype.some:fx=function(e){var t=Object(this),i=t.length>>>0,o;for(o=0;o<i;o++)if(o in t&&e.call(this,t[o],o,t))return!0;return!1};function Xw(e){var t=null,i=!1,o=e._d&&!isNaN(e._d.getTime());if(o&&(t=lr(e),i=fx.call(t.parsedDateParts,function(h){return h!=null}),o=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(o=o&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=o;else return o;return e._isValid}function __(e){var t=Yo(NaN);return e!=null?Ml(lr(t),e):lr(t).userInvalidated=!0,t}var GT=Ct.momentProperties=[],Lv=!1;function Kw(e,t){var i,o,h,f=GT.length;if(is(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),is(t._i)||(e._i=t._i),is(t._f)||(e._f=t._f),is(t._l)||(e._l=t._l),is(t._strict)||(e._strict=t._strict),is(t._tzm)||(e._tzm=t._tzm),is(t._isUTC)||(e._isUTC=t._isUTC),is(t._offset)||(e._offset=t._offset),is(t._pf)||(e._pf=lr(t)),is(t._locale)||(e._locale=t._locale),f>0)for(i=0;i<f;i++)o=GT[i],h=t[o],is(h)||(e[o]=h);return e}function Cp(e){Kw(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Lv===!1&&(Lv=!0,Ct.updateOffset(this),Lv=!1)}function To(e){return e instanceof Cp||e!=null&&e._isAMomentObject!=null}function RM(e){Ct.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function so(e,t){var i=!0;return Ml(function(){if(Ct.deprecationHandler!=null&&Ct.deprecationHandler(null,e),i){var o=[],h,f,g,c=arguments.length;for(f=0;f<c;f++){if(h="",typeof arguments[f]=="object"){h+=`
[`+f+"] ";for(g in arguments[0])Dr(arguments[0],g)&&(h+=g+": "+arguments[0][g]+", ");h=h.slice(0,-2)}else h=arguments[f];o.push(h)}RM(e+`
Arguments: `+Array.prototype.slice.call(o).join("")+`
`+new Error().stack),i=!1}return t.apply(this,arguments)},t)}var ZT={};function LM(e,t){Ct.deprecationHandler!=null&&Ct.deprecationHandler(e,t),ZT[e]||(RM(t),ZT[e]=!0)}Ct.suppressDeprecationWarnings=!1;Ct.deprecationHandler=null;function Xo(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function IB(e){var t,i;for(i in e)Dr(e,i)&&(t=e[i],Xo(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function px(e,t){var i=Ml({},e),o;for(o in t)Dr(t,o)&&($u(e[o])&&$u(t[o])?(i[o]={},Ml(i[o],e[o]),Ml(i[o],t[o])):t[o]!=null?i[o]=t[o]:delete i[o]);for(o in e)Dr(e,o)&&!Dr(t,o)&&$u(e[o])&&(i[o]=Ml({},i[o]));return i}function Jw(e){e!=null&&this.set(e)}var mx;Object.keys?mx=Object.keys:mx=function(e){var t,i=[];for(t in e)Dr(e,t)&&i.push(t);return i};var PB={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function MB(e,t,i){var o=this._calendar[e]||this._calendar.sameElse;return Xo(o)?o.call(t,i):o}function qo(e,t,i){var o=""+Math.abs(e),h=t-o.length,f=e>=0;return(f?i?"+":"":"-")+Math.pow(10,Math.max(0,h)).toString().substr(1)+o}var Qw=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,sg=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ov={},vh={};function Wt(e,t,i,o){var h=o;typeof o=="string"&&(h=function(){return this[o]()}),e&&(vh[e]=h),t&&(vh[t[0]]=function(){return qo(h.apply(this,arguments),t[1],t[2])}),i&&(vh[i]=function(){return this.localeData().ordinal(h.apply(this,arguments),e)})}function AB(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function DB(e){var t=e.match(Qw),i,o;for(i=0,o=t.length;i<o;i++)vh[t[i]]?t[i]=vh[t[i]]:t[i]=AB(t[i]);return function(h){var f="",g;for(g=0;g<o;g++)f+=Xo(t[g])?t[g].call(h,e):t[g];return f}}function Lg(e,t){return e.isValid()?(t=OM(t,e.localeData()),Ov[t]=Ov[t]||DB(t),Ov[t](e)):e.localeData().invalidDate()}function OM(e,t){var i=5;function o(h){return t.longDateFormat(h)||h}for(sg.lastIndex=0;i>=0&&sg.test(e);)e=e.replace(sg,o),sg.lastIndex=0,i-=1;return e}var zB={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function RB(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(Qw).map(function(o){return o==="MMMM"||o==="MM"||o==="DD"||o==="dddd"?o.slice(1):o}).join(""),this._longDateFormat[e])}var LB="Invalid date";function OB(){return this._invalidDate}var FB="%d",BB=/\d{1,2}/;function NB(e){return this._ordinal.replace("%d",e)}var $B={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function jB(e,t,i,o){var h=this._relativeTime[i];return Xo(h)?h(e,t,i,o):h.replace(/%d/i,e)}function UB(e,t){var i=this._relativeTime[e>0?"future":"past"];return Xo(i)?i(t):i.replace(/%s/i,t)}var qT={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function oo(e){return typeof e=="string"?qT[e]||qT[e.toLowerCase()]:void 0}function eb(e){var t={},i,o;for(o in e)Dr(e,o)&&(i=oo(o),i&&(t[i]=e[o]));return t}var VB={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function HB(e){var t=[],i;for(i in e)Dr(e,i)&&t.push({unit:i,priority:VB[i]});return t.sort(function(o,h){return o.priority-h.priority}),t}var FM=/\d/,js=/\d\d/,BM=/\d{3}/,tb=/\d{4}/,v_=/[+-]?\d{6}/,dn=/\d\d?/,NM=/\d\d\d\d?/,$M=/\d\d\d\d\d\d?/,x_=/\d{1,3}/,rb=/\d{1,4}/,w_=/[+-]?\d{1,6}/,Wh=/\d+/,b_=/[+-]?\d+/,WB=/Z|[+-]\d\d:?\d\d/gi,S_=/Z|[+-]\d\d(?::?\d\d)?/gi,GB=/[+-]?\d+(\.\d{1,3})?/,Ip=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Gh=/^[1-9]\d?/,nb=/^([1-9]\d|\d)/,Ey;Ey={};function zt(e,t,i){Ey[e]=Xo(t)?t:function(o,h){return o&&i?i:t}}function ZB(e,t){return Dr(Ey,e)?Ey[e](t._strict,t._locale):new RegExp(qB(e))}function qB(e){return Ta(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,o,h,f){return i||o||h||f}))}function Ta(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ks(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function wr(e){var t=+e,i=0;return t!==0&&isFinite(t)&&(i=Ks(t)),i}var gx={};function qr(e,t){var i,o=t,h;for(typeof e=="string"&&(e=[e]),za(t)&&(o=function(f,g){g[t]=wr(f)}),h=e.length,i=0;i<h;i++)gx[e[i]]=o}function Pp(e,t){qr(e,function(i,o,h,f){h._w=h._w||{},t(i,h._w,h,f)})}function YB(e,t,i){t!=null&&Dr(gx,e)&&gx[e](t,i._a,i,e)}function k_(e){return e%4===0&&e%100!==0||e%400===0}var Ii=0,ba=1,Ho=2,Vn=3,_o=4,Sa=5,zu=6,XB=7,KB=8;Wt("Y",0,0,function(){var e=this.year();return e<=9999?qo(e,4):"+"+e});Wt(0,["YY",2],0,function(){return this.year()%100});Wt(0,["YYYY",4],0,"year");Wt(0,["YYYYY",5],0,"year");Wt(0,["YYYYYY",6,!0],0,"year");zt("Y",b_);zt("YY",dn,js);zt("YYYY",rb,tb);zt("YYYYY",w_,v_);zt("YYYYYY",w_,v_);qr(["YYYYY","YYYYYY"],Ii);qr("YYYY",function(e,t){t[Ii]=e.length===2?Ct.parseTwoDigitYear(e):wr(e)});qr("YY",function(e,t){t[Ii]=Ct.parseTwoDigitYear(e)});qr("Y",function(e,t){t[Ii]=parseInt(e,10)});function Ff(e){return k_(e)?366:365}Ct.parseTwoDigitYear=function(e){return wr(e)+(wr(e)>68?1900:2e3)};var jM=Zh("FullYear",!0);function JB(){return k_(this.year())}function Zh(e,t){return function(i){return i!=null?(UM(this,e,i),Ct.updateOffset(this,t),this):lp(this,e)}}function lp(e,t){if(!e.isValid())return NaN;var i=e._d,o=e._isUTC;switch(t){case"Milliseconds":return o?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return o?i.getUTCSeconds():i.getSeconds();case"Minutes":return o?i.getUTCMinutes():i.getMinutes();case"Hours":return o?i.getUTCHours():i.getHours();case"Date":return o?i.getUTCDate():i.getDate();case"Day":return o?i.getUTCDay():i.getDay();case"Month":return o?i.getUTCMonth():i.getMonth();case"FullYear":return o?i.getUTCFullYear():i.getFullYear();default:return NaN}}function UM(e,t,i){var o,h,f,g,c;if(!(!e.isValid()||isNaN(i))){switch(o=e._d,h=e._isUTC,t){case"Milliseconds":return void(h?o.setUTCMilliseconds(i):o.setMilliseconds(i));case"Seconds":return void(h?o.setUTCSeconds(i):o.setSeconds(i));case"Minutes":return void(h?o.setUTCMinutes(i):o.setMinutes(i));case"Hours":return void(h?o.setUTCHours(i):o.setHours(i));case"Date":return void(h?o.setUTCDate(i):o.setDate(i));case"FullYear":break;default:return}f=i,g=e.month(),c=e.date(),c=c===29&&g===1&&!k_(f)?28:c,h?o.setUTCFullYear(f,g,c):o.setFullYear(f,g,c)}}function QB(e){return e=oo(e),Xo(this[e])?this[e]():this}function eN(e,t){if(typeof e=="object"){e=eb(e);var i=HB(e),o,h=i.length;for(o=0;o<h;o++)this[i[o].unit](e[i[o].unit])}else if(e=oo(e),Xo(this[e]))return this[e](t);return this}function tN(e,t){return(e%t+t)%t}var Mn;Array.prototype.indexOf?Mn=Array.prototype.indexOf:Mn=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function ib(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=tN(t,12);return e+=(t-i)/12,i===1?k_(e)?29:28:31-i%7%2}Wt("M",["MM",2],"Mo",function(){return this.month()+1});Wt("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Wt("MMMM",0,0,function(e){return this.localeData().months(this,e)});zt("M",dn,Gh);zt("MM",dn,js);zt("MMM",function(e,t){return t.monthsShortRegex(e)});zt("MMMM",function(e,t){return t.monthsRegex(e)});qr(["M","MM"],function(e,t){t[ba]=wr(e)-1});qr(["MMM","MMMM"],function(e,t,i,o){var h=i._locale.monthsParse(e,o,i._strict);h!=null?t[ba]=h:lr(i).invalidMonth=e});var rN="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),VM="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),HM=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,nN=Ip,iN=Ip;function sN(e,t){return e?ko(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||HM).test(t)?"format":"standalone"][e.month()]:ko(this._months)?this._months:this._months.standalone}function oN(e,t){return e?ko(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[HM.test(t)?"format":"standalone"][e.month()]:ko(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function aN(e,t,i){var o,h,f,g=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)f=Yo([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(f,"").toLocaleLowerCase();return i?t==="MMM"?(h=Mn.call(this._shortMonthsParse,g),h!==-1?h:null):(h=Mn.call(this._longMonthsParse,g),h!==-1?h:null):t==="MMM"?(h=Mn.call(this._shortMonthsParse,g),h!==-1?h:(h=Mn.call(this._longMonthsParse,g),h!==-1?h:null)):(h=Mn.call(this._longMonthsParse,g),h!==-1?h:(h=Mn.call(this._shortMonthsParse,g),h!==-1?h:null))}function lN(e,t,i){var o,h,f;if(this._monthsParseExact)return aN.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;o<12;o++){if(h=Yo([2e3,o]),i&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(h,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(h,"").replace(".","")+"$","i")),!i&&!this._monthsParse[o]&&(f="^"+this.months(h,"")+"|^"+this.monthsShort(h,""),this._monthsParse[o]=new RegExp(f.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[o].test(e))return o;if(i&&t==="MMM"&&this._shortMonthsParse[o].test(e))return o;if(!i&&this._monthsParse[o].test(e))return o}}function WM(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=wr(t);else if(t=e.localeData().monthsParse(t),!za(t))return e}var i=t,o=e.date();return o=o<29?o:Math.min(o,ib(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,o):e._d.setMonth(i,o),e}function GM(e){return e!=null?(WM(this,e),Ct.updateOffset(this,!0),this):lp(this,"Month")}function uN(){return ib(this.year(),this.month())}function cN(e){return this._monthsParseExact?(Dr(this,"_monthsRegex")||ZM.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Dr(this,"_monthsShortRegex")||(this._monthsShortRegex=nN),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function hN(e){return this._monthsParseExact?(Dr(this,"_monthsRegex")||ZM.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Dr(this,"_monthsRegex")||(this._monthsRegex=iN),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ZM(){function e(T,P){return P.length-T.length}var t=[],i=[],o=[],h,f,g,c;for(h=0;h<12;h++)f=Yo([2e3,h]),g=Ta(this.monthsShort(f,"")),c=Ta(this.months(f,"")),t.push(g),i.push(c),o.push(c),o.push(g);t.sort(e),i.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function dN(e,t,i,o,h,f,g){var c;return e<100&&e>=0?(c=new Date(e+400,t,i,o,h,f,g),isFinite(c.getFullYear())&&c.setFullYear(e)):c=new Date(e,t,i,o,h,f,g),c}function up(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Cy(e,t,i){var o=7+t-i,h=(7+up(e,0,o).getUTCDay()-t)%7;return-h+o-1}function qM(e,t,i,o,h){var f=(7+i-o)%7,g=Cy(e,o,h),c=1+7*(t-1)+f+g,T,P;return c<=0?(T=e-1,P=Ff(T)+c):c>Ff(e)?(T=e+1,P=c-Ff(e)):(T=e,P=c),{year:T,dayOfYear:P}}function cp(e,t,i){var o=Cy(e.year(),t,i),h=Math.floor((e.dayOfYear()-o-1)/7)+1,f,g;return h<1?(g=e.year()-1,f=h+Ea(g,t,i)):h>Ea(e.year(),t,i)?(f=h-Ea(e.year(),t,i),g=e.year()+1):(g=e.year(),f=h),{week:f,year:g}}function Ea(e,t,i){var o=Cy(e,t,i),h=Cy(e+1,t,i);return(Ff(e)-o+h)/7}Wt("w",["ww",2],"wo","week");Wt("W",["WW",2],"Wo","isoWeek");zt("w",dn,Gh);zt("ww",dn,js);zt("W",dn,Gh);zt("WW",dn,js);Pp(["w","ww","W","WW"],function(e,t,i,o){t[o.substr(0,1)]=wr(e)});function fN(e){return cp(e,this._week.dow,this._week.doy).week}var pN={dow:0,doy:6};function mN(){return this._week.dow}function gN(){return this._week.doy}function yN(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function _N(e){var t=cp(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Wt("d",0,"do","day");Wt("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Wt("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Wt("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Wt("e",0,0,"weekday");Wt("E",0,0,"isoWeekday");zt("d",dn);zt("e",dn);zt("E",dn);zt("dd",function(e,t){return t.weekdaysMinRegex(e)});zt("ddd",function(e,t){return t.weekdaysShortRegex(e)});zt("dddd",function(e,t){return t.weekdaysRegex(e)});Pp(["dd","ddd","dddd"],function(e,t,i,o){var h=i._locale.weekdaysParse(e,o,i._strict);h!=null?t.d=h:lr(i).invalidWeekday=e});Pp(["d","e","E"],function(e,t,i,o){t[o]=wr(e)});function vN(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function xN(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function sb(e,t){return e.slice(t,7).concat(e.slice(0,t))}var wN="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),YM="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),bN="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),SN=Ip,kN=Ip,TN=Ip;function EN(e,t){var i=ko(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?sb(i,this._week.dow):e?i[e.day()]:i}function CN(e){return e===!0?sb(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function IN(e){return e===!0?sb(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function PN(e,t,i){var o,h,f,g=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)f=Yo([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(f,"").toLocaleLowerCase();return i?t==="dddd"?(h=Mn.call(this._weekdaysParse,g),h!==-1?h:null):t==="ddd"?(h=Mn.call(this._shortWeekdaysParse,g),h!==-1?h:null):(h=Mn.call(this._minWeekdaysParse,g),h!==-1?h:null):t==="dddd"?(h=Mn.call(this._weekdaysParse,g),h!==-1||(h=Mn.call(this._shortWeekdaysParse,g),h!==-1)?h:(h=Mn.call(this._minWeekdaysParse,g),h!==-1?h:null)):t==="ddd"?(h=Mn.call(this._shortWeekdaysParse,g),h!==-1||(h=Mn.call(this._weekdaysParse,g),h!==-1)?h:(h=Mn.call(this._minWeekdaysParse,g),h!==-1?h:null)):(h=Mn.call(this._minWeekdaysParse,g),h!==-1||(h=Mn.call(this._weekdaysParse,g),h!==-1)?h:(h=Mn.call(this._shortWeekdaysParse,g),h!==-1?h:null))}function MN(e,t,i){var o,h,f;if(this._weekdaysParseExact)return PN.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;o<7;o++){if(h=Yo([2e3,1]).day(o),i&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(h,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(h,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(h,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[o]||(f="^"+this.weekdays(h,"")+"|^"+this.weekdaysShort(h,"")+"|^"+this.weekdaysMin(h,""),this._weekdaysParse[o]=new RegExp(f.replace(".",""),"i")),i&&t==="dddd"&&this._fullWeekdaysParse[o].test(e))return o;if(i&&t==="ddd"&&this._shortWeekdaysParse[o].test(e))return o;if(i&&t==="dd"&&this._minWeekdaysParse[o].test(e))return o;if(!i&&this._weekdaysParse[o].test(e))return o}}function AN(e){if(!this.isValid())return e!=null?this:NaN;var t=lp(this,"Day");return e!=null?(e=vN(e,this.localeData()),this.add(e-t,"d")):t}function DN(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function zN(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=xN(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function RN(e){return this._weekdaysParseExact?(Dr(this,"_weekdaysRegex")||ob.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Dr(this,"_weekdaysRegex")||(this._weekdaysRegex=SN),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function LN(e){return this._weekdaysParseExact?(Dr(this,"_weekdaysRegex")||ob.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Dr(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=kN),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ON(e){return this._weekdaysParseExact?(Dr(this,"_weekdaysRegex")||ob.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Dr(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=TN),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ob(){function e(R,A){return A.length-R.length}var t=[],i=[],o=[],h=[],f,g,c,T,P;for(f=0;f<7;f++)g=Yo([2e3,1]).day(f),c=Ta(this.weekdaysMin(g,"")),T=Ta(this.weekdaysShort(g,"")),P=Ta(this.weekdays(g,"")),t.push(c),i.push(T),o.push(P),h.push(c),h.push(T),h.push(P);t.sort(e),i.sort(e),o.sort(e),h.sort(e),this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function ab(){return this.hours()%12||12}function FN(){return this.hours()||24}Wt("H",["HH",2],0,"hour");Wt("h",["hh",2],0,ab);Wt("k",["kk",2],0,FN);Wt("hmm",0,0,function(){return""+ab.apply(this)+qo(this.minutes(),2)});Wt("hmmss",0,0,function(){return""+ab.apply(this)+qo(this.minutes(),2)+qo(this.seconds(),2)});Wt("Hmm",0,0,function(){return""+this.hours()+qo(this.minutes(),2)});Wt("Hmmss",0,0,function(){return""+this.hours()+qo(this.minutes(),2)+qo(this.seconds(),2)});function XM(e,t){Wt(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}XM("a",!0);XM("A",!1);function KM(e,t){return t._meridiemParse}zt("a",KM);zt("A",KM);zt("H",dn,nb);zt("h",dn,Gh);zt("k",dn,Gh);zt("HH",dn,js);zt("hh",dn,js);zt("kk",dn,js);zt("hmm",NM);zt("hmmss",$M);zt("Hmm",NM);zt("Hmmss",$M);qr(["H","HH"],Vn);qr(["k","kk"],function(e,t,i){var o=wr(e);t[Vn]=o===24?0:o});qr(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e});qr(["h","hh"],function(e,t,i){t[Vn]=wr(e),lr(i).bigHour=!0});qr("hmm",function(e,t,i){var o=e.length-2;t[Vn]=wr(e.substr(0,o)),t[_o]=wr(e.substr(o)),lr(i).bigHour=!0});qr("hmmss",function(e,t,i){var o=e.length-4,h=e.length-2;t[Vn]=wr(e.substr(0,o)),t[_o]=wr(e.substr(o,2)),t[Sa]=wr(e.substr(h)),lr(i).bigHour=!0});qr("Hmm",function(e,t,i){var o=e.length-2;t[Vn]=wr(e.substr(0,o)),t[_o]=wr(e.substr(o))});qr("Hmmss",function(e,t,i){var o=e.length-4,h=e.length-2;t[Vn]=wr(e.substr(0,o)),t[_o]=wr(e.substr(o,2)),t[Sa]=wr(e.substr(h))});function BN(e){return(e+"").toLowerCase().charAt(0)==="p"}var NN=/[ap]\.?m?\.?/i,$N=Zh("Hours",!0);function jN(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var JM={calendar:PB,longDateFormat:zB,invalidDate:LB,ordinal:FB,dayOfMonthOrdinalParse:BB,relativeTime:$B,months:rN,monthsShort:VM,week:pN,weekdays:wN,weekdaysMin:bN,weekdaysShort:YM,meridiemParse:NN},gn={},hf={},hp;function UN(e,t){var i,o=Math.min(e.length,t.length);for(i=0;i<o;i+=1)if(e[i]!==t[i])return i;return o}function YT(e){return e&&e.toLowerCase().replace("_","-")}function VN(e){for(var t=0,i,o,h,f;t<e.length;){for(f=YT(e[t]).split("-"),i=f.length,o=YT(e[t+1]),o=o?o.split("-"):null;i>0;){if(h=T_(f.slice(0,i).join("-")),h)return h;if(o&&o.length>=i&&UN(f,o)>=i-1)break;i--}t++}return hp}function HN(e){return!!(e&&e.match("^[^/\\\\]*$"))}function T_(e){var t=null,i;if(gn[e]===void 0&&typeof Bg<"u"&&Bg&&Bg.exports&&HN(e))try{t=hp._abbr,i=require,i("./locale/"+e),$l(t)}catch{gn[e]=null}return gn[e]}function $l(e,t){var i;return e&&(is(t)?i=La(e):i=lb(e,t),i?hp=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),hp._abbr}function lb(e,t){if(t!==null){var i,o=JM;if(t.abbr=e,gn[e]!=null)LM("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),o=gn[e]._config;else if(t.parentLocale!=null)if(gn[t.parentLocale]!=null)o=gn[t.parentLocale]._config;else if(i=T_(t.parentLocale),i!=null)o=i._config;else return hf[t.parentLocale]||(hf[t.parentLocale]=[]),hf[t.parentLocale].push({name:e,config:t}),null;return gn[e]=new Jw(px(o,t)),hf[e]&&hf[e].forEach(function(h){lb(h.name,h.config)}),$l(e),gn[e]}else return delete gn[e],null}function WN(e,t){if(t!=null){var i,o,h=JM;gn[e]!=null&&gn[e].parentLocale!=null?gn[e].set(px(gn[e]._config,t)):(o=T_(e),o!=null&&(h=o._config),t=px(h,t),o==null&&(t.abbr=e),i=new Jw(t),i.parentLocale=gn[e],gn[e]=i),$l(e)}else gn[e]!=null&&(gn[e].parentLocale!=null?(gn[e]=gn[e].parentLocale,e===$l()&&$l(e)):gn[e]!=null&&delete gn[e]);return gn[e]}function La(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return hp;if(!ko(e)){if(t=T_(e),t)return t;e=[e]}return VN(e)}function GN(){return mx(gn)}function ub(e){var t,i=e._a;return i&&lr(e).overflow===-2&&(t=i[ba]<0||i[ba]>11?ba:i[Ho]<1||i[Ho]>ib(i[Ii],i[ba])?Ho:i[Vn]<0||i[Vn]>24||i[Vn]===24&&(i[_o]!==0||i[Sa]!==0||i[zu]!==0)?Vn:i[_o]<0||i[_o]>59?_o:i[Sa]<0||i[Sa]>59?Sa:i[zu]<0||i[zu]>999?zu:-1,lr(e)._overflowDayOfYear&&(t<Ii||t>Ho)&&(t=Ho),lr(e)._overflowWeeks&&t===-1&&(t=XB),lr(e)._overflowWeekday&&t===-1&&(t=KB),lr(e).overflow=t),e}var ZN=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qN=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,YN=/Z|[+-]\d\d(?::?\d\d)?/,og=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Fv=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],XN=/^\/?Date\((-?\d+)/i,KN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,JN={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function QM(e){var t,i,o=e._i,h=ZN.exec(o)||qN.exec(o),f,g,c,T,P=og.length,R=Fv.length;if(h){for(lr(e).iso=!0,t=0,i=P;t<i;t++)if(og[t][1].exec(h[1])){g=og[t][0],f=og[t][2]!==!1;break}if(g==null){e._isValid=!1;return}if(h[3]){for(t=0,i=R;t<i;t++)if(Fv[t][1].exec(h[3])){c=(h[2]||" ")+Fv[t][0];break}if(c==null){e._isValid=!1;return}}if(!f&&c!=null){e._isValid=!1;return}if(h[4])if(YN.exec(h[4]))T="Z";else{e._isValid=!1;return}e._f=g+(c||"")+(T||""),hb(e)}else e._isValid=!1}function QN(e,t,i,o,h,f){var g=[e8(e),VM.indexOf(t),parseInt(i,10),parseInt(o,10),parseInt(h,10)];return f&&g.push(parseInt(f,10)),g}function e8(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function t8(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r8(e,t,i){if(e){var o=YM.indexOf(e),h=new Date(t[0],t[1],t[2]).getDay();if(o!==h)return lr(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function n8(e,t,i){if(e)return JN[e];if(t)return 0;var o=parseInt(i,10),h=o%100,f=(o-h)/100;return f*60+h}function eA(e){var t=KN.exec(t8(e._i)),i;if(t){if(i=QN(t[4],t[3],t[2],t[5],t[6],t[7]),!r8(t[1],i,e))return;e._a=i,e._tzm=n8(t[8],t[9],t[10]),e._d=up.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),lr(e).rfc2822=!0}else e._isValid=!1}function i8(e){var t=XN.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(QM(e),e._isValid===!1)delete e._isValid;else return;if(eA(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Ct.createFromInputFallback(e)}Ct.createFromInputFallback=so("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Kc(e,t,i){return e??t??i}function s8(e){var t=new Date(Ct.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function cb(e){var t,i,o=[],h,f,g;if(!e._d){for(h=s8(e),e._w&&e._a[Ho]==null&&e._a[ba]==null&&o8(e),e._dayOfYear!=null&&(g=Kc(e._a[Ii],h[Ii]),(e._dayOfYear>Ff(g)||e._dayOfYear===0)&&(lr(e)._overflowDayOfYear=!0),i=up(g,0,e._dayOfYear),e._a[ba]=i.getUTCMonth(),e._a[Ho]=i.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=o[t]=h[t];for(;t<7;t++)e._a[t]=o[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Vn]===24&&e._a[_o]===0&&e._a[Sa]===0&&e._a[zu]===0&&(e._nextDay=!0,e._a[Vn]=0),e._d=(e._useUTC?up:dN).apply(null,o),f=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Vn]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==f&&(lr(e).weekdayMismatch=!0)}}function o8(e){var t,i,o,h,f,g,c,T,P;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(f=1,g=4,i=Kc(t.GG,e._a[Ii],cp(hn(),1,4).year),o=Kc(t.W,1),h=Kc(t.E,1),(h<1||h>7)&&(T=!0)):(f=e._locale._week.dow,g=e._locale._week.doy,P=cp(hn(),f,g),i=Kc(t.gg,e._a[Ii],P.year),o=Kc(t.w,P.week),t.d!=null?(h=t.d,(h<0||h>6)&&(T=!0)):t.e!=null?(h=t.e+f,(t.e<0||t.e>6)&&(T=!0)):h=f),o<1||o>Ea(i,f,g)?lr(e)._overflowWeeks=!0:T!=null?lr(e)._overflowWeekday=!0:(c=qM(i,o,h,f,g),e._a[Ii]=c.year,e._dayOfYear=c.dayOfYear)}Ct.ISO_8601=function(){};Ct.RFC_2822=function(){};function hb(e){if(e._f===Ct.ISO_8601){QM(e);return}if(e._f===Ct.RFC_2822){eA(e);return}e._a=[],lr(e).empty=!0;var t=""+e._i,i,o,h,f,g,c=t.length,T=0,P,R;for(h=OM(e._f,e._locale).match(Qw)||[],R=h.length,i=0;i<R;i++)f=h[i],o=(t.match(ZB(f,e))||[])[0],o&&(g=t.substr(0,t.indexOf(o)),g.length>0&&lr(e).unusedInput.push(g),t=t.slice(t.indexOf(o)+o.length),T+=o.length),vh[f]?(o?lr(e).empty=!1:lr(e).unusedTokens.push(f),YB(f,o,e)):e._strict&&!o&&lr(e).unusedTokens.push(f);lr(e).charsLeftOver=c-T,t.length>0&&lr(e).unusedInput.push(t),e._a[Vn]<=12&&lr(e).bigHour===!0&&e._a[Vn]>0&&(lr(e).bigHour=void 0),lr(e).parsedDateParts=e._a.slice(0),lr(e).meridiem=e._meridiem,e._a[Vn]=a8(e._locale,e._a[Vn],e._meridiem),P=lr(e).era,P!==null&&(e._a[Ii]=e._locale.erasConvertYear(P,e._a[Ii])),cb(e),ub(e)}function a8(e,t,i){var o;return i==null?t:e.meridiemHour!=null?e.meridiemHour(t,i):(e.isPM!=null&&(o=e.isPM(i),o&&t<12&&(t+=12),!o&&t===12&&(t=0)),t)}function l8(e){var t,i,o,h,f,g,c=!1,T=e._f.length;if(T===0){lr(e).invalidFormat=!0,e._d=new Date(NaN);return}for(h=0;h<T;h++)f=0,g=!1,t=Kw({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[h],hb(t),Xw(t)&&(g=!0),f+=lr(t).charsLeftOver,f+=lr(t).unusedTokens.length*10,lr(t).score=f,c?f<o&&(o=f,i=t):(o==null||f<o||g)&&(o=f,i=t,g&&(c=!0));Ml(e,i||t)}function u8(e){if(!e._d){var t=eb(e._i),i=t.day===void 0?t.date:t.day;e._a=zM([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(o){return o&&parseInt(o,10)}),cb(e)}}function c8(e){var t=new Cp(ub(tA(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function tA(e){var t=e._i,i=e._f;return e._locale=e._locale||La(e._l),t===null||i===void 0&&t===""?__({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),To(t)?new Cp(ub(t)):(Ep(t)?e._d=t:ko(i)?l8(e):i?hb(e):h8(e),Xw(e)||(e._d=null),e))}function h8(e){var t=e._i;is(t)?e._d=new Date(Ct.now()):Ep(t)?e._d=new Date(t.valueOf()):typeof t=="string"?i8(e):ko(t)?(e._a=zM(t.slice(0),function(i){return parseInt(i,10)}),cb(e)):$u(t)?u8(e):za(t)?e._d=new Date(t):Ct.createFromInputFallback(e)}function rA(e,t,i,o,h){var f={};return(t===!0||t===!1)&&(o=t,t=void 0),(i===!0||i===!1)&&(o=i,i=void 0),($u(e)&&Yw(e)||ko(e)&&e.length===0)&&(e=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=h,f._l=i,f._i=e,f._f=t,f._strict=o,c8(f)}function hn(e,t,i,o){return rA(e,t,i,o,!1)}var d8=so("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=hn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:__()}),f8=so("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=hn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:__()});function nA(e,t){var i,o;if(t.length===1&&ko(t[0])&&(t=t[0]),!t.length)return hn();for(i=t[0],o=1;o<t.length;++o)(!t[o].isValid()||t[o][e](i))&&(i=t[o]);return i}function p8(){var e=[].slice.call(arguments,0);return nA("isBefore",e)}function m8(){var e=[].slice.call(arguments,0);return nA("isAfter",e)}var g8=function(){return Date.now?Date.now():+new Date},df=["year","quarter","month","week","day","hour","minute","second","millisecond"];function y8(e){var t,i=!1,o,h=df.length;for(t in e)if(Dr(e,t)&&!(Mn.call(df,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(o=0;o<h;++o)if(e[df[o]]){if(i)return!1;parseFloat(e[df[o]])!==wr(e[df[o]])&&(i=!0)}return!0}function _8(){return this._isValid}function v8(){return Io(NaN)}function E_(e){var t=eb(e),i=t.year||0,o=t.quarter||0,h=t.month||0,f=t.week||t.isoWeek||0,g=t.day||0,c=t.hour||0,T=t.minute||0,P=t.second||0,R=t.millisecond||0;this._isValid=y8(t),this._milliseconds=+R+P*1e3+T*6e4+c*1e3*60*60,this._days=+g+f*7,this._months=+h+o*3+i*12,this._data={},this._locale=La(),this._bubble()}function Og(e){return e instanceof E_}function yx(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function x8(e,t,i){var o=Math.min(e.length,t.length),h=Math.abs(e.length-t.length),f=0,g;for(g=0;g<o;g++)wr(e[g])!==wr(t[g])&&f++;return f+h}function iA(e,t){Wt(e,0,0,function(){var i=this.utcOffset(),o="+";return i<0&&(i=-i,o="-"),o+qo(~~(i/60),2)+t+qo(~~i%60,2)})}iA("Z",":");iA("ZZ","");zt("Z",S_);zt("ZZ",S_);qr(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=db(S_,e)});var w8=/([\+\-]|\d\d)/gi;function db(e,t){var i=(t||"").match(e),o,h,f;return i===null?null:(o=i[i.length-1]||[],h=(o+"").match(w8)||["-",0,0],f=+(h[1]*60)+wr(h[2]),f===0?0:h[0]==="+"?f:-f)}function fb(e,t){var i,o;return t._isUTC?(i=t.clone(),o=(To(e)||Ep(e)?e.valueOf():hn(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+o),Ct.updateOffset(i,!1),i):hn(e).local()}function _x(e){return-Math.round(e._d.getTimezoneOffset())}Ct.updateOffset=function(){};function b8(e,t,i){var o=this._offset||0,h;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=db(S_,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&t&&(h=_x(this)),this._offset=e,this._isUTC=!0,h!=null&&this.add(h,"m"),o!==e&&(!t||this._changeInProgress?aA(this,Io(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Ct.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?o:_x(this)}function S8(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function k8(e){return this.utcOffset(0,e)}function T8(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_x(this),"m")),this}function E8(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=db(WB,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function C8(e){return this.isValid()?(e=e?hn(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function I8(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function P8(){if(!is(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Kw(e,this),e=tA(e),e._a?(t=e._isUTC?Yo(e._a):hn(e._a),this._isDSTShifted=this.isValid()&&x8(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function M8(){return this.isValid()?!this._isUTC:!1}function A8(){return this.isValid()?this._isUTC:!1}function sA(){return this.isValid()?this._isUTC&&this._offset===0:!1}var D8=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,z8=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Io(e,t){var i=e,o=null,h,f,g;return Og(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:za(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(o=D8.exec(e))?(h=o[1]==="-"?-1:1,i={y:0,d:wr(o[Ho])*h,h:wr(o[Vn])*h,m:wr(o[_o])*h,s:wr(o[Sa])*h,ms:wr(yx(o[zu]*1e3))*h}):(o=z8.exec(e))?(h=o[1]==="-"?-1:1,i={y:xu(o[2],h),M:xu(o[3],h),w:xu(o[4],h),d:xu(o[5],h),h:xu(o[6],h),m:xu(o[7],h),s:xu(o[8],h)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(g=R8(hn(i.from),hn(i.to)),i={},i.ms=g.milliseconds,i.M=g.months),f=new E_(i),Og(e)&&Dr(e,"_locale")&&(f._locale=e._locale),Og(e)&&Dr(e,"_isValid")&&(f._isValid=e._isValid),f}Io.fn=E_.prototype;Io.invalid=v8;function xu(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function XT(e,t){var i={};return i.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function R8(e,t){var i;return e.isValid()&&t.isValid()?(t=fb(t,e),e.isBefore(t)?i=XT(e,t):(i=XT(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function oA(e,t){return function(i,o){var h,f;return o!==null&&!isNaN(+o)&&(LM(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=i,i=o,o=f),h=Io(i,o),aA(this,h,e),this}}function aA(e,t,i,o){var h=t._milliseconds,f=yx(t._days),g=yx(t._months);e.isValid()&&(o=o??!0,g&&WM(e,lp(e,"Month")+g*i),f&&UM(e,"Date",lp(e,"Date")+f*i),h&&e._d.setTime(e._d.valueOf()+h*i),o&&Ct.updateOffset(e,f||g))}var L8=oA(1,"add"),O8=oA(-1,"subtract");function lA(e){return typeof e=="string"||e instanceof String}function F8(e){return To(e)||Ep(e)||lA(e)||za(e)||N8(e)||B8(e)||e===null||e===void 0}function B8(e){var t=$u(e)&&!Yw(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],h,f,g=o.length;for(h=0;h<g;h+=1)f=o[h],i=i||Dr(e,f);return t&&i}function N8(e){var t=ko(e),i=!1;return t&&(i=e.filter(function(o){return!za(o)&&lA(e)}).length===0),t&&i}function $8(e){var t=$u(e)&&!Yw(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],h,f;for(h=0;h<o.length;h+=1)f=o[h],i=i||Dr(e,f);return t&&i}function j8(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function U8(e,t){arguments.length===1&&(arguments[0]?F8(arguments[0])?(e=arguments[0],t=void 0):$8(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||hn(),o=fb(i,this).startOf("day"),h=Ct.calendarFormat(this,o)||"sameElse",f=t&&(Xo(t[h])?t[h].call(this,i):t[h]);return this.format(f||this.localeData().calendar(h,this,hn(i)))}function V8(){return new Cp(this)}function H8(e,t){var i=To(e)?e:hn(e);return this.isValid()&&i.isValid()?(t=oo(t)||"millisecond",t==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function W8(e,t){var i=To(e)?e:hn(e);return this.isValid()&&i.isValid()?(t=oo(t)||"millisecond",t==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function G8(e,t,i,o){var h=To(e)?e:hn(e),f=To(t)?t:hn(t);return this.isValid()&&h.isValid()&&f.isValid()?(o=o||"()",(o[0]==="("?this.isAfter(h,i):!this.isBefore(h,i))&&(o[1]===")"?this.isBefore(f,i):!this.isAfter(f,i))):!1}function Z8(e,t){var i=To(e)?e:hn(e),o;return this.isValid()&&i.isValid()?(t=oo(t)||"millisecond",t==="millisecond"?this.valueOf()===i.valueOf():(o=i.valueOf(),this.clone().startOf(t).valueOf()<=o&&o<=this.clone().endOf(t).valueOf())):!1}function q8(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Y8(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function X8(e,t,i){var o,h,f;if(!this.isValid())return NaN;if(o=fb(e,this),!o.isValid())return NaN;switch(h=(o.utcOffset()-this.utcOffset())*6e4,t=oo(t),t){case"year":f=Fg(this,o)/12;break;case"month":f=Fg(this,o);break;case"quarter":f=Fg(this,o)/3;break;case"second":f=(this-o)/1e3;break;case"minute":f=(this-o)/6e4;break;case"hour":f=(this-o)/36e5;break;case"day":f=(this-o-h)/864e5;break;case"week":f=(this-o-h)/6048e5;break;default:f=this-o}return i?f:Ks(f)}function Fg(e,t){if(e.date()<t.date())return-Fg(t,e);var i=(t.year()-e.year())*12+(t.month()-e.month()),o=e.clone().add(i,"months"),h,f;return t-o<0?(h=e.clone().add(i-1,"months"),f=(t-o)/(o-h)):(h=e.clone().add(i+1,"months"),f=(t-o)/(h-o)),-(i+f)||0}Ct.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Ct.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function K8(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function J8(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?Lg(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Xo(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Lg(i,"Z")):Lg(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Q8(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",i,o,h,f;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),i="["+e+'("]',o=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",h="-MM-DD[T]HH:mm:ss.SSS",f=t+'[")]',this.format(i+o+h+f)}function e$(e){e||(e=this.isUtc()?Ct.defaultFormatUtc:Ct.defaultFormat);var t=Lg(this,e);return this.localeData().postformat(t)}function t$(e,t){return this.isValid()&&(To(e)&&e.isValid()||hn(e).isValid())?Io({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function r$(e){return this.from(hn(),e)}function n$(e,t){return this.isValid()&&(To(e)&&e.isValid()||hn(e).isValid())?Io({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function i$(e){return this.to(hn(),e)}function uA(e){var t;return e===void 0?this._locale._abbr:(t=La(e),t!=null&&(this._locale=t),this)}var cA=so("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function hA(){return this._locale}var Iy=1e3,xh=60*Iy,Py=60*xh,dA=(365*400+97)*24*Py;function wh(e,t){return(e%t+t)%t}function fA(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-dA:new Date(e,t,i).valueOf()}function pA(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-dA:Date.UTC(e,t,i)}function s$(e){var t,i;if(e=oo(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?pA:fA,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=wh(t+(this._isUTC?0:this.utcOffset()*xh),Py);break;case"minute":t=this._d.valueOf(),t-=wh(t,xh);break;case"second":t=this._d.valueOf(),t-=wh(t,Iy);break}return this._d.setTime(t),Ct.updateOffset(this,!0),this}function o$(e){var t,i;if(e=oo(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?pA:fA,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Py-wh(t+(this._isUTC?0:this.utcOffset()*xh),Py)-1;break;case"minute":t=this._d.valueOf(),t+=xh-wh(t,xh)-1;break;case"second":t=this._d.valueOf(),t+=Iy-wh(t,Iy)-1;break}return this._d.setTime(t),Ct.updateOffset(this,!0),this}function a$(){return this._d.valueOf()-(this._offset||0)*6e4}function l$(){return Math.floor(this.valueOf()/1e3)}function u$(){return new Date(this.valueOf())}function c$(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function h$(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function d$(){return this.isValid()?this.toISOString():null}function f$(){return Xw(this)}function p$(){return Ml({},lr(this))}function m$(){return lr(this).overflow}function g$(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Wt("N",0,0,"eraAbbr");Wt("NN",0,0,"eraAbbr");Wt("NNN",0,0,"eraAbbr");Wt("NNNN",0,0,"eraName");Wt("NNNNN",0,0,"eraNarrow");Wt("y",["y",1],"yo","eraYear");Wt("y",["yy",2],0,"eraYear");Wt("y",["yyy",3],0,"eraYear");Wt("y",["yyyy",4],0,"eraYear");zt("N",pb);zt("NN",pb);zt("NNN",pb);zt("NNNN",C$);zt("NNNNN",I$);qr(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,o){var h=i._locale.erasParse(e,o,i._strict);h?lr(i).era=h:lr(i).invalidEra=e});zt("y",Wh);zt("yy",Wh);zt("yyy",Wh);zt("yyyy",Wh);zt("yo",P$);qr(["y","yy","yyy","yyyy"],Ii);qr(["yo"],function(e,t,i,o){var h;i._locale._eraYearOrdinalRegex&&(h=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[Ii]=i._locale.eraYearOrdinalParse(e,h):t[Ii]=parseInt(e,10)});function y$(e,t){var i,o,h,f=this._eras||La("en")._eras;for(i=0,o=f.length;i<o;++i){switch(typeof f[i].since){case"string":h=Ct(f[i].since).startOf("day"),f[i].since=h.valueOf();break}switch(typeof f[i].until){case"undefined":f[i].until=1/0;break;case"string":h=Ct(f[i].until).startOf("day").valueOf(),f[i].until=h.valueOf();break}}return f}function _$(e,t,i){var o,h,f=this.eras(),g,c,T;for(e=e.toUpperCase(),o=0,h=f.length;o<h;++o)if(g=f[o].name.toUpperCase(),c=f[o].abbr.toUpperCase(),T=f[o].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(c===e)return f[o];break;case"NNNN":if(g===e)return f[o];break;case"NNNNN":if(T===e)return f[o];break}else if([g,c,T].indexOf(e)>=0)return f[o]}function v$(e,t){var i=e.since<=e.until?1:-1;return t===void 0?Ct(e.since).year():Ct(e.since).year()+(t-e.offset)*i}function x$(){var e,t,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return o[e].name;return""}function w$(){var e,t,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return o[e].narrow;return""}function b$(){var e,t,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return o[e].abbr;return""}function S$(){var e,t,i,o,h=this.localeData().eras();for(e=0,t=h.length;e<t;++e)if(i=h[e].since<=h[e].until?1:-1,o=this.clone().startOf("day").valueOf(),h[e].since<=o&&o<=h[e].until||h[e].until<=o&&o<=h[e].since)return(this.year()-Ct(h[e].since).year())*i+h[e].offset;return this.year()}function k$(e){return Dr(this,"_erasNameRegex")||mb.call(this),e?this._erasNameRegex:this._erasRegex}function T$(e){return Dr(this,"_erasAbbrRegex")||mb.call(this),e?this._erasAbbrRegex:this._erasRegex}function E$(e){return Dr(this,"_erasNarrowRegex")||mb.call(this),e?this._erasNarrowRegex:this._erasRegex}function pb(e,t){return t.erasAbbrRegex(e)}function C$(e,t){return t.erasNameRegex(e)}function I$(e,t){return t.erasNarrowRegex(e)}function P$(e,t){return t._eraYearOrdinalRegex||Wh}function mb(){var e=[],t=[],i=[],o=[],h,f,g,c,T,P=this.eras();for(h=0,f=P.length;h<f;++h)g=Ta(P[h].name),c=Ta(P[h].abbr),T=Ta(P[h].narrow),t.push(g),e.push(c),i.push(T),o.push(g),o.push(c),o.push(T);this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}Wt(0,["gg",2],0,function(){return this.weekYear()%100});Wt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function C_(e,t){Wt(0,[e,e.length],0,t)}C_("gggg","weekYear");C_("ggggg","weekYear");C_("GGGG","isoWeekYear");C_("GGGGG","isoWeekYear");zt("G",b_);zt("g",b_);zt("GG",dn,js);zt("gg",dn,js);zt("GGGG",rb,tb);zt("gggg",rb,tb);zt("GGGGG",w_,v_);zt("ggggg",w_,v_);Pp(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,o){t[o.substr(0,2)]=wr(e)});Pp(["gg","GG"],function(e,t,i,o){t[o]=Ct.parseTwoDigitYear(e)});function M$(e){return mA.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function A$(e){return mA.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function D$(){return Ea(this.year(),1,4)}function z$(){return Ea(this.isoWeekYear(),1,4)}function R$(){var e=this.localeData()._week;return Ea(this.year(),e.dow,e.doy)}function L$(){var e=this.localeData()._week;return Ea(this.weekYear(),e.dow,e.doy)}function mA(e,t,i,o,h){var f;return e==null?cp(this,o,h).year:(f=Ea(e,o,h),t>f&&(t=f),O$.call(this,e,t,i,o,h))}function O$(e,t,i,o,h){var f=qM(e,t,i,o,h),g=up(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}Wt("Q",0,"Qo","quarter");zt("Q",FM);qr("Q",function(e,t){t[ba]=(wr(e)-1)*3});function F$(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Wt("D",["DD",2],"Do","date");zt("D",dn,Gh);zt("DD",dn,js);zt("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});qr(["D","DD"],Ho);qr("Do",function(e,t){t[Ho]=wr(e.match(dn)[0])});var gA=Zh("Date",!0);Wt("DDD",["DDDD",3],"DDDo","dayOfYear");zt("DDD",x_);zt("DDDD",BM);qr(["DDD","DDDD"],function(e,t,i){i._dayOfYear=wr(e)});function B$(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Wt("m",["mm",2],0,"minute");zt("m",dn,nb);zt("mm",dn,js);qr(["m","mm"],_o);var N$=Zh("Minutes",!1);Wt("s",["ss",2],0,"second");zt("s",dn,nb);zt("ss",dn,js);qr(["s","ss"],Sa);var $$=Zh("Seconds",!1);Wt("S",0,0,function(){return~~(this.millisecond()/100)});Wt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Wt(0,["SSS",3],0,"millisecond");Wt(0,["SSSS",4],0,function(){return this.millisecond()*10});Wt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Wt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Wt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Wt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Wt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});zt("S",x_,FM);zt("SS",x_,js);zt("SSS",x_,BM);var Al,yA;for(Al="SSSS";Al.length<=9;Al+="S")zt(Al,Wh);function j$(e,t){t[zu]=wr(("0."+e)*1e3)}for(Al="S";Al.length<=9;Al+="S")qr(Al,j$);yA=Zh("Milliseconds",!1);Wt("z",0,0,"zoneAbbr");Wt("zz",0,0,"zoneName");function U$(){return this._isUTC?"UTC":""}function V$(){return this._isUTC?"Coordinated Universal Time":""}var ht=Cp.prototype;ht.add=L8;ht.calendar=U8;ht.clone=V8;ht.diff=X8;ht.endOf=o$;ht.format=e$;ht.from=t$;ht.fromNow=r$;ht.to=n$;ht.toNow=i$;ht.get=QB;ht.invalidAt=m$;ht.isAfter=H8;ht.isBefore=W8;ht.isBetween=G8;ht.isSame=Z8;ht.isSameOrAfter=q8;ht.isSameOrBefore=Y8;ht.isValid=f$;ht.lang=cA;ht.locale=uA;ht.localeData=hA;ht.max=f8;ht.min=d8;ht.parsingFlags=p$;ht.set=eN;ht.startOf=s$;ht.subtract=O8;ht.toArray=c$;ht.toObject=h$;ht.toDate=u$;ht.toISOString=J8;ht.inspect=Q8;typeof Symbol<"u"&&Symbol.for!=null&&(ht[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ht.toJSON=d$;ht.toString=K8;ht.unix=l$;ht.valueOf=a$;ht.creationData=g$;ht.eraName=x$;ht.eraNarrow=w$;ht.eraAbbr=b$;ht.eraYear=S$;ht.year=jM;ht.isLeapYear=JB;ht.weekYear=M$;ht.isoWeekYear=A$;ht.quarter=ht.quarters=F$;ht.month=GM;ht.daysInMonth=uN;ht.week=ht.weeks=yN;ht.isoWeek=ht.isoWeeks=_N;ht.weeksInYear=R$;ht.weeksInWeekYear=L$;ht.isoWeeksInYear=D$;ht.isoWeeksInISOWeekYear=z$;ht.date=gA;ht.day=ht.days=AN;ht.weekday=DN;ht.isoWeekday=zN;ht.dayOfYear=B$;ht.hour=ht.hours=$N;ht.minute=ht.minutes=N$;ht.second=ht.seconds=$$;ht.millisecond=ht.milliseconds=yA;ht.utcOffset=b8;ht.utc=k8;ht.local=T8;ht.parseZone=E8;ht.hasAlignedHourOffset=C8;ht.isDST=I8;ht.isLocal=M8;ht.isUtcOffset=A8;ht.isUtc=sA;ht.isUTC=sA;ht.zoneAbbr=U$;ht.zoneName=V$;ht.dates=so("dates accessor is deprecated. Use date instead.",gA);ht.months=so("months accessor is deprecated. Use month instead",GM);ht.years=so("years accessor is deprecated. Use year instead",jM);ht.zone=so("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",S8);ht.isDSTShifted=so("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",P8);function H$(e){return hn(e*1e3)}function W$(){return hn.apply(null,arguments).parseZone()}function _A(e){return e}var zr=Jw.prototype;zr.calendar=MB;zr.longDateFormat=RB;zr.invalidDate=OB;zr.ordinal=NB;zr.preparse=_A;zr.postformat=_A;zr.relativeTime=jB;zr.pastFuture=UB;zr.set=IB;zr.eras=y$;zr.erasParse=_$;zr.erasConvertYear=v$;zr.erasAbbrRegex=T$;zr.erasNameRegex=k$;zr.erasNarrowRegex=E$;zr.months=sN;zr.monthsShort=oN;zr.monthsParse=lN;zr.monthsRegex=hN;zr.monthsShortRegex=cN;zr.week=fN;zr.firstDayOfYear=gN;zr.firstDayOfWeek=mN;zr.weekdays=EN;zr.weekdaysMin=IN;zr.weekdaysShort=CN;zr.weekdaysParse=MN;zr.weekdaysRegex=RN;zr.weekdaysShortRegex=LN;zr.weekdaysMinRegex=ON;zr.isPM=BN;zr.meridiem=jN;function My(e,t,i,o){var h=La(),f=Yo().set(o,t);return h[i](f,e)}function vA(e,t,i){if(za(e)&&(t=e,e=void 0),e=e||"",t!=null)return My(e,t,i,"month");var o,h=[];for(o=0;o<12;o++)h[o]=My(e,o,i,"month");return h}function gb(e,t,i,o){typeof e=="boolean"?(za(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,za(t)&&(i=t,t=void 0),t=t||"");var h=La(),f=e?h._week.dow:0,g,c=[];if(i!=null)return My(t,(i+f)%7,o,"day");for(g=0;g<7;g++)c[g]=My(t,(g+f)%7,o,"day");return c}function G$(e,t){return vA(e,t,"months")}function Z$(e,t){return vA(e,t,"monthsShort")}function q$(e,t,i){return gb(e,t,i,"weekdays")}function Y$(e,t,i){return gb(e,t,i,"weekdaysShort")}function X$(e,t,i){return gb(e,t,i,"weekdaysMin")}$l("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=wr(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});Ct.lang=so("moment.lang is deprecated. Use moment.locale instead.",$l);Ct.langData=so("moment.langData is deprecated. Use moment.localeData instead.",La);var ma=Math.abs;function K$(){var e=this._data;return this._milliseconds=ma(this._milliseconds),this._days=ma(this._days),this._months=ma(this._months),e.milliseconds=ma(e.milliseconds),e.seconds=ma(e.seconds),e.minutes=ma(e.minutes),e.hours=ma(e.hours),e.months=ma(e.months),e.years=ma(e.years),this}function xA(e,t,i,o){var h=Io(t,i);return e._milliseconds+=o*h._milliseconds,e._days+=o*h._days,e._months+=o*h._months,e._bubble()}function J$(e,t){return xA(this,e,t,1)}function Q$(e,t){return xA(this,e,t,-1)}function KT(e){return e<0?Math.floor(e):Math.ceil(e)}function ej(){var e=this._milliseconds,t=this._days,i=this._months,o=this._data,h,f,g,c,T;return e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0||(e+=KT(vx(i)+t)*864e5,t=0,i=0),o.milliseconds=e%1e3,h=Ks(e/1e3),o.seconds=h%60,f=Ks(h/60),o.minutes=f%60,g=Ks(f/60),o.hours=g%24,t+=Ks(g/24),T=Ks(wA(t)),i+=T,t-=KT(vx(T)),c=Ks(i/12),i%=12,o.days=t,o.months=i,o.years=c,this}function wA(e){return e*4800/146097}function vx(e){return e*146097/4800}function tj(e){if(!this.isValid())return NaN;var t,i,o=this._milliseconds;if(e=oo(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+o/864e5,i=this._months+wA(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(vx(this._months)),e){case"week":return t/7+o/6048e5;case"day":return t+o/864e5;case"hour":return t*24+o/36e5;case"minute":return t*1440+o/6e4;case"second":return t*86400+o/1e3;case"millisecond":return Math.floor(t*864e5)+o;default:throw new Error("Unknown unit "+e)}}function Oa(e){return function(){return this.as(e)}}var bA=Oa("ms"),rj=Oa("s"),nj=Oa("m"),ij=Oa("h"),sj=Oa("d"),oj=Oa("w"),aj=Oa("M"),lj=Oa("Q"),uj=Oa("y"),cj=bA;function hj(){return Io(this)}function dj(e){return e=oo(e),this.isValid()?this[e+"s"]():NaN}function Ju(e){return function(){return this.isValid()?this._data[e]:NaN}}var fj=Ju("milliseconds"),pj=Ju("seconds"),mj=Ju("minutes"),gj=Ju("hours"),yj=Ju("days"),_j=Ju("months"),vj=Ju("years");function xj(){return Ks(this.days()/7)}var _a=Math.round,dh={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function wj(e,t,i,o,h){return h.relativeTime(t||1,!!i,e,o)}function bj(e,t,i,o){var h=Io(e).abs(),f=_a(h.as("s")),g=_a(h.as("m")),c=_a(h.as("h")),T=_a(h.as("d")),P=_a(h.as("M")),R=_a(h.as("w")),A=_a(h.as("y")),M=f<=i.ss&&["s",f]||f<i.s&&["ss",f]||g<=1&&["m"]||g<i.m&&["mm",g]||c<=1&&["h"]||c<i.h&&["hh",c]||T<=1&&["d"]||T<i.d&&["dd",T];return i.w!=null&&(M=M||R<=1&&["w"]||R<i.w&&["ww",R]),M=M||P<=1&&["M"]||P<i.M&&["MM",P]||A<=1&&["y"]||["yy",A],M[2]=t,M[3]=+e>0,M[4]=o,wj.apply(null,M)}function Sj(e){return e===void 0?_a:typeof e=="function"?(_a=e,!0):!1}function kj(e,t){return dh[e]===void 0?!1:t===void 0?dh[e]:(dh[e]=t,e==="s"&&(dh.ss=t-1),!0)}function Tj(e,t){if(!this.isValid())return this.localeData().invalidDate();var i=!1,o=dh,h,f;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(i=e),typeof t=="object"&&(o=Object.assign({},dh,t),t.s!=null&&t.ss==null&&(o.ss=t.s-1)),h=this.localeData(),f=bj(this,!i,o,h),i&&(f=h.pastFuture(+this,f)),h.postformat(f)}var Bv=Math.abs;function Yc(e){return(e>0)-(e<0)||+e}function I_(){if(!this.isValid())return this.localeData().invalidDate();var e=Bv(this._milliseconds)/1e3,t=Bv(this._days),i=Bv(this._months),o,h,f,g,c=this.asSeconds(),T,P,R,A;return c?(o=Ks(e/60),h=Ks(o/60),e%=60,o%=60,f=Ks(i/12),i%=12,g=e?e.toFixed(3).replace(/\.?0+$/,""):"",T=c<0?"-":"",P=Yc(this._months)!==Yc(c)?"-":"",R=Yc(this._days)!==Yc(c)?"-":"",A=Yc(this._milliseconds)!==Yc(c)?"-":"",T+"P"+(f?P+f+"Y":"")+(i?P+i+"M":"")+(t?R+t+"D":"")+(h||o||e?"T":"")+(h?A+h+"H":"")+(o?A+o+"M":"")+(e?A+g+"S":"")):"P0D"}var Ir=E_.prototype;Ir.isValid=_8;Ir.abs=K$;Ir.add=J$;Ir.subtract=Q$;Ir.as=tj;Ir.asMilliseconds=bA;Ir.asSeconds=rj;Ir.asMinutes=nj;Ir.asHours=ij;Ir.asDays=sj;Ir.asWeeks=oj;Ir.asMonths=aj;Ir.asQuarters=lj;Ir.asYears=uj;Ir.valueOf=cj;Ir._bubble=ej;Ir.clone=hj;Ir.get=dj;Ir.milliseconds=fj;Ir.seconds=pj;Ir.minutes=mj;Ir.hours=gj;Ir.days=yj;Ir.weeks=xj;Ir.months=_j;Ir.years=vj;Ir.humanize=Tj;Ir.toISOString=I_;Ir.toString=I_;Ir.toJSON=I_;Ir.locale=uA;Ir.localeData=hA;Ir.toIsoString=so("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",I_);Ir.lang=cA;Wt("X",0,0,"unix");Wt("x",0,0,"valueOf");zt("x",b_);zt("X",GB);qr("X",function(e,t,i){i._d=new Date(parseFloat(e)*1e3)});qr("x",function(e,t,i){i._d=new Date(wr(e))});//! moment.js
Ct.version="2.30.1";EB(hn);Ct.fn=ht;Ct.min=p8;Ct.max=m8;Ct.now=g8;Ct.utc=Yo;Ct.unix=H$;Ct.months=G$;Ct.isDate=Ep;Ct.locale=$l;Ct.invalid=__;Ct.duration=Io;Ct.isMoment=To;Ct.weekdays=q$;Ct.parseZone=W$;Ct.localeData=La;Ct.isDuration=Og;Ct.monthsShort=Z$;Ct.weekdaysMin=X$;Ct.defineLocale=lb;Ct.updateLocale=WN;Ct.locales=GN;Ct.weekdaysShort=Y$;Ct.normalizeUnits=oo;Ct.relativeTimeRounding=Sj;Ct.relativeTimeThreshold=kj;Ct.calendarFormat=j8;Ct.prototype=ht;Ct.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Ej=/[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)%2C\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/,Cj=e=>{const t=e.match(Ej);return t?t[0].split("%2C").map(i=>parseFloat(i)):null},Ij=(e,t)=>{const i=Cj(e);if(i)t._location=[parseFloat(i[1]),parseFloat(i[0])],t.file=null;else if(e.indexOf("From: ")===0)t.username=e.replace("From: ","");else if(e.indexOf("Sent: ")===0)t.timeString=e.replace("Sent: ",""),t.time=Pj(t.timeString);else if(e.indexOf("Attachment: ")===0&&e.indexOf(".jpeg")>-1)t.file=e.substring(12,e.indexOf(".jpeg")+5);else if(e.indexOf("Attachment: ")===0&&e.indexOf(".jpg")>-1)t.file=e.substring(12,e.indexOf(".jpg")+4);else if(e.indexOf("Attachment: ")===0&&e.indexOf("jpeg")>-1&&e.indexOf("no filename")>-1){const o=Ct.parseZone(t.timeString).format("YYYY-MM-DD-HH-mm-ss");t.file=`attachment-${o}.jpg`}else!t.file&&!t.message&&e.indexOf("Type: ")===-1&&e.indexOf("Received: ")===-1&&e.indexOf("Conversation: ")===-1&&(t.message=e)},Pj=e=>new Date(e),Mj=e=>{const t={};let i={},o=!1,h,f=0;for(const[g,c]of e.entries()){Ij(c,i);let T=c.indexOf("From: ")===0;o&&(T?(t[f]=i,h=i.username,i={},f++):g===e.length-1&&i&&(i.username=h,t[f]=i)),T&&!o&&(o=!0)}return t};function Aj({text:e,msgPosition:t}){if(!e)return;const i=e.split(`
`),o={type:"FeatureCollection",features:[]};let h={};const f=Mj(i);return Object.values(f).forEach((c,T)=>{if(c._location){h={type:"Feature",properties:{},geometry:{type:"Point",coordinates:c._location}};let P;switch(t){case"before":P=qw(f,T);break;case"after":P=Zw(f,T);break;default:P=Gw(f,T);break}h.properties={...P},o.features.push(h)}}),o}function Dj(e){if(e)return e[0]==="{"?TB:e.indexOf("group-v2-change")>-1?Aj:wB}function zj({files:e,msgPosition:t}){const[i,o]=Ht.useState({type:"FeatureCollection",features:[]});return Ht.useEffect(()=>{if(!e)return;let f=[];for(let g in e){const T=Dj(e[g])({text:e[g],msgPosition:t});f=f.concat(T.features)}o(g=>({type:"FeatureCollection",features:[...g.features,...f]}))},[e]),[i,()=>{o({type:"FeatureCollection",features:[]})}]}function Rj(){const[e,t]=Ht.useState(null),[i,o]=hB({msgPosition:"closest"}),[h,f,g,c,T]=fB(),[P,R]=zj({files:T,msgPosition:i.msgPosition}),A=()=>{g(),R()},M=()=>{t(null)};Ht.useEffect(()=>{t(null)},[i.msgPosition]);let N;i.msgPosition==="before"?N=We.jsx(ln,{id:"app.config.closestPreviousMsg",defaultMessage:"previous"}):i.msgPosition==="after"?N=We.jsx(ln,{id:"app.config.closestNextMsg",defaultMessage:"next"}):N=We.jsx(ln,{id:"app.config.closestMsg",defaultMessage:"closest"});const Y=T&&P&&P.features.length>0,U=T&&P&&P.features.length===0;return We.jsxs("div",{className:"app",children:[We.jsxs("header",{className:"header",children:[We.jsxs("div",{className:"top",children:[We.jsx(J6,{onOptionClick:te=>{te==="options"&&t(We.jsx(cB,{settings:i,onChange:o}))}}),We.jsx(uB,{isOpen:e!==null,onClose:M,content:e})]}),We.jsxs("h1",{className:Y?"titleSmall":"",children:[We.jsx("img",{src:hI,className:"logo",alt:"logo"})," ChatMap"]}),Y?We.jsxs("div",{className:"fileOtions",children:[We.jsx(K6,{data:P,filename:"chat-locations"}),We.jsx("button",{onClick:A,className:"secondaryButton",children:We.jsx(ln,{id:"app.uploadNewFile",defaultMessage:"Upload new file"})})]}):We.jsxs(We.Fragment,{children:[We.jsx("p",{className:"subtitle",children:We.jsx(ln,{id:"app.subtitle",defaultMessage:"Export a chat from the app and visualize the locations shared in the conversation"})}),We.jsx("p",{className:"highlighted",children:We.jsx(ln,{id:"app.supportedApps",defaultMessage:"Now it works with WhatsApp, Telegram or Signal!"})})]})]}),!T&&We.jsxs(We.Fragment,{children:[We.jsx("div",{className:"fileUpload",children:We.jsx(A4,{onDataFileLoad:f,onFilesLoad:h})}),We.jsxs("p",{className:"configDesc",children:[We.jsx(ln,{id:"app.config.msgPositionTextStart",defaultMessage:"It will search for locations and the"})," ",We.jsx("strong",{children:N})," ",We.jsx(ln,{id:"app.config.msgPositionTextEnd",defaultMessage:"message from the same user."})]}),We.jsxs("div",{className:"infoLinks",children:[We.jsxs("div",{className:"copy",children:[We.jsx("a",{className:"github",href:"https://github.com/hotosm/chatmap"}),We.jsx("span",{children:"Free and Open Source Software"})]}),We.jsx("a",{href:"https://www.hotosm.org/privacy",children:"We collect zero data. https://www.hotosm.org/privacy"})]})]}),Y&&We.jsx("div",{className:"data",children:We.jsx("div",{className:"map",children:We.jsx(X6,{data:P,dataFiles:c})})}),U&&We.jsxs(We.Fragment,{children:[We.jsx("h2",{children:We.jsx(ln,{id:"app.nolocations",defaultMessage:"No locations found in this file"})}),We.jsx("button",{onClick:A,className:"secondaryButton",children:We.jsx(ln,{id:"app.uploadNewFile",defaultMessage:"Upload new file"})})]})]})}class Lj extends ju.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){if(this.state.hasError){const t=`${this.state.error.fileName}(${this.state.error.lineNumber}): 
 ${this.state.error.toString()} 
 ${this.state.error.stack}`,i=`mailto:emilio.mariscal@hotosm.org?subject=ChatMap Error&body=Hi, something went wrong with chatmap: ${t}`;return We.jsxs("div",{className:"errorMessage",children:[We.jsx("header",{className:"header",children:We.jsxs("h1",{className:"title",children:[We.jsx("img",{src:hI,className:"logo",alt:"logo"})," ChatMap"]})}),We.jsxs("div",{children:[We.jsx("h2",{children:"Oops! something went wrong 🫢"}),We.jsx("h3",{children:"Let us know of this error so we can fix it as soon as possible."}),We.jsxs("p",{children:[We.jsxs("strong",{className:"highlighted",children:["Please, send the detail below to ",We.jsx("a",{href:i,children:"emilio.mariscal@hotosm.org"})]}),We.jsx("br",{}),"or create an issue in ",We.jsx("a",{href:"https://github.com/hotosm/chatmap/issues",children:"github.com/hotosm/chatmap/issues"})]}),We.jsxs("div",{className:"buttons",children:[We.jsx("a",{className:"primaryButton",href:"/",children:"Go back"}),We.jsx("a",{className:"secondaryButton",href:i,children:"Send error report"})]}),We.jsxs("pre",{children:[We.jsx("strong",{children:"Error:"})," ",t]})]})]})}return this.props.children}}const Oj={"app.subtitle":"Export a chat from the app and visualize the locations shared in the conversation","app.config.msgPositionTextStart":"It will search for locations and the","app.config.msgPositionTextEnd":"message from the same user.","app.config.closestPreviousMsg":"previous","app.config.closestNextMsg":"next","app.config.closestMsg":"closest","app.uploadNewFile":"Upload new file","app.download":"Download","app.options":"Options","app.uploadLabel":"Upload or drag a file right here","app.nolocations":"No locations found in this file","app.supportedApps":"Now it works with WhatsApp, Telegram or Signal!"},Fj={"app.subtitle":"Exporta un chat desde la aplicación y visualiza las ubicaciones compartidas en la conversación","app.config.msgPositionTextStart":"Buscará localizaciones y el","app.config.msgPositionTextEnd":"mensaje del mismo usuario.","app.config.closestPreviousMsg":"anterior","app.config.closestNextMsg":"siguiente","app.config.closestMsg":"más cercano","app.uploadNewFile":"Subir un nuevo archivo","app.download":"Descargar","app.options":"Opciones","app.uploadLabel":"Sube o arrastra un archivo aquí mismo","app.nolocations":"No se han encontrado ubicaciones en este archivo","app.loading":"Cargando","app.supportedApps":"Ahora funciona con WhatsApp, Telegram o Signal!"},Bj={"app.subtitle":"Exportar uma chat da aplicação e visualizar localizações partilhadas na conversa","app.config.msgPositionTextStart":"Procurará locais e o","app.config.msgPositionTextEnd":"mensagem do mesmo utilizador.","app.config.closestPreviousMsg":"anterior","app.config.closestNextMsg":"seguinte","app.config.closestMsg":"mais próximo","app.uploadNewFile":"Carregar um novo ficheiro","app.download":"Descarregar","app.options":"Opções","app.uploadLabel":"Carregue ou arraste um ficheiro aqui mesmo","app.nolocations":"Não foram encontrados locais neste arquivo.","app.loading":"Carregando","app.supportedApps":"Agora funciona com WhatsApp, Telegram e Signal!"},Nv={en:Oj,es:Fj,pt:Bj},Nj=()=>{const e=navigator.language.slice(0,2);return e in Nv?Nv[e]:Nv.en},$j=$v.createRoot(document.getElementById("root"));$j.render(We.jsx(ju.StrictMode,{children:We.jsx(I4,{locale:navigator.language,messages:Nj(),children:We.jsx(Lj,{children:We.jsx(Rj,{})})})}))});export default jj();
//# sourceMappingURL=index-yu5xyEtM.js.map
