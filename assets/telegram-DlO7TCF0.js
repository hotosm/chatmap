import{C as t}from"./chatmap-Cp8ZBRcC.js";const o=t=>t.substring(t.lastIndexOf("/")+1,t.length),e=t=>t.location,i=t=>new Date(t),n=t=>{const e=[];return t.forEach((t=>{const n=(t=>{let e="",n={time:i(t.date),username:t.from};return Array.isArray(t.text)?t.text.forEach((t=>{"link"===t.type&&(e=t.text)})):""!==t.text&&(e=t.text),n.message=e,t.location_information&&(n.location=[t.location_information.latitude,t.location_information.longitude]),t.photo&&(n.file=o(t.photo)),t.file&&"video/mp4"===t.mime_type&&(n.file=o(t.file)),t.file&&["audio/ogg","audio/opus","audio/mp3","audio/m4a","audio/wav"].indexOf(t.mime_type)>-1&&(n.file=o(t.file)),n})(t);n&&e.push(n)})),e};function a({text:o,options:i}){if(!o)return;const a=JSON.parse(o),r=n(a.messages);return{geoJSON:new t(r,e,i).pairContentAndLocations()}}export{a as default};
